{
  "1133afb227e0ca42287fbc2ce96a9831d0eacc6f": {
    "hash": "1133afb227e0ca42287fbc2ce96a9831d0eacc6f",
    "message": "fix: Truncation of text in taxonmic filter (#11775)",
    "diff": "commit 1133afb227e0ca42287fbc2ce96a9831d0eacc6f\nAuthor: Ben White <ben@benjackwhite.co.uk>\nDate:   Mon Sep 12 14:48:59 2022 +0200\n\n    fix: Truncation of text in taxonmic filter (#11775)\n\ndiff --git a/frontend/src/lib/components/TaxonomicFilter/InfiniteList.tsx b/frontend/src/lib/components/TaxonomicFilter/InfiniteList.tsx\nindex 7e079ebfd..921b01bbb 100644\n--- a/frontend/src/lib/components/TaxonomicFilter/InfiniteList.tsx\n+++ b/frontend/src/lib/components/TaxonomicFilter/InfiniteList.tsx\n@@ -131,10 +131,12 @@ const renderItemContents = ({\n             {listGroupType === TaxonomicFilterGroupType.Elements ? (\n                 <PropertyKeyInfo type=\"element\" value={item.name ?? ''} disablePopover className=\"w-full\" />\n             ) : (\n-                <div className=\"truncate\" title={group.getName(item) || item.name || ''}>\n+                <>\n                     {group.getIcon ? icon : null}\n-                    {group.getName(item) || item.name || ''}\n-                </div>\n+                    <span className=\"truncate\" title={group.getName(item) || item.name || ''}>\n+                        {group.getName(item) || item.name || ''}\n+                    </span>\n+                </>\n             )}\n         </div>\n     )\n"
  },
  "53d8810c9e37b0457209ebc6893c1a3b58fed0ba": {
    "hash": "53d8810c9e37b0457209ebc6893c1a3b58fed0ba",
    "message": "fix: URL/Paths truncation (#11755)",
    "diff": "commit 53d8810c9e37b0457209ebc6893c1a3b58fed0ba\nAuthor: Ben White <ben@benjackwhite.co.uk>\nDate:   Fri Sep 9 15:51:32 2022 +0200\n\n    fix: URL/Paths truncation (#11755)\n\ndiff --git a/frontend/src/lib/components/TaxonomicFilter/InfiniteList.tsx b/frontend/src/lib/components/TaxonomicFilter/InfiniteList.tsx\nindex ab8447c83..7e079ebfd 100644\n--- a/frontend/src/lib/components/TaxonomicFilter/InfiniteList.tsx\n+++ b/frontend/src/lib/components/TaxonomicFilter/InfiniteList.tsx\n@@ -131,10 +131,10 @@ const renderItemContents = ({\n             {listGroupType === TaxonomicFilterGroupType.Elements ? (\n                 <PropertyKeyInfo type=\"element\" value={item.name ?? ''} disablePopover className=\"w-full\" />\n             ) : (\n-                <>\n+                <div className=\"truncate\" title={group.getName(item) || item.name || ''}>\n                     {group.getIcon ? icon : null}\n                     {group.getName(item) || item.name || ''}\n-                </>\n+                </div>\n             )}\n         </div>\n     )\n"
  },
  "918d6c37faa14bba032a71d4d856bd3cdd8aa16c": {
    "hash": "918d6c37faa14bba032a71d4d856bd3cdd8aa16c",
    "message": "fix(annotations): Fix annotations crashing with \"Compare previous\" (#11681)\n    \n    * fix: Use dates from chart instead of labels\n    \n    * Use density-proof approach\n    \n    Co-authored-by: Michael Matloka <dev@twixes.com>",
    "diff": "commit 918d6c37faa14bba032a71d4d856bd3cdd8aa16c\nAuthor: Ben White <ben@benjackwhite.co.uk>\nDate:   Tue Sep 6 17:42:45 2022 +0200\n\n    fix(annotations): Fix annotations crashing with \"Compare previous\" (#11681)\n    \n    * fix: Use dates from chart instead of labels\n    \n    * Use density-proof approach\n    \n    Co-authored-by: Michael Matloka <dev@twixes.com>\n\ndiff --git a/frontend/src/lib/components/AnnotationsOverlay/AnnotationsOverlay.tsx b/frontend/src/lib/components/AnnotationsOverlay/AnnotationsOverlay.tsx\nindex c358450ee..edf4b1c31 100644\n--- a/frontend/src/lib/components/AnnotationsOverlay/AnnotationsOverlay.tsx\n+++ b/frontend/src/lib/components/AnnotationsOverlay/AnnotationsOverlay.tsx\n@@ -33,6 +33,7 @@ export const annotationScopeToLabel: Record<AnnotationScope, string> = {\n }\n \n export interface AnnotationsOverlayProps {\n+    dates: string[]\n     chart: Chart\n     chartWidth: number\n     chartHeight: number\n@@ -48,7 +49,7 @@ interface AnnotationsOverlayCSSProperties extends React.CSSProperties {\n     '--annotations-overlay-active-badge-top'?: `${string}px`\n }\n \n-export function AnnotationsOverlay({ chart, chartWidth, chartHeight }: AnnotationsOverlayProps): JSX.Element {\n+export function AnnotationsOverlay({ chart, chartWidth, chartHeight, dates }: AnnotationsOverlayProps): JSX.Element {\n     const { isPopoverShown, activeBadgeCoordinates } = useValues(annotationsOverlayLogic)\n     const { closePopover } = useActions(annotationsOverlayLogic)\n     const { tickIntervalPx, firstTickLeftPx } = useAnnotationsPositioning(chart, chartWidth, chartHeight)\n@@ -59,9 +60,8 @@ export function AnnotationsOverlay({ chart, chartWidth, chartHeight }: Annotatio\n \n     useOutsideClickHandler([overlayRef, modalContentRef, modalOverlayRef], () => closePopover())\n \n-    const dates: dayjs.Dayjs[] = chart.scales.x.ticks.map(({ label }) => {\n-        return dayjs(label as string)\n-    })\n+    const tickPointIndices: number[] = chart.scales.x.ticks.map(({ value }) => value)\n+    const tickDates: dayjs.Dayjs[] = tickPointIndices.map((dateIndex) => dayjs(dates[dateIndex]))\n \n     return (\n         <div\n@@ -84,7 +84,7 @@ export function AnnotationsOverlay({ chart, chartWidth, chartHeight }: Annotatio\n             }\n             ref={overlayRef}\n         >\n-            {dates?.map((date, index) => (\n+            {tickDates?.map((date, index) => (\n                 <AnnotationsBadge key={date.toISOString()} index={index} date={date} />\n             ))}\n             {/* FIXME: Fix appear animation to be smooth too */}\ndiff --git a/frontend/src/scenes/insights/views/LineGraph/LineGraph.tsx b/frontend/src/scenes/insights/views/LineGraph/LineGraph.tsx\nindex e0953ea40..ba91b8695 100644\n--- a/frontend/src/scenes/insights/views/LineGraph/LineGraph.tsx\n+++ b/frontend/src/scenes/insights/views/LineGraph/LineGraph.tsx\n@@ -547,7 +547,12 @@ export function LineGraph_({\n                         insightNumericId: insight.id || 'new',\n                     }}\n                 >\n-                    <AnnotationsOverlay chart={myLineChart} chartWidth={chartWidth} chartHeight={chartHeight} />\n+                    <AnnotationsOverlay\n+                        chart={myLineChart}\n+                        dates={datasets[0]?.days || []}\n+                        chartWidth={chartWidth}\n+                        chartHeight={chartHeight}\n+                    />\n                 </BindLogic>\n             )}\n         </div>\n"
  },
  "e80587754d960f45c6ec41f32d6365f95a150faf": {
    "hash": "e80587754d960f45c6ec41f32d6365f95a150faf",
    "message": "fix: background regression (#11648)\n    \n    * fix: re-add --bg-side\n    \n    * a funnel tooltip is an insight tooltip",
    "diff": "commit e80587754d960f45c6ec41f32d6365f95a150faf\nAuthor: Paul D'Ambra <paul@posthog.com>\nDate:   Mon Sep 5 08:10:19 2022 +0100\n\n    fix: background regression (#11648)\n    \n    * fix: re-add --bg-side\n    \n    * a funnel tooltip is an insight tooltip\n\ndiff --git a/frontend/src/scenes/funnels/useFunnelTooltip.tsx b/frontend/src/scenes/funnels/useFunnelTooltip.tsx\nindex d689774a6..b7da05ca1 100644\n--- a/frontend/src/scenes/funnels/useFunnelTooltip.tsx\n+++ b/frontend/src/scenes/funnels/useFunnelTooltip.tsx\n@@ -30,7 +30,7 @@ function FunnelTooltip({ showPersonsModal, stepIndex, series, groupTypeLabel }:\n     const { cohorts } = useValues(cohortsModel)\n     const { formatPropertyValueForDisplay } = useValues(propertyDefinitionsModel)\n     return (\n-        <div className=\"FunnelTooltip\">\n+        <div className=\"FunnelTooltip InsightTooltip\">\n             <LemonRow icon={<Lettermark name={stepIndex + 1} color={LettermarkColor.Gray} />} fullWidth>\n                 <strong>\n                     <EntityFilterInfo\ndiff --git a/frontend/src/styles/vars.scss b/frontend/src/styles/vars.scss\nindex 2381cbd83..ac16dea95 100644\n--- a/frontend/src/styles/vars.scss\n+++ b/frontend/src/styles/vars.scss\n@@ -118,6 +118,7 @@ $_lifecycle_dormant: #f86234;\n     // Special case color for primary buttons with a nested primary button\n     --primary-button-nested-hover: #d2dbff;\n \n+    --bg-side: var(--side);\n     --bg-mid: #f2f2f2;\n     --bg-depth: #0f0f0f;\n     --bg-navy: var(--primary-alt);\n"
  },
  "58104d3a4306589f5b70cda283507868b512f712": {
    "hash": "58104d3a4306589f5b70cda283507868b512f712",
    "message": "feat(funnels): Add tooltip to new funnel viz (#9583)\n    \n    * Fix `getSignificanceFromBreakdownStep` bug\n    \n    * Refactor `useWorldMapTooltip`\n    \n    * Add `FunnelBarChartTooltip`\n    \n    * Polish\n    \n    * More polish\n    \n    * Fix duplicate keys\n    \n    * Refactor tooltip out into `FunnelTooltip.tsx`\n    \n    * Fix \"Detailed results\" showing up in funnel empty state\n    \n    * Fix \"Save\" button spinner color\n    \n    * Format breakdown label in funnel tooltip\n    \n    * Add `Click to view persons`\n    \n    * Run prettier\n    \n    * Fix tooltip position when wrapped to the left",
    "diff": "commit 58104d3a4306589f5b70cda283507868b512f712\nAuthor: Michael Matloka <dev@twixes.com>\nDate:   Wed May 4 11:53:23 2022 +0200\n\n    feat(funnels): Add tooltip to new funnel viz (#9583)\n    \n    * Fix `getSignificanceFromBreakdownStep` bug\n    \n    * Refactor `useWorldMapTooltip`\n    \n    * Add `FunnelBarChartTooltip`\n    \n    * Polish\n    \n    * More polish\n    \n    * Fix duplicate keys\n    \n    * Refactor tooltip out into `FunnelTooltip.tsx`\n    \n    * Fix \"Detailed results\" showing up in funnel empty state\n    \n    * Fix \"Save\" button spinner color\n    \n    * Format breakdown label in funnel tooltip\n    \n    * Add `Click to view persons`\n    \n    * Run prettier\n    \n    * Fix tooltip position when wrapped to the left\n\ndiff --git a/frontend/src/lib/components/EntityFilterInfo.tsx b/frontend/src/lib/components/EntityFilterInfo.tsx\nindex f30971785..90be5696f 100644\n--- a/frontend/src/lib/components/EntityFilterInfo.tsx\n+++ b/frontend/src/lib/components/EntityFilterInfo.tsx\n@@ -9,6 +9,7 @@ interface EntityFilterInfoProps {\n     filter: EntityFilter | ActionFilter\n     allowWrap?: boolean\n     showSingleName?: boolean\n+    style?: React.CSSProperties\n }\n \n function TextWrapper(props: TextProps): JSX.Element {\n@@ -23,6 +24,7 @@ export function EntityFilterInfo({\n     filter,\n     allowWrap = false,\n     showSingleName = false,\n+    style,\n }: EntityFilterInfoProps): JSX.Element {\n     const title = getDisplayNameFromEntityFilter(filter, false)\n \n@@ -36,7 +38,7 @@ export function EntityFilterInfo({\n     // No custom name\n     if (!filter?.custom_name) {\n         return (\n-            <span style={{ display: 'flex', flexDirection: 'row', alignItems: 'center' }}>\n+            <span style={{ display: 'flex', flexDirection: 'row', alignItems: 'center', ...style }}>\n                 <TextWrapper ellipsis={!allowWrap} title={titleToDisplay}>\n                     {titleToDisplay}\n                 </TextWrapper>\n@@ -48,7 +50,7 @@ export function EntityFilterInfo({\n     const customTitle = getDisplayNameFromEntityFilter(filter, true)\n \n     return (\n-        <span style={{ display: 'flex', flexDirection: 'row', alignItems: 'center' }}>\n+        <span style={{ display: 'flex', flexDirection: 'row', alignItems: 'center', ...style }}>\n             <TextWrapper ellipsis={!allowWrap} title={customTitle ?? undefined}>\n                 {customTitle}\n             </TextWrapper>\ndiff --git a/frontend/src/lib/components/LemonButton/LemonButton.tsx b/frontend/src/lib/components/LemonButton/LemonButton.tsx\nindex 470b366c1..cdbef8e02 100644\n--- a/frontend/src/lib/components/LemonButton/LemonButton.tsx\n+++ b/frontend/src/lib/components/LemonButton/LemonButton.tsx\n@@ -112,7 +112,7 @@ export function LemonButtonWithSideAction({\n             {/* Bogus `sideIcon` div prevents overflow under the side button. */}\n             <LemonButton {...buttonProps} sideIcon={<div />}>\n                 {children}\n-                {!buttonProps.fullWidth && <LemonDivider vertical style={{ margin: '0 0 0 0.75rem' }} />}\n+                {!buttonProps.fullWidth && <LemonDivider vertical style={{ margin: '0 -0.5rem 0 0.75rem' }} />}\n             </LemonButton>\n             <SideComponent\n                 className=\"LemonButtonWithSideAction--side-button\"\ndiff --git a/frontend/src/lib/components/Spinner/Spinner.scss b/frontend/src/lib/components/Spinner/Spinner.scss\nindex a3384d7b4..f4e1dd3ea 100644\n--- a/frontend/src/lib/components/Spinner/Spinner.scss\n+++ b/frontend/src/lib/components/Spinner/Spinner.scss\n@@ -25,7 +25,8 @@\n         stroke-dashoffset: -30;\n         stroke-dasharray: 60;\n     }\n-    &.Spinner--inverse {\n+    &.Spinner--inverse,\n+    .LemonButton--primary & {\n         color: #fff;\n     }\n     &.Spinner--sm {\ndiff --git a/frontend/src/scenes/funnels/FunnelBarChart.scss b/frontend/src/scenes/funnels/FunnelBarChart.scss\nindex 037c2ab82..0c4aa014c 100644\n--- a/frontend/src/scenes/funnels/FunnelBarChart.scss\n+++ b/frontend/src/scenes/funnels/FunnelBarChart.scss\n@@ -86,7 +86,7 @@\n     }\n }\n \n-.StepBars__bar {\n+.StepBar {\n     --series-color: #000; // This should be overriden from React\n     --conversion-rate: 100%; // This should be overriden from React\n     position: relative;\n@@ -102,8 +102,8 @@\n     }\n }\n \n-.StepBars__backdrop,\n-.StepBars__fill {\n+.StepBar__backdrop,\n+.StepBar__fill {\n     position: absolute;\n     bottom: 0;\n     left: 0;\n@@ -112,7 +112,7 @@\n     cursor: pointer;\n }\n \n-.StepBars__backdrop {\n+.StepBar__backdrop {\n     transition: opacity 200ms ease;\n     height: 100%;\n     background: repeating-linear-gradient(\n@@ -132,7 +132,7 @@\n     }\n }\n \n-.StepBars__fill {\n+.StepBar__fill {\n     transition: filter 200ms ease;\n     background: var(--series-color);\n     height: var(--conversion-rate);\n@@ -161,3 +161,25 @@\n         font-weight: inherit;\n     }\n }\n+\n+.FunnelTooltip {\n+    width: 20rem;\n+    margin: 0.25rem 0.5rem 0.25rem;\n+    table {\n+        width: 100%;\n+        border-collapse: collapse;\n+        border-spacing: 0;\n+    }\n+    tr {\n+        height: 1.75rem;\n+    }\n+    td:first-child {\n+        padding: 0 0.5rem;\n+        font-weight: 500;\n+    }\n+    td:last-child {\n+        padding-right: 0.5rem;\n+        font-weight: 600;\n+        text-align: right;\n+    }\n+}\ndiff --git a/frontend/src/scenes/funnels/FunnelBarChart.tsx b/frontend/src/scenes/funnels/FunnelBarChart.tsx\nindex bf76e5985..7bff76915 100644\n--- a/frontend/src/scenes/funnels/FunnelBarChart.tsx\n+++ b/frontend/src/scenes/funnels/FunnelBarChart.tsx\n@@ -1,5 +1,5 @@\n import { useActions, useValues } from 'kea'\n-import React, { useMemo } from 'react'\n+import React, { useMemo, useRef } from 'react'\n import { funnelLogic } from './funnelLogic'\n import './FunnelBarChart.scss'\n import { ChartParams, FunnelStepWithConversionMetrics } from '~/types'\n@@ -14,6 +14,7 @@ import clsx from 'clsx'\n import { getSeriesColor } from './funnelUtils'\n import { useScrollable } from 'lib/hooks/useScrollable'\n import { useResizeObserver } from 'lib/hooks/useResizeObserver'\n+import { useFunnelTooltip } from './FunnelTooltip'\n \n function StepBarLabels(): JSX.Element {\n     return (\n@@ -28,8 +29,9 @@ function StepBarLabels(): JSX.Element {\n         </div>\n     )\n }\n-interface StepBarsProps {\n+interface StepBarProps {\n     step: FunnelStepWithConversionMetrics\n+    series: FunnelStepWithConversionMetrics\n     stepIndex: number\n }\n interface StepBarCSSProperties extends React.CSSProperties {\n@@ -37,38 +39,56 @@ interface StepBarCSSProperties extends React.CSSProperties {\n     '--conversion-rate': string\n }\n \n-function StepBars({ step, stepIndex }: StepBarsProps): JSX.Element {\n-    const { openPersonsModalForSeries } = useActions(funnelLogic)\n+function StepBar({ step, stepIndex, series }: StepBarProps): JSX.Element {\n+    const { openPersonsModalForSeries, showTooltip, hideTooltip } = useActions(funnelLogic)\n+\n+    const ref = useRef<HTMLDivElement | null>(null)\n \n+    return (\n+        <div\n+            className=\"StepBar\"\n+            style={\n+                {\n+                    '--series-color': getSeriesColor(series.order, step.nested_breakdown?.length === 1),\n+                    '--conversion-rate': percentage(series.conversionRates.fromBasisStep, 1, true),\n+                } as StepBarCSSProperties\n+            }\n+            ref={ref}\n+            onMouseEnter={() => {\n+                if (ref.current) {\n+                    const rect = ref.current.getBoundingClientRect()\n+                    showTooltip([rect.x + rect.width, rect.y], stepIndex, series)\n+                }\n+            }}\n+            onMouseLeave={() => hideTooltip()}\n+        >\n+            <div\n+                className=\"StepBar__backdrop\"\n+                onClick={() => openPersonsModalForSeries({ step, series, converted: false })}\n+            />\n+            <div\n+                className=\"StepBar__fill\"\n+                onClick={() => openPersonsModalForSeries({ step, series, converted: true })}\n+            />\n+        </div>\n+    )\n+}\n+\n+function StepBars({ step, stepIndex }: Omit<StepBarProps, 'series'>): JSX.Element {\n     return (\n         <div className={clsx('StepBars', stepIndex === 0 && 'StepBars--first')}>\n             <div className=\"StepBars__grid\">\n                 {Array(5)\n                     .fill(null)\n                     .map((_, i) => (\n-                        <div key={i} className=\"StepBars__gridline StepBars__gridline--horizontal\" />\n+                        <div\n+                            key={`gridline-${stepIndex}-${i}`}\n+                            className=\"StepBars__gridline StepBars__gridline--horizontal\"\n+                        />\n                     ))}\n             </div>\n-            {step?.nested_breakdown?.map((breakdown) => (\n-                <div\n-                    key={breakdown.order}\n-                    className=\"StepBars__bar\"\n-                    style={\n-                        {\n-                            '--series-color': getSeriesColor(breakdown.order, step.nested_breakdown?.length === 1),\n-                            '--conversion-rate': percentage(breakdown.conversionRates.fromBasisStep, 1, true),\n-                        } as StepBarCSSProperties\n-                    }\n-                >\n-                    <div\n-                        className=\"StepBars__backdrop\"\n-                        onClick={() => openPersonsModalForSeries({ step, series: breakdown, converted: false })}\n-                    />\n-                    <div\n-                        className=\"StepBars__fill\"\n-                        onClick={() => openPersonsModalForSeries({ step, series: breakdown, converted: true })}\n-                    />\n-                </div>\n+            {step?.nested_breakdown?.map((series) => (\n+                <StepBar key={`bar-${stepIndex}-${series.order}`} step={step} stepIndex={stepIndex} series={series} />\n             ))}\n         </div>\n     )\n@@ -150,36 +170,46 @@ export function FunnelBarChart({ showPersonsModal = true }: ChartParams): JSX.El\n     const [scrollRef, scrollableClassNames] = useScrollable()\n     const { height } = useResizeObserver({ ref: scrollRef })\n \n+    const seriesCount = visibleStepsWithConversionMetrics[0]?.nested_breakdown?.length ?? 0\n+    const barWidthPx =\n+        seriesCount >= 60\n+            ? 4\n+            : seriesCount >= 20\n+            ? 8\n+            : seriesCount >= 12\n+            ? 16\n+            : seriesCount >= 10\n+            ? 20\n+            : seriesCount >= 8\n+            ? 24\n+            : seriesCount >= 6\n+            ? 32\n+            : seriesCount >= 5\n+            ? 40\n+            : seriesCount >= 4\n+            ? 48\n+            : seriesCount >= 3\n+            ? 64\n+            : seriesCount >= 2\n+            ? 96\n+            : 192\n+\n+    const vizRef = useFunnelTooltip(showPersonsModal, barWidthPx)\n+\n     const table = useMemo(() => {\n         /** Average conversion time is only shown if it's known for at least one step. */\n         const showTime = visibleStepsWithConversionMetrics.some((step) => step.average_conversion_time != null)\n-        const seriesCount = visibleStepsWithConversionMetrics[0]?.nested_breakdown?.length ?? 0\n         const barRowHeight = `calc(${height}px - 3rem - (1.75rem * ${showTime ? 3 : 2}) - 1px)`\n-        const barWidth =\n-            seriesCount >= 60\n-                ? '0.25rem'\n-                : seriesCount >= 20\n-                ? '0.5rem'\n-                : seriesCount >= 12\n-                ? '1rem'\n-                : seriesCount >= 10\n-                ? '1.25rem'\n-                : seriesCount >= 8\n-                ? '1.5rem'\n-                : seriesCount >= 6\n-                ? '2rem'\n-                : seriesCount >= 5\n-                ? '2.5rem'\n-                : seriesCount >= 4\n-                ? '3rem'\n-                : seriesCount >= 3\n-                ? '4rem'\n-                : seriesCount >= 2\n-                ? '6rem'\n-                : '12rem'\n \n         return (\n-            <table style={{ '--bar-width': barWidth, '--bar-row-height': barRowHeight } as FunnelBarChartCSSProperties}>\n+            <table\n+                style={\n+                    {\n+                        '--bar-width': `${barWidthPx}px`,\n+                        '--bar-row-height': barRowHeight,\n+                    } as FunnelBarChartCSSProperties\n+                }\n+            >\n                 <colgroup>\n                     {visibleStepsWithConversionMetrics.map((_, i) => (\n                         <col key={i} width={0} />\n@@ -216,7 +246,7 @@ export function FunnelBarChart({ showPersonsModal = true }: ChartParams): JSX.El\n     }, [visibleStepsWithConversionMetrics, height])\n \n     return (\n-        <div className={clsx('FunnelBarChart', ...scrollableClassNames)} data-attr=\"funnel-bar-graph\">\n+        <div className={clsx('FunnelBarChart', ...scrollableClassNames)} ref={vizRef} data-attr=\"funnel-bar-graph\">\n             <div className=\"scrollable__inner\" ref={scrollRef}>\n                 {table}\n             </div>\ndiff --git a/frontend/src/scenes/funnels/FunnelTooltip.tsx b/frontend/src/scenes/funnels/FunnelTooltip.tsx\nnew file mode 100644\nindex 000000000..c018fe1fa\n--- /dev/null\n+++ b/frontend/src/scenes/funnels/FunnelTooltip.tsx\n@@ -0,0 +1,124 @@\n+import { getContext, useValues } from 'kea'\n+import React, { useEffect, useRef } from 'react'\n+import ReactDOM from 'react-dom'\n+import { funnelLogic } from './funnelLogic'\n+import { FunnelStepWithConversionMetrics } from '~/types'\n+import { LemonRow } from 'lib/components/LemonRow'\n+import { Lettermark, LettermarkColor } from 'lib/components/Lettermark/Lettermark'\n+import { EntityFilterInfo } from 'lib/components/EntityFilterInfo'\n+import { getActionFilterFromFunnelStep } from 'scenes/insights/InsightTabs/FunnelTab/funnelStepTableUtils'\n+import { humanFriendlyDuration, humanFriendlyNumber, percentage } from 'lib/utils'\n+import { ensureTooltipElement } from 'scenes/insights/LineGraph/LineGraph'\n+import { Provider } from 'react-redux'\n+import { LemonDivider } from 'lib/components/LemonDivider'\n+import { cohortsModel } from '~/models/cohortsModel'\n+import { formatBreakdownLabel } from 'scenes/insights/InsightsTable/InsightsTable'\n+import { ClickToInspectActors } from 'scenes/insights/InsightTooltip/InsightTooltip'\n+import { groupsModel } from '~/models/groupsModel'\n+\n+/** The tooltip is offset horizontally by a few pixels from the bar to give it some breathing room. */\n+const FUNNEL_TOOLTIP_OFFSET_PX = 2\n+\n+interface FunnelTooltipProps {\n+    showPersonsModal: boolean\n+    stepIndex: number\n+    series: FunnelStepWithConversionMetrics\n+    groupTypeLabel: string\n+}\n+\n+function FunnelTooltip({ showPersonsModal, stepIndex, series, groupTypeLabel }: FunnelTooltipProps): JSX.Element {\n+    const { cohorts } = useValues(cohortsModel)\n+\n+    return (\n+        <div className=\"FunnelTooltip\">\n+            <LemonRow icon={<Lettermark name={stepIndex + 1} color={LettermarkColor.Gray} />} fullWidth>\n+                <strong>\n+                    <EntityFilterInfo\n+                        filter={getActionFilterFromFunnelStep(series)}\n+                        style={{ display: 'inline-block' }}\n+                    />{' '}\n+                    • {formatBreakdownLabel(cohorts, series.breakdown_value)}\n+                </strong>\n+            </LemonRow>\n+            <LemonDivider style={{ marginTop: '0.25rem' }} />\n+            <table>\n+                <tbody>\n+                    <tr>\n+                        <td>{stepIndex === 0 ? 'Entered' : 'Converted'}</td>\n+                        <td>{humanFriendlyNumber(series.count)}</td>\n+                    </tr>\n+                    {stepIndex > 0 && (\n+                        <tr>\n+                            <td>Dropped off</td>\n+                            <td>{humanFriendlyNumber(series.droppedOffFromPrevious)}</td>\n+                        </tr>\n+                    )}\n+                    <tr>\n+                        <td>Conversion so far</td>\n+                        <td>{percentage(series.conversionRates.total, 1, true)}</td>\n+                    </tr>\n+                    {stepIndex > 0 && (\n+                        <tr>\n+                            <td>Conversion from previous</td>\n+                            <td>{percentage(series.conversionRates.fromPrevious, 1, true)}</td>\n+                        </tr>\n+                    )}\n+                    {stepIndex > 0 && series.average_conversion_time != null && (\n+                        <tr>\n+                            <td>Average time from previous</td>\n+                            <td>{humanFriendlyDuration(series.average_conversion_time, 3)}</td>\n+                        </tr>\n+                    )}\n+                </tbody>\n+            </table>\n+            {showPersonsModal && <ClickToInspectActors groupTypeLabel={groupTypeLabel} />}\n+        </div>\n+    )\n+}\n+\n+export function useFunnelTooltip(showPersonsModal: boolean, barWidthPx: number): React.RefObject<HTMLDivElement> {\n+    const { filters, isTooltipShown, currentTooltip, tooltipCoordinates } = useValues(funnelLogic)\n+    const { aggregationLabel } = useValues(groupsModel)\n+\n+    const vizRef = useRef<HTMLDivElement>(null)\n+\n+    useEffect(() => {\n+        const svgRect = vizRef.current?.getBoundingClientRect()\n+        const tooltipEl = ensureTooltipElement()\n+        tooltipEl.style.opacity = isTooltipShown ? '1' : '0'\n+        const tooltipRect = tooltipEl.getBoundingClientRect()\n+        if (tooltipCoordinates) {\n+            ReactDOM.render(\n+                <Provider store={getContext().store}>\n+                    {currentTooltip && (\n+                        <FunnelTooltip\n+                            showPersonsModal={showPersonsModal}\n+                            stepIndex={currentTooltip[0]}\n+                            series={currentTooltip[1]}\n+                            groupTypeLabel={aggregationLabel(filters.aggregation_group_type_index).plural}\n+                        />\n+                    )}\n+                </Provider>,\n+                tooltipEl\n+            )\n+            // Put the tooltip to the bottom right of the cursor, but flip to left if tooltip doesn't fit\n+            let xOffset: number\n+            if (\n+                svgRect &&\n+                tooltipRect &&\n+                tooltipCoordinates[0] + tooltipRect.width + FUNNEL_TOOLTIP_OFFSET_PX > svgRect.x + svgRect.width\n+            ) {\n+                xOffset = -(tooltipRect.width + barWidthPx + FUNNEL_TOOLTIP_OFFSET_PX)\n+            } else {\n+                xOffset = FUNNEL_TOOLTIP_OFFSET_PX\n+            }\n+            tooltipEl.style.left = `${window.pageXOffset + tooltipCoordinates[0] + xOffset}px`\n+            tooltipEl.style.top = `${window.pageYOffset + tooltipCoordinates[1]}px`\n+        } else {\n+            tooltipEl.style.left = 'revert'\n+            tooltipEl.style.top = 'revert'\n+        }\n+    }, [isTooltipShown, tooltipCoordinates, currentTooltip])\n+\n+    return vizRef\n+}\ndiff --git a/frontend/src/scenes/funnels/funnelLogic.ts b/frontend/src/scenes/funnels/funnelLogic.ts\nindex 07b3fb2fe..a46d49050 100644\n--- a/frontend/src/scenes/funnels/funnelLogic.ts\n+++ b/frontend/src/scenes/funnels/funnelLogic.ts\n@@ -177,6 +177,7 @@ export const funnelLogic = kea<funnelLogicType<openPersonsModelProps>>({\n         sendCorrelationAnalysisFeedback: true,\n         hideSkewWarning: true,\n         hideCorrelationAnalysisFeedback: true,\n+        setFunnelCorrelationDetails: (payload: FunnelCorrelation | null) => ({ payload }),\n \n         setPropertyNames: (propertyNames: string[]) => ({ propertyNames }),\n         excludePropertyFromProject: (propertyName: string) => ({ propertyName }),\n@@ -186,7 +187,12 @@ export const funnelLogic = kea<funnelLogicType<openPersonsModelProps>>({\n         addNestedTableExpandedKey: (expandKey: string) => ({ expandKey }),\n         removeNestedTableExpandedKey: (expandKey: string) => ({ expandKey }),\n \n-        setFunnelCorrelationDetails: (payload: FunnelCorrelation | null) => ({ payload }),\n+        showTooltip: (coordinates: [number, number], stepIndex: number, series: FunnelStepWithConversionMetrics) => ({\n+            coordinates,\n+            stepIndex,\n+            series,\n+        }),\n+        hideTooltip: true,\n     }),\n \n     loaders: ({ values }) => ({\n@@ -423,6 +429,25 @@ export const funnelLogic = kea<funnelLogicType<openPersonsModelProps>>({\n                 setFunnelCorrelationDetails: (_, { payload }) => payload,\n             },\n         ],\n+        isTooltipShown: [\n+            false,\n+            {\n+                showTooltip: () => true,\n+                hideTooltip: () => false,\n+            },\n+        ],\n+        currentTooltip: [\n+            null as [number, FunnelStepWithConversionMetrics] | null,\n+            {\n+                showTooltip: (_, { stepIndex, series }) => [stepIndex, series],\n+            },\n+        ],\n+        tooltipCoordinates: [\n+            null as [number, number] | null,\n+            {\n+                showTooltip: (_, { coordinates }) => coordinates,\n+            },\n+        ],\n     }),\n \n     selectors: ({ selectors }) => ({\ndiff --git a/frontend/src/scenes/insights/InsightContainer.tsx b/frontend/src/scenes/insights/InsightContainer.tsx\nindex 0bbd7607d..b284e3882 100644\n--- a/frontend/src/scenes/insights/InsightContainer.tsx\n+++ b/frontend/src/scenes/insights/InsightContainer.tsx\n@@ -109,6 +109,7 @@ export function InsightContainer(\n             !showErrorMessage &&\n             !showTimeoutMessage &&\n             areFiltersValid &&\n+            isValidFunnel &&\n             filters.funnel_viz_type === FunnelVizType.Steps &&\n             !disableTable &&\n             (featureFlags[FEATURE_FLAGS.LEMON_FUNNEL_VIZ] || filters?.layout === FunnelLayout.horizontal)\ndiff --git a/frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelStepsTable.tsx b/frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelStepsTable.tsx\nindex 775646bea..f89c7341f 100644\n--- a/frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelStepsTable.tsx\n+++ b/frontend/src/scenes/insights/InsightTabs/FunnelTab/FunnelStepsTable.tsx\n@@ -165,7 +165,7 @@ export function FunnelStepsTable(): JSX.Element | null {\n                       ]),\n                 {\n                     title: 'Conversion so far',\n-                    render: function RenderRate(\n+                    render: function RenderConversionSoFar(\n                         _: void,\n                         breakdown: FlattenedFunnelStepByBreakdown\n                     ): JSX.Element | string {\n@@ -190,7 +190,7 @@ export function FunnelStepsTable(): JSX.Element | null {\n                     : [\n                           {\n                               title: 'Conversion from previous',\n-                              render: function RenderRate(\n+                              render: function RenderConversionFromPrevious(\n                                   _: void,\n                                   breakdown: FlattenedFunnelStepByBreakdown\n                               ): JSX.Element | string {\ndiff --git a/frontend/src/scenes/insights/InsightTabs/FunnelTab/funnelStepTableUtils.tsx b/frontend/src/scenes/insights/InsightTabs/FunnelTab/funnelStepTableUtils.tsx\nindex 3323afc9a..adeadd9bb 100644\n--- a/frontend/src/scenes/insights/InsightTabs/FunnelTab/funnelStepTableUtils.tsx\n+++ b/frontend/src/scenes/insights/InsightTabs/FunnelTab/funnelStepTableUtils.tsx\n@@ -177,5 +177,5 @@ export function getSignificanceFromBreakdownStep(\n     breakdown: FlattenedFunnelStepByBreakdown,\n     stepOrder: number\n ): FunnelStepWithConversionMetrics['significant'] {\n-    return breakdown.steps?.[stepOrder].significant\n+    return breakdown.steps?.[stepOrder]?.significant\n }\ndiff --git a/frontend/src/scenes/insights/InsightTooltip/InsightTooltip.scss b/frontend/src/scenes/insights/InsightTooltip/InsightTooltip.scss\nindex ec1484efb..5ecdd68b1 100644\n--- a/frontend/src/scenes/insights/InsightTooltip/InsightTooltip.scss\n+++ b/frontend/src/scenes/insights/InsightTooltip/InsightTooltip.scss\n@@ -2,15 +2,19 @@\n     overflow: hidden;\n     border: 1px solid var(--border);\n     box-shadow: var(--shadow-elevation);\n-    font-size: 14px;\n+    font-size: 0.8125rem;\n     z-index: var(--z-graph-tooltip);\n     transition: all 0.4s;\n-    max-width: 480px;\n+    max-width: 30rem;\n     border-radius: var(--radius);\n-    background: #fafafa;\n+    background: var(--bg-light);\n     position: absolute;\n     pointer-events: none;\n \n+    .LemonRow {\n+        font-size: 0.8125rem;\n+    }\n+\n     .LemonTable {\n         font-size: 0.75rem;\n         border: none;\ndiff --git a/frontend/src/scenes/insights/InsightTooltip/InsightTooltip.tsx b/frontend/src/scenes/insights/InsightTooltip/InsightTooltip.tsx\nindex 3b05f5d05..2807a03a1 100644\n--- a/frontend/src/scenes/insights/InsightTooltip/InsightTooltip.tsx\n+++ b/frontend/src/scenes/insights/InsightTooltip/InsightTooltip.tsx\n@@ -15,11 +15,11 @@ import { InsightLabel } from 'lib/components/InsightLabel'\n import { SeriesLetter } from 'lib/components/SeriesGlyph'\n import { IconHandClick } from 'lib/components/icons'\n \n-function ClickToInspectActors({\n+export function ClickToInspectActors({\n     isTruncated,\n     groupTypeLabel,\n }: {\n-    isTruncated: boolean\n+    isTruncated?: boolean\n     groupTypeLabel: string\n }): JSX.Element {\n     return (\ndiff --git a/frontend/src/scenes/insights/WorldMap/WorldMap.tsx b/frontend/src/scenes/insights/WorldMap/WorldMap.tsx\nindex 4b3c54716..791a4d46e 100644\n--- a/frontend/src/scenes/insights/WorldMap/WorldMap.tsx\n+++ b/frontend/src/scenes/insights/WorldMap/WorldMap.tsx\n@@ -12,24 +12,27 @@ import { worldMapLogic } from './worldMapLogic'\n import { countryCodeToFlag, countryCodeToName } from './countryCodes'\n import { personsModalLogic, PersonsModalParams } from 'scenes/trends/personsModalLogic'\n import { countryVectors } from './countryVectors'\n+import { groupsModel } from '~/models/groupsModel'\n+import { toLocalFilters } from '../ActionFilter/entityFilterLogic'\n \n /** The saturation of a country is proportional to its value BUT the saturation has a floor to improve visibility. */\n const SATURATION_FLOOR = 0.2\n /** --primary in HSL for saturation mixing */\n const PRIMARY_HSL: [number, number, number] = [228, 100, 66]\n /** The tooltip is offset by a few pixels from the cursor to give it some breathing room. */\n-const TOOLTIP_OFFSET_PX = 8\n+const WORLD_MAP_TOOLTIP_OFFSET_PX = 8\n \n function useWorldMapTooltip(showPersonsModal: boolean): React.RefObject<SVGSVGElement> {\n     const { insightProps } = useValues(insightLogic)\n-    const { tooltipOpacity, currentTooltip, tooltipCoordinates } = useValues(worldMapLogic(insightProps))\n+    const { filters, isTooltipShown, currentTooltip, tooltipCoordinates } = useValues(worldMapLogic(insightProps))\n+    const { aggregationLabel } = useValues(groupsModel)\n \n     const svgRef = useRef<SVGSVGElement>(null)\n \n     useEffect(() => {\n         const svgRect = svgRef.current?.getBoundingClientRect()\n         const tooltipEl = ensureTooltipElement()\n-        tooltipEl.style.opacity = tooltipOpacity.toString()\n+        tooltipEl.style.opacity = isTooltipShown ? '1' : '0'\n         const tooltipRect = tooltipEl.getBoundingClientRect()\n         if (tooltipCoordinates) {\n             ReactDOM.render(\n@@ -61,6 +64,7 @@ function useWorldMapTooltip(showPersonsModal: boolean): React.RefObject<SVGSVGEl\n                             showHeader={false}\n                             hideColorCol\n                             hideInspectActorsSection={!showPersonsModal || !currentTooltip[1]}\n+                            groupTypeLabel={aggregationLabel(toLocalFilters(filters)[0].math_group_type_index).plural}\n                         />\n                     )}\n                 </Provider>,\n@@ -71,19 +75,19 @@ function useWorldMapTooltip(showPersonsModal: boolean): React.RefObject<SVGSVGEl\n             if (\n                 svgRect &&\n                 tooltipRect &&\n-                tooltipCoordinates[0] + tooltipRect.width + TOOLTIP_OFFSET_PX > svgRect.x + svgRect.width\n+                tooltipCoordinates[0] + tooltipRect.width + WORLD_MAP_TOOLTIP_OFFSET_PX > svgRect.x + svgRect.width\n             ) {\n-                xOffset = -(tooltipRect.width + TOOLTIP_OFFSET_PX)\n+                xOffset = -(tooltipRect.width + WORLD_MAP_TOOLTIP_OFFSET_PX)\n             } else {\n-                xOffset = TOOLTIP_OFFSET_PX\n+                xOffset = WORLD_MAP_TOOLTIP_OFFSET_PX\n             }\n             tooltipEl.style.left = `${window.pageXOffset + tooltipCoordinates[0] + xOffset}px`\n-            tooltipEl.style.top = `${window.pageYOffset + tooltipCoordinates[1] + TOOLTIP_OFFSET_PX}px`\n+            tooltipEl.style.top = `${window.pageYOffset + tooltipCoordinates[1] + WORLD_MAP_TOOLTIP_OFFSET_PX}px`\n         } else {\n             tooltipEl.style.left = 'revert'\n             tooltipEl.style.top = 'revert'\n         }\n-    }, [tooltipOpacity, currentTooltip, tooltipCoordinates])\n+    }, [isTooltipShown, tooltipCoordinates, currentTooltip])\n \n     return svgRef\n }\ndiff --git a/frontend/src/scenes/insights/WorldMap/worldMapLogic.tsx b/frontend/src/scenes/insights/WorldMap/worldMapLogic.tsx\nindex 0197dbc1a..120be7871 100644\n--- a/frontend/src/scenes/insights/WorldMap/worldMapLogic.tsx\n+++ b/frontend/src/scenes/insights/WorldMap/worldMapLogic.tsx\n@@ -9,7 +9,7 @@ export const worldMapLogic = kea<worldMapLogicType>({\n     key: keyForInsightLogicProps('new'),\n     path: (key) => ['scenes', 'insights', 'WorldMap', 'worldMapLogic', key],\n     connect: {\n-        values: [insightLogic, ['insight']],\n+        values: [insightLogic, ['insight', 'filters']],\n     },\n     actions: {\n         showTooltip: (countryCode: string, countrySeries: TrendResult | null) => ({ countryCode, countrySeries }),\n@@ -17,11 +17,11 @@ export const worldMapLogic = kea<worldMapLogicType>({\n         updateTooltipCoordinates: (x: number, y: number) => ({ x, y }),\n     },\n     reducers: {\n-        tooltipOpacity: [\n-            0,\n+        isTooltipShown: [\n+            false,\n             {\n-                showTooltip: () => 1,\n-                hideTooltip: () => 0,\n+                showTooltip: () => true,\n+                hideTooltip: () => false,\n             },\n         ],\n         currentTooltip: [\n"
  },
  "a063f602241eee92cee74eed00ce1c84703cb936": {
    "hash": "a063f602241eee92cee74eed00ce1c84703cb936",
    "message": "fix(annotations): Rework annotations popover to use `Popup` (#11688)\n    \n    * fix(annotations): Rework annotations popover to use `Popup`\n    \n    * Use `onClickOutside`\n    \n    * Fix typing",
    "diff": "commit a063f602241eee92cee74eed00ce1c84703cb936\nAuthor: Michael Matloka <dev@twixes.com>\nDate:   Thu Sep 8 17:26:42 2022 +0200\n\n    fix(annotations): Rework annotations popover to use `Popup` (#11688)\n    \n    * fix(annotations): Rework annotations popover to use `Popup`\n    \n    * Use `onClickOutside`\n    \n    * Fix typing\n\ndiff --git a/frontend/src/lib/components/AnnotationsOverlay/AnnotationsOverlay.scss b/frontend/src/lib/components/AnnotationsOverlay/AnnotationsOverlay.scss\nindex 4d6434f61..46a6bbaf9 100644\n--- a/frontend/src/lib/components/AnnotationsOverlay/AnnotationsOverlay.scss\n+++ b/frontend/src/lib/components/AnnotationsOverlay/AnnotationsOverlay.scss\n@@ -31,34 +31,19 @@\n \n .AnnotationsPopover {\n     --annotations-popover-width: 30rem;\n-    --annotations-popover-max-left: calc(var(--annotations-overlay-chart-width) - var(--annotations-popover-width));\n-    transition: top 200ms ease, left 200ms ease, opacity 200ms ease;\n-    position: absolute;\n-    left: clamp(\n-        0px,\n-        calc(\n-            var(--annotations-overlay-chart-area-left) + var(--annotations-overlay-active-badge-left) -\n-                var(--annotations-popover-width) / 2\n-        ),\n-        var(--annotations-popover-max-left)\n-    );\n-    top: calc(var(--annotations-overlay-active-badge-top) - 1.25rem);\n-    transform: translateY(-100%) !important;\n-\n-    &.AnnotationsPopover--enter,\n-    &.AnnotationsPopover--exit.AnnotationsPopover--exit-active {\n-        opacity: 0;\n-    }\n-\n-    &.AnnotationsPopover--enter.AnnotationsPopover--enter-active,\n-    &.AnnotationsPopover--exit {\n-        opacity: 1;\n+    transition: left 200ms ease, opacity 100ms ease, transform 100ms ease;\n+    z-index: var(--z-annotation-popover) !important;\n+\n+    .LemonModal {\n+        margin: 0;\n+        min-width: var(--annotations-popover-width);\n+        max-width: var(--annotations-popover-width);\n+        box-shadow: none;\n+        border: none;\n     }\n \n-    > .LemonModal {\n-        margin: 0 0 0 calc(var(--annotations-overlay-chart-area-left) * -1);\n-        min-width: unset;\n-        max-width: unset;\n+    .Popup__box {\n+        padding: 0;\n     }\n \n     ul {\ndiff --git a/frontend/src/lib/components/AnnotationsOverlay/AnnotationsOverlay.tsx b/frontend/src/lib/components/AnnotationsOverlay/AnnotationsOverlay.tsx\nindex d477495a2..6b9f39e3f 100644\n--- a/frontend/src/lib/components/AnnotationsOverlay/AnnotationsOverlay.tsx\n+++ b/frontend/src/lib/components/AnnotationsOverlay/AnnotationsOverlay.tsx\n@@ -12,11 +12,10 @@ import { LemonButton } from '../LemonButton'\n import { AnnotationModal } from 'scenes/annotations/AnnotationModal'\n import { annotationModalLogic } from 'scenes/annotations/annotationModalLogic'\n import { ProfilePicture } from '../ProfilePicture'\n-import { CSSTransition } from 'react-transition-group'\n import { annotationsModel } from '~/models/annotationsModel'\n import { Chart } from 'chart.js'\n import { useAnnotationsPositioning } from './useAnnotationsPositioning'\n-import { useOutsideClickHandler } from 'lib/hooks/useOutsideClickHandler'\n+import { Popup } from '../Popup/Popup'\n \n /** User-facing format for annotation groups. */\n const INTERVAL_UNIT_TO_HUMAN_DAYJS_FORMAT: Record<IntervalType, string> = {\n@@ -45,21 +44,16 @@ interface AnnotationsOverlayCSSProperties extends React.CSSProperties {\n     '--annotations-overlay-chart-width': `${string}px`\n     '--annotations-overlay-first-tick-left': `${string}px`\n     '--annotations-overlay-tick-interval': `${string}px`\n-    '--annotations-overlay-active-badge-left'?: `${string}px`\n-    '--annotations-overlay-active-badge-top'?: `${string}px`\n }\n \n export function AnnotationsOverlay({ chart, chartWidth, chartHeight, dates }: AnnotationsOverlayProps): JSX.Element {\n-    const { isPopoverShown, activeBadgeCoordinates } = useValues(annotationsOverlayLogic)\n-    const { closePopover } = useActions(annotationsOverlayLogic)\n+    const { activeBadgeElement } = useValues(annotationsOverlayLogic)\n     const { tickIntervalPx, firstTickLeftPx } = useAnnotationsPositioning(chart, chartWidth, chartHeight)\n \n-    const overlayRef = useRef<HTMLDivElement>(null)\n+    const overlayRef = useRef<HTMLDivElement | null>(null)\n     const modalContentRef = useRef<HTMLDivElement | null>(null)\n     const modalOverlayRef = useRef<HTMLDivElement | null>(null)\n \n-    useOutsideClickHandler([overlayRef, modalContentRef, modalOverlayRef], () => closePopover())\n-\n     const tickPointIndices: number[] = chart.scales.x.ticks.map(({ value }) => value)\n     const tickDates: dayjs.Dayjs[] = tickPointIndices.map((dateIndex) => dayjs(dates[dateIndex]))\n \n@@ -74,12 +68,6 @@ export function AnnotationsOverlay({ chart, chartWidth, chartHeight, dates }: An\n                     '--annotations-overlay-chart-width': `${chartWidth}px`,\n                     '--annotations-overlay-first-tick-left': `${firstTickLeftPx}px`,\n                     '--annotations-overlay-tick-interval': `${tickIntervalPx}px`,\n-                    ...(activeBadgeCoordinates\n-                        ? {\n-                              '--annotations-overlay-active-badge-left': `${activeBadgeCoordinates[0]}px`,\n-                              '--annotations-overlay-active-badge-top': `${activeBadgeCoordinates[1]}px`,\n-                          }\n-                        : {}),\n                 } as AnnotationsOverlayCSSProperties\n             }\n             ref={overlayRef}\n@@ -87,16 +75,7 @@ export function AnnotationsOverlay({ chart, chartWidth, chartHeight, dates }: An\n             {tickDates?.map((date, index) => (\n                 <AnnotationsBadge key={date.toISOString()} index={index} date={date} />\n             ))}\n-            {/* FIXME: Fix appear animation to be smooth too */}\n-            <CSSTransition\n-                in={isPopoverShown}\n-                timeout={200}\n-                classNames=\"AnnotationsPopover-\"\n-                mountOnEnter\n-                unmountOnExit\n-            >\n-                <AnnotationsPopover />\n-            </CSSTransition>\n+            {activeBadgeElement && <AnnotationsPopover overlayRefs={[overlayRef, modalContentRef, modalOverlayRef]} />}\n             <AnnotationModal\n                 contentRef={(el) => (modalContentRef.current = el)}\n                 overlayRef={(el) => (modalOverlayRef.current = el)}\n@@ -143,8 +122,7 @@ const AnnotationsBadge = React.memo(function AnnotationsBadgeRaw({ index, date }\n             onMouseEnter={() => {\n                 setHovered(true)\n                 if (!isDateLocked) {\n-                    const button = buttonRef.current as HTMLButtonElement\n-                    activateDate(date, [button.offsetLeft, button.offsetTop])\n+                    activateDate(date, buttonRef.current as HTMLButtonElement)\n                 }\n             }}\n             onMouseLeave={() => {\n@@ -158,10 +136,7 @@ const AnnotationsBadge = React.memo(function AnnotationsBadgeRaw({ index, date }\n                     ? lockDate\n                     : active\n                     ? unlockDate\n-                    : () => {\n-                          const button = buttonRef.current as HTMLButtonElement\n-                          activateDate(date, [button.offsetLeft, button.offsetTop])\n-                      }\n+                    : () => activateDate(date, buttonRef.current as HTMLButtonElement)\n             }\n         >\n             <LemonBubble\n@@ -173,42 +148,62 @@ const AnnotationsBadge = React.memo(function AnnotationsBadgeRaw({ index, date }\n     )\n })\n \n-function AnnotationsPopover(): JSX.Element {\n-    const { popoverAnnotations, activeDate, intervalUnit, isDateLocked, insightId } = useValues(annotationsOverlayLogic)\n+function AnnotationsPopover({\n+    overlayRefs,\n+}: {\n+    overlayRefs: React.MutableRefObject<HTMLDivElement | null>[]\n+}): JSX.Element {\n+    const {\n+        popoverAnnotations,\n+        activeDate,\n+        intervalUnit,\n+        isDateLocked,\n+        insightId,\n+        activeBadgeElement,\n+        isPopoverShown,\n+    } = useValues(annotationsOverlayLogic)\n     const { closePopover } = useActions(annotationsOverlayLogic)\n     const { openModalToCreateAnnotation } = useActions(annotationModalLogic)\n \n     return (\n-        <div className=\"AnnotationsPopover\">\n-            <LemonModal\n-                inline\n-                title={`${pluralize(popoverAnnotations.length, 'annotation')} • ${activeDate?.format(\n-                    INTERVAL_UNIT_TO_HUMAN_DAYJS_FORMAT[intervalUnit]\n-                )}`}\n-                footer={\n-                    <LemonButton\n-                        type=\"primary\"\n-                        onClick={() => openModalToCreateAnnotation(activeDate, insightId)}\n-                        disabled={!isDateLocked}\n-                    >\n-                        Add annotation\n-                    </LemonButton>\n-                }\n-                closable={isDateLocked}\n-                onClose={closePopover}\n-                width=\"var(--annotations-popover-width)\"\n-            >\n-                {popoverAnnotations.length > 0 ? (\n-                    <ul className=\"flex flex-col gap-1 w-full overflow-y-auto\">\n-                        {popoverAnnotations.map((annotation) => (\n-                            <AnnotationCard key={annotation.id} annotation={annotation} />\n-                        ))}\n-                    </ul>\n-                ) : (\n-                    'There are no annotations in this period.'\n-                )}\n-            </LemonModal>\n-        </div>\n+        <Popup\n+            additionalRefs={overlayRefs}\n+            className=\"AnnotationsPopover\"\n+            placement=\"top\"\n+            referenceElement={activeBadgeElement as HTMLElement}\n+            visible={isPopoverShown}\n+            onClickOutside={closePopover}\n+            overlay={\n+                <LemonModal\n+                    inline\n+                    title={`${pluralize(popoverAnnotations.length, 'annotation')} • ${activeDate?.format(\n+                        INTERVAL_UNIT_TO_HUMAN_DAYJS_FORMAT[intervalUnit]\n+                    )}`}\n+                    footer={\n+                        <LemonButton\n+                            type=\"primary\"\n+                            onClick={() => openModalToCreateAnnotation(activeDate, insightId)}\n+                            disabled={!isDateLocked}\n+                        >\n+                            Add annotation\n+                        </LemonButton>\n+                    }\n+                    closable={isDateLocked}\n+                    onClose={closePopover}\n+                    width=\"var(--annotations-popover-width)\"\n+                >\n+                    {popoverAnnotations.length > 0 ? (\n+                        <ul className=\"flex flex-col gap-1 w-full overflow-y-auto\">\n+                            {popoverAnnotations.map((annotation) => (\n+                                <AnnotationCard key={annotation.id} annotation={annotation} />\n+                            ))}\n+                        </ul>\n+                    ) : (\n+                        'There are no annotations in this period.'\n+                    )}\n+                </LemonModal>\n+            }\n+        />\n     )\n }\n \ndiff --git a/frontend/src/lib/components/AnnotationsOverlay/annotationsOverlayLogic.ts b/frontend/src/lib/components/AnnotationsOverlay/annotationsOverlayLogic.ts\nindex ec46629e2..d660540e3 100644\n--- a/frontend/src/lib/components/AnnotationsOverlay/annotationsOverlayLogic.ts\n+++ b/frontend/src/lib/components/AnnotationsOverlay/annotationsOverlayLogic.ts\n@@ -39,7 +39,7 @@ export const annotationsOverlayLogic = kea<annotationsOverlayLogicType>([\n     }),\n     actions({\n         createAnnotation: (annotationData: AnnotationDataWithoutInsight) => ({ annotationData }),\n-        activateDate: (date: Dayjs, badgeCoordinates: [number, number]) => ({ date, badgeCoordinates }),\n+        activateDate: (date: Dayjs, badgeElement: HTMLButtonElement) => ({ date, badgeElement }),\n         deactivateDate: true,\n         lockDate: true,\n         unlockDate: true,\n@@ -60,10 +60,10 @@ export const annotationsOverlayLogic = kea<annotationsOverlayLogicType>([\n                 activateDate: (_, { date }) => date,\n             },\n         ],\n-        activeBadgeCoordinates: [\n-            null as [number, number] | null,\n+        activeBadgeElement: [\n+            null as HTMLButtonElement | null,\n             {\n-                activateDate: (_, { badgeCoordinates }) => badgeCoordinates,\n+                activateDate: (_, { badgeElement }) => badgeElement,\n             },\n         ],\n         isDateLocked: [\ndiff --git a/frontend/src/lib/components/Popup/Popup.tsx b/frontend/src/lib/components/Popup/Popup.tsx\nindex a76e52323..216c448c9 100644\n--- a/frontend/src/lib/components/Popup/Popup.tsx\n+++ b/frontend/src/lib/components/Popup/Popup.tsx\n@@ -25,7 +25,7 @@ import {\n } from '@floating-ui/react-dom-interactions'\n \n export interface PopupProps {\n-    ref?: React.MutableRefObject<HTMLDivElement | null>\n+    ref?: React.MutableRefObject<HTMLDivElement | null> | React.Ref<HTMLDivElement> | null\n     visible?: boolean\n     onClickOutside?: (event: Event) => void\n     onClickInside?: MouseEventHandler<HTMLDivElement>\ndiff --git a/frontend/src/styles/vars.scss b/frontend/src/styles/vars.scss\nindex b9ccad9cb..81d48cf79 100644\n--- a/frontend/src/styles/vars.scss\n+++ b/frontend/src/styles/vars.scss\n@@ -224,7 +224,8 @@ $_lifecycle_dormant: #f86234;\n     --z-ant-modal-mask: 1050;\n     --z-plugins-popconfirm: 1001;\n     --z-pinned-dashboards-popup: 962;\n-    --z-graph-tooltip: 951;\n+    --z-graph-tooltip: 952;\n+    --z-annotation-popover: 951;\n     --z-drawer: 950;\n     --z-main-nav: 948;\n     --z-lemon-sidebar: 940;\n"
  },
  "4f1051512b418400514dd368da99c704aca15aa8": {
    "hash": "4f1051512b418400514dd368da99c704aca15aa8",
    "message": "fix: toolbar toast css needs to attach variables to :host not :root (#11494)\n    \n    * fix: no need to import all of toastify css\n    \n    * fix: toolbar toast relies on variables being attched to :host\n    \n    * no need to override more toast styles. handled by lemon toast\n    \n    * no need to override more toast styles. handled by lemon toast",
    "diff": "commit 4f1051512b418400514dd368da99c704aca15aa8\nAuthor: Paul D'Ambra <paul@posthog.com>\nDate:   Thu Aug 25 14:02:25 2022 +0100\n\n    fix: toolbar toast css needs to attach variables to :host not :root (#11494)\n    \n    * fix: no need to import all of toastify css\n    \n    * fix: toolbar toast relies on variables being attched to :host\n    \n    * no need to override more toast styles. handled by lemon toast\n    \n    * no need to override more toast styles. handled by lemon toast\n\ndiff --git a/frontend/src/styles/global.scss b/frontend/src/styles/global.scss\nindex 945bbb4df..5792ea2b5 100644\n--- a/frontend/src/styles/global.scss\n+++ b/frontend/src/styles/global.scss\n@@ -14,184 +14,8 @@ Only 400 (`normal`), 500 (`var(--font-medium)`), 600 (`var(--font-semibold)`), o\n @import 'utility-legacy';\n @import 'utilities';\n \n-// These vars are modified via SCSS for legacy reasons (e.g. darken/lighten), so keeping as SCSS vars for now.\n-$_primary: map-get($colors, 'primary');\n-$_primary_bg_hover: rgba($_primary, 0.1);\n-$_primary_bg_active: rgba($_primary, 0.2);\n-$_lifecycle_new: #99c5ff;\n-$_lifecycle_returning: #71b96b;\n-$_lifecycle_resurrecting: #c277cf;\n-$_lifecycle_dormant: #f86234;\n-\n :root {\n-    // Design System colors\n-    @each $name, $hex in $colors {\n-        --#{$name}: #{$hex};\n-    }\n-\n-    //TODO: Remove the primary-bg...\n-    --primary-bg-hover: var(--primary-highlight);\n-    --primary-bg-active: #{$_primary_bg_active};\n-\n-    --bg-mid: #f2f2f2;\n-    --bg-side: #fafaf9;\n-    --bg-depth: #0f0f0f;\n-    --bg-navy: var(--primary-alt);\n-    --bg-charcoal: #2d2d2d;\n-    --bg-bridge: #ebece8;\n-    --bg-shaded: rgba(0, 0, 0, 0.05);\n-    --bg-light: #ffffff;\n-    --bg-overlay: #333333;\n-    --mark-color: #fdedc9; // TODO\n-    --dark-grey: #d9d9d9;\n-    --light-grey: #f2f2f2;\n-\n-    // Non-color vars\n-    --radius: 4px;\n-    --shadow-elevation: 0px 16px 16px -16px rgba(0, 0, 0, 0.35);\n-    --opacity-disabled: 0.6;\n-    --font-medium: 500;\n-    --font-semibold: 600;\n-\n-    // LEGACY data colors (e.g. insight series). Note: colors.ts relies on these values being hexadecimal\n-    --blue: #597dce;\n-    --blue-light: #8da9e7;\n-    --blue-lightest: #b8cefd;\n-    --purple: #c278cf;\n-    --indigo: #7c4286;\n-    --purple-light: #dcb1e3;\n-    --salmon: #ff906e;\n-    --yellow: #ffc035;\n-    --yellow-light: #fbdd99;\n-    --yellow-lightest: #fdedc9;\n-    --green: var(--success);\n-    --cyan: #17a2b8;\n-    --pink: #e83e8c;\n-    --maroon: #7f0000;\n-    --mint: #aaffc3;\n-    --olive: #807500;\n-    --navy: #000075;\n-    --orange: #f58231;\n-    --lime: #bfef45;\n-    --apricot: #ffd8b1;\n-    --brown: #9a6324;\n-\n-    // Data colors (e.g. insight series). Note: colors.ts relies on these values being hexadecimal\n-    --data-brand-blue: var(--primary);\n-    --data-purple: #621da6;\n-    --data-viridian: #42827e;\n-    --data-magenta: #ce0e74;\n-    --data-vermilion: #f14f58;\n-    --data-brown: #7c440e;\n-    --data-green: #529a0a;\n-    --data-blue: #0476fb;\n-    --data-pink: #fe729e;\n-    --data-navy: var(--primary-alt);\n-    --data-turquoise: #41cbc4;\n-    --data-brick: #b64b02;\n-    --data-yellow: #e4a604;\n-    --data-lilac: #a56eff;\n-\n-    // Lifecycle series\n-    --lifecycle-new: #{$_lifecycle_new};\n-    --lifecycle-returning: #{$_lifecycle_returning};\n-    --lifecycle-resurrecting: #{$_lifecycle_resurrecting};\n-    --lifecycle-dormant: #{$_lifecycle_dormant};\n-    --lifecycle-new-hover: #{darken($_lifecycle_new, 20%)};\n-    --lifecycle-returning-hover: #{darken($_lifecycle_returning, 20%)};\n-    --lifecycle-resurrecting-hover: #{darken($_lifecycle_resurrecting, 20%)};\n-    --lifecycle-dormant-hover: #{darken($_lifecycle_dormant, 20%)};\n-\n-    // Funnels\n-    --funnel-default: var(--primary);\n-    --funnel-alt: var(--primary-alt);\n-    --funnel-background: var(--border-light);\n-    --funnel-axis-zero: var(--bg-depth);\n-    --funnel-axis: var(--border-dark);\n-    --funnel-axis-label: var(--muted);\n-    --funnel-canvas-background: #ffffff;\n-    --antd-table-background-dark: #fafafa;\n-\n-    // Session Recording\n-    --recording-spacing: calc(2rem / 3);\n-    --recording-player-container-bg: #797973;\n-    --recording-buffer-bg: #faaf8c;\n-    --recording-seekbar-red: #f54e00;\n-    --recording-hover-event: var(--primary-bg-hover);\n-    --recording-hover-event-mid: var(--primary-bg-active);\n-    --recording-hover-event-dark: var(--primary);\n-    --recording-current-event: #eef2ff;\n-    --recording-current-event-dark: #35416b;\n-    --recording-failure-event: #fee9e2;\n-    --recording-failure-event-dark: #cd3000;\n-    --recording-highlight-event: #fdedc9;\n-    --recording-highlight-event-dark: #946508;\n-\n-    // Z-indexes, synced with vars.ts\n-    --z-nps-overlay: 5200;\n-    --z-bottom-notice: 5100;\n-    --z-command-palette: 1875;\n-    --z-ant-select-dropdown: 1065;\n-    --z-ant-message: 1070;\n-    --z-popup: 1061;\n-    --z-modal: 1060;\n-    --z-ant-modal-wrap: 1060;\n-    --z-ant-modal-mask: 1050;\n-    --z-plugins-popconfirm: 1001;\n-    --z-pinned-dashboards-popup: 962;\n-    --z-graph-tooltip: 951;\n-    --z-drawer: 950;\n-    --z-main-nav: 948;\n-    --z-lemon-sidebar: 940;\n-    --z-mobile-nav-overlay: 931;\n-    --z-top-navigation: 800;\n-    --z-content-overlay: 488;\n-    --z-graph-annotation-prompt: 99;\n-    --z-raised: 5;\n-    --z-city-background-content: 1;\n-    --z-city-background-image: 0;\n-\n-    // Toasts\n-    --toastify-color-info: var(--primary);\n-    --toastify-color-success: var(--success);\n-    --toastify-color-warning: var(--warning);\n-    --toastify-color-error: var(--danger);\n-    --toastify-toast-background: var(--bg-light);\n-    --toastify-toast-width: 26rem;\n-    --toastify-toast-min-height: 3.5rem;\n-    --toastify-toast-max-height: 16rem;\n-\n-    //In App Prompts\n-    --in-app-prompts-width: 26rem;\n-\n-    // Deprecated color transforms from SCSS var heydays\n-    --depr-lighten-primary-20: #{lighten($_primary, 20%)};\n-    --depr-lighten-primary-10: #{lighten($_primary, 10%)};\n-    --depr-lighten-primary-5: #{lighten($_primary, 5%)};\n-    --depr-lighten-primary-15: #{lighten($_primary, 15%)};\n-\n-    --lettermark-1-bg: #dcb1e3;\n-    --lettermark-1-text: #572e5e;\n-    --lettermark-2-bg: #ffc4b2;\n-    --lettermark-2-text: #3e5891;\n-    --lettermark-3-bg: #fdedc9;\n-    --lettermark-3-text: #3e5891;\n-    --lettermark-4-bg: #3e5891;\n-    --lettermark-4-text: #ffc4b2;\n-    --lettermark-5-bg: #8da9e7;\n-    --lettermark-5-text: #572e5e;\n-    --lettermark-6-bg: #572e5e;\n-    --lettermark-6-text: #dcb1e3;\n-    --lettermark-7-bg: #ffc035;\n-    --lettermark-7-text: #35416b;\n-    --lettermark-8-bg: #ff906e;\n-    --lettermark-8-text: #2a3d65;\n-    --lettermark-8-bg: #e8edff;\n-    --lettermark-8-text: #35416b;\n-\n-    // Modals\n-    --modal-backdrop-blur: 5px; // Half the value in Figma as blur is calculated differently there it seems\n-    --modal-transition-time: 200ms;\n+    @include root-variables;\n }\n \n // Text styles\ndiff --git a/frontend/src/styles/vars.scss b/frontend/src/styles/vars.scss\nindex b771ace79..6912c1341 100644\n--- a/frontend/src/styles/vars.scss\n+++ b/frontend/src/styles/vars.scss\n@@ -91,3 +91,188 @@ $colors: (\n     'border-dark': rgba(0, 0, 0, 0.24),\n     'border-active': rgba(0, 0, 0, 0.36),\n );\n+\n+// These vars are modified via SCSS for legacy reasons (e.g. darken/lighten), so keeping as SCSS vars for now.\n+$_primary: map-get($colors, 'primary');\n+$_primary_bg_hover: rgba($_primary, 0.1);\n+$_primary_bg_active: rgba($_primary, 0.2);\n+$_lifecycle_new: #99c5ff;\n+$_lifecycle_returning: #71b96b;\n+$_lifecycle_resurrecting: #c277cf;\n+$_lifecycle_dormant: #f86234;\n+\n+// root variables are defined as a mixin here because\n+// the toolbar needs them attached to :host not :root\n+@mixin root-variables {\n+    // Design System colors\n+    @each $name, $hex in $colors {\n+        --#{$name}: #{$hex};\n+    }\n+\n+    //TODO: Remove the primary-bg...\n+    --primary-bg-hover: var(--primary-highlight);\n+    --primary-bg-active: #{$_primary_bg_active};\n+\n+    --bg-mid: #f2f2f2;\n+    --bg-side: #fafaf9;\n+    --bg-depth: #0f0f0f;\n+    --bg-navy: var(--primary-alt);\n+    --bg-charcoal: #2d2d2d;\n+    --bg-bridge: #ebece8;\n+    --bg-shaded: rgba(0, 0, 0, 0.05);\n+    --bg-light: #ffffff;\n+    --bg-overlay: #333333;\n+    --mark-color: #fdedc9; // TODO\n+    --dark-grey: #d9d9d9;\n+    --light-grey: #f2f2f2;\n+\n+    // Non-color vars\n+    --radius: 4px;\n+    --shadow-elevation: 0px 16px 16px -16px rgba(0, 0, 0, 0.35);\n+    --opacity-disabled: 0.6;\n+    --font-medium: 500;\n+    --font-semibold: 600;\n+\n+    // LEGACY data colors (e.g. insight series). Note: colors.ts relies on these values being hexadecimal\n+    --blue: #597dce;\n+    --blue-light: #8da9e7;\n+    --blue-lightest: #b8cefd;\n+    --purple: #c278cf;\n+    --indigo: #7c4286;\n+    --purple-light: #dcb1e3;\n+    --salmon: #ff906e;\n+    --yellow: #ffc035;\n+    --yellow-light: #fbdd99;\n+    --yellow-lightest: #fdedc9;\n+    --green: var(--success);\n+    --cyan: #17a2b8;\n+    --pink: #e83e8c;\n+    --maroon: #7f0000;\n+    --mint: #aaffc3;\n+    --olive: #807500;\n+    --navy: #000075;\n+    --orange: #f58231;\n+    --lime: #bfef45;\n+    --apricot: #ffd8b1;\n+    --brown: #9a6324;\n+\n+    // Data colors (e.g. insight series). Note: colors.ts relies on these values being hexadecimal\n+    --data-brand-blue: var(--primary);\n+    --data-purple: #621da6;\n+    --data-viridian: #42827e;\n+    --data-magenta: #ce0e74;\n+    --data-vermilion: #f14f58;\n+    --data-brown: #7c440e;\n+    --data-green: #529a0a;\n+    --data-blue: #0476fb;\n+    --data-pink: #fe729e;\n+    --data-navy: var(--primary-alt);\n+    --data-turquoise: #41cbc4;\n+    --data-brick: #b64b02;\n+    --data-yellow: #e4a604;\n+    --data-lilac: #a56eff;\n+\n+    // Lifecycle series\n+    --lifecycle-new: #{$_lifecycle_new};\n+    --lifecycle-returning: #{$_lifecycle_returning};\n+    --lifecycle-resurrecting: #{$_lifecycle_resurrecting};\n+    --lifecycle-dormant: #{$_lifecycle_dormant};\n+    --lifecycle-new-hover: #{darken($_lifecycle_new, 20%)};\n+    --lifecycle-returning-hover: #{darken($_lifecycle_returning, 20%)};\n+    --lifecycle-resurrecting-hover: #{darken($_lifecycle_resurrecting, 20%)};\n+    --lifecycle-dormant-hover: #{darken($_lifecycle_dormant, 20%)};\n+\n+    // Funnels\n+    --funnel-default: var(--primary);\n+    --funnel-alt: var(--primary-alt);\n+    --funnel-background: var(--border-light);\n+    --funnel-axis-zero: var(--bg-depth);\n+    --funnel-axis: var(--border-dark);\n+    --funnel-axis-label: var(--muted);\n+    --funnel-canvas-background: #ffffff;\n+    --antd-table-background-dark: #fafafa;\n+\n+    // Session Recording\n+    --recording-spacing: calc(2rem / 3);\n+    --recording-player-container-bg: #797973;\n+    --recording-buffer-bg: #faaf8c;\n+    --recording-seekbar-red: #f54e00;\n+    --recording-hover-event: var(--primary-bg-hover);\n+    --recording-hover-event-mid: var(--primary-bg-active);\n+    --recording-hover-event-dark: var(--primary);\n+    --recording-current-event: #eef2ff;\n+    --recording-current-event-dark: #35416b;\n+    --recording-failure-event: #fee9e2;\n+    --recording-failure-event-dark: #cd3000;\n+    --recording-highlight-event: #fdedc9;\n+    --recording-highlight-event-dark: #946508;\n+\n+    // Z-indexes, synced with vars.ts\n+    --z-nps-overlay: 5200;\n+    --z-bottom-notice: 5100;\n+    --z-command-palette: 1875;\n+    --z-ant-select-dropdown: 1065;\n+    --z-ant-message: 1070;\n+    --z-popup: 1061;\n+    --z-modal: 1060;\n+    --z-ant-modal-wrap: 1060;\n+    --z-ant-modal-mask: 1050;\n+    --z-plugins-popconfirm: 1001;\n+    --z-pinned-dashboards-popup: 962;\n+    --z-graph-tooltip: 951;\n+    --z-drawer: 950;\n+    --z-main-nav: 948;\n+    --z-lemon-sidebar: 940;\n+    --z-mobile-nav-overlay: 931;\n+    --z-top-navigation: 800;\n+    --z-content-overlay: 488;\n+    --z-graph-annotation-prompt: 99;\n+    --z-raised: 5;\n+    --z-city-background-content: 1;\n+    --z-city-background-image: 0;\n+\n+    // Toasts\n+    // Update and override from react-toastify\n+    // which attaches these variables to :root\n+    // which means they aren't available in the toolbar\n+    --toastify-color-info: var(--primary);\n+    --toastify-color-success: var(--success);\n+    --toastify-color-warning: var(--warning);\n+    --toastify-color-error: var(--danger);\n+    --toastify-toast-background: var(--bg-light);\n+    --toastify-toast-width: 26rem;\n+    --toastify-toast-min-height: 3.5rem;\n+    --toastify-toast-max-height: 16rem;\n+\n+    //In App Prompts\n+    --in-app-prompts-width: 26rem;\n+\n+    // Deprecated color transforms from SCSS var heydays\n+    --depr-lighten-primary-20: #{lighten($_primary, 20%)};\n+    --depr-lighten-primary-10: #{lighten($_primary, 10%)};\n+    --depr-lighten-primary-5: #{lighten($_primary, 5%)};\n+    --depr-lighten-primary-15: #{lighten($_primary, 15%)};\n+\n+    --lettermark-1-bg: #dcb1e3;\n+    --lettermark-1-text: #572e5e;\n+    --lettermark-2-bg: #ffc4b2;\n+    --lettermark-2-text: #3e5891;\n+    --lettermark-3-bg: #fdedc9;\n+    --lettermark-3-text: #3e5891;\n+    --lettermark-4-bg: #3e5891;\n+    --lettermark-4-text: #ffc4b2;\n+    --lettermark-5-bg: #8da9e7;\n+    --lettermark-5-text: #572e5e;\n+    --lettermark-6-bg: #572e5e;\n+    --lettermark-6-text: #dcb1e3;\n+    --lettermark-7-bg: #ffc035;\n+    --lettermark-7-text: #35416b;\n+    --lettermark-8-bg: #ff906e;\n+    --lettermark-8-text: #2a3d65;\n+    --lettermark-8-bg: #e8edff;\n+    --lettermark-8-text: #35416b;\n+\n+    // Modals\n+    --modal-backdrop-blur: 5px; // Half the value in Figma as blur is calculated differently there it seems\n+    --modal-transition-time: 200ms;\n+}\ndiff --git a/frontend/src/toolbar/Toolbar.stories.tsx b/frontend/src/toolbar/Toolbar.stories.tsx\nindex 09795769f..8ded734d0 100644\n--- a/frontend/src/toolbar/Toolbar.stories.tsx\n+++ b/frontend/src/toolbar/Toolbar.stories.tsx\n@@ -1,4 +1,3 @@\n-import 'react-toastify/dist/ReactToastify.css'\n import '~/styles'\n import '~/toolbar/styles.scss'\n \ndiff --git a/frontend/src/toolbar/index.tsx b/frontend/src/toolbar/index.tsx\nindex 623158ace..c38161b6c 100644\n--- a/frontend/src/toolbar/index.tsx\n+++ b/frontend/src/toolbar/index.tsx\n@@ -1,4 +1,3 @@\n-import 'react-toastify/dist/ReactToastify.css'\n import '~/styles'\n import './styles.scss'\n \ndiff --git a/frontend/src/toolbar/styles.scss b/frontend/src/toolbar/styles.scss\nindex 4f2dd7736..5b80985fd 100644\n--- a/frontend/src/toolbar/styles.scss\n+++ b/frontend/src/toolbar/styles.scss\n@@ -1,4 +1,8 @@\n+@import '../styles/vars';\n+\n :host {\n+    @include root-variables;\n+\n     // reset fonts\n     all: initial;\n     font-family: 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif;\n"
  },
  "bf295c893d127977b112fc49725aa3dc910881a7": {
    "hash": "bf295c893d127977b112fc49725aa3dc910881a7",
    "message": "fix: Layout for some onboarding elements (#11569)",
    "diff": "commit bf295c893d127977b112fc49725aa3dc910881a7\nAuthor: Ben White <ben@benjackwhite.co.uk>\nDate:   Wed Aug 31 10:49:26 2022 +0100\n\n    fix: Layout for some onboarding elements (#11569)\n\ndiff --git a/frontend/src/lib/components/BridgePage/BridgePage.scss b/frontend/src/lib/components/BridgePage/BridgePage.scss\nindex cded83737..ea1bc4bb6 100644\n--- a/frontend/src/lib/components/BridgePage/BridgePage.scss\n+++ b/frontend/src/lib/components/BridgePage/BridgePage.scss\n@@ -48,10 +48,9 @@\n     .BridgePage__art {\n         position: relative;\n         margin-right: 60px;\n-        margin-top: 260px;\n+        margin-top: 160px;\n         visibility: none;\n         display: none;\n-        align-self: flex-start;\n \n         img {\n             width: 390px;\ndiff --git a/frontend/src/scenes/authentication/InviteSignup.scss b/frontend/src/scenes/authentication/InviteSignup.scss\nindex 8d8a4ef2f..32d465c76 100644\n--- a/frontend/src/scenes/authentication/InviteSignup.scss\n+++ b/frontend/src/scenes/authentication/InviteSignup.scss\n@@ -3,9 +3,11 @@\n .InviteSignupSummary {\n     margin-bottom: 2rem;\n     @include screen($md) {\n+        // Positions the notice just above the Hedgehog (center positioned with negative top offset)\n         opacity: 0.8;\n         position: absolute;\n-        top: 0px;\n+        top: 50%;\n+        margin-top: -300px;\n         left: -380px;\n         width: 240px;\n         padding: 1rem 0;\ndiff --git a/frontend/src/scenes/ingestion/panels/InstructionsPanel.scss b/frontend/src/scenes/ingestion/panels/InstructionsPanel.scss\nindex 932263b27..005ff0d4a 100644\n--- a/frontend/src/scenes/ingestion/panels/InstructionsPanel.scss\n+++ b/frontend/src/scenes/ingestion/panels/InstructionsPanel.scss\n@@ -1,4 +1,5 @@\n .InstructionsPanel {\n+    max-width: 50rem;\n     h1 {\n         font-size: 28px;\n         font-weight: 800;\n"
  },
  "fe7787214d9010517b08b2c286e17365ec0e59a2": {
    "hash": "fe7787214d9010517b08b2c286e17365ec0e59a2",
    "message": "fix: Re-rendering of Event edit losing focus (#11567)",
    "diff": "commit fe7787214d9010517b08b2c286e17365ec0e59a2\nAuthor: Ben White <ben@benjackwhite.co.uk>\nDate:   Wed Aug 31 08:32:51 2022 +0100\n\n    fix: Re-rendering of Event edit losing focus (#11567)\n\ndiff --git a/frontend/src/scenes/actions/ActionEdit.tsx b/frontend/src/scenes/actions/ActionEdit.tsx\nindex 01bfaf244..f7c94679b 100644\n--- a/frontend/src/scenes/actions/ActionEdit.tsx\n+++ b/frontend/src/scenes/actions/ActionEdit.tsx\n@@ -118,7 +118,6 @@ export function ActionEdit({ action: loadedAction, id, onSave, temporaryToken }:\n                                                 ? 'edit'\n                                                 : undefined /* When creating a new action, maintain edit mode */\n                                         }\n-                                        autoFocus={!!id}\n                                         data-attr=\"action-description\"\n                                         className=\"action-description\"\n                                         compactButtons\n@@ -186,7 +185,7 @@ export function ActionEdit({ action: loadedAction, id, onSave, temporaryToken }:\n                                         const identifier = String(JSON.stringify(step))\n                                         return (\n                                             <ActionStep\n-                                                key={identifier}\n+                                                key={index}\n                                                 identifier={identifier}\n                                                 index={index}\n                                                 step={step}\ndiff --git a/frontend/src/scenes/actions/ActionStep.tsx b/frontend/src/scenes/actions/ActionStep.tsx\nindex 3ded987f6..090b81335 100644\n--- a/frontend/src/scenes/actions/ActionStep.tsx\n+++ b/frontend/src/scenes/actions/ActionStep.tsx\n@@ -158,7 +158,6 @@ function Option(props: {\n                     data-attr=\"edit-action-url-input\"\n                     allowClear\n                     onChange={onOptionChange}\n-                    autoFocus\n                     value={props.step[props.item] || ''}\n                     placeholder={props.placeholder}\n                 />\n"
  },
  "a53a21cd9a701082cd563eafe7cd62a523d7856d": {
    "hash": "a53a21cd9a701082cd563eafe7cd62a523d7856d",
    "message": "fix(data-m): fix property filter resetting event filter (#11282)",
    "diff": "commit a53a21cd9a701082cd563eafe7cd62a523d7856d\nAuthor: Alex Gyujin Kim <alexgkim205@gmail.com>\nDate:   Thu Aug 18 11:37:10 2022 -0400\n\n    fix(data-m): fix property filter resetting event filter (#11282)\n\ndiff --git a/cypress/e2e/actionEvents.js b/cypress/e2e/actionEvents.js\nindex 7e8945f80..216f4516d 100644\n--- a/cypress/e2e/actionEvents.js\n+++ b/cypress/e2e/actionEvents.js\n@@ -6,9 +6,7 @@ const createAction = (actionName) => {\n \n     cy.get('[data-attr=action-name-create]').type(actionName)\n     cy.get('.ant-radio-group > :nth-child(3)').click()\n-    cy.get('[data-attr=edit-action-url-input]').type(Cypress.config().baseUrl)\n-    cy.wait(300)\n-    cy.focused().should('have.attr', 'data-attr', 'edit-action-url-input')\n+    cy.get('[data-attr=edit-action-url-input]').click().type(Cypress.config().baseUrl)\n \n     cy.get('[data-attr=save-action-button]').click()\n \ndiff --git a/frontend/src/scenes/actions/ActionEdit.tsx b/frontend/src/scenes/actions/ActionEdit.tsx\nindex 2afde1ca0..49629dd09 100644\n--- a/frontend/src/scenes/actions/ActionEdit.tsx\n+++ b/frontend/src/scenes/actions/ActionEdit.tsx\n@@ -179,41 +179,44 @@ export function ActionEdit({ action: loadedAction, id, onSave, temporaryToken }:\n                         )}\n                     </Field>\n                     <Field name=\"steps\">\n-                        {({ value, onChange }) => (\n+                        {({ value: stepsValue, onChange }) => (\n                             <Row gutter={[24, 24]}>\n                                 <>\n-                                    {value?.map((step: ActionStepType, index: number) => (\n-                                        <ActionStep\n-                                            key={step.id || step.isNew}\n-                                            identifier={String(step.id || step.isNew)}\n-                                            index={index}\n-                                            step={step}\n-                                            actionId={action.id || 0}\n-                                            isOnlyStep={!!value && value.length === 1}\n-                                            onDelete={() => {\n-                                                const identifier = step.id ? 'id' : 'isNew'\n-                                                onChange(\n-                                                    value?.filter(\n-                                                        (s: ActionStepType) => s[identifier] !== step[identifier]\n+                                    {stepsValue.map((step: ActionStepType, index: number) => {\n+                                        const identifier = String(JSON.stringify(step))\n+                                        return (\n+                                            <ActionStep\n+                                                key={identifier}\n+                                                identifier={identifier}\n+                                                index={index}\n+                                                step={step}\n+                                                actionId={action.id || 0}\n+                                                isOnlyStep={!!stepsValue && stepsValue.length === 1}\n+                                                onDelete={() => {\n+                                                    const identifier = step.id ? 'id' : 'isNew'\n+                                                    onChange(\n+                                                        stepsValue?.filter(\n+                                                            (s: ActionStepType) => s[identifier] !== step[identifier]\n+                                                        ) ?? []\n                                                     )\n-                                                )\n-                                            }}\n-                                            onChange={(newStep) => {\n-                                                onChange(\n-                                                    value?.map((s: ActionStepType) =>\n-                                                        (step.id && s.id == step.id) ||\n-                                                        (step.isNew && s.isNew === step.isNew)\n-                                                            ? {\n-                                                                  id: step.id,\n-                                                                  isNew: step.isNew,\n-                                                                  ...newStep,\n-                                                              }\n-                                                            : s\n+                                                }}\n+                                                onChange={(newStep) => {\n+                                                    onChange(\n+                                                        stepsValue?.map((s: ActionStepType) =>\n+                                                            (step.id && s.id == step.id) ||\n+                                                            (step.isNew && s.isNew === step.isNew)\n+                                                                ? {\n+                                                                      id: step.id,\n+                                                                      isNew: step.isNew,\n+                                                                      ...newStep,\n+                                                                  }\n+                                                                : s\n+                                                        ) ?? []\n                                                     )\n-                                                )\n-                                            }}\n-                                        />\n-                                    ))}\n+                                                }}\n+                                            />\n+                                        )\n+                                    })}\n                                 </>\n \n                                 <Col span={24} md={12}>\ndiff --git a/frontend/src/scenes/actions/ActionStep.tsx b/frontend/src/scenes/actions/ActionStep.tsx\nindex 090b81335..3ded987f6 100644\n--- a/frontend/src/scenes/actions/ActionStep.tsx\n+++ b/frontend/src/scenes/actions/ActionStep.tsx\n@@ -158,6 +158,7 @@ function Option(props: {\n                     data-attr=\"edit-action-url-input\"\n                     allowClear\n                     onChange={onOptionChange}\n+                    autoFocus\n                     value={props.step[props.item] || ''}\n                     placeholder={props.placeholder}\n                 />\n"
  },
  "17a25011aa3e72671110e8ab4723ac6df7e880f5": {
    "hash": "17a25011aa3e72671110e8ab4723ac6df7e880f5",
    "message": "fix: materialised columns (#11558)",
    "diff": "commit 17a25011aa3e72671110e8ab4723ac6df7e880f5\nAuthor: Neil Kakkar <neilkakkar@gmail.com>\nDate:   Wed Aug 31 21:02:33 2022 +0100\n\n    fix: materialised columns (#11558)\n\ndiff --git a/ee/clickhouse/materialized_columns/analyze.py b/ee/clickhouse/materialized_columns/analyze.py\nindex a5042088b..7f3882339 100644\n--- a/ee/clickhouse/materialized_columns/analyze.py\n+++ b/ee/clickhouse/materialized_columns/analyze.py\n@@ -123,7 +123,7 @@ def _get_queries(since_hours_ago: int, min_query_time: int) -> List[Query]:\n         FROM system.query_log\n         WHERE\n             query NOT LIKE '%%query_log%%'\n-            AND query LIKE '/* request:%%'\n+            AND (query LIKE '/* user_id:%%' OR query LIKE '/* request:%%')\n             AND query NOT LIKE '%%INSERT%%'\n             AND type = 'QueryFinish'\n             AND query_start_time > now() - toIntervalHour(%(since)s)\ndiff --git a/ee/clickhouse/materialized_columns/test/test_query.py b/ee/clickhouse/materialized_columns/test/test_query.py\nnew file mode 100644\nindex 000000000..4e5ccf86a\n--- /dev/null\n+++ b/ee/clickhouse/materialized_columns/test/test_query.py\n@@ -0,0 +1,25 @@\n+from posthog.test.base import APIBaseTest, ClickhouseTestMixin\n+\n+\n+class TestQuery(ClickhouseTestMixin, APIBaseTest):\n+    def test_get_queries_detects(self):\n+\n+        # some random\n+        with self.capture_select_queries() as queries:\n+            self.client.post(\n+                f\"/api/projects/{self.team.id}/insights/funnel/\",\n+                {\n+                    \"events\": [{\"id\": \"step one\", \"type\": \"events\", \"order\": 0},],\n+                    \"funnel_window_days\": 14,\n+                    \"funnel_order_type\": \"unordered\",\n+                    \"insight\": \"funnels\",\n+                },\n+            ).json()\n+\n+        self.assertTrue(len(queries))\n+\n+        # make sure that the queries start with a discoverable prefix.\n+        # If this changes, also update ee/clickhouse/materialized_columns/analyze.py::_get_queries to\n+        # filter on the right queries\n+        for q in queries:\n+            self.assertTrue(q.startswith(\"/* user_id\"))\ndiff --git a/ee/clickhouse/queries/test/__snapshots__/test_trends.ambr b/ee/clickhouse/queries/test/__snapshots__/test_trends.ambr\nindex 3e55790de..4fe515cec 100644\n--- a/ee/clickhouse/queries/test/__snapshots__/test_trends.ambr\n+++ b/ee/clickhouse/queries/test/__snapshots__/test_trends.ambr\n@@ -332,7 +332,7 @@\n        AND timestamp <= toDateTime('2020-01-02 23:59:59')\n        AND (has(['technology'], replaceRegexpAll(JSONExtractRaw(group0_properties, 'industry'), '^\"|\"$', ''))) )\n   GROUP BY actor_id\n-  LIMIT 200\n+  LIMIT 100\n   OFFSET 0\n   '\n ---\n@@ -417,7 +417,7 @@\n        AND timestamp <= toDateTime('2020-01-02 23:59:59')\n        AND (has(['technology'], \"mat_gp0_industry\")) )\n   GROUP BY actor_id\n-  LIMIT 200\n+  LIMIT 100\n   OFFSET 0\n   '\n ---\n@@ -952,7 +952,7 @@\n        AND (has(['finance'], replaceRegexpAll(JSONExtractRaw(group0_properties, 'industry'), '^\"|\"$', ''))\n             AND has(['six'], replaceRegexpAll(JSONExtractRaw(group2_properties, 'name'), '^\"|\"$', ''))) )\n   GROUP BY actor_id\n-  LIMIT 200\n+  LIMIT 100\n   OFFSET 0\n   '\n ---\n@@ -1008,7 +1008,7 @@\n        AND (has(['finance'], \"mat_gp0_industry\")\n             AND has(['six'], \"mat_gp2_name\")) )\n   GROUP BY actor_id\n-  LIMIT 200\n+  LIMIT 100\n   OFFSET 0\n   '\n ---\ndiff --git a/ee/clickhouse/views/test/test_clickhouse_path_person.py b/ee/clickhouse/views/test/test_clickhouse_path_person.py\nindex a2a9ddf8d..afbbcd342 100644\n--- a/ee/clickhouse/views/test/test_clickhouse_path_person.py\n+++ b/ee/clickhouse/views/test/test_clickhouse_path_person.py\n@@ -18,6 +18,7 @@ class TestPathPerson(ClickhouseTestMixin, APIBaseTest):\n             if delete:\n                 person = Person.objects.create(distinct_ids=[f\"user_{i}\"], team=self.team)\n             else:\n+                person = None\n                 _create_person(distinct_ids=[f\"user_{i}\"], team=self.team)\n             _create_event(\n                 event=\"step one\",\n@@ -25,6 +26,7 @@ class TestPathPerson(ClickhouseTestMixin, APIBaseTest):\n                 team=self.team,\n                 timestamp=\"2021-05-01 00:00:00\",\n                 properties={\"$browser\": \"Chrome\"},\n+                person_id=person.uuid if person else None,\n             )\n             if i % 2 == 0:\n                 _create_event(\n@@ -33,6 +35,7 @@ class TestPathPerson(ClickhouseTestMixin, APIBaseTest):\n                     team=self.team,\n                     timestamp=\"2021-05-01 00:10:00\",\n                     properties={\"$browser\": \"Chrome\"},\n+                    person_id=person.uuid if person else None,\n                 )\n             _create_event(\n                 event=\"step three\",\n@@ -40,6 +43,7 @@ class TestPathPerson(ClickhouseTestMixin, APIBaseTest):\n                 team=self.team,\n                 timestamp=\"2021-05-01 00:20:00\",\n                 properties={\"$browser\": \"Chrome\"},\n+                person_id=person.uuid if person else None,\n             )\n             if delete:\n                 person.delete()\n@@ -169,7 +173,7 @@ class TestPathPerson(ClickhouseTestMixin, APIBaseTest):\n             \"limit\": 15,\n         }\n \n-        response = self.client.get(\"/api/person/path/\", data=request_data)\n+        response = self.client.get(f\"/api/person/path/\", data=request_data)\n         self.assertEqual(response.status_code, status.HTTP_200_OK)\n         j = response.json()\n         people = j[\"results\"][0][\"people\"]\ndiff --git a/ee/clickhouse/management/commands/materialize_columns.py b/ee/management/commands/materialize_columns.py\nsimilarity index 95%\nrename from ee/clickhouse/management/commands/materialize_columns.py\nrename to ee/management/commands/materialize_columns.py\nindex 11f0e0a63..bffae385f 100644\n--- a/ee/clickhouse/management/commands/materialize_columns.py\n+++ b/ee/management/commands/materialize_columns.py\n@@ -38,7 +38,7 @@ class Command(BaseCommand):\n             \"--min-query-time\",\n             type=int,\n             default=MATERIALIZE_COLUMNS_MINIMUM_QUERY_TIME,\n-            help=\"Minimum query time (ms)9 before a query if considered for optimization. Same as MATERIALIZE_COLUMNS_MINIMUM_QUERY_TIME env variable.\",\n+            help=\"Minimum query time (ms) before a query if considered for optimization. Same as MATERIALIZE_COLUMNS_MINIMUM_QUERY_TIME env variable.\",\n         )\n         parser.add_argument(\n             \"--analyze-period\",\ndiff --git a/frontend/src/scenes/trends/PersonsModal.tsx b/frontend/src/scenes/trends/PersonsModal.tsx\nindex fd2b39c63..d79104ad1 100644\n--- a/frontend/src/scenes/trends/PersonsModal.tsx\n+++ b/frontend/src/scenes/trends/PersonsModal.tsx\n@@ -172,7 +172,7 @@ export function PersonsModal({\n             >\n                 {people && !!people.missingPersons && (\n                     <AlertMessage type=\"info\" className=\"mb-2\">\n-                        {people.missingPersons + 1}{' '}\n+                        {people.missingPersons}{' '}\n                         {people.missingPersons > 1\n                             ? `${aggregationTargetLabel.plural} are`\n                             : `${aggregationTargetLabel.singular} is`}{' '}\n"
  },
  "b7667f528fa1b26389553fac4d6f0805a64da9fd": {
    "hash": "b7667f528fa1b26389553fac4d6f0805a64da9fd",
    "message": "fix issue when breaking down on group property and trying to return persons (#7145)",
    "diff": "commit b7667f528fa1b26389553fac4d6f0805a64da9fd\nAuthor: Eric Duong <eeoneric@gmail.com>\nDate:   Tue Nov 16 02:39:48 2021 -0500\n\n    fix issue when breaking down on group property and trying to return persons (#7145)\n\ndiff --git a/ee/clickhouse/queries/test/__snapshots__/test_trends.ambr b/ee/clickhouse/queries/test/__snapshots__/test_trends.ambr\nindex cb9e5fe27..c94322f1e 100644\n--- a/ee/clickhouse/queries/test/__snapshots__/test_trends.ambr\n+++ b/ee/clickhouse/queries/test/__snapshots__/test_trends.ambr\n@@ -140,6 +140,69 @@\n   GROUP BY breakdown_value\n   '\n ---\n+# name: TestClickhouseTrends.test_breakdown_by_group_props.2\n+  '\n+  \n+  SELECT person_id,\n+         created_at,\n+         team_id,\n+         person_props,\n+         is_identified,\n+         arrayReduce('groupUniqArray', groupArray(distinct_id)) AS distinct_ids\n+  FROM\n+    (SELECT e.timestamp as timestamp,\n+            pdi.person_id as person_id,\n+            e.distinct_id as distinct_id,\n+            e.team_id as team_id,\n+            person.created_at as created_at,\n+            person.person_props as person_props,\n+            person.is_identified as is_identified\n+     FROM events e\n+     INNER JOIN\n+       (SELECT distinct_id,\n+               argMax(person_id, _timestamp) as person_id\n+        FROM\n+          (SELECT distinct_id,\n+                  person_id,\n+                  max(_timestamp) as _timestamp\n+           FROM person_distinct_id\n+           WHERE team_id = 2\n+           GROUP BY person_id,\n+                    distinct_id,\n+                    team_id\n+           HAVING max(is_deleted) = 0)\n+        GROUP BY distinct_id) AS pdi ON events.distinct_id = pdi.distinct_id\n+     INNER JOIN\n+       (SELECT id,\n+               argMax(created_at, _timestamp) as created_at,\n+               argMax(is_identified, _timestamp) as is_identified,\n+               argMax(properties, _timestamp) as person_props\n+        FROM person\n+        WHERE team_id = 2\n+        GROUP BY id\n+        HAVING max(is_deleted) = 0) person ON person.id = pdi.person_id\n+     INNER JOIN\n+       (SELECT group_key,\n+               argMax(group_properties, _timestamp) AS group_properties_0\n+        FROM groups\n+        WHERE team_id = 2\n+          AND group_type_index = 0\n+        GROUP BY group_key) groups_0 ON $group_0 == groups_0.group_key\n+     WHERE team_id = 2\n+       AND event = 'sign up'\n+       AND timestamp >= '2020-01-02 00:00:00'\n+       AND timestamp <= '2020-01-02 23:59:59'\n+       AND has(['technology'], trim(BOTH '\"'\n+                                    FROM JSONExtractRaw(group_properties_0, 'industry'))) )\n+  GROUP BY person_id,\n+           created_at,\n+           team_id,\n+           person_props,\n+           is_identified\n+  LIMIT 200\n+  OFFSET 0\n+  '\n+---\n # name: TestClickhouseTrends.test_breakdown_by_group_props_with_person_filter\n   '\n   \ndiff --git a/ee/clickhouse/queries/test/test_trends.py b/ee/clickhouse/queries/test/test_trends.py\nindex faa13b181..bc0d408a9 100644\n--- a/ee/clickhouse/queries/test/test_trends.py\n+++ b/ee/clickhouse/queries/test/test_trends.py\n@@ -1,3 +1,4 @@\n+from datetime import datetime\n from uuid import uuid4\n \n from django.utils import timezone\n@@ -9,11 +10,13 @@ from ee.clickhouse.models.group import create_group\n from ee.clickhouse.models.person import create_person_distinct_id\n from ee.clickhouse.queries.trends.clickhouse_trends import ClickhouseTrends\n from ee.clickhouse.queries.trends.person import TrendsPersonQuery\n+from ee.clickhouse.test.test_journeys import journeys_for\n from ee.clickhouse.util import ClickhouseTestMixin, snapshot_clickhouse_queries\n from posthog.constants import TRENDS_BAR_VALUE\n from posthog.models.action import Action\n from posthog.models.action_step import ActionStep\n from posthog.models.cohort import Cohort\n+from posthog.models.entity import Entity\n from posthog.models.filters import Filter\n from posthog.models.group_type_mapping import GroupTypeMapping\n from posthog.models.person import Person\n@@ -112,41 +115,31 @@ class TestClickhouseTrends(ClickhouseTestMixin, trend_test_factory(ClickhouseTre\n     def test_breakdown_by_group_props(self):\n         self._create_groups()\n \n-        _create_event(\n-            event=\"sign up\",\n-            distinct_id=\"person1\",\n-            team=self.team,\n-            properties={\"$group_0\": \"org:5\"},\n-            timestamp=\"2020-01-02T12:00:00Z\",\n-        )\n-        _create_event(\n-            event=\"sign up\",\n-            distinct_id=\"person1\",\n-            team=self.team,\n-            properties={\"$group_0\": \"org:6\"},\n-            timestamp=\"2020-01-02T12:00:00Z\",\n-        )\n-        _create_event(\n-            event=\"sign up\",\n-            distinct_id=\"person1\",\n-            team=self.team,\n-            properties={\"$group_0\": \"org:7\", \"$group_1\": \"company:10\"},\n-            timestamp=\"2020-01-02T12:00:00Z\",\n-        )\n+        journey = {\n+            \"person1\": [\n+                {\"event\": \"sign up\", \"timestamp\": datetime(2020, 1, 2, 12), \"properties\": {\"$group_0\": \"org:5\"},},\n+                {\"event\": \"sign up\", \"timestamp\": datetime(2020, 1, 2, 13), \"properties\": {\"$group_0\": \"org:6\"},},\n+                {\n+                    \"event\": \"sign up\",\n+                    \"timestamp\": datetime(2020, 1, 2, 15),\n+                    \"properties\": {\"$group_0\": \"org:7\", \"$group_1\": \"company:10\"},\n+                },\n+            ],\n+        }\n \n-        response = ClickhouseTrends().run(\n-            Filter(\n-                data={\n-                    \"date_from\": \"2020-01-01T00:00:00Z\",\n-                    \"date_to\": \"2020-01-12T00:00:00Z\",\n-                    \"breakdown\": \"industry\",\n-                    \"breakdown_type\": \"group\",\n-                    \"breakdown_group_type_index\": 0,\n-                    \"events\": [{\"id\": \"sign up\", \"name\": \"sign up\", \"type\": \"events\", \"order\": 0,}],\n-                }\n-            ),\n-            self.team,\n+        people = journeys_for(events_by_person=journey, team=self.team)\n+\n+        filter = Filter(\n+            data={\n+                \"date_from\": \"2020-01-01T00:00:00Z\",\n+                \"date_to\": \"2020-01-12T00:00:00Z\",\n+                \"breakdown\": \"industry\",\n+                \"breakdown_type\": \"group\",\n+                \"breakdown_group_type_index\": 0,\n+                \"events\": [{\"id\": \"sign up\", \"name\": \"sign up\", \"type\": \"events\", \"order\": 0,}],\n+            }\n         )\n+        response = ClickhouseTrends().run(filter, self.team,)\n \n         self.assertEqual(len(response), 2)\n         self.assertEqual(response[0][\"breakdown_value\"], \"finance\")\n@@ -154,6 +147,14 @@ class TestClickhouseTrends(ClickhouseTestMixin, trend_test_factory(ClickhouseTre\n         self.assertEqual(response[1][\"breakdown_value\"], \"technology\")\n         self.assertEqual(response[1][\"count\"], 1)\n \n+        filter = filter.with_data(\n+            {\"breakdown_value\": \"technology\", \"date_from\": \"2020-01-02T00:00:00Z\", \"date_to\": \"2020-01-03T00:00:00Z\"}\n+        )\n+        entity = Entity({\"id\": \"sign up\", \"name\": \"sign up\", \"type\": \"events\", \"order\": 0,})\n+        res = self._get_trend_people(filter, entity)\n+\n+        self.assertEqual(res[0][\"distinct_ids\"], [\"person1\"])\n+\n     @snapshot_clickhouse_queries\n     def test_breakdown_by_group_props_with_person_filter(self):\n         self._create_groups()\ndiff --git a/ee/clickhouse/queries/trends/person.py b/ee/clickhouse/queries/trends/person.py\nindex 1cd900a90..31d668e68 100644\n--- a/ee/clickhouse/queries/trends/person.py\n+++ b/ee/clickhouse/queries/trends/person.py\n@@ -56,9 +56,18 @@ class TrendsPersonQuery:\n             and isinstance(self.filter.breakdown, str)\n             and isinstance(self.filter.breakdown_value, str)\n         ):\n-            breakdown_prop = Property(\n-                key=self.filter.breakdown, value=self.filter.breakdown_value, type=self.filter.breakdown_type\n-            )\n+            if self.filter.breakdown_type == \"group\":\n+                breakdown_prop = Property(\n+                    key=self.filter.breakdown,\n+                    value=self.filter.breakdown_value,\n+                    type=self.filter.breakdown_type,\n+                    group_type_index=self.filter.breakdown_group_type_index,\n+                )\n+            else:\n+                breakdown_prop = Property(\n+                    key=self.filter.breakdown, value=self.filter.breakdown_value, type=self.filter.breakdown_type\n+                )\n+\n             self.filter = self.filter.with_data({\"properties\": self.filter.properties + [breakdown_prop]})\n \n         events_query, params = TrendsEventQuery(\n"
  },
  "168868f004454a1ab0e75f2af4cc59d0b03de117": {
    "hash": "168868f004454a1ab0e75f2af4cc59d0b03de117",
    "message": "fix(recordings): playlist recording state (#11691)",
    "diff": "commit 168868f004454a1ab0e75f2af4cc59d0b03de117\nAuthor: Rick Marron <rcmarron@gmail.com>\nDate:   Wed Sep 7 11:00:49 2022 -0700\n\n    fix(recordings): playlist recording state (#11691)\n\ndiff --git a/frontend/src/scenes/session-recordings/SessionRecordingsPlaylist.tsx b/frontend/src/scenes/session-recordings/SessionRecordingsPlaylist.tsx\nindex 0b54fd43b..d7f61b263 100644\n--- a/frontend/src/scenes/session-recordings/SessionRecordingsPlaylist.tsx\n+++ b/frontend/src/scenes/session-recordings/SessionRecordingsPlaylist.tsx\n@@ -2,14 +2,13 @@ import React from 'react'\n import { useActions, useValues } from 'kea'\n import { colonDelimitedDuration } from '~/lib/utils'\n import { SessionRecordingType } from '~/types'\n-import { getRecordingListLimit, sessionRecordingsTableLogic } from './sessionRecordingsTableLogic'\n+import { getRecordingListLimit, PLAYLIST_LIMIT, sessionRecordingsTableLogic } from './sessionRecordingsTableLogic'\n import { asDisplay } from 'scenes/persons/PersonHeader'\n import './SessionRecordingPlaylist.scss'\n import { LemonTable, LemonTableColumns } from 'lib/components/LemonTable'\n import { TZLabel } from 'lib/components/TimezoneAware'\n import { SessionRecordingPlayerV3 } from './player/SessionRecordingPlayer'\n import { EmptyMessage } from 'lib/components/EmptyMessage/EmptyMessage'\n-import { Spinner } from 'lib/components/Spinner/Spinner'\n import { LemonButton } from '@posthog/lemon-ui'\n import { IconChevronLeft, IconChevronRight } from 'lib/components/icons'\n \n@@ -67,6 +66,7 @@ export function SessionRecordingsPlaylist({ personUUID }: SessionRecordingsTable\n                     data-attr=\"session-recording-table\"\n                     data-tooltip=\"session-recording-table\"\n                     emptyState=\"No matching recordings found\"\n+                    loadingSkeletonRows={PLAYLIST_LIMIT}\n                 />\n                 <div className=\"SessionRecordingPlaylist__pagination-control\">\n                     <span>{`${offset + 1} - ${\n@@ -98,10 +98,6 @@ export function SessionRecordingsPlaylist({ personUUID }: SessionRecordingsTable\n                     <div className=\"border rounded h-full\">\n                         <SessionRecordingPlayerV3 playerKey=\"playlist\" sessionRecordingId={activeSessionRecordingId} />\n                     </div>\n-                ) : sessionRecordingsResponseLoading ? (\n-                    <div className=\"SessionRecordingPlaylist__loading\">\n-                        <Spinner />\n-                    </div>\n                 ) : (\n                     <EmptyMessage\n                         title=\"No recording selected\"\ndiff --git a/frontend/src/scenes/session-recordings/sessionRecordingsTableLogic.ts b/frontend/src/scenes/session-recordings/sessionRecordingsTableLogic.ts\nindex d08598959..519e2725f 100644\n--- a/frontend/src/scenes/session-recordings/sessionRecordingsTableLogic.ts\n+++ b/frontend/src/scenes/session-recordings/sessionRecordingsTableLogic.ts\n@@ -30,7 +30,7 @@ interface HashParams {\n }\n \n const TABLE_LIMIT = 50\n-const PLAYLIST_LIMIT = 20\n+export const PLAYLIST_LIMIT = 20\n \n export const getRecordingListLimit = (isPlaylist?: boolean): number => (isPlaylist ? PLAYLIST_LIMIT : TABLE_LIMIT)\n \n"
  },
  "6a94e0d9b89d6e0c70a34efe0af8a7a58bb9ab10": {
    "hash": "6a94e0d9b89d6e0c70a34efe0af8a7a58bb9ab10",
    "message": "feat: console log for session recordings (#8803)\n    \n    * console log session recordings\n    \n    * fix\n    \n    * fix type\n    \n    * big ole pass\n    \n    * Add tooltip\n    \n    * update feedback copy\n    \n    * Add code snippet for config\n    \n    Co-authored-by: Rick Marron <rcmarron@gmail.com>",
    "diff": "commit 6a94e0d9b89d6e0c70a34efe0af8a7a58bb9ab10\nAuthor: Tim Glaser <tim@glsr.nl>\nDate:   Wed Mar 16 17:25:15 2022 +0000\n\n    feat: console log for session recordings (#8803)\n    \n    * console log session recordings\n    \n    * fix\n    \n    * fix type\n    \n    * big ole pass\n    \n    * Add tooltip\n    \n    * update feedback copy\n    \n    * Add code snippet for config\n    \n    Co-authored-by: Rick Marron <rcmarron@gmail.com>\n\ndiff --git a/frontend/src/lib/constants.tsx b/frontend/src/lib/constants.tsx\nindex e058daf83..297002eec 100644\n--- a/frontend/src/lib/constants.tsx\n+++ b/frontend/src/lib/constants.tsx\n@@ -112,6 +112,8 @@ export const FEATURE_FLAGS = {\n     INVITE_TEAMMATES_BANNER: 'invite-teammates-prompt', // owner: @marcushyett-ph\n     EXPERIMENTS_SECONDARY_METRICS: 'experiments-secondary-metrics', // owner: @neilkakkar\n     RECORDINGS_FILTER_EXPERIMENT: 'recording-filters-experiment', // owner: @rcmarron\n+    DASHBOARD_PERMISSIONS: 'dashboard-permissions', // owner: @Twixes\n+    SESSION_CONSOLE: 'session-recording-console', // owner: @timgl\n     AND_OR_FILTERING: 'and-or-filtering', // owner: @edscode\n     PROJECT_HOMEPAGE: 'project-homepage', // owner: @rcmarron\n }\ndiff --git a/frontend/src/lib/utils/eventUsageLogic.ts b/frontend/src/lib/utils/eventUsageLogic.ts\nindex 9f16fa324..69650efef 100644\n--- a/frontend/src/lib/utils/eventUsageLogic.ts\n+++ b/frontend/src/lib/utils/eventUsageLogic.ts\n@@ -358,6 +358,12 @@ export const eventUsageLogic = kea<\n         reportRecordingPlayerSeekbarEventHovered: true,\n         reportRecordingPlayerSpeedChanged: (newSpeed: number) => ({ newSpeed }),\n         reportRecordingPlayerSkipInactivityToggled: (skipInactivity: boolean) => ({ skipInactivity }),\n+        reportRecordingConsoleFeedback: (logCount: number, response: string, question: string) => ({\n+            logCount,\n+            response,\n+            question,\n+        }),\n+        reportRecordingConsoleViewed: (logCount: number) => ({ logCount }),\n         reportExperimentArchived: (experiment: Experiment) => ({ experiment }),\n         reportExperimentCreated: (experiment: Experiment) => ({ experiment }),\n         reportExperimentViewed: (experiment: Experiment) => ({ experiment }),\n@@ -829,6 +835,12 @@ export const eventUsageLogic = kea<\n         reportRecordingPlayerSkipInactivityToggled: ({ skipInactivity }) => {\n             posthog.capture('recording player skip inactivity toggled', { skip_inactivity: skipInactivity })\n         },\n+        reportRecordingConsoleFeedback: ({ response, logCount, question }) => {\n+            posthog.capture('recording console feedback', { question, response, log_count: logCount })\n+        },\n+        reportRecordingConsoleViewed: ({ logCount }) => {\n+            posthog.capture('recording console logs viewed', { log_count: logCount })\n+        },\n         reportExperimentArchived: ({ experiment }) => {\n             posthog.capture('experiment archived', {\n                 name: experiment.name,\ndiff --git a/frontend/src/loadPostHogJS.tsx b/frontend/src/loadPostHogJS.tsx\nindex f948e4b55..75fd3d756 100644\n--- a/frontend/src/loadPostHogJS.tsx\n+++ b/frontend/src/loadPostHogJS.tsx\n@@ -29,6 +29,7 @@ export function loadPostHogJS(): void {\n                 debug: window.JS_POSTHOG_SELF_CAPTURE,\n                 persistence: 'localStorage+cookie',\n                 _capture_performance: true,\n+                enable_recording_console_log: true,\n             })\n         )\n         // Make sure we have access to the object in window for debugging\ndiff --git a/frontend/src/scenes/session-recordings/__mocks__/recording_snapshots.json b/frontend/src/scenes/session-recordings/__mocks__/recording_snapshots.json\nindex 200dde41c..e8a6aa54b 100644\n--- a/frontend/src/scenes/session-recordings/__mocks__/recording_snapshots.json\n+++ b/frontend/src/scenes/session-recordings/__mocks__/recording_snapshots.json\n@@ -217,6 +217,50 @@\n                     ]\n                 },\n                 \"timestamp\": 1639102187000\n+            },\n+            {\n+                \"type\": 6,\n+                \"data\": {\n+                    \"plugin\": \"rrweb/console@1\",\n+                    \"payload\": {}\n+                },\n+                \"timestamp\": 1639078787000\n+            },\n+            {\n+                \"type\": 6,\n+                \"data\": {\n+                    \"plugin\": \"rrweb/console@1\",\n+                    \"payload\": {\n+                        \"trace\": [],\n+                        \"payload\": [],\n+                        \"level\": \"log\"\n+                    }\n+                },\n+                \"timestamp\": 1639078787000\n+            },\n+            {\n+                \"type\": 6,\n+                \"data\": {\n+                    \"plugin\": \"rrweb/console@1\",\n+                    \"payload\": {\n+                        \"trace\": [\"Login (https://example.com/path/to/file.js:123:456)\"],\n+                        \"payload\": [\"A big deal\", \"And a huge deal\"],\n+                        \"level\": \"warn\"\n+                    }\n+                },\n+                \"timestamp\": 1639078787000\n+            },\n+            {\n+                \"type\": 6,\n+                \"data\": {\n+                    \"plugin\": \"rrweb/console@1\",\n+                    \"payload\": {\n+                        \"trace\": [\"adcfvertyu$rf3423\"],\n+                        \"payload\": \"dcvrtbye\",\n+                        \"level\": \"error\"\n+                    }\n+                },\n+                \"timestamp\": 1639078787000\n             }\n         ]\n     }\ndiff --git a/frontend/src/scenes/session-recordings/player/Console.scss b/frontend/src/scenes/session-recordings/player/Console.scss\nnew file mode 100644\nindex 000000000..32eb72ec5\n--- /dev/null\n+++ b/frontend/src/scenes/session-recordings/player/Console.scss\n@@ -0,0 +1,54 @@\n+@import '~/vars';\n+\n+.console-log-container {\n+    display: flex;\n+    flex-direction: column;\n+    height: 100%;\n+}\n+.console-log {\n+    flex: 1;\n+    border: 1px solid $border;\n+    border-radius: $radius;\n+}\n+\n+.log-line {\n+    border-bottom: 1px solid $border;\n+    font-size: 12px;\n+    cursor: pointer;\n+    padding: $default_spacing/4 $default_spacing/2;\n+    width: 100%;\n+\n+    .log-text {\n+        margin: 0px;\n+    }\n+\n+    .trace-string {\n+        float: right;\n+        margin-left: $default_spacing/4;\n+        a {\n+            text-decoration: underline;\n+        }\n+    }\n+\n+    &.level-error {\n+        background: rgb(252, 241, 240);\n+        color: red;\n+    }\n+    &.level-warn {\n+        background: rgb(254, 251, 231);\n+    }\n+\n+    &:hover {\n+        background: rgba(83, 117, 255, 0.1);\n+    }\n+}\n+.more-logs-available {\n+    text-align: center;\n+    margin: $default_spacing/2;\n+}\n+.console-feedback-container {\n+    border: 1px solid $border;\n+    border-radius: $radius;\n+    padding: $default_spacing;\n+    margin-top: $default_spacing;\n+}\ndiff --git a/frontend/src/scenes/session-recordings/player/Console.tsx b/frontend/src/scenes/session-recordings/player/Console.tsx\nnew file mode 100644\nindex 000000000..bc5287dcc\n--- /dev/null\n+++ b/frontend/src/scenes/session-recordings/player/Console.tsx\n@@ -0,0 +1,127 @@\n+import { useActions, useValues } from 'kea'\n+import React, { useState } from 'react'\n+import { sessionRecordingLogic } from '../sessionRecordingLogic'\n+import { sessionRecordingPlayerLogic } from './sessionRecordingPlayerLogic'\n+import './Console.scss'\n+import { AutoSizer } from 'react-virtualized/dist/es/AutoSizer'\n+import { RecordingConsoleLog } from '~/types'\n+import { LemonButton } from 'lib/components/LemonButton'\n+import { eventUsageLogic } from 'lib/utils/eventUsageLogic'\n+import { Spinner } from 'lib/components/Spinner/Spinner'\n+\n+export function Console(): JSX.Element | null {\n+    const { orderedConsoleLogs, areAllSnapshotsLoaded } = useValues(sessionRecordingLogic)\n+    const { reportRecordingConsoleFeedback } = useActions(eventUsageLogic)\n+    const { seek } = useActions(sessionRecordingPlayerLogic)\n+    const [feedbackSubmitted, setFeedbackSubmitted] = useState(false)\n+\n+    const renderLogLine = (log: RecordingConsoleLog, index: number): JSX.Element => {\n+        return (\n+            <div\n+                className={`log-line level-${log.level}`}\n+                key={index}\n+                onClick={() => {\n+                    seek(log.playerPosition)\n+                }}\n+            >\n+                <div className=\"trace-string\">\n+                    {log.parsedTraceURL ? (\n+                        <a className=\"text-muted\" href={log.parsedTraceURL} target=\"_blank\">\n+                            {log.parsedTraceString}\n+                        </a>\n+                    ) : (\n+                        <span className=\"text-muted\">{log.parsedTraceString}</span>\n+                    )}\n+                </div>\n+                <p className=\"log-text\">{log.parsedPayload}</p>\n+            </div>\n+        )\n+    }\n+\n+    return (\n+        <div className=\"console-log-container\">\n+            <div className=\"console-log\">\n+                {areAllSnapshotsLoaded ? (\n+                    orderedConsoleLogs.length > 0 ? (\n+                        <AutoSizer>\n+                            {({ height, width }: { height: number; width: number }) => (\n+                                <div style={{ height: height, width: width, overflowY: 'scroll', paddingBottom: 5 }}>\n+                                    {/* Only display the first 150 logs because the list ins't virtualized */}\n+                                    {orderedConsoleLogs.slice(0, 150).map((log, index) => renderLogLine(log, index))}\n+                                    <div>\n+                                        {orderedConsoleLogs.length > 150 && (\n+                                            <div className=\"more-logs-available\">\n+                                                While console logs are in beta, only 150 logs are displayed.\n+                                            </div>\n+                                        )}\n+                                    </div>\n+                                </div>\n+                            )}\n+                        </AutoSizer>\n+                    ) : (\n+                        <div\n+                            style={{\n+                                display: 'flex',\n+                                flexDirection: 'column',\n+                                height: '100%',\n+                                justifyContent: 'center',\n+                                alignItems: 'center',\n+                                margin: 20,\n+                            }}\n+                        >\n+                            <h3 style={{ textAlign: 'center' }}>There are no console logs for this recording</h3>\n+\n+                            <p className=\"text-muted\" style={{ textAlign: 'center' }}>\n+                                For logs to appear, the feature must first be enabled in <code>posthog-js</code>.\n+                            </p>\n+                            <LemonButton\n+                                type=\"secondary\"\n+                                style={{ margin: '0 8px' }}\n+                                href=\"https://posthog.com/docs/user-guides/recordings?utm_campaign=session-recording&utm_medium=in-product\"\n+                            >\n+                                Learn more\n+                            </LemonButton>\n+                        </div>\n+                    )\n+                ) : (\n+                    <div style={{ display: 'flex', height: '100%', justifyContent: 'center', alignItems: 'center' }}>\n+                        <Spinner size=\"lg\" />\n+                    </div>\n+                )}\n+            </div>\n+            <div className=\"console-feedback-container\">\n+                <p style={{ marginBottom: 8, textAlign: 'center' }}>Are you finding the console log feature useful?</p>\n+                {feedbackSubmitted ? (\n+                    <p className=\"text-muted\" style={{ marginBottom: 8, textAlign: 'center' }}>\n+                        Thanks for the input!\n+                    </p>\n+                ) : (\n+                    <div style={{ display: 'flex', width: '100%', justifyContent: 'center' }}>\n+                        {(\n+                            [\n+                                ['Yes', '👍 Yes!'],\n+                                ['No', '👎 Not really'],\n+                            ] as const\n+                        ).map((content, index) => (\n+                            <LemonButton\n+                                type=\"secondary\"\n+                                key={index}\n+                                style={{ margin: '0 8px' }}\n+                                onClick={() => {\n+                                    setFeedbackSubmitted(true)\n+                                    reportRecordingConsoleFeedback(\n+                                        orderedConsoleLogs.length,\n+                                        content[0],\n+                                        'Are you finding the console log feature useful?'\n+                                    )\n+                                }}\n+                            >\n+                                {content[1]}\n+                            </LemonButton>\n+                        ))}\n+                    </div>\n+                )}\n+            </div>\n+        </div>\n+    )\n+}\ndiff --git a/frontend/src/scenes/session-recordings/player/SessionRecordingPlayerV2.tsx b/frontend/src/scenes/session-recordings/player/SessionRecordingPlayerV2.tsx\nindex 46156c0fa..552765c1d 100644\n--- a/frontend/src/scenes/session-recordings/player/SessionRecordingPlayerV2.tsx\n+++ b/frontend/src/scenes/session-recordings/player/SessionRecordingPlayerV2.tsx\n@@ -5,8 +5,15 @@ import { PLAYBACK_SPEEDS, sessionRecordingPlayerLogic } from './sessionRecording\n import { PlayerFrame } from 'scenes/session-recordings/player/PlayerFrame'\n import { PlayerController } from 'scenes/session-recordings/player/PlayerController'\n import { PlayerEvents } from 'scenes/session-recordings/player/PlayerEvents'\n-import { Col, Row } from 'antd'\n+import { Col, Row, Tabs } from 'antd'\n+import { InfoCircleOutlined } from '@ant-design/icons'\n import { PlayerMeta } from './PlayerMeta'\n+import { Console } from './Console'\n+import { FEATURE_FLAGS } from 'lib/constants'\n+import { featureFlagLogic } from 'lib/logic/featureFlagLogic'\n+import { sessionRecordingLogic } from '../sessionRecordingLogic'\n+import { eventUsageLogic } from 'lib/utils/eventUsageLogic'\n+import { Tooltip } from 'lib/components/Tooltip'\n \n export function SessionRecordingPlayerV2(): JSX.Element {\n     const { togglePlayPause, seekForward, seekBackward, setSpeed, setRootFrame } =\n@@ -58,14 +65,51 @@ export function SessionRecordingPlayerV2(): JSX.Element {\n     )\n }\n \n+const { TabPane } = Tabs\n+\n function PlayerSidebar(): JSX.Element {\n+    const { featureFlags } = useValues(featureFlagLogic)\n+    const { orderedConsoleLogs } = useValues(sessionRecordingLogic)\n+    const { reportRecordingConsoleViewed } = useActions(eventUsageLogic)\n+    const sessionConsoleEnabled = featureFlags[FEATURE_FLAGS.SESSION_CONSOLE]\n     return (\n         <Col className=\"player-sidebar\">\n             <div className=\"player-meta\">\n                 <PlayerMeta />\n             </div>\n             <div className=\"player-events\">\n-                <PlayerEvents />\n+                {!sessionConsoleEnabled ? (\n+                    <PlayerEvents />\n+                ) : (\n+                    <Tabs\n+                        data-attr=\"event-details\"\n+                        defaultActiveKey=\"events\"\n+                        style={{ display: 'flex', flexDirection: 'column', height: '100%' }}\n+                        tabBarStyle={{ margin: 0, marginBottom: 8 }}\n+                        onChange={(key) => {\n+                            if (key === 'console') {\n+                                reportRecordingConsoleViewed(orderedConsoleLogs.length)\n+                            }\n+                        }}\n+                    >\n+                        <TabPane tab=\"Events\" key=\"events\">\n+                            <PlayerEvents />\n+                        </TabPane>\n+                        <TabPane\n+                            tab={\n+                                <div>\n+                                    Console (beta)\n+                                    <Tooltip title=\"While console logs are in beta, only 150 logs are displayed.\">\n+                                        <InfoCircleOutlined style={{ marginLeft: 6 }} />\n+                                    </Tooltip>\n+                                </div>\n+                            }\n+                            key=\"console\"\n+                        >\n+                            <Console />\n+                        </TabPane>\n+                    </Tabs>\n+                )}\n             </div>\n         </Col>\n     )\ndiff --git a/frontend/src/scenes/session-recordings/player/styles.scss b/frontend/src/scenes/session-recordings/player/styles.scss\nindex 2f6f6429e..1810233c7 100644\n--- a/frontend/src/scenes/session-recordings/player/styles.scss\n+++ b/frontend/src/scenes/session-recordings/player/styles.scss\n@@ -221,3 +221,10 @@\n         padding: $default_spacing;\n     }\n }\n+\n+.ant-tabs-content {\n+    height: 100%;\n+}\n+.ant-tabs-tabpane {\n+    height: 100%;\n+}\ndiff --git a/frontend/src/scenes/session-recordings/sessionRecordingLogic.test.ts b/frontend/src/scenes/session-recordings/sessionRecordingLogic.test.ts\nindex 3e98c5c6e..e0c1aef7e 100644\n--- a/frontend/src/scenes/session-recordings/sessionRecordingLogic.test.ts\n+++ b/frontend/src/scenes/session-recordings/sessionRecordingLogic.test.ts\n@@ -445,4 +445,67 @@ describe('sessionRecordingLogic', () => {\n             expect(api.get).toBeCalledTimes(2)\n         })\n     })\n+\n+    describe('console logs', () => {\n+        it('should load and parse console logs from the snapshot', async () => {\n+            await expectLogic(logic, () => {\n+                logic.actions.loadRecordingSnapshots('1')\n+                logic.actions.loadRecordingMeta('1')\n+            })\n+                .toDispatchActionsInAnyOrder([\n+                    'loadRecordingSnapshots',\n+                    'loadRecordingSnapshotsSuccess',\n+                    'loadRecordingMeta',\n+                    'loadRecordingMetaSuccess',\n+                ])\n+                .toMatchValues({\n+                    orderedConsoleLogs: [\n+                        // Empty payload object\n+                        {\n+                            level: undefined,\n+                            parsedPayload: undefined,\n+                            parsedTraceString: undefined,\n+                            parsedTraceURL: undefined,\n+                            playerPosition: {\n+                                time: 167777,\n+                                windowId: '17da0b29e21c36-0df8b0cc82d45-1c306851-1fa400-17da0b29e2213f',\n+                            },\n+                        },\n+                        // Empty trace and payload arrays\n+                        {\n+                            level: 'log',\n+                            parsedPayload: '',\n+                            parsedTraceString: undefined,\n+                            parsedTraceURL: undefined,\n+                            playerPosition: {\n+                                time: 167777,\n+                                windowId: '17da0b29e21c36-0df8b0cc82d45-1c306851-1fa400-17da0b29e2213f',\n+                            },\n+                        },\n+                        // Normal trace and payload\n+                        {\n+                            level: 'warn',\n+                            parsedPayload: 'A big deal And a huge deal',\n+                            parsedTraceString: 'file.js:123:456',\n+                            parsedTraceURL: 'https://example.com/path/to/file.js',\n+                            playerPosition: {\n+                                time: 167777,\n+                                windowId: '17da0b29e21c36-0df8b0cc82d45-1c306851-1fa400-17da0b29e2213f',\n+                            },\n+                        },\n+                        // Bad data trace and payload\n+                        {\n+                            level: 'error',\n+                            parsedPayload: undefined,\n+                            parsedTraceString: ':adcfvertyu$rf3423',\n+                            parsedTraceURL: '',\n+                            playerPosition: {\n+                                time: 167777,\n+                                windowId: '17da0b29e21c36-0df8b0cc82d45-1c306851-1fa400-17da0b29e2213f',\n+                            },\n+                        },\n+                    ],\n+                })\n+        })\n+    })\n })\ndiff --git a/frontend/src/scenes/session-recordings/sessionRecordingLogic.ts b/frontend/src/scenes/session-recordings/sessionRecordingLogic.ts\nindex 2314ca015..38b2a638c 100644\n--- a/frontend/src/scenes/session-recordings/sessionRecordingLogic.ts\n+++ b/frontend/src/scenes/session-recordings/sessionRecordingLogic.ts\n@@ -6,10 +6,12 @@ import { sessionRecordingLogicType } from './sessionRecordingLogicType'\n import {\n     EventType,\n     PlayerPosition,\n+    RecordingConsoleLog,\n     RecordingEventsFilters,\n     RecordingEventType,\n     RecordingSegment,\n     RecordingStartAndEndTime,\n+    RRWebRecordingConsoleLogPayload,\n     SessionPlayerData,\n     SessionRecordingId,\n     SessionRecordingMeta,\n@@ -22,9 +24,12 @@ import { getKeyMapping } from 'lib/components/PropertyKeyInfo'\n import { dayjs } from 'lib/dayjs'\n import { getPlayerPositionFromEpochTime, getPlayerTimeFromPlayerPosition } from './player/playerUtils'\n import { lemonToast } from 'lib/components/lemonToast'\n+import equal from 'fast-deep-equal'\n \n const IS_TEST_MODE = process.env.NODE_ENV === 'test'\n \n+const CONSOLE_LOG_PLUGIN_NAME = 'rrweb/console@1'\n+\n export interface UnparsedRecordingSegment {\n     start_time: string\n     end_time: string\n@@ -385,6 +390,84 @@ export const sessionRecordingLogic = kea<sessionRecordingLogicType>({\n                 }\n             },\n         ],\n+        orderedConsoleLogs: [\n+            (selectors) => [selectors.sessionPlayerData],\n+            (sessionPlayerData) => {\n+                const orderedConsoleLogs: RecordingConsoleLog[] = []\n+                sessionPlayerData?.metadata?.segments?.forEach((segment: RecordingSegment) => {\n+                    sessionPlayerData?.snapshotsByWindowId[segment.windowId]?.forEach((snapshot: eventWithTime) => {\n+                        if (\n+                            snapshot.type === 6 && // RRWeb plugin event type\n+                            snapshot.data.plugin === CONSOLE_LOG_PLUGIN_NAME &&\n+                            snapshot.timestamp >= segment.startTimeEpochMs &&\n+                            snapshot.timestamp <= segment.endTimeEpochMs\n+                        ) {\n+                            const { level, payload, trace } = snapshot.data.payload as RRWebRecordingConsoleLogPayload\n+\n+                            const parsedPayload = payload\n+                                ?.map?.((item: string) =>\n+                                    item.startsWith('\"') && item.endsWith('\"') ? item.slice(1, -1) : item\n+                                )\n+                                .join(' ')\n+\n+                            // Parse the trace string\n+                            let parsedTraceString\n+                            let parsedTraceURL\n+                            // trace[] contains strings that looks like:\n+                            // * \":123:456\"\n+                            // * \"https://example.com/path/to/file.js:123:456\"\n+                            // * \"Login (https://example.com/path/to/file.js:123:456)\"\n+                            // Note: there may be other formats too, but we only handle these ones now\n+                            if (trace && trace.length > 0) {\n+                                const traceWithoutParentheses = trace[0].split('(').slice(-1)[0].replace(')', '')\n+                                const splitTrace = traceWithoutParentheses.split(':')\n+                                const lineNumbers = splitTrace.slice(-2).join(':')\n+                                parsedTraceURL = splitTrace.slice(0, -2).join(':')\n+                                if (splitTrace.length >= 4) {\n+                                    // Case with URL and line number\n+                                    try {\n+                                        const fileNameFromURL = new URL(parsedTraceURL).pathname.split('/').slice(-1)[0]\n+                                        parsedTraceString = `${fileNameFromURL}:${lineNumbers}`\n+                                    } catch (e) {\n+                                        // If we can't parse the URL, fall back to this line number\n+                                        parsedTraceString = `:${lineNumbers}`\n+                                    }\n+                                } else {\n+                                    // Case with line number only\n+                                    parsedTraceString = `:${lineNumbers}`\n+                                }\n+                            }\n+\n+                            orderedConsoleLogs.push({\n+                                playerPosition: getPlayerPositionFromEpochTime(\n+                                    snapshot.timestamp,\n+                                    segment.windowId,\n+                                    sessionPlayerData?.metadata?.startAndEndTimesByWindowId\n+                                ),\n+                                parsedTraceURL,\n+                                parsedTraceString,\n+                                parsedPayload,\n+                                level,\n+                            })\n+                        }\n+                    })\n+                })\n+                return orderedConsoleLogs\n+            },\n+        ],\n+        areAllSnapshotsLoaded: [\n+            (selectors) => [selectors.sessionPlayerData],\n+            (sessionPlayerData) => {\n+                return (\n+                    sessionPlayerData?.bufferedTo &&\n+                    sessionPlayerData?.metadata?.segments.slice(-1)[0] &&\n+                    equal(\n+                        sessionPlayerData?.metadata?.segments.slice(-1)[0].endPlayerPosition,\n+                        sessionPlayerData?.bufferedTo\n+                    )\n+                )\n+            },\n+        ],\n     },\n     urlToAction: ({ actions, values, cache }) => {\n         const urlToAction = (\ndiff --git a/frontend/src/types.ts b/frontend/src/types.ts\nindex 457e6bf78..ccd1c5de4 100644\n--- a/frontend/src/types.ts\n+++ b/frontend/src/types.ts\n@@ -21,6 +21,7 @@ import React from 'react'\n import { PopupProps } from 'lib/components/Popup/Popup'\n import { dayjs } from 'lib/dayjs'\n import { ChartDataset, ChartType, InteractionItem } from 'chart.js'\n+import { LogLevel } from 'rrweb'\n \n export type Optional<T, K extends string | number | symbol> = Omit<T, K> & { [K in keyof T]?: T[K] }\n \n@@ -373,6 +374,20 @@ export interface PlayerPosition {\n     windowId: string\n }\n \n+export interface RRWebRecordingConsoleLogPayload {\n+    level: LogLevel\n+    payload: string[]\n+    trace: string[]\n+}\n+\n+export interface RecordingConsoleLog {\n+    playerPosition: PlayerPosition | null\n+    parsedPayload: string\n+    parsedTraceURL?: string\n+    parsedTraceString?: string\n+    level: LogLevel\n+}\n+\n export interface RecordingSegment {\n     startPlayerPosition: PlayerPosition // Player time (for the specific window_id's player) that the segment starts. If the segment starts 10 seconds into a recording, this would be 10000\n     endPlayerPosition: PlayerPosition // Player time (for the specific window_id' player) that the segment ends\ndiff --git a/package.json b/package.json\nindex 97bf50296..215abb953 100644\n--- a/package.json\n+++ b/package.json\n@@ -18,7 +18,7 @@\n     \"scripts\": {\n         \"copy-scripts\": \"mkdir -p frontend/dist/ && yarn copy-scripts:array && yarn copy-scripts:recorder\",\n         \"copy-scripts:array\": \"cp node_modules/posthog-js/dist/array.js* frontend/dist/\",\n-        \"copy-scripts:recorder\": \"cp node_modules/rrweb/dist/rrweb.min.js frontend/dist/recorder.js && cp node_modules/rrweb/dist/rrweb.min.js.map frontend/dist/recorder.js.map && sed -i -e s/rrweb.min.js.map/recorder.js.map/ frontend/dist/recorder.js\",\n+        \"copy-scripts:recorder\": \"cp node_modules/rrweb/dist/record/rrweb-record.min.js frontend/dist/recorder.js && cp node_modules/rrweb/dist/record/rrweb-record.min.js.map frontend/dist/recorder.js.map && cat node_modules/rrweb/dist/plugins/console-record.min.js >> frontend/dist/recorder.js && sed -i -e s/rrweb-record.min.js.map/recorder.js.map/ frontend/dist/recorder.js && sed -i -e 's/\\\\/\\\\/\\\\# sourceMappingURL=recorder/window.rrweb = {record: rrwebRecord}\\\\n\\\\/\\\\/# sourceMappingURL=recorder/g' frontend/dist/recorder.js\",\n         \"test\": \"jest\",\n         \"start\": \"concurrently -n ESBUILD,TYPEGEN -c yellow,green \\\"yarn start-http\\\" \\\"yarn run typegen:watch\\\"\",\n         \"start-http\": \"yarn start-http:esbuild\",\n@@ -119,7 +119,7 @@\n         \"redux\": \"^4.0.5\",\n         \"reselect\": \"^4.0.0\",\n         \"resize-observer-polyfill\": \"^1.5.1\",\n-        \"rrweb\": \"^1.0.6\",\n+        \"rrweb\": \"^1.1.2\",\n         \"sass\": \"^1.26.2\",\n         \"use-debounce\": \"^6.0.1\",\n         \"use-resize-observer\": \"^8.0.0\",\ndiff --git a/yarn.lock b/yarn.lock\nindex 8cf9e108b..ff1817c6d 100644\n--- a/yarn.lock\n+++ b/yarn.lock\n@@ -3551,6 +3551,11 @@\n   resolved \"https://registry.yarnpkg.com/@types/css-font-loading-module/-/css-font-loading-module-0.0.4.tgz#94a835e27d1af444c65cba88523533c174463d64\"\n   integrity sha512-ENdXf7MW4m9HeDojB2Ukbi7lYMIuQNBHVf98dbzaiG4EEJREBd6oleVAjrLRCrp7dm6CK1mmdmU9tcgF61acbw==\n \n+\"@types/css-font-loading-module@0.0.7\":\n+  version \"0.0.7\"\n+  resolved \"https://registry.yarnpkg.com/@types/css-font-loading-module/-/css-font-loading-module-0.0.7.tgz#2f98ede46acc0975de85c0b7b0ebe06041d24601\"\n+  integrity sha512-nl09VhutdjINdWyXxHWN/w9zlNCfr60JUqJbd24YXUuCwgeL0TpFSdElCwb6cxfB6ybE19Gjj4g0jsgkXxKv1Q==\n+\n \"@types/d3-array@*\":\n   version \"3.0.1\"\n   resolved \"https://registry.yarnpkg.com/@types/d3-array/-/d3-array-3.0.1.tgz#0ff28ee7052a2e504cb951d17df7437c33d442d6\"\n@@ -5293,6 +5298,11 @@ balanced-match@^1.0.0:\n   resolved \"https://registry.yarnpkg.com/balanced-match/-/balanced-match-1.0.0.tgz#89b4d199ab2bee49de164ea02b89ce462d71b767\"\n   integrity sha1-ibTRmasr7kneFk6gK4nORi1xt2c=\n \n+base64-arraybuffer@^1.0.1:\n+  version \"1.0.2\"\n+  resolved \"https://registry.yarnpkg.com/base64-arraybuffer/-/base64-arraybuffer-1.0.2.tgz#1c37589a7c4b0746e34bd1feb951da2df01c1bdc\"\n+  integrity sha512-I3yl4r9QB5ZRY3XuJVEPfc2XhZO6YweFPI+UovAzn+8/hb3oJ6lnysaFcjVpkCPfVWFUDvoZ8kmVDP7WyRtYtQ==\n+\n base64-js@^1.0.2, base64-js@^1.3.1:\n   version \"1.5.1\"\n   resolved \"https://registry.yarnpkg.com/base64-js/-/base64-js-1.5.1.tgz#1b1b440160a5bf7ad40b650f095963481903930a\"\n@@ -14534,16 +14544,16 @@ ripemd160@^2.0.0, ripemd160@^2.0.1:\n     hash-base \"^3.0.0\"\n     inherits \"^2.0.1\"\n \n+rrweb-snapshot@^1.1.13:\n+  version \"1.1.13\"\n+  resolved \"https://registry.yarnpkg.com/rrweb-snapshot/-/rrweb-snapshot-1.1.13.tgz#fc15adb7eb6354c859c8d594f57b09e1f5bccdd8\"\n+  integrity sha512-lv4vBSJ5orBcRoJnjLvtly6cSsctC+TNm5orVzYRL9SH3LmtSpQ+wI4bw7eh4AcyKoUf0x4pe1Bn632GggmKWQ==\n+\n rrweb-snapshot@^1.1.7:\n   version \"1.1.7\"\n   resolved \"https://registry.yarnpkg.com/rrweb-snapshot/-/rrweb-snapshot-1.1.7.tgz#92a3b47b1112a1b566c2fae2edb02fa48a6f6653\"\n   integrity sha512-+f2kCCvIQ1hbEeCWnV7mPVPDEdWEExqwcYqMd/r1nfK52QE7qU52jefUOyTe85Vy67rZGqWnfK/B25e/OTSgYg==\n \n-rrweb-snapshot@^1.1.9:\n-  version \"1.1.9\"\n-  resolved \"https://registry.yarnpkg.com/rrweb-snapshot/-/rrweb-snapshot-1.1.9.tgz#f8d0f560291a37dab00dc5ac6d9368f76208256f\"\n-  integrity sha512-kpoWi2gx1AmX2PZU8XNKMvIvh5WPSz9lKfyHs9GYvczYE2H7VNrmPf7+rDin8Y+HcJ9Tu7x9id4JOCD2PsSPQA==\n-\n rrweb@^1.0.2:\n   version \"1.0.2\"\n   resolved \"https://registry.yarnpkg.com/rrweb/-/rrweb-1.0.2.tgz#da561b829e3729461443966fe5abc745e7d3ebf3\"\n@@ -14555,16 +14565,17 @@ rrweb@^1.0.2:\n     mitt \"^1.1.3\"\n     rrweb-snapshot \"^1.1.7\"\n \n-rrweb@^1.0.6:\n-  version \"1.0.6\"\n-  resolved \"https://registry.yarnpkg.com/rrweb/-/rrweb-1.0.6.tgz#381027a4331c610739145dc4142364be680504ba\"\n-  integrity sha512-uiRpPMNEd1oMqNYRelKBz28WBLXQEirx9u+nlTIaxk65fbTEUyKBr81GhcUSjeZAsTpkUtIAHacS0Gjz35x/Rw==\n+rrweb@^1.1.2:\n+  version \"1.1.2\"\n+  resolved \"https://registry.yarnpkg.com/rrweb/-/rrweb-1.1.2.tgz#65279c8528dcfff7158bb31ed21323d3f26a741f\"\n+  integrity sha512-D1r3MdfYshY7rA8lN3R0cXqeY6fTtgHlkLQM4lxkU+TdKi023/hNQz6tvDJbXGX3HWGa4mRAmQs3S2uGho6Nsw==\n   dependencies:\n-    \"@types/css-font-loading-module\" \"0.0.4\"\n+    \"@types/css-font-loading-module\" \"0.0.7\"\n     \"@xstate/fsm\" \"^1.4.0\"\n+    base64-arraybuffer \"^1.0.1\"\n     fflate \"^0.4.4\"\n     mitt \"^1.1.3\"\n-    rrweb-snapshot \"^1.1.9\"\n+    rrweb-snapshot \"^1.1.13\"\n \n rsvp@^4.8.4:\n   version \"4.8.5\"\n"
  },
  "487d80c45d1df37b1be4ab58f0702c33d3e91c75": {
    "hash": "487d80c45d1df37b1be4ab58f0702c33d3e91c75",
    "message": "fix: hobby async migrations command (#11650)\n    \n    Fix: hobby async migrations command",
    "diff": "commit 487d80c45d1df37b1be4ab58f0702c33d3e91c75\nAuthor: Harry Waye <harry@posthog.com>\nDate:   Mon Sep 5 11:06:36 2022 +0100\n\n    fix: hobby async migrations command (#11650)\n    \n    Fix: hobby async migrations command\n\ndiff --git a/docker-compose.hobby.yml b/docker-compose.hobby.yml\nindex 4d16a0e20..84b36a499 100644\n--- a/docker-compose.hobby.yml\n+++ b/docker-compose.hobby.yml\n@@ -128,7 +128,7 @@ services:\n \n     asyncmigrationscheck:\n         <<: *worker\n-        command: python manage.py run-async_migrations --complete-noop-migrations && python manage.py run_async_migrations --check\n+        command: python manage.py run_async_migrations --complete-noop-migrations && python manage.py run_async_migrations --check\n         restart: 'no'\n         scale: 0\n \n"
  },
  "9bf86629dfae9cf32e9dba89f02f9a098478a65a": {
    "hash": "9bf86629dfae9cf32e9dba89f02f9a098478a65a",
    "message": "feat(async-migrations): add auto complete trivial migrations option (#11601)\n    \n    * feat(async-migrations): add auto complete trivial migrations option\n    \n    This change is to ensure that the `run_async_migrations --check` command\n    option is a light operation such that we can safely use this e.g. in an\n    init container to gate the starting of a K8s Pod.\n    \n    Previous to this change, the command was also handling the\n    auto-completion of migrations that it deamed to not be required, via the\n    `is_required` migration function. Aside from this heaviness issue, it's\n    good to avoid having side effects from a check command.\n    \n    One part of the code that I wasn't sure about is the version checking,\n    so any comments here would be much appreciated.\n    \n    Note that `./bin/migrate` is the command we call from both ECS migration\n    task and the Helm chart migration job.\n    \n    * update comment re versions\n    \n    * wip\n    \n    * wip\n    \n    * wip\n    \n    * update hobby\n    \n    * rename to noop migrations",
    "diff": "commit 9bf86629dfae9cf32e9dba89f02f9a098478a65a\nAuthor: Harry Waye <harry@posthog.com>\nDate:   Thu Sep 1 15:43:09 2022 +0100\n\n    feat(async-migrations): add auto complete trivial migrations option (#11601)\n    \n    * feat(async-migrations): add auto complete trivial migrations option\n    \n    This change is to ensure that the `run_async_migrations --check` command\n    option is a light operation such that we can safely use this e.g. in an\n    init container to gate the starting of a K8s Pod.\n    \n    Previous to this change, the command was also handling the\n    auto-completion of migrations that it deamed to not be required, via the\n    `is_required` migration function. Aside from this heaviness issue, it's\n    good to avoid having side effects from a check command.\n    \n    One part of the code that I wasn't sure about is the version checking,\n    so any comments here would be much appreciated.\n    \n    Note that `./bin/migrate` is the command we call from both ECS migration\n    task and the Helm chart migration job.\n    \n    * update comment re versions\n    \n    * wip\n    \n    * wip\n    \n    * wip\n    \n    * update hobby\n    \n    * rename to noop migrations\n\ndiff --git a/bin/migrate b/bin/migrate\nindex 2921ba184..1c32b3b5b 100755\n--- a/bin/migrate\n+++ b/bin/migrate\n@@ -3,5 +3,15 @@ set -e\n \n python manage.py migrate\n python manage.py migrate_clickhouse\n+\n+# NOTE: we do not apply any non-noop migrations here. Rather these are run\n+# manually within the UI. See https://posthog.com/docs/runbook/async-migrations\n+# for details.\n+python manage.py run_async_migrations --complete-noop-migrations\n+\n+# NOTE: this check should not fail if a migration isn't complete but within the\n+# given async migration posthog version range, thus this should not block e.g.\n+# k8s pod deployments.\n python manage.py run_async_migrations --check\n-python manage.py sync_replicated_schema\n\\ No newline at end of file\n+\n+python manage.py sync_replicated_schema\ndiff --git a/docker-compose.hobby.yml b/docker-compose.hobby.yml\nindex 5e2dcf70a..4d16a0e20 100644\n--- a/docker-compose.hobby.yml\n+++ b/docker-compose.hobby.yml\n@@ -128,7 +128,7 @@ services:\n \n     asyncmigrationscheck:\n         <<: *worker\n-        command: python manage.py run_async_migrations --check\n+        command: python manage.py run-async_migrations --complete-noop-migrations && python manage.py run_async_migrations --check\n         restart: 'no'\n         scale: 0\n \ndiff --git a/posthog/management/commands/run_async_migrations.py b/posthog/management/commands/run_async_migrations.py\nindex 643c0fdcc..275e3d60d 100644\n--- a/posthog/management/commands/run_async_migrations.py\n+++ b/posthog/management/commands/run_async_migrations.py\n@@ -27,15 +27,8 @@ def get_necessary_migrations() -> Sequence[AsyncMigration]:\n \n         sm = setup_model(migration_name, definition)\n \n-        is_migration_required = ALL_ASYNC_MIGRATIONS[migration_name].is_required()\n-\n-        if is_migration_required:\n-            if POSTHOG_VERSION > Version(sm.posthog_max_version):\n-                necessary_migrations.append(sm)\n-        else:\n-            dependency_ok, _ = is_migration_dependency_fulfilled(migration_name)\n-            if dependency_ok:\n-                complete_migration(sm)\n+        if POSTHOG_VERSION > Version(sm.posthog_max_version):\n+            necessary_migrations.append(sm)\n \n     return necessary_migrations\n \n@@ -50,6 +43,11 @@ class Command(BaseCommand):\n         parser.add_argument(\n             \"--plan\", action=\"store_true\", help=\"Show the async migrations that will run\",\n         )\n+        parser.add_argument(\n+            \"--complete-noop-migrations\",\n+            action=\"store_true\",\n+            help=\"For any migrations that would be no-ops to apply, mark them as complete.\",\n+        )\n \n     def handle(self, *args, **options):\n         setup_async_migrations(ignore_posthog_version=True)\n@@ -59,6 +57,8 @@ class Command(BaseCommand):\n             handle_check(necessary_migrations)\n         elif options[\"plan\"]:\n             handle_plan(necessary_migrations)\n+        elif options[\"complete_noop_migrations\"]:\n+            handle_complete_noop_migrations()\n         else:\n             handle_run(necessary_migrations)\n \n@@ -69,29 +69,41 @@ def handle_check(necessary_migrations: Sequence[AsyncMigration]):\n \n     if necessary_migrations:\n         logger.critical(\n-            \"Stopping PostHog!\",\n-            f\"Required async migration{' is' if len(necessary_migrations) == 1 else 's are'} not completed:\",\n-            *(f\"- {migration.get_name_with_requirements()}\" for migration in necessary_migrations),\n-            \"See more in Docs: https://posthog.com/docs/self-host/configure/async-migrations/overview\",\n+            \"\\n\".join(\n+                [\n+                    \"Stopping PostHog!\",\n+                    f\"Required async migration{' is' if len(necessary_migrations) == 1 else 's are'} not completed:\",\n+                    *(f\"- {migration.get_name_with_requirements()}\" for migration in necessary_migrations),\n+                    \"See more in Docs: https://posthog.com/docs/self-host/configure/async-migrations/overview\",\n+                ]\n+            )\n         )\n         exit(1)\n \n     running_migrations = get_async_migrations_by_status([MigrationStatus.Running, MigrationStatus.Starting])\n     if running_migrations.exists():\n         logger.critical(\n-            \"Stopping PostHog!\",\n-            f\"Async migration {running_migrations[0].name} is currently running. If you're trying to update PostHog, wait for it to finish before proceeding\",\n-            \"See more in Docs: https://posthog.com/docs/self-host/configure/async-migrations/overview\",\n+            \"\\n\".join(\n+                [\n+                    \"Stopping PostHog!\",\n+                    f\"Async migration {running_migrations[0].name} is currently running. If you're trying to update PostHog, wait for it to finish before proceeding\",\n+                    \"See more in Docs: https://posthog.com/docs/self-host/configure/async-migrations/overview\",\n+                ]\n+            )\n         )\n         exit(1)\n \n     errored_migrations = get_async_migrations_by_status([MigrationStatus.Errored])\n     if errored_migrations.exists():\n         logger.error(\n-            f\"Stopping PostHog!\",\n-            \"Some async migrations are currently in an 'Errored' state. If you're trying to update PostHog, please make sure they complete successfully first:\",\n-            *(f\"- {migration.name}\" for migration in errored_migrations),\n-            \"See more in Docs: https://posthog.com/docs/self-host/configure/async-migrations/overview\",\n+            \"\\n\".join(\n+                [\n+                    f\"Stopping PostHog!\",\n+                    \"Some async migrations are currently in an 'Errored' state. If you're trying to update PostHog, please make sure they complete successfully first:\",\n+                    *(f\"- {migration.name}\" for migration in errored_migrations),\n+                    \"See more in Docs: https://posthog.com/docs/self-host/configure/async-migrations/overview\",\n+                ]\n+            )\n         )\n         exit(1)\n \n@@ -122,3 +134,22 @@ def handle_plan(necessary_migrations: Sequence[AsyncMigration]):\n                 \"\\n\".join((f\"- {migration.get_name_with_requirements()}\" for migration in necessary_migrations))\n             )\n         )\n+\n+\n+def handle_complete_noop_migrations():\n+    \"\"\"\n+    Some migrations are no-ops to apply, i.e. they would not have any effect on\n+    schema or data within ClickHouse, thus, assuming their dependencies are\n+    already complete, we can complete them also.\n+    \"\"\"\n+    for migration_name, definition in sorted(ALL_ASYNC_MIGRATIONS.items()):\n+        if is_async_migration_complete(migration_name):\n+            continue\n+\n+        sm = setup_model(migration_name, definition)\n+\n+        is_required = ALL_ASYNC_MIGRATIONS[migration_name].is_required()\n+        if not is_required:\n+            dependency_ok, _ = is_migration_dependency_fulfilled(migration_name)\n+            if dependency_ok:\n+                complete_migration(sm)\ndiff --git a/posthog/management/commands/test/test_run_async_migrations.py b/posthog/management/commands/test/test_run_async_migrations.py\nnew file mode 100644\nindex 000000000..408276af9\n--- /dev/null\n+++ b/posthog/management/commands/test/test_run_async_migrations.py\n@@ -0,0 +1,74 @@\n+import logging\n+\n+import pytest\n+from django.core.management import call_command\n+from semantic_version.base import Version\n+\n+from posthog.async_migrations.setup import ALL_ASYNC_MIGRATIONS, POSTHOG_VERSION\n+\n+pytestmark = pytest.mark.django_db\n+\n+\n+def test_run_async_migrations_doesnt_raise():\n+    call_command(\"run_async_migrations\")\n+\n+\n+def test_plan_includes_all_migrations_except_past_max_version(caplog):\n+    \"\"\"\n+    Plan should give us all the migrations that haven't run. But it also should\n+    not return migrations that are still within the posthog_min_version,\n+    posthog_max_version range. This is to ensure that the application is able to\n+    boot within the version range and thus the administrator is able to trigger\n+    migrations via the UI.\n+    \"\"\"\n+    call_command(\"run_async_migrations\", \"--plan\")\n+    output = \"\\n\".join([rec.message for rec in caplog.records])\n+    for migration_name, migration in ALL_ASYNC_MIGRATIONS.items():\n+        if POSTHOG_VERSION > Version(migration.posthog_max_version):\n+            assert migration_name in output\n+        else:\n+            assert migration_name not in output\n+\n+\n+def test_check_with_pending_migrations(caplog):\n+    # By default, no migrations are run, so this should raise\n+    with pytest.raises(SystemExit):\n+        call_command(\"run_async_migrations\", \"--check\")\n+\n+    # Ensure that it did not try to auto-complete migrations, using the first\n+    # migration as a test case\n+    call_command(\"run_async_migrations\", \"--plan\")\n+    output = \"\\n\".join([rec.message for rec in caplog.records])\n+    assert \"0001\" in output\n+\n+\n+def test_check_with_no_pending_migrations():\n+    # Running the migrations first, then checking should result in an exit\n+    # code of zero\n+    call_command(\"run_async_migrations\")\n+    call_command(\"run_async_migrations\", \"--check\")\n+\n+\n+def test_complete_noop_migrations(caplog):\n+    \"\"\"\n+    Based on the status of `is_required` for each migration, it is possible that\n+    some incomplete migrations can be trivially applied by creating and marking\n+    the migration as complete.\n+    \"\"\"\n+    # First validate the 0001 is present\n+    call_command(\"run_async_migrations\", \"--plan\")\n+    output = \"\\n\".join([rec.message for rec in caplog.records])\n+    assert \"0001\" in output\n+\n+    call_command(\"run_async_migrations\", \"--complete-noop-migrations\")\n+\n+    # And after running, it shouldn't be\n+    caplog.clear()\n+    call_command(\"run_async_migrations\", \"--plan\")\n+    output = \"\\n\".join([rec.message for rec in caplog.records])\n+    assert \"0001\" not in output\n+\n+\n+@pytest.fixture(autouse=True)\n+def set_log_level(caplog):\n+    caplog.set_level(logging.INFO)\n"
  },
  "5bc958dc31a32cdcf9c279f61a154477535a2e71": {
    "hash": "5bc958dc31a32cdcf9c279f61a154477535a2e71",
    "message": "fix: decode events scene url (#11585)\n    \n    * fix: decode events scene url\n    \n    * everything is better with tests",
    "diff": "commit 5bc958dc31a32cdcf9c279f61a154477535a2e71\nAuthor: Paul D'Ambra <paul@posthog.com>\nDate:   Thu Sep 1 10:00:17 2022 +0100\n\n    fix: decode events scene url (#11585)\n    \n    * fix: decode events scene url\n    \n    * everything is better with tests\n\ndiff --git a/frontend/src/scenes/events/eventsTableLogic.test.ts b/frontend/src/scenes/events/eventsTableLogic.test.ts\nindex ad62a44c9..414f3bd39 100644\n--- a/frontend/src/scenes/events/eventsTableLogic.test.ts\n+++ b/frontend/src/scenes/events/eventsTableLogic.test.ts\n@@ -69,6 +69,29 @@ describe('eventsTableLogic', () => {\n         initKeaTests()\n     })\n \n+    describe('when loaded on a person page', () => {\n+        const personUrl = urls.person('first-part|second-part')\n+\n+        beforeEach(() => {\n+            logic = eventsTableLogic({\n+                key: 'test-person-key',\n+                sceneUrl: personUrl,\n+            })\n+            logic.mount()\n+        })\n+\n+        it('sets a key', () => {\n+            expect(logic.key).toEqual('all-test-person-key-/person/first-part%7Csecond-part')\n+        })\n+\n+        it('triggers url to action', async () => {\n+            // before https://github.com/PostHog/posthog/pull/11585 any sceneURLs with encoded characters\n+            // e.g. `|` becoming `%7C` could not trigger `urlToAction` for this logic\n+            router.actions.push(personUrl)\n+            await expectLogic(logic).toDispatchActions(['setProperties'])\n+        })\n+    })\n+\n     describe('when loaded on events page', () => {\n         beforeEach(() => {\n             router.actions.push(urls.events())\ndiff --git a/frontend/src/scenes/events/eventsTableLogic.ts b/frontend/src/scenes/events/eventsTableLogic.ts\nindex 2e9be90c8..da5f72fb9 100644\n--- a/frontend/src/scenes/events/eventsTableLogic.ts\n+++ b/frontend/src/scenes/events/eventsTableLogic.ts\n@@ -276,7 +276,7 @@ export const eventsTableLogic = kea<eventsTableLogicType>({\n     }),\n \n     urlToAction: ({ actions, values, props }) => ({\n-        [props.sceneUrl]: (_: Record<string, any>, searchParams: Record<string, any>): void => {\n+        [decodeURI(props.sceneUrl)]: (_: Record<string, any>, searchParams: Record<string, any>): void => {\n             actions.setProperties(searchParams.properties || values.properties || {})\n \n             if (searchParams.eventFilter) {\n"
  },
  "0cdfb2531acb780f37fe0eb9b7bbcefabdb0f720": {
    "hash": "0cdfb2531acb780f37fe0eb9b7bbcefabdb0f720",
    "message": "Only load events table from the URL on allow list of URLs (#6949)\n    \n    * only load events table from the URL on allow list of URLs\n    \n    * add return type to function\n    \n    * pass scene URL into events table\n    \n    * use urlpattern to check if scene is loaded in events table\n    \n    * don't need to check if still on the same page as when loaded because urltoaction is now specific\n    \n    * which means we don't need url pattern matching at all\n    \n    * add scene url to events scene export's logic props\n    \n    * use a different action name for each run or retries can never complete as the action cannot be saved\n    \n    * do not poll results if moved away from sceneUrl\n    \n    * remove tabs from person/action event tables\n    \n    * so cypress can run locally\n    \n    * break the dependency of running one test first so the other can pass\n    \n    * move check into logic and add an e2e test\n    \n    Co-authored-by: Marius Andra <marius.andra@gmail.com>",
    "diff": "commit 0cdfb2531acb780f37fe0eb9b7bbcefabdb0f720\nAuthor: Paul D'Ambra <paul@posthog.com>\nDate:   Tue Nov 9 15:35:41 2021 +0000\n\n    Only load events table from the URL on allow list of URLs (#6949)\n    \n    * only load events table from the URL on allow list of URLs\n    \n    * add return type to function\n    \n    * pass scene URL into events table\n    \n    * use urlpattern to check if scene is loaded in events table\n    \n    * don't need to check if still on the same page as when loaded because urltoaction is now specific\n    \n    * which means we don't need url pattern matching at all\n    \n    * add scene url to events scene export's logic props\n    \n    * use a different action name for each run or retries can never complete as the action cannot be saved\n    \n    * do not poll results if moved away from sceneUrl\n    \n    * remove tabs from person/action event tables\n    \n    * so cypress can run locally\n    \n    * break the dependency of running one test first so the other can pass\n    \n    * move check into logic and add an e2e test\n    \n    Co-authored-by: Marius Andra <marius.andra@gmail.com>\n\ndiff --git a/bin/plugin-server b/bin/plugin-server\nindex 4c055af72..86fd6f7e2 100755\n--- a/bin/plugin-server\n+++ b/bin/plugin-server\n@@ -37,7 +37,7 @@ if [[ -n $DYNO_RAM ]]; then\n   export WORKER_CONCURRENCY=$(( ($DYNO_RAM - 1) / 512 + 1 ))\n fi\n \n-cd plugins\n+cd plugin-server\n \n echo \"🧐 Verifying installed packages...\"\n yarn --frozen-lockfile\ndiff --git a/cypress/integration/actions.js b/cypress/integration/actions.js\nindex b6779d744..2aa672080 100644\n--- a/cypress/integration/actions.js\n+++ b/cypress/integration/actions.js\n@@ -1,28 +1,38 @@\n+const createAction = (actionName) => {\n+    cy.get('[data-attr=create-action]').click()\n+    cy.get('.ant-card-head-title').should('contain', 'event or pageview')\n+    cy.get('[data-attr=new-action-pageview]').click()\n+    cy.get('h1').should('contain', 'Creating action')\n+\n+    cy.get('[data-attr=edit-action-input]').type(actionName)\n+    cy.get('.ant-radio-group > :nth-child(3)').click()\n+    cy.get('[data-attr=edit-action-url-input]').type(Cypress.config().baseUrl)\n+    cy.wait(300)\n+    cy.focused().should('have.attr', 'data-attr', 'edit-action-url-input')\n+\n+    cy.get('[data-attr=save-action-button]').click()\n+\n+    cy.contains('Action saved').should('exist')\n+}\n+\n+function navigateToActionsTab() {\n+    cy.clickNavMenu('events')\n+    cy.get('[data-attr=events-actions-tab]').click()\n+}\n+\n describe('Actions', () => {\n-    let actionName = Cypress._.random(0, 1e6)\n+    let actionName\n     beforeEach(() => {\n-        cy.clickNavMenu('events')\n-        cy.get('[data-attr=events-actions-tab]').click()\n+        navigateToActionsTab()\n+        actionName = Cypress._.random(0, 1e6)\n     })\n \n     it('Create action', () => {\n-        cy.get('[data-attr=create-action]').click()\n-        cy.get('.ant-card-head-title').should('contain', 'event or pageview')\n-        cy.get('[data-attr=new-action-pageview]').click()\n-        cy.get('h1').should('contain', 'Creating action')\n-\n-        cy.get('[data-attr=edit-action-input]').type(actionName)\n-        cy.get('.ant-radio-group > :nth-child(3)').click()\n-        cy.get('[data-attr=edit-action-url-input]').type(Cypress.config().baseUrl)\n-        cy.wait(300)\n-        cy.focused().should('have.attr', 'data-attr', 'edit-action-url-input')\n-\n-        cy.get('[data-attr=save-action-button]').click()\n-\n-        cy.contains('Action saved').should('exist')\n+        createAction(actionName)\n \n         // Test the action is immediately available\n         cy.clickNavMenu('insights')\n+        // cy.reload() //TODO is this only because of turbo mode?\n \n         cy.contains('Add graph series').click()\n         cy.get('[data-attr=trend-element-subject-1]').click()\n@@ -33,14 +43,10 @@ describe('Actions', () => {\n     })\n \n     it('Notifies when an action with this name already exists', () => {\n-        // Let's create a whole new action, similarly to \"Create action\"\n-        cy.get('[data-attr=create-action]').click()\n-        cy.get('[data-attr=new-action-pageview]').click()\n-        // This time we'll use a \"Custom event\" type match group\n-        cy.get('[data-attr=edit-action-input]').type(actionName)\n-        cy.get('.ant-radio-group > :nth-child(2)').click()\n-        // Let's save the action\n-        cy.get('[data-attr=save-action-button]').click()\n+        createAction(actionName)\n+        navigateToActionsTab()\n+        createAction(actionName)\n+\n         // Oh noes, there already is an action with name `actionName`\n         cy.contains('Action with this name already exists').should('exist')\n         // Let's see it\ndiff --git a/cypress/integration/person.js b/cypress/integration/person.js\nindex 2455c1b64..166a6a30c 100644\n--- a/cypress/integration/person.js\n+++ b/cypress/integration/person.js\n@@ -12,6 +12,7 @@ describe('Person Visualization Check', () => {\n         cy.get('[data-row-key=\"email\"] > :nth-child(1)').should('contain', 'email')\n \n         cy.get('.events').should('exist')\n+        cy.get('[data-attr=\"manage-events-table\"] .ant-tabs-top').should('not.exist')\n         cy.get('[data-row-key=\"email\"] .anticon-copy').click()\n         cy.window()\n             .then((win) => {\ndiff --git a/frontend/src/scenes/actions/Action.tsx b/frontend/src/scenes/actions/Action.tsx\nindex 368cf6372..2238d62bd 100644\n--- a/frontend/src/scenes/actions/Action.tsx\n+++ b/frontend/src/scenes/actions/Action.tsx\n@@ -9,7 +9,7 @@ import { EventsTable } from 'scenes/events'\n import dayjs from 'dayjs'\n import { urls } from 'scenes/urls'\n import { preflightLogic } from 'scenes/PreflightCheck/logic'\n-import { ActionType } from '../../types'\n+import { ActionType } from '~/types'\n \n import { actionLogicType } from './ActionType'\n interface ActionLogicProps {\n@@ -78,7 +78,7 @@ export function Action({ id }: { id: ActionType['id'] }): JSX.Element {\n     const fixedFilters = { action_id: id }\n \n     const { push } = useActions(router)\n-    const { fetchEvents } = useActions(eventsTableLogic({ fixedFilters }))\n+    const { fetchEvents } = useActions(eventsTableLogic({ fixedFilters, sceneUrl: urls.action(id) }))\n     const { isComplete, action } = useValues(actionLogic({ id, onComplete: fetchEvents }))\n     const { loadAction } = useActions(actionLogic({ id, onComplete: fetchEvents }))\n     const { preflight } = useValues(preflightLogic)\n@@ -126,7 +126,9 @@ export function Action({ id }: { id: ActionType['id'] }): JSX.Element {\n                             </p>{' '}\n                         </>\n                     ) : null}\n-                    {id && <EventsTable fixedFilters={fixedFilters} filtersEnabled={false} />}\n+                    {id && (\n+                        <EventsTable fixedFilters={fixedFilters} filtersEnabled={false} sceneUrl={urls.action(id)} />\n+                    )}\n                 </div>\n             )}\n         </div>\ndiff --git a/frontend/src/scenes/events/Events.tsx b/frontend/src/scenes/events/Events.tsx\nindex 6a4225725..53c128340 100644\n--- a/frontend/src/scenes/events/Events.tsx\n+++ b/frontend/src/scenes/events/Events.tsx\n@@ -2,11 +2,12 @@ import React from 'react'\n import { SceneExport } from 'scenes/sceneTypes'\n import { eventsTableLogic } from 'scenes/events/eventsTableLogic'\n import { EventsTable } from 'scenes/events/EventsTable'\n+import { urls } from 'scenes/urls'\n \n export const scene: SceneExport = {\n     component: Events,\n     logic: eventsTableLogic,\n-    paramsToProps: ({ params: { fixedFilters, pageKey } }) => ({ fixedFilters, key: pageKey }),\n+    paramsToProps: ({ params: { fixedFilters, pageKey } }) => ({ fixedFilters, key: pageKey, sceneUrl: urls.events() }),\n }\n export function Events(): JSX.Element {\n     return <EventsTable />\ndiff --git a/frontend/src/scenes/events/EventsTable.tsx b/frontend/src/scenes/events/EventsTable.tsx\nindex dc9ac88fd..204143a40 100644\n--- a/frontend/src/scenes/events/EventsTable.tsx\n+++ b/frontend/src/scenes/events/EventsTable.tsx\n@@ -28,6 +28,7 @@ import { LabelledSwitch } from 'scenes/events/LabelledSwitch'\n import clsx from 'clsx'\n import { tableConfigLogic } from 'lib/components/ResizableTable/tableConfigLogic'\n import { EventsTab, EventsTabs } from 'scenes/events/EventsTabs'\n+import { urls } from 'scenes/urls'\n \n dayjs.extend(LocalizedFormat)\n dayjs.extend(relativeTime)\n@@ -43,6 +44,7 @@ interface EventsTable {\n     filtersEnabled?: boolean\n     pageKey?: string\n     hidePersonColumn?: boolean\n+    sceneUrl?: string\n }\n \n export function EventsTable({\n@@ -50,8 +52,9 @@ export function EventsTable({\n     filtersEnabled = true,\n     pageKey,\n     hidePersonColumn,\n+    sceneUrl,\n }: EventsTable = {}): JSX.Element {\n-    const logic = eventsTableLogic({ fixedFilters, key: pageKey })\n+    const logic = eventsTableLogic({ fixedFilters, key: pageKey, sceneUrl: sceneUrl || urls.events() })\n \n     const {\n         properties,\n@@ -64,6 +67,7 @@ export function EventsTable({\n         automaticLoadEnabled,\n         exportUrl,\n         highlightEvents,\n+        sceneIsEventsPage,\n     } = useValues(logic)\n     const { tableWidth, selectedColumns } = useValues(tableConfigLogic)\n \n@@ -290,8 +294,8 @@ export function EventsTable({\n     )\n \n     return (\n-        <div data-attr=\"manage-events-table\" style={{ paddingTop: 32 }}>\n-            <EventsTabs tab={EventsTab.Events} />\n+        <div data-attr=\"manage-events-table\" style={sceneIsEventsPage ? { paddingTop: 32 } : {}}>\n+            {sceneIsEventsPage ? <EventsTabs tab={EventsTab.Events} /> : null}\n             <div className=\"events\" data-attr=\"events-table\">\n                 <PageHeader\n                     title=\"Events\"\ndiff --git a/frontend/src/scenes/events/eventsTableLogic.test.ts b/frontend/src/scenes/events/eventsTableLogic.test.ts\nindex e53dea595..4065952a9 100644\n--- a/frontend/src/scenes/events/eventsTableLogic.test.ts\n+++ b/frontend/src/scenes/events/eventsTableLogic.test.ts\n@@ -7,6 +7,7 @@ import { initKeaTestLogic } from '~/test/init'\n import { router } from 'kea-router'\n import * as utils from 'lib/utils'\n import { EmptyPropertyFilter, EventType, PropertyFilter } from '~/types'\n+import { urls } from 'scenes/urls'\n \n const toastSpy = jest.spyOn(utils, 'errorToast')\n \n@@ -43,439 +44,465 @@ describe('eventsTableLogic', () => {\n         return { results: [], count: 0 }\n     })\n \n-    initKeaTestLogic({\n-        logic: eventsTableLogic,\n-        props: {\n-            key: 'test-key',\n-        },\n-        onLogic: (l) => (logic = l),\n-    })\n+    describe('when loaded on a different page', () => {\n+        initKeaTestLogic({\n+            logic: eventsTableLogic,\n+            props: {\n+                key: 'test-key',\n+                sceneUrl: urls.person('1'),\n+            },\n+            onLogic: (l) => (logic = l),\n+            beforeLogic: () => {\n+                router.actions.push(urls.person('1'))\n+            },\n+        })\n \n-    it('sets a key', () => {\n-        expect(logic.key).toEqual('all-test-key')\n+        it('does not show as scene is events', async () => {\n+            await expectLogic(logic).toMatchValues({\n+                sceneIsEventsPage: false,\n+            })\n+        })\n     })\n \n-    it('starts with known defaults', async () => {\n-        await expectLogic(logic).toMatchValues({\n-            initialPathname: '/',\n-            properties: expect.arrayContaining([]),\n-            eventFilter: '',\n-            isLoading: true,\n-            isLoadingNext: false,\n-            events: [],\n-            hasNext: false,\n-            orderBy: '-timestamp',\n-            selectedEvent: null,\n-            newEvents: [],\n-            highlightEvents: {},\n-            automaticLoadEnabled: false,\n+    describe('when loaded on events page', () => {\n+        initKeaTestLogic({\n+            logic: eventsTableLogic,\n+            props: {\n+                key: 'test-key',\n+                sceneUrl: urls.events(),\n+            },\n+            onLogic: (l) => (logic = l),\n+            beforeLogic: () => {\n+                router.actions.push(urls.events())\n+            },\n         })\n-    })\n \n-    describe('reducers', () => {\n-        it('can toggle autoloading on', async () => {\n-            await expectLogic(logic, () => {\n-                logic.actions.toggleAutomaticLoad(true)\n-            }).toMatchValues({\n-                automaticLoadEnabled: true,\n-            })\n+        it('sets a key', () => {\n+            expect(logic.key).toEqual('all-test-key-/events')\n         })\n \n-        it('can toggle autoloading on and off', async () => {\n-            await expectLogic(logic, () => {\n-                logic.actions.toggleAutomaticLoad(true)\n-                logic.actions.toggleAutomaticLoad(false)\n-            }).toMatchValues({\n+        it('starts with known defaults', async () => {\n+            await expectLogic(logic).toMatchValues({\n+                properties: expect.arrayContaining([]),\n+                eventFilter: '',\n+                isLoading: true,\n+                isLoadingNext: false,\n+                events: [],\n+                hasNext: false,\n+                orderBy: '-timestamp',\n+                selectedEvent: null,\n+                newEvents: [],\n+                highlightEvents: {},\n                 automaticLoadEnabled: false,\n+                sceneIsEventsPage: true,\n             })\n         })\n \n-        it('does not call prependNewEvents when there are zero new events', async () => {\n-            await expectLogic(logic, () => {\n-                logic.actions.toggleAutomaticLoad(true)\n-            }).toMatchValues({\n-                automaticLoadEnabled: true,\n+        describe('reducers', () => {\n+            it('can toggle autoloading on', async () => {\n+                await expectLogic(logic, () => {\n+                    logic.actions.toggleAutomaticLoad(true)\n+                }).toMatchValues({\n+                    automaticLoadEnabled: true,\n+                })\n             })\n-        })\n \n-        it('does call prependNewEvents when there are new events', async () => {\n-            await expectLogic(logic, () => {\n-                logic.actions.pollEventsSuccess([makeEvent(), makeEvent(), makeEvent()])\n-                logic.actions.toggleAutomaticLoad(true)\n+            it('can toggle autoloading on and off', async () => {\n+                await expectLogic(logic, () => {\n+                    logic.actions.toggleAutomaticLoad(true)\n+                    logic.actions.toggleAutomaticLoad(false)\n+                }).toMatchValues({\n+                    automaticLoadEnabled: false,\n+                })\n             })\n-                .toMatchValues({\n+\n+            it('does not call prependNewEvents when there are zero new events', async () => {\n+                await expectLogic(logic, () => {\n+                    logic.actions.toggleAutomaticLoad(true)\n+                }).toMatchValues({\n                     automaticLoadEnabled: true,\n                 })\n-                .toDispatchActions(['prependNewEvents'])\n-        })\n-\n-        it('does not call prependNewEvents when there are new events but loading is off', async () => {\n-            await expectLogic(logic, () => {\n-                logic.actions.pollEventsSuccess([makeEvent(), makeEvent(), makeEvent()])\n-                logic.actions.toggleAutomaticLoad(false)\n-            }).toMatchValues({\n-                automaticLoadEnabled: false,\n             })\n-        })\n \n-        it('can set a poll timeout ID', async () => {\n-            const timeoutHandle = setTimeout(() => {})\n-            await expectLogic(logic, () => {\n-                logic.actions.setPollTimeout(timeoutHandle)\n-            }).toMatchValues({\n-                pollTimeout: timeoutHandle,\n+            it('does call prependNewEvents when there are new events', async () => {\n+                await expectLogic(logic, () => {\n+                    logic.actions.pollEventsSuccess([makeEvent(), makeEvent(), makeEvent()])\n+                    logic.actions.toggleAutomaticLoad(true)\n+                })\n+                    .toMatchValues({\n+                        automaticLoadEnabled: true,\n+                    })\n+                    .toDispatchActions(['prependNewEvents'])\n             })\n-        })\n \n-        it('can highlight new events', async () => {\n-            await expectLogic(logic, () => {\n-                logic.actions.prependNewEvents([makeEvent('potato')])\n-            }).toMatchValues({\n-                highlightEvents: { potato: true },\n+            it('does not call prependNewEvents when there are new events but loading is off', async () => {\n+                await expectLogic(logic, () => {\n+                    logic.actions.pollEventsSuccess([makeEvent(), makeEvent(), makeEvent()])\n+                    logic.actions.toggleAutomaticLoad(false)\n+                }).toMatchValues({\n+                    automaticLoadEnabled: false,\n+                })\n             })\n-        })\n \n-        it('sets new events when polling succeeds', async () => {\n-            const apiResponse = [makeEvent('potato')]\n-            await expectLogic(logic, () => {\n-                logic.actions.pollEventsSuccess(apiResponse)\n-            }).toMatchValues({\n-                newEvents: apiResponse,\n+            it('can set a poll timeout ID', async () => {\n+                const timeoutHandle = setTimeout(() => {})\n+                await expectLogic(logic, () => {\n+                    logic.actions.setPollTimeout(timeoutHandle)\n+                }).toMatchValues({\n+                    pollTimeout: timeoutHandle,\n+                })\n             })\n-        })\n \n-        it('clears new events when setting properties', async () => {\n-            const apiResponse = [makeEvent('potato')]\n-            await expectLogic(logic, () => {\n-                logic.actions.pollEventsSuccess(apiResponse)\n-                logic.actions.setProperties([])\n-            }).toMatchValues({\n-                newEvents: [],\n+            it('can highlight new events', async () => {\n+                await expectLogic(logic, () => {\n+                    logic.actions.prependNewEvents([makeEvent('potato')])\n+                }).toMatchValues({\n+                    highlightEvents: { potato: true },\n+                })\n             })\n-        })\n \n-        it('clears new events when prepending new events', async () => {\n-            const apiResponse = [makeEvent('potato')]\n-            await expectLogic(logic, () => {\n-                logic.actions.pollEventsSuccess(apiResponse)\n-                logic.actions.prependNewEvents([])\n-            }).toMatchValues({\n-                newEvents: [],\n+            it('sets new events when polling succeeds', async () => {\n+                const apiResponse = [makeEvent('potato')]\n+                await expectLogic(logic, () => {\n+                    logic.actions.pollEventsSuccess(apiResponse)\n+                }).toMatchValues({\n+                    newEvents: apiResponse,\n+                })\n             })\n-        })\n \n-        // TODO but nothing uses this action\n-        it('can select an event', async () => {\n-            await expectLogic(logic, () => {\n-                logic.actions.setSelectedEvent(makeEvent('4'))\n-            }).toMatchValues({\n-                selectedEvent: expect.objectContaining({ id: '4' }),\n+            it('clears new events when setting properties', async () => {\n+                const apiResponse = [makeEvent('potato')]\n+                await expectLogic(logic, () => {\n+                    logic.actions.pollEventsSuccess(apiResponse)\n+                    logic.actions.setProperties([])\n+                }).toMatchValues({\n+                    newEvents: [],\n+                })\n             })\n-        })\n \n-        it('can flip the sorting order', async () => {\n-            await expectLogic(logic, () => {\n-                logic.actions.flipSort()\n-            }).toMatchValues({\n-                orderBy: 'timestamp',\n+            it('clears new events when prepending new events', async () => {\n+                const apiResponse = [makeEvent('potato')]\n+                await expectLogic(logic, () => {\n+                    logic.actions.pollEventsSuccess(apiResponse)\n+                    logic.actions.prependNewEvents([])\n+                }).toMatchValues({\n+                    newEvents: [],\n+                })\n             })\n-        })\n \n-        it('can flip the sorting order back', async () => {\n-            await expectLogic(logic, () => {\n-                logic.actions.flipSort()\n-                logic.actions.flipSort()\n-            }).toMatchValues({\n-                orderBy: '-timestamp',\n+            // TODO but nothing uses this action\n+            it('can select an event', async () => {\n+                await expectLogic(logic, () => {\n+                    logic.actions.setSelectedEvent(makeEvent('4'))\n+                }).toMatchValues({\n+                    selectedEvent: expect.objectContaining({ id: '4' }),\n+                })\n             })\n-        })\n \n-        it('fetch events success can set hasNext (which is the URL of the next page of results, that we do not use)', async () => {\n-            await expectLogic(logic, () => {\n-                logic.actions.fetchEventsSuccess({ events: [], hasNext: true, isNext: false })\n-            }).toMatchValues({\n-                hasNext: true,\n+            it('can check if scene is loaded when it is', async () => {\n+                await expectLogic(logic, () => {\n+                    router.actions.push(urls.events())\n+                }).toMatchValues({ sceneIsEventsPage: true })\n             })\n-        })\n \n-        it('fetch events clears the has next flag', async () => {\n-            await expectLogic(logic, () => {\n-                logic.actions.fetchEventsSuccess({ events: [], hasNext: true, isNext: false })\n-                logic.actions.fetchEvents()\n-            }).toMatchValues({\n-                hasNext: false,\n+            it('can flip the sorting order', async () => {\n+                await expectLogic(logic, () => {\n+                    logic.actions.flipSort()\n+                }).toMatchValues({\n+                    orderBy: 'timestamp',\n+                })\n             })\n-        })\n \n-        it('fetch next events clears the has next flag', async () => {\n-            await expectLogic(logic, () => {\n-                logic.actions.fetchEventsSuccess({ events: [], hasNext: true, isNext: false })\n-                logic.actions.fetchNextEvents()\n-            }).toMatchValues({\n-                hasNext: false,\n+            it('can flip the sorting order back', async () => {\n+                await expectLogic(logic, () => {\n+                    logic.actions.flipSort()\n+                    logic.actions.flipSort()\n+                }).toMatchValues({\n+                    orderBy: '-timestamp',\n+                })\n             })\n-        })\n \n-        it('sets events when preprendNewEvents is called', async () => {\n-            const events = [makeEvent('potato'), makeEvent('tomato')]\n-            await expectLogic(logic, () => {\n-                logic.actions.prependNewEvents(events)\n-            }).toMatchValues({\n-                events,\n+            it('fetch events success can set hasNext (which is the URL of the next page of results, that we do not use)', async () => {\n+                await expectLogic(logic, () => {\n+                    logic.actions.fetchEventsSuccess({ events: [], hasNext: true, isNext: false })\n+                }).toMatchValues({\n+                    hasNext: true,\n+                })\n             })\n-        })\n \n-        it('replaces events when not loading a new \"page\"', async () => {\n-            const originalEvents = [makeEvent('potato'), makeEvent('tomato')]\n-            const subsequentEvents = [makeEvent('apple'), makeEvent('melon')]\n-            await expectLogic(logic, () => {\n-                logic.actions.fetchEventsSuccess({ events: originalEvents, hasNext: false, isNext: false })\n-                logic.actions.fetchEventsSuccess({ events: subsequentEvents, hasNext: false, isNext: false })\n-            }).toMatchValues({\n-                events: subsequentEvents,\n+            it('fetch events clears the has next flag', async () => {\n+                await expectLogic(logic, () => {\n+                    logic.actions.fetchEventsSuccess({ events: [], hasNext: true, isNext: false })\n+                    logic.actions.fetchEvents()\n+                }).toMatchValues({\n+                    hasNext: false,\n+                })\n             })\n-        })\n \n-        it('adds events when loading a new \"page\"', async () => {\n-            const originalEvents = [makeEvent('potato'), makeEvent('tomato')]\n-            const subsequentEvents = [makeEvent('apple'), makeEvent('melon')]\n-            await expectLogic(logic, () => {\n-                logic.actions.fetchEventsSuccess({ events: originalEvents, hasNext: false, isNext: false })\n-                logic.actions.fetchEventsSuccess({ events: subsequentEvents, hasNext: false, isNext: true })\n-            }).toMatchValues({\n-                events: [...originalEvents, ...subsequentEvents],\n+            it('fetch next events clears the has next flag', async () => {\n+                await expectLogic(logic, () => {\n+                    logic.actions.fetchEventsSuccess({ events: [], hasNext: true, isNext: false })\n+                    logic.actions.fetchNextEvents()\n+                }).toMatchValues({\n+                    hasNext: false,\n+                })\n             })\n-        })\n \n-        it('can unset the isLoadingNext flag when succeeding', async () => {\n-            await expectLogic(logic, () => {\n-                logic.actions.fetchNextEvents()\n-                logic.actions.fetchEventsSuccess({ events: [], hasNext: false, isNext: false })\n-            }).toMatchValues({\n-                isLoadingNext: false,\n+            it('sets events when preprendNewEvents is called', async () => {\n+                const events = [makeEvent('potato'), makeEvent('tomato')]\n+                await expectLogic(logic, () => {\n+                    logic.actions.prependNewEvents(events)\n+                }).toMatchValues({\n+                    events,\n+                })\n             })\n-        })\n \n-        it('can set the isLoadingNext flag', async () => {\n-            await expectLogic(logic, () => {\n-                logic.actions.fetchNextEvents()\n-            }).toMatchValues({\n-                isLoadingNext: true,\n+            it('replaces events when not loading a new \"page\"', async () => {\n+                const originalEvents = [makeEvent('potato'), makeEvent('tomato')]\n+                const subsequentEvents = [makeEvent('apple'), makeEvent('melon')]\n+                await expectLogic(logic, () => {\n+                    logic.actions.fetchEventsSuccess({ events: originalEvents, hasNext: false, isNext: false })\n+                    logic.actions.fetchEventsSuccess({ events: subsequentEvents, hasNext: false, isNext: false })\n+                }).toMatchValues({\n+                    events: subsequentEvents,\n+                })\n             })\n-        })\n \n-        describe('the isloading flag', () => {\n-            it('isloading starts true', async () => {\n+            it('adds events when loading a new \"page\"', async () => {\n+                const originalEvents = [makeEvent('potato'), makeEvent('tomato')]\n+                const subsequentEvents = [makeEvent('apple'), makeEvent('melon')]\n                 await expectLogic(logic, () => {\n-                    logic.actions.fetchEventsSuccess({ events: [], hasNext: randomBool(), isNext: randomBool() })\n-                }).toMatchValues({ isLoading: false })\n+                    logic.actions.fetchEventsSuccess({ events: originalEvents, hasNext: false, isNext: false })\n+                    logic.actions.fetchEventsSuccess({ events: subsequentEvents, hasNext: false, isNext: true })\n+                }).toMatchValues({\n+                    events: [...originalEvents, ...subsequentEvents],\n+                })\n             })\n \n-            it('fetch events success set isloading to false', async () => {\n+            it('can unset the isLoadingNext flag when succeeding', async () => {\n                 await expectLogic(logic, () => {\n-                    logic.actions.fetchEventsSuccess({ events: [], hasNext: randomBool(), isNext: randomBool() })\n-                }).toMatchValues({ isLoading: false })\n+                    logic.actions.fetchNextEvents()\n+                    logic.actions.fetchEventsSuccess({ events: [], hasNext: false, isNext: false })\n+                }).toMatchValues({\n+                    isLoadingNext: false,\n+                })\n             })\n \n-            it('fetch events failure set isloading to false', async () => {\n+            it('can set the isLoadingNext flag', async () => {\n                 await expectLogic(logic, () => {\n-                    logic.actions.fetchOrPollFailure({})\n-                }).toMatchValues({ isLoading: false })\n+                    logic.actions.fetchNextEvents()\n+                }).toMatchValues({\n+                    isLoadingNext: true,\n+                })\n             })\n \n-            it('set delayed loading sets isloading to true', async () => {\n-                await expectLogic(logic, () => {\n-                    logic.actions.fetchOrPollFailure({})\n-                    logic.actions.setDelayedLoading()\n-                }).toMatchValues({ isLoading: true })\n+            describe('the isloading flag', () => {\n+                it('isloading starts true', async () => {\n+                    await expectLogic(logic, () => {\n+                        logic.actions.fetchEventsSuccess({ events: [], hasNext: randomBool(), isNext: randomBool() })\n+                    }).toMatchValues({ isLoading: false })\n+                })\n+\n+                it('fetch events success set isloading to false', async () => {\n+                    await expectLogic(logic, () => {\n+                        logic.actions.fetchEventsSuccess({ events: [], hasNext: randomBool(), isNext: randomBool() })\n+                    }).toMatchValues({ isLoading: false })\n+                })\n+\n+                it('fetch events failure set isloading to false', async () => {\n+                    await expectLogic(logic, () => {\n+                        logic.actions.fetchOrPollFailure({})\n+                    }).toMatchValues({ isLoading: false })\n+                })\n+\n+                it('set delayed loading sets isloading to true', async () => {\n+                    await expectLogic(logic, () => {\n+                        logic.actions.fetchOrPollFailure({})\n+                        logic.actions.setDelayedLoading()\n+                    }).toMatchValues({ isLoading: true })\n+                })\n+\n+                it('Fetch Events sets isLoading to true', async () => {\n+                    await expectLogic(logic, () => {\n+                        logic.actions.fetchEventsSuccess({ events: [], hasNext: randomBool(), isNext: randomBool() })\n+                        logic.actions.fetchEvents({ events: [], hasNext: randomBool(), isNext: randomBool() })\n+                    }).toMatchValues({ isLoading: true })\n+                })\n             })\n \n-            it('Fetch Events sets isLoading to true', async () => {\n-                await expectLogic(logic, () => {\n-                    logic.actions.fetchEventsSuccess({ events: [], hasNext: randomBool(), isNext: randomBool() })\n-                    logic.actions.fetchEvents({ events: [], hasNext: randomBool(), isNext: randomBool() })\n-                }).toMatchValues({ isLoading: true })\n+            describe('the event filter', () => {\n+                it('can set the event filter', async () => {\n+                    await expectLogic(logic, () => {\n+                        logic.actions.setEventFilter('event name')\n+                    }).toMatchValues({ eventFilter: 'event name' })\n+                })\n             })\n-        })\n \n-        describe('the event filter', () => {\n-            it('can set the event filter', async () => {\n-                await expectLogic(logic, () => {\n-                    logic.actions.setEventFilter('event name')\n-                }).toMatchValues({ eventFilter: 'event name' })\n+            describe('the properties', () => {\n+                it('can set the properties when empty', async () => {\n+                    await expectLogic(logic, () => {\n+                        logic.actions.setProperties([])\n+                    }).toMatchValues({ properties: [] })\n+\n+                    await expectLogic(logic, () => {\n+                        logic.actions.setProperties([{} as any])\n+                    }).toMatchValues({ properties: [] })\n+                })\n+\n+                it('can set an object inside the array', async () => {\n+                    const propertyFilter = makePropertyFilter()\n+                    await expectLogic(logic, () => {\n+                        logic.actions.setProperties([propertyFilter])\n+                    }).toMatchValues({ properties: [propertyFilter] })\n+                })\n+\n+                it('can filter partial properties inside the array', async () => {\n+                    const propertyFilter = makePropertyFilter()\n+                    const partialPropertyFilter = { type: 't' } as EmptyPropertyFilter\n+                    await expectLogic(logic, () => {\n+                        logic.actions.setProperties([propertyFilter, partialPropertyFilter])\n+                    }).toMatchValues({ properties: [propertyFilter] })\n+                })\n             })\n         })\n \n-        describe('the properties', () => {\n-            it('can set the properties when empty', async () => {\n-                await expectLogic(logic, () => {\n-                    logic.actions.setProperties([])\n-                }).toMatchValues({ properties: [] })\n-\n+        describe('the selectors', () => {\n+            it('can format events when there are events', async () => {\n+                const event = makeEvent()\n                 await expectLogic(logic, () => {\n-                    logic.actions.setProperties([{} as any])\n-                }).toMatchValues({ properties: [] })\n+                    logic.actions.fetchEventsSuccess({ events: [event], hasNext: false, isNext: false })\n+                }).toMatchValues({ eventsFormatted: [{ event }] })\n             })\n \n-            it('can set an object inside the array', async () => {\n-                const propertyFilter = makePropertyFilter()\n+            it('can format events where there are new events', async () => {\n+                const event = makeEvent()\n                 await expectLogic(logic, () => {\n-                    logic.actions.setProperties([propertyFilter])\n-                }).toMatchValues({ properties: [propertyFilter] })\n+                    logic.actions.fetchEventsSuccess({ events: [event], hasNext: false, isNext: false })\n+                    logic.actions.pollEventsSuccess([makeEvent('2')])\n+                }).toMatchValues({ eventsFormatted: [{ new_events: true }, { event }] })\n             })\n \n-            it('can filter partial properties inside the array', async () => {\n-                const propertyFilter = makePropertyFilter()\n-                const partialPropertyFilter = { type: 't' } as EmptyPropertyFilter\n+            it('can format events to include day markers', async () => {\n+                const yesterday = makeEvent('yesterday', '2021-09-22T10:35:39.875Z')\n+                const today = makeEvent('today', '2021-09-23T10:35:39.875Z')\n                 await expectLogic(logic, () => {\n-                    logic.actions.setProperties([propertyFilter, partialPropertyFilter])\n-                }).toMatchValues({ properties: [propertyFilter] })\n+                    logic.actions.fetchEventsSuccess({ events: [today, yesterday], hasNext: false, isNext: false })\n+                }).toMatchValues({\n+                    eventsFormatted: [{ event: today }, { date_break: 'September 22, 2021' }, { event: yesterday }],\n+                })\n             })\n-        })\n-    })\n-\n-    describe('the selectors', () => {\n-        it('can format events when there are events', async () => {\n-            const event = makeEvent()\n-            await expectLogic(logic, () => {\n-                logic.actions.fetchEventsSuccess({ events: [event], hasNext: false, isNext: false })\n-            }).toMatchValues({ eventsFormatted: [{ event }] })\n-        })\n \n-        it('can format events where there are new events', async () => {\n-            const event = makeEvent()\n-            await expectLogic(logic, () => {\n-                logic.actions.fetchEventsSuccess({ events: [event], hasNext: false, isNext: false })\n-                logic.actions.pollEventsSuccess([makeEvent('2')])\n-            }).toMatchValues({ eventsFormatted: [{ new_events: true }, { event }] })\n-        })\n+            it('can build the export URL when there are no properties or filters', async () => {\n+                await expectLogic(logic, () => {}).toMatchValues({\n+                    exportUrl: `/api/projects/${MOCK_TEAM_ID}/events.csv?properties=%5B%5D&orderBy=%5B%22-timestamp%22%5D`,\n+                })\n+            })\n \n-        it('can format events to include day markers', async () => {\n-            const yesterday = makeEvent('yesterday', '2021-09-22T10:35:39.875Z')\n-            const today = makeEvent('today', '2021-09-23T10:35:39.875Z')\n-            await expectLogic(logic, () => {\n-                logic.actions.fetchEventsSuccess({ events: [today, yesterday], hasNext: false, isNext: false })\n-            }).toMatchValues({\n-                eventsFormatted: [{ event: today }, { date_break: 'September 22, 2021' }, { event: yesterday }],\n+            it('can build the export URL when there are properties or filters', async () => {\n+                await expectLogic(logic, () => {\n+                    logic.actions.setProperties([makePropertyFilter('fixed value')])\n+                }).toMatchValues({\n+                    exportUrl: `/api/projects/${MOCK_TEAM_ID}/events.csv?properties=%5B%7B%22key%22%3A%22fixed%20value%22%2C%22operator%22%3Anull%2C%22type%22%3A%22t%22%2C%22value%22%3A%22v%22%7D%5D&orderBy=%5B%22-timestamp%22%5D`,\n+                })\n             })\n-        })\n \n-        it('can build the export URL when there are no properties or filters', async () => {\n-            await expectLogic(logic, () => {}).toMatchValues({\n-                exportUrl: `/api/projects/${MOCK_TEAM_ID}/events.csv?properties=%5B%5D&orderBy=%5B%22-timestamp%22%5D`,\n+            it('can build the export URL when orderby changes', async () => {\n+                await expectLogic(logic, () => {\n+                    logic.actions.flipSort()\n+                }).toMatchValues({\n+                    exportUrl: `/api/projects/${MOCK_TEAM_ID}/events.csv?properties=%5B%5D&orderBy=%5B%22timestamp%22%5D`,\n+                })\n             })\n         })\n \n-        it('can build the export URL when there are properties or filters', async () => {\n+        it('writes autoload toggle to the URL', async () => {\n             await expectLogic(logic, () => {\n-                logic.actions.setProperties([makePropertyFilter('fixed value')])\n-            }).toMatchValues({\n-                exportUrl: `/api/projects/${MOCK_TEAM_ID}/events.csv?properties=%5B%7B%22key%22%3A%22fixed%20value%22%2C%22operator%22%3Anull%2C%22type%22%3A%22t%22%2C%22value%22%3A%22v%22%7D%5D&orderBy=%5B%22-timestamp%22%5D`,\n+                logic.actions.toggleAutomaticLoad(true)\n             })\n+            expect(router.values.searchParams).toHaveProperty('autoload', true)\n         })\n \n-        it('can build the export URL when orderby changes', async () => {\n+        it('writes properties to the URL', async () => {\n+            const value = randomString()\n+            const propertyFilter = makePropertyFilter(value)\n             await expectLogic(logic, () => {\n-                logic.actions.flipSort()\n-            }).toMatchValues({\n-                exportUrl: `/api/projects/${MOCK_TEAM_ID}/events.csv?properties=%5B%5D&orderBy=%5B%22timestamp%22%5D`,\n+                logic.actions.setProperties([propertyFilter])\n             })\n+            expect(router.values.searchParams).toHaveProperty('properties', [propertyFilter])\n         })\n-    })\n-\n-    it('writes autoload toggle to the URL', async () => {\n-        await expectLogic(logic, () => {\n-            logic.actions.toggleAutomaticLoad(true)\n-        })\n-        expect(router.values.searchParams).toHaveProperty('autoload', true)\n-    })\n \n-    it('writes properties to the URL', async () => {\n-        const value = randomString()\n-        const propertyFilter = makePropertyFilter(value)\n-        await expectLogic(logic, () => {\n-            logic.actions.setProperties([propertyFilter])\n+        it('reads autoload from the URL', async () => {\n+            router.actions.push(urls.events(), { autoload: true })\n+            await expectLogic(logic, () => {}).toMatchValues({ automaticLoadEnabled: true })\n         })\n-        expect(router.values.searchParams).toHaveProperty('properties', [propertyFilter])\n-    })\n-\n-    it('reads autoload from the URL', async () => {\n-        router.actions.push(router.values.location.pathname, { autoload: true })\n-        await expectLogic(logic, () => {}).toMatchValues({ automaticLoadEnabled: true })\n-    })\n-\n-    it('reads properties from the URL', async () => {\n-        const propertyFilter = makePropertyFilter()\n-        router.actions.push(router.values.location.pathname, { properties: [propertyFilter] })\n-        await expectLogic(logic, () => {}).toMatchValues({ properties: [propertyFilter] })\n-    })\n \n-    it('writes event filter to the URL', async () => {\n-        const eventFilter = randomString()\n-        await expectLogic(logic, () => {\n-            logic.actions.setEventFilter(eventFilter)\n+        it('reads properties from the URL', async () => {\n+            const propertyFilter = makePropertyFilter()\n+            router.actions.push(urls.events(), { properties: [propertyFilter] })\n+            await expectLogic(logic, () => {}).toMatchValues({ properties: [propertyFilter] })\n         })\n-        expect(router.values.searchParams).toHaveProperty('eventFilter', eventFilter)\n-    })\n-\n-    it('reads event filter from the URL', async () => {\n-        const eventFilter = randomString()\n-        router.actions.push(router.values.location.pathname, { eventFilter })\n-        await expectLogic(logic, () => {}).toMatchValues({ eventFilter })\n-    })\n \n-    describe('the listeners', () => {\n-        it('triggers fetch events on set properties', async () => {\n+        it('writes event filter to the URL', async () => {\n+            const eventFilter = randomString()\n             await expectLogic(logic, () => {\n-                logic.actions.setProperties([])\n-            }).toDispatchActions(['fetchEvents'])\n+                logic.actions.setEventFilter(eventFilter)\n+            })\n+            expect(router.values.searchParams).toHaveProperty('eventFilter', eventFilter)\n         })\n \n-        it('triggers fetch events on flipsort', async () => {\n-            await expectLogic(logic, () => {\n-                logic.actions.flipSort()\n-            }).toDispatchActions(['fetchEvents'])\n-        })\n+        describe('the listeners', () => {\n+            it('triggers fetch events on set properties', async () => {\n+                await expectLogic(logic, () => {\n+                    logic.actions.setProperties([])\n+                }).toDispatchActions(['fetchEvents'])\n+            })\n \n-        it('triggers fetch events on set event filter', async () => {\n-            await expectLogic(logic, () => {\n-                logic.actions.setEventFilter(randomString())\n-            }).toDispatchActions(['fetchEvents'])\n-        })\n+            it('triggers fetch events on flipsort', async () => {\n+                await expectLogic(logic, () => {\n+                    logic.actions.flipSort()\n+                }).toDispatchActions(['fetchEvents'])\n+            })\n \n-        it('triggers fetch events with no arguments on fetchNextEvents when there are no existing events', async () => {\n-            await expectLogic(logic, () => {\n-                logic.actions.fetchNextEvents()\n-            }).toDispatchActions([logic.actionCreators.fetchEvents()])\n-        })\n+            it('triggers fetch events on set event filter', async () => {\n+                await expectLogic(logic, () => {\n+                    logic.actions.setEventFilter(randomString())\n+                }).toDispatchActions(['fetchEvents'])\n+            })\n \n-        it('triggers fetch events with before timestamp on fetchNextEvents when there are existing events', async () => {\n-            const event = makeEvent('1', randomString())\n+            it('triggers fetch events with no arguments on fetchNextEvents when there are no existing events', async () => {\n+                await expectLogic(logic, () => {\n+                    logic.actions.fetchNextEvents()\n+                }).toDispatchActions([logic.actionCreators.fetchEvents()])\n+            })\n \n-            await expectLogic(logic, () => {\n-                logic.actions.fetchEventsSuccess({\n-                    events: [event],\n-                    hasNext: false,\n-                    isNext: false,\n-                })\n-                logic.actions.fetchNextEvents()\n-            }).toDispatchActions([logic.actionCreators.fetchEvents({ before: event.timestamp })])\n-        })\n+            it('triggers fetch events with before timestamp on fetchNextEvents when there are existing events', async () => {\n+                const event = makeEvent('1', randomString())\n \n-        it('calls prepend new when autoload is toggled and there are new events', async () => {\n-            const event = makeEvent('1', randomString())\n+                await expectLogic(logic, () => {\n+                    logic.actions.fetchEventsSuccess({\n+                        events: [event],\n+                        hasNext: false,\n+                        isNext: false,\n+                    })\n+                    logic.actions.fetchNextEvents()\n+                }).toDispatchActions([logic.actionCreators.fetchEvents({ before: event.timestamp })])\n+            })\n \n-            await expectLogic(logic, () => {\n-                logic.actions.pollEventsSuccess([event])\n-                logic.actions.toggleAutomaticLoad(true)\n-            }).toDispatchActions([logic.actionCreators.prependNewEvents([event])])\n-        })\n+            it('calls prepend new when autoload is toggled and there are new events', async () => {\n+                const event = makeEvent('1', randomString())\n \n-        it('calls error toast on fetch failure', async () => {\n-            await expectLogic(logic, () => {\n-                logic.actions.fetchOrPollFailure({})\n+                await expectLogic(logic, () => {\n+                    logic.actions.pollEventsSuccess([event])\n+                    logic.actions.toggleAutomaticLoad(true)\n+                }).toDispatchActions([logic.actionCreators.prependNewEvents([event])])\n+            })\n+\n+            it('calls error toast on fetch failure', async () => {\n+                await expectLogic(logic, () => {\n+                    logic.actions.fetchOrPollFailure({})\n+                })\n+                expect(toastSpy).toHaveBeenCalled()\n             })\n-            expect(toastSpy).toHaveBeenCalled()\n         })\n     })\n })\ndiff --git a/frontend/src/scenes/events/eventsTableLogic.ts b/frontend/src/scenes/events/eventsTableLogic.ts\nindex 57e55fc3d..dd9e52b3b 100644\n--- a/frontend/src/scenes/events/eventsTableLogic.ts\n+++ b/frontend/src/scenes/events/eventsTableLogic.ts\n@@ -8,6 +8,7 @@ import { FixedFilters } from 'scenes/events/EventsTable'\n import { AnyPropertyFilter, EventsTableRowItem, EventType, PropertyFilter } from '~/types'\n import { isValidPropertyFilter } from 'lib/components/PropertyFilters/utils'\n import { teamLogic } from '../teamLogic'\n+import { urls } from 'scenes/urls'\n \n const POLL_TIMEOUT = 5000\n \n@@ -37,6 +38,7 @@ const formatEvents = (events: EventType[], newEvents: EventType[]): EventsTableR\n export interface EventsTableLogicProps {\n     fixedFilters?: FixedFilters\n     key?: string\n+    sceneUrl: string\n }\n \n export interface OnFetchEventsSuccess {\n@@ -58,7 +60,7 @@ export const eventsTableLogic = kea<eventsTableLogicType<ApiError, EventsTableLo\n     // Set a unique key based on the fixed filters.\n     // This way if we move back/forward between /events and /person/ID, the logic is reloaded.\n     key: (props) =>\n-        [props.fixedFilters ? JSON.stringify(props.fixedFilters) : 'all', props.key]\n+        [props.fixedFilters ? JSON.stringify(props.fixedFilters) : 'all', props.key, props.sceneUrl]\n             .filter((keyPart) => !!keyPart)\n             .join('-'),\n     connect: {\n@@ -99,10 +101,8 @@ export const eventsTableLogic = kea<eventsTableLogicType<ApiError, EventsTableLo\n         noop: (s) => s,\n     },\n \n-    reducers: {\n-        // save the pathname that was used when this logic was mounted\n-        // we use it to NOT update the filters when the user moves away from this path, yet the scene is still active\n-        initialPathname: [(state: string) => router.selectors.location(state).pathname, { noop: (_, s) => s }],\n+    reducers: ({ props }) => ({\n+        sceneIsEventsPage: [props.sceneUrl ? props.sceneUrl === urls.events() : false, {}],\n         properties: [\n             [] as PropertyFilter[],\n             {\n@@ -186,7 +186,7 @@ export const eventsTableLogic = kea<eventsTableLogicType<ApiError, EventsTableLo\n                 toggleAutomaticLoad: (_, { automaticLoadEnabled }) => automaticLoadEnabled,\n             },\n         ],\n-    },\n+    }),\n \n     selectors: ({ selectors, props }) => ({\n         eventsFormatted: [\n@@ -205,15 +205,6 @@ export const eventsTableLogic = kea<eventsTableLogicType<ApiError, EventsTableLo\n         ],\n     }),\n \n-    events: ({ values }) => ({\n-        // No afterMount necessary because actionToUrl will call\n-        beforeUnmount: () => {\n-            if (values.pollTimeout !== null) {\n-                clearTimeout(values.pollTimeout)\n-            }\n-        },\n-    }),\n-\n     actionToUrl: ({ values }) => ({\n         setProperties: () => {\n             return [\n@@ -250,19 +241,8 @@ export const eventsTableLogic = kea<eventsTableLogicType<ApiError, EventsTableLo\n         },\n     }),\n \n-    urlToAction: ({ actions, values }) => ({\n-        '*': (_, searchParams) => {\n-            try {\n-                // if the url changed, but we are not anymore on the page we were at when the logic was mounted\n-                if (router.values.location.pathname !== values.initialPathname) {\n-                    return\n-                }\n-            } catch (error) {\n-                // since this is a catch-all route, this code might run during or after the logic was unmounted\n-                // if we have an error accessing the filter value, the logic is gone and we should return\n-                return\n-            }\n-\n+    urlToAction: ({ actions, values, props }) => ({\n+        [props.sceneUrl]: (_: Record<string, any>, searchParams: Record<string, any>): void => {\n             actions.setProperties(searchParams.properties || values.properties || {})\n \n             if (searchParams.autoload) {\n@@ -275,6 +255,10 @@ export const eventsTableLogic = kea<eventsTableLogicType<ApiError, EventsTableLo\n         },\n     }),\n \n+    events: ({ values }) => ({\n+        beforeUnmount: () => clearTimeout(values.pollTimeout || undefined),\n+    }),\n+\n     listeners: ({ actions, values, props }) => ({\n         setProperties: () => actions.fetchEvents(),\n         flipSort: () => actions.fetchEvents(),\n@@ -336,6 +320,10 @@ export const eventsTableLogic = kea<eventsTableLogicType<ApiError, EventsTableLo\n             if (values.orderBy !== '-timestamp') {\n                 return\n             }\n+            // Do not poll if the scene is in the background\n+            if (props.sceneUrl !== router.values.location.pathname) {\n+                return\n+            }\n \n             const params: Record<string, unknown> = {\n                 properties: values.properties,\ndiff --git a/frontend/src/scenes/persons/Person.tsx b/frontend/src/scenes/persons/Person.tsx\nindex af4d19bfa..b4f34844b 100644\n--- a/frontend/src/scenes/persons/Person.tsx\n+++ b/frontend/src/scenes/persons/Person.tsx\n@@ -23,6 +23,7 @@ import { PageHeader } from 'lib/components/PageHeader'\n import { featureFlagLogic } from 'lib/logic/featureFlagLogic'\n import { FEATURE_FLAGS } from 'lib/constants'\n import { SceneExport } from 'scenes/sceneTypes'\n+import { urls } from 'scenes/urls'\n \n dayjs.extend(relativeTime)\n \n@@ -33,7 +34,7 @@ export const scene: SceneExport = {\n     logic: personsLogic,\n }\n \n-export function Person(): JSX.Element {\n+export function Person({ id: urlId }: { id?: string } = {}): JSX.Element {\n     const [activeCardTab, setActiveCardTab] = useState('properties')\n     const {\n         person,\n@@ -118,6 +119,7 @@ export function Person(): JSX.Element {\n                                     pageKey={person.distinct_ids.join('__')} // force refresh if distinct_ids change\n                                     fixedFilters={{ person_id: person.id }}\n                                     hidePersonColumn\n+                                    sceneUrl={urls.person(urlId || person.distinct_ids[0] || String(person.id))}\n                                 />\n                             )}\n                         </div>\ndiff --git a/frontend/src/test/init.ts b/frontend/src/test/init.ts\nindex 711b7a0d2..1dd851f26 100644\n--- a/frontend/src/test/init.ts\n+++ b/frontend/src/test/init.ts\n@@ -34,16 +34,19 @@ export function initKeaTestLogic<L extends Logic = Logic>({\n     logic,\n     props,\n     onLogic,\n+    beforeLogic,\n }: {\n     logic?: LogicWrapper<L>\n     props?: LogicWrapper<L>['props']\n     onLogic?: (l: BuiltLogic<L>) => any\n+    beforeLogic?: () => any\n } = {}): void {\n     let builtLogic: BuiltLogic<L>\n     let unmount: () => void\n \n     beforeEach(async () => {\n         initKeaTests()\n+        beforeLogic?.()\n         if (logic) {\n             builtLogic = logic.build({ ...props })\n             await onLogic?.(builtLogic)\n"
  },
  "7f7dedcbb27b2c102b02aaf1c184334eb8eba95c": {
    "hash": "7f7dedcbb27b2c102b02aaf1c184334eb8eba95c",
    "message": "fix: add import for icon used in event definitions table (#11509)",
    "diff": "commit 7f7dedcbb27b2c102b02aaf1c184334eb8eba95c\nAuthor: Paul D'Ambra <paul@posthog.com>\nDate:   Fri Aug 26 10:55:15 2022 +0100\n\n    fix: add import for icon used in event definitions table (#11509)\n\ndiff --git a/frontend/src/scenes/data-management/events/EventDefinitionsTable.tsx b/frontend/src/scenes/data-management/events/EventDefinitionsTable.tsx\nindex 37076b303..bcc7e62a4 100644\n--- a/frontend/src/scenes/data-management/events/EventDefinitionsTable.tsx\n+++ b/frontend/src/scenes/data-management/events/EventDefinitionsTable.tsx\n@@ -21,7 +21,7 @@ import { preflightLogic } from 'scenes/PreflightCheck/preflightLogic'\n import { ThirtyDayQueryCountTitle, ThirtyDayVolumeTitle } from 'lib/components/DefinitionPopup/DefinitionPopupContents'\n import { ProfilePicture } from 'lib/components/ProfilePicture'\n import { teamLogic } from 'scenes/teamLogic'\n-import { IconWebhook } from 'lib/components/icons'\n+import { IconWebhook, UnverifiedEvent } from 'lib/components/icons'\n import { NewActionButton } from 'scenes/actions/NewActionButton'\n import { TZLabel } from 'lib/components/TimezoneAware'\n import { PageHeader } from 'lib/components/PageHeader'\n"
  },
  "8aa1e69c327efefafec6fbe7c952b85f3ba5a29a": {
    "hash": "8aa1e69c327efefafec6fbe7c952b85f3ba5a29a",
    "message": "feat(data-management): split events type filter into custom and posthog events (#11496)",
    "diff": "commit 8aa1e69c327efefafec6fbe7c952b85f3ba5a29a\nAuthor: Marius Andra <marius.andra@gmail.com>\nDate:   Fri Aug 26 09:03:20 2022 +0200\n\n    feat(data-management): split events type filter into custom and posthog events (#11496)\n\ndiff --git a/frontend/src/scenes/data-management/events/EventDefinitionsTable.tsx b/frontend/src/scenes/data-management/events/EventDefinitionsTable.tsx\nindex 04d21a385..37076b303 100644\n--- a/frontend/src/scenes/data-management/events/EventDefinitionsTable.tsx\n+++ b/frontend/src/scenes/data-management/events/EventDefinitionsTable.tsx\n@@ -21,7 +21,7 @@ import { preflightLogic } from 'scenes/PreflightCheck/preflightLogic'\n import { ThirtyDayQueryCountTitle, ThirtyDayVolumeTitle } from 'lib/components/DefinitionPopup/DefinitionPopupContents'\n import { ProfilePicture } from 'lib/components/ProfilePicture'\n import { teamLogic } from 'scenes/teamLogic'\n-import { ActionEvent, IconWebhook, UnverifiedEvent } from 'lib/components/icons'\n+import { IconWebhook } from 'lib/components/icons'\n import { NewActionButton } from 'scenes/actions/NewActionButton'\n import { TZLabel } from 'lib/components/TimezoneAware'\n import { PageHeader } from 'lib/components/PageHeader'\n@@ -33,14 +33,17 @@ const eventTypeOptions: LemonSelectOptions<CombinedEventType> = [\n     {\n         value: CombinedEventType.ActionEvent,\n         label: 'Calculated events',\n-        icon: <ActionEvent />,\n         'data-attr': 'event-type-option-action-event',\n     },\n     {\n-        value: CombinedEventType.Event,\n-        label: 'Events',\n-        icon: <UnverifiedEvent />,\n-        'data-attr': 'event-type-option-event',\n+        value: CombinedEventType.EventCustom,\n+        label: 'Custom events',\n+        'data-attr': 'event-type-option-event-custom',\n+    },\n+    {\n+        value: CombinedEventType.EventPostHog,\n+        label: 'PostHog events',\n+        'data-attr': 'event-type-option-event-posthog',\n     },\n     {\n         value: CombinedEventType.EventCustom,\n"
  },
  "1517997a2dfa20cbb1a3cd76f33e0c51fc941f16": {
    "hash": "1517997a2dfa20cbb1a3cd76f33e0c51fc941f16",
    "message": "feat(annotations): Annotations overlay 2.0 (#11560)\n    \n    * Rip out old annotations overlay\n    \n    * Clean up `LineGraph` a bit\n    \n    * Add new overlay prototype\n    \n    * Clarify var names\n    \n    * Rearrange `BindLogic` and fix typo\n    \n    * Refactor `LineGraph` to store chart with `useState()`\n    \n    * Add annotation popover\n    \n    * Add `line-height` and `font-style` utlity classes\n    \n    * Update `h5`\n    \n    * Support hover states for default (aka tertiary) muted `LemonButton`\n    \n    * Add rest of the owl\n    \n    * Fix typing\n    \n    * Generalize positioning\n    \n    * Fix `determineAnnotationsDateGroup()`\n    \n    * Encapsulate annotation positioning logic fully in `AnnotationsOverlay`\n    \n    * Don't invoke any annotation calculations if unneeded\n    \n    * Fix `AnnotationsOverlayCSSProperties`\n    \n    * Handle timezones holistically\n    \n    * Fix typo\n    \n    * Update verifiedDomainsLogic.test.ts.snap\n    \n    * Change from plain + parsed (`parse()`) to raw + plain (`deserialize()`)\n    \n    * Restructure `LemonModal` usage\n    \n    * Close popover on click outside\n    \n    * Remove TODO\n    \n    * Improve popover experience\n    \n    * Fix double import",
    "diff": "commit 1517997a2dfa20cbb1a3cd76f33e0c51fc941f16\nAuthor: Michael Matloka <dev@twixes.com>\nDate:   Tue Sep 6 12:48:45 2022 +0200\n\n    feat(annotations): Annotations overlay 2.0 (#11560)\n    \n    * Rip out old annotations overlay\n    \n    * Clean up `LineGraph` a bit\n    \n    * Add new overlay prototype\n    \n    * Clarify var names\n    \n    * Rearrange `BindLogic` and fix typo\n    \n    * Refactor `LineGraph` to store chart with `useState()`\n    \n    * Add annotation popover\n    \n    * Add `line-height` and `font-style` utlity classes\n    \n    * Update `h5`\n    \n    * Support hover states for default (aka tertiary) muted `LemonButton`\n    \n    * Add rest of the owl\n    \n    * Fix typing\n    \n    * Generalize positioning\n    \n    * Fix `determineAnnotationsDateGroup()`\n    \n    * Encapsulate annotation positioning logic fully in `AnnotationsOverlay`\n    \n    * Don't invoke any annotation calculations if unneeded\n    \n    * Fix `AnnotationsOverlayCSSProperties`\n    \n    * Handle timezones holistically\n    \n    * Fix typo\n    \n    * Update verifiedDomainsLogic.test.ts.snap\n    \n    * Change from plain + parsed (`parse()`) to raw + plain (`deserialize()`)\n    \n    * Restructure `LemonModal` usage\n    \n    * Close popover on click outside\n    \n    * Remove TODO\n    \n    * Improve popover experience\n    \n    * Fix double import\n\ndiff --git a/frontend/src/lib/api.mock.ts b/frontend/src/lib/api.mock.ts\nindex 0f9b411ec..8ab746d34 100644\n--- a/frontend/src/lib/api.mock.ts\n+++ b/frontend/src/lib/api.mock.ts\n@@ -49,7 +49,7 @@ export const MOCK_DEFAULT_TEAM: TeamType = {\n     test_account_filters_default_checked: false,\n     path_cleaning_filters: [],\n     is_demo: false,\n-    timezone: 'Europe/Brussels',\n+    timezone: 'UTC',\n     data_attributes: ['data-attr'],\n     person_display_name_properties: ['email', 'name', 'username'],\n     correlation_config: {\ndiff --git a/frontend/src/lib/api.ts b/frontend/src/lib/api.ts\nindex 6ff857008..17fe02182 100644\n--- a/frontend/src/lib/api.ts\n+++ b/frontend/src/lib/api.ts\n@@ -2,7 +2,7 @@ import posthog from 'posthog-js'\n import { parsePeopleParams, PeopleParamType } from 'scenes/trends/persons-modal/personsModalLogic'\n import {\n     ActionType,\n-    AnnotationType,\n+    RawAnnotationType,\n     CohortType,\n     CombinedEventType,\n     DashboardCollaboratorType,\n@@ -275,7 +275,7 @@ class ApiRequest {\n         return this.projectsDetail(teamId).addPathComponent('annotations')\n     }\n \n-    public annotation(id: AnnotationType['id'], teamId?: TeamType['id']): ApiRequest {\n+    public annotation(id: RawAnnotationType['id'], teamId?: TeamType['id']): ApiRequest {\n         return this.annotations(teamId).addPathComponent(id)\n     }\n \n@@ -742,21 +742,21 @@ const api = {\n     },\n \n     annotations: {\n-        async get(annotationId: AnnotationType['id']): Promise<AnnotationType> {\n+        async get(annotationId: RawAnnotationType['id']): Promise<RawAnnotationType> {\n             return await new ApiRequest().annotation(annotationId).get()\n         },\n         async update(\n-            annotationId: AnnotationType['id'],\n-            data: Pick<AnnotationType, 'date_marker' | 'scope' | 'content'>\n-        ): Promise<AnnotationType> {\n+            annotationId: RawAnnotationType['id'],\n+            data: Pick<RawAnnotationType, 'date_marker' | 'scope' | 'content' | 'dashboard_item'>\n+        ): Promise<RawAnnotationType> {\n             return await new ApiRequest().annotation(annotationId).update({ data })\n         },\n-        async list(): Promise<PaginatedResponse<AnnotationType>> {\n+        async list(): Promise<PaginatedResponse<RawAnnotationType>> {\n             return await new ApiRequest().annotations().get()\n         },\n         async create(\n-            data: Pick<AnnotationType, 'date_marker' | 'scope' | 'content' | 'dashboard_item'>\n-        ): Promise<AnnotationType> {\n+            data: Pick<RawAnnotationType, 'date_marker' | 'scope' | 'content' | 'dashboard_item'>\n+        ): Promise<RawAnnotationType> {\n             return await new ApiRequest().annotations().create({ data })\n         },\n         determineDeleteEndpoint(): string {\ndiff --git a/frontend/src/lib/colors.ts b/frontend/src/lib/colors.ts\nindex 3b080720b..fad5127ec 100644\n--- a/frontend/src/lib/colors.ts\n+++ b/frontend/src/lib/colors.ts\n@@ -76,7 +76,5 @@ export function getGraphColors(): Record<string, string | null> {\n         tooltipBackground: '#1dc9b7',\n         tooltipTitle: '#fff',\n         tooltipBody: '#fff',\n-        annotationColor: null,\n-        annotationAccessoryColor: null,\n     }\n }\ndiff --git a/frontend/src/lib/components/Annotations/AnnotationMarker.tsx b/frontend/src/lib/components/Annotations/AnnotationMarker.tsx\ndeleted file mode 100644\nindex 6c2a34064..000000000\n--- a/frontend/src/lib/components/Annotations/AnnotationMarker.tsx\n+++ /dev/null\n@@ -1,290 +0,0 @@\n-import React, { useState, useEffect, useRef } from 'react'\n-import { useValues, useActions } from 'kea'\n-import { userLogic } from 'scenes/userLogic'\n-import { Popover } from 'antd'\n-import { humanFriendlyDetailedTime } from '~/lib/utils'\n-import { PlusOutlined, ProjectOutlined, DeploymentUnitOutlined } from '@ant-design/icons'\n-import { insightAnnotationsLogic } from './insightAnnotationsLogic'\n-import { useEscapeKey } from 'lib/hooks/useEscapeKey'\n-import { eventUsageLogic } from 'lib/utils/eventUsageLogic'\n-import { Tooltip } from 'lib/components/Tooltip'\n-import { AnnotationScope, AnnotationType } from '~/types'\n-import { styles } from '~/styles/vars'\n-import { teamLogic } from 'scenes/teamLogic'\n-import { organizationLogic } from 'scenes/organizationLogic'\n-import { dayjs } from 'lib/dayjs'\n-import { LemonTextArea } from '../LemonTextArea/LemonTextArea'\n-import { LemonButton, LemonCheckbox } from '@posthog/lemon-ui'\n-import { IconClose, IconDelete } from '../icons'\n-\n-function coordinateContains(e: MouseEvent, element: DOMRect): boolean {\n-    if (\n-        e.clientX >= element.x &&\n-        e.clientX <= element.x + element.width &&\n-        e.clientY >= element.y &&\n-        e.clientY <= element.y + element.height\n-    ) {\n-        return true\n-    } else {\n-        return false\n-    }\n-}\n-\n-interface AnnotationMarkerProps {\n-    elementId?: string\n-    label: string\n-    annotations?: AnnotationType[]\n-    left: number\n-    top: number\n-    onCreate?: (textInput: string, applyAll: boolean) => void\n-    onDelete?: (annotation: AnnotationType) => void\n-    onClick?: () => void\n-    onClose?: () => void\n-    size?: number\n-    color: string | null\n-    accessoryColor: string | null\n-    currentDateMarker?: string | null\n-    dynamic?: boolean\n-    index?: number\n-    getPopupContainer?: () => HTMLElement\n-}\n-\n-export function AnnotationMarker({\n-    elementId,\n-    label,\n-    annotations = [],\n-    left,\n-    top,\n-    onCreate,\n-    onDelete,\n-    onClick,\n-    size = 25,\n-    color,\n-    accessoryColor,\n-    currentDateMarker,\n-    onClose,\n-    dynamic,\n-    index,\n-    getPopupContainer,\n-}: AnnotationMarkerProps): JSX.Element | null {\n-    const popupRef = useRef<HTMLDivElement | null>(null)\n-    const [focused, setFocused] = useState(false)\n-    const [textInput, setTextInput] = useState('')\n-    const [applyAll, setApplyAll] = useState(true)\n-    const [textAreaVisible, setTextAreaVisible] = useState(false)\n-    const [hovered, setHovered] = useState(false)\n-    const { reportAnnotationViewed } = useActions(eventUsageLogic)\n-\n-    const visible = focused || (!dynamic && hovered)\n-\n-    useEffect(() => {\n-        if (visible) {\n-            reportAnnotationViewed(annotations)\n-        } else {\n-            reportAnnotationViewed(null)\n-            /* We report a null value to cancel (if applicable) the report because the annotation was closed */\n-        }\n-    }, [visible])\n-\n-    const { user } = useValues(userLogic)\n-    const { currentTeam } = useValues(teamLogic)\n-    const { currentOrganization } = useValues(organizationLogic)\n-    // insightAnnotationsLogic's props must be bound using BindLogic - this is so that we can avoid prop drilling here\n-    const { intervalUnit, groupedAnnotations } = useValues(insightAnnotationsLogic)\n-\n-    function closePopup(): void {\n-        setFocused(false)\n-        onClose?.()\n-    }\n-\n-    useEscapeKey(closePopup, [focused])\n-\n-    const _color = color || 'var(--primary)'\n-    const _accessoryColor = accessoryColor || 'white'\n-\n-    function deselect(e: MouseEvent): void {\n-        if (popupRef.current && coordinateContains(e, popupRef.current.getBoundingClientRect())) {\n-            return\n-        }\n-        closePopup()\n-    }\n-\n-    useEffect(() => {\n-        document.addEventListener('mousedown', deselect)\n-        return () => {\n-            document.removeEventListener('mousedown', deselect)\n-        }\n-    }, [])\n-\n-    if (\n-        dynamic &&\n-        Object.keys(groupedAnnotations)\n-            .map((key) => dayjs(key))\n-            .some((marker) => marker.isSame(dayjs(currentDateMarker).startOf(intervalUnit)))\n-    ) {\n-        return null\n-    }\n-\n-    const _onClose = dynamic ? closePopup : () => setTextAreaVisible(false)\n-\n-    const editorSection = (\n-        <div className=\"space-y-2\">\n-            <LemonTextArea maxLength={300} rows={4} value={textInput} onChange={(e) => setTextInput(e)} autoFocus />\n-            <LemonCheckbox checked={applyAll} onChange={setApplyAll} label=\"Create for all charts\" fullWidth />\n-            <div className=\"flex justify-end gap-2\">\n-                <LemonButton\n-                    size=\"small\"\n-                    type=\"secondary\"\n-                    onClick={() => {\n-                        _onClose()\n-                        setTextInput('')\n-                    }}\n-                >\n-                    Cancel\n-                </LemonButton>\n-                <LemonButton\n-                    type=\"primary\"\n-                    size=\"small\"\n-                    onClick={() => {\n-                        onCreate && onCreate(textInput, applyAll)\n-                        _onClose()\n-                        setTextInput('')\n-                    }}\n-                >\n-                    Add\n-                </LemonButton>\n-            </div>\n-        </div>\n-    )\n-\n-    return (\n-        <Popover\n-            trigger=\"click\"\n-            visible={visible}\n-            defaultVisible={false}\n-            getPopupContainer={() => (getPopupContainer ? getPopupContainer() : document.body)}\n-            content={\n-                dynamic ? (\n-                    <div ref={popupRef} className=\"p-2\" style={{ minWidth: 300 }}>\n-                        <div className=\"pb-2\">{dayjs(currentDateMarker).format('MMMM Do YYYY')}</div>\n-                        {editorSection}\n-                    </div>\n-                ) : (\n-                    <div ref={popupRef} style={{ minWidth: 300 }}>\n-                        <div style={{ overflowY: 'auto', maxHeight: '80vh' }}>\n-                            {[...annotations]\n-                                .sort(\n-                                    (annotationA, annotationB) =>\n-                                        dayjs(annotationA.created_at).unix() - dayjs(annotationB.created_at).unix()\n-                                )\n-                                .map((data) => (\n-                                    <div key={data.id} className=\"mb-2\">\n-                                        <div className=\"flex justify-between items-center\">\n-                                            <div className=\"space-x-2\">\n-                                                <b>\n-                                                    {data.created_by &&\n-                                                        (data.created_by.first_name || data.created_by.email)}\n-                                                </b>\n-                                                <i className=\"text-muted\">\n-                                                    {humanFriendlyDetailedTime(data.created_at)}\n-                                                </i>\n-                                                {data.scope === AnnotationScope.Project ? (\n-                                                    <Tooltip\n-                                                        title={`This annotation is shown on all charts in project ${currentTeam?.name}`}\n-                                                    >\n-                                                        <ProjectOutlined />\n-                                                    </Tooltip>\n-                                                ) : data.scope === AnnotationScope.Organization ? (\n-                                                    <Tooltip\n-                                                        title={`This annotation is shown on all charts in organization ${currentOrganization?.name}`}\n-                                                    >\n-                                                        <DeploymentUnitOutlined />\n-                                                    </Tooltip>\n-                                                ) : null}\n-                                            </div>\n-                                            {(!data.created_by || data.created_by.uuid === user?.uuid) && (\n-                                                <LemonButton\n-                                                    type=\"tertiary\"\n-                                                    size=\"small\"\n-                                                    icon={<IconDelete />}\n-                                                    onClick={() => onDelete?.(data)}\n-                                                />\n-                                            )}\n-                                        </div>\n-                                        <span>{data.content}</span>\n-                                    </div>\n-                                ))}\n-                        </div>\n-                        <div className=\"border-t pt-2\">\n-                            {textAreaVisible ? (\n-                                editorSection\n-                            ) : (\n-                                <div className=\"flex justify-end\">\n-                                    <LemonButton type=\"primary\" size=\"small\" onClick={() => setTextAreaVisible(true)}>\n-                                        Add Note\n-                                    </LemonButton>\n-                                </div>\n-                            )}\n-                        </div>\n-                    </div>\n-                )\n-            }\n-            title={\n-                <div className=\"flex justify-between items-center\">\n-                    {label}\n-                    {focused && (\n-                        <LemonButton\n-                            status=\"stealth\"\n-                            icon={<IconClose />}\n-                            onClick={() => {\n-                                setFocused(false)\n-                                onClose?.()\n-                            }}\n-                        />\n-                    )}\n-                </div>\n-            }\n-        >\n-            <div\n-                // eslint-disable-next-line react/forbid-dom-props\n-                style={{\n-                    position: 'absolute',\n-                    left: left,\n-                    top: top,\n-                    width: size,\n-                    height: size,\n-                    display: 'flex',\n-                    justifyContent: 'center',\n-                    alignItems: 'center',\n-                    backgroundColor: focused || dynamic || hovered || elementId === currentDateMarker ? _color : '#fff',\n-                    borderRadius: 5,\n-                    cursor: 'pointer',\n-                    border: dynamic ? undefined : '1px solid ' + _color,\n-                    zIndex:\n-                        dynamic || hovered || elementId === currentDateMarker ? styles.zGraphAnnotationPrompt : index,\n-                    boxShadow: dynamic ? '0 0 5px 4px rgba(0, 0, 0, 0.2)' : undefined,\n-                }}\n-                onClick={() => {\n-                    onClick?.()\n-                    setFocused(true)\n-                }}\n-                onMouseOver={() => setHovered(true)}\n-                onMouseLeave={() => setHovered(false)}\n-            >\n-                {(annotations?.length || 0) > 0 ? (\n-                    <span\n-                        style={{\n-                            color: focused || hovered || elementId === currentDateMarker ? _accessoryColor : _color,\n-\n-                            fontSize: 12,\n-                        }}\n-                    >\n-                        {annotations.length}\n-                    </span>\n-                ) : (\n-                    <PlusOutlined style={{ color: _accessoryColor }} />\n-                )}\n-            </div>\n-        </Popover>\n-    )\n-}\ndiff --git a/frontend/src/lib/components/Annotations/Annotations.tsx b/frontend/src/lib/components/Annotations/Annotations.tsx\ndeleted file mode 100644\nindex cb8a25907..000000000\n--- a/frontend/src/lib/components/Annotations/Annotations.tsx\n+++ /dev/null\n@@ -1,93 +0,0 @@\n-import React from 'react'\n-import { insightAnnotationsLogic } from './insightAnnotationsLogic'\n-import { useValues, useActions } from 'kea'\n-import { AnnotationMarker } from './AnnotationMarker'\n-import { AnnotationType, AnnotationScope } from '~/types'\n-import { dayjs } from 'lib/dayjs'\n-\n-interface AnnotationsProps {\n-    dates: string[]\n-    leftExtent: number\n-    interval: number\n-    topExtent: number\n-    color: string | null\n-    accessoryColor: string | null\n-    currentDateMarker?: string | null\n-    onClick: () => void\n-    onClose: () => void\n-    timezone: string\n-}\n-\n-export function Annotations({\n-    dates,\n-    leftExtent,\n-    interval,\n-    topExtent,\n-    onClick,\n-    color,\n-    accessoryColor,\n-    onClose,\n-    currentDateMarker,\n-    timezone,\n-}: AnnotationsProps): JSX.Element {\n-    // insightAnnotationsLogic's props must be bound using BindLogic - this is so that we can avoid prop drilling here\n-    const { intervalUnit, groupedAnnotations } = useValues(insightAnnotationsLogic)\n-    const { createAnnotation, deleteAnnotation } = useActions(insightAnnotationsLogic)\n-\n-    const onCreate =\n-        (date: string) =>\n-        (input: string, applyAll: boolean): void => {\n-            createAnnotation({\n-                content: input,\n-                date_marker: dayjs(date).tz(timezone).toISOString(),\n-                scope: applyAll ? AnnotationScope.Project : AnnotationScope.Insight,\n-            })\n-        }\n-\n-    const markers: JSX.Element[] = []\n-\n-    const makeAnnotationMarker = (index: number, date: string, annotationsToMark: AnnotationType[]): JSX.Element => (\n-        <AnnotationMarker\n-            elementId={date}\n-            label={dayjs(date).format('MMMM Do YYYY HH:mm')}\n-            key={index}\n-            left={index * interval + leftExtent - 12.5}\n-            top={topExtent}\n-            annotations={annotationsToMark}\n-            onCreate={onCreate(date)}\n-            onDelete={(annotationToDelete: AnnotationType) => {\n-                annotationsToMark.length === 1 && onClose?.()\n-                deleteAnnotation(annotationToDelete)\n-            }}\n-            onClick={onClick}\n-            onClose={onClose}\n-            color={color}\n-            accessoryColor={accessoryColor}\n-            currentDateMarker={currentDateMarker}\n-            index={index}\n-        />\n-    )\n-\n-    const filterAnnotations = (annotations: AnnotationType[], dateKey: string, index: number): void => {\n-        annotations.forEach((annotation) => {\n-            if (annotation.date_marker.startsWith(dateKey)) {\n-                markers.push(makeAnnotationMarker(index, dates[index], [annotation]))\n-            }\n-        })\n-    }\n-\n-    dates &&\n-        dates.forEach((date: string, index: number) => {\n-            const chosenTime = dayjs(date).startOf(intervalUnit)\n-            const groupedAnnotationKey = chosenTime.format('YYYY-MM-DD')\n-            const annotations = groupedAnnotations[groupedAnnotationKey] || []\n-\n-            if (intervalUnit === 'hour') {\n-                const hourKey = chosenTime.format('YYYY-MM-DDTHH')\n-                filterAnnotations(annotations, hourKey, index)\n-            } else if (annotations.length) {\n-                markers.push(makeAnnotationMarker(index, dates[index], annotations))\n-            }\n-        })\n-    return <>{markers}</>\n-}\ndiff --git a/frontend/src/lib/components/Annotations/index.ts b/frontend/src/lib/components/Annotations/index.ts\ndeleted file mode 100644\nindex 0481ee244..000000000\n--- a/frontend/src/lib/components/Annotations/index.ts\n+++ /dev/null\n@@ -1,3 +0,0 @@\n-export * from './AnnotationMarker'\n-export * from './Annotations'\n-export * from './insightAnnotationsLogic'\ndiff --git a/frontend/src/lib/components/AnnotationsOverlay/AnnotationsOverlay.scss b/frontend/src/lib/components/AnnotationsOverlay/AnnotationsOverlay.scss\nnew file mode 100644\nindex 000000000..4d6434f61\n--- /dev/null\n+++ b/frontend/src/lib/components/AnnotationsOverlay/AnnotationsOverlay.scss\n@@ -0,0 +1,73 @@\n+.AnnotationsOverlay {\n+    position: absolute;\n+    top: var(--annotations-overlay-chart-area-height);\n+    left: var(--annotations-overlay-chart-area-left);\n+}\n+\n+.AnnotationsBadge {\n+    position: absolute;\n+    display: flex;\n+    align-items: center;\n+    justify-content: center;\n+    margin-left: calc(\n+        var(--annotations-overlay-tick-interval) * var(--annotations-badge-index) -\n+            var(--annotations-overlay-chart-area-left) + var(--annotations-overlay-first-tick-left)\n+    );\n+    height: 3rem;\n+    width: var(--annotations-overlay-tick-interval);\n+    border: none;\n+    background: none;\n+    transform: translate(-50%, -50%);\n+    cursor: pointer;\n+    -webkit-appearance: none !important;\n+\n+    > .LemonBubble {\n+        transition: transform 150ms ease; // Same as LemonBubble's transition\n+        // Override .LemonBubble--position-self-centered\n+        transform: scale(var(--annotations-badge-scale));\n+        transform-origin: center;\n+    }\n+}\n+\n+.AnnotationsPopover {\n+    --annotations-popover-width: 30rem;\n+    --annotations-popover-max-left: calc(var(--annotations-overlay-chart-width) - var(--annotations-popover-width));\n+    transition: top 200ms ease, left 200ms ease, opacity 200ms ease;\n+    position: absolute;\n+    left: clamp(\n+        0px,\n+        calc(\n+            var(--annotations-overlay-chart-area-left) + var(--annotations-overlay-active-badge-left) -\n+                var(--annotations-popover-width) / 2\n+        ),\n+        var(--annotations-popover-max-left)\n+    );\n+    top: calc(var(--annotations-overlay-active-badge-top) - 1.25rem);\n+    transform: translateY(-100%) !important;\n+\n+    &.AnnotationsPopover--enter,\n+    &.AnnotationsPopover--exit.AnnotationsPopover--exit-active {\n+        opacity: 0;\n+    }\n+\n+    &.AnnotationsPopover--enter.AnnotationsPopover--enter-active,\n+    &.AnnotationsPopover--exit {\n+        opacity: 1;\n+    }\n+\n+    > .LemonModal {\n+        margin: 0 0 0 calc(var(--annotations-overlay-chart-area-left) * -1);\n+        min-width: unset;\n+        max-width: unset;\n+    }\n+\n+    ul {\n+        max-height: 28rem;\n+    }\n+}\n+\n+.AnnotationCard {\n+    .profile-package {\n+        vertical-align: bottom;\n+    }\n+}\ndiff --git a/frontend/src/lib/components/AnnotationsOverlay/AnnotationsOverlay.tsx b/frontend/src/lib/components/AnnotationsOverlay/AnnotationsOverlay.tsx\nnew file mode 100644\nindex 000000000..c358450ee\n--- /dev/null\n+++ b/frontend/src/lib/components/AnnotationsOverlay/AnnotationsOverlay.tsx\n@@ -0,0 +1,251 @@\n+import { useActions, useValues } from 'kea'\n+import { dayjs } from 'lib/dayjs'\n+import { humanFriendlyDetailedTime, pluralize } from 'lib/utils'\n+import React, { useRef, useState } from 'react'\n+import { AnnotationScope, IntervalType, AnnotationType } from '~/types'\n+import { IconDelete, IconEdit, IconPlusMini } from '../icons'\n+import { LemonBubble } from '../LemonBubble/LemonBubble'\n+import { LemonModal } from '../LemonModal'\n+import { annotationsOverlayLogic, determineAnnotationsDateGroup } from './annotationsOverlayLogic'\n+import './AnnotationsOverlay.scss'\n+import { LemonButton } from '../LemonButton'\n+import { AnnotationModal } from 'scenes/annotations/AnnotationModal'\n+import { annotationModalLogic } from 'scenes/annotations/annotationModalLogic'\n+import { ProfilePicture } from '../ProfilePicture'\n+import { CSSTransition } from 'react-transition-group'\n+import { annotationsModel } from '~/models/annotationsModel'\n+import { Chart } from 'chart.js'\n+import { useAnnotationsPositioning } from './useAnnotationsPositioning'\n+import { useOutsideClickHandler } from 'lib/hooks/useOutsideClickHandler'\n+\n+/** User-facing format for annotation groups. */\n+const INTERVAL_UNIT_TO_HUMAN_DAYJS_FORMAT: Record<IntervalType, string> = {\n+    hour: 'MMMM D, YYYY H:00',\n+    day: 'MMMM D, YYYY',\n+    week: '[Week of] MMMM D, YYYY',\n+    month: 'MMMM D',\n+}\n+\n+export const annotationScopeToLabel: Record<AnnotationScope, string> = {\n+    [AnnotationScope.Insight]: 'Only this insight',\n+    [AnnotationScope.Project]: 'All insights in this project',\n+    [AnnotationScope.Organization]: 'All insights in this organization',\n+}\n+\n+export interface AnnotationsOverlayProps {\n+    chart: Chart\n+    chartWidth: number\n+    chartHeight: number\n+}\n+\n+interface AnnotationsOverlayCSSProperties extends React.CSSProperties {\n+    '--annotations-overlay-chart-area-left': `${string}px`\n+    '--annotations-overlay-chart-area-height': `${string}px`\n+    '--annotations-overlay-chart-width': `${string}px`\n+    '--annotations-overlay-first-tick-left': `${string}px`\n+    '--annotations-overlay-tick-interval': `${string}px`\n+    '--annotations-overlay-active-badge-left'?: `${string}px`\n+    '--annotations-overlay-active-badge-top'?: `${string}px`\n+}\n+\n+export function AnnotationsOverlay({ chart, chartWidth, chartHeight }: AnnotationsOverlayProps): JSX.Element {\n+    const { isPopoverShown, activeBadgeCoordinates } = useValues(annotationsOverlayLogic)\n+    const { closePopover } = useActions(annotationsOverlayLogic)\n+    const { tickIntervalPx, firstTickLeftPx } = useAnnotationsPositioning(chart, chartWidth, chartHeight)\n+\n+    const overlayRef = useRef<HTMLDivElement>(null)\n+    const modalContentRef = useRef<HTMLDivElement | null>(null)\n+    const modalOverlayRef = useRef<HTMLDivElement | null>(null)\n+\n+    useOutsideClickHandler([overlayRef, modalContentRef, modalOverlayRef], () => closePopover())\n+\n+    const dates: dayjs.Dayjs[] = chart.scales.x.ticks.map(({ label }) => {\n+        return dayjs(label as string)\n+    })\n+\n+    return (\n+        <div\n+            className=\"AnnotationsOverlay\"\n+            // eslint-disable-next-line react/forbid-dom-props\n+            style={\n+                {\n+                    '--annotations-overlay-chart-area-left': `${chart ? chart.scales.x.left : 0}px`,\n+                    '--annotations-overlay-chart-area-height': `${chart ? chart.scales.x.top : 0}px`,\n+                    '--annotations-overlay-chart-width': `${chartWidth}px`,\n+                    '--annotations-overlay-first-tick-left': `${firstTickLeftPx}px`,\n+                    '--annotations-overlay-tick-interval': `${tickIntervalPx}px`,\n+                    ...(activeBadgeCoordinates\n+                        ? {\n+                              '--annotations-overlay-active-badge-left': `${activeBadgeCoordinates[0]}px`,\n+                              '--annotations-overlay-active-badge-top': `${activeBadgeCoordinates[1]}px`,\n+                          }\n+                        : {}),\n+                } as AnnotationsOverlayCSSProperties\n+            }\n+            ref={overlayRef}\n+        >\n+            {dates?.map((date, index) => (\n+                <AnnotationsBadge key={date.toISOString()} index={index} date={date} />\n+            ))}\n+            {/* FIXME: Fix appear animation to be smooth too */}\n+            <CSSTransition\n+                in={isPopoverShown}\n+                timeout={200}\n+                classNames=\"AnnotationsPopover-\"\n+                mountOnEnter\n+                unmountOnExit\n+            >\n+                <AnnotationsPopover />\n+            </CSSTransition>\n+            <AnnotationModal\n+                contentRef={(el) => (modalContentRef.current = el)}\n+                overlayRef={(el) => (modalOverlayRef.current = el)}\n+            />\n+        </div>\n+    )\n+}\n+\n+interface AnnotationsBadgeProps {\n+    index: number\n+    date: dayjs.Dayjs\n+}\n+\n+interface AnnotationsBadgeCSSProperties extends React.CSSProperties {\n+    '--annotations-badge-index': number\n+    '--annotations-badge-scale': number\n+}\n+\n+const AnnotationsBadge = React.memo(function AnnotationsBadgeRaw({ index, date }: AnnotationsBadgeProps): JSX.Element {\n+    const { intervalUnit, groupedAnnotations, isDateLocked, activeDate, isPopoverShown } =\n+        useValues(annotationsOverlayLogic)\n+    const { activateDate, deactivateDate, lockDate, unlockDate } = useActions(annotationsOverlayLogic)\n+\n+    const [hovered, setHovered] = useState(false)\n+    const buttonRef = useRef<HTMLButtonElement>(null)\n+\n+    const dateGroup = determineAnnotationsDateGroup(date, intervalUnit)\n+    const annotations = groupedAnnotations[dateGroup] || []\n+\n+    const active = activeDate?.valueOf() === date.valueOf() && isPopoverShown\n+    const shown = active || hovered || annotations.length > 0\n+\n+    return (\n+        <button\n+            ref={buttonRef}\n+            className=\"AnnotationsBadge\"\n+            // eslint-disable-next-line react/forbid-dom-props\n+            style={\n+                {\n+                    '--annotations-badge-index': index,\n+                    '--annotations-badge-scale': shown ? 1 : 0,\n+                } as AnnotationsBadgeCSSProperties\n+            }\n+            onMouseEnter={() => {\n+                setHovered(true)\n+                if (!isDateLocked) {\n+                    const button = buttonRef.current as HTMLButtonElement\n+                    activateDate(date, [button.offsetLeft, button.offsetTop])\n+                }\n+            }}\n+            onMouseLeave={() => {\n+                setHovered(false)\n+                if (!isDateLocked) {\n+                    deactivateDate()\n+                }\n+            }}\n+            onClick={\n+                !isDateLocked\n+                    ? lockDate\n+                    : active\n+                    ? unlockDate\n+                    : () => {\n+                          const button = buttonRef.current as HTMLButtonElement\n+                          activateDate(date, [button.offsetLeft, button.offsetTop])\n+                      }\n+            }\n+        >\n+            <LemonBubble\n+                count={annotations.length || <IconPlusMini className=\"w-full h-full\" />}\n+                size=\"small\"\n+                style={active && isDateLocked ? { outline: '0.125rem solid var(--primary)' } : undefined}\n+            />\n+        </button>\n+    )\n+})\n+\n+function AnnotationsPopover(): JSX.Element {\n+    const { popoverAnnotations, activeDate, intervalUnit, isDateLocked, insightId } = useValues(annotationsOverlayLogic)\n+    const { closePopover } = useActions(annotationsOverlayLogic)\n+    const { openModalToCreateAnnotation } = useActions(annotationModalLogic)\n+\n+    return (\n+        <div className=\"AnnotationsPopover\">\n+            <LemonModal\n+                inline\n+                title={`${pluralize(popoverAnnotations.length, 'annotation')} • ${activeDate?.format(\n+                    INTERVAL_UNIT_TO_HUMAN_DAYJS_FORMAT[intervalUnit]\n+                )}`}\n+                footer={\n+                    <LemonButton\n+                        type=\"primary\"\n+                        onClick={() => openModalToCreateAnnotation(activeDate, insightId)}\n+                        disabled={!isDateLocked}\n+                    >\n+                        Add annotation\n+                    </LemonButton>\n+                }\n+                closable={isDateLocked}\n+                onClose={closePopover}\n+                width=\"var(--annotations-popover-width)\"\n+            >\n+                {popoverAnnotations.length > 0 ? (\n+                    <ul className=\"flex flex-col gap-1 w-full overflow-y-auto m-0 p-0\">\n+                        {popoverAnnotations.map((annotation) => (\n+                            <AnnotationCard key={annotation.id} annotation={annotation} />\n+                        ))}\n+                    </ul>\n+                ) : (\n+                    'There are no annotations in this period.'\n+                )}\n+            </LemonModal>\n+        </div>\n+    )\n+}\n+\n+function AnnotationCard({ annotation }: { annotation: AnnotationType }): JSX.Element {\n+    const { insightId } = useValues(annotationsOverlayLogic)\n+    const { deleteAnnotation } = useActions(annotationsModel)\n+    const { openModalToEditAnnotation } = useActions(annotationModalLogic)\n+\n+    return (\n+        <li className=\"AnnotationCard flex flex-col gap-2 w-full p-3 rounded border list-none\">\n+            <div className=\"flex items-center gap-2\">\n+                <h5 className=\"grow m-0 text-muted\">{annotationScopeToLabel[annotation.scope]}</h5>\n+                <LemonButton\n+                    size=\"small\"\n+                    icon={<IconEdit />}\n+                    status=\"muted\"\n+                    tooltip=\"Edit this annotation\"\n+                    onClick={() => openModalToEditAnnotation(annotation, insightId)}\n+                />\n+                <LemonButton\n+                    size=\"small\"\n+                    icon={<IconDelete />}\n+                    status=\"muted\"\n+                    tooltip=\"Delete this annotation\"\n+                    onClick={() => deleteAnnotation(annotation)}\n+                />\n+            </div>\n+            <div>{annotation.content}</div>\n+            <div className=\"leading-6\">\n+                <ProfilePicture\n+                    name={annotation.created_by?.first_name}\n+                    email={annotation.created_by?.email}\n+                    showName\n+                    size=\"md\"\n+                />{' '}\n+                • {humanFriendlyDetailedTime(annotation.created_at)}\n+            </div>\n+        </li>\n+    )\n+}\ndiff --git a/frontend/src/lib/components/Annotations/insightAnnotationsLogic.test.ts b/frontend/src/lib/components/AnnotationsOverlay/annotationsOverlayLogic.test.ts\nsimilarity index 61%\nrename from frontend/src/lib/components/Annotations/insightAnnotationsLogic.test.ts\nrename to frontend/src/lib/components/AnnotationsOverlay/annotationsOverlayLogic.test.ts\nindex ee60ef7c6..39ee777dd 100644\n--- a/frontend/src/lib/components/Annotations/insightAnnotationsLogic.test.ts\n+++ b/frontend/src/lib/components/AnnotationsOverlay/annotationsOverlayLogic.test.ts\n@@ -1,10 +1,11 @@\n import { expectLogic } from 'kea-test-utils'\n+import { MOCK_DEFAULT_TEAM } from 'lib/api.mock'\n import { insightLogic } from 'scenes/insights/insightLogic'\n import { useMocks } from '~/mocks/jest'\n-import { annotationsModel } from '~/models/annotationsModel'\n+import { annotationsModel, deserializeAnnotation } from '~/models/annotationsModel'\n import { initKeaTests } from '~/test/init'\n-import { AnnotationScope, AnnotationType, InsightShortId, IntervalType } from '~/types'\n-import { insightAnnotationsLogic } from './insightAnnotationsLogic'\n+import { AnnotationScope, RawAnnotationType, InsightShortId, IntervalType, AnnotationType } from '~/types'\n+import { annotationsOverlayLogic } from './annotationsOverlayLogic'\n \n jest.spyOn(Storage.prototype, 'getItem')\n \n@@ -25,88 +26,88 @@ const BASE_MOCK_ANNOTATION = {\n     deleted: false,\n }\n \n-/** ID 20 at 2022-08-10T04:00:00.000000Z */\n-const MOCK_ANNOTATION_ORG_SCOPED: AnnotationType = {\n+/** ID 20 at 2022-08-10T04:00:00.000Z */\n+const MOCK_ANNOTATION_ORG_SCOPED: RawAnnotationType = {\n     id: 20,\n     content: 'Alpha',\n-    date_marker: '2022-08-10T04:00:00.000000Z',\n+    date_marker: '2022-08-10T04:00:00.000Z',\n     dashboard_item: null,\n     insight_short_id: null,\n     insight_name: null,\n     scope: AnnotationScope.Organization,\n     ...BASE_MOCK_ANNOTATION,\n }\n-/** ID 10 at 2022-08-10T04:00:01.000000Z */\n-const MOCK_ANNOTATION_ORG_SCOPED_FROM_INSIGHT_3: AnnotationType = {\n+/** ID 10 at 2022-08-10T04:00:01.000Z */\n+const MOCK_ANNOTATION_ORG_SCOPED_FROM_INSIGHT_3: RawAnnotationType = {\n     id: 10,\n     content: 'Alpha',\n-    date_marker: '2022-08-10T04:00:01.000000Z', // A second after MOCK_ANNOTATION_ORG_SCOPED\n+    date_marker: '2022-08-10T04:00:01.000Z', // A second after MOCK_ANNOTATION_ORG_SCOPED\n     dashboard_item: 3,\n     insight_short_id: 'xxxxxx' as InsightShortId,\n     insight_name: 'Clicks',\n     scope: AnnotationScope.Organization,\n     ...BASE_MOCK_ANNOTATION,\n }\n-/** ID 17 at 2022-08-10T04:01:00.000000Z */\n-const MOCK_ANNOTATION_PROJECT_SCOPED: AnnotationType = {\n+/** ID 17 at 2022-08-10T04:01:00.000Z */\n+const MOCK_ANNOTATION_PROJECT_SCOPED: RawAnnotationType = {\n     id: 17,\n     content: 'Beta',\n-    date_marker: '2022-08-10T04:01:00.000000Z', // A minute after MOCK_ANNOTATION_ORG_SCOPED\n+    date_marker: '2022-08-10T04:01:00.000Z', // A minute after MOCK_ANNOTATION_ORG_SCOPED\n     dashboard_item: null,\n     insight_short_id: null,\n     insight_name: null,\n     scope: AnnotationScope.Project,\n     ...BASE_MOCK_ANNOTATION,\n }\n-/** ID 19 at 2022-08-10T05:00:00.000000Z */\n-const MOCK_ANNOTATION_INSIGHT_1_SCOPED: AnnotationType = {\n+/** ID 19 at 2022-08-10T05:00:00.000Z */\n+const MOCK_ANNOTATION_INSIGHT_1_SCOPED: RawAnnotationType = {\n     id: 19,\n     content: 'Theta',\n-    date_marker: '2022-08-10T05:00:00.000000Z', // An hour after MOCK_ANNOTATION_ORG_SCOPED\n+    date_marker: '2022-08-10T05:00:00.000Z', // An hour after MOCK_ANNOTATION_ORG_SCOPED\n     dashboard_item: 1,\n     insight_short_id: MOCK_INSIGHT_SHORT_ID,\n     insight_name: 'Pageviews',\n     scope: AnnotationScope.Insight,\n     ...BASE_MOCK_ANNOTATION,\n }\n-/** ID 20 at 2022-08-11T04:00:00.000000Z */\n-const MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_1: AnnotationType = {\n+/** ID 20 at 2022-08-11T04:00:00.000Z */\n+const MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_1: RawAnnotationType = {\n     id: 20,\n     content: 'Theta',\n-    date_marker: '2022-08-11T04:00:00.000000Z', // A day after MOCK_ANNOTATION_ORG_SCOPED\n+    date_marker: '2022-08-11T04:00:00.000Z', // A day after MOCK_ANNOTATION_ORG_SCOPED\n     dashboard_item: MOCK_INSIGHT_NUMERIC_ID,\n     insight_short_id: MOCK_INSIGHT_SHORT_ID,\n     insight_name: 'Pageviews',\n     scope: AnnotationScope.Project,\n     ...BASE_MOCK_ANNOTATION,\n }\n-/** ID 21 at 2022-08-17T04:00:00.000000Z */\n-const MOCK_ANNOTATION_INSIGHT_3_SCOPED: AnnotationType = {\n+/** ID 21 at 2022-08-17T04:00:00.000Z */\n+const MOCK_ANNOTATION_INSIGHT_3_SCOPED: RawAnnotationType = {\n     id: 21,\n     content: 'Omega',\n-    date_marker: '2022-08-17T04:00:00.000000Z', // A week after MOCK_ANNOTATION_ORG_SCOPED\n+    date_marker: '2022-08-17T04:00:00.000Z', // A week after MOCK_ANNOTATION_ORG_SCOPED\n     dashboard_item: 3,\n     insight_short_id: 'xxxxxx' as InsightShortId,\n     insight_name: 'Clicks',\n     scope: AnnotationScope.Insight,\n     ...BASE_MOCK_ANNOTATION,\n }\n-/** ID 40 at 2022-08-17T04:00:00.000000Z */\n-const MOCK_ANNOTATION_ORG_SCOPED_FROM_INSIGHT_1: AnnotationType = {\n+/** ID 40 at 2022-08-17T04:00:00.000Z */\n+const MOCK_ANNOTATION_ORG_SCOPED_FROM_INSIGHT_1: RawAnnotationType = {\n     id: 40,\n     content: 'Alpha',\n-    date_marker: '2022-08-17T04:00:00.000000Z', // A week after MOCK_ANNOTATION_ORG_SCOPED\n+    date_marker: '2022-08-17T04:00:00.000Z', // A week after MOCK_ANNOTATION_ORG_SCOPED\n     dashboard_item: MOCK_INSIGHT_NUMERIC_ID,\n     insight_short_id: MOCK_INSIGHT_SHORT_ID,\n     insight_name: 'Pageviews',\n     scope: AnnotationScope.Organization,\n     ...BASE_MOCK_ANNOTATION,\n }\n-/** ID 22 at 2022-09-10T04:00:00.000000Z */\n-const MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_3: AnnotationType = {\n+/** ID 22 at 2022-09-10T04:00:00.000Z */\n+const MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_3: RawAnnotationType = {\n     id: 22,\n     content: 'Omega',\n-    date_marker: '2022-09-10T04:00:00.000000Z', // A month after MOCK_ANNOTATION_ORG_SCOPED\n+    date_marker: '2022-09-10T04:00:00.000Z', // A month after MOCK_ANNOTATION_ORG_SCOPED\n     dashboard_item: 3,\n     insight_short_id: 'xxxxxx' as InsightShortId,\n     insight_name: 'Clicks',\n@@ -114,8 +115,7 @@ const MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_3: AnnotationType = {\n     ...BASE_MOCK_ANNOTATION,\n }\n \n-// eslint-disable-next-line @typescript-eslint/explicit-function-return-type\n-function useInsightMock(interval: string = 'day', timezone: string = 'UTC') {\n+function useInsightMocks(interval: string = 'day', timezone: string = 'UTC'): void {\n     const insight = {\n         result: {},\n         id: MOCK_INSIGHT_NUMERIC_ID,\n@@ -142,27 +142,30 @@ function useInsightMock(interval: string = 'day', timezone: string = 'UTC') {\n     })\n }\n \n-describe('insightAnnotationsLogic', () => {\n-    let logic: ReturnType<typeof insightAnnotationsLogic.build>\n+function useAnnotationsMocks(): void {\n+    useMocks({\n+        get: {\n+            '/api/projects/:team_id/annotations/': {\n+                results: [\n+                    MOCK_ANNOTATION_ORG_SCOPED,\n+                    MOCK_ANNOTATION_ORG_SCOPED_FROM_INSIGHT_3,\n+                    MOCK_ANNOTATION_PROJECT_SCOPED,\n+                    MOCK_ANNOTATION_INSIGHT_1_SCOPED,\n+                    MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_1,\n+                    MOCK_ANNOTATION_INSIGHT_3_SCOPED,\n+                    MOCK_ANNOTATION_ORG_SCOPED_FROM_INSIGHT_1,\n+                    MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_3,\n+                ],\n+            },\n+        },\n+    })\n+}\n+\n+describe('annotationsOverlayLogic', () => {\n+    let logic: ReturnType<typeof annotationsOverlayLogic.build>\n \n     beforeEach(() => {\n-        useMocks({\n-            get: {\n-                '/api/projects/:team_id/annotations/': {\n-                    results: [\n-                        MOCK_ANNOTATION_ORG_SCOPED,\n-                        MOCK_ANNOTATION_ORG_SCOPED_FROM_INSIGHT_3,\n-                        MOCK_ANNOTATION_PROJECT_SCOPED,\n-                        MOCK_ANNOTATION_INSIGHT_1_SCOPED,\n-                        MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_1,\n-                        MOCK_ANNOTATION_INSIGHT_3_SCOPED,\n-                        MOCK_ANNOTATION_ORG_SCOPED_FROM_INSIGHT_1,\n-                        MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_3,\n-                    ],\n-                },\n-            },\n-        })\n-        initKeaTests()\n+        useAnnotationsMocks()\n     })\n \n     afterEach(() => {\n@@ -170,9 +173,11 @@ describe('insightAnnotationsLogic', () => {\n     })\n \n     it('loads annotations on mount', async () => {\n-        useInsightMock()\n+        initKeaTests()\n+\n+        useInsightMocks()\n \n-        logic = insightAnnotationsLogic({\n+        logic = annotationsOverlayLogic({\n             dashboardItemId: MOCK_INSIGHT_SHORT_ID,\n             insightNumericId: MOCK_INSIGHT_NUMERIC_ID,\n         })\n@@ -181,10 +186,12 @@ describe('insightAnnotationsLogic', () => {\n     })\n \n     describe('relevantAnnotations', () => {\n+        initKeaTests()\n+\n         it('returns annotations scoped to the insight for a saved insight', async () => {\n-            useInsightMock()\n+            useInsightMocks()\n \n-            logic = insightAnnotationsLogic({\n+            logic = annotationsOverlayLogic({\n                 dashboardItemId: MOCK_INSIGHT_SHORT_ID,\n                 insightNumericId: MOCK_INSIGHT_NUMERIC_ID,\n             })\n@@ -203,14 +210,16 @@ describe('insightAnnotationsLogic', () => {\n                     MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_1,\n                     MOCK_ANNOTATION_ORG_SCOPED_FROM_INSIGHT_1,\n                     MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_3,\n-                ],\n+                ].map((annotation) => deserializeAnnotation(annotation, 'UTC')),\n             })\n         })\n \n         it('returns annotations scoped to the project for a new insight', async () => {\n-            useInsightMock()\n+            initKeaTests()\n+\n+            useInsightMocks()\n \n-            logic = insightAnnotationsLogic({ dashboardItemId: 'new', insightNumericId: 'new' })\n+            logic = annotationsOverlayLogic({ dashboardItemId: 'new', insightNumericId: 'new' })\n             logic.mount()\n             await expectLogic(annotationsModel).toDispatchActions(['loadAnnotationsSuccess'])\n             await expectLogic(insightLogic({ dashboardItemId: MOCK_INSIGHT_SHORT_ID })).toDispatchActions([\n@@ -225,7 +234,7 @@ describe('insightAnnotationsLogic', () => {\n                     MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_1,\n                     MOCK_ANNOTATION_ORG_SCOPED_FROM_INSIGHT_1,\n                     MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_3,\n-                ],\n+                ].map((annotation) => deserializeAnnotation(annotation, 'UTC')),\n             })\n         })\n     })\n@@ -241,11 +250,19 @@ describe('insightAnnotationsLogic', () => {\n                         MOCK_ANNOTATION_ORG_SCOPED,\n                         MOCK_ANNOTATION_ORG_SCOPED_FROM_INSIGHT_3,\n                         MOCK_ANNOTATION_PROJECT_SCOPED,\n-                    ],\n-                    '2022-08-10 05': [MOCK_ANNOTATION_INSIGHT_1_SCOPED],\n-                    '2022-08-11 04': [MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_1],\n-                    '2022-08-17 04': [MOCK_ANNOTATION_ORG_SCOPED_FROM_INSIGHT_1],\n-                    '2022-09-10 04': [MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_3],\n+                    ].map((annotation) => deserializeAnnotation(annotation, 'UTC')),\n+                    '2022-08-10 05': [MOCK_ANNOTATION_INSIGHT_1_SCOPED].map((annotation) =>\n+                        deserializeAnnotation(annotation, 'UTC')\n+                    ),\n+                    '2022-08-11 04': [MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_1].map((annotation) =>\n+                        deserializeAnnotation(annotation, 'UTC')\n+                    ),\n+                    '2022-08-17 04': [MOCK_ANNOTATION_ORG_SCOPED_FROM_INSIGHT_1].map((annotation) =>\n+                        deserializeAnnotation(annotation, 'UTC')\n+                    ),\n+                    '2022-09-10 04': [MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_3].map((annotation) =>\n+                        deserializeAnnotation(annotation, 'UTC')\n+                    ),\n                 },\n                 day: {\n                     '2022-08-10': [\n@@ -253,10 +270,16 @@ describe('insightAnnotationsLogic', () => {\n                         MOCK_ANNOTATION_ORG_SCOPED_FROM_INSIGHT_3,\n                         MOCK_ANNOTATION_PROJECT_SCOPED,\n                         MOCK_ANNOTATION_INSIGHT_1_SCOPED,\n-                    ],\n-                    '2022-08-11': [MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_1],\n-                    '2022-08-17': [MOCK_ANNOTATION_ORG_SCOPED_FROM_INSIGHT_1],\n-                    '2022-09-10': [MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_3],\n+                    ].map((annotation) => deserializeAnnotation(annotation, 'UTC')),\n+                    '2022-08-11': [MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_1].map((annotation) =>\n+                        deserializeAnnotation(annotation, 'UTC')\n+                    ),\n+                    '2022-08-17': [MOCK_ANNOTATION_ORG_SCOPED_FROM_INSIGHT_1].map((annotation) =>\n+                        deserializeAnnotation(annotation, 'UTC')\n+                    ),\n+                    '2022-09-10': [MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_3].map((annotation) =>\n+                        deserializeAnnotation(annotation, 'UTC')\n+                    ),\n                 },\n                 week: {\n                     '2022-08-07': [\n@@ -265,9 +288,13 @@ describe('insightAnnotationsLogic', () => {\n                         MOCK_ANNOTATION_PROJECT_SCOPED,\n                         MOCK_ANNOTATION_INSIGHT_1_SCOPED,\n                         MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_1,\n-                    ],\n-                    '2022-08-14': [MOCK_ANNOTATION_ORG_SCOPED_FROM_INSIGHT_1],\n-                    '2022-09-04': [MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_3],\n+                    ].map((annotation) => deserializeAnnotation(annotation, 'UTC')),\n+                    '2022-08-14': [MOCK_ANNOTATION_ORG_SCOPED_FROM_INSIGHT_1].map((annotation) =>\n+                        deserializeAnnotation(annotation, 'UTC')\n+                    ),\n+                    '2022-09-04': [MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_3].map((annotation) =>\n+                        deserializeAnnotation(annotation, 'UTC')\n+                    ),\n                 },\n                 month: {\n                     '2022-08': [\n@@ -277,8 +304,10 @@ describe('insightAnnotationsLogic', () => {\n                         MOCK_ANNOTATION_INSIGHT_1_SCOPED,\n                         MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_1,\n                         MOCK_ANNOTATION_ORG_SCOPED_FROM_INSIGHT_1,\n-                    ],\n-                    '2022-09': [MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_3],\n+                    ].map((annotation) => deserializeAnnotation(annotation, 'UTC')),\n+                    '2022-09': [MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_3].map((annotation) =>\n+                        deserializeAnnotation(annotation, 'UTC')\n+                    ),\n                 },\n             },\n             'America/Phoenix': {\n@@ -288,11 +317,19 @@ describe('insightAnnotationsLogic', () => {\n                         MOCK_ANNOTATION_ORG_SCOPED,\n                         MOCK_ANNOTATION_ORG_SCOPED_FROM_INSIGHT_3,\n                         MOCK_ANNOTATION_PROJECT_SCOPED,\n-                    ],\n-                    '2022-08-09 22': [MOCK_ANNOTATION_INSIGHT_1_SCOPED],\n-                    '2022-08-10 21': [MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_1],\n-                    '2022-08-16 21': [MOCK_ANNOTATION_ORG_SCOPED_FROM_INSIGHT_1],\n-                    '2022-09-09 21': [MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_3],\n+                    ].map((annotation) => deserializeAnnotation(annotation, 'America/Phoenix')),\n+                    '2022-08-09 22': [MOCK_ANNOTATION_INSIGHT_1_SCOPED].map((annotation) =>\n+                        deserializeAnnotation(annotation, 'America/Phoenix')\n+                    ),\n+                    '2022-08-10 21': [MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_1].map((annotation) =>\n+                        deserializeAnnotation(annotation, 'America/Phoenix')\n+                    ),\n+                    '2022-08-16 21': [MOCK_ANNOTATION_ORG_SCOPED_FROM_INSIGHT_1].map((annotation) =>\n+                        deserializeAnnotation(annotation, 'America/Phoenix')\n+                    ),\n+                    '2022-09-09 21': [MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_3].map((annotation) =>\n+                        deserializeAnnotation(annotation, 'America/Phoenix')\n+                    ),\n                 },\n                 day: {\n                     '2022-08-09': [\n@@ -300,10 +337,16 @@ describe('insightAnnotationsLogic', () => {\n                         MOCK_ANNOTATION_ORG_SCOPED_FROM_INSIGHT_3,\n                         MOCK_ANNOTATION_PROJECT_SCOPED,\n                         MOCK_ANNOTATION_INSIGHT_1_SCOPED,\n-                    ],\n-                    '2022-08-10': [MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_1],\n-                    '2022-08-16': [MOCK_ANNOTATION_ORG_SCOPED_FROM_INSIGHT_1],\n-                    '2022-09-09': [MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_3],\n+                    ].map((annotation) => deserializeAnnotation(annotation, 'America/Phoenix')),\n+                    '2022-08-10': [MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_1].map((annotation) =>\n+                        deserializeAnnotation(annotation, 'America/Phoenix')\n+                    ),\n+                    '2022-08-16': [MOCK_ANNOTATION_ORG_SCOPED_FROM_INSIGHT_1].map((annotation) =>\n+                        deserializeAnnotation(annotation, 'America/Phoenix')\n+                    ),\n+                    '2022-09-09': [MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_3].map((annotation) =>\n+                        deserializeAnnotation(annotation, 'America/Phoenix')\n+                    ),\n                 },\n                 week: {\n                     '2022-08-07': [\n@@ -312,9 +355,13 @@ describe('insightAnnotationsLogic', () => {\n                         MOCK_ANNOTATION_PROJECT_SCOPED,\n                         MOCK_ANNOTATION_INSIGHT_1_SCOPED,\n                         MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_1,\n-                    ],\n-                    '2022-08-14': [MOCK_ANNOTATION_ORG_SCOPED_FROM_INSIGHT_1],\n-                    '2022-09-04': [MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_3],\n+                    ].map((annotation) => deserializeAnnotation(annotation, 'America/Phoenix')),\n+                    '2022-08-14': [MOCK_ANNOTATION_ORG_SCOPED_FROM_INSIGHT_1].map((annotation) =>\n+                        deserializeAnnotation(annotation, 'America/Phoenix')\n+                    ),\n+                    '2022-09-04': [MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_3].map((annotation) =>\n+                        deserializeAnnotation(annotation, 'America/Phoenix')\n+                    ),\n                 },\n                 month: {\n                     '2022-08': [\n@@ -324,8 +371,10 @@ describe('insightAnnotationsLogic', () => {\n                         MOCK_ANNOTATION_INSIGHT_1_SCOPED,\n                         MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_1,\n                         MOCK_ANNOTATION_ORG_SCOPED_FROM_INSIGHT_1,\n-                    ],\n-                    '2022-09': [MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_3],\n+                    ].map((annotation) => deserializeAnnotation(annotation, 'America/Phoenix')),\n+                    '2022-09': [MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_3].map((annotation) =>\n+                        deserializeAnnotation(annotation, 'America/Phoenix')\n+                    ),\n                 },\n             },\n             'Europe/Moscow': {\n@@ -335,11 +384,19 @@ describe('insightAnnotationsLogic', () => {\n                         MOCK_ANNOTATION_ORG_SCOPED,\n                         MOCK_ANNOTATION_ORG_SCOPED_FROM_INSIGHT_3,\n                         MOCK_ANNOTATION_PROJECT_SCOPED,\n-                    ],\n-                    '2022-08-10 08': [MOCK_ANNOTATION_INSIGHT_1_SCOPED],\n-                    '2022-08-11 07': [MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_1],\n-                    '2022-08-17 07': [MOCK_ANNOTATION_ORG_SCOPED_FROM_INSIGHT_1],\n-                    '2022-09-10 07': [MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_3],\n+                    ].map((annotation) => deserializeAnnotation(annotation, 'Europe/Moscow')),\n+                    '2022-08-10 08': [MOCK_ANNOTATION_INSIGHT_1_SCOPED].map((annotation) =>\n+                        deserializeAnnotation(annotation, 'Europe/Moscow')\n+                    ),\n+                    '2022-08-11 07': [MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_1].map((annotation) =>\n+                        deserializeAnnotation(annotation, 'Europe/Moscow')\n+                    ),\n+                    '2022-08-17 07': [MOCK_ANNOTATION_ORG_SCOPED_FROM_INSIGHT_1].map((annotation) =>\n+                        deserializeAnnotation(annotation, 'Europe/Moscow')\n+                    ),\n+                    '2022-09-10 07': [MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_3].map((annotation) =>\n+                        deserializeAnnotation(annotation, 'Europe/Moscow')\n+                    ),\n                 },\n                 day: {\n                     '2022-08-10': [\n@@ -347,10 +404,16 @@ describe('insightAnnotationsLogic', () => {\n                         MOCK_ANNOTATION_ORG_SCOPED_FROM_INSIGHT_3,\n                         MOCK_ANNOTATION_PROJECT_SCOPED,\n                         MOCK_ANNOTATION_INSIGHT_1_SCOPED,\n-                    ],\n-                    '2022-08-11': [MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_1],\n-                    '2022-08-17': [MOCK_ANNOTATION_ORG_SCOPED_FROM_INSIGHT_1],\n-                    '2022-09-10': [MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_3],\n+                    ].map((annotation) => deserializeAnnotation(annotation, 'Europe/Moscow')),\n+                    '2022-08-11': [MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_1].map((annotation) =>\n+                        deserializeAnnotation(annotation, 'Europe/Moscow')\n+                    ),\n+                    '2022-08-17': [MOCK_ANNOTATION_ORG_SCOPED_FROM_INSIGHT_1].map((annotation) =>\n+                        deserializeAnnotation(annotation, 'Europe/Moscow')\n+                    ),\n+                    '2022-09-10': [MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_3].map((annotation) =>\n+                        deserializeAnnotation(annotation, 'Europe/Moscow')\n+                    ),\n                 },\n                 week: {\n                     '2022-08-07': [\n@@ -359,9 +422,13 @@ describe('insightAnnotationsLogic', () => {\n                         MOCK_ANNOTATION_PROJECT_SCOPED,\n                         MOCK_ANNOTATION_INSIGHT_1_SCOPED,\n                         MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_1,\n-                    ],\n-                    '2022-08-14': [MOCK_ANNOTATION_ORG_SCOPED_FROM_INSIGHT_1],\n-                    '2022-09-04': [MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_3],\n+                    ].map((annotation) => deserializeAnnotation(annotation, 'Europe/Moscow')),\n+                    '2022-08-14': [MOCK_ANNOTATION_ORG_SCOPED_FROM_INSIGHT_1].map((annotation) =>\n+                        deserializeAnnotation(annotation, 'Europe/Moscow')\n+                    ),\n+                    '2022-09-04': [MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_3].map((annotation) =>\n+                        deserializeAnnotation(annotation, 'Europe/Moscow')\n+                    ),\n                 },\n                 month: {\n                     '2022-08': [\n@@ -371,8 +438,10 @@ describe('insightAnnotationsLogic', () => {\n                         MOCK_ANNOTATION_INSIGHT_1_SCOPED,\n                         MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_1,\n                         MOCK_ANNOTATION_ORG_SCOPED_FROM_INSIGHT_1,\n-                    ],\n-                    '2022-09': [MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_3],\n+                    ].map((annotation) => deserializeAnnotation(annotation, 'Europe/Moscow')),\n+                    '2022-09': [MOCK_ANNOTATION_PROJECT_SCOPED_FROM_INSIGHT_3].map((annotation) =>\n+                        deserializeAnnotation(annotation, 'Europe/Moscow')\n+                    ),\n                 },\n             },\n         }\n@@ -382,9 +451,11 @@ describe('insightAnnotationsLogic', () => {\n         )) {\n             for (const [interval, expectedGrouping] of Object.entries(intervalAndExpectedGroupings)) {\n                 it(`groups correctly by ${interval} with ${timezone} as insight timezone`, async () => {\n-                    useInsightMock(interval, timezone)\n+                    initKeaTests(true, { ...MOCK_DEFAULT_TEAM, timezone })\n+\n+                    useInsightMocks(interval, timezone)\n \n-                    logic = insightAnnotationsLogic({\n+                    logic = annotationsOverlayLogic({\n                         dashboardItemId: MOCK_INSIGHT_SHORT_ID,\n                         insightNumericId: MOCK_INSIGHT_NUMERIC_ID,\n                     })\ndiff --git a/frontend/src/lib/components/Annotations/insightAnnotationsLogic.ts b/frontend/src/lib/components/AnnotationsOverlay/annotationsOverlayLogic.ts\nsimilarity index 52%\nrename from frontend/src/lib/components/Annotations/insightAnnotationsLogic.ts\nrename to frontend/src/lib/components/AnnotationsOverlay/annotationsOverlayLogic.ts\nindex fd14b2072..ec46629e2 100644\n--- a/frontend/src/lib/components/Annotations/insightAnnotationsLogic.ts\n+++ b/frontend/src/lib/components/AnnotationsOverlay/annotationsOverlayLogic.ts\n@@ -1,8 +1,8 @@\n-import { dayjs } from 'lib/dayjs'\n-import { kea, path, selectors, key, props, connect, listeners, actions } from 'kea'\n+import { Dayjs } from 'lib/dayjs'\n+import { kea, path, selectors, key, props, connect, listeners, actions, reducers } from 'kea'\n import { groupBy } from 'lib/utils'\n import { AnnotationScope, InsightModel, IntervalType } from '~/types'\n-import type { insightAnnotationsLogicType } from './insightAnnotationsLogicType'\n+import type { annotationsOverlayLogicType } from './annotationsOverlayLogicType'\n import { insightLogic } from 'scenes/insights/insightLogic'\n import { AnnotationDataWithoutInsight, annotationsModel } from '~/models/annotationsModel'\n \n@@ -11,23 +11,69 @@ export interface InsightAnnotationsLogicProps {\n     insightNumericId: InsightModel['id'] | 'new'\n }\n \n-const INTERVAL_UNIT_TO_DAYJS_FORMAT: Record<IntervalType, string> = {\n+/** Internal format for annotation groups. */\n+const INTERVAL_UNIT_TO_INTERNAL_DAYJS_FORMAT: Record<IntervalType, string> = {\n     hour: 'YYYY-MM-DD HH',\n     day: 'YYYY-MM-DD',\n     week: 'YYYY-MM-DD',\n     month: 'YYYY-MM',\n }\n \n-export const insightAnnotationsLogic = kea<insightAnnotationsLogicType>([\n-    path((key) => ['lib', 'components', 'Annotations', 'insightAnnotationsLogic', key]),\n+export function determineAnnotationsDateGroup(date: Dayjs, intervalUnit: IntervalType): string {\n+    // FIXME: Account for ticks sometimes including more than one group in dense graphs\n+    return date.startOf(intervalUnit).format(INTERVAL_UNIT_TO_INTERNAL_DAYJS_FORMAT[intervalUnit])\n+}\n+\n+export const annotationsOverlayLogic = kea<annotationsOverlayLogicType>([\n+    path((key) => ['lib', 'components', 'Annotations', 'annotationsOverlayLogic', key]),\n     props({} as InsightAnnotationsLogicProps),\n     key(({ insightNumericId }) => insightNumericId),\n     connect({\n-        values: [insightLogic, ['intervalUnit', 'timezone'], annotationsModel, ['annotations', 'annotationsLoading']],\n+        values: [\n+            insightLogic,\n+            ['intervalUnit', 'timezone', 'insightId'],\n+            annotationsModel,\n+            ['annotations', 'annotationsLoading'],\n+        ],\n         actions: [annotationsModel, ['createAnnotationGenerically', 'updateAnnotation', 'deleteAnnotation']],\n     }),\n     actions({\n         createAnnotation: (annotationData: AnnotationDataWithoutInsight) => ({ annotationData }),\n+        activateDate: (date: Dayjs, badgeCoordinates: [number, number]) => ({ date, badgeCoordinates }),\n+        deactivateDate: true,\n+        lockDate: true,\n+        unlockDate: true,\n+        closePopover: true,\n+    }),\n+    reducers({\n+        isPopoverShown: [\n+            false,\n+            {\n+                activateDate: () => true,\n+                deactivateDate: () => false,\n+                closePopover: () => false,\n+            },\n+        ],\n+        activeDate: [\n+            null as Dayjs | null,\n+            {\n+                activateDate: (_, { date }) => date,\n+            },\n+        ],\n+        activeBadgeCoordinates: [\n+            null as [number, number] | null,\n+            {\n+                activateDate: (_, { badgeCoordinates }) => badgeCoordinates,\n+            },\n+        ],\n+        isDateLocked: [\n+            false,\n+            {\n+                lockDate: () => true,\n+                unlockDate: () => false,\n+                closePopover: () => false,\n+            },\n+        ],\n     }),\n     listeners(({ actions, props }) => ({\n         createAnnotation: async ({ annotationData }) => {\n@@ -53,15 +99,20 @@ export const insightAnnotationsLogic = kea<insightAnnotationsLogicType>([\n         groupedAnnotations: [\n             (s) => [s.relevantAnnotations, s.intervalUnit, s.timezone],\n             (annotations, intervalUnit, timezone) => {\n-                const format = INTERVAL_UNIT_TO_DAYJS_FORMAT[intervalUnit]\n                 return groupBy(annotations, (annotation) => {\n-                    let datetime = dayjs.utc(annotation['date_marker'])\n+                    let datetime = annotation.date_marker.utc()\n                     if (timezone !== 'UTC') {\n                         datetime = datetime.tz(timezone) // If the target is non-UTC, perform conversion\n                     }\n-                    return datetime.startOf(intervalUnit).format(format)\n+                    return determineAnnotationsDateGroup(datetime, intervalUnit)\n                 })\n             },\n         ],\n+        popoverAnnotations: [\n+            (s) => [s.groupedAnnotations, s.activeDate, s.intervalUnit],\n+            (groupedAnnotations, activeDate, intervalUnit) => {\n+                return (activeDate && groupedAnnotations[determineAnnotationsDateGroup(activeDate, intervalUnit)]) || []\n+            },\n+        ],\n     })),\n ])\ndiff --git a/frontend/src/lib/components/AnnotationsOverlay/index.ts b/frontend/src/lib/components/AnnotationsOverlay/index.ts\nnew file mode 100644\nindex 000000000..260367f26\n--- /dev/null\n+++ b/frontend/src/lib/components/AnnotationsOverlay/index.ts\n@@ -0,0 +1,2 @@\n+export * from './AnnotationsOverlay'\n+export * from './annotationsOverlayLogic'\ndiff --git a/frontend/src/lib/components/AnnotationsOverlay/useAnnotationsPositioning.ts b/frontend/src/lib/components/AnnotationsOverlay/useAnnotationsPositioning.ts\nnew file mode 100644\nindex 000000000..b716f7a09\n--- /dev/null\n+++ b/frontend/src/lib/components/AnnotationsOverlay/useAnnotationsPositioning.ts\n@@ -0,0 +1,39 @@\n+import { Chart } from 'chart.js'\n+import { useMemo } from 'react'\n+\n+export interface AnnotationsPositioning {\n+    tickIntervalPx: number\n+    firstTickLeftPx: number\n+}\n+\n+export function useAnnotationsPositioning(\n+    chart: Chart | undefined,\n+    chartWidth: number,\n+    chartHeight: number\n+): AnnotationsPositioning {\n+    // Calculate chart content coordinates for annotations overlay positioning\n+    return useMemo<AnnotationsPositioning>(() => {\n+        if (chart && chart.scales.x.ticks.length > 1) {\n+            const tickCount = chart.scales.x.ticks.length\n+            // NOTE: If there are lots of points on the X axis, Chart.js only renders a tick once n data points\n+            // so that the axis is readable. We use that mechanism to aggregate annotations for readability too.\n+            // We use the internal _metasets instead just taking graph area width, because it's NOT guaranteed that the\n+            // last tick is positioned at the right edge of the graph area. We need to find out where it is.\n+            // @ts-expect-error - _metasets is not officially exposed\n+            const points = chart._metasets[0].data as Point[]\n+            const firstTickPointIndex = chart.scales.x.ticks[0].value\n+            const lastTickPointIndex = chart.scales.x.ticks[tickCount - 1].value\n+            const firstTickLeftPx = points[firstTickPointIndex].x\n+            const lastTickLeftPx = points[lastTickPointIndex].x\n+            return {\n+                tickIntervalPx: (lastTickLeftPx - firstTickLeftPx) / (tickCount - 1),\n+                firstTickLeftPx,\n+            }\n+        } else {\n+            return {\n+                tickIntervalPx: 0,\n+                firstTickLeftPx: 0,\n+            }\n+        }\n+    }, [chart, chartWidth, chartHeight])\n+}\ndiff --git a/frontend/src/lib/components/InsightCard/InsightCard.scss b/frontend/src/lib/components/InsightCard/InsightCard.scss\nindex b51cd4a6a..9c9aa9bed 100644\n--- a/frontend/src/lib/components/InsightCard/InsightCard.scss\n+++ b/frontend/src/lib/components/InsightCard/InsightCard.scss\n@@ -36,11 +36,9 @@\n     min-height: 0;\n     width: 100%;\n     overflow: auto;\n-    .graph-container {\n+    .LineGraph,\n+    .AnnotationsOverlay {\n         padding: 1rem;\n-        .annotations-root {\n-            margin: 1rem;\n-        }\n     }\n     .insight-empty-state {\n         padding-top: 0;\ndiff --git a/frontend/src/lib/components/LemonBubble/LemonBubble.scss b/frontend/src/lib/components/LemonBubble/LemonBubble.scss\nindex 426207334..cc36b79be 100644\n--- a/frontend/src/lib/components/LemonBubble/LemonBubble.scss\n+++ b/frontend/src/lib/components/LemonBubble/LemonBubble.scss\n@@ -1,6 +1,6 @@\n .LemonBubble {\n-    --lemon-counter-size: 1.2rem;\n-    --lemon-counter-font-size: 0.6rem;\n+    --lemon-counter-size: 1.25rem;\n+    --lemon-counter-font-size: 0.75rem;\n     --scale-small: 0.8;\n     --scale-large: 1.2;\n     --position-offset: 0.5rem;\n@@ -16,6 +16,7 @@\n     height: var(--lemon-counter-size);\n     font-size: var(--lemon-counter-font-size);\n     line-height: var(--lemon-counter-size);\n+    padding: 0;\n     border-radius: 100%;\n     box-sizing: content-box;\n     user-select: none;\n@@ -76,7 +77,7 @@\n     &.LemonBubble--enter-active {\n         transform: scale(1);\n         opacity: 1;\n-        transition: all 150ms ease-out;\n+        transition: all 200ms ease-out;\n     }\n \n     &.LemonBubble--exit {\n@@ -87,6 +88,6 @@\n     &.LemonBubble--exit-active {\n         transform: scale(0.5);\n         opacity: 0;\n-        transition: all 150ms ease-in;\n+        transition: all 200ms ease-in;\n     }\n }\ndiff --git a/frontend/src/lib/components/LemonBubble/LemonBubble.stories.tsx b/frontend/src/lib/components/LemonBubble/LemonBubble.stories.tsx\nindex 6ed5a0cca..96447d30d 100644\n--- a/frontend/src/lib/components/LemonBubble/LemonBubble.stories.tsx\n+++ b/frontend/src/lib/components/LemonBubble/LemonBubble.stories.tsx\n@@ -9,7 +9,7 @@ export default {\n } as ComponentMeta<typeof LemonBubble>\n \n const Template: ComponentStory<typeof LemonBubble> = ({ count, ...props }: LemonBubbleProps) => {\n-    const [countOverride, setCount] = useState(count)\n+    const [countOverride, setCount] = useState(count as number)\n \n     return (\n         <>\ndiff --git a/frontend/src/lib/components/LemonBubble/LemonBubble.tsx b/frontend/src/lib/components/LemonBubble/LemonBubble.tsx\nindex e296ce877..275ea7bf4 100644\n--- a/frontend/src/lib/components/LemonBubble/LemonBubble.tsx\n+++ b/frontend/src/lib/components/LemonBubble/LemonBubble.tsx\n@@ -4,31 +4,48 @@ import { CSSTransition } from 'react-transition-group'\n import './LemonBubble.scss'\n \n export interface LemonBubbleProps {\n-    count?: number\n+    count?: number | JSX.Element\n     size?: 'small' | 'medium' | 'large'\n     position?: 'none' | 'top-left' | 'top-right' | 'bottom-left' | 'bottom-right'\n     showZero?: boolean\n+    borderless?: boolean\n+    className?: string\n+    style?: React.CSSProperties\n }\n \n /** An icon-sized Bubble for displaying a count.\n  *\n- *  Numbers up to 9 are displayed in full, in integer form, with 9+ for higher values\n+ * Numbers up to 9 are displayed in full, in integer form, with 9+ for higher values.\n+ * JSX elements are rendered outright to support use cases where the badge is meant to show an icon.\n+ * If `showZero` is set to `true`, the component won't be hidden if the count is 0.\n  */\n export function LemonBubble({\n     count,\n     size = 'medium',\n     position = 'none',\n     showZero = false,\n+    className,\n+    ...spanProps\n }: LemonBubbleProps): JSX.Element {\n     // NOTE: We use 1 for the text if not showing so the fade out animation looks right\n-    const text = typeof count === 'number' && count !== 0 ? (count < 10 ? String(count) : '9+') : showZero ? '0' : '1'\n+    const text =\n+        typeof count === 'object'\n+            ? count\n+            : typeof count === 'number' && count !== 0\n+            ? count < 10\n+                ? String(count)\n+                : '9+'\n+            : showZero\n+            ? '0'\n+            : '1'\n     const hide = count === undefined || (count == 0 && !showZero)\n \n     return (\n         <CSSTransition in={!hide} timeout={150} classNames=\"LemonBubble-\" mountOnEnter unmountOnExit>\n             <span\n-                className={clsx('LemonBubble', `LemonBubble--${size}`, `LemonBubble--position-${position}`)}\n+                className={clsx('LemonBubble', `LemonBubble--${size}`, `LemonBubble--position-${position}`, className)}\n                 title={String(count)}\n+                {...spanProps}\n             >\n                 {text}\n             </span>\ndiff --git a/frontend/src/lib/components/LemonButton/LemonButton.scss b/frontend/src/lib/components/LemonButton/LemonButton.scss\nindex 466d89f16..1a4b97776 100644\n--- a/frontend/src/lib/components/LemonButton/LemonButton.scss\n+++ b/frontend/src/lib/components/LemonButton/LemonButton.scss\n@@ -17,7 +17,7 @@\n     line-height: 1.5rem;\n     font-weight: 500;\n     cursor: pointer;\n-    -webkit-appearance: none !important; // Important as this gets overridden by Antd styles...\n+    -webkit-appearance: none !important; // Important as this gets overridden by Ant styles...\n \n     &:disabled {\n         opacity: var(--opacity-disabled);\n@@ -139,7 +139,7 @@\n         }\n     }\n \n-    @each $status in ('default', 'primary', 'danger', 'primary-alt') {\n+    @each $status in ('default', 'primary', 'danger', 'primary-alt', 'muted') {\n         &.LemonButton--status-#{$status} {\n             color: var(--#{$status}, var(--primary));\n \n@@ -162,25 +162,24 @@\n             &.LemonButton--primary {\n                 color: var(--white);\n                 background: var(--#{$status});\n-\n                 .LemonIcon {\n                     color: var(--white);\n                 }\n+\n                 &:not(:disabled):hover,\n                 &.LemonButton--active {\n                     color: var(--white);\n                     background: var(--#{$status}-light, var(--#{$status}));\n-\n                     .LemonIcon {\n                         color: var(--white);\n                     }\n                 }\n                 &:not(:disabled):active {\n+                    background: var(--#{$status}-dark, var(--#{$status}));\n                     color: var(--white);\n                     .LemonIcon {\n                         color: var(--white);\n                     }\n-                    background: var(--#{$status}-dark, var(--#{$status}));\n                 }\n             }\n \ndiff --git a/frontend/src/lib/components/LemonLabel/LemonLabel.scss b/frontend/src/lib/components/LemonLabel/LemonLabel.scss\nindex 9b00d5ea7..eb007d1ea 100644\n--- a/frontend/src/lib/components/LemonLabel/LemonLabel.scss\n+++ b/frontend/src/lib/components/LemonLabel/LemonLabel.scss\n@@ -4,7 +4,7 @@\n     gap: 0.25rem;\n     font-weight: 600;\n \n-    > span {\n+    .LemonLabel__extra {\n         font-weight: 400;\n     }\n }\ndiff --git a/frontend/src/lib/components/LemonLabel/LemonLabel.tsx b/frontend/src/lib/components/LemonLabel/LemonLabel.tsx\nindex f4d8f2524..cc635dd9d 100644\n--- a/frontend/src/lib/components/LemonLabel/LemonLabel.tsx\n+++ b/frontend/src/lib/components/LemonLabel/LemonLabel.tsx\n@@ -15,7 +15,7 @@ export function LemonLabel({ children, info, className, showOptional, ...props }\n         <label className={clsx('LemonLabel', className)} {...props}>\n             {children}\n \n-            {showOptional ? <span>(optional)</span> : null}\n+            {showOptional ? <span className=\"LemonLabel__extra\">(optional)</span> : null}\n \n             {info ? (\n                 <Tooltip title={info}>\ndiff --git a/frontend/src/lib/components/LemonModal/LemonModal.scss b/frontend/src/lib/components/LemonModal/LemonModal.scss\nindex e5832c1e7..1aa09a655 100644\n--- a/frontend/src/lib/components/LemonModal/LemonModal.scss\n+++ b/frontend/src/lib/components/LemonModal/LemonModal.scss\n@@ -29,16 +29,14 @@\n \n .LemonModal {\n     position: relative;\n-    display: inline-block;\n     max-width: 80%;\n-    min-width: 480px;\n+    min-width: 30rem;\n     width: min-content;\n     margin: 1rem auto;\n     border-radius: var(--radius);\n     background-color: #fff;\n     border: 1px solid var(--border);\n-    box-shadow: 0 16px 16px -16px rgba(0, 0, 0, 0.35);\n-\n+    box-shadow: var(--shadow-elevation);\n     transition: opacity var(--modal-transition-time) ease-out, transform var(--modal-transition-time) ease-out;\n     display: flex;\n     flex-direction: col;\ndiff --git a/frontend/src/lib/components/LemonModal/LemonModal.tsx b/frontend/src/lib/components/LemonModal/LemonModal.tsx\nindex 5100c8669..ba5dfb704 100644\n--- a/frontend/src/lib/components/LemonModal/LemonModal.tsx\n+++ b/frontend/src/lib/components/LemonModal/LemonModal.tsx\n@@ -16,8 +16,8 @@ export type LemonModalFooterProps = {\n \n export interface LemonModalProps {\n     children?: React.ReactNode\n-    isOpen: boolean\n-    onClose: () => void\n+    isOpen?: boolean\n+    onClose?: () => void\n     onAfterClose?: () => void\n     width?: number | string\n     inline?: boolean\n@@ -27,6 +27,8 @@ export interface LemonModalProps {\n     /** When enabled, the modal content will only include children allowing greater customisation */\n     simple?: boolean\n     closable?: boolean\n+    contentRef?: React.RefCallback<HTMLDivElement>\n+    overlayRef?: React.RefCallback<HTMLDivElement>\n }\n \n export const LemonModalHeader = ({ children, className }: LemonModalContentProps): JSX.Element => {\n@@ -44,7 +46,7 @@ export const LemonModalContent = ({ children, className }: LemonModalContentProp\n export function LemonModal({\n     width,\n     children,\n-    isOpen,\n+    isOpen = true,\n     onClose,\n     onAfterClose,\n     title,\n@@ -53,6 +55,8 @@ export function LemonModal({\n     inline,\n     simple,\n     closable = true,\n+    contentRef,\n+    overlayRef,\n }: LemonModalProps): JSX.Element {\n     const modalContent = (\n         <>\n@@ -94,7 +98,10 @@ export function LemonModal({\n         </>\n     )\n     return inline ? (\n-        <div className=\"LemonModal ReactModal__Content--after-open\">{modalContent}</div>\n+        // eslint-disable-next-line react/forbid-dom-props\n+        <div className=\"LemonModal ReactModal__Content--after-open\" style={{ width }}>\n+            {modalContent}\n+        </div>\n     ) : (\n         <Modal\n             isOpen={isOpen}\n@@ -111,6 +118,8 @@ export function LemonModal({\n                 },\n             }}\n             appElement={document.getElementById('root') as HTMLElement}\n+            contentRef={contentRef}\n+            overlayRef={overlayRef}\n         >\n             {modalContent}\n         </Modal>\ndiff --git a/frontend/src/lib/hooks/useEscapeKey.js b/frontend/src/lib/hooks/useEscapeKey.js\ndeleted file mode 100644\nindex 7f719226b..000000000\n--- a/frontend/src/lib/hooks/useEscapeKey.js\n+++ /dev/null\n@@ -1,22 +0,0 @@\n-import { useCallback, useEffect } from 'react'\n-\n-export function useEscapeKey(callback, deps = []) {\n-    const escFunction = useCallback(\n-        (event) => {\n-            if (event.keyCode === 27) {\n-                callback()\n-            }\n-        },\n-\n-        deps\n-    )\n-\n-    useEffect(\n-        () => {\n-            document.addEventListener('keydown', escFunction, false)\n-            return () => document.removeEventListener('keydown', escFunction, false)\n-        },\n-\n-        deps\n-    )\n-}\ndiff --git a/frontend/src/lib/hooks/useOutsideClickHandler.ts b/frontend/src/lib/hooks/useOutsideClickHandler.ts\nindex aaaf857d4..c4d042d76 100644\n--- a/frontend/src/lib/hooks/useOutsideClickHandler.ts\n+++ b/frontend/src/lib/hooks/useOutsideClickHandler.ts\n@@ -4,7 +4,7 @@ const exceptions = ['.ant-select-dropdown *', '.click-outside-block', '.click-ou\n \n export function useOutsideClickHandler(\n     refOrRefs: string | React.MutableRefObject<any> | (React.MutableRefObject<any> | string)[],\n-    handleClickOutside?: (event: Event) => void,\n+    handleClickOutside: (event: Event) => void,\n     extraDeps: any[] = [],\n     exceptTagNames?: string[] // list of tag names that don't trigger the callback even if outside\n ): void {\ndiff --git a/frontend/src/lib/utils.tsx b/frontend/src/lib/utils.tsx\nindex 978b008ec..bcc9867fb 100644\n--- a/frontend/src/lib/utils.tsx\n+++ b/frontend/src/lib/utils.tsx\n@@ -1352,10 +1352,6 @@ export function isGroupType(actor: ActorType): actor is GroupActorType {\n     return actor.type === 'group'\n }\n \n-export function mapRange(value: number, x1: number, y1: number, x2: number, y2: number): number {\n-    return Math.floor(((value - x1) * (y2 - x2)) / (y1 - x1) + x2)\n-}\n-\n export function getEventNamesForAction(actionId: string | number, allActions: ActionType[]): string[] {\n     const id = parseInt(String(actionId))\n     return allActions\ndiff --git a/frontend/src/models/annotationsModel.ts b/frontend/src/models/annotationsModel.ts\nindex d88ee71c9..4ae6fee8e 100644\n--- a/frontend/src/models/annotationsModel.ts\n+++ b/frontend/src/models/annotationsModel.ts\n@@ -1,24 +1,41 @@\n-import { actions, afterMount, kea, listeners, path, reducers } from 'kea'\n+import { actions, afterMount, connect, kea, listeners, path, reducers, selectors } from 'kea'\n import api from 'lib/api'\n import { deleteWithUndo } from 'lib/utils'\n import type { annotationsModelType } from './annotationsModelType'\n-import { AnnotationType } from '~/types'\n+import { RawAnnotationType, AnnotationType } from '~/types'\n import { loaders } from 'kea-loaders'\n+import { teamLogic } from 'scenes/teamLogic'\n+import { dayjs } from 'lib/dayjs'\n \n-export type AnnotationData = Pick<AnnotationType, 'date_marker' | 'scope' | 'content' | 'dashboard_item'>\n+export type AnnotationData = Pick<RawAnnotationType, 'date_marker' | 'scope' | 'content' | 'dashboard_item'>\n export type AnnotationDataWithoutInsight = Omit<AnnotationData, 'dashboard_item'>\n \n+export function deserializeAnnotation(annotation: RawAnnotationType, projectTimezone: string): AnnotationType {\n+    return {\n+        ...annotation,\n+        date_marker: dayjs(annotation.date_marker).tz(projectTimezone),\n+    }\n+}\n+\n+export function serializeAnnotation(annotation: AnnotationType): RawAnnotationType {\n+    return {\n+        ...annotation,\n+        date_marker: annotation.date_marker.toISOString(),\n+    }\n+}\n+\n export const annotationsModel = kea<annotationsModelType>([\n     path(['models', 'annotationsModel']),\n+    connect({ values: [teamLogic, ['timezone']] }),\n     actions({\n         deleteAnnotation: (annotation: AnnotationType) => ({ annotation }),\n         loadAnnotationsNext: () => true,\n         setNext: (next: string | null) => ({ next }),\n-        appendAnnotations: (annotations: AnnotationType[]) => ({ annotations }),\n-        replaceAnnotation: (annotation: AnnotationType) => ({ annotation }),\n+        appendAnnotations: (annotations: RawAnnotationType[]) => ({ annotations }),\n+        replaceAnnotation: (annotation: RawAnnotationType) => ({ annotation }),\n     }),\n     loaders(({ values, actions }) => ({\n-        annotations: {\n+        rawAnnotations: {\n             __default: [],\n             loadAnnotations: async () => {\n                 const response = await api.annotations.list()\n@@ -33,7 +50,7 @@ export const annotationsModel = kea<annotationsModelType>([\n                 annotationId,\n                 annotationData,\n             }: {\n-                annotationId: AnnotationType['id']\n+                annotationId: RawAnnotationType['id']\n                 annotationData: AnnotationDataWithoutInsight\n             }) => {\n                 const updatedAnnotation = await api.annotations.update(annotationId, annotationData)\n@@ -45,7 +62,7 @@ export const annotationsModel = kea<annotationsModelType>([\n                     object: { name: `${annotation.date_marker} annotation`, ...annotation },\n                     callback: (undo, annotation) => {\n                         if (undo) {\n-                            actions.appendAnnotations([annotation])\n+                            actions.appendAnnotations([serializeAnnotation(annotation)])\n                         }\n                     },\n                 })\n@@ -54,8 +71,8 @@ export const annotationsModel = kea<annotationsModelType>([\n         },\n     })),\n     reducers(() => ({\n-        annotations: [\n-            [] as AnnotationType[],\n+        rawAnnotations: [\n+            [] as RawAnnotationType[],\n             {\n                 appendAnnotations: (state, { annotations }) => [...state, ...annotations],\n                 replaceAnnotation: (state, { annotation }) => {\n@@ -80,9 +97,18 @@ export const annotationsModel = kea<annotationsModelType>([\n             },\n         ],\n     })),\n+    selectors({\n+        annotations: [\n+            (s) => [s.rawAnnotations, s.timezone],\n+            (rawAnnotations, timezone) => {\n+                return rawAnnotations.map((annotation): AnnotationType => deserializeAnnotation(annotation, timezone))\n+            },\n+        ],\n+        annotationsLoading: [(s) => [s.rawAnnotationsLoading], (rawAnnotationsLoading) => rawAnnotationsLoading],\n+    }),\n     listeners(({ actions, values }) => ({\n         loadAnnotationsNext: async () => {\n-            let results: AnnotationType[] = []\n+            let results: RawAnnotationType[] = []\n             if (values.next) {\n                 const response = await api.get(values.next)\n                 actions.setNext(response.next)\ndiff --git a/frontend/src/scenes/annotations/AnnotationModal.tsx b/frontend/src/scenes/annotations/AnnotationModal.tsx\nindex f6986c829..aa165646d 100644\n--- a/frontend/src/scenes/annotations/AnnotationModal.tsx\n+++ b/frontend/src/scenes/annotations/AnnotationModal.tsx\n@@ -1,21 +1,29 @@\n-import { LemonButton, LemonModal, LemonSelect, LemonTextArea } from '@posthog/lemon-ui'\n+import { LemonButton, LemonModal, LemonModalProps, LemonSelect, LemonTextArea, Link } from '@posthog/lemon-ui'\n import { useActions, useValues } from 'kea'\n import { Form } from 'kea-forms'\n import { Field } from 'lib/forms/Field'\n import { DatePicker } from 'lib/components/DatePicker'\n import React from 'react'\n-import { annotationScopeToName, annotationsPageLogic, ANNOTATION_DAYJS_FORMAT } from './annotationsPageLogic'\n+import { annotationScopeToName, annotationModalLogic, ANNOTATION_DAYJS_FORMAT } from './annotationModalLogic'\n import { AnnotationScope } from '~/types'\n import { IconWarning } from 'lib/components/icons'\n+import { shortTimeZone } from 'lib/utils'\n+import { urls } from 'scenes/urls'\n \n-export function AnnotationModal(): JSX.Element {\n-    const { isModalOpen, existingModalAnnotation, isAnnotationModalSubmitting } = useValues(annotationsPageLogic)\n-    const { closeModal, deleteAnnotation, submitAnnotationModal } = useActions(annotationsPageLogic)\n+export function AnnotationModal({\n+    overlayRef,\n+    contentRef,\n+}: Pick<LemonModalProps, 'overlayRef' | 'contentRef'>): JSX.Element {\n+    const { isModalOpen, existingModalAnnotation, isAnnotationModalSubmitting, onSavedInsight, timezone } =\n+        useValues(annotationModalLogic)\n+    const { closeModal, deleteAnnotation, submitAnnotationModal } = useActions(annotationModalLogic)\n \n     const isInsightScoped = existingModalAnnotation?.scope === AnnotationScope.Insight\n \n     return (\n         <LemonModal\n+            overlayRef={overlayRef}\n+            contentRef={contentRef}\n             isOpen={isModalOpen}\n             onClose={closeModal}\n             title={existingModalAnnotation ? 'Edit annotation' : 'New annotation'}\n@@ -56,14 +64,26 @@ export function AnnotationModal(): JSX.Element {\n             }\n         >\n             <Form\n-                logic={annotationsPageLogic}\n+                logic={annotationModalLogic}\n                 formKey=\"annotationModal\"\n                 id=\"annotation-modal-form\"\n                 enableFormOnSubmit\n                 className=\"space-y-4\"\n             >\n                 <div className=\"flex gap-2\">\n-                    <Field name=\"dateMarker\" label=\"Date and time\" className=\"flex-1\">\n+                    <Field\n+                        name=\"dateMarker\"\n+                        label={\n+                            <span>\n+                                Date and time (\n+                                <Link to={urls.projectSettings('timezone')} target=\"_blank\">\n+                                    {shortTimeZone(timezone)}\n+                                </Link>\n+                                )\n+                            </span>\n+                        }\n+                        className=\"flex-1\"\n+                    >\n                         <DatePicker\n                             className=\"h-10\"\n                             allowClear={false}\n@@ -75,7 +95,7 @@ export function AnnotationModal(): JSX.Element {\n                     <Field name=\"scope\" label=\"Scope\" className=\"flex-1\">\n                         <LemonSelect\n                             options={[\n-                                ...(existingModalAnnotation?.scope === AnnotationScope.Insight\n+                                ...(existingModalAnnotation?.scope === AnnotationScope.Insight || onSavedInsight\n                                     ? [\n                                           {\n                                               value: AnnotationScope.Insight,\ndiff --git a/frontend/src/scenes/annotations/Annotations.tsx b/frontend/src/scenes/annotations/Annotations.tsx\nindex 3f0f3984c..1bf090c1b 100644\n--- a/frontend/src/scenes/annotations/Annotations.tsx\n+++ b/frontend/src/scenes/annotations/Annotations.tsx\n@@ -3,13 +3,12 @@ import { useValues, useActions } from 'kea'\n import {\n     annotationScopeToLevel,\n     annotationScopeToName,\n-    annotationsPageLogic,\n+    annotationModalLogic,\n     ANNOTATION_DAYJS_FORMAT,\n-} from './annotationsPageLogic'\n+} from './annotationModalLogic'\n import { PageHeader } from 'lib/components/PageHeader'\n-import { AnnotationType, AnnotationScope, InsightShortId } from '~/types'\n+import { AnnotationScope, InsightShortId, AnnotationType } from '~/types'\n import { SceneExport } from 'scenes/sceneTypes'\n-import { dayjs } from 'lib/dayjs'\n import { LemonTable, LemonTableColumns, LemonTableColumn } from 'lib/components/LemonTable'\n import { createdAtColumn, createdByColumn } from 'lib/components/LemonTable/columnUtils'\n import { LemonButton } from 'lib/components/LemonButton'\n@@ -21,18 +20,19 @@ import { Tooltip } from 'lib/components/Tooltip'\n import { teamLogic } from 'scenes/teamLogic'\n import { organizationLogic } from 'scenes/organizationLogic'\n import { AnnotationModal } from './AnnotationModal'\n+import { shortTimeZone } from 'lib/utils'\n \n export const scene: SceneExport = {\n     component: Annotations,\n-    logic: annotationsPageLogic,\n+    logic: annotationModalLogic,\n }\n \n export function Annotations(): JSX.Element {\n     const { currentTeam } = useValues(teamLogic)\n     const { currentOrganization } = useValues(organizationLogic)\n-    const { annotations, annotationsLoading, next, loadingNext } = useValues(annotationsPageLogic)\n+    const { annotations, annotationsLoading, next, loadingNext, timezone } = useValues(annotationModalLogic)\n     const { loadAnnotationsNext, openModalToCreateAnnotation, openModalToEditAnnotation } =\n-        useActions(annotationsPageLogic)\n+        useActions(annotationModalLogic)\n \n     const columns: LemonTableColumns<AnnotationType> = [\n         {\n@@ -44,13 +44,13 @@ export function Annotations(): JSX.Element {\n             },\n         },\n         {\n-            title: 'Date and time',\n+            title: `Date and time (${shortTimeZone(timezone)})`,\n             dataIndex: 'date_marker',\n             render: function RenderDateMarker(_, annotation: AnnotationType): string {\n                 // Format marker. Minute precision is used, because that's as detailed as our graphs can be\n-                return dayjs(annotation.date_marker).format(ANNOTATION_DAYJS_FORMAT)\n+                return annotation.date_marker.format(ANNOTATION_DAYJS_FORMAT)\n             },\n-            sorter: (a, b) => dayjs(a.date_marker).diff(b.date_marker),\n+            sorter: (a, b) => a.date_marker.diff(b.date_marker),\n         },\n         {\n             title: 'Scope',\n@@ -115,7 +115,11 @@ export function Annotations(): JSX.Element {\n                     </>\n                 }\n                 buttons={\n-                    <LemonButton type=\"primary\" data-attr=\"create-annotation\" onClick={openModalToCreateAnnotation}>\n+                    <LemonButton\n+                        type=\"primary\"\n+                        data-attr=\"create-annotation\"\n+                        onClick={() => openModalToCreateAnnotation()}\n+                    >\n                         New annotation\n                     </LemonButton>\n                 }\ndiff --git a/frontend/src/scenes/annotations/annotationsPageLogic.ts b/frontend/src/scenes/annotations/annotationModalLogic.ts\nsimilarity index 62%\nrename from frontend/src/scenes/annotations/annotationsPageLogic.ts\nrename to frontend/src/scenes/annotations/annotationModalLogic.ts\nindex dbd91bf5c..f4561d515 100644\n--- a/frontend/src/scenes/annotations/annotationsPageLogic.ts\n+++ b/frontend/src/scenes/annotations/annotationModalLogic.ts\n@@ -1,11 +1,11 @@\n import { actions, connect, kea, listeners, path, reducers } from 'kea'\n import api from 'lib/api'\n-import { AnnotationScope, AnnotationType } from '~/types'\n+import { AnnotationScope, AnnotationType, InsightModel } from '~/types'\n import { forms } from 'kea-forms'\n-import { dayjs } from 'lib/dayjs'\n+import { dayjs, Dayjs } from 'lib/dayjs'\n import { annotationsModel } from '~/models/annotationsModel'\n-\n-import type { annotationsPageLogicType } from './annotationsPageLogicType'\n+import type { annotationModalLogicType } from './annotationModalLogicType'\n+import { teamLogic } from 'scenes/teamLogic'\n \n export const ANNOTATION_DAYJS_FORMAT = 'MMMM DD, YYYY h:mm A'\n \n@@ -22,23 +22,35 @@ export const annotationScopeToLevel: Record<AnnotationScope, number> = {\n }\n \n export interface AnnotationModalForm {\n-    dateMarker: dayjs.Dayjs\n+    dateMarker: Dayjs\n     scope: AnnotationType['scope']\n     content: AnnotationType['content']\n+    dashboardItemId: AnnotationType['dashboard_item'] | null\n }\n \n-export const annotationsPageLogic = kea<annotationsPageLogicType>([\n-    path(['scenes', 'annotations', 'annotationsPageLogic']),\n+export const annotationModalLogic = kea<annotationModalLogicType>([\n+    path(['scenes', 'annotations', 'annotationModalLogic']),\n     connect({\n         actions: [\n             annotationsModel,\n             ['loadAnnotationsNext', 'replaceAnnotation', 'appendAnnotations', 'deleteAnnotation'],\n         ],\n-        values: [annotationsModel, ['annotations', 'annotationsLoading', 'next', 'loadingNext']],\n+        values: [\n+            annotationsModel,\n+            ['annotations', 'annotationsLoading', 'next', 'loadingNext'],\n+            teamLogic,\n+            ['timezone'],\n+        ],\n     }),\n     actions({\n-        openModalToCreateAnnotation: () => true,\n-        openModalToEditAnnotation: (annotation: AnnotationType) => ({ annotation }),\n+        openModalToCreateAnnotation: (initialDate?: Dayjs | null, insightId?: InsightModel['id'] | null) => ({\n+            initialDate,\n+            insightId,\n+        }),\n+        openModalToEditAnnotation: (annotation: AnnotationType, insightId?: InsightModel['id'] | null) => ({\n+            annotation,\n+            insightId,\n+        }),\n         closeModal: true,\n     }),\n     reducers(() => ({\n@@ -57,37 +69,52 @@ export const annotationsPageLogic = kea<annotationsPageLogicType>([\n                 openModalToEditAnnotation: (_, { annotation }) => annotation,\n             },\n         ],\n+        onSavedInsight: [\n+            false,\n+            {\n+                openModalToCreateAnnotation: (_, { insightId }) => !!insightId,\n+                openModalToEditAnnotation: (_, { insightId }) => !!insightId,\n+            },\n+        ],\n     })),\n-    listeners(({ actions }) => ({\n+    listeners(({ actions, values }) => ({\n         openModalToEditAnnotation: ({ annotation: { date_marker, scope, content } }) => {\n             actions.setAnnotationModalValues({\n-                dateMarker: dayjs(date_marker),\n+                dateMarker: dayjs(date_marker).tz(values.timezone),\n                 scope,\n                 content,\n             })\n         },\n-        openModalToCreateAnnotation: () => {\n+        openModalToCreateAnnotation: ({ initialDate, insightId }) => {\n             actions.resetAnnotationModal()\n+            if (initialDate) {\n+                actions.setAnnotationModalValue('dateMarker', initialDate)\n+            }\n+            if (insightId) {\n+                actions.setAnnotationModalValue('dashboardItemId', insightId)\n+            }\n         },\n     })),\n     forms(({ actions, values }) => ({\n         annotationModal: {\n             defaults: {\n-                dateMarker: dayjs(),\n+                dateMarker: dayjs().tz(values.timezone),\n                 content: '',\n                 scope: AnnotationScope.Project,\n+                dashboardItemId: null,\n             } as AnnotationModalForm,\n             errors: ({ content }) => ({\n                 content: !content ? 'An annotation must have text content.' : null,\n             }),\n             submit: async (data) => {\n-                const { dateMarker, content, scope } = data\n+                const { dateMarker, content, scope, dashboardItemId } = data\n                 if (values.existingModalAnnotation) {\n                     // annotationsModel's updateAnnotation inlined so that isAnnotationModalSubmitting works\n                     const updatedAnnotation = await api.annotations.update(values.existingModalAnnotation.id, {\n                         date_marker: dateMarker.toISOString(),\n                         content,\n                         scope,\n+                        dashboard_item: dashboardItemId,\n                     })\n                     actions.replaceAnnotation(updatedAnnotation)\n                 } else {\n@@ -96,6 +123,7 @@ export const annotationsPageLogic = kea<annotationsPageLogicType>([\n                         date_marker: dateMarker.toISOString(),\n                         content,\n                         scope,\n+                        dashboard_item: dashboardItemId,\n                     })\n                     actions.appendAnnotations([createdAnnotation])\n                 }\ndiff --git a/frontend/src/scenes/experiments/Experiment.scss b/frontend/src/scenes/experiments/Experiment.scss\nindex 842af716d..efbea627d 100644\n--- a/frontend/src/scenes/experiments/Experiment.scss\n+++ b/frontend/src/scenes/experiments/Experiment.scss\n@@ -67,7 +67,7 @@\n             }\n         }\n \n-        .graph-container {\n+        .LineGraph {\n             width: calc(100% - 2rem);\n             height: calc(100% - 3rem);\n         }\ndiff --git a/frontend/src/scenes/insights/Insight.scss b/frontend/src/scenes/insights/Insight.scss\nindex 564e5f671..a2b825fae 100644\n--- a/frontend/src/scenes/insights/Insight.scss\n+++ b/frontend/src/scenes/insights/Insight.scss\n@@ -139,7 +139,6 @@\n \n         .ant-card-body {\n             padding: 0;\n-            overflow-x: auto;\n         }\n \n         .insights-graph-container-row {\n@@ -157,7 +156,7 @@\n             }\n         }\n \n-        .graph-container {\n+        .LineGraph {\n             // hacky because container not respecting position: relative;\n             width: calc(100% - 3rem);\n             height: calc(100% - 3rem);\n@@ -220,7 +219,7 @@\n     min-height: min(calc(90vh - 16rem), 36rem);\n     display: flex;\n     justify-content: center;\n-    .graph-container {\n+    .LineGraph {\n         height: calc(100% - 1rem) !important;\n     }\n }\ndiff --git a/frontend/src/scenes/insights/InsightTooltip/insightTooltipUtils.tsx b/frontend/src/scenes/insights/InsightTooltip/insightTooltipUtils.tsx\nindex 914e8f50d..76e19305b 100644\n--- a/frontend/src/scenes/insights/InsightTooltip/insightTooltipUtils.tsx\n+++ b/frontend/src/scenes/insights/InsightTooltip/insightTooltipUtils.tsx\n@@ -69,7 +69,14 @@ export function getTooltipTitle(\n     return null\n }\n \n-export function getFormattedDate(dayInput?: string | number, interval?: IntervalType): string {\n+export const INTERVAL_UNIT_TO_DAYJS_FORMAT: Record<IntervalType, string> = {\n+    hour: 'DD MMM YYYY HH:00',\n+    day: 'DD MMM YYYY',\n+    week: 'DD MMM YYYY',\n+    month: 'MMMM YYYY',\n+}\n+\n+export function getFormattedDate(dayInput?: string | number, interval: IntervalType = 'day'): string {\n     // Number of days\n     if (Number.isInteger(dayInput)) {\n         return pluralize(dayInput as number, 'day')\n@@ -77,8 +84,7 @@ export function getFormattedDate(dayInput?: string | number, interval?: Interval\n     const day = dayjs(dayInput)\n     // Dayjs formatted day\n     if (dayInput !== undefined && day.isValid()) {\n-        const formatString = `DD MMM YYYY${interval === 'hour' ? ' HH:00' : ''}`\n-        return day.format(formatString)\n+        return day.format(INTERVAL_UNIT_TO_DAYJS_FORMAT[interval])\n     }\n     return String(dayInput)\n }\ndiff --git a/frontend/src/scenes/insights/insightLogic.ts b/frontend/src/scenes/insights/insightLogic.ts\nindex d81189156..22bd41dfb 100644\n--- a/frontend/src/scenes/insights/insightLogic.ts\n+++ b/frontend/src/scenes/insights/insightLogic.ts\n@@ -512,6 +512,7 @@ export const insightLogic = kea<insightLogicType>({\n                 ),\n         ],\n         insightName: [(s) => [s.insight, s.derivedName], (insight, derivedName) => insight.name || derivedName],\n+        insightId: [(s) => [s.insight], (insight) => insight?.id || null],\n         canEditInsight: [\n             (s) => [s.insight],\n             (insight) =>\ndiff --git a/frontend/src/scenes/insights/views/LineGraph/LineGraph.scss b/frontend/src/scenes/insights/views/LineGraph/LineGraph.scss\ndeleted file mode 100644\nindex 45d1726f0..000000000\n--- a/frontend/src/scenes/insights/views/LineGraph/LineGraph.scss\n+++ /dev/null\n@@ -1,11 +0,0 @@\n-.graph-container {\n-    position: absolute;\n-    width: 100%;\n-    height: 100%;\n-\n-    .annotations-root {\n-        position: absolute;\n-        top: 0;\n-        left: 0;\n-    }\n-}\ndiff --git a/frontend/src/scenes/insights/views/LineGraph/LineGraph.tsx b/frontend/src/scenes/insights/views/LineGraph/LineGraph.tsx\nindex ae087c541..e0953ea40 100644\n--- a/frontend/src/scenes/insights/views/LineGraph/LineGraph.tsx\n+++ b/frontend/src/scenes/insights/views/LineGraph/LineGraph.tsx\n@@ -1,6 +1,6 @@\n import React, { useEffect, useRef, useState } from 'react'\n import ReactDOM from 'react-dom'\n-import { BindLogic, useActions, useValues } from 'kea'\n+import { BindLogic, useValues } from 'kea'\n import {\n     registerables,\n     ActiveElement,\n@@ -19,23 +19,18 @@ import {\n } from 'chart.js'\n import CrosshairPlugin, { CrosshairOptions } from 'chartjs-plugin-crosshair'\n import 'chartjs-adapter-dayjs'\n-import { areObjectValuesEmpty, lightenDarkenColor, mapRange } from '~/lib/utils'\n+import { areObjectValuesEmpty, lightenDarkenColor } from '~/lib/utils'\n import { getBarColorFromStatus, getGraphColors, getSeriesColor } from 'lib/colors'\n-import { AnnotationMarker, Annotations, insightAnnotationsLogic } from 'lib/components/Annotations'\n-import { useEscapeKey } from 'lib/hooks/useEscapeKey'\n-import './LineGraph.scss'\n-import { dayjs } from 'lib/dayjs'\n-import { AnnotationScope, AnnotationType, GraphDataset, GraphPoint, GraphPointPayload, GraphType } from '~/types'\n+import { AnnotationsOverlay, annotationsOverlayLogic } from 'lib/components/AnnotationsOverlay'\n+import { GraphDataset, GraphPoint, GraphPointPayload, GraphType, InsightType } from '~/types'\n import { InsightTooltip } from 'scenes/insights/InsightTooltip/InsightTooltip'\n import { lineGraphLogic } from 'scenes/insights/views/LineGraph/lineGraphLogic'\n import { TooltipConfig } from 'scenes/insights/InsightTooltip/insightTooltipUtils'\n import { groupsModel } from '~/models/groupsModel'\n-import { useResizeObserver } from 'lib/hooks/useResizeObserver'\n import { ErrorBoundary } from '~/layout/ErrorBoundary'\n import { formatAggregationAxisValue, AggregationAxisFormat } from 'scenes/insights/aggregationAxisFormat'\n import { insightLogic } from 'scenes/insights/insightLogic'\n \n-//--Chart Style Options--//\n if (registerables) {\n     // required for storybook to work, not found in esbuild\n     Chart.register(...registerables)\n@@ -43,9 +38,7 @@ if (registerables) {\n Chart.register(CrosshairPlugin)\n Chart.defaults.animation['duration'] = 0\n \n-//--Chart Style Options--//\n-\n-interface LineGraphProps {\n+export interface LineGraphProps {\n     datasets: GraphDataset[]\n     hiddenLegendKeys?: Record<string | number, boolean | undefined>\n     labels: string[]\n@@ -62,8 +55,6 @@ interface LineGraphProps {\n     aggregationAxisFormat?: AggregationAxisFormat\n }\n \n-const noop = (): void => {}\n-\n export function ensureTooltipElement(): HTMLElement {\n     let tooltipEl = document.getElementById('InsightTooltipWrapper')\n     if (!tooltipEl) {\n@@ -76,16 +67,9 @@ export function ensureTooltipElement(): HTMLElement {\n }\n \n export const LineGraph = (props: LineGraphProps): JSX.Element => {\n-    const { insightProps, insight } = useValues(insightLogic)\n-\n     return (\n         <ErrorBoundary>\n-            <BindLogic\n-                logic={insightAnnotationsLogic}\n-                props={{ dashboardItemId: insightProps.dashboardItemId, insightNumericId: insight.id || 'new' }}\n-            >\n-                <LineGraph_ {...props} />\n-            </BindLogic>\n+            <LineGraph_ {...props} />\n         </ErrorBoundary>\n     )\n }\n@@ -98,7 +82,6 @@ export function LineGraph_({\n     isInProgress = false,\n     onClick,\n     ['data-attr']: dataAttr,\n-    inSharedMode = false,\n     showPersonsModal = true,\n     isCompare = false,\n     incompletenessOffsetFromEnd = -1,\n@@ -109,75 +92,20 @@ export function LineGraph_({\n     let datasets = _datasets\n \n     const { createTooltipData } = useValues(lineGraphLogic)\n-    const { timezone } = useValues(insightLogic)\n+    const { insightProps, insight, timezone } = useValues(insightLogic)\n     const { aggregationLabel } = useValues(groupsModel)\n \n-    const chartRef = useRef<HTMLCanvasElement | null>(null)\n-    const myLineChart = useRef<Chart<ChartType, any, string>>()\n-    const annotationsRoot = useRef<HTMLDivElement | null>(null)\n-    const [left, setLeft] = useState(-1)\n-    const [holdLeft, setHoldLeft] = useState(0)\n-    const [enabled, setEnabled] = useState(false)\n-    const [focused, setFocused] = useState(false)\n-    const [annotationsFocused, setAnnotationsFocused] = useState(false)\n-    const [labelIndex, setLabelIndex] = useState<number | null>(null)\n-    const [holdLabelIndex, setHoldLabelIndex] = useState<number | null>(null)\n-    const [selectedDayLabel, setSelectedDayLabel] = useState<string | null>(null)\n-\n-    // insightAnnotationsLogic's props must be bound using BindLogic - this is so that we can avoid prop drilling here\n-    const { createAnnotation } = !inSharedMode ? useActions(insightAnnotationsLogic) : { createAnnotation: noop }\n-    const { annotations, annotationsLoading } = !inSharedMode\n-        ? useValues(insightAnnotationsLogic)\n-        : { annotations: [], annotationsLoading: false }\n-\n-    const [leftExtent, setLeftExtent] = useState(0)\n-    const [boundaryInterval, setBoundaryInterval] = useState(0)\n-    const [topExtent, setTopExtent] = useState(0)\n-    const [annotationInRange, setInRange] = useState(false)\n-    const { width: chartWidth, height: chartHeight } = useResizeObserver({ ref: chartRef })\n+    const canvasRef = useRef<HTMLCanvasElement | null>(null)\n+    const [myLineChart, setMyLineChart] = useState<Chart<ChartType, any, string>>()\n+    const [[chartWidth, chartHeight], setChartDimensions] = useState<[number, number]>([0, 0])\n \n     const colors = getGraphColors()\n+    const insightType = insight.filters?.insight\n     const isHorizontal = type === GraphType.HorizontalBar\n+    const isPie = type === GraphType.Pie\n     const isBar = [GraphType.Bar, GraphType.HorizontalBar, GraphType.Histogram].includes(type)\n-    const isBackgroundBasedGraphType = [GraphType.Bar, GraphType.HorizontalBar, GraphType.Pie]\n-    const isAnnotated = [GraphType.Line, GraphType.Bar].includes(type)\n-\n-    const annotationsCondition =\n-        isAnnotated && datasets?.length > 0 && !inSharedMode && datasets[0].labels?.[0] !== '1 day' // exclude stickiness graphs\n-\n-    useEscapeKey(() => setFocused(false), [focused])\n-\n-    useEffect(() => {\n-        buildChart()\n-    }, [datasets, hiddenLegendKeys])\n-\n-    // annotation related effects\n-\n-    // update boundaries and axis padding when user hovers with mouse or annotations load\n-    useEffect(() => {\n-        if (annotationsCondition && myLineChart.current?.options?.scales?.x?.grid) {\n-            myLineChart.current.options.scales.x.grid.tickLength = annotationInRange || focused ? 45 : 10\n-            myLineChart.current.update()\n-            calculateBoundaries()\n-        }\n-    }, [annotationsLoading, annotationsCondition, annotations, annotationInRange])\n-\n-    useEffect(() => {\n-        if (annotationsCondition && (datasets?.[0]?.days?.length ?? 0) > 0) {\n-            const begin = dayjs(datasets[0].days?.[0])\n-            const end = dayjs(datasets[0].days?.[datasets[0].days.length - 1]).add(2, 'days')\n-            const checkBetween = (element: AnnotationType): boolean =>\n-                dayjs(element.date_marker).isSameOrBefore(end) && dayjs(element.date_marker).isSameOrAfter(begin)\n-            setInRange(annotations.some(checkBetween))\n-        }\n-    }, [datasets, annotations, annotationsCondition])\n-\n-    // update only boundaries when window size changes or chart type changes\n-    useEffect(() => {\n-        if (annotationsCondition) {\n-            calculateBoundaries()\n-        }\n-    }, [myLineChart.current, chartWidth, chartHeight, type, annotationsCondition])\n+    const isBackgroundBasedGraphType = [GraphType.Bar, GraphType.HorizontalBar, GraphType.Pie].includes(type)\n+    const showAnnotations = (!insightType || insightType === InsightType.TRENDS) && !isHorizontal && !isPie\n \n     // Remove tooltip element on unmount\n     useEffect(() => {\n@@ -187,25 +115,6 @@ export function LineGraph_({\n         }\n     }, [])\n \n-    function calculateBoundaries(): void {\n-        if (myLineChart.current) {\n-            let boundaryLeftExtent = myLineChart.current.scales.x.left\n-            const boundaryRightExtent = myLineChart.current.scales.x.right\n-            const boundaryTicks = myLineChart.current.scales.x.ticks.length\n-            const boundaryDelta = boundaryRightExtent - boundaryLeftExtent\n-            let _boundaryInterval = boundaryDelta / (boundaryTicks - 1)\n-            if (type === GraphType.Bar) {\n-                // With Bar graphs we want the annotations to be in the middle\n-                _boundaryInterval = boundaryDelta / boundaryTicks\n-                boundaryLeftExtent += _boundaryInterval / 2\n-            }\n-            const boundaryTopExtent = myLineChart.current.scales.x.top + 8\n-            setLeftExtent(boundaryLeftExtent)\n-            setBoundaryInterval(_boundaryInterval)\n-            setTopExtent(boundaryTopExtent)\n-        }\n-    }\n-\n     function processDataset(dataset: ChartDataset<any>): ChartDataset<any> {\n         const mainColor = dataset?.status\n             ? getBarColorFromStatus(dataset.status)\n@@ -231,13 +140,8 @@ export function LineGraph_({\n         }\n     }\n \n-    function buildChart(): void {\n-        const myChartRef = chartRef.current?.getContext('2d')\n-\n-        if (typeof myLineChart.current !== 'undefined') {\n-            myLineChart.current.destroy()\n-        }\n-\n+    // Build chart\n+    useEffect(() => {\n         // Hide intentionally hidden keys\n         if (!areObjectValuesEmpty(hiddenLegendKeys)) {\n             if (isHorizontal || type === GraphType.Pie) {\n@@ -322,7 +226,7 @@ export function LineGraph_({\n                 tooltip: {\n                     ...tooltipOptions,\n                     external({ tooltip }: { chart: Chart; tooltip: TooltipModel<ChartType> }) {\n-                        if (!chartRef.current) {\n+                        if (!canvasRef.current) {\n                             return\n                         }\n \n@@ -380,7 +284,7 @@ export function LineGraph_({\n                             )\n                         }\n \n-                        const bounds = chartRef.current.getBoundingClientRect()\n+                        const bounds = canvasRef.current.getBoundingClientRect()\n                         const horizontalBarTopOffset = isHorizontal ? tooltip.caretY - tooltipEl.clientHeight / 2 : 0\n                         const tooltipClientTop = bounds.top + window.pageYOffset + horizontalBarTopOffset\n \n@@ -433,6 +337,8 @@ export function LineGraph_({\n                 const point = chart.getElementsAtEventForMode(nativeEvent, 'index', { intersect: true }, true)\n \n                 if (onClick && point.length) {\n+                    // FIXME: Whole graph should have cursor: pointer from the get-go if it's persons modal-enabled\n+                    // This code gives it that style, but only once the user hovers over a data point\n                     target.style.cursor = 'pointer'\n                 }\n             },\n@@ -505,6 +411,7 @@ export function LineGraph_({\n                     seriesId: datasets[referencePoint.datasetIndex].id,\n                 })\n             },\n+            onResize: (_, { width, height }) => setChartDimensions([width, height]),\n         }\n \n         if (type === GraphType.Bar) {\n@@ -536,9 +443,10 @@ export function LineGraph_({\n                     display: true,\n                     ticks: tickOptions,\n                     grid: {\n-                        display: false,\n+                        display: true,\n+                        drawOnChartArea: false,\n                         borderColor: colors.axisLine as string,\n-                        tickLength: annotationInRange || focused ? 45 : 10,\n+                        tickLength: 12,\n                     },\n                 },\n                 y: {\n@@ -619,116 +527,29 @@ export function LineGraph_({\n             }\n         }\n \n-        myLineChart.current = new Chart(myChartRef as ChartItem, {\n+        const newChart = new Chart(canvasRef.current?.getContext('2d') as ChartItem, {\n             type: (isBar ? GraphType.Bar : type) as ChartType,\n             data: { labels, datasets },\n             options,\n         })\n-    }\n+        setMyLineChart(newChart)\n+        return () => newChart.destroy()\n+    }, [datasets, hiddenLegendKeys])\n \n     return (\n-        <div\n-            className=\"graph-container\"\n-            data-attr={dataAttr}\n-            onMouseMove={(e) => {\n-                setEnabled(true)\n-                if (annotationsCondition && myLineChart.current) {\n-                    const rect = e.currentTarget.getBoundingClientRect(),\n-                        offsetX = e.clientX - rect.left,\n-                        offsetY = e.clientY - rect.top\n-                    if (offsetY < topExtent - 30 && !focused && !annotationsFocused) {\n-                        setEnabled(false)\n-                        setLeft(-1)\n-                        return\n-                    }\n-\n-                    const xAxis = myLineChart.current.scales.x\n-                    let _leftExtent = xAxis.left\n-                    const _rightExtent = xAxis.right\n-                    const ticks = xAxis.ticks.length\n-                    const delta = _rightExtent - _leftExtent\n-                    let _interval = delta / (ticks - 1)\n-\n-                    if (type === GraphType.Bar) {\n-                        // With Bar graphs we want the annotations to be in the middle\n-                        _interval = delta / ticks\n-                        _leftExtent += _interval / 2\n-                    }\n-                    if (offsetX < _leftExtent - _interval / 2) {\n-                        return\n-                    }\n-                    const index = mapRange(offsetX, _leftExtent - _interval / 2, _rightExtent + _interval / 2, 0, ticks)\n-                    if (index >= 0 && index < ticks && offsetY >= topExtent - 30) {\n-                        setLeft(index * _interval + _leftExtent)\n-                        setLabelIndex(index)\n-                    }\n-                }\n-            }}\n-            onMouseLeave={() => setEnabled(false)}\n-        >\n-            <canvas ref={chartRef} />\n-            <div className=\"annotations-root\" ref={annotationsRoot}>\n-                {annotationsCondition && (\n-                    <Annotations\n-                        dates={datasets[0].days ?? []}\n-                        leftExtent={leftExtent}\n-                        interval={boundaryInterval}\n-                        topExtent={topExtent}\n-                        currentDateMarker={\n-                            focused || annotationsFocused\n-                                ? selectedDayLabel\n-                                : enabled && labelIndex\n-                                ? datasets[0].days?.[labelIndex]\n-                                : null\n-                        }\n-                        onClick={() => {\n-                            setFocused(false)\n-                            setAnnotationsFocused(true)\n-                        }}\n-                        onClose={() => {\n-                            setAnnotationsFocused(false)\n-                        }}\n-                        color={colors.annotationColor}\n-                        accessoryColor={colors.annotationAccessoryColor}\n-                        timezone={timezone}\n-                    />\n-                )}\n-                {annotationsCondition && !annotationsFocused && (enabled || focused) && left >= 0 && (\n-                    <AnnotationMarker\n-                        currentDateMarker={\n-                            focused ? selectedDayLabel : labelIndex ? datasets[0].days?.[labelIndex] : null\n-                        }\n-                        onClick={() => {\n-                            setFocused(true)\n-                            setHoldLeft(left)\n-                            setHoldLabelIndex(labelIndex)\n-                            setSelectedDayLabel(labelIndex ? datasets[0].days?.[labelIndex] ?? null : null)\n-                        }}\n-                        getPopupContainer={\n-                            annotationsRoot?.current ? () => annotationsRoot.current as HTMLDivElement : undefined\n-                        }\n-                        onCreate={(textInput, applyAll) => {\n-                            const date = holdLabelIndex ? datasets[0].days?.[holdLabelIndex] : null\n-                            if (date) {\n-                                createAnnotation({\n-                                    content: textInput,\n-                                    date_marker: dayjs(date)\n-                                        .tz(timezone as string)\n-                                        .toISOString(),\n-                                    scope: applyAll ? AnnotationScope.Project : AnnotationScope.Insight,\n-                                })\n-                            }\n-                        }}\n-                        onClose={() => setFocused(false)}\n-                        dynamic\n-                        left={(focused ? holdLeft : left) - 12.5}\n-                        top={topExtent}\n-                        label=\"Add note\"\n-                        color={colors.annotationColor}\n-                        accessoryColor={colors.annotationAccessoryColor}\n-                    />\n-                )}\n-            </div>\n+        <div className=\"LineGraph absolute w-full h-full\" data-attr={dataAttr}>\n+            <canvas ref={canvasRef} />\n+            {myLineChart && showAnnotations && (\n+                <BindLogic\n+                    logic={annotationsOverlayLogic}\n+                    props={{\n+                        dashboardItemId: insightProps.dashboardItemId,\n+                        insightNumericId: insight.id || 'new',\n+                    }}\n+                >\n+                    <AnnotationsOverlay chart={myLineChart} chartWidth={chartWidth} chartHeight={chartHeight} />\n+                </BindLogic>\n+            )}\n         </div>\n     )\n }\ndiff --git a/frontend/src/scenes/organization/Settings/VerifiedDomains/__snapshots__/verifiedDomainsLogic.test.ts.snap b/frontend/src/scenes/organization/Settings/VerifiedDomains/__snapshots__/verifiedDomainsLogic.test.ts.snap\nindex c8888f509..66044794d 100644\n--- a/frontend/src/scenes/organization/Settings/VerifiedDomains/__snapshots__/verifiedDomainsLogic.test.ts.snap\n+++ b/frontend/src/scenes/organization/Settings/VerifiedDomains/__snapshots__/verifiedDomainsLogic.test.ts.snap\n@@ -78,7 +78,7 @@ Object {\n           },\n         ],\n         \"test_account_filters_default_checked\": false,\n-        \"timezone\": \"Europe/Brussels\",\n+        \"timezone\": \"UTC\",\n         \"updated_at\": \"2022-03-17T16:09:21.566253Z\",\n         \"uuid\": \"TEAM_UUID\",\n       },\ndiff --git a/frontend/src/scenes/retention/RetentionContainer.scss b/frontend/src/scenes/retention/RetentionContainer.scss\nindex 3c8ccf6e6..6af0f682d 100644\n--- a/frontend/src/scenes/retention/RetentionContainer.scss\n+++ b/frontend/src/scenes/retention/RetentionContainer.scss\n@@ -8,7 +8,7 @@\n .insights-page {\n     .insights-graph-container {\n         .retention-container {\n-            .graph-container {\n+            .LineGraph {\n                 position: relative;\n                 margin-top: 0.5rem;\n                 margin-bottom: 1rem;\ndiff --git a/frontend/src/scenes/teamLogic.tsx b/frontend/src/scenes/teamLogic.tsx\nindex 9a0f1946f..b0845aa90 100644\n--- a/frontend/src/scenes/teamLogic.tsx\n+++ b/frontend/src/scenes/teamLogic.tsx\n@@ -118,6 +118,7 @@ export const teamLogic = kea<teamLogicType>([\n                 return currentTeam?.correlation_config || {}\n             },\n         ],\n+        timezone: [(selectors) => [selectors.currentTeam], (currentTeam): string => currentTeam?.timezone || 'UTC'],\n     }),\n     listeners(({ actions, values }) => ({\n         deleteTeam: async ({ team }) => {\ndiff --git a/frontend/src/scenes/urls.ts b/frontend/src/scenes/urls.ts\nindex ae242bbf8..3a7f96ec7 100644\n--- a/frontend/src/scenes/urls.ts\n+++ b/frontend/src/scenes/urls.ts\n@@ -61,7 +61,7 @@ export const urls = {\n     frontendApp: (id: string | number): string => `/app/${id}`,\n     projectCreateFirst: (): string => '/project/create',\n     projectHomepage: (): string => '/home',\n-    projectSettings: (): string => '/project/settings',\n+    projectSettings: (section?: string): string => `/project/settings${section ? `#${section}` : ''}`,\n     mySettings: (): string => '/me/settings',\n     organizationSettings: (): string => '/organization/settings',\n     organizationCreationConfirm: (): string => '/organization/confirm-creation',\ndiff --git a/frontend/src/styles/global.scss b/frontend/src/styles/global.scss\nindex f2777e83e..0569e4472 100644\n--- a/frontend/src/styles/global.scss\n+++ b/frontend/src/styles/global.scss\n@@ -594,13 +594,13 @@ body {\n     }\n \n     h5 {\n-        font-size: 11px;\n+        font-size: 0.6875rem;\n         font-weight: 600;\n         color: var(--muted-alt);\n         text-transform: uppercase;\n         letter-spacing: 0.5px;\n         margin-bottom: 0.25rem;\n-        line-height: 2;\n+        line-height: 1.5rem;\n     }\n \n     .ant-layout {\ndiff --git a/frontend/src/styles/utilities.scss b/frontend/src/styles/utilities.scss\nindex 6112a6c32..a35bdffe4 100644\n--- a/frontend/src/styles/utilities.scss\n+++ b/frontend/src/styles/utilities.scss\n@@ -89,6 +89,12 @@\n     }\n }\n \n+@each $space in $spaces {\n+    .leading-#{$space} {\n+        line-height: #{$space/4}rem;\n+    }\n+}\n+\n .space-y-px {\n     & > * + * {\n         margin-top: 1px;\n@@ -481,6 +487,12 @@\n .font-black {\n     font-weight: 900;\n }\n+.italic {\n+    font-style: italic;\n+}\n+.not-italic {\n+    font-style: normal;\n+}\n \n .whitespace-normal {\n     white-space: normal;\ndiff --git a/frontend/src/styles/vars.scss b/frontend/src/styles/vars.scss\nindex 2381cbd83..ab7d5b97b 100644\n--- a/frontend/src/styles/vars.scss\n+++ b/frontend/src/styles/vars.scss\n@@ -13,6 +13,7 @@ $screens: (\n );\n \n $spaces: 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20;\n+$leadings: 3, 4, 5, 6, 7, 8, 9, 10;\n $sides: 'top', 'right', 'bottom', 'left';\n // CSS cursors from https://tailwindcss.com/docs/cursor\n $cursors: (\n@@ -230,7 +231,6 @@ $_lifecycle_dormant: #f86234;\n     --z-mobile-nav-overlay: 931;\n     --z-top-navigation: 800;\n     --z-content-overlay: 488;\n-    --z-graph-annotation-prompt: 99;\n     --z-raised: 5;\n     --z-city-background-content: 1;\n     --z-city-background-image: 0;\ndiff --git a/frontend/src/test/init.ts b/frontend/src/test/init.ts\nindex e1144bc60..59a7444c3 100644\n--- a/frontend/src/test/init.ts\n+++ b/frontend/src/test/init.ts\n@@ -15,8 +15,8 @@ process.on('unhandledRejection', (err) => {\n export function initKeaTests(mountCommonLogic = true, teamForWindowContext: TeamType = MOCK_DEFAULT_TEAM): void {\n     dayjs.tz.setDefault('UTC')\n     window.POSTHOG_APP_CONTEXT = {\n-        current_team: teamForWindowContext,\n         ...window.POSTHOG_APP_CONTEXT,\n+        current_team: teamForWindowContext,\n     } as unknown as AppContext\n     posthog.init('no token', {\n         test: true,\ndiff --git a/frontend/src/types.ts b/frontend/src/types.ts\nindex 469507794..b3e8fd8bc 100644\n--- a/frontend/src/types.ts\n+++ b/frontend/src/types.ts\n@@ -979,7 +979,7 @@ export enum AnnotationScope {\n     Organization = 'organization',\n }\n \n-export interface AnnotationType {\n+export interface RawAnnotationType {\n     id: number\n     scope: AnnotationScope\n     content: string\n@@ -994,6 +994,10 @@ export interface AnnotationType {\n     creation_type?: string\n }\n \n+export interface AnnotationType extends Omit<RawAnnotationType, 'date_marker'> {\n+    date_marker: dayjs.Dayjs\n+}\n+\n export enum ChartDisplayType {\n     ActionsLineGraph = 'ActionsLineGraph',\n     ActionsLineGraphCumulative = 'ActionsLineGraphCumulative',\n"
  },
  "a50472f9d8548d297d73f3b87504c14eb1fb189e": {
    "hash": "a50472f9d8548d297d73f3b87504c14eb1fb189e",
    "message": "fix: Simplify LemonCheckbox (#11420)\n    \n    * fix: Simplify LemonCheckbox\n    \n    * Tidy",
    "diff": "commit a50472f9d8548d297d73f3b87504c14eb1fb189e\nAuthor: Ben White <ben@benjackwhite.co.uk>\nDate:   Tue Aug 23 11:15:55 2022 +0100\n\n    fix: Simplify LemonCheckbox (#11420)\n    \n    * fix: Simplify LemonCheckbox\n    \n    * Tidy\n\ndiff --git a/frontend/src/lib/components/Annotations/AnnotationMarker.tsx b/frontend/src/lib/components/Annotations/AnnotationMarker.tsx\nindex be7ee21be..b19f7b1f2 100644\n--- a/frontend/src/lib/components/Annotations/AnnotationMarker.tsx\n+++ b/frontend/src/lib/components/Annotations/AnnotationMarker.tsx\n@@ -131,12 +131,7 @@ export function AnnotationMarker({\n     const editorSection = (\n         <div className=\"space-y-2\">\n             <LemonTextArea maxLength={300} rows={4} value={textInput} onChange={(e) => setTextInput(e)} autoFocus />\n-            <LemonCheckbox\n-                checked={applyAll}\n-                onChange={(e) => setApplyAll(e.target.checked)}\n-                label=\"Create for all charts\"\n-                fullWidth\n-            />\n+            <LemonCheckbox checked={applyAll} onChange={setApplyAll} label=\"Create for all charts\" fullWidth />\n             <div className=\"flex justify-end gap-2\">\n                 <LemonButton\n                     size=\"small\"\ndiff --git a/frontend/src/lib/components/CompareFilter/CompareFilter.tsx b/frontend/src/lib/components/CompareFilter/CompareFilter.tsx\nindex 33f25d665..319a4fcf8 100644\n--- a/frontend/src/lib/components/CompareFilter/CompareFilter.tsx\n+++ b/frontend/src/lib/components/CompareFilter/CompareFilter.tsx\n@@ -16,7 +16,7 @@ export function CompareFilter(): JSX.Element | null {\n \n     return (\n         <LemonCheckbox\n-            onChange={(e) => setCompare(e.target.checked)}\n+            onChange={setCompare}\n             checked={compare}\n             disabled={disabled}\n             label={<span className=\"font-normal\">Compare to previous time period</span>}\ndiff --git a/frontend/src/lib/components/LemonCheckbox/LemonCheckbox.scss b/frontend/src/lib/components/LemonCheckbox/LemonCheckbox.scss\nindex 9bc18bdd3..c62377b11 100644\n--- a/frontend/src/lib/components/LemonCheckbox/LemonCheckbox.scss\n+++ b/frontend/src/lib/components/LemonCheckbox/LemonCheckbox.scss\n@@ -86,6 +86,7 @@\n             }\n         }\n     }\n+\n     &.LemonCheckbox--bordered {\n         label {\n             padding: 0.75rem;\ndiff --git a/frontend/src/lib/components/LemonCheckbox/LemonCheckbox.tsx b/frontend/src/lib/components/LemonCheckbox/LemonCheckbox.tsx\nindex d64831bff..283d62b8c 100644\n--- a/frontend/src/lib/components/LemonCheckbox/LemonCheckbox.tsx\n+++ b/frontend/src/lib/components/LemonCheckbox/LemonCheckbox.tsx\n@@ -6,7 +6,7 @@ export interface LemonCheckboxProps {\n     checked?: boolean | 'indeterminate'\n     defaultChecked?: boolean\n     disabled?: boolean\n-    onChange?: (event: React.ChangeEvent<HTMLInputElement>) => void\n+    onChange?: (value: boolean) => void\n     label?: string | JSX.Element\n     id?: string\n     className?: string\n@@ -80,7 +80,7 @@ export function LemonCheckbox({\n                 onChange={(e) => {\n                     // NOTE: We only want to setLocalChecked if the component is not controlled externally\n                     checked === undefined && setLocalChecked(e.target.checked)\n-                    onChange?.(e)\n+                    onChange?.(e.target.checked)\n                 }}\n                 id={id}\n                 disabled={disabled}\ndiff --git a/frontend/src/lib/components/icons.stories.tsx b/frontend/src/lib/components/icons.stories.tsx\nindex 36e06e843..15ee5e7bb 100644\n--- a/frontend/src/lib/components/icons.stories.tsx\n+++ b/frontend/src/lib/components/icons.stories.tsx\n@@ -41,12 +41,7 @@ export function Library(): JSX.Element {\n     const [showBorder, setShowBorder] = React.useState(true)\n     return (\n         <div className=\"space-y-2\">\n-            <LemonCheckbox\n-                bordered\n-                checked={showBorder}\n-                onChange={(e) => setShowBorder(e.target.checked)}\n-                label=\"Show border\"\n-            />\n+            <LemonCheckbox bordered checked={showBorder} onChange={setShowBorder} label=\"Show border\" />\n             <LemonTable\n                 dataSource={allIcons}\n                 columns={[\ndiff --git a/frontend/src/lib/forms/Field.stories.tsx b/frontend/src/lib/forms/Field.stories.tsx\nindex 51f954bec..7524e0f35 100644\n--- a/frontend/src/lib/forms/Field.stories.tsx\n+++ b/frontend/src/lib/forms/Field.stories.tsx\n@@ -138,7 +138,7 @@ export const _FieldsWithKeaForm = (): JSX.Element => {\n                     <LemonInput type=\"email\" />\n                 </Field>\n                 <Field name=\"pineappleOnPizza\">\n-                    <LemonCheckbox bordered label=\"Checkbox labels are set differently\" fullWidth />\n+                    <LemonCheckbox bordered label=\"Pineapple on your pizza?\" fullWidth />\n                 </Field>\n \n                 <div className=\"flex justify-end gap-2 border-t mt-4 pt-4\">\ndiff --git a/frontend/src/scenes/actions/ActionEdit.tsx b/frontend/src/scenes/actions/ActionEdit.tsx\nindex 49629dd09..01bfaf244 100644\n--- a/frontend/src/scenes/actions/ActionEdit.tsx\n+++ b/frontend/src/scenes/actions/ActionEdit.tsx\n@@ -240,7 +240,7 @@ export function ActionEdit({ action: loadedAction, id, onSave, temporaryToken }:\n                                 <LemonCheckbox\n                                     id=\"webhook-checkbox\"\n                                     checked={!!value}\n-                                    onChange={(e) => onChange(e.target.checked)}\n+                                    onChange={onChange}\n                                     disabled={!slackEnabled}\n                                     label={\n                                         <>\ndiff --git a/frontend/src/scenes/instance/SystemStatus/RenderMetricValueEdit.tsx b/frontend/src/scenes/instance/SystemStatus/RenderMetricValueEdit.tsx\nindex 2aaf337e2..b78d6dd50 100644\n--- a/frontend/src/scenes/instance/SystemStatus/RenderMetricValueEdit.tsx\n+++ b/frontend/src/scenes/instance/SystemStatus/RenderMetricValueEdit.tsx\n@@ -18,7 +18,7 @@ export function RenderMetricValueEdit({\n         return (\n             <LemonCheckbox\n                 defaultChecked={!!value}\n-                onChange={(e) => onValueChanged(key, e.target.checked)}\n+                onChange={(val) => onValueChanged(key, val)}\n                 label={<LemonTag type={value ? 'success' : 'danger'}>{value ? 'Yes' : 'No'}</LemonTag>}\n             />\n         )\n"
  },
  "0ecf0da079acbc8839358cd80a46fde1027d0423": {
    "hash": "0ecf0da079acbc8839358cd80a46fde1027d0423",
    "message": "#3765 Show cohort for bar chart (Insights > Trends) v2 (#4054)\n    \n    * Revert \"Revert \"#3765 Show cohort for bar chart (Insights > Trends) (#3825)\" (#4052)\"\n    \n    This reverts commit 593679c0337599c182c87d7ad2255d79c8d3f6b8.\n    \n    * patch all time arg\n    \n    * add missing params\n    \n    * fix type\n    \n    * wrong line\n    \n    * more type safety",
    "diff": "commit 0ecf0da079acbc8839358cd80a46fde1027d0423\nAuthor: Eric Duong <eeoneric@gmail.com>\nDate:   Tue Apr 20 20:24:04 2021 -0400\n\n    #3765 Show cohort for bar chart (Insights > Trends) v2 (#4054)\n    \n    * Revert \"Revert \"#3765 Show cohort for bar chart (Insights > Trends) (#3825)\" (#4052)\"\n    \n    This reverts commit 593679c0337599c182c87d7ad2255d79c8d3f6b8.\n    \n    * patch all time arg\n    \n    * add missing params\n    \n    * fix type\n    \n    * wrong line\n    \n    * more type safety\n\ndiff --git a/ee/clickhouse/queries/trends/normal.py b/ee/clickhouse/queries/trends/normal.py\nindex 8639da9c2..7498400ff 100644\n--- a/ee/clickhouse/queries/trends/normal.py\n+++ b/ee/clickhouse/queries/trends/normal.py\n@@ -1,3 +1,4 @@\n+from datetime import timedelta\n from typing import Any, Callable, Dict, List, Tuple\n \n from django.utils import timezone\n@@ -51,12 +52,15 @@ class ClickhouseTrendsNormal:\n         params = {**params, **entity_params}\n \n         if filter.display in TRENDS_DISPLAY_BY_VALUE:\n-            content_sql = VOLUME_TOTAL_AGGREGATE_SQL.format(**content_sql_params)\n+            content_sql = VOLUME_TOTAL_AGGREGATE_SQL.format(**content_sql_params).format(**entity_format_params)\n+            time_range = self._enumerate_time_range(filter, seconds_in_interval)\n \n             return (\n                 content_sql,\n                 params,\n-                lambda result: [{\"aggregated_value\": result[0][0] if result and len(result) else 0}],\n+                lambda result: [\n+                    {\"aggregated_value\": result[0][0] if result and len(result) else 0, \"days\": time_range}\n+                ],\n             )\n         else:\n \n@@ -76,6 +80,24 @@ class ClickhouseTrendsNormal:\n             final_query = AGGREGATE_SQL.format(null_sql=null_sql, content_sql=content_sql)\n             return final_query, params, self._parse_normal_result(filter)\n \n+    def _enumerate_time_range(self, filter: Filter, seconds_in_interval: int) -> List[str]:\n+        date_from = filter.date_from\n+        date_to = filter.date_to\n+        delta = timedelta(seconds=seconds_in_interval)\n+        time_range: List[str] = []\n+\n+        if not date_from or not date_to:\n+            return time_range\n+\n+        while date_from <= date_to:\n+            time_range.append(\n+                date_from.strftime(\n+                    \"%Y-%m-%d{}\".format(\" %H:%M:%S\" if filter.interval == \"hour\" or filter.interval == \"minute\" else \"\")\n+                )\n+            )\n+            date_from += delta\n+        return time_range\n+\n     def _parse_normal_result(self, filter: Filter) -> Callable:\n         def _parse(result: List) -> List:\n             parsed_results = []\ndiff --git a/frontend/src/scenes/insights/LineGraph.js b/frontend/src/scenes/insights/LineGraph.js\nindex 24287648d..2f75fbce4 100644\n--- a/frontend/src/scenes/insights/LineGraph.js\n+++ b/frontend/src/scenes/insights/LineGraph.js\n@@ -329,7 +329,11 @@ export function LineGraph({\n             options = {\n                 responsive: true,\n                 maintainAspectRatio: false,\n-                hover: { mode: 'index' },\n+                hover: {\n+                    mode: 'index',\n+                    onHover: options.hover.onHover,\n+                },\n+                onClick: options.onClick,\n             }\n         }\n \ndiff --git a/frontend/src/scenes/trends/PersonModal.tsx b/frontend/src/scenes/trends/PersonModal.tsx\nindex c50674741..7b1b0c91c 100644\n--- a/frontend/src/scenes/trends/PersonModal.tsx\n+++ b/frontend/src/scenes/trends/PersonModal.tsx\n@@ -25,6 +25,8 @@ export function PersonModal({ visible, view, onSaveCohort }: Props): JSX.Element\n     const title =\n         filters.shown_as === 'Stickiness'\n             ? `\"${people?.label}\" stickiness ${people?.day} day${people?.day === 1 ? '' : 's'}`\n+            : filters.display === 'ActionsBarValue' || filters.display === 'ActionsPie'\n+            ? `\"${people?.label}\"`\n             : `\"${people?.label}\" on ${people?.day ? dayjs(people.day).format('ll') : '...'}`\n     const closeModal = (): void => setShowingPeople(false)\n     return (\ndiff --git a/frontend/src/scenes/trends/trendsLogic.ts b/frontend/src/scenes/trends/trendsLogic.ts\nindex f09105f56..d31c38c47 100644\n--- a/frontend/src/scenes/trends/trendsLogic.ts\n+++ b/frontend/src/scenes/trends/trendsLogic.ts\n@@ -56,7 +56,8 @@ interface TrendPeople {\n interface PeopleParamType {\n     action: ActionFilter\n     label: string\n-    day?: string | number\n+    date_to?: string | number\n+    date_from?: string | number\n     breakdown_value?: string\n     target_date?: number\n     lifecycle_type?: string\n@@ -96,7 +97,7 @@ function filterClientSideParams(filters: Partial<FilterType>): Partial<FilterTyp\n }\n \n function parsePeopleParams(peopleParams: PeopleParamType, filters: Partial<FilterType>): string {\n-    const { action, day, breakdown_value, ...restParams } = peopleParams\n+    const { action, date_from, date_to, breakdown_value, ...restParams } = peopleParams\n     const params = filterClientSideParams({\n         ...filters,\n         entity_id: action.id,\n@@ -107,15 +108,15 @@ function parsePeopleParams(peopleParams: PeopleParamType, filters: Partial<Filte\n \n     // casting here is not the best\n     if (filters.shown_as === ShownAsValue.STICKINESS) {\n-        params.stickiness_days = day as number\n+        params.stickiness_days = date_from as number\n     } else if (params.display === ACTIONS_LINE_GRAPH_CUMULATIVE) {\n-        params.date_to = day as string\n+        params.date_to = date_from as string\n     } else if (filters.shown_as === ShownAsValue.LIFECYCLE) {\n         params.date_from = filters.date_from\n         params.date_to = filters.date_to\n     } else {\n-        params.date_from = day as string\n-        params.date_to = day as string\n+        params.date_from = date_from as string\n+        params.date_to = date_to as string\n     }\n \n     // If breakdown type is cohort, we use breakdown_value\n@@ -209,7 +210,14 @@ export const trendsLogic = kea<\n     actions: () => ({\n         setFilters: (filters, mergeFilters = true) => ({ filters, mergeFilters }),\n         setDisplay: (display) => ({ display }),\n-        loadPeople: (action, label, day, breakdown_value) => ({ action, label, day, breakdown_value }),\n+\n+        loadPeople: (action, label, date_from, date_to, breakdown_value) => ({\n+            action,\n+            label,\n+            date_from,\n+            date_to,\n+            breakdown_value,\n+        }),\n         saveCohortWithFilters: (cohortName: string) => ({ cohortName }),\n         loadMorePeople: true,\n         refreshCohort: true,\n@@ -308,7 +316,10 @@ export const trendsLogic = kea<\n     }),\n \n     selectors: () => ({\n-        filtersLoading: [() => [teamLogic.selectors.currentTeamLoading], (currentTeamLoading) => currentTeamLoading],\n+        filtersLoading: [\n+            () => [teamLogic.selectors.currentTeamLoading],\n+            (currentTeamLoading: any) => currentTeamLoading,\n+        ],\n         results: [(selectors) => [selectors._results], (response) => response.result],\n         resultsLoading: [(selectors) => [selectors._resultsLoading], (_resultsLoading) => _resultsLoading],\n         loadMoreBreakdownUrl: [(selectors) => [selectors._results], (response) => response.next],\n@@ -384,7 +395,10 @@ export const trendsLogic = kea<\n         saveCohortWithFilters: ({ cohortName }) => {\n             if (values.people) {\n                 const { label, action, day, breakdown_value } = values.people\n-                const filterParams = parsePeopleParams({ label, action, day, breakdown_value }, values.filters)\n+                const filterParams = parsePeopleParams(\n+                    { label, action, date_from: day, date_to: day, breakdown_value },\n+                    values.filters\n+                )\n                 const cohortParams = {\n                     is_static: true,\n                     name: cohortName,\n@@ -399,22 +413,28 @@ export const trendsLogic = kea<\n                 errorToast(undefined, \"We couldn't create your cohort:\")\n             }\n         },\n-        loadPeople: async ({ label, action, day, breakdown_value }, breakpoint) => {\n+        loadPeople: async ({ label, action, date_from, date_to, breakdown_value }, breakpoint) => {\n             let people = []\n             if (values.filters.shown_as === ShownAsValue.LIFECYCLE) {\n                 const filterParams = parsePeopleParams(\n-                    { label, action, target_date: day, lifecycle_type: breakdown_value },\n+                    { label, action, target_date: date_from, lifecycle_type: breakdown_value },\n                     values.filters\n                 )\n-                actions.setPeople(null, null, action, label, day, breakdown_value, null)\n+                actions.setPeople(null, null, action, label, date_from, breakdown_value, null)\n                 people = await api.get(`api/person/lifecycle/?${filterParams}`)\n             } else if (values.filters.shown_as === ShownAsValue.STICKINESS) {\n-                const filterParams = parsePeopleParams({ label, action, day, breakdown_value }, values.filters)\n-                actions.setPeople(null, null, action, label, day, breakdown_value, null)\n+                const filterParams = parsePeopleParams(\n+                    { label, action, date_from, date_to, breakdown_value },\n+                    values.filters\n+                )\n+                actions.setPeople(null, null, action, label, date_from, breakdown_value, null)\n                 people = await api.get(`api/person/stickiness/?${filterParams}`)\n             } else {\n-                const filterParams = parsePeopleParams({ label, action, day, breakdown_value }, values.filters)\n-                actions.setPeople(null, null, action, label, day, breakdown_value, null)\n+                const filterParams = parsePeopleParams(\n+                    { label, action, date_from, date_to, breakdown_value },\n+                    values.filters\n+                )\n+                actions.setPeople(null, null, action, label, date_from, breakdown_value, null)\n                 people = await api.get(`api/action/people/?${filterParams}`)\n             }\n             breakpoint()\n@@ -423,7 +443,7 @@ export const trendsLogic = kea<\n                 people.results[0]?.count,\n                 action,\n                 label,\n-                day,\n+                date_from,\n                 breakdown_value,\n                 people.next\n             )\ndiff --git a/frontend/src/scenes/trends/viz/ActionsBarValueGraph.tsx b/frontend/src/scenes/trends/viz/ActionsBarValueGraph.tsx\nindex a53de1532..c12b24d33 100644\n--- a/frontend/src/scenes/trends/viz/ActionsBarValueGraph.tsx\n+++ b/frontend/src/scenes/trends/viz/ActionsBarValueGraph.tsx\n@@ -2,7 +2,7 @@ import React, { useState, useEffect } from 'react'\n import { Loading } from 'lib/utils'\n import { LineGraph } from '../../insights/LineGraph'\n import { getChartColors } from 'lib/colors'\n-import { useValues } from 'kea'\n+import { useActions, useValues } from 'kea'\n import { trendsLogic } from 'scenes/trends/trendsLogic'\n import { LineGraphEmptyState } from '../../insights/EmptyStates'\n import { ViewType } from 'scenes/insights/insightLogic'\n@@ -29,19 +29,21 @@ export function ActionsBarValueGraph({\n     const [data, setData] = useState<DataSet[] | null>(null)\n     const [total, setTotal] = useState(0)\n     const logic = trendsLogic({ dashboardItemId, view, filters: filtersParam, cachedResults })\n+    const { loadPeople } = useActions(logic)\n     const { results, resultsLoading } = useValues(logic)\n \n     function updateData(): void {\n         const _data = [...results] as TrendResultWithAggregate[]\n         _data.sort((a, b) => b.aggregated_value - a.aggregated_value)\n-\n         const colorList = getChartColors(color)\n+        const days = results.length > 0 ? results[0].days : []\n \n         setData([\n             {\n                 labels: _data.map((item) => item.label),\n                 data: _data.map((item) => item.aggregated_value),\n                 actions: _data.map((item) => item.action),\n+                days,\n                 backgroundColor: colorList,\n                 hoverBackgroundColor: colorList,\n                 hoverBorderColor: colorList,\n@@ -69,6 +71,18 @@ export function ActionsBarValueGraph({\n                 labels={data[0].labels}\n                 dashboardItemId={dashboardItemId}\n                 totalValue={total}\n+                onClick={\n+                    dashboardItemId\n+                        ? null\n+                        : (point) => {\n+                              const { dataset } = point\n+                              const action = dataset.actions[point.index]\n+                              const label = dataset.labels[point.index]\n+                              const date_from = dataset?.days?.length ? dataset.days[0] : null\n+                              const date_to = dataset?.days?.length ? dataset.days[dataset.days.length - 1] : null\n+                              loadPeople(action, label, date_from, date_to, null)\n+                          }\n+                }\n             />\n         ) : (\n             <LineGraphEmptyState color={color} isDashboard={!!dashboardItemId} />\ndiff --git a/frontend/src/scenes/trends/viz/ActionsLineGraph.tsx b/frontend/src/scenes/trends/viz/ActionsLineGraph.tsx\nindex d94dfc963..4dfc98bae 100644\n--- a/frontend/src/scenes/trends/viz/ActionsLineGraph.tsx\n+++ b/frontend/src/scenes/trends/viz/ActionsLineGraph.tsx\n@@ -51,6 +51,7 @@ export function ActionsLineGraph({\n                                   dataset.action || 'session',\n                                   dataset.label,\n                                   day,\n+                                  day,\n                                   dataset.breakdown_value || dataset.status\n                               )\n                           }\ndiff --git a/frontend/src/scenes/trends/viz/ActionsPie.tsx b/frontend/src/scenes/trends/viz/ActionsPie.tsx\nindex 91ca4be1a..7f54bba55 100644\n--- a/frontend/src/scenes/trends/viz/ActionsPie.tsx\n+++ b/frontend/src/scenes/trends/viz/ActionsPie.tsx\n@@ -4,7 +4,7 @@ import React, { useState, useEffect } from 'react'\n import { Loading } from 'lib/utils'\n import { LineGraph } from '../../insights/LineGraph'\n import { getChartColors } from 'lib/colors'\n-import { useValues } from 'kea'\n+import { useValues, useActions } from 'kea'\n import { trendsLogic } from 'scenes/trends/trendsLogic'\n import { ChartParams, TrendResultWithAggregate } from '~/types'\n \n@@ -19,11 +19,13 @@ export function ActionsPie({\n     const [data, setData] = useState<Record<string, any>[] | null>(null)\n     const [total, setTotal] = useState(0)\n     const logic = trendsLogic({ dashboardItemId, view, filters: filtersParam, cachedResults })\n+    const { loadPeople } = useActions(logic)\n     const { results, resultsLoading } = useValues(logic)\n \n     function updateData(): void {\n         const _data = results as TrendResultWithAggregate[]\n         _data.sort((a, b) => b.aggregated_value - a.aggregated_value)\n+        const days = results.length > 0 ? results[0].days : []\n \n         const colorList = getChartColors(color)\n \n@@ -31,6 +33,8 @@ export function ActionsPie({\n             {\n                 labels: _data.map((item) => item.label),\n                 data: _data.map((item) => item.aggregated_value),\n+                actions: _data.map((item) => item.action),\n+                days,\n                 backgroundColor: colorList,\n                 hoverBackgroundColor: colorList,\n                 hoverBorderColor: colorList,\n@@ -60,6 +64,14 @@ export function ActionsPie({\n                         labels={data[0].labels}\n                         inSharedMode={inSharedMode}\n                         dashboardItemId={dashboardItemId}\n+                        onClick={(point) => {\n+                            const { dataset } = point\n+                            const action = dataset.actions[point.index]\n+                            const label = dataset.labels[point.index]\n+                            const date_from = dataset.days[0]\n+                            const date_to = dataset.days[dataset.days.length - 1]\n+                            loadPeople(action, label, date_from, date_to, null)\n+                        }}\n                     />\n                 </div>\n                 <h1>\ndiff --git a/posthog/queries/test/test_trends.py b/posthog/queries/test/test_trends.py\nindex 7635e22f8..560adff54 100644\n--- a/posthog/queries/test/test_trends.py\n+++ b/posthog/queries/test/test_trends.py\n@@ -3,7 +3,7 @@ from typing import List\n \n from freezegun import freeze_time\n \n-from posthog.constants import TREND_FILTER_TYPE_EVENTS, TRENDS_LIFECYCLE, TRENDS_TABLE\n+from posthog.constants import TREND_FILTER_TYPE_EVENTS, TRENDS_BAR_VALUE, TRENDS_LIFECYCLE, TRENDS_TABLE\n from posthog.models import (\n     Action,\n     ActionStep,\n@@ -2028,6 +2028,37 @@ def trend_test_factory(trends, event_factory, person_factory, action_factory, co\n             result = trends().run(filter_3, self.team,)\n             self.assertEqual(result[0][\"count\"], 1)\n \n+        def test_bar_chart_by_value(self):\n+            self._create_events()\n+\n+            with freeze_time(\"2020-01-04T13:00:01Z\"):\n+                # with self.assertNumQueries(16):\n+                response = trends().run(\n+                    Filter(\n+                        data={\n+                            \"date_from\": \"-7d\",\n+                            \"events\": [{\"id\": \"sign up\"}, {\"id\": \"no events\"}],\n+                            \"display\": TRENDS_BAR_VALUE,\n+                        }\n+                    ),\n+                    self.team,\n+                )\n+            self.assertEqual(response[0][\"aggregated_value\"], 4)\n+            self.assertEqual(response[1][\"aggregated_value\"], 1)\n+            self.assertEqual(\n+                response[0][\"days\"],\n+                [\n+                    \"2019-12-28\",\n+                    \"2019-12-29\",\n+                    \"2019-12-30\",\n+                    \"2019-12-31\",\n+                    \"2020-01-01\",\n+                    \"2020-01-02\",\n+                    \"2020-01-03\",\n+                    \"2020-01-04\",\n+                ],\n+            )\n+\n     return TestTrends\n \n \n"
  },
  "593679c0337599c182c87d7ad2255d79c8d3f6b8": {
    "hash": "593679c0337599c182c87d7ad2255d79c8d3f6b8",
    "message": "Revert \"#3765 Show cohort for bar chart (Insights > Trends) (#3825)\" (#4052)\n    \n    This reverts commit 03dc30c4e47c6c2a9ce7f5d6accbb33b167a2c7e.",
    "diff": "commit 593679c0337599c182c87d7ad2255d79c8d3f6b8\nAuthor: Eric Duong <eeoneric@gmail.com>\nDate:   Tue Apr 20 15:51:54 2021 -0400\n\n    Revert \"#3765 Show cohort for bar chart (Insights > Trends) (#3825)\" (#4052)\n    \n    This reverts commit 03dc30c4e47c6c2a9ce7f5d6accbb33b167a2c7e.\n\ndiff --git a/ee/clickhouse/queries/trends/normal.py b/ee/clickhouse/queries/trends/normal.py\nindex e8e427fa6..8639da9c2 100644\n--- a/ee/clickhouse/queries/trends/normal.py\n+++ b/ee/clickhouse/queries/trends/normal.py\n@@ -1,4 +1,3 @@\n-from datetime import timedelta\n from typing import Any, Callable, Dict, List, Tuple\n \n from django.utils import timezone\n@@ -53,14 +52,11 @@ class ClickhouseTrendsNormal:\n \n         if filter.display in TRENDS_DISPLAY_BY_VALUE:\n             content_sql = VOLUME_TOTAL_AGGREGATE_SQL.format(**content_sql_params)\n-            time_range = self._enumerate_time_range(filter, seconds_in_interval)\n \n             return (\n                 content_sql,\n                 params,\n-                lambda result: [\n-                    {\"aggregated_value\": result[0][0] if result and len(result) else 0, \"days\": time_range}\n-                ],\n+                lambda result: [{\"aggregated_value\": result[0][0] if result and len(result) else 0}],\n             )\n         else:\n \n@@ -80,20 +76,6 @@ class ClickhouseTrendsNormal:\n             final_query = AGGREGATE_SQL.format(null_sql=null_sql, content_sql=content_sql)\n             return final_query, params, self._parse_normal_result(filter)\n \n-    def _enumerate_time_range(self, filter: Filter, seconds_in_interval: int) -> List:\n-        date_from = filter.date_from\n-        date_to = filter.date_to\n-        delta = timedelta(seconds=seconds_in_interval)\n-        time_range = []\n-        while date_from <= date_to:\n-            time_range.append(\n-                date_from.strftime(\n-                    \"%Y-%m-%d{}\".format(\" %H:%M:%S\" if filter.interval == \"hour\" or filter.interval == \"minute\" else \"\")\n-                )\n-            )\n-            date_from += delta\n-        return time_range\n-\n     def _parse_normal_result(self, filter: Filter) -> Callable:\n         def _parse(result: List) -> List:\n             parsed_results = []\ndiff --git a/frontend/src/scenes/insights/LineGraph.js b/frontend/src/scenes/insights/LineGraph.js\nindex 2f75fbce4..24287648d 100644\n--- a/frontend/src/scenes/insights/LineGraph.js\n+++ b/frontend/src/scenes/insights/LineGraph.js\n@@ -329,11 +329,7 @@ export function LineGraph({\n             options = {\n                 responsive: true,\n                 maintainAspectRatio: false,\n-                hover: {\n-                    mode: 'index',\n-                    onHover: options.hover.onHover,\n-                },\n-                onClick: options.onClick,\n+                hover: { mode: 'index' },\n             }\n         }\n \ndiff --git a/frontend/src/scenes/trends/PersonModal.tsx b/frontend/src/scenes/trends/PersonModal.tsx\nindex 7b1b0c91c..c50674741 100644\n--- a/frontend/src/scenes/trends/PersonModal.tsx\n+++ b/frontend/src/scenes/trends/PersonModal.tsx\n@@ -25,8 +25,6 @@ export function PersonModal({ visible, view, onSaveCohort }: Props): JSX.Element\n     const title =\n         filters.shown_as === 'Stickiness'\n             ? `\"${people?.label}\" stickiness ${people?.day} day${people?.day === 1 ? '' : 's'}`\n-            : filters.display === 'ActionsBarValue' || filters.display === 'ActionsPie'\n-            ? `\"${people?.label}\"`\n             : `\"${people?.label}\" on ${people?.day ? dayjs(people.day).format('ll') : '...'}`\n     const closeModal = (): void => setShowingPeople(false)\n     return (\ndiff --git a/frontend/src/scenes/trends/trendsLogic.ts b/frontend/src/scenes/trends/trendsLogic.ts\nindex d31c38c47..f09105f56 100644\n--- a/frontend/src/scenes/trends/trendsLogic.ts\n+++ b/frontend/src/scenes/trends/trendsLogic.ts\n@@ -56,8 +56,7 @@ interface TrendPeople {\n interface PeopleParamType {\n     action: ActionFilter\n     label: string\n-    date_to?: string | number\n-    date_from?: string | number\n+    day?: string | number\n     breakdown_value?: string\n     target_date?: number\n     lifecycle_type?: string\n@@ -97,7 +96,7 @@ function filterClientSideParams(filters: Partial<FilterType>): Partial<FilterTyp\n }\n \n function parsePeopleParams(peopleParams: PeopleParamType, filters: Partial<FilterType>): string {\n-    const { action, date_from, date_to, breakdown_value, ...restParams } = peopleParams\n+    const { action, day, breakdown_value, ...restParams } = peopleParams\n     const params = filterClientSideParams({\n         ...filters,\n         entity_id: action.id,\n@@ -108,15 +107,15 @@ function parsePeopleParams(peopleParams: PeopleParamType, filters: Partial<Filte\n \n     // casting here is not the best\n     if (filters.shown_as === ShownAsValue.STICKINESS) {\n-        params.stickiness_days = date_from as number\n+        params.stickiness_days = day as number\n     } else if (params.display === ACTIONS_LINE_GRAPH_CUMULATIVE) {\n-        params.date_to = date_from as string\n+        params.date_to = day as string\n     } else if (filters.shown_as === ShownAsValue.LIFECYCLE) {\n         params.date_from = filters.date_from\n         params.date_to = filters.date_to\n     } else {\n-        params.date_from = date_from as string\n-        params.date_to = date_to as string\n+        params.date_from = day as string\n+        params.date_to = day as string\n     }\n \n     // If breakdown type is cohort, we use breakdown_value\n@@ -210,14 +209,7 @@ export const trendsLogic = kea<\n     actions: () => ({\n         setFilters: (filters, mergeFilters = true) => ({ filters, mergeFilters }),\n         setDisplay: (display) => ({ display }),\n-\n-        loadPeople: (action, label, date_from, date_to, breakdown_value) => ({\n-            action,\n-            label,\n-            date_from,\n-            date_to,\n-            breakdown_value,\n-        }),\n+        loadPeople: (action, label, day, breakdown_value) => ({ action, label, day, breakdown_value }),\n         saveCohortWithFilters: (cohortName: string) => ({ cohortName }),\n         loadMorePeople: true,\n         refreshCohort: true,\n@@ -316,10 +308,7 @@ export const trendsLogic = kea<\n     }),\n \n     selectors: () => ({\n-        filtersLoading: [\n-            () => [teamLogic.selectors.currentTeamLoading],\n-            (currentTeamLoading: any) => currentTeamLoading,\n-        ],\n+        filtersLoading: [() => [teamLogic.selectors.currentTeamLoading], (currentTeamLoading) => currentTeamLoading],\n         results: [(selectors) => [selectors._results], (response) => response.result],\n         resultsLoading: [(selectors) => [selectors._resultsLoading], (_resultsLoading) => _resultsLoading],\n         loadMoreBreakdownUrl: [(selectors) => [selectors._results], (response) => response.next],\n@@ -395,10 +384,7 @@ export const trendsLogic = kea<\n         saveCohortWithFilters: ({ cohortName }) => {\n             if (values.people) {\n                 const { label, action, day, breakdown_value } = values.people\n-                const filterParams = parsePeopleParams(\n-                    { label, action, date_from: day, date_to: day, breakdown_value },\n-                    values.filters\n-                )\n+                const filterParams = parsePeopleParams({ label, action, day, breakdown_value }, values.filters)\n                 const cohortParams = {\n                     is_static: true,\n                     name: cohortName,\n@@ -413,28 +399,22 @@ export const trendsLogic = kea<\n                 errorToast(undefined, \"We couldn't create your cohort:\")\n             }\n         },\n-        loadPeople: async ({ label, action, date_from, date_to, breakdown_value }, breakpoint) => {\n+        loadPeople: async ({ label, action, day, breakdown_value }, breakpoint) => {\n             let people = []\n             if (values.filters.shown_as === ShownAsValue.LIFECYCLE) {\n                 const filterParams = parsePeopleParams(\n-                    { label, action, target_date: date_from, lifecycle_type: breakdown_value },\n+                    { label, action, target_date: day, lifecycle_type: breakdown_value },\n                     values.filters\n                 )\n-                actions.setPeople(null, null, action, label, date_from, breakdown_value, null)\n+                actions.setPeople(null, null, action, label, day, breakdown_value, null)\n                 people = await api.get(`api/person/lifecycle/?${filterParams}`)\n             } else if (values.filters.shown_as === ShownAsValue.STICKINESS) {\n-                const filterParams = parsePeopleParams(\n-                    { label, action, date_from, date_to, breakdown_value },\n-                    values.filters\n-                )\n-                actions.setPeople(null, null, action, label, date_from, breakdown_value, null)\n+                const filterParams = parsePeopleParams({ label, action, day, breakdown_value }, values.filters)\n+                actions.setPeople(null, null, action, label, day, breakdown_value, null)\n                 people = await api.get(`api/person/stickiness/?${filterParams}`)\n             } else {\n-                const filterParams = parsePeopleParams(\n-                    { label, action, date_from, date_to, breakdown_value },\n-                    values.filters\n-                )\n-                actions.setPeople(null, null, action, label, date_from, breakdown_value, null)\n+                const filterParams = parsePeopleParams({ label, action, day, breakdown_value }, values.filters)\n+                actions.setPeople(null, null, action, label, day, breakdown_value, null)\n                 people = await api.get(`api/action/people/?${filterParams}`)\n             }\n             breakpoint()\n@@ -443,7 +423,7 @@ export const trendsLogic = kea<\n                 people.results[0]?.count,\n                 action,\n                 label,\n-                date_from,\n+                day,\n                 breakdown_value,\n                 people.next\n             )\ndiff --git a/frontend/src/scenes/trends/viz/ActionsBarValueGraph.tsx b/frontend/src/scenes/trends/viz/ActionsBarValueGraph.tsx\nindex c95007d70..a53de1532 100644\n--- a/frontend/src/scenes/trends/viz/ActionsBarValueGraph.tsx\n+++ b/frontend/src/scenes/trends/viz/ActionsBarValueGraph.tsx\n@@ -2,7 +2,7 @@ import React, { useState, useEffect } from 'react'\n import { Loading } from 'lib/utils'\n import { LineGraph } from '../../insights/LineGraph'\n import { getChartColors } from 'lib/colors'\n-import { useActions, useValues } from 'kea'\n+import { useValues } from 'kea'\n import { trendsLogic } from 'scenes/trends/trendsLogic'\n import { LineGraphEmptyState } from '../../insights/EmptyStates'\n import { ViewType } from 'scenes/insights/insightLogic'\n@@ -29,21 +29,19 @@ export function ActionsBarValueGraph({\n     const [data, setData] = useState<DataSet[] | null>(null)\n     const [total, setTotal] = useState(0)\n     const logic = trendsLogic({ dashboardItemId, view, filters: filtersParam, cachedResults })\n-    const { loadPeople } = useActions(logic)\n     const { results, resultsLoading } = useValues(logic)\n \n     function updateData(): void {\n         const _data = [...results] as TrendResultWithAggregate[]\n         _data.sort((a, b) => b.aggregated_value - a.aggregated_value)\n+\n         const colorList = getChartColors(color)\n-        const days = results.length > 0 ? results[0].days : []\n \n         setData([\n             {\n                 labels: _data.map((item) => item.label),\n                 data: _data.map((item) => item.aggregated_value),\n                 actions: _data.map((item) => item.action),\n-                days,\n                 backgroundColor: colorList,\n                 hoverBackgroundColor: colorList,\n                 hoverBorderColor: colorList,\n@@ -71,18 +69,6 @@ export function ActionsBarValueGraph({\n                 labels={data[0].labels}\n                 dashboardItemId={dashboardItemId}\n                 totalValue={total}\n-                onClick={\n-                    dashboardItemId\n-                        ? null\n-                        : (point) => {\n-                              const { dataset } = point\n-                              const action = dataset.actions[point.index]\n-                              const label = dataset.labels[point.index]\n-                              const date_from = dataset.days[0]\n-                              const date_to = dataset.days[dataset.days.length - 1]\n-                              loadPeople(action, label, date_from, date_to, null)\n-                          }\n-                }\n             />\n         ) : (\n             <LineGraphEmptyState color={color} isDashboard={!!dashboardItemId} />\ndiff --git a/frontend/src/scenes/trends/viz/ActionsLineGraph.tsx b/frontend/src/scenes/trends/viz/ActionsLineGraph.tsx\nindex 4dfc98bae..d94dfc963 100644\n--- a/frontend/src/scenes/trends/viz/ActionsLineGraph.tsx\n+++ b/frontend/src/scenes/trends/viz/ActionsLineGraph.tsx\n@@ -51,7 +51,6 @@ export function ActionsLineGraph({\n                                   dataset.action || 'session',\n                                   dataset.label,\n                                   day,\n-                                  day,\n                                   dataset.breakdown_value || dataset.status\n                               )\n                           }\ndiff --git a/frontend/src/scenes/trends/viz/ActionsPie.tsx b/frontend/src/scenes/trends/viz/ActionsPie.tsx\nindex 7f54bba55..91ca4be1a 100644\n--- a/frontend/src/scenes/trends/viz/ActionsPie.tsx\n+++ b/frontend/src/scenes/trends/viz/ActionsPie.tsx\n@@ -4,7 +4,7 @@ import React, { useState, useEffect } from 'react'\n import { Loading } from 'lib/utils'\n import { LineGraph } from '../../insights/LineGraph'\n import { getChartColors } from 'lib/colors'\n-import { useValues, useActions } from 'kea'\n+import { useValues } from 'kea'\n import { trendsLogic } from 'scenes/trends/trendsLogic'\n import { ChartParams, TrendResultWithAggregate } from '~/types'\n \n@@ -19,13 +19,11 @@ export function ActionsPie({\n     const [data, setData] = useState<Record<string, any>[] | null>(null)\n     const [total, setTotal] = useState(0)\n     const logic = trendsLogic({ dashboardItemId, view, filters: filtersParam, cachedResults })\n-    const { loadPeople } = useActions(logic)\n     const { results, resultsLoading } = useValues(logic)\n \n     function updateData(): void {\n         const _data = results as TrendResultWithAggregate[]\n         _data.sort((a, b) => b.aggregated_value - a.aggregated_value)\n-        const days = results.length > 0 ? results[0].days : []\n \n         const colorList = getChartColors(color)\n \n@@ -33,8 +31,6 @@ export function ActionsPie({\n             {\n                 labels: _data.map((item) => item.label),\n                 data: _data.map((item) => item.aggregated_value),\n-                actions: _data.map((item) => item.action),\n-                days,\n                 backgroundColor: colorList,\n                 hoverBackgroundColor: colorList,\n                 hoverBorderColor: colorList,\n@@ -64,14 +60,6 @@ export function ActionsPie({\n                         labels={data[0].labels}\n                         inSharedMode={inSharedMode}\n                         dashboardItemId={dashboardItemId}\n-                        onClick={(point) => {\n-                            const { dataset } = point\n-                            const action = dataset.actions[point.index]\n-                            const label = dataset.labels[point.index]\n-                            const date_from = dataset.days[0]\n-                            const date_to = dataset.days[dataset.days.length - 1]\n-                            loadPeople(action, label, date_from, date_to, null)\n-                        }}\n                     />\n                 </div>\n                 <h1>\ndiff --git a/posthog/queries/test/test_trends.py b/posthog/queries/test/test_trends.py\nindex 560adff54..7635e22f8 100644\n--- a/posthog/queries/test/test_trends.py\n+++ b/posthog/queries/test/test_trends.py\n@@ -3,7 +3,7 @@ from typing import List\n \n from freezegun import freeze_time\n \n-from posthog.constants import TREND_FILTER_TYPE_EVENTS, TRENDS_BAR_VALUE, TRENDS_LIFECYCLE, TRENDS_TABLE\n+from posthog.constants import TREND_FILTER_TYPE_EVENTS, TRENDS_LIFECYCLE, TRENDS_TABLE\n from posthog.models import (\n     Action,\n     ActionStep,\n@@ -2028,37 +2028,6 @@ def trend_test_factory(trends, event_factory, person_factory, action_factory, co\n             result = trends().run(filter_3, self.team,)\n             self.assertEqual(result[0][\"count\"], 1)\n \n-        def test_bar_chart_by_value(self):\n-            self._create_events()\n-\n-            with freeze_time(\"2020-01-04T13:00:01Z\"):\n-                # with self.assertNumQueries(16):\n-                response = trends().run(\n-                    Filter(\n-                        data={\n-                            \"date_from\": \"-7d\",\n-                            \"events\": [{\"id\": \"sign up\"}, {\"id\": \"no events\"}],\n-                            \"display\": TRENDS_BAR_VALUE,\n-                        }\n-                    ),\n-                    self.team,\n-                )\n-            self.assertEqual(response[0][\"aggregated_value\"], 4)\n-            self.assertEqual(response[1][\"aggregated_value\"], 1)\n-            self.assertEqual(\n-                response[0][\"days\"],\n-                [\n-                    \"2019-12-28\",\n-                    \"2019-12-29\",\n-                    \"2019-12-30\",\n-                    \"2019-12-31\",\n-                    \"2020-01-01\",\n-                    \"2020-01-02\",\n-                    \"2020-01-03\",\n-                    \"2020-01-04\",\n-                ],\n-            )\n-\n     return TestTrends\n \n \n"
  },
  "14b420da0a5a12278dcf88086b1b3fd4927c1f58": {
    "hash": "14b420da0a5a12278dcf88086b1b3fd4927c1f58",
    "message": "fix(plugin-server): Fix cohort matching in actions (#11388)\n    \n    * fix(plugin-server): Remove wild clickhouseQuery in ingestion pipeline\n    \n    Point queries against clickhouse are slow and we should avoid them.\n    They're also not instrumented.\n    \n    The postgres table already used in the method previously contains the\n    right data. Use that instead.\n    \n    Reference: https://github.com/PostHog/posthog/blob/master/posthog/models/cohort/cohort.py#L274-L316\n    \n    * Fixup and test doesPersonBelongToCohort\n    \n    * Handle NULLs",
    "diff": "commit 14b420da0a5a12278dcf88086b1b3fd4927c1f58\nAuthor: Karl-Aksel Puulmann <macobo@users.noreply.github.com>\nDate:   Mon Aug 22 11:07:56 2022 +0300\n\n    fix(plugin-server): Fix cohort matching in actions (#11388)\n    \n    * fix(plugin-server): Remove wild clickhouseQuery in ingestion pipeline\n    \n    Point queries against clickhouse are slow and we should avoid them.\n    They're also not instrumented.\n    \n    The postgres table already used in the method previously contains the\n    right data. Use that instead.\n    \n    Reference: https://github.com/PostHog/posthog/blob/master/posthog/models/cohort/cohort.py#L274-L316\n    \n    * Fixup and test doesPersonBelongToCohort\n    \n    * Handle NULLs\n\ndiff --git a/plugin-server/src/types.ts b/plugin-server/src/types.ts\nindex 94b3bfbf9..767d18b90 100644\n--- a/plugin-server/src/types.ts\n+++ b/plugin-server/src/types.ts\n@@ -711,7 +711,7 @@ export interface Cohort {\n     last_calculation: string\n     errors_calculating: number\n     is_static: boolean\n-    version: number\n+    version: number | null\n     pending_version: number\n }\n \ndiff --git a/plugin-server/src/utils/db/db.ts b/plugin-server/src/utils/db/db.ts\nindex 071c03b0b..40bfd0357 100644\n--- a/plugin-server/src/utils/db/db.ts\n+++ b/plugin-server/src/utils/db/db.ts\n@@ -1237,7 +1237,7 @@ export class DB {\n                 cohort.last_calculation ?? new Date().toISOString(),\n                 cohort.errors_calculating ?? 0,\n                 cohort.is_static ?? false,\n-                cohort.version ?? 0,\n+                cohort.version,\n                 cohort.pending_version ?? cohort.version ?? 0,\n             ],\n             'createCohort'\n@@ -1245,34 +1245,27 @@ export class DB {\n         return insertResult.rows[0]\n     }\n \n-    public async doesPersonBelongToCohort(\n-        cohortId: number,\n-        person: IngestionPersonData,\n-        teamId: Team['id']\n-    ): Promise<boolean> {\n-        const chResult = await this.clickhouseQuery(\n-            `SELECT 1 FROM person_static_cohort\n-            WHERE\n-                team_id = ${teamId}\n-                AND cohort_id = ${cohortId}\n-                AND person_id = '${escapeClickHouseString(person.uuid)}'\n-            LIMIT 1`\n-        )\n-\n-        if (chResult.rows > 0) {\n-            // Cohort is static and our person belongs to it\n-            return true\n-        }\n-\n+    public async doesPersonBelongToCohort(cohortId: number, person: IngestionPersonData): Promise<boolean> {\n         const psqlResult = await this.postgresQuery(\n-            `SELECT EXISTS (SELECT 1 FROM posthog_cohortpeople WHERE cohort_id = $1 AND person_id = $2)`,\n+            `\n+            SELECT count(1) AS count\n+            FROM posthog_cohortpeople\n+            JOIN posthog_cohort ON (posthog_cohort.id = posthog_cohortpeople.cohort_id)\n+            WHERE cohort_id=$1\n+              AND person_id=$2\n+              AND posthog_cohortpeople.version IS NOT DISTINCT FROM posthog_cohort.version\n+            `,\n             [cohortId, person.id],\n             'doesPersonBelongToCohort'\n         )\n-        return psqlResult.rows[0].exists\n+        return psqlResult.rows[0].count > 0\n     }\n \n-    public async addPersonToCohort(cohortId: number, personId: Person['id'], version: number): Promise<CohortPeople> {\n+    public async addPersonToCohort(\n+        cohortId: number,\n+        personId: Person['id'],\n+        version: number | null\n+    ): Promise<CohortPeople> {\n         const insertResult = await this.postgresQuery(\n             `INSERT INTO posthog_cohortpeople (cohort_id, person_id, version) VALUES ($1, $2, $3) RETURNING *;`,\n             [cohortId, personId, version],\ndiff --git a/plugin-server/src/worker/ingestion/action-matcher.ts b/plugin-server/src/worker/ingestion/action-matcher.ts\nindex 15df062ba..bbbbee282 100644\n--- a/plugin-server/src/worker/ingestion/action-matcher.ts\n+++ b/plugin-server/src/worker/ingestion/action-matcher.ts\n@@ -373,7 +373,7 @@ export class ActionMatcher {\n         if (isNaN(cohortId)) {\n             throw new Error(`Can't match against invalid cohort ID value \"${filter.value}!\"`)\n         }\n-        return await this.db.doesPersonBelongToCohort(Number(filter.value), person, person.team_id)\n+        return await this.db.doesPersonBelongToCohort(Number(filter.value), person)\n     }\n \n     /**\ndiff --git a/plugin-server/tests/main/db.test.ts b/plugin-server/tests/main/db.test.ts\nindex b611ca736..c6fdefc3b 100644\n--- a/plugin-server/tests/main/db.test.ts\n+++ b/plugin-server/tests/main/db.test.ts\n@@ -1,6 +1,6 @@\n import { DateTime } from 'luxon'\n \n-import { Hub, Person, PropertyOperator, PropertyUpdateOperation, Team, TimestampFormat } from '../../src/types'\n+import { Cohort, Hub, Person, PropertyOperator, PropertyUpdateOperation, Team, TimestampFormat } from '../../src/types'\n import { DB } from '../../src/utils/db/db'\n import { createHub } from '../../src/utils/db/hub'\n import { generateKafkaPersonUpdateMessage } from '../../src/utils/db/utils'\n@@ -1095,4 +1095,57 @@ describe('DB', () => {\n             )\n         })\n     })\n+\n+    describe('doesPersonBelongToCohort()', () => {\n+        let team: Team\n+        let cohort: Cohort\n+        let person: Person\n+\n+        beforeEach(async () => {\n+            team = await getFirstTeam(hub)\n+            cohort = await hub.db.createCohort({\n+                name: 'testCohort',\n+                description: '',\n+                team_id: team.id,\n+                version: 10,\n+            })\n+            person = await db.createPerson(TIMESTAMP, {}, {}, {}, team.id, null, false, new UUIDT().toString(), [])\n+        })\n+\n+        it('returns false if person does not belong to cohort', async () => {\n+            const cohort2 = await hub.db.createCohort({\n+                name: 'testCohort2',\n+                description: '',\n+                team_id: team.id,\n+            })\n+            await hub.db.addPersonToCohort(cohort2.id, person.id, cohort.version)\n+\n+            expect(await hub.db.doesPersonBelongToCohort(cohort.id, person)).toEqual(false)\n+        })\n+\n+        it('returns true if person belongs to cohort', async () => {\n+            await hub.db.addPersonToCohort(cohort.id, person.id, cohort.version)\n+\n+            expect(await hub.db.doesPersonBelongToCohort(cohort.id, person)).toEqual(true)\n+        })\n+\n+        it('returns false if person does not belong to current version of the cohort', async () => {\n+            await hub.db.addPersonToCohort(cohort.id, person.id, -1)\n+\n+            expect(await hub.db.doesPersonBelongToCohort(cohort.id, person)).toEqual(false)\n+        })\n+\n+        it('handles NULL version cohorts', async () => {\n+            const cohort2 = await hub.db.createCohort({\n+                name: 'null_cohort',\n+                description: '',\n+                team_id: team.id,\n+                version: null,\n+            })\n+            expect(await hub.db.doesPersonBelongToCohort(cohort2.id, person)).toEqual(false)\n+\n+            await hub.db.addPersonToCohort(cohort2.id, person.id, null)\n+            expect(await hub.db.doesPersonBelongToCohort(cohort2.id, person)).toEqual(true)\n+        })\n+    })\n })\ndiff --git a/plugin-server/tests/worker/ingestion/action-matcher.test.ts b/plugin-server/tests/worker/ingestion/action-matcher.test.ts\nindex 5e855d815..15e8bdcf8 100644\n--- a/plugin-server/tests/worker/ingestion/action-matcher.test.ts\n+++ b/plugin-server/tests/worker/ingestion/action-matcher.test.ts\n@@ -16,7 +16,6 @@ import { UUIDT } from '../../../src/utils/utils'\n import { ActionMatcher, castingCompare } from '../../../src/worker/ingestion/action-matcher'\n import { commonUserId } from '../../helpers/plugins'\n import { insertRow, resetTestDatabase } from '../../helpers/sql'\n-import { KafkaProducerWrapper } from './../../../src/utils/db/kafka-producer-wrapper'\n \n jest.mock('../../../src/utils/status')\n \n@@ -789,66 +788,6 @@ describe('ActionMatcher', () => {\n             ).toEqual([actionDefinitionAllUsers])\n         })\n \n-        it('returns a match in case of a CH static cohort match', async () => {\n-            // Static cohorts are stored in their own ClickHouse table, hence this path has its own test\n-            const testCohortStatic = await hub.db.createCohort({\n-                name: 'Test',\n-                description: 'Test',\n-                created_by_id: commonUserId,\n-                team_id: 2,\n-                is_static: true,\n-            })\n-\n-            const actionDefinition: Action = await createTestAction([\n-                {\n-                    properties: [{ type: 'cohort', key: 'id', value: testCohortStatic.id }],\n-                },\n-            ])\n-\n-            const eventExamplePersonOk = createTestEvent({\n-                event: 'trigger a webhook',\n-                distinctId: 'static_cohort_person',\n-            })\n-\n-            await hub.db.createPerson(\n-                DateTime.local(),\n-                {},\n-                {},\n-                {},\n-                actionDefinition.team_id,\n-                null,\n-                true,\n-                new UUIDT().toString(),\n-                [eventExamplePersonOk.distinctId]\n-            )\n-\n-            hub.db.kafkaProducer = {} as KafkaProducerWrapper\n-\n-            // mocking the query to not have to create a whole kafka produce\n-            // topic to insert a person into person_static_cohort\n-            jest.spyOn(hub.db, 'clickhouseQuery')\n-                .mockReturnValueOnce({\n-                    rows: 1,\n-                } as any)\n-                .mockReturnValueOnce({\n-                    rows: 0,\n-                } as any)\n-\n-            expect(\n-                await actionMatcher.match(\n-                    eventExamplePersonOk,\n-                    await hub.db.fetchPerson(actionDefinition.team_id, eventExamplePersonOk.distinctId)\n-                )\n-            ).toEqual([actionDefinition])\n-\n-            expect(\n-                await actionMatcher.match(\n-                    eventExamplePersonOk,\n-                    await hub.db.fetchPerson(actionDefinition.team_id, eventExamplePersonOk.distinctId)\n-                )\n-            ).toEqual([])\n-        })\n-\n         it('returns a match in case of element href equals', async () => {\n             const actionDefinitionLinkHref: Action = await createTestAction([\n                 {\n"
  },
  "796d0ffd816ee98638da50d515b802717ac6a76e": {
    "hash": "796d0ffd816ee98638da50d515b802717ac6a76e",
    "message": "chore(plugin-server): Revert part of LazyPersonContainer (#11370)\n    \n    Async server is struggling so reverting all the code this change touched\n    in there.\n    \n    Relevant PR: https://github.com/PostHog/posthog/pull/11091",
    "diff": "commit 796d0ffd816ee98638da50d515b802717ac6a76e\nAuthor: Karl-Aksel Puulmann <macobo@users.noreply.github.com>\nDate:   Thu Aug 18 17:29:35 2022 +0300\n\n    chore(plugin-server): Revert part of LazyPersonContainer (#11370)\n    \n    Async server is struggling so reverting all the code this change touched\n    in there.\n    \n    Relevant PR: https://github.com/PostHog/posthog/pull/11091\n\ndiff --git a/plugin-server/src/worker/ingestion/action-matcher.ts b/plugin-server/src/worker/ingestion/action-matcher.ts\nindex a82811b82..15df062ba 100644\n--- a/plugin-server/src/worker/ingestion/action-matcher.ts\n+++ b/plugin-server/src/worker/ingestion/action-matcher.ts\n@@ -25,7 +25,6 @@ import { extractElements } from '../../utils/db/elements-chain'\n import { stringToBoolean } from '../../utils/env-utils'\n import { stringify } from '../../utils/utils'\n import { ActionManager } from './action-manager'\n-import { LazyPersonContainer } from './lazy-person-container'\n \n /** These operators can only be matched if the provided filter's value has the right type. */\n const propertyOperatorToRequiredValueType: Partial<Record<PropertyOperator, string[]>> = {\n@@ -111,7 +110,7 @@ export class ActionMatcher {\n     /** Get all actions matched to the event. */\n     public async match(\n         event: PostIngestionEvent,\n-        personContainer: LazyPersonContainer,\n+        person?: IngestionPersonData,\n         elements?: Element[]\n     ): Promise<Action[]> {\n         const matchingStart = new Date()\n@@ -121,7 +120,7 @@ export class ActionMatcher {\n             elements = rawElements ? extractElements(rawElements) : []\n         }\n         const teamActionsMatching: boolean[] = await Promise.all(\n-            teamActions.map((action) => this.checkAction(event, elements, personContainer, action))\n+            teamActions.map((action) => this.checkAction(event, elements, person, action))\n         )\n         const matches: Action[] = []\n         for (let i = 0; i < teamActionsMatching.length; i++) {\n@@ -143,18 +142,18 @@ export class ActionMatcher {\n     public async checkAction(\n         event: PostIngestionEvent,\n         elements: Element[] | undefined,\n-        personContainer: LazyPersonContainer,\n+        person: IngestionPersonData | undefined,\n         action: Action\n     ): Promise<boolean> {\n         for (const step of action.steps) {\n             try {\n-                if (await this.checkStep(event, elements, personContainer, step)) {\n+                if (await this.checkStep(event, elements, person, step)) {\n                     return true\n                 }\n             } catch (error) {\n                 captureException(error, {\n                     tags: { team_id: action.team_id },\n-                    extra: { event, elements, action, step },\n+                    extra: { event, elements, person, action, step },\n                 })\n             }\n         }\n@@ -170,7 +169,7 @@ export class ActionMatcher {\n     private async checkStep(\n         event: PostIngestionEvent,\n         elements: Element[] | undefined,\n-        personContainer: LazyPersonContainer,\n+        person: IngestionPersonData | undefined,\n         step: ActionStep\n     ): Promise<boolean> {\n         if (!elements) {\n@@ -180,7 +179,7 @@ export class ActionMatcher {\n             this.checkStepElement(elements, step) &&\n             this.checkStepUrl(event, step) &&\n             this.checkStepEvent(event, step) &&\n-            (await this.checkStepFilters(event, elements, personContainer, step))\n+            (await this.checkStepFilters(event, elements, person, step))\n         )\n     }\n \n@@ -281,14 +280,14 @@ export class ActionMatcher {\n     private async checkStepFilters(\n         event: PostIngestionEvent,\n         elements: Element[],\n-        personContainer: LazyPersonContainer,\n+        person: IngestionPersonData | undefined,\n         step: ActionStep\n     ): Promise<boolean> {\n         // CHECK CONDITIONS, OTHERWISE SKIPPED, OTHERWISE SKIPPED\n         if (step.properties && step.properties.length) {\n             // EVERY FILTER MUST BE A MATCH\n             for (const filter of step.properties) {\n-                if (!(await this.checkEventAgainstFilter(event, elements, personContainer, filter))) {\n+                if (!(await this.checkEventAgainstFilter(event, elements, person, filter))) {\n                     return false\n                 }\n             }\n@@ -302,20 +301,18 @@ export class ActionMatcher {\n     private async checkEventAgainstFilter(\n         event: PostIngestionEvent,\n         elements: Element[],\n-        personContainer: LazyPersonContainer,\n+        person: IngestionPersonData | undefined,\n         filter: PropertyFilter\n     ): Promise<boolean> {\n         switch (filter.type) {\n             case 'event':\n                 return this.checkEventAgainstEventFilter(event, filter)\n             case 'person':\n-                const person = await personContainer.get()\n                 return this.checkEventAgainstPersonFilter(person, filter)\n             case 'element':\n                 return this.checkEventAgainstElementFilter(elements, filter)\n             case 'cohort':\n-                const cohortPerson = await personContainer.get()\n-                return await this.checkEventAgainstCohortFilter(cohortPerson, filter)\n+                return await this.checkEventAgainstCohortFilter(person, filter)\n             default:\n                 return false\n         }\ndiff --git a/plugin-server/src/worker/ingestion/event-pipeline/4-prepareEventStep.ts b/plugin-server/src/worker/ingestion/event-pipeline/4-prepareEventStep.ts\nindex cf7dd31d6..bc560c9c6 100644\n--- a/plugin-server/src/worker/ingestion/event-pipeline/4-prepareEventStep.ts\n+++ b/plugin-server/src/worker/ingestion/event-pipeline/4-prepareEventStep.ts\n@@ -25,7 +25,7 @@ export async function prepareEventStep(\n     if (preIngestionEvent && preIngestionEvent.event !== '$snapshot') {\n         return runner.nextStep('createEventStep', preIngestionEvent, personContainer)\n     } else if (preIngestionEvent && preIngestionEvent.event === '$snapshot') {\n-        return runner.nextStep('runAsyncHandlersStep', preIngestionEvent as PostIngestionEvent, personContainer)\n+        return runner.nextStep('runAsyncHandlersStep', preIngestionEvent as PostIngestionEvent, undefined)\n     } else {\n         return null\n     }\ndiff --git a/plugin-server/src/worker/ingestion/event-pipeline/5-createEventStep.ts b/plugin-server/src/worker/ingestion/event-pipeline/5-createEventStep.ts\nindex d50f42956..89cd28b3e 100644\n--- a/plugin-server/src/worker/ingestion/event-pipeline/5-createEventStep.ts\n+++ b/plugin-server/src/worker/ingestion/event-pipeline/5-createEventStep.ts\n@@ -8,5 +8,6 @@ export async function createEventStep(\n     personContainer: LazyPersonContainer\n ): Promise<StepResult> {\n     const ingestionEvent = await runner.hub.eventsProcessor.createEvent(event, personContainer)\n-    return runner.nextStep('runAsyncHandlersStep', ingestionEvent, personContainer)\n+    const person = await personContainer.get()\n+    return runner.nextStep('runAsyncHandlersStep', ingestionEvent, person)\n }\ndiff --git a/plugin-server/src/worker/ingestion/event-pipeline/6-runAsyncHandlersStep.ts b/plugin-server/src/worker/ingestion/event-pipeline/6-runAsyncHandlersStep.ts\nindex 6759f5615..3e4dea721 100644\n--- a/plugin-server/src/worker/ingestion/event-pipeline/6-runAsyncHandlersStep.ts\n+++ b/plugin-server/src/worker/ingestion/event-pipeline/6-runAsyncHandlersStep.ts\n@@ -1,20 +1,16 @@\n import { runInstrumentedFunction } from '../../../main/utils'\n-import { Element, PostIngestionEvent } from '../../../types'\n+import { Element, IngestionPersonData, PostIngestionEvent } from '../../../types'\n import { convertToProcessedPluginEvent } from '../../../utils/event'\n import { runOnEvent, runOnSnapshot } from '../../plugins/run'\n-import { LazyPersonContainer } from '../lazy-person-container'\n import { EventPipelineRunner, StepResult } from './runner'\n \n export async function runAsyncHandlersStep(\n     runner: EventPipelineRunner,\n     event: PostIngestionEvent,\n-    personContainer: LazyPersonContainer\n+    person: IngestionPersonData | undefined\n ): Promise<StepResult> {\n     if (runner.hub.capabilities.processAsyncHandlers) {\n-        await Promise.all([\n-            processOnEvent(runner, event),\n-            processWebhooks(runner, event, personContainer, event.elementsList),\n-        ])\n+        await Promise.all([processOnEvent(runner, event), processWebhooks(runner, event, person, event.elementsList)])\n     }\n \n     return null\n@@ -37,7 +33,7 @@ async function processOnEvent(runner: EventPipelineRunner, event: PostIngestionE\n async function processWebhooks(\n     runner: EventPipelineRunner,\n     event: PostIngestionEvent,\n-    personContainer: LazyPersonContainer,\n+    personContainer: IngestionPersonData | undefined,\n     elements: Element[] | undefined\n ) {\n     if (event.event !== '$snapshot') {\ndiff --git a/plugin-server/src/worker/ingestion/event-pipeline/runner.ts b/plugin-server/src/worker/ingestion/event-pipeline/runner.ts\nindex c926dff78..629381008 100644\n--- a/plugin-server/src/worker/ingestion/event-pipeline/runner.ts\n+++ b/plugin-server/src/worker/ingestion/event-pipeline/runner.ts\n@@ -90,8 +90,8 @@ export class EventPipelineRunner {\n \n     async runAsyncHandlersEventPipeline(event: PostIngestionEvent): Promise<EventPipelineResult> {\n         this.hub.statsd?.increment('kafka_queue.event_pipeline.start', { pipeline: 'asyncHandlers' })\n-        const personContainer = new LazyPersonContainer(event.teamId, event.distinctId, this.hub)\n-        const result = await this.runPipeline('runAsyncHandlersStep', event, personContainer)\n+        const person = await this.hub.db.fetchPerson(event.teamId, event.distinctId)\n+        const result = await this.runPipeline('runAsyncHandlersStep', event, person)\n         this.hub.statsd?.increment('kafka_queue.async_handlers.processed')\n         return result\n     }\ndiff --git a/plugin-server/src/worker/ingestion/hooks.ts b/plugin-server/src/worker/ingestion/hooks.ts\nindex ea1d8138e..13f06a4ae 100644\n--- a/plugin-server/src/worker/ingestion/hooks.ts\n+++ b/plugin-server/src/worker/ingestion/hooks.ts\n@@ -6,7 +6,6 @@ import { Action, Hook, IngestionPersonData, PostIngestionEvent } from '../../typ\n import { DB } from '../../utils/db/db'\n import fetch from '../../utils/fetch'\n import { stringify } from '../../utils/utils'\n-import { LazyPersonContainer } from './lazy-person-container'\n import { OrganizationManager } from './organization-manager'\n import { SiteUrlManager } from './site-url-manager'\n import { TeamManager } from './team-manager'\n@@ -72,14 +71,14 @@ export function getTokens(messageFormat: string): [string[], string] {\n     return [matchedTokens, tokenizedMessage]\n }\n \n-export async function getValueOfToken(\n+export function getValueOfToken(\n     action: Action,\n     event: PostIngestionEvent,\n-    personContainer: LazyPersonContainer,\n+    person: IngestionPersonData | undefined,\n     siteUrl: string,\n     webhookType: WebhookType,\n     tokenParts: string[]\n-): Promise<[string, string]> {\n+): [string, string] {\n     let text = ''\n     let markdown = ''\n \n@@ -87,7 +86,6 @@ export async function getValueOfToken(\n         // [user.name] and [user.foo] are DEPRECATED as they had odd mechanics\n         // [person] OR [event.properties.bar] should be used instead\n         if (tokenParts[1] === 'name') {\n-            const person = await personContainer.get()\n             ;[text, markdown] = getUserDetails(event, person, siteUrl, webhookType)\n         } else {\n             const propertyName = `$${tokenParts[1]}`\n@@ -96,7 +94,6 @@ export async function getValueOfToken(\n             markdown = text\n         }\n     } else if (tokenParts[0] === 'person') {\n-        const person = await personContainer.get()\n         if (tokenParts.length === 1) {\n             ;[text, markdown] = getUserDetails(event, person, siteUrl, webhookType)\n         } else if (tokenParts[1] === 'properties' && tokenParts.length > 2) {\n@@ -126,13 +123,13 @@ export async function getValueOfToken(\n     return [text, markdown]\n }\n \n-export async function getFormattedMessage(\n+export function getFormattedMessage(\n     action: Action,\n     event: PostIngestionEvent,\n-    personContainer: LazyPersonContainer,\n+    person: IngestionPersonData | undefined,\n     siteUrl: string,\n     webhookType: WebhookType\n-): Promise<[string, string]> {\n+): [string, string] {\n     const messageFormat = action.slack_message_format || '[action.name] was triggered by [person]'\n     let messageText: string\n     let messageMarkdown: string\n@@ -145,14 +142,7 @@ export async function getFormattedMessage(\n         for (const token of tokens) {\n             const tokenParts = token.match(/\\$\\w+|\\$\\$\\w+|\\w+/g) || []\n \n-            const [value, markdownValue] = await getValueOfToken(\n-                action,\n-                event,\n-                personContainer,\n-                siteUrl,\n-                webhookType,\n-                tokenParts\n-            )\n+            const [value, markdownValue] = getValueOfToken(action, event, person, siteUrl, webhookType, tokenParts)\n             values.push(value)\n             markdownValues.push(markdownValue)\n         }\n@@ -190,7 +180,7 @@ export class HookCommander {\n \n     public async findAndFireHooks(\n         event: PostIngestionEvent,\n-        personContainer: LazyPersonContainer,\n+        person: IngestionPersonData | undefined,\n         actionMatches: Action[]\n     ): Promise<void> {\n         if (!actionMatches.length) {\n@@ -209,7 +199,7 @@ export class HookCommander {\n         if (webhookUrl) {\n             const webhookRequests = actionMatches\n                 .filter((action) => action.post_to_slack)\n-                .map((action) => this.postWebhook(webhookUrl, action, event, personContainer))\n+                .map((action) => this.postWebhook(webhookUrl, action, event, person))\n             await Promise.all(webhookRequests).catch((error) => captureException(error))\n         }\n \n@@ -217,8 +207,6 @@ export class HookCommander {\n             const restHooks = actionMatches.map(({ hooks }) => hooks).flat()\n \n             if (restHooks.length > 0) {\n-                const person = await personContainer.get()\n-\n                 const restHookRequests = restHooks.map((hook) => this.postRestHook(hook, event, person))\n                 await Promise.all(restHookRequests).catch((error) => captureException(error))\n \n@@ -233,17 +221,11 @@ export class HookCommander {\n         webhookUrl: string,\n         action: Action,\n         event: PostIngestionEvent,\n-        personContainer: LazyPersonContainer\n+        person: IngestionPersonData | undefined\n     ): Promise<void> {\n         const webhookType = determineWebhookType(webhookUrl)\n         const siteUrl = await this.siteUrlManager.getSiteUrl()\n-        const [messageText, messageMarkdown] = await getFormattedMessage(\n-            action,\n-            event,\n-            personContainer,\n-            siteUrl || '',\n-            webhookType\n-        )\n+        const [messageText, messageMarkdown] = getFormattedMessage(action, event, person, siteUrl || '', webhookType)\n         let message: Record<string, any>\n         if (webhookType === WebhookType.Slack) {\n             message = {\ndiff --git a/plugin-server/tests/worker/ingestion/action-matcher.test.ts b/plugin-server/tests/worker/ingestion/action-matcher.test.ts\nindex 0300ed2e8..5e855d815 100644\n--- a/plugin-server/tests/worker/ingestion/action-matcher.test.ts\n+++ b/plugin-server/tests/worker/ingestion/action-matcher.test.ts\n@@ -7,14 +7,13 @@ import {\n     Element,\n     Hub,\n     Person,\n-    PostIngestionEvent,\n+    PreIngestionEvent,\n     PropertyOperator,\n     RawAction,\n } from '../../../src/types'\n import { createHub } from '../../../src/utils/db/hub'\n import { UUIDT } from '../../../src/utils/utils'\n import { ActionMatcher, castingCompare } from '../../../src/worker/ingestion/action-matcher'\n-import { LazyPersonContainer } from '../../../src/worker/ingestion/lazy-person-container'\n import { commonUserId } from '../../helpers/plugins'\n import { insertRow, resetTestDatabase } from '../../helpers/sql'\n import { KafkaProducerWrapper } from './../../../src/utils/db/kafka-producer-wrapper'\n@@ -26,14 +25,12 @@ describe('ActionMatcher', () => {\n     let closeServer: () => Promise<void>\n     let actionMatcher: ActionMatcher\n     let actionCounter: number\n-    let personContainer: LazyPersonContainer\n \n     beforeEach(async () => {\n         await resetTestDatabase(undefined, undefined, undefined, { withExtendedTestData: false })\n         ;[hub, closeServer] = await createHub()\n         actionMatcher = hub.actionMatcher\n         actionCounter = 0\n-        personContainer = createPersonContainer()\n     })\n \n     afterEach(async () => {\n@@ -80,7 +77,7 @@ describe('ActionMatcher', () => {\n     }\n \n     /** Return a test event created on a common base using provided property overrides. */\n-    function createTestEvent(overrides: Partial<IngestionEvent> = {}): PostIngestionEvent {\n+    function createTestEvent(overrides: Partial<PreIngestionEvent> = {}): PreIngestionEvent {\n         const url: string = overrides.properties?.$current_url ?? 'http://example.com/foo/'\n         return {\n             eventUuid: 'uuid1',\n@@ -96,8 +93,8 @@ describe('ActionMatcher', () => {\n     }\n \n     /** Return a test person created on a common base using provided property overrides. */\n-    function createPersonContainer(overrides: Partial<Person> = {}): LazyPersonContainer {\n-        const person = {\n+    function createTestPerson(overrides: Partial<Person> = {}): Person {\n+        return {\n             id: 2,\n             team_id: 2,\n             properties: {},\n@@ -110,7 +107,6 @@ describe('ActionMatcher', () => {\n             version: 0,\n             ...overrides,\n         }\n-        return new LazyPersonContainer(2, 'my-id', hub, person)\n     }\n \n     describe('#match()', () => {\n@@ -119,7 +115,7 @@ describe('ActionMatcher', () => {\n \n             const event = createTestEvent()\n \n-            expect(await actionMatcher.match(event, createPersonContainer({}))).toEqual([])\n+            expect(await actionMatcher.match(event)).toEqual([])\n         })\n \n         it('returns a match in case of event property operator exact', async () => {\n@@ -146,23 +142,23 @@ describe('ActionMatcher', () => {\n             const eventFooTrue = createTestEvent({ properties: { foo: true } })\n             const eventFooNull = createTestEvent({ properties: { foo: null } })\n \n-            expect(await actionMatcher.match(eventFooBar, personContainer)).toEqual([\n+            expect(await actionMatcher.match(eventFooBar)).toEqual([\n                 actionDefinitionOpExact,\n                 actionDefinitionOpUndefined,\n             ])\n-            expect(await actionMatcher.match(eventFooBarPolPot, personContainer)).toEqual([\n+            expect(await actionMatcher.match(eventFooBarPolPot)).toEqual([\n                 actionDefinitionOpExact,\n                 actionDefinitionOpUndefined,\n             ])\n-            expect(await actionMatcher.match(eventFooBaR, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFooBaz, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFooBarabara, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFooRabarbar, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFooNumber, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventNoNothing, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFigNumber, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFooTrue, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFooNull, personContainer)).toEqual([])\n+            expect(await actionMatcher.match(eventFooBaR)).toEqual([])\n+            expect(await actionMatcher.match(eventFooBaz)).toEqual([])\n+            expect(await actionMatcher.match(eventFooBarabara)).toEqual([])\n+            expect(await actionMatcher.match(eventFooRabarbar)).toEqual([])\n+            expect(await actionMatcher.match(eventFooNumber)).toEqual([])\n+            expect(await actionMatcher.match(eventNoNothing)).toEqual([])\n+            expect(await actionMatcher.match(eventFigNumber)).toEqual([])\n+            expect(await actionMatcher.match(eventFooTrue)).toEqual([])\n+            expect(await actionMatcher.match(eventFooNull)).toEqual([])\n         })\n \n         it('returns a match in case of event property operator is not', async () => {\n@@ -184,17 +180,17 @@ describe('ActionMatcher', () => {\n             const eventFooTrue = createTestEvent({ properties: { foo: true } })\n             const eventFooNull = createTestEvent({ properties: { foo: null } })\n \n-            expect(await actionMatcher.match(eventFooBar, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFooBarPolPot, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFooBaR, personContainer)).toEqual([actionDefinitionOpIsNot])\n-            expect(await actionMatcher.match(eventFooBaz, personContainer)).toEqual([actionDefinitionOpIsNot])\n-            expect(await actionMatcher.match(eventFooBarabara, personContainer)).toEqual([actionDefinitionOpIsNot])\n-            expect(await actionMatcher.match(eventFooRabarbar, personContainer)).toEqual([actionDefinitionOpIsNot])\n-            expect(await actionMatcher.match(eventFooNumber, personContainer)).toEqual([actionDefinitionOpIsNot])\n-            expect(await actionMatcher.match(eventNoNothing, personContainer)).toEqual([actionDefinitionOpIsNot])\n-            expect(await actionMatcher.match(eventFigNumber, personContainer)).toEqual([actionDefinitionOpIsNot])\n-            expect(await actionMatcher.match(eventFooTrue, personContainer)).toEqual([actionDefinitionOpIsNot])\n-            expect(await actionMatcher.match(eventFooNull, personContainer)).toEqual([actionDefinitionOpIsNot])\n+            expect(await actionMatcher.match(eventFooBar)).toEqual([])\n+            expect(await actionMatcher.match(eventFooBarPolPot)).toEqual([])\n+            expect(await actionMatcher.match(eventFooBaR)).toEqual([actionDefinitionOpIsNot])\n+            expect(await actionMatcher.match(eventFooBaz)).toEqual([actionDefinitionOpIsNot])\n+            expect(await actionMatcher.match(eventFooBarabara)).toEqual([actionDefinitionOpIsNot])\n+            expect(await actionMatcher.match(eventFooRabarbar)).toEqual([actionDefinitionOpIsNot])\n+            expect(await actionMatcher.match(eventFooNumber)).toEqual([actionDefinitionOpIsNot])\n+            expect(await actionMatcher.match(eventNoNothing)).toEqual([actionDefinitionOpIsNot])\n+            expect(await actionMatcher.match(eventFigNumber)).toEqual([actionDefinitionOpIsNot])\n+            expect(await actionMatcher.match(eventFooTrue)).toEqual([actionDefinitionOpIsNot])\n+            expect(await actionMatcher.match(eventFooNull)).toEqual([actionDefinitionOpIsNot])\n         })\n \n         it('returns a match in case of event property operator contains', async () => {\n@@ -218,17 +214,17 @@ describe('ActionMatcher', () => {\n             const eventFooTrue = createTestEvent({ properties: { foo: true } })\n             const eventFooNull = createTestEvent({ properties: { foo: null } })\n \n-            expect(await actionMatcher.match(eventFooBar, personContainer)).toEqual([actionDefinitionOpContains])\n-            expect(await actionMatcher.match(eventFooBarPolPot, personContainer)).toEqual([actionDefinitionOpContains])\n-            expect(await actionMatcher.match(eventFooBaR, personContainer)).toEqual([actionDefinitionOpContains])\n-            expect(await actionMatcher.match(eventFooBaz, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFooBarabara, personContainer)).toEqual([actionDefinitionOpContains])\n-            expect(await actionMatcher.match(eventFooRabarbar, personContainer)).toEqual([actionDefinitionOpContains])\n-            expect(await actionMatcher.match(eventFooNumber, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventNoNothing, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFigNumber, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFooTrue, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFooNull, personContainer)).toEqual([])\n+            expect(await actionMatcher.match(eventFooBar)).toEqual([actionDefinitionOpContains])\n+            expect(await actionMatcher.match(eventFooBarPolPot)).toEqual([actionDefinitionOpContains])\n+            expect(await actionMatcher.match(eventFooBaR)).toEqual([actionDefinitionOpContains])\n+            expect(await actionMatcher.match(eventFooBaz)).toEqual([])\n+            expect(await actionMatcher.match(eventFooBarabara)).toEqual([actionDefinitionOpContains])\n+            expect(await actionMatcher.match(eventFooRabarbar)).toEqual([actionDefinitionOpContains])\n+            expect(await actionMatcher.match(eventFooNumber)).toEqual([])\n+            expect(await actionMatcher.match(eventNoNothing)).toEqual([])\n+            expect(await actionMatcher.match(eventFigNumber)).toEqual([])\n+            expect(await actionMatcher.match(eventFooTrue)).toEqual([])\n+            expect(await actionMatcher.match(eventFooNull)).toEqual([])\n         })\n \n         it('returns a match in case of event property operator does not contain', async () => {\n@@ -252,17 +248,17 @@ describe('ActionMatcher', () => {\n             const eventFooTrue = createTestEvent({ properties: { foo: true } })\n             const eventFooNull = createTestEvent({ properties: { foo: null } })\n \n-            expect(await actionMatcher.match(eventFooBar, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFooBarPolPot, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFooBaR, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFooBaz, personContainer)).toEqual([actionDefinitionOpNotContains])\n-            expect(await actionMatcher.match(eventFooBarabara, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFooRabarbar, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFooNumber, personContainer)).toEqual([actionDefinitionOpNotContains])\n-            expect(await actionMatcher.match(eventNoNothing, personContainer)).toEqual([actionDefinitionOpNotContains])\n-            expect(await actionMatcher.match(eventFigNumber, personContainer)).toEqual([actionDefinitionOpNotContains])\n-            expect(await actionMatcher.match(eventFooTrue, personContainer)).toEqual([actionDefinitionOpNotContains])\n-            expect(await actionMatcher.match(eventFooNull, personContainer)).toEqual([actionDefinitionOpNotContains])\n+            expect(await actionMatcher.match(eventFooBar)).toEqual([])\n+            expect(await actionMatcher.match(eventFooBarPolPot)).toEqual([])\n+            expect(await actionMatcher.match(eventFooBaR)).toEqual([])\n+            expect(await actionMatcher.match(eventFooBaz)).toEqual([actionDefinitionOpNotContains])\n+            expect(await actionMatcher.match(eventFooBarabara)).toEqual([])\n+            expect(await actionMatcher.match(eventFooRabarbar)).toEqual([])\n+            expect(await actionMatcher.match(eventFooNumber)).toEqual([actionDefinitionOpNotContains])\n+            expect(await actionMatcher.match(eventNoNothing)).toEqual([actionDefinitionOpNotContains])\n+            expect(await actionMatcher.match(eventFigNumber)).toEqual([actionDefinitionOpNotContains])\n+            expect(await actionMatcher.match(eventFooTrue)).toEqual([actionDefinitionOpNotContains])\n+            expect(await actionMatcher.match(eventFooNull)).toEqual([actionDefinitionOpNotContains])\n         })\n \n         it('returns a match in case of event property operator regex', async () => {\n@@ -291,20 +287,20 @@ describe('ActionMatcher', () => {\n             const eventFooTrue = createTestEvent({ properties: { foo: true } })\n             const eventFooNull = createTestEvent({ properties: { foo: null } })\n \n-            expect(await actionMatcher.match(eventFooBar, personContainer)).toEqual([actionDefinitionOpRegex1])\n-            expect(await actionMatcher.match(eventFooBarPolPot, personContainer)).toEqual([actionDefinitionOpRegex1])\n-            expect(await actionMatcher.match(eventFooBaR, personContainer)).toEqual([actionDefinitionOpRegex2])\n-            expect(await actionMatcher.match(eventFooBaz, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFooBarabara, personContainer)).toEqual([\n+            expect(await actionMatcher.match(eventFooBar)).toEqual([actionDefinitionOpRegex1])\n+            expect(await actionMatcher.match(eventFooBarPolPot)).toEqual([actionDefinitionOpRegex1])\n+            expect(await actionMatcher.match(eventFooBaR)).toEqual([actionDefinitionOpRegex2])\n+            expect(await actionMatcher.match(eventFooBaz)).toEqual([])\n+            expect(await actionMatcher.match(eventFooBarabara)).toEqual([\n                 actionDefinitionOpRegex1,\n                 actionDefinitionOpRegex2,\n             ])\n-            expect(await actionMatcher.match(eventFooRabarbar, personContainer)).toEqual([actionDefinitionOpRegex2])\n-            expect(await actionMatcher.match(eventFooNumber, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventNoNothing, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFigNumber, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFooTrue, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFooNull, personContainer)).toEqual([])\n+            expect(await actionMatcher.match(eventFooRabarbar)).toEqual([actionDefinitionOpRegex2])\n+            expect(await actionMatcher.match(eventFooNumber)).toEqual([])\n+            expect(await actionMatcher.match(eventNoNothing)).toEqual([])\n+            expect(await actionMatcher.match(eventFigNumber)).toEqual([])\n+            expect(await actionMatcher.match(eventFooTrue)).toEqual([])\n+            expect(await actionMatcher.match(eventFooNull)).toEqual([])\n         })\n \n         it('returns a match in case of event property operator not regex', async () => {\n@@ -340,32 +336,32 @@ describe('ActionMatcher', () => {\n             const eventFooTrue = createTestEvent({ properties: { foo: true } })\n             const eventFooNull = createTestEvent({ properties: { foo: null } })\n \n-            expect(await actionMatcher.match(eventFooBar, personContainer)).toEqual([actionDefinitionOpNotRegex2])\n-            expect(await actionMatcher.match(eventFooBarPolPot, personContainer)).toEqual([actionDefinitionOpNotRegex2])\n-            expect(await actionMatcher.match(eventFooBaR, personContainer)).toEqual([actionDefinitionOpNotRegex1])\n-            expect(await actionMatcher.match(eventFooBaz, personContainer)).toEqual([\n+            expect(await actionMatcher.match(eventFooBar)).toEqual([actionDefinitionOpNotRegex2])\n+            expect(await actionMatcher.match(eventFooBarPolPot)).toEqual([actionDefinitionOpNotRegex2])\n+            expect(await actionMatcher.match(eventFooBaR)).toEqual([actionDefinitionOpNotRegex1])\n+            expect(await actionMatcher.match(eventFooBaz)).toEqual([\n                 actionDefinitionOpNotRegex1,\n                 actionDefinitionOpNotRegex2,\n             ])\n-            expect(await actionMatcher.match(eventFooBarabara, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFooRabarbar, personContainer)).toEqual([actionDefinitionOpNotRegex1])\n-            expect(await actionMatcher.match(eventFooNumber, personContainer)).toEqual([\n+            expect(await actionMatcher.match(eventFooBarabara)).toEqual([])\n+            expect(await actionMatcher.match(eventFooRabarbar)).toEqual([actionDefinitionOpNotRegex1])\n+            expect(await actionMatcher.match(eventFooNumber)).toEqual([\n                 actionDefinitionOpNotRegex1,\n                 actionDefinitionOpNotRegex2,\n             ])\n-            expect(await actionMatcher.match(eventNoNothing, personContainer)).toEqual([\n+            expect(await actionMatcher.match(eventNoNothing)).toEqual([\n                 actionDefinitionOpNotRegex1,\n                 actionDefinitionOpNotRegex2,\n             ])\n-            expect(await actionMatcher.match(eventFigNumber, personContainer)).toEqual([\n+            expect(await actionMatcher.match(eventFigNumber)).toEqual([\n                 actionDefinitionOpNotRegex1,\n                 actionDefinitionOpNotRegex2,\n             ])\n-            expect(await actionMatcher.match(eventFooTrue, personContainer)).toEqual([\n+            expect(await actionMatcher.match(eventFooTrue)).toEqual([\n                 actionDefinitionOpNotRegex1,\n                 actionDefinitionOpNotRegex2,\n             ])\n-            expect(await actionMatcher.match(eventFooNull, personContainer)).toEqual([\n+            expect(await actionMatcher.match(eventFooNull)).toEqual([\n                 actionDefinitionOpNotRegex1,\n                 actionDefinitionOpNotRegex2,\n             ])\n@@ -390,17 +386,17 @@ describe('ActionMatcher', () => {\n             const eventFooTrue = createTestEvent({ properties: { foo: true } })\n             const eventFooNull = createTestEvent({ properties: { foo: null } })\n \n-            expect(await actionMatcher.match(eventFooBar, personContainer)).toEqual([actionDefinitionOpIsSet])\n-            expect(await actionMatcher.match(eventFooBarPolPot, personContainer)).toEqual([actionDefinitionOpIsSet])\n-            expect(await actionMatcher.match(eventFooBaR, personContainer)).toEqual([actionDefinitionOpIsSet])\n-            expect(await actionMatcher.match(eventFooBaz, personContainer)).toEqual([actionDefinitionOpIsSet])\n-            expect(await actionMatcher.match(eventFooBarabara, personContainer)).toEqual([actionDefinitionOpIsSet])\n-            expect(await actionMatcher.match(eventFooRabarbar, personContainer)).toEqual([actionDefinitionOpIsSet])\n-            expect(await actionMatcher.match(eventFooNumber, personContainer)).toEqual([actionDefinitionOpIsSet])\n-            expect(await actionMatcher.match(eventNoNothing, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFigNumber, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFooTrue, personContainer)).toEqual([actionDefinitionOpIsSet])\n-            expect(await actionMatcher.match(eventFooNull, personContainer)).toEqual([actionDefinitionOpIsSet])\n+            expect(await actionMatcher.match(eventFooBar)).toEqual([actionDefinitionOpIsSet])\n+            expect(await actionMatcher.match(eventFooBarPolPot)).toEqual([actionDefinitionOpIsSet])\n+            expect(await actionMatcher.match(eventFooBaR)).toEqual([actionDefinitionOpIsSet])\n+            expect(await actionMatcher.match(eventFooBaz)).toEqual([actionDefinitionOpIsSet])\n+            expect(await actionMatcher.match(eventFooBarabara)).toEqual([actionDefinitionOpIsSet])\n+            expect(await actionMatcher.match(eventFooRabarbar)).toEqual([actionDefinitionOpIsSet])\n+            expect(await actionMatcher.match(eventFooNumber)).toEqual([actionDefinitionOpIsSet])\n+            expect(await actionMatcher.match(eventNoNothing)).toEqual([])\n+            expect(await actionMatcher.match(eventFigNumber)).toEqual([])\n+            expect(await actionMatcher.match(eventFooTrue)).toEqual([actionDefinitionOpIsSet])\n+            expect(await actionMatcher.match(eventFooNull)).toEqual([actionDefinitionOpIsSet])\n         })\n \n         it('returns a match in case of event property operator is not set', async () => {\n@@ -422,17 +418,17 @@ describe('ActionMatcher', () => {\n             const eventFooTrue = createTestEvent({ properties: { foo: true } })\n             const eventFooNull = createTestEvent({ properties: { foo: null } })\n \n-            expect(await actionMatcher.match(eventFooBar, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFooBarPolPot, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFooBaR, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFooBaz, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFooBarabara, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFooRabarbar, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFooNumber, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventNoNothing, personContainer)).toEqual([actionDefinitionOpIsNotSet])\n-            expect(await actionMatcher.match(eventFigNumber, personContainer)).toEqual([actionDefinitionOpIsNotSet])\n-            expect(await actionMatcher.match(eventFooTrue, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFooNull, personContainer)).toEqual([])\n+            expect(await actionMatcher.match(eventFooBar)).toEqual([])\n+            expect(await actionMatcher.match(eventFooBarPolPot)).toEqual([])\n+            expect(await actionMatcher.match(eventFooBaR)).toEqual([])\n+            expect(await actionMatcher.match(eventFooBaz)).toEqual([])\n+            expect(await actionMatcher.match(eventFooBarabara)).toEqual([])\n+            expect(await actionMatcher.match(eventFooRabarbar)).toEqual([])\n+            expect(await actionMatcher.match(eventFooNumber)).toEqual([])\n+            expect(await actionMatcher.match(eventNoNothing)).toEqual([actionDefinitionOpIsNotSet])\n+            expect(await actionMatcher.match(eventFigNumber)).toEqual([actionDefinitionOpIsNotSet])\n+            expect(await actionMatcher.match(eventFooTrue)).toEqual([])\n+            expect(await actionMatcher.match(eventFooNull)).toEqual([])\n         })\n \n         it('returns a match in case of event property operator greater than', async () => {\n@@ -456,21 +452,19 @@ describe('ActionMatcher', () => {\n             const eventFooTrue = createTestEvent({ properties: { foo: true } })\n             const eventFooNull = createTestEvent({ properties: { foo: null } })\n \n-            expect(await actionMatcher.match(eventFooBar, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFooBarPolPot, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFooBaR, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFooBaz, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFooBarabara, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFooRabarbar, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFooNumberMinusOne, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFooNumberFive, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFooNumberSevenNines, personContainer)).toEqual([\n-                actionDefinitionOpGreaterThan,\n-            ])\n-            expect(await actionMatcher.match(eventNoNothing, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFigNumber, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFooTrue, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFooNull, personContainer)).toEqual([])\n+            expect(await actionMatcher.match(eventFooBar)).toEqual([])\n+            expect(await actionMatcher.match(eventFooBarPolPot)).toEqual([])\n+            expect(await actionMatcher.match(eventFooBaR)).toEqual([])\n+            expect(await actionMatcher.match(eventFooBaz)).toEqual([])\n+            expect(await actionMatcher.match(eventFooBarabara)).toEqual([])\n+            expect(await actionMatcher.match(eventFooRabarbar)).toEqual([])\n+            expect(await actionMatcher.match(eventFooNumberMinusOne)).toEqual([])\n+            expect(await actionMatcher.match(eventFooNumberFive)).toEqual([])\n+            expect(await actionMatcher.match(eventFooNumberSevenNines)).toEqual([actionDefinitionOpGreaterThan])\n+            expect(await actionMatcher.match(eventNoNothing)).toEqual([])\n+            expect(await actionMatcher.match(eventFigNumber)).toEqual([])\n+            expect(await actionMatcher.match(eventFooTrue)).toEqual([])\n+            expect(await actionMatcher.match(eventFooNull)).toEqual([])\n         })\n \n         it('returns a match in case of event property operator less than', async () => {\n@@ -494,21 +488,19 @@ describe('ActionMatcher', () => {\n             const eventFooTrue = createTestEvent({ properties: { foo: true } })\n             const eventFooNull = createTestEvent({ properties: { foo: null } })\n \n-            expect(await actionMatcher.match(eventFooBar, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFooBarPolPot, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFooBaR, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFooBaz, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFooBarabara, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFooRabarbar, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFooNumberMinusOne, personContainer)).toEqual([\n-                actionDefinitionOpLessThan,\n-            ])\n-            expect(await actionMatcher.match(eventFooNumberFive, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFooNumberSevenNines, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventNoNothing, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFigNumber, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventFooTrue, personContainer)).toEqual([actionDefinitionOpLessThan]) // true is a 1\n-            expect(await actionMatcher.match(eventFooNull, personContainer)).toEqual([])\n+            expect(await actionMatcher.match(eventFooBar)).toEqual([])\n+            expect(await actionMatcher.match(eventFooBarPolPot)).toEqual([])\n+            expect(await actionMatcher.match(eventFooBaR)).toEqual([])\n+            expect(await actionMatcher.match(eventFooBaz)).toEqual([])\n+            expect(await actionMatcher.match(eventFooBarabara)).toEqual([])\n+            expect(await actionMatcher.match(eventFooRabarbar)).toEqual([])\n+            expect(await actionMatcher.match(eventFooNumberMinusOne)).toEqual([actionDefinitionOpLessThan])\n+            expect(await actionMatcher.match(eventFooNumberFive)).toEqual([])\n+            expect(await actionMatcher.match(eventFooNumberSevenNines)).toEqual([])\n+            expect(await actionMatcher.match(eventNoNothing)).toEqual([])\n+            expect(await actionMatcher.match(eventFigNumber)).toEqual([])\n+            expect(await actionMatcher.match(eventFooTrue)).toEqual([actionDefinitionOpLessThan]) // true is a 1\n+            expect(await actionMatcher.match(eventFooNull)).toEqual([])\n         })\n \n         it('returns a match in case of URL contains page view', async () => {\n@@ -534,11 +526,8 @@ describe('ActionMatcher', () => {\n                 properties: { $current_url: 'https://example.com/' },\n             })\n \n-            expect(await actionMatcher.match(eventPosthog, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventExample, personContainer)).toEqual([\n-                actionDefinition,\n-                actionDefinitionEmptyMatching,\n-            ])\n+            expect(await actionMatcher.match(eventPosthog)).toEqual([])\n+            expect(await actionMatcher.match(eventExample)).toEqual([actionDefinition, actionDefinitionEmptyMatching])\n         })\n \n         it('returns a match in case of URL contains page views with % and _', async () => {\n@@ -564,8 +553,8 @@ describe('ActionMatcher', () => {\n                 properties: { $current_url: 'https://example.com/index.html' },\n             })\n \n-            expect(await actionMatcher.match(eventExample, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventExampleHtml, personContainer)).toEqual([\n+            expect(await actionMatcher.match(eventExample)).toEqual([])\n+            expect(await actionMatcher.match(eventExampleHtml)).toEqual([\n                 actionDefinition,\n                 actionDefinitionEmptyMatching,\n             ])\n@@ -599,12 +588,12 @@ describe('ActionMatcher', () => {\n                 properties: { $current_url: 'https://example.com/1foo/' },\n             })\n \n-            expect(await actionMatcher.match(eventExampleOk1, personContainer)).toEqual([actionDefinition])\n-            expect(await actionMatcher.match(eventExampleOk2, personContainer)).toEqual([actionDefinition])\n-            expect(await actionMatcher.match(eventExampleBad1, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventExampleBad2, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventExampleBad3, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventExampleBad4, personContainer)).toEqual([])\n+            expect(await actionMatcher.match(eventExampleOk1)).toEqual([actionDefinition])\n+            expect(await actionMatcher.match(eventExampleOk2)).toEqual([actionDefinition])\n+            expect(await actionMatcher.match(eventExampleBad1)).toEqual([])\n+            expect(await actionMatcher.match(eventExampleBad2)).toEqual([])\n+            expect(await actionMatcher.match(eventExampleBad3)).toEqual([])\n+            expect(await actionMatcher.match(eventExampleBad4)).toEqual([])\n         })\n \n         it('returns a match in case of URL matches exactly page views', async () => {\n@@ -626,9 +615,9 @@ describe('ActionMatcher', () => {\n                 properties: { $current_url: 'https://www.mozilla.org/de/firefox/' },\n             })\n \n-            expect(await actionMatcher.match(eventExampleOk, personContainer)).toEqual([actionDefinition])\n-            expect(await actionMatcher.match(eventExampleBad1, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventExampleBad2, personContainer)).toEqual([])\n+            expect(await actionMatcher.match(eventExampleOk)).toEqual([actionDefinition])\n+            expect(await actionMatcher.match(eventExampleBad1)).toEqual([])\n+            expect(await actionMatcher.match(eventExampleBad2)).toEqual([])\n         })\n \n         it('returns a match in case of exact event name', async () => {\n@@ -648,9 +637,9 @@ describe('ActionMatcher', () => {\n                 event: 'WOOF',\n             })\n \n-            expect(await actionMatcher.match(eventExampleOk, personContainer)).toEqual([actionDefinition])\n-            expect(await actionMatcher.match(eventExampleBad1, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventExampleBad2, personContainer)).toEqual([])\n+            expect(await actionMatcher.match(eventExampleOk)).toEqual([actionDefinition])\n+            expect(await actionMatcher.match(eventExampleBad1)).toEqual([])\n+            expect(await actionMatcher.match(eventExampleBad2)).toEqual([])\n         })\n \n         it('returns a match in case of exact event name AND URL contains', async () => {\n@@ -683,11 +672,11 @@ describe('ActionMatcher', () => {\n                 properties: { $current_url: 'https://www.pets.co' },\n             })\n \n-            expect(await actionMatcher.match(eventExampleOk1, personContainer)).toEqual([actionDefinition])\n-            expect(await actionMatcher.match(eventExampleOk2, personContainer)).toEqual([actionDefinition])\n-            expect(await actionMatcher.match(eventExampleBad1, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventExampleBad2, personContainer)).toEqual([])\n-            expect(await actionMatcher.match(eventExampleBad3, personContainer)).toEqual([])\n+            expect(await actionMatcher.match(eventExampleOk1)).toEqual([actionDefinition])\n+            expect(await actionMatcher.match(eventExampleOk2)).toEqual([actionDefinition])\n+            expect(await actionMatcher.match(eventExampleBad1)).toEqual([])\n+            expect(await actionMatcher.match(eventExampleBad2)).toEqual([])\n+            expect(await actionMatcher.match(eventExampleBad3)).toEqual([])\n         })\n \n         it('returns a match in case of person property operator exact', async () => {\n@@ -704,17 +693,17 @@ describe('ActionMatcher', () => {\n \n             const event = createTestEvent()\n \n-            const personFooBar = createPersonContainer({ properties: { foo: 'bar' } })\n-            const personFooBarPolPot = createPersonContainer({ properties: { foo: 'bar', pol: 'pot' } })\n-            const personFooBaR = createPersonContainer({ properties: { foo: 'baR' } })\n-            const personFooBaz = createPersonContainer({ properties: { foo: 'baz' } })\n-            const personFooBarabara = createPersonContainer({ properties: { foo: 'barabara' } })\n-            const personFooRabarbar = createPersonContainer({ properties: { foo: 'rabarbar' } })\n-            const personFooNumber = createPersonContainer({ properties: { foo: 7 } })\n-            const personNoNothing = createPersonContainer()\n-            const personFigNumber = createPersonContainer({ properties: { fig: 999 } })\n-            const personFooTrue = createPersonContainer({ properties: { foo: true } })\n-            const personFooNull = createPersonContainer({ properties: { foo: null } })\n+            const personFooBar = createTestPerson({ properties: { foo: 'bar' } })\n+            const personFooBarPolPot = createTestPerson({ properties: { foo: 'bar', pol: 'pot' } })\n+            const personFooBaR = createTestPerson({ properties: { foo: 'baR' } })\n+            const personFooBaz = createTestPerson({ properties: { foo: 'baz' } })\n+            const personFooBarabara = createTestPerson({ properties: { foo: 'barabara' } })\n+            const personFooRabarbar = createTestPerson({ properties: { foo: 'rabarbar' } })\n+            const personFooNumber = createTestPerson({ properties: { foo: 7 } })\n+            const personNoNothing = createTestPerson()\n+            const personFigNumber = createTestPerson({ properties: { fig: 999 } })\n+            const personFooTrue = createTestPerson({ properties: { foo: true } })\n+            const personFooNull = createTestPerson({ properties: { foo: null } })\n \n             expect(await actionMatcher.match(event, personFooBar)).toEqual([\n                 actionDefinitionOpExact,\n@@ -783,19 +772,19 @@ describe('ActionMatcher', () => {\n             expect(\n                 await actionMatcher.match(\n                     eventExamplePersonOk,\n-                    new LazyPersonContainer(actionDefinition.team_id, eventExamplePersonOk.distinctId, hub)\n+                    await hub.db.fetchPerson(actionDefinition.team_id, eventExamplePersonOk.distinctId)\n                 )\n             ).toEqual([actionDefinition, actionDefinitionAllUsers])\n             expect(\n                 await actionMatcher.match(\n                     eventExamplePersonBad,\n-                    new LazyPersonContainer(actionDefinition.team_id, eventExamplePersonBad.distinctId, hub)\n+                    await hub.db.fetchPerson(actionDefinition.team_id, eventExamplePersonBad.distinctId)\n                 )\n             ).toEqual([actionDefinitionAllUsers])\n             expect(\n                 await actionMatcher.match(\n                     eventExamplePersonUnknown,\n-                    new LazyPersonContainer(actionDefinition.team_id, eventExamplePersonUnknown.distinctId, hub)\n+                    await hub.db.fetchPerson(actionDefinition.team_id, eventExamplePersonUnknown.distinctId)\n                 )\n             ).toEqual([actionDefinitionAllUsers])\n         })\n@@ -848,14 +837,14 @@ describe('ActionMatcher', () => {\n             expect(\n                 await actionMatcher.match(\n                     eventExamplePersonOk,\n-                    new LazyPersonContainer(actionDefinition.team_id, eventExamplePersonOk.distinctId, hub)\n+                    await hub.db.fetchPerson(actionDefinition.team_id, eventExamplePersonOk.distinctId)\n                 )\n             ).toEqual([actionDefinition])\n \n             expect(\n                 await actionMatcher.match(\n                     eventExamplePersonOk,\n-                    new LazyPersonContainer(actionDefinition.team_id, eventExamplePersonOk.distinctId, hub)\n+                    await hub.db.fetchPerson(actionDefinition.team_id, eventExamplePersonOk.distinctId)\n                 )\n             ).toEqual([])\n         })\n@@ -884,13 +873,9 @@ describe('ActionMatcher', () => {\n                 { tag_name: 'main' },\n             ]\n \n-            expect(await actionMatcher.match(event, personContainer, elementsHrefOuter)).toEqual([\n-                actionDefinitionLinkHref,\n-            ])\n-            expect(await actionMatcher.match(event, personContainer, elementsHrefInner)).toEqual([\n-                actionDefinitionLinkHref,\n-            ])\n-            expect(await actionMatcher.match(event, personContainer, elementsNoHref)).toEqual([])\n+            expect(await actionMatcher.match(event, undefined, elementsHrefOuter)).toEqual([actionDefinitionLinkHref])\n+            expect(await actionMatcher.match(event, undefined, elementsHrefInner)).toEqual([actionDefinitionLinkHref])\n+            expect(await actionMatcher.match(event, undefined, elementsNoHref)).toEqual([])\n         })\n \n         it('returns a match in case of element text and tag name equals', async () => {\n@@ -924,12 +909,10 @@ describe('ActionMatcher', () => {\n                 { tag_name: 'main' },\n             ]\n \n-            expect(await actionMatcher.match(event, personContainer, elementsHrefProper)).toEqual([\n-                actionDefinitionLinkHref,\n-            ])\n-            expect(await actionMatcher.match(event, personContainer, elementsHrefWrongTag)).toEqual([])\n-            expect(await actionMatcher.match(event, personContainer, elementsHrefWrongText)).toEqual([])\n-            expect(await actionMatcher.match(event, personContainer, elementsHrefWrongLevel)).toEqual([])\n+            expect(await actionMatcher.match(event, undefined, elementsHrefProper)).toEqual([actionDefinitionLinkHref])\n+            expect(await actionMatcher.match(event, undefined, elementsHrefWrongTag)).toEqual([])\n+            expect(await actionMatcher.match(event, undefined, elementsHrefWrongText)).toEqual([])\n+            expect(await actionMatcher.match(event, undefined, elementsHrefWrongLevel)).toEqual([])\n         })\n \n         it('returns a match in case of element selector', async () => {\n@@ -970,15 +953,15 @@ describe('ActionMatcher', () => {\n                 { tag_name: 'main' },\n             ]\n \n-            expect(await actionMatcher.match(event, personContainer, elementsHrefProperNondirect)).toEqual([\n+            expect(await actionMatcher.match(event, undefined, elementsHrefProperNondirect)).toEqual([\n                 actionDefinitionAnyDescendant,\n                 actionDefinitionDirectHref,\n                 actionDefinitionArraySelectorProp,\n             ])\n-            expect(await actionMatcher.match(event, personContainer, elementsHrefWrongClassNondirect)).toEqual([\n+            expect(await actionMatcher.match(event, undefined, elementsHrefWrongClassNondirect)).toEqual([\n                 actionDefinitionDirectHref,\n             ])\n-            expect(await actionMatcher.match(event, personContainer, elementsHrefProperDirect)).toEqual([\n+            expect(await actionMatcher.match(event, undefined, elementsHrefProperDirect)).toEqual([\n                 actionDefinitionAnyDescendant,\n                 actionDefinitionDirectDescendant,\n                 actionDefinitionArraySelectorProp,\n@@ -1016,7 +999,7 @@ describe('ActionMatcher', () => {\n                 },\n             })\n \n-            expect(await actionMatcher.match(eventExampleOk1, personContainer)).toEqual([actionDefinition])\n+            expect(await actionMatcher.match(eventExampleOk1)).toEqual([actionDefinition])\n         })\n     })\n \ndiff --git a/plugin-server/tests/worker/ingestion/event-pipeline/createEventStep.test.ts b/plugin-server/tests/worker/ingestion/event-pipeline/createEventStep.test.ts\nindex 703a34b3a..2aa7d9cb6 100644\n--- a/plugin-server/tests/worker/ingestion/event-pipeline/createEventStep.test.ts\n+++ b/plugin-server/tests/worker/ingestion/event-pipeline/createEventStep.test.ts\n@@ -1,4 +1,7 @@\n-import { PreIngestionEvent } from '../../../../src/types'\n+import { DateTime } from 'luxon'\n+\n+import { ISOTimestamp, Person, PreIngestionEvent } from '../../../../src/types'\n+import { UUIDT } from '../../../../src/utils/utils'\n import { createEventStep } from '../../../../src/worker/ingestion/event-pipeline/5-createEventStep'\n import { LazyPersonContainer } from '../../../../src/worker/ingestion/lazy-person-container'\n \n@@ -9,12 +12,25 @@ const preIngestionEvent: PreIngestionEvent = {\n     distinctId: 'my_id',\n     ip: '127.0.0.1',\n     teamId: 2,\n-    timestamp: '2020-02-23T02:15:00.000Z',\n+    timestamp: '2020-02-23T02:15:00.000Z' as ISOTimestamp,\n     event: '$pageview',\n     properties: {},\n     elementsList: [],\n }\n \n+const person: Person = {\n+    id: 123,\n+    team_id: 2,\n+    properties: {},\n+    is_user_id: 0,\n+    is_identified: true,\n+    uuid: new UUIDT().toString(),\n+    properties_last_updated_at: {},\n+    properties_last_operation: {},\n+    created_at: DateTime.now(),\n+    version: 0,\n+}\n+\n describe('createEventStep()', () => {\n     let runner: any\n \n@@ -30,9 +46,9 @@ describe('createEventStep()', () => {\n     })\n \n     it('calls `createEvent` and forwards to `runAsyncHandlersStep`', async () => {\n-        const personContainer = new LazyPersonContainer(2, 'my_id', runner.hub)\n+        const personContainer = new LazyPersonContainer(2, 'my_id', runner.hub, person)\n         const response = await createEventStep(runner, preIngestionEvent, personContainer)\n \n-        expect(response).toEqual(['runAsyncHandlersStep', preIngestionEvent, personContainer])\n+        expect(response).toEqual(['runAsyncHandlersStep', preIngestionEvent, person])\n     })\n })\ndiff --git a/plugin-server/tests/worker/ingestion/event-pipeline/prepareEventStep.test.ts b/plugin-server/tests/worker/ingestion/event-pipeline/prepareEventStep.test.ts\nindex 1c9af7260..4e1027408 100644\n--- a/plugin-server/tests/worker/ingestion/event-pipeline/prepareEventStep.test.ts\n+++ b/plugin-server/tests/worker/ingestion/event-pipeline/prepareEventStep.test.ts\n@@ -50,7 +50,7 @@ describe('prepareEventStep()', () => {\n             'my_id',\n         ])\n         hub.db.kafkaProducer!.queueMessage = jest.fn()\n-        personContainer = new LazyPersonContainer(2, 'my_id', hub)\n+        personContainer = new LazyPersonContainer(2, 'my_id', hub, person)\n \n         runner = {\n             nextStep: (...args: any[]) => args,\n@@ -101,7 +101,7 @@ describe('prepareEventStep()', () => {\n                 teamId: 2,\n                 timestamp: '2020-02-23T02:15:00.000Z',\n             },\n-            personContainer,\n+            undefined,\n         ])\n         expect(hub.db.kafkaProducer!.queueMessage).toHaveBeenCalled()\n     })\ndiff --git a/plugin-server/tests/worker/ingestion/hooks.test.ts b/plugin-server/tests/worker/ingestion/hooks.test.ts\nindex b82693ecd..cec4873a1 100644\n--- a/plugin-server/tests/worker/ingestion/hooks.test.ts\n+++ b/plugin-server/tests/worker/ingestion/hooks.test.ts\n@@ -1,7 +1,7 @@\n import { DateTime } from 'luxon'\n import * as fetch from 'node-fetch'\n \n-import { Action, Person, PostIngestionEvent } from '../../../src/types'\n+import { Action, Person, PreIngestionEvent } from '../../../src/types'\n import { UUIDT } from '../../../src/utils/utils'\n import {\n     determineWebhookType,\n@@ -13,7 +13,6 @@ import {\n     HookCommander,\n     WebhookType,\n } from '../../../src/worker/ingestion/hooks'\n-import { LazyPersonContainer } from '../../../src/worker/ingestion/lazy-person-container'\n import { Hook } from './../../../src/types'\n \n describe('hooks', () => {\n@@ -38,7 +37,7 @@ describe('hooks', () => {\n     })\n \n     describe('getUserDetails', () => {\n-        const event = { distinctId: 'WALL-E' } as unknown as PostIngestionEvent\n+        const event = { distinctId: 'WALL-E' } as unknown as PreIngestionEvent\n         const person = { properties: { email: 'test@posthog.com' } } as unknown as Person\n \n         test('Slack', () => {\n@@ -103,25 +102,18 @@ describe('hooks', () => {\n         })\n     })\n \n-    describe('getValueOfToken()', () => {\n+    describe('getValueOfToken', () => {\n         const action = { id: 1, name: 'action1' } as Action\n-        const event = { distinctId: 'WALL-E', properties: { $browser: 'Chrome' } } as unknown as PostIngestionEvent\n+        const event = { distinctId: 'WALL-E', properties: { $browser: 'Chrome' } } as unknown as PreIngestionEvent\n         const person = { properties: { enjoys_broccoli_on_pizza: false } } as unknown as Person\n-        let personContainer: any\n \n-        beforeEach(() => {\n-            personContainer = new LazyPersonContainer(2, 'my_id', {} as any, person)\n-\n-            jest.spyOn(personContainer, 'get')\n-        })\n-\n-        test('person with just distinct ID', async () => {\n+        test('person with just distinct ID', () => {\n             const tokenUserName = ['person']\n \n-            const [text, markdown] = await getValueOfToken(\n+            const [text, markdown] = getValueOfToken(\n                 action,\n                 event,\n-                personContainer,\n+                person,\n                 'http://localhost:8000',\n                 WebhookType.Teams,\n                 tokenUserName\n@@ -129,22 +121,15 @@ describe('hooks', () => {\n \n             expect(text).toBe('WALL-E')\n             expect(markdown).toBe('[WALL-E](http://localhost:8000/person/WALL-E)')\n-            expect(personContainer.get).toBeCalledTimes(1)\n         })\n \n-        test('person with email', async () => {\n+        test('person with email', () => {\n             const tokenUserName = ['person']\n-            personContainer = personContainer.with({\n-                ...person,\n-                properties: { ...person.properties, email: 'wall-e@buynlarge.com' },\n-            })\n-\n-            jest.spyOn(personContainer, 'get')\n \n-            const [text, markdown] = await getValueOfToken(\n+            const [text, markdown] = getValueOfToken(\n                 action,\n                 event,\n-                personContainer,\n+                { ...person, properties: { ...person.properties, email: 'wall-e@buynlarge.com' } },\n                 'http://localhost:8000',\n                 WebhookType.Teams,\n                 tokenUserName\n@@ -152,16 +137,15 @@ describe('hooks', () => {\n \n             expect(text).toBe('wall-e@buynlarge.com')\n             expect(markdown).toBe('[wall-e@buynlarge.com](http://localhost:8000/person/WALL-E)')\n-            expect(personContainer.get).toBeCalledTimes(1)\n         })\n \n-        test('person prop', async () => {\n+        test('person prop', () => {\n             const tokenUserPropString = ['person', 'properties', 'enjoys_broccoli_on_pizza']\n \n-            const [text, markdown] = await getValueOfToken(\n+            const [text, markdown] = getValueOfToken(\n                 action,\n                 event,\n-                personContainer,\n+                person,\n                 'http://localhost:8000',\n                 WebhookType.Teams,\n                 tokenUserPropString\n@@ -169,16 +153,15 @@ describe('hooks', () => {\n \n             expect(text).toBe('false')\n             expect(markdown).toBe('false')\n-            expect(personContainer.get).toBeCalledTimes(1)\n         })\n \n-        test('user name (alias for person name)', async () => {\n+        test('user name (alias for person name)', () => {\n             const tokenUserName = ['user', 'name']\n \n-            const [text, markdown] = await getValueOfToken(\n+            const [text, markdown] = getValueOfToken(\n                 action,\n                 event,\n-                personContainer,\n+                person,\n                 'http://localhost:8000',\n                 WebhookType.Teams,\n                 tokenUserName\n@@ -186,16 +169,15 @@ describe('hooks', () => {\n \n             expect(text).toBe('WALL-E')\n             expect(markdown).toBe('[WALL-E](http://localhost:8000/person/WALL-E)')\n-            expect(personContainer.get).toBeCalledTimes(1)\n         })\n \n-        test('user prop (actually event prop)', async () => {\n+        test('user prop (actually event prop)', () => {\n             const tokenUserPropString = ['user', 'browser']\n \n-            const [text, markdown] = await getValueOfToken(\n+            const [text, markdown] = getValueOfToken(\n                 action,\n                 event,\n-                personContainer,\n+                person,\n                 'http://localhost:8000',\n                 WebhookType.Teams,\n                 tokenUserPropString\n@@ -203,16 +185,15 @@ describe('hooks', () => {\n \n             expect(text).toBe('Chrome')\n             expect(markdown).toBe('Chrome')\n-            expect(personContainer.get).toBeCalledTimes(0)\n         })\n \n-        test('user prop but missing', async () => {\n+        test('user prop but missing', () => {\n             const tokenUserPropMissing = ['user', 'missing_property']\n \n-            const [text, markdown] = await getValueOfToken(\n+            const [text, markdown] = getValueOfToken(\n                 action,\n                 event,\n-                personContainer,\n+                person,\n                 'http://localhost:8000',\n                 WebhookType.Teams,\n                 tokenUserPropMissing\n@@ -220,25 +201,17 @@ describe('hooks', () => {\n \n             expect(text).toBe('undefined')\n             expect(markdown).toBe('undefined')\n-            expect(personContainer.get).toBeCalledTimes(0)\n         })\n     })\n \n-    describe('getFormattedMessage()', () => {\n+    describe('getFormattedMessage', () => {\n         const event = {\n             distinctId: 2,\n             properties: { $browser: 'Chrome', page_title: 'Pricing' },\n-        } as unknown as PostIngestionEvent\n+        } as unknown as PreIngestionEvent\n         const person = {} as Person\n-        let personContainer: any\n \n-        beforeEach(() => {\n-            personContainer = new LazyPersonContainer(2, 'my_id', {} as any, person)\n-\n-            jest.spyOn(personContainer, 'get')\n-        })\n-\n-        test('custom format', async () => {\n+        test('custom format', () => {\n             const action = {\n                 id: 1,\n                 name: 'action1',\n@@ -246,25 +219,24 @@ describe('hooks', () => {\n                     '[user.name] from [user.browser] on [event.properties.page_title] page with [event.properties.fruit]',\n             } as Action\n \n-            const [text, markdown] = await getFormattedMessage(\n+            const [text, markdown] = getFormattedMessage(\n                 action,\n                 event,\n-                personContainer,\n+                person,\n                 'https://localhost:8000',\n                 WebhookType.Slack\n             )\n             expect(text).toBe('2 from Chrome on Pricing page with undefined')\n             expect(markdown).toBe('<https://localhost:8000/person/2|2> from Chrome on Pricing page with undefined')\n-            expect(personContainer.get).toBeCalledTimes(1)\n         })\n \n-        test('default format', async () => {\n+        test('default format', () => {\n             const action = { id: 1, name: 'action1', slack_message_format: '' } as Action\n \n-            const [text, markdown] = await getFormattedMessage(\n+            const [text, markdown] = getFormattedMessage(\n                 action,\n                 event,\n-                personContainer,\n+                person,\n                 'https://localhost:8000',\n                 WebhookType.Slack\n             )\n@@ -272,26 +244,24 @@ describe('hooks', () => {\n             expect(markdown).toBe(\n                 '<https://localhost:8000/action/1|action1> was triggered by <https://localhost:8000/person/2|2>'\n             )\n-            expect(personContainer.get).toBeCalledTimes(1)\n         })\n \n-        test('not quite correct format', async () => {\n+        test('not quite correct format', () => {\n             const action = {\n                 id: 1,\n                 name: 'action1',\n                 slack_message_format: '[user.name] did thing from browser [user.brauzer]',\n             } as Action\n \n-            const [text, markdown] = await getFormattedMessage(\n+            const [text, markdown] = getFormattedMessage(\n                 action,\n                 event,\n-                personContainer,\n+                person,\n                 'https://localhost:8000',\n                 WebhookType.Slack\n             )\n             expect(text).toBe('2 did thing from browser undefined')\n             expect(markdown).toBe('<https://localhost:8000/person/2|2> did thing from browser undefined')\n-            expect(personContainer.get).toBeCalledTimes(1)\n         })\n     })\n \n@@ -300,7 +270,7 @@ describe('hooks', () => {\n         let hook: Hook\n \n         beforeEach(() => {\n-            hookCommander = new HookCommander({} as any, {} as any, {} as any, {} as any)\n+            hookCommander = new HookCommander({} as any, {} as any, {} as any)\n             hook = {\n                 id: 'id',\n                 team_id: 2,\n"
  },
  "b9b6e8f896ad8a81b4248b95418a3ad4b3a620ae": {
    "hash": "b9b6e8f896ad8a81b4248b95418a3ad4b3a620ae",
    "message": "fix(async-migration): fix execute_on_each_shard (#11409)",
    "diff": "commit b9b6e8f896ad8a81b4248b95418a3ad4b3a620ae\nAuthor: Karl-Aksel Puulmann <macobo@users.noreply.github.com>\nDate:   Mon Aug 22 14:09:19 2022 +0300\n\n    fix(async-migration): fix execute_on_each_shard (#11409)\n\ndiff --git a/posthog/async_migrations/test/test_utils.py b/posthog/async_migrations/test/test_utils.py\nindex 2aceda0fb..3abd26534 100644\n--- a/posthog/async_migrations/test/test_utils.py\n+++ b/posthog/async_migrations/test/test_utils.py\n@@ -7,6 +7,7 @@ from posthog.async_migrations.definition import AsyncMigrationOperationSQL\n from posthog.async_migrations.test.util import AsyncMigrationBaseTest, create_async_migration\n from posthog.async_migrations.utils import (\n     complete_migration,\n+    execute_on_each_shard,\n     execute_op,\n     force_stop_migration,\n     process_error,\n@@ -70,7 +71,6 @@ class TestUtils(AsyncMigrationBaseTest):\n         self.assertEqual(errors[0].description, \"Force stopped by user\")\n \n     def test_complete_migration(self):\n-\n         sm = create_async_migration()\n         complete_migration(sm)\n \n@@ -82,3 +82,8 @@ class TestUtils(AsyncMigrationBaseTest):\n         self.assertEqual(sm.progress, 100)\n         errors = AsyncMigrationError.objects.filter(async_migration=sm)\n         self.assertEqual(errors.count(), 0)\n+\n+    def test_execute_on_each_shard(self):\n+        execute_on_each_shard(\"SELECT 1\")\n+        with self.assertRaises(Exception):\n+            execute_on_each_shard(\"SELECT fail\")\ndiff --git a/posthog/async_migrations/utils.py b/posthog/async_migrations/utils.py\nindex 3b3a4f06a..5755518aa 100644\n--- a/posthog/async_migrations/utils.py\n+++ b/posthog/async_migrations/utils.py\n@@ -90,9 +90,9 @@ def execute_on_each_shard(sql: str, args=None, settings=None) -> None:\n     async def run_on_all_shards():\n         tasks = []\n         for _, _, connection_pool in _get_all_shard_connections():\n-            tasks.append(asyncio.create_task(run_on_connection(connection_pool)))\n+            tasks.append(run_on_connection(connection_pool))\n \n-        await asyncio.wait(tasks)\n+        await asyncio.gather(*tasks)\n \n     async def run_on_connection(connection_pool):\n         await asyncio.sleep(0)  # returning control to event loop to make parallelism possible\n"
  },
  "f1ebaf9a949b00f89e5762a14aefd8adbeb8f8ad": {
    "hash": "f1ebaf9a949b00f89e5762a14aefd8adbeb8f8ad",
    "message": "feat(persons-on-events): async migration for persons-on-events (#10734)\n    \n    * feat(persons-on-events): add async migration for persons/groups on events backfill\n    \n    * Simplify run_optimize_table\n    \n    * run_optimize_table: explicit per_shard\n    \n    * Make execute_on_each_shard work\n    \n    * Add ON CLUSTER clauses everywhere\n    \n    * Reorder methods\n    \n    * Add first test, make backfill run successfully\n    \n    * Correct source database\n    \n    * Test for person columns\n    \n    * Test for deleted person behavior\n    \n    * Add test for person versioning\n    \n    * Dont leave garbage tables behind\n    \n    * Add test for groups\n    \n    * Update codec for person/groups columns on events\n    \n    * Code style improvement\n    \n    * Check disk usage before starting backfill/healthcheck\n    \n    * Document some constraints\n    \n    * Standardize a function\n    \n    * Fixup for disk util\n    \n    * Add test for rollbacks\n    \n    * Make per shard execution work for events backfill\n    \n    * Gate async migration on self-hosted\n    \n    * Fixup mutations_sync\n    \n    * Sleep until ALTER TABLE complete over mutations_sync\n    \n    * Make backfill step normal SQL\n    \n    * Attempt to minimize bleed between tests\n    \n    * Inter-test dependencies\n    \n    * Dont rely on default database\n    \n    * Use async IO\n    \n    * Update dictionary connection logic\n    \n    * update schema snapshots\n    \n    * ON CLUSTER\n    \n    * Ignore self query in _get_number_running_on_cluster\n    \n    * Reformat sql\n    \n    Co-authored-by: yakkomajuri <yakko.majuri@gmail.com>",
    "diff": "commit f1ebaf9a949b00f89e5762a14aefd8adbeb8f8ad\nAuthor: Karl-Aksel Puulmann <macobo@users.noreply.github.com>\nDate:   Wed Jul 27 13:09:12 2022 +0300\n\n    feat(persons-on-events): async migration for persons-on-events (#10734)\n    \n    * feat(persons-on-events): add async migration for persons/groups on events backfill\n    \n    * Simplify run_optimize_table\n    \n    * run_optimize_table: explicit per_shard\n    \n    * Make execute_on_each_shard work\n    \n    * Add ON CLUSTER clauses everywhere\n    \n    * Reorder methods\n    \n    * Add first test, make backfill run successfully\n    \n    * Correct source database\n    \n    * Test for person columns\n    \n    * Test for deleted person behavior\n    \n    * Add test for person versioning\n    \n    * Dont leave garbage tables behind\n    \n    * Add test for groups\n    \n    * Update codec for person/groups columns on events\n    \n    * Code style improvement\n    \n    * Check disk usage before starting backfill/healthcheck\n    \n    * Document some constraints\n    \n    * Standardize a function\n    \n    * Fixup for disk util\n    \n    * Add test for rollbacks\n    \n    * Make per shard execution work for events backfill\n    \n    * Gate async migration on self-hosted\n    \n    * Fixup mutations_sync\n    \n    * Sleep until ALTER TABLE complete over mutations_sync\n    \n    * Make backfill step normal SQL\n    \n    * Attempt to minimize bleed between tests\n    \n    * Inter-test dependencies\n    \n    * Dont rely on default database\n    \n    * Use async IO\n    \n    * Update dictionary connection logic\n    \n    * update schema snapshots\n    \n    * ON CLUSTER\n    \n    * Ignore self query in _get_number_running_on_cluster\n    \n    * Reformat sql\n    \n    Co-authored-by: yakkomajuri <yakko.majuri@gmail.com>\n\ndiff --git a/posthog/async_migrations/disk_util.py b/posthog/async_migrations/disk_util.py\nnew file mode 100644\nindex 000000000..559e4eeea\n--- /dev/null\n+++ b/posthog/async_migrations/disk_util.py\n@@ -0,0 +1,36 @@\n+from posthog.client import sync_execute\n+from posthog.settings import CLICKHOUSE_DATABASE\n+\n+\n+def analyze_enough_disk_space_free_for_table(table_name: str, required_ratio: float):\n+    \"\"\"\n+    Analyzes whether there's enough disk space free for given async migration operation.\n+\n+    This is done by checking whether there's at least ratio times space free to resize table_name with.\n+    \"\"\"\n+\n+    current_ratio, _, required_space_pretty = sync_execute(\n+        f\"\"\"\n+        WITH (\n+            SELECT free_space\n+            FROM system.disks WHERE name = 'default'\n+        ) AS free_disk_space,(\n+            SELECT total_space\n+            FROM system.disks WHERE name = 'default'\n+        ) AS total_disk_space,(\n+            SELECT sum(bytes) as size\n+            FROM system.parts\n+            WHERE table = %(table_name)s AND database = %(database)s\n+        ) AS table_size\n+        SELECT\n+            free_disk_space / greatest(table_size, 1),\n+            total_disk_space - (free_disk_space - %(ratio)s * table_size) AS required,\n+            formatReadableSize(required)\n+        \"\"\",\n+        {\"database\": CLICKHOUSE_DATABASE, \"table_name\": table_name, \"ratio\": required_ratio,},\n+    )[0]\n+\n+    if current_ratio >= required_ratio:\n+        return (True, None)\n+    else:\n+        return (False, f\"Upgrade your ClickHouse storage to at least {required_space_pretty}.\")\ndiff --git a/posthog/async_migrations/migrations/0002_events_sample_by.py b/posthog/async_migrations/migrations/0002_events_sample_by.py\nindex a2e0b2c6a..b441c52c5 100644\n--- a/posthog/async_migrations/migrations/0002_events_sample_by.py\n+++ b/posthog/async_migrations/migrations/0002_events_sample_by.py\n@@ -8,6 +8,7 @@ from posthog.async_migrations.definition import (\n     AsyncMigrationOperation,\n     AsyncMigrationOperationSQL,\n )\n+from posthog.async_migrations.disk_util import analyze_enough_disk_space_free_for_table\n from posthog.async_migrations.utils import run_optimize_table\n from posthog.client import sync_execute\n from posthog.constants import AnalyticsDBMS\n@@ -172,32 +173,7 @@ class Migration(AsyncMigrationDefinition):\n             )\n \n         events_table = \"sharded_events\" if CLICKHOUSE_REPLICATION else \"events\"\n-        result = sync_execute(\n-            f\"\"\"\n-        SELECT (free_space.size / greatest(event_table_size.size, 1)) FROM\n-            (SELECT 1 as jc, 'event_table_size', sum(bytes) as size FROM system.parts WHERE table = '{events_table}' AND database='{CLICKHOUSE_DATABASE}') event_table_size\n-        JOIN\n-            (SELECT 1 as jc, 'free_disk_space', free_space as size FROM system.disks WHERE name = 'default') free_space\n-        ON event_table_size.jc=free_space.jc\n-        \"\"\"\n-        )\n-        event_size_to_free_space_ratio = result[0][0]\n-\n-        # Require 1.5x the events table in free space to be available\n-        if event_size_to_free_space_ratio > 1.5:\n-            return (True, None)\n-        else:\n-            result = sync_execute(\n-                f\"\"\"\n-            SELECT formatReadableSize(free_space.size - (free_space.free_space - (1.5 * event_table_size.size ))) as required FROM\n-                (SELECT 1 as jc, 'event_table_size', sum(bytes) as size FROM system.parts WHERE table = '{events_table}' AND database='{CLICKHOUSE_DATABASE}') event_table_size\n-            JOIN\n-                (SELECT 1 as jc, 'free_disk_space', free_space, total_space as size FROM system.disks WHERE name = 'default') free_space\n-            ON event_table_size.jc=free_space.jc\n-            \"\"\"\n-            )\n-            required_space = result[0][0]\n-            return (False, f\"Upgrade your ClickHouse storage to at least {required_space}.\")\n+        return analyze_enough_disk_space_free_for_table(events_table, required_ratio=1.5)\n \n     def healthcheck(self):\n         result = sync_execute(\"SELECT free_space FROM system.disks\")\ndiff --git a/posthog/async_migrations/migrations/0006_persons_and_groups_on_events_backfill.py b/posthog/async_migrations/migrations/0006_persons_and_groups_on_events_backfill.py\nnew file mode 100644\nindex 000000000..695f320a3\n--- /dev/null\n+++ b/posthog/async_migrations/migrations/0006_persons_and_groups_on_events_backfill.py\n@@ -0,0 +1,342 @@\n+from functools import cached_property\n+\n+import structlog\n+from django.conf import settings\n+\n+from posthog.async_migrations.definition import (\n+    AsyncMigrationDefinition,\n+    AsyncMigrationOperation,\n+    AsyncMigrationOperationSQL,\n+)\n+from posthog.async_migrations.disk_util import analyze_enough_disk_space_free_for_table\n+from posthog.async_migrations.utils import execute_op_clickhouse, run_optimize_table, sleep_until_finished\n+from posthog.client import sync_execute\n+from posthog.models.event.sql import EVENTS_DATA_TABLE\n+\n+logger = structlog.get_logger(__name__)\n+\n+\"\"\"\n+Migration summary\n+=================\n+\n+Backfill the sharded_events table to add data for the following columns:\n+\n+- person_id\n+- person_properties\n+- person_created_at\n+- groupX_properties\n+- groupX_created_at\n+\n+This allows us to switch entirely to only querying the events table for insights,\n+without having to hit additional tables for persons, groups, and distinct IDs.\n+\n+Migration strategy\n+==================\n+\n+We will run the following operations on the cluster\n+(or on one node per shard if shard-level configuration is provided):\n+\n+1. Update `person_properties` and `groupX_properties` columns to use ZSTD(3) compression\n+2. Create temporary tables with the relevant columns from `person`, `person_distinct_id`, and `groups`\n+3. Copy data from the main tables into them\n+4. Optimize the temporary tables to remove duplicates and remove deleted data\n+5. Create a dictionary to query each temporary table with caching\n+6. Run an ALTER TABLE ... UPDATE to backfill all the data using the dictionaries\n+\n+Constraints\n+===========\n+\n+1. The migration requires a lot of extra space for the new columns. At least 2x disk space is required to avoid issues while migrating.\n+2. We use ZSTD(3) compression on the new columns to save on space and speed up large reads.\n+3. New columns need to be populated for new rows before running this async migration.\n+\"\"\"\n+\n+TEMPORARY_PERSONS_TABLE_NAME = \"tmp_person_0006\"\n+TEMPORARY_PDI2_TABLE_NAME = \"tmp_person_distinct_id2_0006\"\n+TEMPORARY_GROUPS_TABLE_NAME = \"tmp_groups_0006\"\n+\n+\n+class Migration(AsyncMigrationDefinition):\n+    description = \"Backfill persons and groups data on the sharded_events table\"\n+\n+    depends_on = \"0005_person_replacing_by_version\"\n+\n+    def precheck(self):\n+        if not settings.MULTI_TENANCY:\n+            return False, \"This async migration is not yet ready for self-hosted users\"\n+\n+        return analyze_enough_disk_space_free_for_table(EVENTS_DATA_TABLE(), required_ratio=2.0)\n+\n+    def is_required(self) -> bool:\n+        compression_codec = sync_execute(\n+            \"\"\"\n+            SELECT compression_codec\n+            FROM system.columns\n+            WHERE database = %(database)s\n+              AND table = %(events_data_table)s\n+              AND name = 'person_properties'\n+        \"\"\",\n+            {\"database\": settings.CLICKHOUSE_DATABASE, \"events_data_table\": EVENTS_DATA_TABLE()},\n+        )[0][0]\n+\n+        return compression_codec != \"CODEC(ZSTD(3))\"\n+\n+    @cached_property\n+    def operations(self):\n+        return [\n+            AsyncMigrationOperation(\n+                # See https://github.com/PostHog/posthog/issues/10616 for details on choice of codec\n+                fn=lambda query_id: self._update_properties_column_compression_codec(query_id, \"ZSTD(3)\"),\n+                rollback_fn=lambda query_id: self._update_properties_column_compression_codec(query_id, \"LZ4\"),\n+            ),\n+            AsyncMigrationOperationSQL(\n+                sql=f\"\"\"\n+                    CREATE TABLE {TEMPORARY_PERSONS_TABLE_NAME} {{on_cluster_clause}} AS {settings.CLICKHOUSE_DATABASE}.person\n+                    ENGINE = ReplacingMergeTree(version)\n+                    ORDER BY (team_id, id)\n+                    SETTINGS index_granularity = 128\n+                \"\"\",\n+                rollback=f\"DROP TABLE IF EXISTS {TEMPORARY_PERSONS_TABLE_NAME} {{on_cluster_clause}}\",\n+                per_shard=True,\n+            ),\n+            AsyncMigrationOperationSQL(\n+                sql=f\"\"\"\n+                    CREATE TABLE {TEMPORARY_PDI2_TABLE_NAME} {{on_cluster_clause}} AS {settings.CLICKHOUSE_DATABASE}.person_distinct_id2\n+                    ENGINE = ReplacingMergeTree(version)\n+                    ORDER BY (team_id, distinct_id)\n+                    SETTINGS index_granularity = 128\n+                \"\"\",\n+                rollback=f\"DROP TABLE IF EXISTS {TEMPORARY_PDI2_TABLE_NAME} {{on_cluster_clause}}\",\n+                per_shard=True,\n+            ),\n+            AsyncMigrationOperationSQL(\n+                sql=f\"\"\"\n+                    CREATE TABLE {TEMPORARY_GROUPS_TABLE_NAME} {{on_cluster_clause}} AS {settings.CLICKHOUSE_DATABASE}.groups\n+                    ENGINE = ReplacingMergeTree(_timestamp)\n+                    ORDER BY (team_id, group_type_index, group_key)\n+                    SETTINGS index_granularity = 128\n+                \"\"\",\n+                rollback=f\"DROP TABLE IF EXISTS {TEMPORARY_GROUPS_TABLE_NAME} {{on_cluster_clause}}\",\n+                per_shard=True,\n+            ),\n+            AsyncMigrationOperationSQL(\n+                sql=f\"\"\"\n+                    ALTER TABLE {TEMPORARY_PERSONS_TABLE_NAME} {{on_cluster_clause}}\n+                    REPLACE PARTITION tuple() FROM person\n+                \"\"\",\n+                rollback=None,\n+                per_shard=True,\n+            ),\n+            AsyncMigrationOperationSQL(\n+                sql=f\"\"\"\n+                    ALTER TABLE {TEMPORARY_PDI2_TABLE_NAME} {{on_cluster_clause}}\n+                    REPLACE PARTITION tuple() FROM person_distinct_id2\n+                \"\"\",\n+                rollback=None,\n+                per_shard=True,\n+            ),\n+            AsyncMigrationOperationSQL(\n+                sql=f\"\"\"\n+                    ALTER TABLE {TEMPORARY_GROUPS_TABLE_NAME} {{on_cluster_clause}}\n+                    REPLACE PARTITION tuple() FROM groups\n+                \"\"\",\n+                rollback=None,\n+                per_shard=True,\n+            ),\n+            AsyncMigrationOperation(\n+                fn=lambda query_id: run_optimize_table(\n+                    unique_name=\"0006_persons_and_groups_on_events_backfill_person\",\n+                    query_id=query_id,\n+                    table_name=TEMPORARY_PERSONS_TABLE_NAME,\n+                    final=True,\n+                    deduplicate=True,\n+                )\n+            ),\n+            AsyncMigrationOperation(\n+                fn=lambda query_id: run_optimize_table(\n+                    unique_name=\"0006_persons_and_groups_on_events_backfill_pdi2\",\n+                    query_id=query_id,\n+                    table_name=TEMPORARY_PDI2_TABLE_NAME,\n+                    final=True,\n+                    deduplicate=True,\n+                )\n+            ),\n+            AsyncMigrationOperation(\n+                fn=lambda query_id: run_optimize_table(\n+                    unique_name=\"0006_persons_and_groups_on_events_backfill_groups\",\n+                    query_id=query_id,\n+                    table_name=TEMPORARY_GROUPS_TABLE_NAME,\n+                    final=True,\n+                    deduplicate=True,\n+                    per_shard=True,\n+                )\n+            ),\n+            AsyncMigrationOperationSQL(\n+                sql=f\"\"\"\n+                    ALTER TABLE {TEMPORARY_PDI2_TABLE_NAME} {{on_cluster_clause}}\n+                    DELETE WHERE is_deleted = 1 OR person_id IN (\n+                        SELECT id FROM {TEMPORARY_PERSONS_TABLE_NAME} WHERE is_deleted=1\n+                    )\n+                \"\"\",\n+                sql_settings={\"mutations_sync\": 2},\n+                rollback=None,\n+                per_shard=True,\n+            ),\n+            AsyncMigrationOperationSQL(\n+                sql=f\"\"\"\n+                    ALTER TABLE {TEMPORARY_PERSONS_TABLE_NAME} {{on_cluster_clause}}\n+                    DELETE WHERE is_deleted = 1\n+                \"\"\",\n+                sql_settings={\"mutations_sync\": 2},\n+                rollback=None,\n+                per_shard=True,\n+            ),\n+            AsyncMigrationOperationSQL(\n+                sql=f\"\"\"\n+                    CREATE DICTIONARY IF NOT EXISTS person_dict {{on_cluster_clause}}\n+                    (\n+                        team_id Int64,\n+                        id UUID,\n+                        properties String,\n+                        created_at DateTime\n+                    )\n+                    PRIMARY KEY team_id, id\n+                    SOURCE(CLICKHOUSE(TABLE {TEMPORARY_PERSONS_TABLE_NAME} {self._dictionary_connection_string()}))\n+                    LAYOUT(complex_key_cache(size_in_cells 5000000 max_threads_for_updates 6 allow_read_expired_keys 1))\n+                    Lifetime(60000)\n+                \"\"\",\n+                rollback=f\"DROP DICTIONARY IF EXISTS person_dict {{on_cluster_clause}}\",\n+                per_shard=True,\n+            ),\n+            AsyncMigrationOperationSQL(\n+                sql=f\"\"\"\n+                    CREATE DICTIONARY IF NOT EXISTS person_distinct_id2_dict {{on_cluster_clause}}\n+                    (\n+                        team_id Int64,\n+                        distinct_id String,\n+                        person_id UUID\n+                    )\n+                    PRIMARY KEY team_id, distinct_id\n+                    SOURCE(CLICKHOUSE(TABLE {TEMPORARY_PDI2_TABLE_NAME} {self._dictionary_connection_string()}))\n+                    LAYOUT(complex_key_cache(size_in_cells 50000000 max_threads_for_updates 6 allow_read_expired_keys 1))\n+                    Lifetime(60000)\n+                \"\"\",\n+                rollback=f\"DROP DICTIONARY IF EXISTS person_distinct_id2_dict {{on_cluster_clause}}\",\n+                per_shard=True,\n+            ),\n+            AsyncMigrationOperationSQL(\n+                sql=f\"\"\"\n+                    CREATE DICTIONARY IF NOT EXISTS groups_dict {{on_cluster_clause}}\n+                    (\n+                        team_id Int64,\n+                        group_type_index UInt8,\n+                        group_key String,\n+                        group_properties String,\n+                        created_at DateTime\n+                    )\n+                    PRIMARY KEY team_id, group_type_index, group_key\n+                    SOURCE(CLICKHOUSE(TABLE {TEMPORARY_GROUPS_TABLE_NAME} {self._dictionary_connection_string()}))\n+                    LAYOUT(complex_key_cache(size_in_cells 1000000 max_threads_for_updates 6 allow_read_expired_keys 1))\n+                    Lifetime(60000)\n+                \"\"\",\n+                rollback=f\"DROP DICTIONARY IF EXISTS groups_dict {{on_cluster_clause}}\",\n+                per_shard=True,\n+            ),\n+            AsyncMigrationOperationSQL(\n+                sql=f\"\"\"\n+                    ALTER TABLE {EVENTS_DATA_TABLE()}\n+                    {{on_cluster_clause}}\n+                    UPDATE\n+                        person_id = toUUID(dictGet('{settings.CLICKHOUSE_DATABASE}.person_distinct_id2_dict', 'person_id', tuple(team_id, distinct_id))),\n+                        person_properties = dictGetString(\n+                            '{settings.CLICKHOUSE_DATABASE}.person_dict',\n+                            'properties',\n+                            tuple(\n+                                team_id,\n+                                toUUID(dictGet('{settings.CLICKHOUSE_DATABASE}.person_distinct_id2_dict', 'person_id', tuple(team_id, distinct_id)))\n+                            )\n+                        ),\n+                        person_created_at = dictGetDateTime(\n+                            '{settings.CLICKHOUSE_DATABASE}.person_dict',\n+                            'created_at',\n+                            tuple(\n+                                team_id,\n+                                toUUID(dictGet('{settings.CLICKHOUSE_DATABASE}.person_distinct_id2_dict', 'person_id', tuple(team_id, distinct_id)))\n+                            )\n+                        ),\n+                        group0_properties = dictGetString('{settings.CLICKHOUSE_DATABASE}.groups_dict', 'group_properties', tuple(team_id, 0, $group_0)),\n+                        group1_properties = dictGetString('{settings.CLICKHOUSE_DATABASE}.groups_dict', 'group_properties', tuple(team_id, 1, $group_1)),\n+                        group2_properties = dictGetString('{settings.CLICKHOUSE_DATABASE}.groups_dict', 'group_properties', tuple(team_id, 2, $group_2)),\n+                        group3_properties = dictGetString('{settings.CLICKHOUSE_DATABASE}.groups_dict', 'group_properties', tuple(team_id, 3, $group_3)),\n+                        group4_properties = dictGetString('{settings.CLICKHOUSE_DATABASE}.groups_dict', 'group_properties', tuple(team_id, 4, $group_4)),\n+                        group0_created_at = dictGetDateTime('{settings.CLICKHOUSE_DATABASE}.groups_dict', 'created_at', tuple(team_id, 0, $group_0)),\n+                        group1_created_at = dictGetDateTime('{settings.CLICKHOUSE_DATABASE}.groups_dict', 'created_at', tuple(team_id, 1, $group_1)),\n+                        group2_created_at = dictGetDateTime('{settings.CLICKHOUSE_DATABASE}.groups_dict', 'created_at', tuple(team_id, 2, $group_2)),\n+                        group3_created_at = dictGetDateTime('{settings.CLICKHOUSE_DATABASE}.groups_dict', 'created_at', tuple(team_id, 3, $group_3)),\n+                        group4_created_at = dictGetDateTime('{settings.CLICKHOUSE_DATABASE}.groups_dict', 'created_at', tuple(team_id, 4, $group_4))\n+                    WHERE person_id = toUUIDOrZero('')\n+                \"\"\",\n+                sql_settings={\"max_execution_time\": 0},\n+                rollback=None,\n+                per_shard=True,\n+            ),\n+            AsyncMigrationOperation(fn=self._wait_for_mutation_done,),\n+            AsyncMigrationOperation(fn=self._clear_temporary_tables),\n+        ]\n+\n+    def _dictionary_connection_string(self):\n+        result = f\"DB '{settings.CLICKHOUSE_DATABASE}'\"\n+        if settings.CLICKHOUSE_USER:\n+            result += f\" USER '{settings.CLICKHOUSE_USER}'\"\n+        if settings.CLICKHOUSE_PASSWORD:\n+            result += f\" PASSWORD '{settings.CLICKHOUSE_PASSWORD}'\"\n+        return result\n+\n+    def _update_properties_column_compression_codec(self, query_id, codec):\n+        columns = [\n+            \"person_properties\",\n+            \"group0_properties\",\n+            \"group1_properties\",\n+            \"group2_properties\",\n+            \"group3_properties\",\n+            \"group4_properties\",\n+        ]\n+        for column in columns:\n+            execute_op_clickhouse(\n+                query_id=query_id,\n+                sql=f\"ALTER TABLE {EVENTS_DATA_TABLE()} ON CLUSTER '{settings.CLICKHOUSE_CLUSTER}' MODIFY COLUMN {column} VARCHAR Codec({codec})\",\n+            )\n+\n+    def _wait_for_mutation_done(self, query_id):\n+        # :KLUDGE: mutations_sync does not work with ON CLUSTER queries, causing race conditions with subsequent steps\n+        sleep_until_finished(\"events table backill\", lambda: self._count_running_mutations() > 0)\n+\n+    def _count_running_mutations(self):\n+        return sync_execute(\n+            \"\"\"\n+            SELECT count()\n+            FROM clusterAllReplicas(%(cluster)s, system, 'mutations')\n+            WHERE not is_done AND command LIKE %(pattern)s\n+            \"\"\",\n+            {\"cluster\": settings.CLICKHOUSE_CLUSTER, \"pattern\": \"%person_properties = dictGetString%\",},\n+        )[0][0]\n+\n+    def _clear_temporary_tables(self, query_id):\n+        queries = [\n+            f\"DROP DICTIONARY IF EXISTS person_dict {{on_cluster_clause}}\",\n+            f\"DROP DICTIONARY IF EXISTS person_distinct_id2_dict {{on_cluster_clause}}\",\n+            f\"DROP DICTIONARY IF EXISTS groups_dict {{on_cluster_clause}}\",\n+            f\"DROP TABLE IF EXISTS {TEMPORARY_PERSONS_TABLE_NAME} {{on_cluster_clause}}\",\n+            f\"DROP TABLE IF EXISTS {TEMPORARY_PDI2_TABLE_NAME} {{on_cluster_clause}}\",\n+            f\"DROP TABLE IF EXISTS {TEMPORARY_GROUPS_TABLE_NAME} {{on_cluster_clause}}\",\n+        ]\n+        for query in queries:\n+            execute_op_clickhouse(query_id=query_id, sql=query, per_shard=True)\n+\n+    def healthcheck(self):\n+        result = sync_execute(\"SELECT free_space FROM system.disks\")\n+        # 100mb or less left\n+        if int(result[0][0]) < 100000000:\n+            return (False, \"ClickHouse available storage below 100MB\")\n+\n+        return (True, None)\ndiff --git a/posthog/async_migrations/test/test_0004_replicated_schema.py b/posthog/async_migrations/test/test_0004_replicated_schema.py\nindex 4ae1f8fbb..ec8fba083 100644\n--- a/posthog/async_migrations/test/test_0004_replicated_schema.py\n+++ b/posthog/async_migrations/test/test_0004_replicated_schema.py\n@@ -30,7 +30,7 @@ def _create_event(**kwargs):\n \n class Test0004ReplicatedSchema(AsyncMigrationBaseTest, ClickhouseTestMixin):\n     def setUp(self):\n-        self.recreate_database()\n+        self.recreate_database(replication=False)\n         sync_execute(KAFKA_EVENTS_TABLE_SQL())\n         sync_execute(KAFKA_SESSION_RECORDING_EVENTS_TABLE_SQL())\n         sync_execute(KAFKA_GROUPS_TABLE_SQL())\n@@ -40,12 +40,11 @@ class Test0004ReplicatedSchema(AsyncMigrationBaseTest, ClickhouseTestMixin):\n         sync_execute(KAFKA_DEAD_LETTER_QUEUE_TABLE_SQL())\n \n     def tearDown(self):\n-        self.recreate_database()\n-        settings.CLICKHOUSE_REPLICATION = True\n+        self.recreate_database(replication=True)\n         super().tearDown()\n \n-    def recreate_database(self):\n-        settings.CLICKHOUSE_REPLICATION = False\n+    def recreate_database(self, replication: bool):\n+        settings.CLICKHOUSE_REPLICATION = replication\n         sync_execute(f\"DROP DATABASE {settings.CLICKHOUSE_DATABASE} SYNC\")\n         sync_execute(f\"CREATE DATABASE {settings.CLICKHOUSE_DATABASE}\")\n         create_clickhouse_tables(0)\ndiff --git a/posthog/async_migrations/test/test_0006_persons_and_groups_on_events_backfill.py b/posthog/async_migrations/test/test_0006_persons_and_groups_on_events_backfill.py\nnew file mode 100644\nindex 000000000..d9a9b868f\n--- /dev/null\n+++ b/posthog/async_migrations/test/test_0006_persons_and_groups_on_events_backfill.py\n@@ -0,0 +1,299 @@\n+import json\n+from typing import Dict, List\n+\n+import pytest\n+from django.test import override_settings\n+\n+from posthog.async_migrations.runner import start_async_migration\n+from posthog.async_migrations.setup import get_async_migration_definition, setup_async_migrations\n+from posthog.async_migrations.test.util import AsyncMigrationBaseTest\n+from posthog.client import query_with_columns, sync_execute\n+from posthog.models import Person\n+from posthog.models.async_migration import AsyncMigration, MigrationStatus\n+from posthog.models.event.util import create_event\n+from posthog.models.group.util import create_group\n+from posthog.models.person.util import create_person, create_person_distinct_id, delete_person\n+from posthog.models.utils import UUIDT\n+from posthog.test.base import ClickhouseTestMixin, run_clickhouse_statement_in_parallel\n+\n+MIGRATION_NAME = \"0006_persons_and_groups_on_events_backfill\"\n+\n+uuid1, uuid2, uuid3 = [UUIDT() for _ in range(3)]\n+# Clickhouse leaves behind blank/zero values for non-filled columns, these are checked against these constants\n+ZERO_UUID = UUIDT(uuid_str=\"00000000-0000-0000-0000-000000000000\")\n+ZERO_DATE = \"1970-01-01T00:00:00Z\"\n+\n+\n+def run_migration():\n+    setup_async_migrations(ignore_posthog_version=True)\n+    return start_async_migration(MIGRATION_NAME, ignore_posthog_version=True)\n+\n+\n+def query_events() -> List[Dict]:\n+    return query_with_columns(\n+        \"\"\"\n+        SELECT\n+            distinct_id,\n+            person_id,\n+            person_properties,\n+            group0_properties,\n+            group1_properties,\n+            group2_properties,\n+            group3_properties,\n+            group4_properties,\n+            $group_0,\n+            $group_1,\n+            $group_2,\n+            $group_3,\n+            $group_4,\n+            formatDateTime(events.person_created_at, %(format)s) AS person_created_at,\n+            formatDateTime(events.group0_created_at, %(format)s) AS group0_created_at,\n+            formatDateTime(events.group1_created_at, %(format)s) AS group1_created_at,\n+            formatDateTime(events.group2_created_at, %(format)s) AS group2_created_at,\n+            formatDateTime(events.group3_created_at, %(format)s) AS group3_created_at,\n+            formatDateTime(events.group4_created_at, %(format)s) AS group4_created_at\n+        FROM events\n+        ORDER BY distinct_id\n+        \"\"\",\n+        {\"format\": \"%Y-%m-%dT%H:%M:%SZ\"},\n+    )\n+\n+\n+@pytest.mark.async_migrations\n+@override_settings(MULTI_TENANCY=True)\n+class Test0006PersonsAndGroupsOnEventsBackfill(AsyncMigrationBaseTest, ClickhouseTestMixin):\n+    def setUp(self):\n+        self.clear_tables()\n+        super().setUp()\n+\n+    def tearDown(self):\n+        self.clear_tables()\n+        super().tearDown()\n+\n+    @classmethod\n+    def tearDownClass(cls):\n+        sync_execute(\"ALTER TABLE sharded_events MODIFY COLUMN person_properties VARCHAR CODEC(ZSTD(3))\")\n+\n+    def clear_tables(self):\n+        run_clickhouse_statement_in_parallel(\n+            [\n+                \"TRUNCATE TABLE sharded_events\",\n+                \"DROP TABLE IF EXISTS tmp_person_0006\",\n+                \"DROP TABLE IF EXISTS tmp_person_distinct_id2_0006\",\n+                \"DROP TABLE IF EXISTS tmp_groups_0006\",\n+                \"DROP DICTIONARY IF EXISTS person_dict\",\n+                \"DROP DICTIONARY IF EXISTS person_distinct_id2_dict\",\n+                \"DROP DICTIONARY IF EXISTS groups_dict\",\n+                \"ALTER TABLE sharded_events MODIFY COLUMN person_properties VARCHAR CODEC(LZ4)\",\n+            ]\n+        )\n+\n+    def test_is_required(self):\n+        definition = get_async_migration_definition(MIGRATION_NAME)\n+        self.assertTrue(definition.is_required())\n+\n+        run_migration()\n+        self.assertFalse(definition.is_required())\n+\n+    def test_completes_successfully(self):\n+        self.assertTrue(run_migration())\n+\n+    def test_data_copy_persons(self):\n+        create_event(\n+            event_uuid=uuid1, team=self.team, distinct_id=\"1\", event=\"$pageview\",\n+        )\n+        create_event(\n+            event_uuid=uuid2, team=self.team, distinct_id=\"2\", event=\"$pageview\",\n+        )\n+        create_event(\n+            event_uuid=uuid3, team=self.team, distinct_id=\"3\", event=\"$pageview\",\n+        )\n+        create_person(\n+            team_id=self.team.pk,\n+            version=0,\n+            uuid=str(uuid1),\n+            properties={\"personprop\": 1},\n+            timestamp=\"2022-01-01T00:00:00Z\",\n+        )\n+        create_person(\n+            team_id=self.team.pk,\n+            version=0,\n+            uuid=str(uuid2),\n+            properties={\"personprop\": 2},\n+            timestamp=\"2022-01-02T00:00:00Z\",\n+        )\n+        create_person_distinct_id(self.team.pk, \"1\", str(uuid1))\n+        create_person_distinct_id(self.team.pk, \"2\", str(uuid1))\n+        create_person_distinct_id(self.team.pk, \"3\", str(uuid2))\n+\n+        self.assertTrue(run_migration())\n+\n+        events = query_events()\n+\n+        self.assertEqual(len(events), 3)\n+        self.assertDictContainsSubset(\n+            {\n+                \"distinct_id\": \"1\",\n+                \"person_id\": uuid1,\n+                \"person_properties\": json.dumps({\"personprop\": 1}),\n+                \"person_created_at\": \"2022-01-01T00:00:00Z\",\n+            },\n+            events[0],\n+        )\n+        self.assertDictContainsSubset(\n+            {\n+                \"distinct_id\": \"2\",\n+                \"person_id\": uuid1,\n+                \"person_properties\": json.dumps({\"personprop\": 1}),\n+                \"person_created_at\": \"2022-01-01T00:00:00Z\",\n+            },\n+            events[1],\n+        )\n+        self.assertDictContainsSubset(\n+            {\n+                \"distinct_id\": \"3\",\n+                \"person_id\": uuid2,\n+                \"person_properties\": json.dumps({\"personprop\": 2}),\n+                \"person_created_at\": \"2022-01-02T00:00:00Z\",\n+            },\n+            events[2],\n+        )\n+\n+    def test_duplicated_data_persons(self):\n+        create_event(\n+            event_uuid=uuid1, team=self.team, distinct_id=\"1\", event=\"$pageview\",\n+        )\n+        create_person_distinct_id(self.team.pk, \"1\", str(uuid1))\n+        create_person(\n+            team_id=self.team.pk,\n+            version=1,\n+            uuid=str(uuid1),\n+            properties={\"personprop\": 2},\n+            timestamp=\"2022-01-02T00:00:00Z\",\n+        )\n+        create_person(\n+            team_id=self.team.pk,\n+            version=0,\n+            uuid=str(uuid1),\n+            properties={\"personprop\": 1},\n+            timestamp=\"2022-01-01T00:00:00Z\",\n+        )\n+\n+        self.assertTrue(run_migration())\n+\n+        events = query_events()\n+        self.assertEqual(len(events), 1)\n+        self.assertDictContainsSubset(\n+            {\n+                \"distinct_id\": \"1\",\n+                \"person_id\": uuid1,\n+                \"person_properties\": json.dumps({\"personprop\": 2}),\n+                \"person_created_at\": \"2022-01-02T00:00:00Z\",\n+            },\n+            events[0],\n+        )\n+\n+    def test_deleted_data_persons(self):\n+        create_event(\n+            event_uuid=uuid1, team=self.team, distinct_id=\"1\", event=\"$pageview\",\n+        )\n+        person = Person.objects.create(\n+            team_id=self.team.pk,\n+            distinct_ids=[\"1\"],\n+            properties={\"$some_prop\": \"something\", \"$another_prop\": \"something\"},\n+        )\n+        create_person_distinct_id(self.team.pk, \"1\", str(person.uuid))\n+        delete_person(person)\n+\n+        self.assertTrue(run_migration())\n+\n+        events = query_events()\n+        self.assertEqual(len(events), 1)\n+        self.assertDictContainsSubset(\n+            {\"distinct_id\": \"1\", \"person_id\": ZERO_UUID, \"person_properties\": \"\", \"person_created_at\": ZERO_DATE,},\n+            events[0],\n+        )\n+\n+    def test_data_copy_groups(self):\n+        create_group(\n+            team_id=self.team.pk,\n+            group_type_index=0,\n+            group_key=\"org:5\",\n+            properties={\"industry\": \"finance\"},\n+            timestamp=\"2022-01-01T00:00:00Z\",\n+        )\n+        create_group(\n+            team_id=self.team.pk,\n+            group_type_index=0,\n+            group_key=\"org:7\",\n+            properties={\"industry\": \"IT\"},\n+            timestamp=\"2022-01-02T00:00:00Z\",\n+        )\n+        create_group(\n+            team_id=self.team.pk,\n+            group_type_index=2,\n+            group_key=\"77\",\n+            properties={\"index\": 2},\n+            timestamp=\"2022-01-03T00:00:00Z\",\n+        )\n+        create_group(\n+            team_id=self.team.pk,\n+            group_type_index=3,\n+            group_key=\"77\",\n+            properties={\"index\": 3},\n+            timestamp=\"2022-01-04T00:00:00Z\",\n+        )\n+\n+        create_event(\n+            event_uuid=uuid1,\n+            team=self.team,\n+            distinct_id=\"1\",\n+            event=\"$pageview\",\n+            properties={\"$group_0\": \"org:7\", \"$group_1\": \"77\", \"$group_2\": \"77\", \"$group_3\": \"77\",},\n+        )\n+\n+        self.assertTrue(run_migration())\n+\n+        events = query_events()\n+        self.assertEqual(len(events), 1)\n+        self.assertDictContainsSubset(\n+            {\n+                \"$group_0\": \"org:7\",\n+                \"group0_properties\": json.dumps({\"industry\": \"IT\"}),\n+                \"group0_created_at\": \"2022-01-02T00:00:00Z\",\n+                \"$group_1\": \"77\",\n+                \"group1_properties\": \"\",\n+                \"group1_created_at\": ZERO_DATE,\n+                \"$group_2\": \"77\",\n+                \"group2_properties\": json.dumps({\"index\": 2}),\n+                \"group2_created_at\": \"2022-01-03T00:00:00Z\",\n+                \"$group_3\": \"77\",\n+                \"group3_properties\": json.dumps({\"index\": 3}),\n+                \"group3_created_at\": \"2022-01-04T00:00:00Z\",\n+                \"$group_4\": \"\",\n+                \"group4_properties\": \"\",\n+                \"group4_created_at\": ZERO_DATE,\n+            },\n+            events[0],\n+        )\n+\n+    def test_no_extra_tables(self):\n+        initial_table_count = sync_execute(\"SELECT count() FROM system.tables\")[0][0]\n+        initial_dictionary_count = sync_execute(\"SELECT count() FROM system.dictionaries\")[0][0]\n+\n+        run_migration()\n+\n+        new_table_count = sync_execute(\"SELECT count() FROM system.tables\")[0][0]\n+        new_dictionary_count = sync_execute(\"SELECT count() FROM system.dictionaries\")[0][0]\n+        self.assertEqual(initial_table_count, new_table_count)\n+        self.assertEqual(initial_dictionary_count, new_dictionary_count)\n+\n+    def test_rollback(self):\n+        migration = get_async_migration_definition(MIGRATION_NAME)\n+\n+        self.assertEqual(len(migration.operations), 18)\n+        migration.operations[-1].fn = lambda _: 0 / 0  # type: ignore\n+\n+        migration_successful = run_migration()\n+        self.assertFalse(migration_successful)\n+        self.assertEqual(AsyncMigration.objects.get(name=MIGRATION_NAME).status, MigrationStatus.RolledBack)\ndiff --git a/posthog/async_migrations/test/test_migrations_not_required.py b/posthog/async_migrations/test/test_migrations_not_required.py\nindex 03a12caec..5883f7ea4 100644\n--- a/posthog/async_migrations/test/test_migrations_not_required.py\n+++ b/posthog/async_migrations/test/test_migrations_not_required.py\n@@ -15,4 +15,4 @@ class TestAsyncMigrationsNotRequired(AsyncMigrationBaseTest):\n \n     def test_async_migrations_not_required_on_fresh_instances(self):\n         for name, migration in ALL_ASYNC_MIGRATIONS.items():\n-            self.assertFalse(migration.is_required())\n+            self.assertFalse(migration.is_required(), f\"Async migration {name} is_required returned True\")\ndiff --git a/posthog/async_migrations/utils.py b/posthog/async_migrations/utils.py\nindex cfc9ab00c..1af871525 100644\n--- a/posthog/async_migrations/utils.py\n+++ b/posthog/async_migrations/utils.py\n@@ -1,5 +1,6 @@\n+import asyncio\n from datetime import datetime\n-from typing import Optional\n+from typing import Callable, Optional\n \n import posthoganalytics\n import structlog\n@@ -25,7 +26,7 @@ from posthog.utils import get_machine_id\n \n logger = structlog.get_logger(__name__)\n \n-SLEEP_TIME_SECONDS = 20\n+SLEEP_TIME_SECONDS = 20 if not TEST else 1\n \n \n def send_analytics_to_posthog(event, data):\n@@ -74,22 +75,30 @@ def execute_op_clickhouse(\n     client._request_information = None\n \n \n-def execute_on_each_shard(sql, args, settings=None) -> None:\n+def execute_on_each_shard(sql: str, args=None, settings=None) -> None:\n     \"\"\"\n     Executes query on each shard separately (if enabled) or on the cluster as a whole (if not enabled).\n \n     Note that the shard selection is stable - subsequent queries are guaranteed to hit the same shards!\n     \"\"\"\n-    if \"{on_cluster_clause}\" not in sql:\n-        raise Exception(\"SQL must include {on_cluster_clause} to allow execution on each shard\")\n \n     if CLICKHOUSE_ALLOW_PER_SHARD_EXECUTION:\n         sql = sql.format(on_cluster_clause=\"\")\n     else:\n         sql = sql.format(on_cluster_clause=f\"ON CLUSTER '{CLICKHOUSE_CLUSTER}'\")\n \n-    for _, _, connection in _get_all_shard_connections():\n-        connection.execute(sql, args, settings=settings)\n+    async def run_on_all_shards():\n+        tasks = []\n+        for _, _, connection_pool in _get_all_shard_connections():\n+            tasks.append(asyncio.create_task(run_on_connection(connection_pool)))\n+\n+        await asyncio.wait(tasks)\n+\n+    async def run_on_connection(connection_pool):\n+        with connection_pool.get_client() as connection:\n+            connection.execute(sql, args, settings=settings)\n+\n+    asyncio.run(run_on_all_shards())\n \n \n def _get_all_shard_connections():\n@@ -108,11 +117,9 @@ def _get_all_shard_connections():\n         )\n         for shard, host in rows:\n             ch_pool = make_ch_pool(host=host)\n-            with ch_pool.get_client() as connection:\n-                yield shard, host, connection\n+            yield shard, host, ch_pool\n     else:\n-        with default_ch_pool.get_client() as connection:\n-            yield None, None, connection\n+        yield None, None, default_ch_pool\n \n \n def execute_op_postgres(sql: str, query_id: str):\n@@ -130,21 +137,23 @@ def _get_number_running_on_cluster(query_pattern: str) -> int:\n         \"\"\"\n         SELECT count()\n         FROM clusterAllReplicas(%(cluster)s, system, 'processes')\n-        WHERE query LIKE %(query_pattern)s\n+        WHERE query LIKE %(query_pattern)s AND query NOT LIKE '%%clusterAllReplicas%%'\n         \"\"\",\n         {\"cluster\": CLICKHOUSE_CLUSTER, \"query_pattern\": query_pattern},\n     )[0][0]\n \n \n-def _sleep_until_finished(query_pattern: str) -> None:\n+def sleep_until_finished(name, is_running: Callable[[], bool]) -> None:\n     from time import sleep\n \n-    while _get_number_running_on_cluster(query_pattern) > 0:\n-        logger.debug(\"Query still running, waiting until it's complete\", query_pattern=query_pattern)\n+    while is_running():\n+        logger.debug(\"Operation still running, waiting until it's complete\", name=name)\n         sleep(SLEEP_TIME_SECONDS)\n \n \n-def run_optimize_table(unique_name: str, query_id: str, table_name: str, deduplicate=False, final=False):\n+def run_optimize_table(\n+    *, unique_name: str, query_id: str, table_name: str, deduplicate=False, final=False, per_shard=False\n+):\n     \"\"\"\n     Runs the passed OPTIMIZE TABLE query.\n \n@@ -152,17 +161,20 @@ def run_optimize_table(unique_name: str, query_id: str, table_name: str, dedupli\n     we'll wait for that to complete first.\n     \"\"\"\n     if not TEST and _get_number_running_on_cluster(f\"%%optimize:{unique_name}%%\") > 0:\n-        _sleep_until_finished(f\"%%optimize:{unique_name}%%\")\n+        sleep_until_finished(unique_name, lambda: _get_number_running_on_cluster(f\"%%optimize:{unique_name}%%\") > 0)\n     else:\n         final_clause = \"FINAL\" if final else \"\"\n         deduplicate_clause = \"DEDUPLICATE\" if deduplicate else \"\"\n-        on_cluster_clause = \"{on_cluster_clause}\"\n-        sql = f\"OPTIMIZE TABLE {table_name} {on_cluster_clause} {final_clause} {deduplicate_clause}\"\n+        sql = f\"OPTIMIZE TABLE {table_name} {{on_cluster_clause}} {final_clause} {deduplicate_clause}\"\n+\n+        if not per_shard:\n+            sql = sql.format(on_cluster_clause=f\"ON CLUSTER '{CLICKHOUSE_CLUSTER}'\")\n+\n         execute_op_clickhouse(\n             sql,\n             query_id=f\"optimize:{unique_name}/{query_id}\",\n             settings={\"max_execution_time\": ASYNC_MIGRATIONS_DEFAULT_TIMEOUT_SECONDS, \"mutations_sync\": 2},\n-            per_shard=True,\n+            per_shard=per_shard,\n         )\n \n \ndiff --git a/posthog/clickhouse/test/__snapshots__/test_schema.ambr b/posthog/clickhouse/test/__snapshots__/test_schema.ambr\nindex 1ebbf52b5..7d4a12f1b 100644\n--- a/posthog/clickhouse/test/__snapshots__/test_schema.ambr\n+++ b/posthog/clickhouse/test/__snapshots__/test_schema.ambr\n@@ -13,12 +13,12 @@\n       created_at DateTime64(6, 'UTC'),\n       person_id UUID,\n       person_created_at DateTime64,\n-      person_properties VARCHAR,\n-      group0_properties VARCHAR,\n-      group1_properties VARCHAR,\n-      group2_properties VARCHAR,\n-      group3_properties VARCHAR,\n-      group4_properties VARCHAR,\n+      person_properties VARCHAR Codec(ZSTD(3)),\n+      group0_properties VARCHAR Codec(ZSTD(3)),\n+      group1_properties VARCHAR Codec(ZSTD(3)),\n+      group2_properties VARCHAR Codec(ZSTD(3)),\n+      group3_properties VARCHAR Codec(ZSTD(3)),\n+      group4_properties VARCHAR Codec(ZSTD(3)),\n       group0_created_at DateTime64,\n       group1_created_at DateTime64,\n       group2_created_at DateTime64,\n@@ -71,12 +71,12 @@\n       created_at DateTime64(6, 'UTC'),\n       person_id UUID,\n       person_created_at DateTime64,\n-      person_properties VARCHAR,\n-      group0_properties VARCHAR,\n-      group1_properties VARCHAR,\n-      group2_properties VARCHAR,\n-      group3_properties VARCHAR,\n-      group4_properties VARCHAR,\n+      person_properties VARCHAR Codec(ZSTD(3)),\n+      group0_properties VARCHAR Codec(ZSTD(3)),\n+      group1_properties VARCHAR Codec(ZSTD(3)),\n+      group2_properties VARCHAR Codec(ZSTD(3)),\n+      group3_properties VARCHAR Codec(ZSTD(3)),\n+      group4_properties VARCHAR Codec(ZSTD(3)),\n       group0_created_at DateTime64,\n       group1_created_at DateTime64,\n       group2_created_at DateTime64,\n@@ -220,12 +220,12 @@\n       created_at DateTime64(6, 'UTC'),\n       person_id UUID,\n       person_created_at DateTime64,\n-      person_properties VARCHAR,\n-      group0_properties VARCHAR,\n-      group1_properties VARCHAR,\n-      group2_properties VARCHAR,\n-      group3_properties VARCHAR,\n-      group4_properties VARCHAR,\n+      person_properties VARCHAR Codec(ZSTD(3)),\n+      group0_properties VARCHAR Codec(ZSTD(3)),\n+      group1_properties VARCHAR Codec(ZSTD(3)),\n+      group2_properties VARCHAR Codec(ZSTD(3)),\n+      group3_properties VARCHAR Codec(ZSTD(3)),\n+      group4_properties VARCHAR Codec(ZSTD(3)),\n       group0_created_at DateTime64,\n       group1_created_at DateTime64,\n       group2_created_at DateTime64,\n@@ -419,12 +419,12 @@\n       created_at DateTime64(6, 'UTC'),\n       person_id UUID,\n       person_created_at DateTime64,\n-      person_properties VARCHAR,\n-      group0_properties VARCHAR,\n-      group1_properties VARCHAR,\n-      group2_properties VARCHAR,\n-      group3_properties VARCHAR,\n-      group4_properties VARCHAR,\n+      person_properties VARCHAR Codec(ZSTD(3)),\n+      group0_properties VARCHAR Codec(ZSTD(3)),\n+      group1_properties VARCHAR Codec(ZSTD(3)),\n+      group2_properties VARCHAR Codec(ZSTD(3)),\n+      group3_properties VARCHAR Codec(ZSTD(3)),\n+      group4_properties VARCHAR Codec(ZSTD(3)),\n       group0_created_at DateTime64,\n       group1_created_at DateTime64,\n       group2_created_at DateTime64,\n@@ -778,12 +778,12 @@\n       created_at DateTime64(6, 'UTC'),\n       person_id UUID,\n       person_created_at DateTime64,\n-      person_properties VARCHAR,\n-      group0_properties VARCHAR,\n-      group1_properties VARCHAR,\n-      group2_properties VARCHAR,\n-      group3_properties VARCHAR,\n-      group4_properties VARCHAR,\n+      person_properties VARCHAR Codec(ZSTD(3)),\n+      group0_properties VARCHAR Codec(ZSTD(3)),\n+      group1_properties VARCHAR Codec(ZSTD(3)),\n+      group2_properties VARCHAR Codec(ZSTD(3)),\n+      group3_properties VARCHAR Codec(ZSTD(3)),\n+      group4_properties VARCHAR Codec(ZSTD(3)),\n       group0_created_at DateTime64,\n       group1_created_at DateTime64,\n       group2_created_at DateTime64,\n@@ -853,12 +853,12 @@\n       created_at DateTime64(6, 'UTC'),\n       person_id UUID,\n       person_created_at DateTime64,\n-      person_properties VARCHAR,\n-      group0_properties VARCHAR,\n-      group1_properties VARCHAR,\n-      group2_properties VARCHAR,\n-      group3_properties VARCHAR,\n-      group4_properties VARCHAR,\n+      person_properties VARCHAR Codec(ZSTD(3)),\n+      group0_properties VARCHAR Codec(ZSTD(3)),\n+      group1_properties VARCHAR Codec(ZSTD(3)),\n+      group2_properties VARCHAR Codec(ZSTD(3)),\n+      group3_properties VARCHAR Codec(ZSTD(3)),\n+      group4_properties VARCHAR Codec(ZSTD(3)),\n       group0_created_at DateTime64,\n       group1_created_at DateTime64,\n       group2_created_at DateTime64,\n@@ -1086,12 +1086,12 @@\n       created_at DateTime64(6, 'UTC'),\n       person_id UUID,\n       person_created_at DateTime64,\n-      person_properties VARCHAR,\n-      group0_properties VARCHAR,\n-      group1_properties VARCHAR,\n-      group2_properties VARCHAR,\n-      group3_properties VARCHAR,\n-      group4_properties VARCHAR,\n+      person_properties VARCHAR Codec(ZSTD(3)),\n+      group0_properties VARCHAR Codec(ZSTD(3)),\n+      group1_properties VARCHAR Codec(ZSTD(3)),\n+      group2_properties VARCHAR Codec(ZSTD(3)),\n+      group3_properties VARCHAR Codec(ZSTD(3)),\n+      group4_properties VARCHAR Codec(ZSTD(3)),\n       group0_created_at DateTime64,\n       group1_created_at DateTime64,\n       group2_created_at DateTime64,\ndiff --git a/posthog/models/event/sql.py b/posthog/models/event/sql.py\nindex 6a52698a1..aa7b028e5 100644\n--- a/posthog/models/event/sql.py\n+++ b/posthog/models/event/sql.py\n@@ -31,12 +31,12 @@ CREATE TABLE IF NOT EXISTS {table_name} ON CLUSTER '{cluster}'\n     created_at DateTime64(6, 'UTC'),\n     person_id UUID,\n     person_created_at DateTime64,\n-    person_properties VARCHAR,\n-    group0_properties VARCHAR,\n-    group1_properties VARCHAR,\n-    group2_properties VARCHAR,\n-    group3_properties VARCHAR,\n-    group4_properties VARCHAR,\n+    person_properties VARCHAR Codec(ZSTD(3)),\n+    group0_properties VARCHAR Codec(ZSTD(3)),\n+    group1_properties VARCHAR Codec(ZSTD(3)),\n+    group2_properties VARCHAR Codec(ZSTD(3)),\n+    group3_properties VARCHAR Codec(ZSTD(3)),\n+    group4_properties VARCHAR Codec(ZSTD(3)),\n     group0_created_at DateTime64,\n     group1_created_at DateTime64,\n     group2_created_at DateTime64,\ndiff --git a/posthog/models/group/util.py b/posthog/models/group/util.py\nindex 707ae3d23..13bb42b0e 100644\n--- a/posthog/models/group/util.py\n+++ b/posthog/models/group/util.py\n@@ -1,7 +1,9 @@\n import datetime\n import json\n-from typing import Dict, Optional\n+from typing import Dict, Optional, Union\n \n+import pytz\n+from dateutil.parser import isoparse\n from django.utils.timezone import now\n \n from posthog.kafka_client.client import ClickhouseProducer\n@@ -35,16 +37,28 @@ def create_group(\n     group_type_index: GroupTypeIndex,\n     group_key: str,\n     properties: Optional[Dict] = None,\n-    timestamp: Optional[datetime.datetime] = None,\n+    timestamp: Optional[Union[datetime.datetime, str]] = None,\n ):\n     \"\"\"Create proper Group record (ClickHouse + Postgres).\"\"\"\n     if not properties:\n         properties = {}\n     if not timestamp:\n         timestamp = now()\n+\n+    # clickhouse specific formatting\n+    if isinstance(timestamp, str):\n+        timestamp = isoparse(timestamp)\n+    else:\n+        timestamp = timestamp.astimezone(pytz.utc)\n+\n     raw_create_group_ch(team_id, group_type_index, group_key, properties, timestamp)\n     Group.objects.create(\n-        team_id=team_id, group_type_index=group_type_index, group_key=group_key, group_properties=properties, version=0,\n+        team_id=team_id,\n+        group_type_index=group_type_index,\n+        group_key=group_key,\n+        group_properties=properties,\n+        created_at=timestamp,\n+        version=0,\n     )\n \n \ndiff --git a/posthog/models/person/sql.py b/posthog/models/person/sql.py\nindex 3c74108bb..906a78356 100644\n--- a/posthog/models/person/sql.py\n+++ b/posthog/models/person/sql.py\n@@ -317,7 +317,7 @@ WHERE team_id = %(team_id)s\n )\n \n INSERT_PERSON_SQL = \"\"\"\n-INSERT INTO person (id, created_at, team_id, properties, is_identified, _timestamp, _offset, is_deleted, version) SELECT %(id)s, %(created_at)s, %(team_id)s, %(properties)s, %(is_identified)s, %(_timestamp)s, 0, 0, 0\n+INSERT INTO person (id, created_at, team_id, properties, is_identified, _timestamp, _offset, is_deleted, version) SELECT %(id)s, %(created_at)s, %(team_id)s, %(properties)s, %(is_identified)s, %(_timestamp)s, 0, 0, %(version)s\n \"\"\"\n \n INSERT_PERSON_BULK_SQL = \"\"\"\ndiff --git a/posthog/models/person/util.py b/posthog/models/person/util.py\nindex 2e0542be5..f40b40cc1 100644\n--- a/posthog/models/person/util.py\n+++ b/posthog/models/person/util.py\n@@ -3,6 +3,8 @@ import json\n from contextlib import ExitStack\n from typing import Dict, List, Optional, Union\n \n+import pytz\n+from dateutil.parser import isoparse\n from django.db.models.query import QuerySet\n from django.db.models.signals import post_delete, post_save\n from django.dispatch import receiver\n@@ -100,7 +102,7 @@ def create_person(\n     properties: Optional[Dict] = {},\n     sync: bool = False,\n     is_identified: bool = False,\n-    timestamp: Optional[datetime.datetime] = None,\n+    timestamp: Optional[Union[datetime.datetime, str]] = None,\n ) -> str:\n     if uuid:\n         uuid = str(uuid)\n@@ -109,6 +111,12 @@ def create_person(\n     if not timestamp:\n         timestamp = now()\n \n+    # clickhouse specific formatting\n+    if isinstance(timestamp, str):\n+        timestamp = isoparse(timestamp)\n+    else:\n+        timestamp = timestamp.astimezone(pytz.utc)\n+\n     data = {\n         \"id\": str(uuid),\n         \"team_id\": team_id,\n"
  },
  "16b198ca7946122bd0c14c356032989832803c70": {
    "hash": "16b198ca7946122bd0c14c356032989832803c70",
    "message": "fix: Stringify Person asDisplay (#11392)",
    "diff": "commit 16b198ca7946122bd0c14c356032989832803c70\nAuthor: Ben White <ben@benjackwhite.co.uk>\nDate:   Fri Aug 19 13:09:18 2022 +0100\n\n    fix: Stringify Person asDisplay (#11392)\n\ndiff --git a/frontend/src/scenes/persons/PersonHeader.tsx b/frontend/src/scenes/persons/PersonHeader.tsx\nindex a79783d37..ddb59c9b0 100644\n--- a/frontend/src/scenes/persons/PersonHeader.tsx\n+++ b/frontend/src/scenes/persons/PersonHeader.tsx\n@@ -27,7 +27,7 @@ export function asDisplay(person: PersonType | PersonActorType | null | undefine\n     const propertyIdentifier = customPropertyKey ? person.properties?.[customPropertyKey] : undefined\n \n     const customIdentifier: string =\n-        typeof propertyIdentifier === 'object' ? JSON.stringify(propertyIdentifier) : propertyIdentifier\n+        typeof propertyIdentifier !== 'string' ? JSON.stringify(propertyIdentifier) : propertyIdentifier\n \n     const display: string | undefined = (customIdentifier || person.distinct_ids?.[0])?.trim()\n \n"
  },
  "3bd18a7b710f714d582cffec4df62ff91357f78c": {
    "hash": "3bd18a7b710f714d582cffec4df62ff91357f78c",
    "message": "Fix PersonHeader name rendering (#4215)",
    "diff": "commit 3bd18a7b710f714d582cffec4df62ff91357f78c\nAuthor: Paolo D'Amico <paolodamico@users.noreply.github.com>\nDate:   Wed May 5 04:20:01 2021 -0700\n\n    Fix PersonHeader name rendering (#4215)\n\ndiff --git a/frontend/src/scenes/persons/PersonHeader.tsx b/frontend/src/scenes/persons/PersonHeader.tsx\nindex 97c848c85..c7a3d70e2 100644\n--- a/frontend/src/scenes/persons/PersonHeader.tsx\n+++ b/frontend/src/scenes/persons/PersonHeader.tsx\n@@ -4,10 +4,11 @@ import { IconPerson } from 'lib/components/icons'\n import './PersonHeader.scss'\n \n export function PersonHeader({ person }: { person?: Partial<PersonType> | null }): JSX.Element {\n-    const propertiesIdentifier = person?.properties\n+    const propertyIdentifier = person?.properties\n         ? person.properties.email || person.properties.name || person.properties.username\n         : null\n-    const customIdentifier = propertiesIdentifier ? JSON.stringify(propertiesIdentifier) : null\n+    const customIdentifier =\n+        typeof propertyIdentifier === 'object' ? JSON.stringify(propertyIdentifier) : propertyIdentifier\n \n     const displayId = useMemo(() => {\n         if (!person?.distinct_ids?.length) {\n"
  },
  "6cd5628562f217b66f20f2e04b714c386afa3ea2": {
    "hash": "6cd5628562f217b66f20f2e04b714c386afa3ea2",
    "message": "fix: Don't export Insights that are deleted (#11375)",
    "diff": "commit 6cd5628562f217b66f20f2e04b714c386afa3ea2\nAuthor: Ben White <ben@benjackwhite.co.uk>\nDate:   Fri Aug 19 08:49:23 2022 +0100\n\n    fix: Don't export Insights that are deleted (#11375)\n\ndiff --git a/ee/tasks/subscriptions/__init__.py b/ee/tasks/subscriptions/__init__.py\nindex 856d88523..7f7f23780 100644\n--- a/ee/tasks/subscriptions/__init__.py\n+++ b/ee/tasks/subscriptions/__init__.py\n@@ -83,7 +83,12 @@ def schedule_all_subscriptions() -> None:\n     all upcoming hourly scheduled subscriptions\n     \"\"\"\n     now_with_buffer = datetime.utcnow() + timedelta(minutes=15)\n-    subscriptions = Subscription.objects.filter(next_delivery_date__lte=now_with_buffer, deleted=False).all()\n+    subscriptions = (\n+        Subscription.objects.filter(next_delivery_date__lte=now_with_buffer, deleted=False)\n+        .exclude(dashboard__deleted=True)\n+        .exclude(insight__deleted=True)\n+        .all()\n+    )\n \n     for subscription in subscriptions:\n         deliver_subscription_report.delay(subscription.id)\ndiff --git a/ee/tasks/test/subscriptions/test_subscriptions.py b/ee/tasks/test/subscriptions/test_subscriptions.py\nindex 55417c279..bc15eb676 100644\n--- a/ee/tasks/test/subscriptions/test_subscriptions.py\n+++ b/ee/tasks/test/subscriptions/test_subscriptions.py\n@@ -11,6 +11,7 @@ from ee.tasks.subscriptions import (\n     schedule_all_subscriptions,\n )\n from ee.tasks.test.subscriptions.subscriptions_test_factory import create_subscription\n+from posthog.models import dashboard\n from posthog.models.dashboard import Dashboard\n from posthog.models.dashboard_tile import DashboardTile\n from posthog.models.exported_asset import ExportedAsset\n@@ -65,6 +66,39 @@ class TestSubscriptionsTasks(APIBaseTest):\n \n         assert mock_deliver_task.delay.mock_calls == [call(subscriptions[0].id), call(subscriptions[1].id)]\n \n+    @patch(\"ee.tasks.subscriptions.deliver_subscription_report\")\n+    def test_does_not_schedule_subscription_if_item_is_deleted(\n+        self,\n+        mock_deliver_task: MagicMock,\n+        mock_gen_assets: MagicMock,\n+        mock_send_email: MagicMock,\n+        mock_send_slack: MagicMock,\n+    ) -> None:\n+        create_subscription(\n+            team=self.team,\n+            insight=self.insight,\n+            created_by=self.user,\n+            target_type=\"slack\",\n+            target_value=\"C12345|#test-channel\",\n+        )\n+\n+        create_subscription(\n+            team=self.team,\n+            dashboard=self.dashboard,\n+            created_by=self.user,\n+            target_type=\"slack\",\n+            target_value=\"C12345|#test-channel\",\n+        )\n+\n+        self.insight.deleted = True\n+        self.insight.save()\n+        self.dashboard.deleted = True\n+        self.dashboard.save()\n+\n+        schedule_all_subscriptions()\n+\n+        assert mock_deliver_task.delay.call_count == 0\n+\n     def test_deliver_subscription_report_email(\n         self, mock_gen_assets: MagicMock, mock_send_email: MagicMock, mock_send_slack: MagicMock,\n     ) -> None:\n@@ -125,3 +159,4 @@ class TestSubscriptionsTasks(APIBaseTest):\n         assert mock_send_slack.call_args_list == [\n             call(subscription, [self.asset], total_asset_count=1, is_new_subscription=False),\n         ]\n+\ndiff --git a/ee/tasks/test/subscriptions/test_subscriptions_utils.py b/ee/tasks/test/subscriptions/test_subscriptions_utils.py\nindex afb5838be..bb46ce2ea 100644\n--- a/ee/tasks/test/subscriptions/test_subscriptions_utils.py\n+++ b/ee/tasks/test/subscriptions/test_subscriptions_utils.py\n@@ -24,8 +24,9 @@ class TestSubscriptionsTasksUtils(APIBaseTest):\n         self.dashboard = Dashboard.objects.create(team=self.team, name=\"private dashboard\", created_by=self.user)\n         self.insight = Insight.objects.create(team=self.team, short_id=\"123456\", name=\"My Test subscription\")\n         self.tiles = []\n-        for _ in range(10):\n-            self.tiles.append(DashboardTile.objects.create(dashboard=self.dashboard, insight=self.insight))\n+        for i in range(10):\n+            insight = Insight.objects.create(team=self.team, short_id=f\"insight-{i}\", name=\"My Test subscription\")\n+            self.tiles.append(DashboardTile.objects.create(dashboard=self.dashboard, insight=insight))\n \n         self.subscription = create_subscription(team=self.team, insight=self.insight, created_by=self.user)\n \n@@ -52,3 +53,15 @@ class TestSubscriptionsTasksUtils(APIBaseTest):\n             generate_assets(subscription)\n \n         assert str(e.value) == \"There are no insights to be sent for this Subscription\"\n+\n+    def test_exludes_deleted_insights_for_dashboard(self, mock_export_task: MagicMock, mock_group: MagicMock) -> None:\n+        for i in range(1, 10):\n+            self.tiles[i].insight.deleted = True\n+            self.tiles[i].insight.save()\n+        subscription = create_subscription(team=self.team, dashboard=self.dashboard, created_by=self.user)\n+\n+        insights, assets = generate_assets(subscription)\n+\n+        assert len(insights) == 1\n+        assert len(assets) == 1\n+        assert mock_export_task.s.call_count == 1\ndiff --git a/posthog/models/dashboard_tile.py b/posthog/models/dashboard_tile.py\nindex 89683258e..d8faabcaa 100644\n--- a/posthog/models/dashboard_tile.py\n+++ b/posthog/models/dashboard_tile.py\n@@ -69,7 +69,11 @@ def update_filters_hashes(tile_update_candidates):\n \n def get_tiles_ordered_by_position(dashboard: Dashboard, size: str = \"xs\") -> List[DashboardTile]:\n     tiles = list(\n-        DashboardTile.objects.filter(dashboard=dashboard).select_related(\"insight\").order_by(\"insight__order\").all()\n+        DashboardTile.objects.filter(dashboard=dashboard)\n+        .select_related(\"insight\")\n+        .exclude(insight__deleted=True)\n+        .order_by(\"insight__order\")\n+        .all()\n     )\n     tiles.sort(key=lambda x: x.layouts.get(size, {}).get(\"y\", 100))\n     return tiles\n"
  },
  "b873bf2cff81b6676dccdaa6091740688af40f82": {
    "hash": "b873bf2cff81b6676dccdaa6091740688af40f82",
    "message": "fix: Show recordings for a Person even if disabled for the project (#11313)\n    \n    * fix: Show recordings for a Person even if disabled for the project\n    \n    * Correct typos\n    \n    * More typos",
    "diff": "commit b873bf2cff81b6676dccdaa6091740688af40f82\nAuthor: Ben White <ben@benjackwhite.co.uk>\nDate:   Tue Aug 16 13:49:54 2022 +0200\n\n    fix: Show recordings for a Person even if disabled for the project (#11313)\n    \n    * fix: Show recordings for a Person even if disabled for the project\n    \n    * Correct typos\n    \n    * More typos\n\ndiff --git a/frontend/src/scenes/persons/Person.tsx b/frontend/src/scenes/persons/Person.tsx\nindex 110a452b6..ca2864c6d 100644\n--- a/frontend/src/scenes/persons/Person.tsx\n+++ b/frontend/src/scenes/persons/Person.tsx\n@@ -23,7 +23,9 @@ import { groupsAccessLogic } from 'lib/introductions/groupsAccessLogic'\n import { ActivityLog } from 'lib/components/ActivityLog/ActivityLog'\n import { personActivityDescriber } from 'scenes/persons/activityDescriptions'\n import { ActivityScope } from 'lib/components/ActivityLog/humanizeActivity'\n-import { LemonButton } from '@posthog/lemon-ui'\n+import { LemonButton, Link } from '@posthog/lemon-ui'\n+import { teamLogic } from 'scenes/teamLogic'\n+import { AlertMessage } from 'lib/components/AlertMessage'\n \n const { TabPane } = Tabs\n \n@@ -82,18 +84,12 @@ function PersonCaption({ person }: { person: PersonType }): JSX.Element {\n }\n \n export function Person(): JSX.Element | null {\n-    const {\n-        person,\n-        personLoading,\n-        deletedPersonLoading,\n-        currentTab,\n-        showSessionRecordings,\n-        splitMergeModalShown,\n-        urlId,\n-    } = useValues(personsLogic)\n+    const { person, personLoading, deletedPersonLoading, currentTab, splitMergeModalShown, urlId } =\n+        useValues(personsLogic)\n     const { deletePerson, editProperty, deleteProperty, navigateToTab, setSplitMergeModalShown } =\n         useActions(personsLogic)\n     const { groupsEnabled } = useValues(groupsAccessLogic)\n+    const { currentTeam } = useValues(teamLogic)\n \n     if (!person) {\n         return personLoading ? (\n@@ -170,18 +166,25 @@ export function Person(): JSX.Element | null {\n                         sceneUrl={urls.person(urlId || person.distinct_ids[0] || String(person.id))}\n                     />\n                 </TabPane>\n-                {showSessionRecordings && (\n-                    <TabPane\n-                        tab={<span data-attr=\"person-session-recordings-tab\">Recordings</span>}\n-                        key={PersonsTabType.SESSION_RECORDINGS}\n-                    >\n-                        <SessionRecordingsTable\n-                            key={person.uuid} // force refresh if user changes\n-                            personUUID={person.uuid}\n-                            isPersonPage\n-                        />\n-                    </TabPane>\n-                )}\n+                <TabPane\n+                    tab={<span data-attr=\"person-session-recordings-tab\">Recordings</span>}\n+                    key={PersonsTabType.SESSION_RECORDINGS}\n+                >\n+                    {!currentTeam?.session_recording_opt_in ? (\n+                        <div className=\"mb-4\">\n+                            <AlertMessage type=\"info\">\n+                                Session recordings are currently disabled for this project. To use this feature, please\n+                                go to your <Link to={`${urls.projectSettings()}#recordings`}>project settings</Link> and\n+                                enable it.\n+                            </AlertMessage>\n+                        </div>\n+                    ) : null}\n+                    <SessionRecordingsTable\n+                        key={person.uuid} // force refresh if user changes\n+                        personUUID={person.uuid}\n+                        isPersonPage\n+                    />\n+                </TabPane>\n \n                 <TabPane tab={<span data-attr=\"persons-cohorts-tab\">Cohorts</span>} key={PersonsTabType.COHORTS}>\n                     <PersonCohorts />\ndiff --git a/frontend/src/scenes/persons/personsLogic.ts b/frontend/src/scenes/persons/personsLogic.ts\nindex 82914804d..cac1c4a62 100644\n--- a/frontend/src/scenes/persons/personsLogic.ts\n+++ b/frontend/src/scenes/persons/personsLogic.ts\n@@ -104,19 +104,9 @@ export const personsLogic = kea<personsLogicType>({\n                     : 'https://posthog.com/docs/api/persons',\n         ],\n         cohortId: [() => [(_, props) => props.cohort], (cohort: PersonLogicProps['cohort']) => cohort],\n-        showSessionRecordings: [\n-            (s) => [s.currentTeam],\n-            (currentTeam): boolean => {\n-                return !!currentTeam?.session_recording_opt_in\n-            },\n-        ],\n         currentTab: [\n-            (s) => [s.activeTab, s.showSessionRecordings],\n-            (activeTab, showSessionRecordings) => {\n-                // Ensure the activeTab reflects a valid tab given the available tabs\n-                if (activeTab === PersonsTabType.SESSION_RECORDINGS && !showSessionRecordings) {\n-                    return PersonsTabType.EVENTS\n-                }\n+            (s) => [s.activeTab],\n+            (activeTab) => {\n                 return activeTab || PersonsTabType.PROPERTIES\n             },\n         ],\n@@ -319,11 +309,7 @@ export const personsLogic = kea<personsLogicType>({\n         '/person/*': ({ _: rawPersonDistinctId }, { sessionRecordingId }, { activeTab }) => {\n             if (props.syncWithUrl) {\n                 if (sessionRecordingId) {\n-                    if (values.showSessionRecordings) {\n-                        actions.navigateToTab(PersonsTabType.SESSION_RECORDINGS)\n-                    } else {\n-                        actions.navigateToTab(PersonsTabType.EVENTS)\n-                    }\n+                    actions.navigateToTab(PersonsTabType.SESSION_RECORDINGS)\n                 } else if (activeTab && values.activeTab !== activeTab) {\n                     actions.navigateToTab(activeTab as PersonsTabType)\n                 }\ndiff --git a/frontend/src/scenes/session-recordings/SessionRecordings.tsx b/frontend/src/scenes/session-recordings/SessionRecordings.tsx\nindex d37084737..448c051f7 100644\n--- a/frontend/src/scenes/session-recordings/SessionRecordings.tsx\n+++ b/frontend/src/scenes/session-recordings/SessionRecordings.tsx\n@@ -1,38 +1,26 @@\n import React from 'react'\n import { SessionRecordingsTable } from './SessionRecordingsTable'\n import { PageHeader } from 'lib/components/PageHeader'\n-import { Alert, Button, Row } from 'antd'\n import { teamLogic } from 'scenes/teamLogic'\n import { useValues } from 'kea'\n-import { router } from 'kea-router'\n import { urls } from 'scenes/urls'\n-import { ArrowRightOutlined } from '@ant-design/icons'\n import { SceneExport } from 'scenes/sceneTypes'\n import { sessionRecordingsTableLogic } from 'scenes/session-recordings/sessionRecordingsTableLogic'\n+import { AlertMessage } from 'lib/components/AlertMessage'\n+import { Link } from '@posthog/lemon-ui'\n \n export function SessionsRecordings(): JSX.Element {\n     const { currentTeam } = useValues(teamLogic)\n     return (\n         <div>\n-            <PageHeader title={<Row align=\"middle\">Recordings</Row>} />\n+            <PageHeader title={<div>Recordings</div>} />\n             {currentTeam && !currentTeam?.session_recording_opt_in ? (\n-                <Alert\n-                    style={{ marginBottom: 16, display: 'flex', alignItems: 'center' }}\n-                    message=\"Recordings are not yet enabled for this project\"\n-                    description=\"To use this feature, please go to your project settings and enable it.\"\n-                    type=\"info\"\n-                    showIcon\n-                    action={\n-                        <Button\n-                            type=\"primary\"\n-                            onClick={() => {\n-                                router.actions.push(urls.projectSettings(), {}, 'recordings')\n-                            }}\n-                        >\n-                            Go to settings <ArrowRightOutlined />\n-                        </Button>\n-                    }\n-                />\n+                <div className=\"mb-4\">\n+                    <AlertMessage type=\"info\">\n+                        Session recordings are currently disabled for this project. To use this feature, please go to\n+                        your <Link to={`${urls.projectSettings()}#recordings`}>project settings</Link> and enable it.\n+                    </AlertMessage>\n+                </div>\n             ) : null}\n \n             <SessionRecordingsTable key=\"global\" />\n"
  },
  "b01a07b8d088bd239f0e6a0f81a9ff9da7c81b8c": {
    "hash": "b01a07b8d088bd239f0e6a0f81a9ff9da7c81b8c",
    "message": "fix: Person property search layout (#11242)",
    "diff": "commit b01a07b8d088bd239f0e6a0f81a9ff9da7c81b8c\nAuthor: Ben White <ben@benjackwhite.co.uk>\nDate:   Thu Aug 11 10:44:20 2022 +0200\n\n    fix: Person property search layout (#11242)\n\ndiff --git a/frontend/src/lib/components/PropertiesTable.tsx b/frontend/src/lib/components/PropertiesTable.tsx\nindex d5157cced..f9dd28d41 100644\n--- a/frontend/src/lib/components/PropertiesTable.tsx\n+++ b/frontend/src/lib/components/PropertiesTable.tsx\n@@ -275,7 +275,7 @@ export function PropertiesTable({\n         return Object.keys(properties).length > 0 ? (\n             <>\n                 {searchable && (\n-                    <div className=\"flex justify-between gap-4\">\n+                    <div className=\"flex justify-between items-center gap-4 mb-4\">\n                         <LemonInput\n                             type=\"search\"\n                             placeholder=\"Search for property keys and values\"\ndiff --git a/frontend/src/scenes/persons/NewPropertyComponent.tsx b/frontend/src/scenes/persons/NewPropertyComponent.tsx\nindex c041c1d62..a0ebec0d2 100644\n--- a/frontend/src/scenes/persons/NewPropertyComponent.tsx\n+++ b/frontend/src/scenes/persons/NewPropertyComponent.tsx\n@@ -28,17 +28,13 @@ export function NewPropertyComponent({ editProperty }: NewPropertyComponentProps\n \n     return (\n         <>\n-            <div className=\"mb-4\">\n-                <div className=\"text-right\">\n-                    <LemonButton\n-                        data-attr=\"add-prop-button\"\n-                        onClick={() => setState({ ...state, creating: true })}\n-                        type=\"primary\"\n-                    >\n-                        New property\n-                    </LemonButton>\n-                </div>\n-            </div>\n+            <LemonButton\n+                data-attr=\"add-prop-button\"\n+                onClick={() => setState({ ...state, creating: true })}\n+                type=\"primary\"\n+            >\n+                New property\n+            </LemonButton>\n             <Modal\n                 visible={state.creating}\n                 destroyOnClose\ndiff --git a/frontend/src/scenes/persons/Person.tsx b/frontend/src/scenes/persons/Person.tsx\nindex 67d6e1110..56c28059d 100644\n--- a/frontend/src/scenes/persons/Person.tsx\n+++ b/frontend/src/scenes/persons/Person.tsx\n@@ -1,5 +1,5 @@\n import React from 'react'\n-import { Button, Dropdown, Menu, Popconfirm, Tabs, Tag } from 'antd'\n+import { Dropdown, Menu, Popconfirm, Tabs, Tag } from 'antd'\n import { DownOutlined, InfoCircleOutlined } from '@ant-design/icons'\n import { EventsTable } from 'scenes/events'\n import { SessionRecordingsTable } from 'scenes/session-recordings/SessionRecordingsTable'\n@@ -23,6 +23,7 @@ import { groupsAccessLogic } from 'lib/introductions/groupsAccessLogic'\n import { ActivityLog } from 'lib/components/ActivityLog/ActivityLog'\n import { personActivityDescriber } from 'scenes/persons/activityDescriptions'\n import { ActivityScope } from 'lib/components/ActivityLog/humanizeActivity'\n+import { LemonButton } from '@posthog/lemon-ui'\n \n const { TabPane } = Tabs\n \n@@ -37,8 +38,8 @@ export const scene: SceneExport = {\n \n function PersonCaption({ person }: { person: PersonType }): JSX.Element {\n     return (\n-        <div style={{ display: 'flex', flexWrap: 'wrap' }}>\n-            <div className=\"mr-4\">\n+        <div className=\"flex flex-wrap items-center gap-2\">\n+            <div>\n                 <span className=\"text-muted\">IDs:</span>{' '}\n                 <CopyToClipboardInline\n                     tooltipMessage={null}\n@@ -111,30 +112,31 @@ export function Person(): JSX.Element | null {\n                 title={asDisplay(person)}\n                 caption={<PersonCaption person={person} />}\n                 buttons={\n-                    <div>\n+                    <div className=\"flex gap-2\">\n                         <Popconfirm\n                             title=\"Are you sure you want to delete this person?\"\n                             onConfirm={deletePerson}\n                             okText={`Yes, delete ${asDisplay(person)}`}\n                             cancelText=\"No, cancel\"\n                         >\n-                            <Button\n-                                className=\"text-danger\"\n+                            <LemonButton\n                                 disabled={deletedPersonLoading}\n                                 loading={deletedPersonLoading}\n+                                type=\"secondary\"\n+                                status=\"danger\"\n                                 data-attr=\"delete-person\"\n                             >\n                                 Delete person\n-                            </Button>\n+                            </LemonButton>\n                         </Popconfirm>\n-                        <Button\n+                        <LemonButton\n                             onClick={() => setSplitMergeModalShown(true)}\n                             data-attr=\"merge-person-button\"\n-                            style={{ marginLeft: 8 }}\n                             data-tooltip=\"person-split-merge-button\"\n+                            type=\"secondary\"\n                         >\n                             Split or merge IDs\n-                        </Button>\n+                        </LemonButton>\n                     </div>\n                 }\n             />\n"
  },
  "b051578f0b1e4b2051df50f4afaf2b75bf892cbc": {
    "hash": "b051578f0b1e4b2051df50f4afaf2b75bf892cbc",
    "message": "fix: de-foo-ify the taxonomic filter field (#11339)",
    "diff": "commit b051578f0b1e4b2051df50f4afaf2b75bf892cbc\nAuthor: Paul D'Ambra <paul@posthog.com>\nDate:   Wed Aug 17 09:00:50 2022 +0100\n\n    fix: de-foo-ify the taxonomic filter field (#11339)\n\ndiff --git a/frontend/src/lib/components/TaxonomicFilter/TaxonomicFilter.tsx b/frontend/src/lib/components/TaxonomicFilter/TaxonomicFilter.tsx\nindex e52645185..1f60fcd83 100644\n--- a/frontend/src/lib/components/TaxonomicFilter/TaxonomicFilter.tsx\n+++ b/frontend/src/lib/components/TaxonomicFilter/TaxonomicFilter.tsx\n@@ -76,7 +76,7 @@ export function TaxonomicFilter({\n                         data-attr=\"taxonomic-filter-searchfield\"\n                         type=\"search\"\n                         fullWidth\n-                        placeholder={`Search ${searchPlaceholder} foo`}\n+                        placeholder={`Search ${searchPlaceholder}`}\n                         value={searchQuery}\n                         suffix={\n                             <Tooltip\n"
  },
  "4797857ec1afee4a48b249ad716aba850427431d": {
    "hash": "4797857ec1afee4a48b249ad716aba850427431d",
    "message": "Better placeholders for taxonomic filters (#7352)\n    \n    Previously for groups they got listed as `Search `, now it will be\n    `Search company properties`",
    "diff": "commit 4797857ec1afee4a48b249ad716aba850427431d\nAuthor: Karl-Aksel Puulmann <macobo@users.noreply.github.com>\nDate:   Thu Nov 25 12:50:31 2021 +0200\n\n    Better placeholders for taxonomic filters (#7352)\n    \n    Previously for groups they got listed as `Search `, now it will be\n    `Search company properties`\n\ndiff --git a/frontend/src/lib/components/TaxonomicFilter/TaxonomicFilter.tsx b/frontend/src/lib/components/TaxonomicFilter/TaxonomicFilter.tsx\nindex 3183d4cf9..5cae3f8cf 100644\n--- a/frontend/src/lib/components/TaxonomicFilter/TaxonomicFilter.tsx\n+++ b/frontend/src/lib/components/TaxonomicFilter/TaxonomicFilter.tsx\n@@ -43,29 +43,19 @@ export function TaxonomicFilter({\n         optionsFromProp,\n     }\n     const logic = taxonomicFilterLogic(taxonomicFilterLogicProps)\n-    const { searchQuery } = useValues(logic)\n+    const { searchQuery, searchPlaceholder } = useValues(logic)\n     const { setSearchQuery, moveUp, moveDown, tabLeft, tabRight, selectSelected } = useActions(logic)\n \n     useEffect(() => {\n         window.setTimeout(() => focusInput(), 1)\n     }, [])\n \n-    const placeholder = taxonomicGroupTypes\n-        .filter((type) => !type.includes('groups'))\n-        .map(\n-            (type, index) =>\n-                `${index !== 0 ? (index === taxonomicGroupTypes.length - 1 ? ' or ' : ', ') : ''}${type\n-                    .split('_')\n-                    .join(' ')}`\n-        )\n-        .join('')\n-\n     return (\n         <BindLogic logic={taxonomicFilterLogic} props={taxonomicFilterLogicProps}>\n             <div className={`taxonomic-filter${taxonomicGroupTypes.length === 1 ? ' one-taxonomic-tab' : ''}`}>\n                 <Input\n                     data-attr=\"taxonomic-filter-searchfield\"\n-                    placeholder={`Search ${placeholder}`}\n+                    placeholder={`Search ${searchPlaceholder}`}\n                     value={searchQuery}\n                     ref={(ref) => (searchInputRef.current = ref)}\n                     onChange={(e) => setSearchQuery(e.target.value)}\ndiff --git a/frontend/src/lib/components/TaxonomicFilter/taxonomicFilterLogic.ts b/frontend/src/lib/components/TaxonomicFilter/taxonomicFilterLogic.ts\nindex 3ca7b858d..bb685de11 100644\n--- a/frontend/src/lib/components/TaxonomicFilter/taxonomicFilterLogic.ts\n+++ b/frontend/src/lib/components/TaxonomicFilter/taxonomicFilterLogic.ts\n@@ -87,6 +87,7 @@ export const taxonomicFilterLogic = kea<taxonomicFilterLogicType>({\n             (teamId, groupAnalyticsTaxonomicGroups): TaxonomicFilterGroup[] => [\n                 {\n                     name: 'Events',\n+                    searchPlaceholder: 'events',\n                     type: TaxonomicFilterGroupType.Events,\n                     endpoint: `api/projects/${teamId}/event_definitions`,\n                     getName: (eventDefinition: EventDefinition): string => eventDefinition.name,\n@@ -94,6 +95,7 @@ export const taxonomicFilterLogic = kea<taxonomicFilterLogicType>({\n                 },\n                 {\n                     name: 'Actions',\n+                    searchPlaceholder: 'actions',\n                     type: TaxonomicFilterGroupType.Actions,\n                     logic: actionsModel as any,\n                     value: 'actions',\n@@ -102,6 +104,7 @@ export const taxonomicFilterLogic = kea<taxonomicFilterLogicType>({\n                 },\n                 {\n                     name: 'Elements',\n+                    searchPlaceholder: 'elements',\n                     type: TaxonomicFilterGroupType.Elements,\n                     options: ['tag_name', 'text', 'href', 'selector'].map((option) => ({\n                         name: option,\n@@ -111,6 +114,7 @@ export const taxonomicFilterLogic = kea<taxonomicFilterLogicType>({\n                 },\n                 {\n                     name: 'Event properties',\n+                    searchPlaceholder: 'event properties',\n                     type: TaxonomicFilterGroupType.EventProperties,\n                     endpoint: `api/projects/${teamId}/property_definitions`,\n                     getName: (propertyDefinition: PropertyDefinition): string => propertyDefinition.name,\n@@ -118,6 +122,7 @@ export const taxonomicFilterLogic = kea<taxonomicFilterLogicType>({\n                 },\n                 {\n                     name: 'Person properties',\n+                    searchPlaceholder: 'person properties',\n                     type: TaxonomicFilterGroupType.PersonProperties,\n                     logic: personPropertiesModel,\n                     value: 'personProperties',\n@@ -126,6 +131,7 @@ export const taxonomicFilterLogic = kea<taxonomicFilterLogicType>({\n                 },\n                 {\n                     name: 'Cohorts',\n+                    searchPlaceholder: 'cohorts',\n                     type: TaxonomicFilterGroupType.Cohorts,\n                     logic: cohortsModel,\n                     value: 'cohorts',\n@@ -134,6 +140,7 @@ export const taxonomicFilterLogic = kea<taxonomicFilterLogicType>({\n                 },\n                 {\n                     name: 'Cohorts',\n+                    searchPlaceholder: 'cohorts',\n                     type: TaxonomicFilterGroupType.CohortsWithAllUsers,\n                     logic: cohortsModel,\n                     value: 'cohortsWithAllUsers',\n@@ -142,6 +149,7 @@ export const taxonomicFilterLogic = kea<taxonomicFilterLogicType>({\n                 },\n                 {\n                     name: 'Pageview URLs',\n+                    searchPlaceholder: 'pageview URLs',\n                     type: TaxonomicFilterGroupType.PageviewUrls,\n                     endpoint: `api/projects/${teamId}/events/values/?key=$current_url`,\n                     searchAlias: 'value',\n@@ -150,6 +158,7 @@ export const taxonomicFilterLogic = kea<taxonomicFilterLogicType>({\n                 },\n                 {\n                     name: 'Screens',\n+                    searchPlaceholder: 'screens',\n                     type: TaxonomicFilterGroupType.Screens,\n                     endpoint: `api/projects/${teamId}/events/values/?key=$screen_name`,\n                     searchAlias: 'value',\n@@ -158,6 +167,7 @@ export const taxonomicFilterLogic = kea<taxonomicFilterLogicType>({\n                 },\n                 {\n                     name: 'Custom Events',\n+                    searchPlaceholder: 'custom events',\n                     type: TaxonomicFilterGroupType.CustomEvents,\n                     logic: eventDefinitionsModel,\n                     value: 'customEvents',\n@@ -166,6 +176,7 @@ export const taxonomicFilterLogic = kea<taxonomicFilterLogicType>({\n                 },\n                 {\n                     name: 'Wildcards',\n+                    searchPlaceholder: 'wildcards',\n                     type: TaxonomicFilterGroupType.Wildcards,\n                     // Populated via optionsFromProp\n                     getName: (option: SimpleOption): string => option.name,\n@@ -184,6 +195,7 @@ export const taxonomicFilterLogic = kea<taxonomicFilterLogicType>({\n             (groupTypes, teamId): TaxonomicFilterGroup[] =>\n                 groupTypes.map((type, index) => ({\n                     name: capitalizeFirstLetter(type.group_type),\n+                    searchPlaceholder: `${type.group_type} properties`,\n                     type: `${TaxonomicFilterGroupType.GroupsPrefix}_${index}` as TaxonomicFilterGroupType,\n                     logic: groupPropertiesModel,\n                     value: `groupProperties_${index}`,\n@@ -200,6 +212,28 @@ export const taxonomicFilterLogic = kea<taxonomicFilterLogicType>({\n             (s) => [s.taxonomicGroupTypes, s.activeTab],\n             (groupTypes, activeTab) => Math.max(groupTypes.indexOf(activeTab || ''), 0),\n         ],\n+        searchPlaceholder: [\n+            (s) => [s.taxonomicGroups, s.taxonomicGroupTypes],\n+            (allTaxonomicGroups, searchGroupTypes) => {\n+                if (searchGroupTypes.length > 1) {\n+                    searchGroupTypes = searchGroupTypes.filter(\n+                        (type) => !type.startsWith(TaxonomicFilterGroupType.GroupsPrefix)\n+                    )\n+                }\n+                const names = searchGroupTypes.map((type) => {\n+                    const taxonomicGroup = allTaxonomicGroups.find(\n+                        (tGroup) => tGroup.type == type\n+                    ) as TaxonomicFilterGroup\n+                    return taxonomicGroup.searchPlaceholder\n+                })\n+                return names\n+                    .map(\n+                        (name, index) =>\n+                            `${index !== 0 ? (index === searchGroupTypes.length - 1 ? ' or ' : ', ') : ''}${name}`\n+                    )\n+                    .join('')\n+            },\n+        ],\n     },\n \n     listeners: ({ actions, values, props }) => ({\ndiff --git a/frontend/src/lib/components/TaxonomicFilter/types.ts b/frontend/src/lib/components/TaxonomicFilter/types.ts\nindex fb1b308e1..9f3dc7893 100644\n--- a/frontend/src/lib/components/TaxonomicFilter/types.ts\n+++ b/frontend/src/lib/components/TaxonomicFilter/types.ts\n@@ -24,6 +24,7 @@ export interface TaxonomicFilterLogicProps extends TaxonomicFilterProps {\n \n export interface TaxonomicFilterGroup {\n     name: string\n+    searchPlaceholder: string\n     type: TaxonomicFilterGroupType\n     endpoint?: string\n     options?: Record<string, any>[]\n"
  },
  "1623b954637ba30fd05498332d557cab31f2a818": {
    "hash": "1623b954637ba30fd05498332d557cab31f2a818",
    "message": "fix: Icon position regression - Web performance  (#11554)\n    \n    \n    Co-authored-by: GitStart <gitstart@users.noreply.github.com>",
    "diff": "commit 1623b954637ba30fd05498332d557cab31f2a818\nAuthor: GitStart <1501599+gitstart@users.noreply.github.com>\nDate:   Thu Sep 1 10:23:54 2022 +0100\n\n    fix: Icon position regression - Web performance  (#11554)\n    \n    \n    Co-authored-by: GitStart <gitstart@users.noreply.github.com>\n\ndiff --git a/frontend/src/lib/components/PropertyKeyInfo.tsx b/frontend/src/lib/components/PropertyKeyInfo.tsx\nindex 7f41104a7..a5a775b26 100644\n--- a/frontend/src/lib/components/PropertyKeyInfo.tsx\n+++ b/frontend/src/lib/components/PropertyKeyInfo.tsx\n@@ -736,8 +736,8 @@ export function PropertyKeyInfo({\n \n     // By this point, property is a PH defined property\n     const innerContent = (\n-        <span className=\"property-key-info\">\n-            {!disableIcon && !!data && <span className=\"property-key-info-logo\" />}\n+        <span className=\"property-key-info flex items-center\">\n+            {!disableIcon && !!data && <span className=\"property-key-info-logo w-6\" />}\n             <Typography.Text\n                 ellipsis={ellipsis}\n                 style={{\n"
  },
  "031099ff09967ad21df718104a7919edcb0da110": {
    "hash": "031099ff09967ad21df718104a7919edcb0da110",
    "message": "Icons in taxonomic filter (#8934)",
    "diff": "commit 031099ff09967ad21df718104a7919edcb0da110\nAuthor: Alex Gyujin Kim <alexgkim205@gmail.com>\nDate:   Tue Mar 8 23:52:39 2022 -0800\n\n    Icons in taxonomic filter (#8934)\n\ndiff --git a/cypress/integration/person.js b/cypress/integration/person.js\nindex 98fb0d521..797d97132 100644\n--- a/cypress/integration/person.js\n+++ b/cypress/integration/person.js\n@@ -22,15 +22,15 @@ describe('Merge person', () => {\n         cy.get('[data-attr=persons-search]').type('deb').should('have.value', 'deb')\n         cy.get('.ant-input-search-button').click()\n         cy.contains('deborah.fernandez@gmail.com').click()\n-        cy.wait(100)\n+        cy.wait(1000)\n     })\n \n     it('Should merge person', () => {\n         cy.get('[role=\"tab\"]').contains('Events').click()\n         cy.get('.extra-ids').should('not.exist') // No extra IDs\n         cy.contains('$create_alias').should('not.exist')\n-        cy.get('span:contains(Pageview)').should('have.length', 1)\n-        cy.get('span:contains(clicked)').should('have.length', 1)\n+        cy.get('span.property-key-info:contains(Pageview)').should('have.length', 1)\n+        cy.get('span.property-key-info:contains(clicked)').should('have.length', 1)\n \n         // Merge people\n         cy.get('[data-attr=merge-person-button]').click()\ndiff --git a/cypress/integration/trends.js b/cypress/integration/trends.js\nindex 167a0895e..d7e79dd0a 100644\n--- a/cypress/integration/trends.js\n+++ b/cypress/integration/trends.js\n@@ -46,6 +46,7 @@ describe('Trends', () => {\n \n     it('Apply specific filter on default pageview event', () => {\n         cy.get('[data-attr=trend-element-subject-0]').click()\n+        cy.wait(500)\n         cy.get('.property-key-info').contains('Pageview').click() // Tooltip is shown with description\n         cy.get('[data-attr=trend-element-subject-0]').should('have.text', 'Pageview')\n \n@@ -60,6 +61,7 @@ describe('Trends', () => {\n \n     it('Apply 1 overall filter', () => {\n         cy.get('[data-attr=trend-element-subject-0]').click()\n+        cy.wait(500)\n         cy.get('.property-key-info').contains('Pageview').click()\n         cy.get('[data-attr=trend-element-subject-0]').should('have.text', 'Pageview')\n         cy.get('[data-attr=new-prop-filter-trends-filters]').click()\ndiff --git a/frontend/src/lib/components/DefinitionPopup/DefinitionPopup.scss b/frontend/src/lib/components/DefinitionPopup/DefinitionPopup.scss\nindex 9a39fa5b4..b6e17c638 100644\n--- a/frontend/src/lib/components/DefinitionPopup/DefinitionPopup.scss\n+++ b/frontend/src/lib/components/DefinitionPopup/DefinitionPopup.scss\n@@ -77,6 +77,7 @@\n             svg.taxonomy-icon {\n                 margin-right: 8px;\n                 width: 28px;\n+                flex-shrink: 0;\n \n                 &.taxonomy-icon-muted {\n                     path {\n@@ -88,6 +89,10 @@\n                     path {\n                         fill: var(--success);\n                     }\n+\n+                    &:not(.taxonomy-icon-ph) {\n+                        margin-bottom: -4px; // Slightly larger height requires offset to look vertically centered\n+                    }\n                 }\n             }\n \ndiff --git a/frontend/src/lib/components/PropertyKeyInfo.tsx b/frontend/src/lib/components/PropertyKeyInfo.tsx\nindex c10da5e1e..50ebda01b 100644\n--- a/frontend/src/lib/components/PropertyKeyInfo.tsx\n+++ b/frontend/src/lib/components/PropertyKeyInfo.tsx\n@@ -643,62 +643,49 @@ export function PropertyKeyInfo({\n     className = '',\n }: PropertyKeyInfoInterface): JSX.Element {\n     value = `${value}` // convert to string\n+\n     const data = getKeyMapping(value, type)\n-    if (!data) {\n-        return (\n+    const baseValue = (!data ? value : data.label).trim()\n+    const baseValueNode = baseValue === '' ? <i>(empty string)</i> : baseValue\n+\n+    // By this point, property is a PH defined property\n+    const innerContent = (\n+        <span className=\"property-key-info\">\n+            {!disableIcon && !!data && <span className=\"property-key-info-logo\" />}\n             <Typography.Text\n                 ellipsis={ellipsis}\n                 style={{ color: 'inherit', maxWidth: 400, ...style }}\n-                title={value}\n-                className={className}\n-            >\n-                {value !== '' ? value : <i>(empty string)</i>}\n-            </Typography.Text>\n-        )\n-    }\n-    if (disableIcon) {\n-        return (\n-            <Typography.Text\n-                ellipsis={ellipsis}\n-                style={{ color: 'inherit', maxWidth: 400 }}\n-                title={data.label}\n+                title={baseValue}\n                 className={className}\n             >\n-                {data.label !== '' ? data.label : <i>(empty string)</i>}\n+                {baseValueNode}\n             </Typography.Text>\n-        )\n-    }\n-\n-    const innerContent = (\n-        <span className=\"property-key-info\">\n-            <span className=\"property-key-info-logo\" />\n-            {data.label}\n         </span>\n     )\n \n+    if (!data || disablePopover) {\n+        return innerContent\n+    }\n+\n+    const popoverProps = tooltipPlacement\n+        ? {\n+              visible: true,\n+              placement: tooltipPlacement,\n+          }\n+        : {\n+              align: ANTD_TOOLTIP_PLACEMENTS.horizontalPreferRight,\n+          }\n+\n     const popoverTitle = <PropertyKeyTitle data={data} />\n     const popoverContent = <PropertyKeyDescription data={data} value={value} />\n \n-    return disablePopover ? (\n-        innerContent\n-    ) : tooltipPlacement ? (\n-        <Popover\n-            visible\n-            overlayStyle={{ zIndex: 99999 }}\n-            overlayClassName={`property-key-info-tooltip ${className || ''}`}\n-            placement={tooltipPlacement}\n-            title={popoverTitle}\n-            content={popoverContent}\n-        >\n-            {innerContent}\n-        </Popover>\n-    ) : (\n+    return (\n         <Popover\n             overlayStyle={{ zIndex: 99999 }}\n             overlayClassName={`property-key-info-tooltip ${className || ''}`}\n-            align={ANTD_TOOLTIP_PLACEMENTS.horizontalPreferRight}\n             title={popoverTitle}\n             content={popoverContent}\n+            {...popoverProps}\n         >\n             {innerContent}\n         </Popover>\ndiff --git a/frontend/src/lib/components/TaxonomicFilter/InfiniteList.scss b/frontend/src/lib/components/TaxonomicFilter/InfiniteList.scss\nindex b4e91e0a4..62e1109f8 100644\n--- a/frontend/src/lib/components/TaxonomicFilter/InfiniteList.scss\n+++ b/frontend/src/lib/components/TaxonomicFilter/InfiniteList.scss\n@@ -20,6 +20,38 @@\n         cursor: pointer;\n         border: none;\n \n+        .taxonomic-list-row-contents {\n+            display: flex;\n+            align-items: center;\n+\n+            .taxonomic-list-row-contents-icon {\n+                width: 30px;\n+\n+                svg.taxonomy-icon {\n+                    vertical-align: middle;\n+                    flex-shrink: 0;\n+                    height: 18.5px;\n+\n+                    &.taxonomy-icon-muted {\n+                        path {\n+                            fill: var(--taxonomy-icon-muted);\n+                        }\n+                    }\n+\n+                    &.taxonomy-icon-verified {\n+                        height: 24px;\n+                        path {\n+                            fill: var(--success);\n+                        }\n+\n+                        &:not(.taxonomy-icon-ph) {\n+                            margin-bottom: -4px; // Slightly larger height requires offset to look vertically centered\n+                        }\n+                    }\n+                }\n+            }\n+        }\n+\n         & > div {\n             max-width: 100%;\n \ndiff --git a/frontend/src/lib/components/TaxonomicFilter/InfiniteList.tsx b/frontend/src/lib/components/TaxonomicFilter/InfiniteList.tsx\nindex 3f7527798..68c399535 100644\n--- a/frontend/src/lib/components/TaxonomicFilter/InfiniteList.tsx\n+++ b/frontend/src/lib/components/TaxonomicFilter/InfiniteList.tsx\n@@ -98,11 +98,13 @@ const unusedIndicator = (eventNames: string[]): JSX.Element => {\n const renderItemContents = ({\n     item,\n     listGroupType,\n+    group,\n     featureFlags,\n     eventNames,\n }: {\n     item: TaxonomicDefinitionTypes\n     listGroupType: TaxonomicFilterGroupType\n+    group: TaxonomicFilterGroup\n     featureFlags: FeatureFlagsSet\n     eventNames: string[]\n }): JSX.Element | string => {\n@@ -120,6 +122,8 @@ const renderItemContents = ({\n         (item as PropertyDefinition).is_event_property !== null &&\n         !(item as PropertyDefinition).is_event_property\n \n+    const icon = <div className=\"taxonomic-list-row-contents-icon\">{group.getIcon?.(item)}</div>\n+\n     return listGroupType === TaxonomicFilterGroupType.EventProperties ||\n         listGroupType === TaxonomicFilterGroupType.NumericalEventProperties ||\n         listGroupType === TaxonomicFilterGroupType.PersonProperties ||\n@@ -127,16 +131,29 @@ const renderItemContents = ({\n         listGroupType === TaxonomicFilterGroupType.CustomEvents ||\n         listGroupType.startsWith(TaxonomicFilterGroupType.GroupsPrefix) ? (\n         <>\n-            <div className={clsx(isStale && 'text-muted')}>\n-                <PropertyKeyInfo value={item.name ?? ''} disablePopover style={{ maxWidth: '100%' }} />\n+            <div className={clsx('taxonomic-list-row-contents', isStale && 'text-muted')}>\n+                {featureFlags[FEATURE_FLAGS.COLLABORATIONS_TAXONOMY] && icon}\n+                <PropertyKeyInfo\n+                    value={item.name ?? ''}\n+                    disablePopover\n+                    disableIcon={!!featureFlags[FEATURE_FLAGS.COLLABORATIONS_TAXONOMY]}\n+                    style={{ maxWidth: '100%' }}\n+                />\n             </div>\n             {isStale && staleIndicator(parsedLastSeen)}\n             {isUnusedEventProperty && unusedIndicator(eventNames)}\n         </>\n-    ) : listGroupType === TaxonomicFilterGroupType.Elements ? (\n-        <PropertyKeyInfo type=\"element\" value={item.name ?? ''} disablePopover style={{ maxWidth: '100%' }} />\n     ) : (\n-        item.name ?? ''\n+        <div className=\"taxonomic-list-row-contents\">\n+            {listGroupType === TaxonomicFilterGroupType.Elements ? (\n+                <PropertyKeyInfo type=\"element\" value={item.name ?? ''} disablePopover style={{ maxWidth: '100%' }} />\n+            ) : (\n+                <>\n+                    {featureFlags[FEATURE_FLAGS.COLLABORATIONS_TAXONOMY] && icon}\n+                    {item.name ?? ''}\n+                </>\n+            )}\n+        </div>\n     )\n }\n \n@@ -326,6 +343,7 @@ export function InfiniteList(): JSX.Element {\n                 {renderItemContents({\n                     item,\n                     listGroupType,\n+                    group,\n                     featureFlags,\n                     eventNames,\n                 })}\ndiff --git a/frontend/src/lib/components/TaxonomicFilter/infiniteListLogic.ts b/frontend/src/lib/components/TaxonomicFilter/infiniteListLogic.ts\nindex 0e8ce055c..6da04dbcb 100644\n--- a/frontend/src/lib/components/TaxonomicFilter/infiniteListLogic.ts\n+++ b/frontend/src/lib/components/TaxonomicFilter/infiniteListLogic.ts\n@@ -41,8 +41,8 @@ const createEmptyListStorage = (searchQuery = '', first = false): ListStorage =>\n \n // simple cache with a setTimeout expiry\n const API_CACHE_TIMEOUT = 60000\n-const apiCache: Record<string, ListStorage> = {}\n-const apiCacheTimers: Record<string, number> = {}\n+let apiCache: Record<string, ListStorage> = {}\n+let apiCacheTimers: Record<string, number> = {}\n \n async function fetchCachedListResponse(path: string, searchParams: Record<string, any>): Promise<ListStorage> {\n     const url = combineUrl(path, searchParams).url\n@@ -162,6 +162,9 @@ export const infiniteListLogic = kea<infiniteListLogicType>({\n                     }\n                 },\n                 updateRemoteItem: ({ item }) => {\n+                    // On updating item, invalidate cache\n+                    apiCache = {}\n+                    apiCacheTimers = {}\n                     return {\n                         ...values.remoteItems,\n                         results: values.remoteItems.results.map((i) => (i.name === item.name ? item : i)),\ndiff --git a/frontend/src/lib/components/TaxonomicFilter/taxonomicFilterLogic.tsx b/frontend/src/lib/components/TaxonomicFilter/taxonomicFilterLogic.tsx\nindex 56c0fc121..e87dfe76c 100644\n--- a/frontend/src/lib/components/TaxonomicFilter/taxonomicFilterLogic.tsx\n+++ b/frontend/src/lib/components/TaxonomicFilter/taxonomicFilterLogic.tsx\n@@ -22,7 +22,7 @@ import { capitalizeFirstLetter, pluralize, toParams } from 'lib/utils'\n import { combineUrl } from 'kea-router'\n import { featureFlagLogic } from 'lib/logic/featureFlagLogic'\n import { FEATURE_FLAGS } from 'lib/constants'\n-import { ActionStack, CohortIcon, PropertyIcon } from 'lib/components/icons'\n+import { ActionStack, CohortIcon } from 'lib/components/icons'\n import { keyMapping } from 'lib/components/PropertyKeyInfo'\n import { getEventDefinitionIcon, getPropertyDefinitionIcon } from 'scenes/data-management/events/DefinitionHeader'\n \n@@ -298,9 +298,7 @@ export const taxonomicFilterLogic = kea<taxonomicFilterLogicType>({\n                     getName: () => capitalizeFirstLetter(aggregationLabel(type.group_type_index).singular),\n                     getValue: (group) => group.name,\n                     getPopupHeader: () => `Property`,\n-                    getIcon: function _getIcon(): JSX.Element {\n-                        return <PropertyIcon className=\"taxonomy-icon-muted\" />\n-                    },\n+                    getIcon: getPropertyDefinitionIcon,\n                     groupTypeIndex: type.group_type_index,\n                 })),\n         ],\ndiff --git a/frontend/src/lib/components/icons.tsx b/frontend/src/lib/components/icons.tsx\nindex 47121bc8d..978f06b62 100644\n--- a/frontend/src/lib/components/icons.tsx\n+++ b/frontend/src/lib/components/icons.tsx\n@@ -1166,9 +1166,16 @@ export function UnverifiedEventStack({\n     )\n }\n \n-export function VerifiedEventStack(props: React.SVGProps<SVGSVGElement>): JSX.Element {\n+export function VerifiedEventStack({ width = 26, height = 26, ...props }: React.SVGProps<SVGSVGElement>): JSX.Element {\n     return (\n-        <svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\n+        <svg\n+            width={width}\n+            height={height}\n+            viewBox=\"0 0 26 26\"\n+            fill=\"none\"\n+            xmlns=\"http://www.w3.org/2000/svg\"\n+            {...props}\n+        >\n             <path\n                 fillRule=\"evenodd\"\n                 clipRule=\"evenodd\"\n@@ -1183,22 +1190,36 @@ export function VerifiedEventStack(props: React.SVGProps<SVGSVGElement>): JSX.El\n     )\n }\n \n-export function ActionStack(props: React.SVGProps<SVGSVGElement>): JSX.Element {\n+export function ActionStack({ width = 20, height = 20, ...props }: React.SVGProps<SVGSVGElement>): JSX.Element {\n     return (\n-        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\n+        <svg\n+            width={width}\n+            height={height}\n+            viewBox=\"0 0 20 20\"\n+            fill=\"none\"\n+            xmlns=\"http://www.w3.org/2000/svg\"\n+            {...props}\n+        >\n             <path\n                 fillRule=\"evenodd\"\n                 clipRule=\"evenodd\"\n-                d=\"M2 6H4V20H18V22H4C2.9 22 2 21.1 2 20V6ZM8 2H20C21.1 2 22 2.9 22 4V16C22 17.1 21.1 18 20 18H8C6.9 18 6 17.1 6 16V4C6 2.9 6.9 2 8 2ZM8 16H20V4H8V16ZM12.6851 12.3414L12.1453 13.9998H10.4976L13.0082 6.72705H14.9897L17.4968 13.9998H15.8491L15.3093 12.3414H12.6851ZM13.9706 8.38898L13.0757 11.1411H14.9223L14.0274 8.38898H13.9706Z\"\n-                fill=\"currentColor\"\n+                d=\"M0 4H2V18H16V20H2C0.9 20 0 19.1 0 18V4ZM6 0H18C19.1 0 20 0.9 20 2V14C20 15.1 19.1 16 18 16H6C4.9 16 4 15.1 4 14V2C4 0.9 4.9 0 6 0ZM6 14H18V2H6V14ZM10.6851 10.3414L10.1453 11.9998H8.49756L11.0082 4.72705H12.9897L15.4968 11.9998H13.8491L13.3093 10.3414H10.6851ZM11.9706 6.38898L11.0757 9.14111H12.9223L12.0274 6.38898H11.9706Z\"\n+                fill=\"#747EA2\"\n             />\n         </svg>\n     )\n }\n \n-export function CohortIcon(props: React.SVGProps<SVGSVGElement>): JSX.Element {\n+export function CohortIcon({ width = 24, height = 12, ...props }: React.SVGProps<SVGSVGElement>): JSX.Element {\n     return (\n-        <svg width=\"24\" height=\"12\" viewBox=\"0 0 24 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\n+        <svg\n+            width={width}\n+            height={height}\n+            viewBox=\"0 0 24 12\"\n+            fill=\"none\"\n+            xmlns=\"http://www.w3.org/2000/svg\"\n+            {...props}\n+        >\n             <path\n                 d=\"M4 7C5.1 7 6 6.1 6 5C6 3.9 5.1 3 4 3C2.9 3 2 3.9 2 5C2 6.1 2.9 7 4 7ZM5.13 8.1C4.76 8.04 4.39 8 4 8C3.01 8 2.07 8.21 1.22 8.58C0.48 8.9 0 9.62 0 10.43V12H4.5V10.39C4.5 9.56 4.73 8.78 5.13 8.1ZM20 7C21.1 7 22 6.1 22 5C22 3.9 21.1 3 20 3C18.9 3 18 3.9 18 5C18 6.1 18.9 7 20 7ZM24 10.43C24 9.62 23.52 8.9 22.78 8.58C21.93 8.21 20.99 8 20 8C19.61 8 19.24 8.04 18.87 8.1C19.27 8.78 19.5 9.56 19.5 10.39V12H24V10.43ZM16.24 7.65C15.07 7.13 13.63 6.75 12 6.75C10.37 6.75 8.93 7.14 7.76 7.65C6.68 8.13 6 9.21 6 10.39V12H18V10.39C18 9.21 17.32 8.13 16.24 7.65ZM8.07 10C8.16 9.77 8.2 9.61 8.98 9.31C9.95 8.93 10.97 8.75 12 8.75C13.03 8.75 14.05 8.93 15.02 9.31C15.79 9.61 15.83 9.77 15.93 10H8.07ZM12 2C12.55 2 13 2.45 13 3C13 3.55 12.55 4 12 4C11.45 4 11 3.55 11 3C11 2.45 11.45 2 12 2ZM12 0C10.34 0 9 1.34 9 3C9 4.66 10.34 6 12 6C13.66 6 15 4.66 15 3C15 1.34 13.66 0 12 0Z\"\n                 fill=\"currentColor\"\n@@ -1207,9 +1228,16 @@ export function CohortIcon(props: React.SVGProps<SVGSVGElement>): JSX.Element {\n     )\n }\n \n-export function PropertyIcon(props: React.SVGProps<SVGSVGElement>): JSX.Element {\n+export function PropertyIcon({ width = 18, height = 10, ...props }: React.SVGProps<SVGSVGElement>): JSX.Element {\n     return (\n-        <svg width=\"18\" height=\"10\" viewBox=\"0 0 18 10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\n+        <svg\n+            width={width}\n+            height={height}\n+            viewBox=\"0 0 18 10\"\n+            fill=\"none\"\n+            xmlns=\"http://www.w3.org/2000/svg\"\n+            {...props}\n+        >\n             <path\n                 d=\"M0 6H2V4H0V6ZM0 10H2V8H0V10ZM0 2H2V0H0V2ZM4 6H18V4H4V6ZM4 10H14V8H4V10ZM4 0V2H18V0H4ZM0 6H2V4H0V6ZM0 10H2V8H0V10ZM0 2H2V0H0V2ZM4 6H18V4H4V6ZM4 10H14V8H4V10ZM4 0V2H18V0H4Z\"\n                 fill=\"currentColor\"\n@@ -1218,6 +1246,30 @@ export function PropertyIcon(props: React.SVGProps<SVGSVGElement>): JSX.Element\n     )\n }\n \n+export function VerifiedPropertyIcon({\n+    width = 21,\n+    height = 16,\n+    ...props\n+}: React.SVGProps<SVGSVGElement>): JSX.Element {\n+    return (\n+        <svg\n+            width={width}\n+            height={height}\n+            viewBox=\"0 0 21 16\"\n+            fill=\"none\"\n+            xmlns=\"http://www.w3.org/2000/svg\"\n+            {...props}\n+        >\n+            <path\n+                fillRule=\"evenodd\"\n+                clipRule=\"evenodd\"\n+                d=\"M0 6H2V4H0V6ZM0 10H2V8H0V10ZM0 2H2V0H0V2ZM4 6H11H18V4H4V6ZM4 8H11V10H4V8ZM4 0V2H18V0H4ZM14.0628 11.5494L15.7289 13.2226L19.9372 9L21 10.07L15.7289 15.3555L13 12.6194L14.0628 11.5494Z\"\n+                fill=\"#77B96C\"\n+            />\n+        </svg>\n+    )\n+}\n+\n export function HomeIcon(props: React.SVGProps<SVGSVGElement>): JSX.Element {\n     return (\n         <svg width=\"54\" height=\"48\" viewBox=\"0 0 54 48\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\ndiff --git a/frontend/src/scenes/data-management/events/DefinitionHeader.tsx b/frontend/src/scenes/data-management/events/DefinitionHeader.tsx\nindex 6f25d4a0d..1fe7113ad 100644\n--- a/frontend/src/scenes/data-management/events/DefinitionHeader.tsx\n+++ b/frontend/src/scenes/data-management/events/DefinitionHeader.tsx\n@@ -7,6 +7,7 @@ import {\n     PropertyIcon,\n     UnverifiedEventStack,\n     VerifiedEventStack,\n+    VerifiedPropertyIcon,\n } from 'lib/components/icons'\n import { keyMapping, PropertyKeyInfo } from 'lib/components/PropertyKeyInfo'\n import { Tooltip } from 'lib/components/Tooltip'\n@@ -31,7 +32,10 @@ export enum DefinitionType {\n     Property = 'property',\n }\n \n-export function getPropertyDefinitionIcon(): JSX.Element {\n+export function getPropertyDefinitionIcon(definition: PropertyDefinition): JSX.Element {\n+    if (!!keyMapping.event[definition.name]) {\n+        return <VerifiedPropertyIcon className=\"taxonomy-icon taxonomy-icon-verified\" />\n+    }\n     return <PropertyIcon className=\"taxonomy-icon taxonomy-icon-muted\" />\n }\n \n@@ -40,21 +44,21 @@ export function getEventDefinitionIcon(definition: EventDefinition): JSX.Element\n     if (definition.name === '$pageview') {\n         return (\n             <Tooltip title=\"Verified event\">\n-                <PageviewIcon className=\"taxonomy-icon taxonomy-icon-verified\" />\n+                <PageviewIcon className=\"taxonomy-icon taxonomy-icon-ph taxonomy-icon-verified\" />\n             </Tooltip>\n         )\n     }\n     if (definition.name === '$pageleave') {\n         return (\n             <Tooltip title=\"Verified event\">\n-                <PageleaveIcon className=\"taxonomy-icon taxonomy-icon-verified\" />\n+                <PageleaveIcon className=\"taxonomy-icon taxonomy-icon-ph taxonomy-icon-verified\" />\n             </Tooltip>\n         )\n     }\n     if (definition.name === '$autocapture') {\n         return (\n             <Tooltip title=\"Verified event\">\n-                <AutocaptureIcon className=\"taxonomy-icon taxonomy-icon-verified\" />\n+                <AutocaptureIcon className=\"taxonomy-icon taxonomy-icon-ph taxonomy-icon-verified\" />\n             </Tooltip>\n         )\n     }\ndiff --git a/frontend/src/scenes/data-management/events/EventDefinitionsTable.scss b/frontend/src/scenes/data-management/events/EventDefinitionsTable.scss\nindex 2fe0371a4..6824cd3da 100644\n--- a/frontend/src/scenes/data-management/events/EventDefinitionsTable.scss\n+++ b/frontend/src/scenes/data-management/events/EventDefinitionsTable.scss\n@@ -28,6 +28,10 @@\n                         path {\n                             fill: var(--success);\n                         }\n+\n+                        &:not(.taxonomy-icon-ph) {\n+                            margin-bottom: -4px; // Slightly larger height requires offset to look vertically centered\n+                        }\n                     }\n                 }\n             }\n"
  },
  "c2a97ee6455fe799357dfd8e43c6ad60c3ee7a91": {
    "hash": "c2a97ee6455fe799357dfd8e43c6ad60c3ee7a91",
    "message": "feat(frontend): storybook form stories (#9173)\n    \n    * storybook form stories\n    \n    * improve form story\n    \n    * improve form story\n    \n    * chore(npm): upgrade typescript\n    \n    * upgrade kea-forms\n    \n    * upgrade to new kea-forms with better value/onChange support\n    \n    * fix feature flags form\n    \n    * fix few other forms\n    \n    * update stories\n    \n    * sort and description",
    "diff": "commit c2a97ee6455fe799357dfd8e43c6ad60c3ee7a91\nAuthor: Marius Andra <marius.andra@gmail.com>\nDate:   Tue May 10 11:36:34 2022 +0200\n\n    feat(frontend): storybook form stories (#9173)\n    \n    * storybook form stories\n    \n    * improve form story\n    \n    * improve form story\n    \n    * chore(npm): upgrade typescript\n    \n    * upgrade kea-forms\n    \n    * upgrade to new kea-forms with better value/onChange support\n    \n    * fix feature flags form\n    \n    * fix few other forms\n    \n    * update stories\n    \n    * sort and description\n\ndiff --git a/.storybook/preview.tsx b/.storybook/preview.tsx\nindex 81abb99b4..54b5e3f98 100644\n--- a/.storybook/preview.tsx\n+++ b/.storybook/preview.tsx\n@@ -41,7 +41,7 @@ export const parameters = {\n         showPanel: true,\n         storySort: {\n             method: 'alphabetical',\n-            order: ['Lemon UI', ['Overview', 'Icons'], 'Components', 'Forms', 'Filters', 'Layout'],\n+            order: ['Lemon UI', ['Overview', 'Icons'], 'Components', 'Forms', ['Field'], 'Filters', 'Layout'],\n             includeName: true,\n         },\n     },\ndiff --git a/frontend/src/lib/components/EditableField/EditableField.stories.tsx b/frontend/src/lib/components/EditableField/EditableField.stories.tsx\nindex 19fc498fc..1548b4227 100644\n--- a/frontend/src/lib/components/EditableField/EditableField.stories.tsx\n+++ b/frontend/src/lib/components/EditableField/EditableField.stories.tsx\n@@ -5,11 +5,11 @@ import { EditableField as EditableFieldComponent } from './EditableField'\n import { PageHeader } from '../PageHeader'\n \n export default {\n-    title: 'Forms/EditableField',\n+    title: 'Forms/Editable Field',\n     component: EditableFieldComponent,\n } as ComponentMeta<typeof EditableFieldComponent>\n \n-export function TitleAndDescription(): JSX.Element {\n+export function EditableField_(): JSX.Element {\n     const [savedTitle, setSavedTitle] = React.useState('Foo')\n     const [savedDescription, setSavedDescription] = React.useState('Lorem ipsum dolor sit amet.')\n \ndiff --git a/frontend/src/lib/components/LemonSelect.tsx b/frontend/src/lib/components/LemonSelect.tsx\nindex 8d38dca35..f6f772502 100644\n--- a/frontend/src/lib/components/LemonSelect.tsx\n+++ b/frontend/src/lib/components/LemonSelect.tsx\n@@ -14,8 +14,8 @@ export type LemonSelectOptions = Record<string | number, LemonSelectOption>\n export interface LemonSelectProps<O extends LemonSelectOptions>\n     extends Omit<LemonButtonWithPopupProps, 'popup' | 'icon' | 'value' | 'defaultValue' | 'onChange'> {\n     options: O\n-    value: keyof O | null\n-    onChange: (newValue: keyof O | null) => void\n+    value?: keyof O | null\n+    onChange?: (newValue: keyof O | null) => void\n     dropdownMatchSelectWidth?: boolean\n     allowClear?: boolean\n }\n@@ -54,7 +54,7 @@ export function LemonSelect<O extends LemonSelectOptions>({\n                             icon={option.icon}\n                             onClick={() => {\n                                 if (key != localValue) {\n-                                    onChange(key)\n+                                    onChange?.(key)\n                                     setLocalValue(key)\n                                 }\n                             }}\n@@ -88,7 +88,7 @@ export function LemonSelect<O extends LemonSelectOptions>({\n                     icon={<IconClose style={{ fontSize: '1rem' }} />}\n                     tooltip=\"Clear selection\"\n                     onClick={() => {\n-                        onChange(null)\n+                        onChange?.(null)\n                         setLocalValue(null)\n                     }}\n                 />\ndiff --git a/frontend/src/lib/forms/Field.stories.tsx b/frontend/src/lib/forms/Field.stories.tsx\nnew file mode 100644\nindex 000000000..bcd4248b6\n--- /dev/null\n+++ b/frontend/src/lib/forms/Field.stories.tsx\n@@ -0,0 +1,138 @@\n+import React from 'react'\n+import { kea, path, useAllValues } from 'kea'\n+import { ComponentMeta } from '@storybook/react'\n+import { VerticalForm } from 'lib/forms/VerticalForm'\n+import { Field, FieldProps } from './Field'\n+import type { formLogicType } from './Field.storiesType'\n+import { capitalizeFirstLetter } from 'lib/utils'\n+import { forms } from 'kea-forms'\n+import { LemonInput } from 'lib/components/LemonInput/LemonInput'\n+\n+export default {\n+    title: 'Forms/Field',\n+    component: Field,\n+    argTypes: {\n+        name: {\n+            control: { type: 'text' },\n+            description: 'Key of field in the form',\n+            type: 'string',\n+        },\n+        label: {\n+            control: { type: 'text' },\n+            description: 'Text that appears above the field',\n+            type: 'string',\n+        },\n+        hint: {\n+            control: { type: 'text' },\n+            description: 'Text that appears below the field',\n+            type: 'string',\n+        },\n+        noStyle: {\n+            control: { type: 'boolean' },\n+            description: 'Directly return `children` without labels, errors, etc.',\n+        },\n+        children: {\n+            description: 'The component to render',\n+        },\n+        template: {\n+            description: 'Form template to use (WIP)',\n+        },\n+    },\n+} as ComponentMeta<typeof Field>\n+\n+const formLogic = kea<formLogicType>([\n+    path(['lib', 'forms', 'Field', 'stories']),\n+    forms(({ actions }) => ({\n+        myForm: {\n+            defaults: {\n+                name: '',\n+                email: '',\n+                pineappleOnPizza: false,\n+            },\n+            errors: ({ name, email }) => ({\n+                name: !name ? 'Please enter your name' : null,\n+                email: !email ? 'Please enter your email' : !email.includes('@') ? 'not a valid email' : null,\n+            }),\n+            submit: async (_, breakpoint) => {\n+                await breakpoint(3000)\n+                console.log('Form Submitted')\n+                actions.resetMyForm()\n+            },\n+        },\n+        simpleForm: {\n+            defaults: {\n+                name: '',\n+            },\n+            errors: ({ name }) => ({\n+                name: !name ? 'Please enter your name' : undefined,\n+            }),\n+            submit: async (_, breakpoint) => {\n+                await breakpoint(3000)\n+                console.log('Form Submitted')\n+                actions.resetSimpleForm()\n+            },\n+        },\n+    })),\n+])\n+\n+function useSpecificFormValues(formKey: string): Record<string, any> {\n+    const allValues = useAllValues(formLogic)\n+    return Object.fromEntries(\n+        Object.entries(allValues).filter(([key]) => key.toLowerCase().includes(formKey.toLowerCase()))\n+    )\n+}\n+\n+export function Field_(props: FieldProps): JSX.Element {\n+    const formKey = 'myForm'\n+    const formValues = useSpecificFormValues(formKey)\n+    return (\n+        <VerticalForm logic={formLogic} formKey={formKey} enableFormOnSubmit>\n+            <Field {...props} name={props.name || 'name'} label={props.label || 'Name'}>\n+                <LemonInput />\n+            </Field>\n+\n+            <Field {...props} name={props.name || 'email'} label={props.label || 'Email'}>\n+                <LemonInput />\n+            </Field>\n+\n+            <Field\n+                {...props}\n+                showOptional={props.showOptional ?? true}\n+                name={props.name || 'pineappleOnPizza'}\n+                label={props.label || 'Pineapple on pizza preference'}\n+            >\n+                {({ value, onChange }) => (\n+                    <input type=\"checkbox\" checked={value} onChange={(e) => onChange(e.target.checked)} />\n+                )}\n+            </Field>\n+            <input\n+                type=\"submit\"\n+                value={formValues[`is${capitalizeFirstLetter(formKey)}Submitting`] ? 'Submitting...' : 'Submit'}\n+                disabled={formValues[`is${capitalizeFirstLetter(formKey)}Submitting`]}\n+            />\n+            <pre>\n+                {'\\n'}formLogic.values = {JSON.stringify(formValues, null, 2)}\n+            </pre>\n+        </VerticalForm>\n+    )\n+}\n+\n+export function TextField(props: FieldProps): JSX.Element {\n+    const formKey = 'simpleForm'\n+    const formValues = useSpecificFormValues(formKey)\n+    return (\n+        <VerticalForm logic={formLogic} formKey={formKey} enableFormOnSubmit>\n+            <Field {...props} name={props.name || 'name'} label={props.label || 'Name'}>\n+                <LemonInput />\n+            </Field>\n+            <input\n+                type=\"submit\"\n+                value={formValues[`is${capitalizeFirstLetter(formKey)}Submitting`] ? 'Submitting...' : 'Submit'}\n+                disabled={formValues[`is${capitalizeFirstLetter(formKey)}Submitting`]}\n+            />\n+            <pre>\n+                {'\\n'}formLogic.values = {JSON.stringify(formValues, null, 2)}\n+            </pre>\n+        </VerticalForm>\n+    )\n+}\ndiff --git a/frontend/src/lib/forms/Field.tsx b/frontend/src/lib/forms/Field.tsx\nindex 0a3520669..6aa40ee8e 100644\n--- a/frontend/src/lib/forms/Field.tsx\n+++ b/frontend/src/lib/forms/Field.tsx\n@@ -7,7 +7,7 @@ export interface FieldProps extends KeaFieldProps {\n     showOptional?: boolean\n }\n \n-/** Compatible replacement for Form.Item */\n+/** Compatible replacement for Form.Item. Passes `value` and `onChange(value: any)` to its children. */\n export const Field = ({ showOptional, name, ...keaFieldProps }: FieldProps): JSX.Element => {\n     /** Drop-in replacement antd template for kea forms */\n     const template: FieldProps['template'] = ({ label, kids, hint, error }) => {\ndiff --git a/frontend/src/scenes/actions/ActionEdit.tsx b/frontend/src/scenes/actions/ActionEdit.tsx\nindex 6f00ae0e8..43232c2a4 100644\n--- a/frontend/src/scenes/actions/ActionEdit.tsx\n+++ b/frontend/src/scenes/actions/ActionEdit.tsx\n@@ -5,7 +5,7 @@ import { useActions, useValues } from 'kea'\n import { actionEditLogic, ActionEditLogicProps } from './actionEditLogic'\n import './Actions.scss'\n import { ActionStep } from './ActionStep'\n-import { Button, Col, Input, Row } from 'antd'\n+import { Button, Col, Row } from 'antd'\n import { InfoCircleOutlined, LoadingOutlined, PlusOutlined } from '@ant-design/icons'\n import { router } from 'kea-router'\n import { PageHeader } from 'lib/components/PageHeader'\n@@ -22,6 +22,7 @@ import { Field } from 'lib/forms/Field'\n import { LemonButton } from 'lib/components/LemonButton'\n import { LemonCheckbox } from 'lib/components/LemonCheckbox'\n import { lemonToast } from 'lib/components/lemonToast'\n+import { LemonInput } from 'lib/components/LemonInput/LemonInput'\n \n export function ActionEdit({ action: loadedAction, id, onSave, temporaryToken }: ActionEditLogicProps): JSX.Element {\n     const logicProps: ActionEditLogicProps = {\n@@ -79,20 +80,20 @@ export function ActionEdit({ action: loadedAction, id, onSave, temporaryToken }:\n                 <PageHeader\n                     title={\n                         <Field name=\"name\">\n-                            {({ value, onValueChange }) => (\n+                            {({ value, onChange }) => (\n                                 <EditableField\n                                     name=\"name\"\n                                     value={value || ''}\n                                     placeholder=\"Name this action\"\n                                     onChange={\n                                         !id\n-                                            ? onValueChange\n+                                            ? onChange\n                                             : undefined /* When creating a new action, change value on type */\n                                     }\n                                     onSave={\n                                         !id\n                                             ? undefined\n-                                            : onValueChange /* When not creating a new action, change value on save */\n+                                            : onChange /* When not creating a new action, change value on save */\n                                     }\n                                     mode={!id ? 'edit' : undefined /* When creating a new action, maintain edit mode */}\n                                     minLength={1}\n@@ -107,7 +108,7 @@ export function ActionEdit({ action: loadedAction, id, onSave, temporaryToken }:\n                     caption={\n                         <>\n                             <Field name=\"description\" showOptional={true}>\n-                                {({ value, onValueChange }) => (\n+                                {({ value, onChange }) => (\n                                     <EditableField\n                                         multiline\n                                         name=\"description\"\n@@ -115,13 +116,13 @@ export function ActionEdit({ action: loadedAction, id, onSave, temporaryToken }:\n                                         placeholder=\"Description (optional)\"\n                                         onChange={\n                                             !id\n-                                                ? onValueChange\n+                                                ? onChange\n                                                 : undefined /* When creating a new action, change value on type */\n                                         }\n                                         onSave={\n                                             !id\n                                                 ? undefined\n-                                                : onValueChange /* When not creating a new action, change value on save */\n+                                                : onChange /* When not creating a new action, change value on save */\n                                         }\n                                         mode={\n                                             !id\n@@ -139,10 +140,10 @@ export function ActionEdit({ action: loadedAction, id, onSave, temporaryToken }:\n                                 )}\n                             </Field>\n                             <Field name=\"tags\" showOptional={true}>\n-                                {({ value, onValueChange }) => (\n+                                {({ value, onChange }) => (\n                                     <ObjectTags\n                                         tags={value ?? []}\n-                                        onChange={(_, newTags) => onValueChange(newTags)}\n+                                        onChange={(_, newTags) => onChange(newTags)}\n                                         className=\"action-tags\"\n                                         saving={actionLoading}\n                                     />\n@@ -177,10 +178,10 @@ export function ActionEdit({ action: loadedAction, id, onSave, temporaryToken }:\n                         </a>\n                     </div>\n                     <Field name=\"steps\">\n-                        {({ onValueChange }) => (\n+                        {({ onChange }) => (\n                             <div style={{ textAlign: 'right', marginBottom: 12 }}>\n                                 <Button\n-                                    onClick={() => onValueChange([...(action.steps || []), { isNew: uuid() }])}\n+                                    onClick={() => onChange([...(action.steps || []), { isNew: uuid() }])}\n                                     size=\"small\"\n                                 >\n                                     Add another match group\n@@ -189,7 +190,7 @@ export function ActionEdit({ action: loadedAction, id, onSave, temporaryToken }:\n                         )}\n                     </Field>\n                     <Field name=\"steps\">\n-                        {({ value, onValueChange }) => (\n+                        {({ value, onChange }) => (\n                             <Row gutter={[24, 24]}>\n                                 <>\n                                     {value?.map((step: ActionStepType, index: number) => (\n@@ -202,14 +203,14 @@ export function ActionEdit({ action: loadedAction, id, onSave, temporaryToken }:\n                                             isOnlyStep={!!value && value.length === 1}\n                                             onDelete={() => {\n                                                 const identifier = step.id ? 'id' : 'isNew'\n-                                                onValueChange(\n+                                                onChange(\n                                                     value?.filter(\n                                                         (s: ActionStepType) => s[identifier] !== step[identifier]\n                                                     )\n                                                 )\n                                             }}\n                                             onChange={(newStep) => {\n-                                                onValueChange(\n+                                                onChange(\n                                                     value?.map((s: ActionStepType) =>\n                                                         (step.id && s.id == step.id) ||\n                                                         (step.isNew && s.isNew === step.isNew)\n@@ -230,7 +231,7 @@ export function ActionEdit({ action: loadedAction, id, onSave, temporaryToken }:\n                                     <div\n                                         className=\"match-group-add-skeleton\"\n                                         onClick={() => {\n-                                            onValueChange([...(action.steps || []), { isNew: uuid() }])\n+                                            onChange([...(action.steps || []), { isNew: uuid() }])\n                                         }}\n                                     >\n                                         <PlusOutlined style={{ fontSize: 28, color: '#666666' }} />\n@@ -244,11 +245,11 @@ export function ActionEdit({ action: loadedAction, id, onSave, temporaryToken }:\n                     <div style={{ marginTop: '2rem' }}>\n                         <h2 className=\"subtitle\">Match groups</h2>\n                         <Field name=\"post_to_slack\">\n-                            {({ value, onValueChange }) => (\n+                            {({ value, onChange }) => (\n                                 <LemonCheckbox\n                                     id=\"webhook-checkbox\"\n                                     checked={!!value}\n-                                    onChange={(e) => onValueChange(e.target.checked)}\n+                                    onChange={(e) => onChange(e.target.checked)}\n                                     rowProps={{ fullWidth: true }}\n                                     disabled={!slackEnabled}\n                                     label={\n@@ -265,15 +266,13 @@ export function ActionEdit({ action: loadedAction, id, onSave, temporaryToken }:\n                         {action.post_to_slack && (\n                             <>\n                                 <Field name=\"slack_message_format\">\n-                                    {({ value, onValueChange }) => (\n+                                    {({ value, onChange }) => (\n                                         <>\n-                                            <Input\n-                                                addonBefore=\"Message format (optional)\"\n+                                            <div>Message format (optional)</div>\n+                                            <LemonInput\n                                                 placeholder=\"Default: [action.name] triggered by [person]\"\n                                                 value={value}\n-                                                onChange={(e) => {\n-                                                    onValueChange(e.target.value)\n-                                                }}\n+                                                onChange={onChange}\n                                                 disabled={!slackEnabled || !action.post_to_slack}\n                                                 data-attr=\"edit-slack-message-format\"\n                                             />\ndiff --git a/frontend/src/scenes/cohorts/Cohort.tsx b/frontend/src/scenes/cohorts/Cohort.tsx\nindex ed062d6c8..d5983ae2a 100644\n--- a/frontend/src/scenes/cohorts/Cohort.tsx\n+++ b/frontend/src/scenes/cohorts/Cohort.tsx\n@@ -116,14 +116,12 @@ export function Cohort({ id }: { id?: CohortType['id'] } = {}): JSX.Element {\n                 <Row gutter={[16, 24]} style={{ maxWidth: 640 }}>\n                     <Col xs={24} sm={12}>\n                         <Field name=\"name\" label=\"Name\">\n-                            {({ value, onValueChange }) => (\n-                                <LemonInput value={value} onChange={onValueChange} data-attr=\"cohort-name\" />\n-                            )}\n+                            <LemonInput data-attr=\"cohort-name\" />\n                         </Field>\n                     </Col>\n                     <Col xs={24} sm={12}>\n                         <Field name=\"is_static\" label=\"Type\">\n-                            {({ value, onValueChange }) => (\n+                            {({ value, onChange }) => (\n                                 <Tooltip\n                                     title={\n                                         isNewCohort ? null : 'Create a new cohort to use a different type of cohort.'\n@@ -135,7 +133,7 @@ export function Cohort({ id }: { id?: CohortType['id'] } = {}): JSX.Element {\n                                             options={COHORT_TYPE_OPTIONS}\n                                             value={value ? CohortTypeEnum.Static : CohortTypeEnum.Dynamic}\n                                             onChange={(cohortType) => {\n-                                                onValueChange(cohortType === CohortTypeEnum.Static)\n+                                                onChange(cohortType === CohortTypeEnum.Static)\n                                             }}\n                                             type=\"stealth\"\n                                             outlined\n@@ -152,7 +150,7 @@ export function Cohort({ id }: { id?: CohortType['id'] } = {}): JSX.Element {\n                     <Row gutter={[16, 24]} className=\"mt ph-ignore-input\" style={{ maxWidth: 640 }}>\n                         <Col span={24}>\n                             <Field name=\"description\" label=\"Description\" data-attr=\"cohort-description\">\n-                                {({ value, onValueChange }) => <LemonTextArea value={value} onChange={onValueChange} />}\n+                                <LemonTextArea />\n                             </Field>\n                         </Col>\n                     </Row>\n@@ -161,7 +159,7 @@ export function Cohort({ id }: { id?: CohortType['id'] } = {}): JSX.Element {\n                     <Row gutter={24} className=\"mt ph-ignore-input\">\n                         <Col span={24}>\n                             <Field name=\"csv\" label={isNewCohort ? 'Upload users' : 'Add users'} data-attr=\"cohort-csv\">\n-                                {({ onValueChange }) => (\n+                                {({ onChange }) => (\n                                     <>\n                                         <span className=\"mb\">\n                                             Upload a CSV file to add users to your cohort. The CSV file only requires a\n@@ -174,7 +172,7 @@ export function Cohort({ id }: { id?: CohortType['id'] } = {}): JSX.Element {\n                                             accept=\".csv\"\n                                             showUploadList={false}\n                                             beforeUpload={(file: UploadFile) => {\n-                                                onValueChange(file)\n+                                                onChange(file)\n                                                 return false\n                                             }}\n                                             className=\"cohort-csv-dragger\"\ndiff --git a/frontend/src/scenes/dashboard/NewDashboardModal.tsx b/frontend/src/scenes/dashboard/NewDashboardModal.tsx\nindex 9dda5777b..fe50a98f6 100644\n--- a/frontend/src/scenes/dashboard/NewDashboardModal.tsx\n+++ b/frontend/src/scenes/dashboard/NewDashboardModal.tsx\n@@ -1,8 +1,6 @@\n import React from 'react'\n-import { Input } from 'antd'\n import { useActions, useValues } from 'kea'\n import { Field } from 'lib/forms/Field'\n-import TextArea from 'antd/lib/input/TextArea'\n import { LemonModal } from 'lib/components/LemonModal/LemonModal'\n import { LemonButton } from 'lib/components/LemonButton'\n import { AvailableFeature } from '~/types'\n@@ -11,6 +9,8 @@ import { PayGateMini } from 'lib/components/PayGateMini/PayGateMini'\n import { DASHBOARD_RESTRICTION_OPTIONS } from './ShareModal'\n import { VerticalForm } from 'lib/forms/VerticalForm'\n import { newDashboardLogic } from 'scenes/dashboard/newDashboardLogic'\n+import { LemonInput } from 'lib/components/LemonInput/LemonInput'\n+import { LemonTextArea } from 'lib/components/LemonTextArea/LemonTextArea'\n \n export function NewDashboardModal(): JSX.Element {\n     const { hideNewDashboardModal } = useActions(newDashboardLogic)\n@@ -50,39 +50,35 @@ export function NewDashboardModal(): JSX.Element {\n             <VerticalForm logic={newDashboardLogic} formKey=\"newDashboard\" id=\"new-dashboard-form\" enableFormOnSubmit>\n                 <p>Use dashboards to compose multiple insights into a single view.</p>\n                 <Field name=\"name\" label=\"Name\">\n-                    <Input autoFocus={true} data-attr=\"dashboard-name-input\" className=\"ph-ignore-input\" />\n+                    <LemonInput autoFocus={true} data-attr=\"dashboard-name-input\" className=\"ph-ignore-input\" />\n                 </Field>\n                 <Field name=\"description\" label=\"Description\" showOptional>\n-                    <TextArea data-attr=\"dashboard-description-input\" className=\"ph-ignore-input\" />\n+                    <LemonTextArea data-attr=\"dashboard-description-input\" className=\"ph-ignore-input\" />\n                 </Field>\n                 <Field name=\"useTemplate\" label=\"Template\" showOptional>\n-                    {({ value, onValueChange }) => (\n-                        <LemonSelect\n-                            value={value}\n-                            onChange={onValueChange}\n-                            placeholder=\"Optionally start from template\"\n-                            allowClear\n-                            options={{\n-                                DEFAULT_APP: {\n-                                    label: 'Website',\n-                                    'data-attr': 'dashboard-select-default-app',\n-                                },\n-                            }}\n-                            type=\"stealth\"\n-                            outlined\n-                            style={{\n-                                width: '100%',\n-                            }}\n-                            data-attr=\"copy-from-template\"\n-                        />\n-                    )}\n+                    <LemonSelect\n+                        placeholder=\"Optionally start from template\"\n+                        allowClear\n+                        options={{\n+                            DEFAULT_APP: {\n+                                label: 'Website',\n+                                'data-attr': 'dashboard-select-default-app',\n+                            },\n+                        }}\n+                        type=\"stealth\"\n+                        outlined\n+                        style={{\n+                            width: '100%',\n+                        }}\n+                        data-attr=\"copy-from-template\"\n+                    />\n                 </Field>\n                 <Field name=\"restrictionLevel\" label=\"Collaboration settings\">\n-                    {({ value, onValueChange }) => (\n+                    {({ value, onChange }) => (\n                         <PayGateMini feature={AvailableFeature.DASHBOARD_PERMISSIONING}>\n                             <LemonSelect\n                                 value={value}\n-                                onChange={onValueChange}\n+                                onChange={onChange}\n                                 options={DASHBOARD_RESTRICTION_OPTIONS}\n                                 loading={isNewDashboardSubmitting}\n                                 type=\"stealth\"\ndiff --git a/frontend/src/scenes/feature-flags/FeatureFlag.tsx b/frontend/src/scenes/feature-flags/FeatureFlag.tsx\nindex 062d8b034..42bb926ad 100644\n--- a/frontend/src/scenes/feature-flags/FeatureFlag.tsx\n+++ b/frontend/src/scenes/feature-flags/FeatureFlag.tsx\n@@ -1,6 +1,6 @@\n import React, { useState } from 'react'\n import { Group } from 'kea-forms'\n-import { Input, Button, Slider, Card, Row, Col, Collapse, Radio, InputNumber, Popconfirm, Select } from 'antd'\n+import { Button, Slider, Card, Row, Col, Collapse, Radio, InputNumber, Popconfirm, Select } from 'antd'\n import { useActions, useValues } from 'kea'\n import { capitalizeFirstLetter, Loading } from 'lib/utils'\n import { PropertyFilters } from 'lib/components/PropertyFilters/PropertyFilters'\n@@ -23,6 +23,8 @@ import { LemonButton } from 'lib/components/LemonButton'\n import { LemonSwitch } from 'lib/components/LemonSwitch/LemonSwitch'\n import { Field } from 'lib/forms/Field'\n import { VerticalForm } from 'lib/forms/VerticalForm'\n+import { LemonTextArea } from 'lib/components/LemonTextArea/LemonTextArea'\n+import { LemonInput } from 'lib/components/LemonInput/LemonInput'\n \n export const scene: SceneExport = {\n     component: FeatureFlag,\n@@ -86,10 +88,10 @@ export function FeatureFlag({ id }: { id?: string } = {}): JSX.Element {\n                         buttons={\n                             <div className=\"flex-center\">\n                                 <Field name=\"active\">\n-                                    {({ value, onValueChange }) => (\n+                                    {({ value, onChange }) => (\n                                         <LemonSwitch\n                                             checked={value}\n-                                            onChange={onValueChange}\n+                                            onChange={onChange}\n                                             label={\n                                                 value ? (\n                                                     <span className=\"text-success\">Enabled</span>\n@@ -151,13 +153,13 @@ export function FeatureFlag({ id }: { id?: string } = {}): JSX.Element {\n                                 }\n                             >\n                                 {({ value, onChange }) => (\n-                                    <Input\n+                                    <LemonInput\n                                         value={value}\n-                                        onChange={(e) => {\n-                                            if (e.target.value !== value) {\n+                                        onChange={(v) => {\n+                                            if (v !== value) {\n                                                 setHasKeyChanged(true)\n                                             }\n-                                            onChange(e)\n+                                            onChange(v)\n                                         }}\n                                         data-attr=\"feature-flag-key\"\n                                         className=\"ph-ignore-input\"\n@@ -172,15 +174,11 @@ export function FeatureFlag({ id }: { id?: string } = {}): JSX.Element {\n                             </Field>\n \n                             <Field name=\"name\" label=\"Description\">\n-                                {({ value, onChange }) => (\n-                                    <Input.TextArea\n-                                        value={value}\n-                                        onChange={onChange}\n-                                        className=\"ph-ignore-input\"\n-                                        data-attr=\"feature-flag-description\"\n-                                        placeholder=\"Adding a helpful description can ensure others know what this feature is for.\"\n-                                    />\n-                                )}\n+                                <LemonTextArea\n+                                    className=\"ph-ignore-input\"\n+                                    data-attr=\"feature-flag-description\"\n+                                    placeholder=\"Adding a helpful description can ensure others know what this feature is for.\"\n+                                />\n                             </Field>\n                         </Col>\n                         <Col span={12} style={{ paddingTop: 31 }}>\n@@ -317,7 +315,7 @@ export function FeatureFlag({ id }: { id?: string } = {}): JSX.Element {\n                                         <Row gutter={8}>\n                                             <Col span={7}>\n                                                 <Field name=\"key\">\n-                                                    <Input\n+                                                    <LemonInput\n                                                         data-attr=\"feature-flag-variant-key\"\n                                                         data-key-index={index.toString()}\n                                                         className=\"ph-ignore-input\"\n@@ -331,7 +329,7 @@ export function FeatureFlag({ id }: { id?: string } = {}): JSX.Element {\n                                             </Col>\n                                             <Col span={7}>\n                                                 <Field name=\"name\">\n-                                                    <Input\n+                                                    <LemonInput\n                                                         data-attr=\"feature-flag-variant-name\"\n                                                         className=\"ph-ignore-input\"\n                                                         placeholder=\"Description\"\n@@ -340,18 +338,12 @@ export function FeatureFlag({ id }: { id?: string } = {}): JSX.Element {\n                                             </Col>\n                                             <Col span={7}>\n                                                 <Field name=\"rollout_percentage\">\n-                                                    {({ value, onValueChange }) => (\n-                                                        <Slider\n-                                                            tooltipPlacement=\"top\"\n-                                                            value={value}\n-                                                            onChange={onValueChange}\n-                                                        />\n-                                                    )}\n+                                                    <Slider tooltipPlacement=\"top\" />\n                                                 </Field>\n                                             </Col>\n                                             <Col span={2}>\n                                                 <Field name=\"rollout_percentage\">\n-                                                    {({ value, onValueChange }) => (\n+                                                    {({ value, onChange }) => (\n                                                         <InputNumber\n                                                             min={0}\n                                                             max={100}\n@@ -363,7 +355,7 @@ export function FeatureFlag({ id }: { id?: string } = {}): JSX.Element {\n                                                                 ) {\n                                                                     const valueInt = parseInt(changedValue.toString())\n                                                                     if (!isNaN(valueInt)) {\n-                                                                        onValueChange(valueInt)\n+                                                                        onChange(valueInt)\n                                                                     }\n                                                                 }\n                                                             }}\ndiff --git a/frontend/src/scenes/instance/SystemStatus/KafkaInspectorTab.tsx b/frontend/src/scenes/instance/SystemStatus/KafkaInspectorTab.tsx\nindex 0872777a4..d8da593c3 100644\n--- a/frontend/src/scenes/instance/SystemStatus/KafkaInspectorTab.tsx\n+++ b/frontend/src/scenes/instance/SystemStatus/KafkaInspectorTab.tsx\n@@ -1,9 +1,10 @@\n-import { Button, Col, Divider, Input, Row } from 'antd'\n+import { Button, Col, Divider, Row } from 'antd'\n import { useValues } from 'kea'\n import React from 'react'\n import { CodeSnippet, Language } from 'scenes/ingestion/frameworks/CodeSnippet'\n import { kafkaInspectorLogic } from './kafkaInspectorLogic'\n import { Field, Form } from 'kea-forms'\n+import { LemonInput } from 'lib/components/LemonInput/LemonInput'\n \n export function KafkaInspectorTab(): JSX.Element {\n     const { kafkaMessage } = useValues(kafkaInspectorLogic)\n@@ -25,28 +26,17 @@ export function KafkaInspectorTab(): JSX.Element {\n                         <Row gutter={[24, 24]}>\n                             <Col span={8}>\n                                 <Field name=\"topic\">\n-                                    {({ value, onChange }) => (\n-                                        <Input placeholder=\"Topic\" value={value} onChange={onChange} />\n-                                    )}\n+                                    <LemonInput placeholder=\"Topic\" />\n                                 </Field>\n                             </Col>\n                             <Col span={4}>\n                                 <Field name=\"partition\">\n-                                    {({ value, onChange }) => (\n-                                        <Input\n-                                            placeholder=\"Partition\"\n-                                            value={value}\n-                                            type=\"number\"\n-                                            onChange={onChange}\n-                                        />\n-                                    )}\n+                                    <LemonInput placeholder=\"Partition\" type=\"number\" />\n                                 </Field>{' '}\n                             </Col>\n                             <Col span={4}>\n                                 <Field name=\"offset\">\n-                                    {({ value, onChange }) => (\n-                                        <Input placeholder=\"Offset\" value={value} type=\"number\" onChange={onChange} />\n-                                    )}\n+                                    <LemonInput placeholder=\"Offset\" type=\"number\" />\n                                 </Field>{' '}\n                             </Col>\n \ndiff --git a/frontend/src/scenes/organization/Settings/VerifiedDomains/ConfigureSAMLModal.tsx b/frontend/src/scenes/organization/Settings/VerifiedDomains/ConfigureSAMLModal.tsx\nindex f6e18e4be..7263622f1 100644\n--- a/frontend/src/scenes/organization/Settings/VerifiedDomains/ConfigureSAMLModal.tsx\n+++ b/frontend/src/scenes/organization/Settings/VerifiedDomains/ConfigureSAMLModal.tsx\n@@ -1,4 +1,3 @@\n-import { Input } from 'antd'\n import { useActions, useValues } from 'kea'\n import { LemonButton } from 'lib/components/LemonButton'\n import { LemonModal } from 'lib/components/LemonModal/LemonModal'\n@@ -7,6 +6,8 @@ import { verifiedDomainsLogic } from './verifiedDomainsLogic'\n import { Form } from 'kea-forms'\n import { Field } from 'lib/forms/Field'\n import { AlertMessage } from 'lib/components/AlertMessage'\n+import { LemonInput } from 'lib/components/LemonInput/LemonInput'\n+import { LemonTextArea } from 'lib/components/LemonTextArea/LemonTextArea'\n \n export function ConfigureSAMLModal(): JSX.Element {\n     const { configureSAMLModalId, isSamlConfigSubmitting, samlConfig } = useValues(verifiedDomainsLogic)\n@@ -30,37 +31,19 @@ export function ConfigureSAMLModal(): JSX.Element {\n                     className=\"ant-form-vertical ant-form-hide-required-mark\"\n                 >\n                     <Field name=\"saml_acs_url\" label=\"SAML ACS URL\">\n-                        {({ value, onChange }) => (\n-                            <Input\n-                                value={value}\n-                                onChange={onChange}\n-                                className=\"ph-ignore-input\"\n-                                placeholder=\"Your IdP's ACS or single sign-on URL.\"\n-                            />\n-                        )}\n+                        <LemonInput className=\"ph-ignore-input\" placeholder=\"Your IdP's ACS or single sign-on URL.\" />\n                     </Field>\n \n                     <Field name=\"saml_entity_id\" label=\"SAML Entity ID\">\n-                        {({ value, onChange }) => (\n-                            <Input\n-                                value={value}\n-                                onChange={onChange}\n-                                className=\"ph-ignore-input\"\n-                                placeholder=\"Entity ID provided by your IdP.\"\n-                            />\n-                        )}\n+                        <LemonInput className=\"ph-ignore-input\" placeholder=\"Entity ID provided by your IdP.\" />\n                     </Field>\n \n                     <Field name=\"saml_x509_cert\" label=\"SAML X.509 Certificate\">\n-                        {({ value, onChange }) => (\n-                            <Input.TextArea\n-                                value={value}\n-                                onChange={onChange}\n-                                className=\"ph-ignore-input\"\n-                                style={{ minHeight: 150 }}\n-                                placeholder={`Enter the public certificate of your IdP. Keep all line breaks.\\n-----BEGIN CERTIFICATE-----\\nMIICVjCCAb+gAwIBAgIBADANBgkqhkiG9w0BAQ0FADBIMQswCQYDVQQGEwJ1czEL\\n-----END CERTIFICATE-----`}\n-                            />\n-                        )}\n+                        <LemonTextArea\n+                            className=\"ph-ignore-input\"\n+                            style={{ minHeight: 150 }}\n+                            placeholder={`Enter the public certificate of your IdP. Keep all line breaks.\\n-----BEGIN CERTIFICATE-----\\nMIICVjCCAb+gAwIBAgIBADANBgkqhkiG9w0BAQ0FADBIMQswCQYDVQQGEwJ1czEL\\n-----END CERTIFICATE-----`}\n+                        />\n                     </Field>\n                     {!samlReady && (\n                         <AlertMessage type=\"info\" style={{ marginBottom: 16 }}>\ndiff --git a/frontend/src/stories/How to build a form.stories.mdx b/frontend/src/stories/How to build a form.stories.mdx\nindex cf6e6345c..37b69133a 100644\n--- a/frontend/src/stories/How to build a form.stories.mdx\t\n+++ b/frontend/src/stories/How to build a form.stories.mdx\t\n@@ -119,15 +119,15 @@ export function FeatureFlag({ id }: { id?: string } = {}): JSX.Element {\n             logic={featureFlagLogic}\n             props={logicProps}\n             formKey=\"featureFlag\"\n-            // still WIP\n             className=\"ant-form-vertical ant-form-hide-required-mark\"\n+            enableFormOnSubmit // makes the HTML \"submit\" button work directly\n         >\n             <Field name=\"active\">\n-                {/* value, onChange, onValueChange, name, label, id */}\n-                {({ value, onValueChange }) => (\n+                {/* value, onChange, onChangeEvent, name, label, id */}\n+                {({ value, onChange }) => (\n                     <LemonSwitch\n                         checked={value}\n-                        onChange={onValueChange}\n+                        onChange={onChange}\n                         label={\n                             value ? (\n                                 <span className=\"text-success\">Enabled</span>\n@@ -140,15 +140,12 @@ export function FeatureFlag({ id }: { id?: string } = {}): JSX.Element {\n             </Field>\n \n             <Field name=\"name\" label=\"Description\">\n-                {({ value, onChange }) => (\n-                    <Input.TextArea\n-                        value={value}\n-                        onChange={onChange}\n-                        className=\"ph-ignore-input\"\n-                        data-attr=\"feature-flag-description\"\n-                        placeholder=\"Adding a helpful description can ensure others know what this feature is for.\"\n-                    />\n-                )}\n+                <LemonTextArea\n+                    // value and onChange added automatically to Lemon components\n+                    className=\"ph-ignore-input\"\n+                    data-attr=\"feature-flag-description\"\n+                    placeholder=\"Adding a helpful description can ensure others know what this feature is for.\"\n+                />\n             </Field>\n \n             {featureFlag?.filters?.multivariate?.variants?.map((_, index) => (\n@@ -157,7 +154,7 @@ export function FeatureFlag({ id }: { id?: string } = {}): JSX.Element {\n                     <Field name=\"name\">\n                         {/* This will update featureFlag.filters.multivariate.variants[index].name */}\n                         {/* If you don't specify ({ value, onChange }) => (), we add these two props automatically */}\n-                        <Input\n+                        <LemonInput\n                             data-attr=\"feature-flag-variant-name\"\n                             className=\"ph-ignore-input\"\n                             placeholder=\"Description\"\ndiff --git a/frontend/src/stories/How to create stories.stories.mdx b/frontend/src/stories/How to create stories.stories.mdx\nindex 91ace5b3d..e2f0b0f7b 100644\n--- a/frontend/src/stories/How to create stories.stories.mdx\t\n+++ b/frontend/src/stories/How to create stories.stories.mdx\t\n@@ -67,7 +67,7 @@ export default {\n             },\n         },\n     },\n-} as ComponentMeta<typeof LemonTable>\n+} as ComponentMeta<typeof LemonSwitch>\n \n export function LemonSwitch_(props: LemonSwitchProps): JSX.Element {\n     const [isChecked, setIsChecked] = useState(false)\ndiff --git a/package.json b/package.json\nindex c3c0b6ec4..bcb7da556 100644\n--- a/package.json\n+++ b/package.json\n@@ -90,7 +90,7 @@\n         \"fast-deep-equal\": \"^3.1.3\",\n         \"fuse.js\": \"^6.4.1\",\n         \"kea\": \"^3.0.0-beta.5\",\n-        \"kea-forms\": \"^3.0.0-alpha.3\",\n+        \"kea-forms\": \"^3.0.0-alpha.4\",\n         \"kea-loaders\": \"^3.0.0-alpha.4\",\n         \"kea-localstorage\": \"^3.0.0-alpha.2\",\n         \"kea-router\": \"^3.0.0-alpha.1\",\ndiff --git a/yarn.lock b/yarn.lock\nindex 2fbc58bc4..701be7ef5 100644\n--- a/yarn.lock\n+++ b/yarn.lock\n@@ -11409,10 +11409,10 @@ junk@^3.1.0:\n   resolved \"https://registry.yarnpkg.com/junk/-/junk-3.1.0.tgz#31499098d902b7e98c5d9b9c80f43457a88abfa1\"\n   integrity sha512-pBxcB3LFc8QVgdggvZWyeys+hnrNWg4OcZIU/1X59k5jQdLBlCsYGRQaz234SqoRLTCgMH00fY0xRJH+F9METQ==\n \n-kea-forms@^3.0.0-alpha.3:\n-  version \"3.0.0-alpha.3\"\n-  resolved \"https://registry.yarnpkg.com/kea-forms/-/kea-forms-3.0.0-alpha.3.tgz#69d50f9f4bd5218a97606acfe39fc36d0eaa7f7e\"\n-  integrity sha512-a2fDrAt9lTATGpOu8S4bBjEfXWJ2Yguc+pn8toE+OSvSy+EuXDMzpMivuDAx0+JeTV4MWzKUmnd8PsPCAw9PGA==\n+kea-forms@^3.0.0-alpha.4:\n+  version \"3.0.0-alpha.4\"\n+  resolved \"https://registry.yarnpkg.com/kea-forms/-/kea-forms-3.0.0-alpha.4.tgz#0e194b1d2f126996341cca4fcaddc70a1d2986df\"\n+  integrity sha512-bnZWluf36skuOSFKoRme8b9ZhVhKjJxzhL0fUFgaU26VaA7Voj8dJGgZUzCI54zoyivl2stZGNAaCqbvj6kAvw==\n \n kea-loaders@^3.0.0-alpha.4:\n   version \"3.0.0-alpha.4\"\n"
  },
  "dd82d54087c7c5d1ab7fcbac24092991a04fe1e5": {
    "hash": "dd82d54087c7c5d1ab7fcbac24092991a04fe1e5",
    "message": "fix: lemonify and fix annotation table (#11319)\n    \n    * fix: lemonify and fix annotation table\n    \n    * border all annotation type tags\n    \n    * don't limit to 2 any more :/\n    \n    * remove story file that crept in\n    \n    * simplify diff\n    \n    * move the buttons\n    \n    * defuckulate calendar icons",
    "diff": "commit dd82d54087c7c5d1ab7fcbac24092991a04fe1e5\nAuthor: Paul D'Ambra <paul@posthog.com>\nDate:   Wed Aug 17 08:48:02 2022 +0100\n\n    fix: lemonify and fix annotation table (#11319)\n    \n    * fix: lemonify and fix annotation table\n    \n    * border all annotation type tags\n    \n    * don't limit to 2 any more :/\n    \n    * remove story file that crept in\n    \n    * simplify diff\n    \n    * move the buttons\n    \n    * defuckulate calendar icons\n\ndiff --git a/frontend/src/lib/components/DatePicker.scss b/frontend/src/lib/components/DatePicker.scss\nnew file mode 100644\nindex 000000000..326ebe3d4\n--- /dev/null\n+++ b/frontend/src/lib/components/DatePicker.scss\n@@ -0,0 +1,11 @@\n+.ant-picker .ant-picker-input,\n+.ant-picker.ant-picker-range {\n+    display: flex;\n+    flex-direction: row-reverse;\n+}\n+\n+.ant-picker .ant-picker-input span.ant-picker-suffix,\n+.ant-picker.ant-picker-range span.ant-picker-suffix {\n+    margin-left: 0;\n+    margin-right: 5px;\n+}\ndiff --git a/frontend/src/lib/components/DatePicker.tsx b/frontend/src/lib/components/DatePicker.tsx\nindex d61dc6e6a..dfe194d66 100644\n--- a/frontend/src/lib/components/DatePicker.tsx\n+++ b/frontend/src/lib/components/DatePicker.tsx\n@@ -1,6 +1,6 @@\n import dayjsGenerateConfig from 'rc-picker/lib/generate/dayjs'\n import generatePicker from 'antd/lib/date-picker/generatePicker'\n-\n+import './DatePicker.scss'\n import { dayjs } from 'lib/dayjs'\n \n export const DatePicker = generatePicker<dayjs.Dayjs>(dayjsGenerateConfig)\ndiff --git a/frontend/src/lib/constants.tsx b/frontend/src/lib/constants.tsx\nindex 3794ca00b..1ee8a8afe 100644\n--- a/frontend/src/lib/constants.tsx\n+++ b/frontend/src/lib/constants.tsx\n@@ -1,5 +1,5 @@\n import { urls } from 'scenes/urls'\n-import { AnnotationScope, AvailableFeature, ChartDisplayType, LicensePlan, SSOProviders } from '../types'\n+import { AvailableFeature, ChartDisplayType, LicensePlan, SSOProviders } from '../types'\n \n /** Display types which don't allow grouping by unit of time. Sync with backend NON_TIME_SERIES_DISPLAY_TYPES. */\n export const NON_TIME_SERIES_DISPLAY_TYPES = [\n@@ -33,12 +33,6 @@ export enum PluginsAccessLevel {\n     Root = 9,\n }\n \n-export const annotationScopeToName = new Map<string, string>([\n-    [AnnotationScope.Insight, 'insight'],\n-    [AnnotationScope.Project, 'project'],\n-    [AnnotationScope.Organization, 'organization'],\n-])\n-\n /** Collaboration restriction level (which is a dashboard setting). Sync with DashboardPrivilegeLevel. */\n export enum DashboardRestrictionLevel {\n     EveryoneInProjectCanEdit = 21,\ndiff --git a/frontend/src/models/annotationsModel.ts b/frontend/src/models/annotationsModel.ts\nindex 93eeb46c3..6bb74bbbf 100644\n--- a/frontend/src/models/annotationsModel.ts\n+++ b/frontend/src/models/annotationsModel.ts\n@@ -1,7 +1,7 @@\n import { kea } from 'kea'\n import api from 'lib/api'\n-import { toParams, deleteWithUndo } from 'lib/utils'\n-import { now, dayjs } from 'lib/dayjs'\n+import { deleteWithUndo, toParams } from 'lib/utils'\n+import { dayjs, now } from 'lib/dayjs'\n import { getNextKey } from 'lib/components/Annotations/utils'\n import type { annotationsModelType } from './annotationsModelType'\n import { AnnotationScope, AnnotationType } from '~/types'\n@@ -11,12 +11,18 @@ import { userLogic } from 'scenes/userLogic'\n export const annotationsModel = kea<annotationsModelType>({\n     path: ['models', 'annotationsModel'],\n     actions: {\n-        createGlobalAnnotation: (content: string, date_marker: string, insightNumericId?: number) => ({\n+        createGlobalAnnotation: (\n+            content: string,\n+            date_marker: string,\n+            insightNumericId?: number,\n+            annotationScope?: AnnotationScope\n+        ) => ({\n             content,\n             date_marker,\n             created_at: now(),\n             created_by: userLogic.values.user,\n             insightNumericId,\n+            annotationScope,\n         }),\n         deleteGlobalAnnotation: (id) => ({ id }),\n     },\n@@ -32,13 +38,13 @@ export const annotationsModel = kea<annotationsModelType>({\n                 )\n                 return response.results\n             },\n-            createGlobalAnnotation: async ({ insightNumericId, content, date_marker, created_at }) => {\n+            createGlobalAnnotation: async ({ insightNumericId, content, date_marker, created_at, annotationScope }) => {\n                 await api.create(`api/projects/${teamLogic.values.currentTeamId}/annotations`, {\n                     content,\n                     date_marker: (dayjs.isDayjs(date_marker) ? date_marker : dayjs(date_marker)).toISOString(),\n                     created_at: created_at.toISOString(),\n                     dashboard_item: insightNumericId,\n-                    scope: AnnotationScope.Organization,\n+                    scope: annotationScope || AnnotationScope.Organization,\n                 } as Partial<AnnotationType>)\n                 return values.globalAnnotations || []\n             },\n@@ -46,7 +52,7 @@ export const annotationsModel = kea<annotationsModelType>({\n     }),\n     reducers: {\n         globalAnnotations: {\n-            createGlobalAnnotation: (state, { content, date_marker, created_at, created_by }) => [\n+            createGlobalAnnotation: (state, { content, date_marker, created_at, created_by, annotationScope }) => [\n                 ...state,\n                 {\n                     id: getNextKey(state).toString(),\n@@ -55,7 +61,7 @@ export const annotationsModel = kea<annotationsModelType>({\n                     created_at: created_at.toISOString(),\n                     updated_at: created_at.toISOString(),\n                     created_by,\n-                    scope: AnnotationScope.Organization,\n+                    scope: annotationScope || AnnotationScope.Organization,\n                 } as AnnotationType,\n             ],\n             deleteGlobalAnnotation: (state, { id }) => {\ndiff --git a/frontend/src/scenes/annotations/index.tsx b/frontend/src/scenes/annotations/index.tsx\nindex 8a2604dc2..189eb1be7 100644\n--- a/frontend/src/scenes/annotations/index.tsx\n+++ b/frontend/src/scenes/annotations/index.tsx\n@@ -1,10 +1,8 @@\n import React, { useState, useEffect, HTMLAttributes } from 'react'\n import { useValues, useActions } from 'kea'\n-import { Tag, Button, Modal, Row, Menu, Dropdown } from 'antd'\n import { annotationsModel } from '~/models/annotationsModel'\n import { annotationsTableLogic } from './logic'\n-import { DeleteOutlined, RedoOutlined, ProjectOutlined, DeploymentUnitOutlined, DownOutlined } from '@ant-design/icons'\n-import { annotationScopeToName } from 'lib/constants'\n+\n import { PageHeader } from 'lib/components/PageHeader'\n import { AnnotationType, AnnotationScope } from '~/types'\n import { SceneExport } from 'scenes/sceneTypes'\n@@ -15,7 +13,10 @@ import { createdByColumn } from 'lib/components/LemonTable/columnUtils'\n import { TZLabel } from 'lib/components/TimezoneAware'\n import { LemonButton } from 'lib/components/LemonButton'\n import { DatePicker } from 'lib/components/DatePicker'\n-import { LemonTextArea } from '@posthog/lemon-ui'\n+import { LemonModal } from 'lib/components/LemonModal'\n+import { LemonSelect } from 'lib/components/LemonSelect'\n+import { LemonTextArea } from 'lib/components/LemonTextArea/LemonTextArea'\n+import { LemonTag } from 'lib/components/LemonTag/LemonTag'\n \n export const scene: SceneExport = {\n     component: Annotations,\n@@ -36,17 +37,7 @@ export function Annotations(): JSX.Element {\n             key: 'annotation',\n             width: '30%',\n             render: function RenderAnnotation(_, annotation: AnnotationType): JSX.Element {\n-                return (\n-                    <div\n-                        className=\"ph-no-capture\"\n-                        style={{\n-                            width: 'auto',\n-                            maxWidth: 250,\n-                        }}\n-                    >\n-                        {annotation.content}\n-                    </div>\n-                )\n+                return <div className=\"ph-no-capture\">{annotation.content}</div>\n             },\n         },\n         {\n@@ -69,20 +60,54 @@ export function Annotations(): JSX.Element {\n         {\n             title: 'Status',\n             render: function RenderStatus(_, annotation: AnnotationType): JSX.Element {\n-                return annotation.deleted ? <Tag color=\"red\">Deleted</Tag> : <Tag color=\"green\">Active</Tag>\n+                return annotation.deleted ? (\n+                    <LemonTag type=\"danger\">Deleted</LemonTag>\n+                ) : (\n+                    <LemonTag type=\"success\">Active</LemonTag>\n+                )\n             },\n         },\n         {\n             title: 'Scope',\n             render: function RenderType(_, annotation: AnnotationType): JSX.Element {\n                 return annotation.scope === AnnotationScope.Insight ? (\n-                    <Tag color=\"blue\">Insight</Tag>\n+                    <LemonTag\n+                        className=\"border\"\n+                        style={{\n+                            // overriding tag color here to match antd for now\n+                            color: '#096dd9',\n+                            background: '#e6f7ff',\n+                            borderColor: '#91d5ff',\n+                        }}\n+                    >\n+                        Insight\n+                    </LemonTag>\n                 ) : annotation.scope === AnnotationScope.Project ? (\n-                    <Tag color=\"purple\">Project</Tag>\n+                    <LemonTag\n+                        className=\"border\"\n+                        style={{\n+                            // overriding tag color here to match antd for now\n+                            color: '#531dab',\n+                            background: '#f9f0ff',\n+                            borderColor: '#d3adf7',\n+                        }}\n+                    >\n+                        Project\n+                    </LemonTag>\n                 ) : annotation.scope === AnnotationScope.Organization ? (\n-                    <Tag color=\"pink\">Organization</Tag>\n+                    <LemonTag\n+                        className=\"border\"\n+                        style={{\n+                            // overriding tag color here to match antd for now\n+                            color: '#c41d7f',\n+                            background: '#fff0f6',\n+                            borderColor: '#ffadd2',\n+                        }}\n+                    >\n+                        Organization\n+                    </LemonTag>\n                 ) : (\n-                    <Tag>Unknown ({annotation.scope})</Tag>\n+                    <LemonTag>Unknown ({annotation.scope})</LemonTag>\n                 )\n             },\n         },\n@@ -126,24 +151,17 @@ export function Annotations(): JSX.Element {\n                     })}\n                     emptyState=\"No annotations yet\"\n                 />\n-                <div\n-                    style={{\n-                        visibility: next ? 'visible' : 'hidden',\n-                        margin: '2rem auto 5rem',\n-                        textAlign: 'center',\n-                    }}\n-                >\n-                    {loadingNext ? (\n-                        <Spinner size=\"sm\" />\n-                    ) : (\n-                        <Button\n+                <div className=\"flex flex-row justify-center mt-8\">\n+                    {next && (\n+                        <LemonButton\n                             type=\"primary\"\n+                            icon={loadingNext ? <Spinner size=\"sm\" /> : null}\n                             onClick={(): void => {\n                                 loadAnnotationsNext()\n                             }}\n                         >\n                             Load more annotations\n-                        </Button>\n+                        </LemonButton>\n                     )}\n                 </div>\n             </div>\n@@ -152,11 +170,11 @@ export function Annotations(): JSX.Element {\n                 onCancel={(): void => {\n                     closeModal()\n                 }}\n-                onSubmit={async (input, selectedDate): Promise<void> => {\n+                onSubmit={async (input, selectedDate, annotationScope: AnnotationScope): Promise<void> => {\n                     if (selectedAnnotation && (await selectedAnnotation)) {\n                         updateAnnotation(selectedAnnotation.id, input)\n                     } else {\n-                        createGlobalAnnotation(input, selectedDate.format('YYYY-MM-DD'))\n+                        createGlobalAnnotation(input, selectedDate.format('YYYY-MM-DD'), undefined, annotationScope)\n                     }\n                     closeModal()\n                 }}\n@@ -183,7 +201,7 @@ interface CreateAnnotationModalProps {\n     onCancel: () => void\n     onDelete: () => void\n     onRestore: () => void\n-    onSubmit: (input: string, date: dayjs.Dayjs) => void\n+    onSubmit: (input: string, date: dayjs.Dayjs, annotationScope: AnnotationScope) => void\n     annotation?: any\n }\n \n@@ -193,7 +211,7 @@ enum ModalMode {\n }\n \n function CreateAnnotationModal(props: CreateAnnotationModalProps): JSX.Element {\n-    const [scope, setScope] = useState<AnnotationScope>(AnnotationScope.Project)\n+    const [scope, setScope] = useState<AnnotationScope.Project | AnnotationScope.Organization>(AnnotationScope.Project)\n     const [textInput, setTextInput] = useState('')\n     const [modalMode, setModalMode] = useState<ModalMode>(ModalMode.CREATE)\n     const [selectedDate, setDate] = useState<dayjs.Dayjs>(dayjs())\n@@ -208,8 +226,8 @@ function CreateAnnotationModal(props: CreateAnnotationModalProps): JSX.Element {\n         }\n     }, [props.annotation])\n \n-    const _onSubmit = (input: string, date: dayjs.Dayjs): void => {\n-        props.onSubmit(input, date)\n+    const _onSubmit = (input: string, date: dayjs.Dayjs, annotationScope: AnnotationScope): void => {\n+        props.onSubmit(input, date, annotationScope)\n         // Reset input\n         setTextInput('')\n         setDate(dayjs())\n@@ -217,88 +235,101 @@ function CreateAnnotationModal(props: CreateAnnotationModalProps): JSX.Element {\n     }\n \n     return (\n-        <Modal\n-            footer={[\n-                <Button key=\"create-annotation-cancel\" onClick={(): void => props.onCancel()}>\n-                    Cancel\n-                </Button>,\n-                <Button\n-                    type=\"primary\"\n-                    key=\"create-annotation-submit\"\n-                    data-attr=\"create-annotation-submit\"\n-                    onClick={(): void => {\n-                        _onSubmit(textInput, selectedDate)\n-                    }}\n-                >\n-                    {modalMode === ModalMode.CREATE ? 'Submit' : 'Update'}\n-                </Button>,\n-            ]}\n-            closable={false}\n-            visible={props.visible}\n-            onCancel={props.onCancel}\n+        <LemonModal\n+            isOpen={props.visible}\n+            footer={\n+                <>\n+                    {modalMode === ModalMode.EDIT ? (\n+                        <div className=\"flex-1\">\n+                            {!props.annotation?.deleted ? (\n+                                <LemonButton\n+                                    type=\"secondary\"\n+                                    status=\"danger\"\n+                                    onClick={props.onDelete}\n+                                    data-attr=\"delete-annotation\"\n+                                >\n+                                    Delete annotation\n+                                </LemonButton>\n+                            ) : (\n+                                <LemonButton\n+                                    type=\"secondary\"\n+                                    status=\"primary-alt\"\n+                                    onClick={props.onRestore}\n+                                    data-attr=\"restore-annotation\"\n+                                >\n+                                    Restore annotation\n+                                </LemonButton>\n+                            )}\n+                        </div>\n+                    ) : null}\n+                    <LemonButton\n+                        key=\"create-annotation-cancel\"\n+                        type={'secondary'}\n+                        onClick={(): void => props.onCancel()}\n+                    >\n+                        Cancel\n+                    </LemonButton>\n+                    <LemonButton\n+                        type=\"primary\"\n+                        key=\"create-annotation-submit\"\n+                        data-attr=\"create-annotation-submit\"\n+                        onClick={(): void => {\n+                            _onSubmit(textInput, selectedDate, scope)\n+                        }}\n+                    >\n+                        {modalMode === ModalMode.CREATE ? 'Submit' : 'Update'}\n+                    </LemonButton>\n+                </>\n+            }\n+            onClose={props.onCancel}\n             title={modalMode === ModalMode.CREATE ? 'Create annotation' : 'Edit annotation'}\n         >\n             {modalMode === ModalMode.CREATE ? (\n                 <span>\n-                    This annotation will appear on all\n-                    <Dropdown\n-                        overlay={\n-                            <Menu activeKey={scope} onSelect={(e) => setScope(e.key as AnnotationScope)}>\n-                                <Menu.Item key={AnnotationScope.Project} icon={<ProjectOutlined />}>\n-                                    Project\n-                                </Menu.Item>\n-                                <Menu.Item key={AnnotationScope.Organization} icon={<DeploymentUnitOutlined />}>\n-                                    Organization\n-                                </Menu.Item>\n-                            </Menu>\n-                        }\n-                    >\n-                        <Button style={{ marginLeft: 8, marginRight: 8 }}>\n-                            {annotationScopeToName.get(scope)} <DownOutlined />\n-                        </Button>\n-                    </Dropdown>{' '}\n-                    charts\n-                </span>\n-            ) : (\n-                <Row justify=\"space-between\">\n-                    <span>Change existing annotation text</span>\n-                    {!props.annotation?.deleted ? (\n-                        <DeleteOutlined\n-                            className=\"text-danger\"\n-                            onClick={(): void => {\n-                                props.onDelete()\n+                    This annotation will appear on all{' '}\n+                    <div className=\"inline-flex\">\n+                        <LemonSelect\n+                            size=\"small\"\n+                            dropdownMaxContentWidth={true}\n+                            options={{\n+                                [AnnotationScope.Project]: { label: 'project' },\n+                                [AnnotationScope.Organization]: {\n+                                    label: 'organization',\n+                                },\n                             }}\n-                        />\n-                    ) : (\n-                        <RedoOutlined\n-                            className=\"button-border clickable\"\n-                            onClick={(): void => {\n-                                props.onRestore()\n+                            onChange={(scope) => {\n+                                if (scope) {\n+                                    setScope(scope)\n+                                }\n                             }}\n+                            value={scope}\n                         />\n-                    )}\n-                </Row>\n-            )}\n-            <br />\n+                    </div>{' '}\n+                    insights\n+                </span>\n+            ) : null}\n             {modalMode === ModalMode.CREATE && (\n                 <div>\n-                    Date:\n-                    <DatePicker\n-                        style={{ marginTop: 16, marginLeft: 8, marginBottom: 16 }}\n-                        getPopupContainer={(trigger): HTMLElement => trigger.parentElement as HTMLElement}\n-                        value={selectedDate}\n-                        onChange={(date): void => setDate(date as dayjs.Dayjs)}\n-                        allowClear={false}\n-                    />\n+                    <div className=\"my-2 flex flex-row items-center\">\n+                        Date:&nbsp;\n+                        <DatePicker\n+                            getPopupContainer={(trigger): HTMLElement => trigger.parentElement as HTMLElement}\n+                            value={selectedDate}\n+                            onChange={(date): void => setDate(date as dayjs.Dayjs)}\n+                            allowClear={false}\n+                        />\n+                    </div>\n                 </div>\n             )}\n+            <div>Annotation text:</div>\n             <LemonTextArea\n                 data-attr=\"create-annotation-input\"\n                 maxLength={300}\n+                className=\"mt-1\"\n                 rows={4}\n                 value={textInput}\n                 onChange={setTextInput}\n             />\n-        </Modal>\n+        </LemonModal>\n     )\n }\ndiff --git a/frontend/src/scenes/insights/RetentionDatePicker.tsx b/frontend/src/scenes/insights/RetentionDatePicker.tsx\nindex de47a4cab..bfebdbf20 100644\n--- a/frontend/src/scenes/insights/RetentionDatePicker.tsx\n+++ b/frontend/src/scenes/insights/RetentionDatePicker.tsx\n@@ -1,7 +1,6 @@\n import React from 'react'\n import { useActions, useValues } from 'kea'\n import { retentionTableLogic } from 'scenes/retention/retentionTableLogic'\n-import { CalendarOutlined } from '@ant-design/icons'\n import { Tooltip } from 'lib/components/Tooltip'\n import { insightLogic } from 'scenes/insights/insightLogic'\n import { dayjs } from 'lib/dayjs'\n@@ -17,8 +16,7 @@ export function RetentionDatePicker({ disabled }: { disabled?: boolean }): JSX.E\n     return (\n         <>\n             <Tooltip title=\"Cohorts up to this end date\">\n-                <span style={{ maxWidth: 100, display: 'inline-flex', alignItems: 'center' }}>\n-                    <CalendarOutlined />\n+                <span style={{ maxWidth: 100 }} className=\"flex inline-flex items-center pl-2\">\n                     <DatePicker\n                         showTime={filters.period === 'Hour'}\n                         use12Hours\n@@ -28,7 +26,6 @@ export function RetentionDatePicker({ disabled }: { disabled?: boolean }): JSX.E\n                         allowClear\n                         placeholder=\"Today\"\n                         className=\"retention-date-picker\"\n-                        suffixIcon={null}\n                         disabled={disabled}\n                     />\n                 </span>\n"
  },
  "25332036a3e38366039a361f0af5422b94b5d7da": {
    "hash": "25332036a3e38366039a361f0af5422b94b5d7da",
    "message": "fix(insights): Disallow changing calc type in aggregated display types (#9366)\n    \n    * fix(insights): Disallow changing calc type in aggregated display types\n    \n    * Rename const to `NON_TIME_SERIES_DISPLAY_TYPES`",
    "diff": "commit 25332036a3e38366039a361f0af5422b94b5d7da\nAuthor: Michael Matloka <dev@twixes.com>\nDate:   Fri Apr 8 14:34:24 2022 +0200\n\n    fix(insights): Disallow changing calc type in aggregated display types (#9366)\n    \n    * fix(insights): Disallow changing calc type in aggregated display types\n    \n    * Rename const to `NON_TIME_SERIES_DISPLAY_TYPES`\n\ndiff --git a/ee/clickhouse/queries/trends/breakdown.py b/ee/clickhouse/queries/trends/breakdown.py\nindex 40bcd9f7b..5c533029a 100644\n--- a/ee/clickhouse/queries/trends/breakdown.py\n+++ b/ee/clickhouse/queries/trends/breakdown.py\n@@ -24,9 +24,9 @@ from ee.clickhouse.sql.trends.breakdown import (\n )\n from posthog.constants import (\n     MONTHLY_ACTIVE,\n+    NON_TIME_SERIES_DISPLAY_TYPES,\n     TREND_FILTER_TYPE_ACTIONS,\n     TRENDS_CUMULATIVE,\n-    TRENDS_DISPLAY_BY_VALUE,\n     WEEKLY_ACTIVE,\n     PropertyOperatorType,\n )\n@@ -123,7 +123,7 @@ class ClickhouseTrendsBreakdown:\n         self.params = {**self.params, **_params, **person_join_params, **groups_join_params}\n         breakdown_filter_params = {**breakdown_filter_params, **_breakdown_filter_params}\n \n-        if self.filter.display in TRENDS_DISPLAY_BY_VALUE:\n+        if self.filter.display in NON_TIME_SERIES_DISPLAY_TYPES:\n             breakdown_filter = breakdown_filter.format(**breakdown_filter_params)\n             content_sql = BREAKDOWN_AGGREGATE_QUERY_SQL.format(\n                 breakdown_filter=breakdown_filter,\ndiff --git a/ee/clickhouse/queries/trends/formula.py b/ee/clickhouse/queries/trends/formula.py\nindex 30ec2019e..28ab84c17 100644\n--- a/ee/clickhouse/queries/trends/formula.py\n+++ b/ee/clickhouse/queries/trends/formula.py\n@@ -6,7 +6,7 @@ from ee.clickhouse.queries.breakdown_props import get_breakdown_cohort_name\n from ee.clickhouse.queries.trends.util import parse_response\n from ee.clickhouse.sql.clickhouse import trim_quotes_expr\n from posthog.client import sync_execute\n-from posthog.constants import TRENDS_CUMULATIVE, TRENDS_DISPLAY_BY_VALUE\n+from posthog.constants import NON_TIME_SERIES_DISPLAY_TYPES, TRENDS_CUMULATIVE\n from posthog.models.filters.filter import Filter\n from posthog.models.team import Team\n \n@@ -28,7 +28,7 @@ class ClickhouseTrendsFormula:\n             if filter.breakdown_type == \"cohort\"\n             else f\", {trim_quotes_expr('sub_A.breakdown_value')}\"\n         )\n-        is_aggregate = filter.display in TRENDS_DISPLAY_BY_VALUE\n+        is_aggregate = filter.display in NON_TIME_SERIES_DISPLAY_TYPES\n \n         sql = \"\"\"SELECT\n             {date_select}\ndiff --git a/ee/clickhouse/queries/trends/person.py b/ee/clickhouse/queries/trends/person.py\nindex b484c3165..1dfccc592 100644\n--- a/ee/clickhouse/queries/trends/person.py\n+++ b/ee/clickhouse/queries/trends/person.py\n@@ -7,7 +7,7 @@ from django.utils import timezone\n from ee.clickhouse.queries.actor_base_query import ActorBaseQuery\n from ee.clickhouse.queries.trends.trend_event_query import TrendsEventQuery\n from ee.clickhouse.sql.person import GET_ACTORS_FROM_EVENT_QUERY\n-from posthog.constants import TRENDS_CUMULATIVE, TRENDS_DISPLAY_BY_VALUE, PropertyOperatorType\n+from posthog.constants import NON_TIME_SERIES_DISPLAY_TYPES, TRENDS_CUMULATIVE, PropertyOperatorType\n from posthog.models.cohort import Cohort\n from posthog.models.entity import Entity\n from posthog.models.filters import Filter\n@@ -41,7 +41,7 @@ class ClickhouseTrendsActors(ActorBaseQuery):\n         if not entity:\n             raise ValueError(\"Entity is required\")\n \n-        if filter.display != TRENDS_CUMULATIVE and filter.display not in TRENDS_DISPLAY_BY_VALUE:\n+        if filter.display != TRENDS_CUMULATIVE and filter.display not in NON_TIME_SERIES_DISPLAY_TYPES:\n             filter = _handle_date_interval(filter)\n \n         super().__init__(team, filter, entity, **kwargs)\ndiff --git a/ee/clickhouse/queries/trends/total_volume.py b/ee/clickhouse/queries/trends/total_volume.py\nindex 38a8987a0..232dbf772 100644\n--- a/ee/clickhouse/queries/trends/total_volume.py\n+++ b/ee/clickhouse/queries/trends/total_volume.py\n@@ -11,7 +11,7 @@ from ee.clickhouse.sql.trends.volume import (\n     VOLUME_SQL,\n     VOLUME_TOTAL_AGGREGATE_SQL,\n )\n-from posthog.constants import MONTHLY_ACTIVE, TRENDS_CUMULATIVE, TRENDS_DISPLAY_BY_VALUE, WEEKLY_ACTIVE\n+from posthog.constants import MONTHLY_ACTIVE, NON_TIME_SERIES_DISPLAY_TYPES, TRENDS_CUMULATIVE, WEEKLY_ACTIVE\n from posthog.models.entity import Entity\n from posthog.models.filters import Filter\n from posthog.models.team import Team\n@@ -44,7 +44,7 @@ class ClickhouseTrendsTotalVolume:\n         params: Dict = {\"team_id\": team.id}\n         params = {**params, **math_params, **event_query_params}\n \n-        if filter.display in TRENDS_DISPLAY_BY_VALUE:\n+        if filter.display in NON_TIME_SERIES_DISPLAY_TYPES:\n             content_sql = VOLUME_TOTAL_AGGREGATE_SQL.format(event_query=event_query, **content_sql_params)\n \n             return (content_sql, params, self._parse_aggregate_volume_result(filter, entity, team.id))\ndiff --git a/frontend/src/lib/constants.tsx b/frontend/src/lib/constants.tsx\nindex bf0226360..06b33fa82 100644\n--- a/frontend/src/lib/constants.tsx\n+++ b/frontend/src/lib/constants.tsx\n@@ -1,16 +1,13 @@\n import { urls } from 'scenes/urls'\n-import { AnnotationScope, AvailableFeature, LicensePlan, SSOProviders } from '../types'\n-\n-// Sync these with the ChartDisplayType enum in types.ts\n-// ... and remove once all files have migrated to TypeScript\n-export const ACTIONS_LINE_GRAPH_LINEAR = 'ActionsLineGraph'\n-export const ACTIONS_LINE_GRAPH_CUMULATIVE = 'ActionsLineGraphCumulative'\n-export const ACTIONS_TABLE = 'ActionsTable'\n-export const ACTIONS_PIE_CHART = 'ActionsPie'\n-export const ACTIONS_BAR_CHART = 'ActionsBar'\n-export const ACTIONS_BAR_CHART_VALUE = 'ActionsBarValue'\n-export const PATHS_VIZ = 'PathsViz'\n-export const FUNNEL_VIZ = 'FunnelViz'\n+import { AnnotationScope, AvailableFeature, ChartDisplayType, LicensePlan, SSOProviders } from '../types'\n+\n+// Sync with backend NON_TIME_SERIES_DISPLAY_TYPES\n+export const NON_TIME_SERIES_DISPLAY_TYPES = [\n+    ChartDisplayType.ActionsTable,\n+    ChartDisplayType.ActionsPie,\n+    ChartDisplayType.ActionsBarValue,\n+    ChartDisplayType.WorldMap,\n+]\n \n export enum OrganizationMembershipLevel {\n     Member = 1,\ndiff --git a/frontend/src/scenes/dashboard/dashboardLogic.ts b/frontend/src/scenes/dashboard/dashboardLogic.ts\nindex b39ba1817..cb362b4b3 100644\n--- a/frontend/src/scenes/dashboard/dashboardLogic.ts\n+++ b/frontend/src/scenes/dashboard/dashboardLogic.ts\n@@ -5,13 +5,7 @@ import { router } from 'kea-router'\n import { dayjs, now } from 'lib/dayjs'\n import { clearDOMTextSelection, isUserLoggedIn, toParams } from 'lib/utils'\n import { insightsModel } from '~/models/insightsModel'\n-import {\n-    ACTIONS_LINE_GRAPH_LINEAR,\n-    PATHS_VIZ,\n-    DashboardPrivilegeLevel,\n-    OrganizationMembershipLevel,\n-    FEATURE_FLAGS,\n-} from 'lib/constants'\n+import { DashboardPrivilegeLevel, OrganizationMembershipLevel, FEATURE_FLAGS } from 'lib/constants'\n import { DashboardEventSource, eventUsageLogic } from 'lib/utils/eventUsageLogic'\n import {\n     Breadcrumb,\n@@ -23,6 +17,7 @@ import {\n     InsightShortId,\n     InsightType,\n     DashboardPlacement,\n+    ChartDisplayType,\n } from '~/types'\n import { dashboardLogicType } from './dashboardLogicType'\n import { Layout, Layouts } from 'react-grid-layout'\n@@ -399,9 +394,14 @@ export const dashboardLogic = kea<dashboardLogicType<DashboardLogicProps>>({\n                         .map((item) => {\n                             const isRetention =\n                                 item.filters.insight === InsightType.RETENTION &&\n-                                item.filters.display === ACTIONS_LINE_GRAPH_LINEAR\n-                            const defaultWidth = isRetention || item.filters.display === PATHS_VIZ ? 8 : 6\n-                            const defaultHeight = isRetention ? 8 : item.filters.display === PATHS_VIZ ? 12.5 : 5\n+                                item.filters.display === ChartDisplayType.ActionsLineGraph\n+                            const defaultWidth =\n+                                isRetention || item.filters.display === ChartDisplayType.PathsViz ? 8 : 6\n+                            const defaultHeight = isRetention\n+                                ? 8\n+                                : item.filters.display === ChartDisplayType.PathsViz\n+                                ? 12.5\n+                                : 5\n                             const layout = item.layouts && item.layouts[col]\n                             const { x, y, w, h } = layout || {}\n                             const width = Math.min(w || defaultWidth, BREAKPOINT_COLUMN_COUNTS[col])\ndiff --git a/frontend/src/scenes/insights/InsightContainer.tsx b/frontend/src/scenes/insights/InsightContainer.tsx\nindex 218a457a0..965026ca6 100644\n--- a/frontend/src/scenes/insights/InsightContainer.tsx\n+++ b/frontend/src/scenes/insights/InsightContainer.tsx\n@@ -7,7 +7,7 @@ import { TrendInsight } from 'scenes/trends/Trends'\n import { FunnelInsight } from 'scenes/insights/FunnelInsight'\n import { RetentionContainer } from 'scenes/retention/RetentionContainer'\n import { Paths } from 'scenes/paths/Paths'\n-import { ACTIONS_BAR_CHART_VALUE, ACTIONS_TABLE, FEATURE_FLAGS, FunnelLayout } from 'lib/constants'\n+import { FEATURE_FLAGS, FunnelLayout } from 'lib/constants'\n import { FunnelStepTable } from 'scenes/insights/InsightTabs/FunnelTab/FunnelStepTable'\n import { BindLogic, useValues } from 'kea'\n import { trendsLogic } from 'scenes/trends/trendsLogic'\n@@ -66,10 +66,11 @@ export function InsightContainer(\n         if (activeView !== loadedView || (insightLoading && !showTimeoutMessage)) {\n             return (\n                 <>\n-                    {filters.display !== ACTIONS_TABLE && filters.display !== ChartDisplayType.WorldMap && (\n-                        /* Tables and world map don't need this padding, but graphs do for sizing */\n-                        <div className=\"trends-insights-container\" />\n-                    )}\n+                    {filters.display !== ChartDisplayType.ActionsTable &&\n+                        filters.display !== ChartDisplayType.WorldMap && (\n+                            /* Tables and world map don't need this padding, but graphs do for sizing */\n+                            <div className=\"trends-insights-container\" />\n+                        )}\n                     <Loading />\n                 </>\n             )\n@@ -112,7 +113,8 @@ export function InsightContainer(\n         }\n         if (\n             (!filters.display ||\n-                (filters?.display !== ACTIONS_TABLE && filters?.display !== ACTIONS_BAR_CHART_VALUE)) &&\n+                (filters?.display !== ChartDisplayType.ActionsTable &&\n+                    filters?.display !== ChartDisplayType.ActionsBarValue)) &&\n             activeView === InsightType.TRENDS &&\n             !disableTable\n         ) {\ndiff --git a/frontend/src/scenes/insights/InsightTabs/InsightDisplayConfig.tsx b/frontend/src/scenes/insights/InsightTabs/InsightDisplayConfig.tsx\nindex b2cc45e6d..027fde150 100644\n--- a/frontend/src/scenes/insights/InsightTabs/InsightDisplayConfig.tsx\n+++ b/frontend/src/scenes/insights/InsightTabs/InsightDisplayConfig.tsx\n@@ -3,7 +3,7 @@ import { ChartFilter } from 'lib/components/ChartFilter'\n import { CompareFilter } from 'lib/components/CompareFilter/CompareFilter'\n import { IntervalFilter } from 'lib/components/IntervalFilter'\n import { SmoothingFilter } from 'lib/components/SmoothingFilter/SmoothingFilter'\n-import { ACTIONS_LINE_GRAPH_LINEAR } from 'lib/constants'\n+import { NON_TIME_SERIES_DISPLAY_TYPES } from 'lib/constants'\n import { FilterType, FunnelVizType, ItemMode, InsightType, ChartDisplayType } from '~/types'\n import { CalendarOutlined } from '@ant-design/icons'\n import { InsightDateFilter } from '../InsightDateFilter'\n@@ -37,15 +37,7 @@ const showIntervalFilter = function (activeView: InsightType, filter: FilterType\n         case InsightType.STICKINESS:\n         case InsightType.LIFECYCLE:\n         default:\n-            return (\n-                !filter.display ||\n-                ![\n-                    ChartDisplayType.ActionsPie,\n-                    ChartDisplayType.ActionsTable,\n-                    ChartDisplayType.ActionsBarValue,\n-                    ChartDisplayType.WorldMap,\n-                ].includes(filter.display)\n-            )\n+            return !filter.display || !NON_TIME_SERIES_DISPLAY_TYPES.includes(filter.display)\n     }\n }\n \n@@ -133,7 +125,7 @@ export function InsightDisplayConfig({\n                 {activeView === InsightType.TRENDS &&\n                 !filters.breakdown_type &&\n                 !filters.compare &&\n-                (!filters.display || filters.display === ACTIONS_LINE_GRAPH_LINEAR) &&\n+                (!filters.display || filters.display === ChartDisplayType.ActionsLineGraph) &&\n                 featureFlags[FEATURE_FLAGS.SMOOTHING_INTERVAL] ? (\n                     <SmoothingFilter />\n                 ) : null}\ndiff --git a/frontend/src/scenes/insights/InsightTabs/RetentionTab.tsx b/frontend/src/scenes/insights/InsightTabs/RetentionTab.tsx\nindex 3e1d3251d..c62ae533a 100644\n--- a/frontend/src/scenes/insights/InsightTabs/RetentionTab.tsx\n+++ b/frontend/src/scenes/insights/InsightTabs/RetentionTab.tsx\n@@ -8,10 +8,10 @@ import {\n     retentionOptions,\n } from 'scenes/retention/retentionTableLogic'\n import { Select, Row, Col } from 'antd'\n-import { FilterType, PropertyGroupFilter, RetentionType } from '~/types'\n+import { ChartDisplayType, FilterType, PropertyGroupFilter, RetentionType } from '~/types'\n import { TestAccountFilter } from '../TestAccountFilter'\n import './RetentionTab.scss'\n-import { ACTIONS_LINE_GRAPH_LINEAR, FEATURE_FLAGS } from 'lib/constants'\n+import { FEATURE_FLAGS } from 'lib/constants'\n import useBreakpoint from 'antd/lib/grid/hooks/useBreakpoint'\n import { IconOpenInNew } from 'lib/components/icons'\n import { ActionFilter } from '../ActionFilter/ActionFilter'\n@@ -202,7 +202,7 @@ export function RetentionTab(): JSX.Element {\n                     )}\n \n                     {featureFlags[FEATURE_FLAGS.RETENTION_BREAKDOWN] &&\n-                    filters.display !== ACTIONS_LINE_GRAPH_LINEAR ? (\n+                    filters.display !== ChartDisplayType.ActionsLineGraph ? (\n                         <>\n                             <hr />\n                             <h4 className=\"secondary\">\ndiff --git a/frontend/src/scenes/insights/InsightsTable/InsightsTable.tsx b/frontend/src/scenes/insights/InsightsTable/InsightsTable.tsx\nindex 5f1771f43..20452f142 100644\n--- a/frontend/src/scenes/insights/InsightsTable/InsightsTable.tsx\n+++ b/frontend/src/scenes/insights/InsightsTable/InsightsTable.tsx\n@@ -25,6 +25,7 @@ import stringWithWBR from 'lib/utils/stringWithWBR'\n import { LemonButton } from 'lib/components/LemonButton'\n import { IconExport, IconEdit } from 'lib/components/icons'\n import { countryCodeToName } from '../WorldMap'\n+import { NON_TIME_SERIES_DISPLAY_TYPES } from 'lib/constants'\n \n interface InsightsTableProps {\n     /** Whether this is just a legend instead of standalone insight viz. Default: false. */\n@@ -98,24 +99,25 @@ export function InsightsTable({\n         }\n     }\n \n-    // The calc menu doesn't make sense for the map\n-    const calcColumnMenu =\n-        filters.display === ChartDisplayType.WorldMap ? null : (\n-            <Menu>\n-                {Object.keys(CALC_COLUMN_LABELS).map((key) => (\n-                    <Menu.Item\n-                        key={key}\n-                        onClick={(e) => {\n-                            setCalcColumnState(key as CalcColumnState)\n-                            reportInsightsTableCalcToggled(key)\n-                            e.domEvent.stopPropagation() // Prevent click here from affecting table sorting\n-                        }}\n-                    >\n-                        {CALC_COLUMN_LABELS[key as CalcColumnState]}\n-                    </Menu.Item>\n-                ))}\n-            </Menu>\n-        )\n+    const isDisplayModeNonTimeSeries: boolean =\n+        !!filters.display && NON_TIME_SERIES_DISPLAY_TYPES.includes(filters.display)\n+\n+    const calcColumnMenu = isDisplayModeNonTimeSeries ? null : (\n+        <Menu>\n+            {Object.keys(CALC_COLUMN_LABELS).map((key) => (\n+                <Menu.Item\n+                    key={key}\n+                    onClick={(e) => {\n+                        setCalcColumnState(key as CalcColumnState)\n+                        reportInsightsTableCalcToggled(key)\n+                        e.domEvent.stopPropagation() // Prevent click here from affecting table sorting\n+                    }}\n+                >\n+                    {CALC_COLUMN_LABELS[key as CalcColumnState]}\n+                </Menu.Item>\n+            ))}\n+        </Menu>\n+    )\n \n     // Build up columns to include. Order matters.\n     const columns: LemonTableColumns<IndexedTrendResult> = []\n@@ -251,18 +253,12 @@ export function InsightsTable({\n                 CALC_COLUMN_LABELS.total\n             ),\n             render: function RenderCalc(count: any, item: IndexedTrendResult) {\n-                if (calcColumnState === 'average') {\n+                if (calcColumnState === 'total' || isDisplayModeNonTimeSeries) {\n+                    return (item.count || item.aggregated_value || 'Unknown').toLocaleString()\n+                } else if (calcColumnState === 'average') {\n                     return average(item.data).toLocaleString()\n                 } else if (calcColumnState === 'median') {\n                     return median(item.data).toLocaleString()\n-                } else if (\n-                    calcColumnState === 'total' &&\n-                    (filters.display === ChartDisplayType.ActionsLineGraphCumulative ||\n-                        filters.display === ChartDisplayType.ActionsTable ||\n-                        filters.display === ChartDisplayType.ActionsPie ||\n-                        filters.display === ChartDisplayType.WorldMap)\n-                ) {\n-                    return (item.count || item.aggregated_value || 'Unknown').toLocaleString()\n                 }\n                 return (\n                     <>\n@@ -284,12 +280,12 @@ export function InsightsTable({\n     return (\n         <>\n             {csvExportUrl && !isViewedOnDashboard && (\n-                <Tooltip title=\"Export this table as csv.\" placement=\"left\">\n+                <Tooltip title=\"Export this table in CSV format\" placement=\"left\">\n                     <LemonButton\n                         type=\"secondary\"\n                         icon={<IconExport style={{ color: 'var(--primary)' }} />}\n                         href={csvExportUrl}\n-                        style={{ float: 'right', marginBottom: '1rem', marginTop: '0.5rem' }}\n+                        style={{ float: 'right', marginBottom: '1rem' }}\n                     >\n                         Export\n                     </LemonButton>\ndiff --git a/frontend/src/scenes/trends/Trends.tsx b/frontend/src/scenes/trends/Trends.tsx\nindex cdc408c51..caab83181 100644\n--- a/frontend/src/scenes/trends/Trends.tsx\n+++ b/frontend/src/scenes/trends/Trends.tsx\n@@ -1,12 +1,6 @@\n import React from 'react'\n import { BindLogic, useActions, useValues } from 'kea'\n import { PersonsModal } from './PersonsModal'\n-import {\n-    ACTIONS_LINE_GRAPH_LINEAR,\n-    ACTIONS_LINE_GRAPH_CUMULATIVE,\n-    ACTIONS_TABLE,\n-    ACTIONS_BAR_CHART,\n-} from 'lib/constants'\n import { ActionsPie, ActionsLineGraph, ActionsHorizontalBar } from './viz'\n import { SaveCohortModal } from './SaveCohortModal'\n import { trendsLogic } from './trendsLogic'\n@@ -43,13 +37,13 @@ export function TrendInsight({ view }: Props): JSX.Element {\n     const renderViz = (): JSX.Element | undefined => {\n         if (\n             !_filters.display ||\n-            _filters.display === ACTIONS_LINE_GRAPH_LINEAR ||\n-            _filters.display === ACTIONS_LINE_GRAPH_CUMULATIVE ||\n-            _filters.display === ACTIONS_BAR_CHART\n+            _filters.display === ChartDisplayType.ActionsLineGraph ||\n+            _filters.display === ChartDisplayType.ActionsLineGraphCumulative ||\n+            _filters.display === ChartDisplayType.ActionsBar\n         ) {\n             return <ActionsLineGraph />\n         }\n-        if (_filters.display === ACTIONS_TABLE) {\n+        if (_filters.display === ChartDisplayType.ActionsTable) {\n             return (\n                 <BindLogic logic={trendsLogic} props={{ dashboardItemId: null, view, filters: null }}>\n                     <InsightsTable\n@@ -78,7 +72,8 @@ export function TrendInsight({ view }: Props): JSX.Element {\n             {(_filters.actions || _filters.events) && (\n                 <div\n                     className={\n-                        _filters.display !== ACTIONS_TABLE && _filters.display !== ChartDisplayType.WorldMap\n+                        _filters.display !== ChartDisplayType.ActionsTable &&\n+                        _filters.display !== ChartDisplayType.WorldMap\n                             ? 'trends-insights-container'\n                             : undefined /* Tables and world map don't need this padding, but graphs do for sizing */\n                     }\ndiff --git a/frontend/src/scenes/trends/personsModalLogic.ts b/frontend/src/scenes/trends/personsModalLogic.ts\nindex 348dacc21..a462bd7c1 100644\n--- a/frontend/src/scenes/trends/personsModalLogic.ts\n+++ b/frontend/src/scenes/trends/personsModalLogic.ts\n@@ -11,13 +11,14 @@ import {\n     FunnelCorrelationResultsType,\n     ActorType,\n     GraphDataset,\n+    ChartDisplayType,\n } from '~/types'\n import { personsModalLogicType } from './personsModalLogicType'\n import { eventUsageLogic } from 'lib/utils/eventUsageLogic'\n import { TrendActors } from 'scenes/trends/types'\n import { cleanFilters } from 'scenes/insights/utils/cleanFilters'\n import { filterTrendsClientSideParams } from 'scenes/insights/sharedUtils'\n-import { ACTIONS_LINE_GRAPH_CUMULATIVE, FEATURE_FLAGS } from 'lib/constants'\n+import { FEATURE_FLAGS } from 'lib/constants'\n import { cohortsModel } from '~/models/cohortsModel'\n import { dayjs } from 'lib/dayjs'\n import { groupsModel } from '~/models/groupsModel'\n@@ -64,7 +65,7 @@ export function parsePeopleParams(peopleParams: PeopleParamType, filters: Partia\n     // casting here is not the best\n     if (filters.insight === InsightType.STICKINESS) {\n         params.stickiness_days = date_from as number\n-    } else if (params.display === ACTIONS_LINE_GRAPH_CUMULATIVE) {\n+    } else if (params.display === ChartDisplayType.ActionsLineGraphCumulative) {\n         params.date_to = date_from as string\n     } else if (filters.insight === InsightType.LIFECYCLE) {\n         params.date_from = filters.date_from\ndiff --git a/frontend/src/scenes/trends/viz/ActionsLineGraph.tsx b/frontend/src/scenes/trends/viz/ActionsLineGraph.tsx\nindex f8f30d5b2..61ebc67a4 100644\n--- a/frontend/src/scenes/trends/viz/ActionsLineGraph.tsx\n+++ b/frontend/src/scenes/trends/viz/ActionsLineGraph.tsx\n@@ -3,8 +3,7 @@ import { LineGraph } from '../../insights/LineGraph/LineGraph'\n import { useActions, useValues } from 'kea'\n import { trendsLogic } from 'scenes/trends/trendsLogic'\n import { InsightEmptyState } from '../../insights/EmptyStates'\n-import { ACTIONS_BAR_CHART } from 'lib/constants'\n-import { ChartParams, GraphType, InsightType } from '~/types'\n+import { ChartDisplayType, ChartParams, GraphType, InsightType } from '~/types'\n import { personsModalLogic } from '../personsModalLogic'\n import { insightLogic } from 'scenes/insights/insightLogic'\n import { capitalizeFirstLetter, isMultiSeriesFormula } from 'lib/utils'\n@@ -21,7 +20,7 @@ export function ActionsLineGraph({ inSharedMode = false, showPersonsModal = true\n         <LineGraph\n             data-attr=\"trend-line-graph\"\n             type={\n-                filters.insight === InsightType.LIFECYCLE || filters.display === ACTIONS_BAR_CHART\n+                filters.insight === InsightType.LIFECYCLE || filters.display === ChartDisplayType.ActionsBar\n                     ? GraphType.Bar\n                     : GraphType.Line\n             }\ndiff --git a/posthog/constants.py b/posthog/constants.py\nindex 433c3e2dc..99b09b72c 100644\n--- a/posthog/constants.py\n+++ b/posthog/constants.py\n@@ -39,7 +39,8 @@ TRENDS_BAR = \"ActionsBar\"\n TRENDS_BAR_VALUE = \"ActionsBarValue\"\n TRENDS_WORLD_MAP = \"WorldMap\"\n \n-TRENDS_DISPLAY_BY_VALUE = [TRENDS_TABLE, TRENDS_PIE, TRENDS_BAR_VALUE, TRENDS_WORLD_MAP]\n+# Sync with frontend NON_TIME_SERIES_DISPLAY_TYPES\n+NON_TIME_SERIES_DISPLAY_TYPES = [TRENDS_TABLE, TRENDS_PIE, TRENDS_BAR_VALUE, TRENDS_WORLD_MAP]\n \n # CONSTANTS\n INSIGHT_TRENDS = \"TRENDS\"\n"
  },
  "8929ea6feb4523c83316eb68483ca87098b096ec": {
    "hash": "8929ea6feb4523c83316eb68483ca87098b096ec",
    "message": "fix: cloud login testing bug (#11189)\n    \n    * fix: cloud login testing bug\n    \n    * remove unused css class\n    \n    * remove more unused classes",
    "diff": "commit 8929ea6feb4523c83316eb68483ca87098b096ec\nAuthor: Li Yi Yu <li@posthog.com>\nDate:   Mon Aug 8 14:01:27 2022 -0400\n\n    fix: cloud login testing bug (#11189)\n    \n    * fix: cloud login testing bug\n    \n    * remove unused css class\n    \n    * remove more unused classes\n\ndiff --git a/frontend/src/scenes/authentication/Login.tsx b/frontend/src/scenes/authentication/Login.tsx\nindex 26e50a539..98449c04f 100644\n--- a/frontend/src/scenes/authentication/Login.tsx\n+++ b/frontend/src/scenes/authentication/Login.tsx\n@@ -167,14 +167,13 @@ export function Login(): JSX.Element {\n                                 </Form.Item>\n                             )}\n                         </Form>\n-                        <div className={clsx('helper-links', { cloud: preflight?.cloud })}>\n-                            {preflight?.cloud ||\n-                                (true && (\n-                                    <Link to=\"/signup\" data-attr=\"signup\" className=\"lhs\">\n-                                        Create an account\n-                                    </Link>\n-                                ))}\n-                            <Link to=\"/reset\" data-attr=\"forgot-password\" className=\"rhs\">\n+                        <div className=\"helper-links\">\n+                            {preflight?.cloud && (\n+                                <Link to=\"/signup\" data-attr=\"signup\">\n+                                    Create an account\n+                                </Link>\n+                            )}\n+                            <Link to=\"/reset\" data-attr=\"forgot-password\">\n                                 Forgot your password?\n                             </Link>\n                         </div>\n"
  },
  "54623f2561d4ba780608db28ecbfea18ffaf44b2": {
    "hash": "54623f2561d4ba780608db28ecbfea18ffaf44b2",
    "message": "fix: BoldNumber can stand insight result not being present (#11235)",
    "diff": "commit 54623f2561d4ba780608db28ecbfea18ffaf44b2\nAuthor: Paul D'Ambra <paul@posthog.com>\nDate:   Wed Aug 10 20:42:22 2022 +0100\n\n    fix: BoldNumber can stand insight result not being present (#11235)\n\ndiff --git a/frontend/src/scenes/insights/views/BoldNumber/BoldNumber.tsx b/frontend/src/scenes/insights/views/BoldNumber/BoldNumber.tsx\nindex 337b7e236..fdee2dfe2 100644\n--- a/frontend/src/scenes/insights/views/BoldNumber/BoldNumber.tsx\n+++ b/frontend/src/scenes/insights/views/BoldNumber/BoldNumber.tsx\n@@ -14,6 +14,7 @@ import { groupsModel } from '~/models/groupsModel'\n import { toLocalFilters } from 'scenes/insights/filters/ActionFilter/entityFilterLogic'\n import { InsightTooltip } from 'scenes/insights/InsightTooltip/InsightTooltip'\n import { personsModalLogic } from 'scenes/trends/personsModalLogic'\n+import { InsightEmptyState } from 'scenes/insights/EmptyStates'\n \n /** The effect of the value's padding is reduced by the offset. */\n const BOLD_NUMBER_TOOLTIP_OFFSET_PX = -16\n@@ -35,7 +36,7 @@ function useBoldNumberTooltip({\n         const tooltipEl = ensureTooltipElement()\n         tooltipEl.style.opacity = isTooltipShown ? '1' : '0'\n \n-        const seriesResult = insight.result[0]\n+        const seriesResult = insight.result?.[0]\n \n         ReactDOM.render(\n             <InsightTooltip\n@@ -47,8 +48,8 @@ function useBoldNumberTooltip({\n                         dataIndex: 1,\n                         datasetIndex: 1,\n                         id: 1,\n-                        label: seriesResult.label,\n-                        count: seriesResult.aggregated_value,\n+                        label: seriesResult?.label,\n+                        count: seriesResult?.aggregated_value,\n                     },\n                 ]}\n                 showHeader={false}\n@@ -80,9 +81,9 @@ export function BoldNumber({ showPersonsModal = true }: ChartParams): JSX.Elemen\n     const [isTooltipShown, setIsTooltipShown] = useState(false)\n     const valueRef = useBoldNumberTooltip({ showPersonsModal, isTooltipShown })\n \n-    const resultSeries = insight.result[0] as TrendResult\n+    const resultSeries = insight?.result?.[0] as TrendResult\n \n-    return (\n+    return resultSeries ? (\n         <div className=\"BoldNumber\">\n             <Textfit mode=\"single\" min={32} max={160}>\n                 <div\n@@ -110,5 +111,7 @@ export function BoldNumber({ showPersonsModal = true }: ChartParams): JSX.Elemen\n                 </div>\n             </Textfit>\n         </div>\n+    ) : (\n+        <InsightEmptyState />\n     )\n }\n"
  },
  "d14549113edc65c6efbdbf817946231c7fde4e4d": {
    "hash": "d14549113edc65c6efbdbf817946231c7fde4e4d",
    "message": "feat: Swap to LemonInputs for searching (#11179)",
    "diff": "commit d14549113edc65c6efbdbf817946231c7fde4e4d\nAuthor: Ben White <ben@benjackwhite.co.uk>\nDate:   Wed Aug 10 13:00:08 2022 +0200\n\n    feat: Swap to LemonInputs for searching (#11179)\n\ndiff --git a/cypress/e2e/person.js b/cypress/e2e/person.js\nindex ea8bd7e50..85366444f 100644\n--- a/cypress/e2e/person.js\n+++ b/cypress/e2e/person.js\n@@ -4,7 +4,7 @@ describe('Person Visualization Check', () => {\n         cy.location('pathname').should('eq', '/persons')\n         cy.get('.ant-spin-spinning').should('not.exist') // Wait until initial table load to be able to use the search\n         cy.get('[data-attr=persons-search]').type('deb').should('have.value', 'deb')\n-        cy.get('.ant-input-search-button').click()\n+        cy.contains('deborah.fernandez@gmail.com').should('not.exist')\n         cy.contains('deborah.fernandez@gmail.com').click()\n         cy.wait(1000)\n     })\n@@ -27,7 +27,7 @@ describe('Merge person', () => {\n     beforeEach(() => {\n         cy.clickNavMenu('persons')\n         cy.get('[data-attr=persons-search]').type('deb').should('have.value', 'deb')\n-        cy.get('.ant-input-search-button').click()\n+        cy.contains('deborah.fernandez@gmail.com').should('not.exist')\n         cy.contains('deborah.fernandez@gmail.com').click()\n         cy.wait(1000)\n     })\ndiff --git a/frontend/src/lib/components/AddToDashboard/AddToDashboardModal.tsx b/frontend/src/lib/components/AddToDashboard/AddToDashboardModal.tsx\nindex ba4becb9d..186c197c3 100644\n--- a/frontend/src/lib/components/AddToDashboard/AddToDashboardModal.tsx\n+++ b/frontend/src/lib/components/AddToDashboard/AddToDashboardModal.tsx\n@@ -5,7 +5,7 @@ import { addToDashboardModalLogic } from 'lib/components/AddToDashboard/addToDas\n import { insightLogic } from 'scenes/insights/insightLogic'\n import { urls } from 'scenes/urls'\n import './AddToDashboard.scss'\n-import { IconMagnifier, IconCottage } from 'lib/components/icons'\n+import { IconCottage } from 'lib/components/icons'\n import { LemonInput } from 'lib/components/LemonInput/LemonInput'\n import { List, ListRowProps, ListRowRenderer } from 'react-virtualized/dist/es/List'\n import { AutoSizer } from 'react-virtualized/dist/es/AutoSizer'\n@@ -125,10 +125,9 @@ export function AddToDashboardModal({\n                 <h5>Add to dashboard</h5>\n                 <LemonInput\n                     data-attr=\"dashboard-searchfield\"\n+                    type=\"search\"\n                     placeholder={`Search for dashboards...`}\n                     value={searchQuery}\n-                    className={searchQuery && 'LemonInput--with-input'}\n-                    icon={<IconMagnifier />}\n                     onChange={(newValue) => setSearchQuery(newValue)}\n                 />\n                 <div className={'existing-links-info'}>\ndiff --git a/frontend/src/lib/components/LemonInput/LemonInput.scss b/frontend/src/lib/components/LemonInput/LemonInput.scss\nindex f9e54172f..8007c0d35 100644\n--- a/frontend/src/lib/components/LemonInput/LemonInput.scss\n+++ b/frontend/src/lib/components/LemonInput/LemonInput.scss\n@@ -17,25 +17,27 @@\n             opacity: var(--opacity-disabled);\n             cursor: not-allowed;\n         }\n+\n+        &:placeholder-shown {\n+            font-style: italic;\n+        }\n+    }\n+\n+    &.LemonRow {\n+        padding: 0.25rem 0.5rem;\n     }\n }\n \n .LemonRow__icon:first-child {\n     .LemonInput & {\n-        color: var(--muted);\n-    }\n-    .LemonInput.LemonInput--with-input & {\n-        color: var(--primary);\n+        .LemonIcon {\n+            color: var(--muted-alt);\n+        }\n     }\n-}\n-\n-.LemonInput--embedded {\n-    color: var(--default);\n-    font-weight: 400;\n-    border: none !important;\n-\n-    .LemonRow__icon {\n-        color: var(--muted-alt);\n+    .LemonInput.LemonInput--hasContent & {\n+        .LemonIcon {\n+            color: var(--primary);\n+        }\n     }\n }\n \ndiff --git a/frontend/src/lib/components/LemonInput/LemonInput.stories.tsx b/frontend/src/lib/components/LemonInput/LemonInput.stories.tsx\nindex 664294f4f..04d8ac8cb 100644\n--- a/frontend/src/lib/components/LemonInput/LemonInput.stories.tsx\n+++ b/frontend/src/lib/components/LemonInput/LemonInput.stories.tsx\n@@ -2,7 +2,7 @@ import React, { useState } from 'react'\n import { ComponentMeta, ComponentStory } from '@storybook/react'\n \n import { LemonInput } from './LemonInput'\n-import { IconArrowDropDown, IconMagnifier } from 'lib/components/icons'\n+import { IconArrowDropDown, IconCalendar } from 'lib/components/icons'\n import { LemonButtonWithPopup } from 'lib/components/LemonButton'\n \n export default {\n@@ -21,11 +21,12 @@ const Template: ComponentStory<typeof LemonInput> = (props) => {\n \n export const Basic = Template.bind({})\n \n-export const WithSearchIconAndSideAction = Template.bind({})\n-WithSearchIconAndSideAction.args = {\n-    icon: <IconMagnifier />,\n+export const WithIconAndSideAction = Template.bind({})\n+WithIconAndSideAction.args = {\n+    icon: <IconCalendar />,\n     sideIcon: (\n         <LemonButtonWithPopup\n+            noPadding\n             popup={{\n                 overlay: 'Surprise! 😱',\n             }}\n@@ -35,12 +36,12 @@ WithSearchIconAndSideAction.args = {\n     ),\n }\n \n+export const Search = Template.bind({})\n+Search.args = { type: 'search', placeholder: 'Search your soul' }\n+\n export const Disabled = Template.bind({})\n Disabled.args = { disabled: true }\n \n-export const Embedded = Template.bind({})\n-Embedded.args = { embedded: true }\n-\n export const Clearable = Template.bind({})\n Clearable.args = { allowClear: true }\n \ndiff --git a/frontend/src/lib/components/LemonInput/LemonInput.tsx b/frontend/src/lib/components/LemonInput/LemonInput.tsx\nindex 045a86a1f..02510f947 100644\n--- a/frontend/src/lib/components/LemonInput/LemonInput.tsx\n+++ b/frontend/src/lib/components/LemonInput/LemonInput.tsx\n@@ -3,7 +3,7 @@ import React, { useRef, useState } from 'react'\n import { LemonRow, LemonRowProps } from 'lib/components/LemonRow'\n import clsx from 'clsx'\n import { LemonButton } from 'lib/components/LemonButton'\n-import { IconClose } from 'lib/components/icons'\n+import { IconClose, IconMagnifier } from 'lib/components/icons'\n \n interface LemonInputPropsBase\n     extends Omit<\n@@ -13,8 +13,6 @@ interface LemonInputPropsBase\n     ref?: React.Ref<HTMLInputElement>\n     id?: string\n     placeholder?: string\n-    /** An embedded input has no border around it and no background. This way it blends better into other components. */\n-    embedded?: boolean\n     /** Whether there should be a clear icon to the right allowing you to reset the input. The `suffix` prop will be ignored if clearing is allowed. */\n     allowClear?: boolean\n     /** Icon to prefix input field */\n@@ -28,7 +26,7 @@ interface LemonInputPropsBase\n }\n \n interface LemonInputPropsText extends LemonInputPropsBase {\n-    type?: 'text' | 'email'\n+    type?: 'text' | 'email' | 'search'\n     value?: string\n     defaultValue?: string\n     onChange?: (newValue: string) => void\n@@ -53,13 +51,13 @@ export const LemonInput = React.forwardRef<HTMLInputElement, LemonInputProps>(fu\n         onFocus,\n         onBlur,\n         onPressEnter,\n-        embedded = false,\n-        allowClear = false,\n-        fullWidth = true,\n+        allowClear,\n+        fullWidth,\n         icon,\n         sideIcon,\n         type,\n         value,\n+        width,\n         ...textProps\n     },\n     ref\n@@ -75,35 +73,44 @@ export const LemonInput = React.forwardRef<HTMLInputElement, LemonInputProps>(fu\n         setFocused(true)\n     }\n \n+    // Type=search has some special overrides\n+    allowClear = allowClear ?? (type === 'search' ? true : false)\n+    fullWidth = fullWidth ?? (type === 'search' ? false : true)\n+    icon = icon ?? (type === 'search' ? <IconMagnifier /> : undefined)\n+    width = width ?? (type === 'search' && !fullWidth ? 240 : undefined)\n+\n     const rowProps: LemonRowProps<'span'> = {\n         tag: 'span',\n         className: clsx(\n             'LemonInput',\n             !textProps.disabled && focused && 'LemonInput--focused',\n-            embedded && 'LemonInput--embedded',\n+            value && 'LemonInput--hasContent',\n             className\n         ),\n         disabled: textProps.disabled,\n         fullWidth,\n         icon,\n-        sideIcon: allowClear ? (\n-            <LemonButton\n-                type=\"tertiary\"\n-                icon={<IconClose style={{ fontSize: '1rem' }} />}\n-                tooltip=\"Clear input\"\n-                onClick={(e) => {\n-                    e.stopPropagation()\n-                    if (type === 'number') {\n-                        onChange?.(0)\n-                    } else {\n-                        onChange?.('')\n-                    }\n-                    focus()\n-                }}\n-            />\n-        ) : (\n-            sideIcon\n-        ),\n+        sideIcon:\n+            allowClear && value ? (\n+                <LemonButton\n+                    size=\"small\"\n+                    noPadding\n+                    icon={<IconClose />}\n+                    status=\"muted-alt\"\n+                    tooltip=\"Clear input\"\n+                    onClick={(e) => {\n+                        e.stopPropagation()\n+                        if (type === 'number') {\n+                            onChange?.(0)\n+                        } else {\n+                            onChange?.('')\n+                        }\n+                        focus()\n+                    }}\n+                />\n+            ) : (\n+                sideIcon\n+            ),\n         onKeyDown: (event) => {\n             if (onPressEnter && event.key === 'Enter') {\n                 if (type === 'number') {\n@@ -116,7 +123,10 @@ export const LemonInput = React.forwardRef<HTMLInputElement, LemonInputProps>(fu\n         onClick: () => {\n             focus()\n         },\n-        outlined: !embedded,\n+        outlined: true,\n+        style: {\n+            width: width,\n+        },\n     }\n     const props: React.InputHTMLAttributes<HTMLInputElement> = {\n         ...textProps,\ndiff --git a/frontend/src/lib/components/PropertiesTable.tsx b/frontend/src/lib/components/PropertiesTable.tsx\nindex 24d8f4dab..d5157cced 100644\n--- a/frontend/src/lib/components/PropertiesTable.tsx\n+++ b/frontend/src/lib/components/PropertiesTable.tsx\n@@ -11,6 +11,7 @@ import { useValues } from 'kea'\n import { propertyDefinitionsModel } from '~/models/propertyDefinitionsModel'\n import { LemonButton } from './LemonButton'\n import { NewPropertyComponent } from 'scenes/persons/NewPropertyComponent'\n+import { LemonInput } from '@posthog/lemon-ui'\n \n type HandledType = 'string' | 'number' | 'bigint' | 'boolean' | 'undefined' | 'null'\n type Type = HandledType | 'symbol' | 'object' | 'function'\n@@ -275,17 +276,14 @@ export function PropertiesTable({\n             <>\n                 {searchable && (\n                     <div className=\"flex justify-between gap-4\">\n-                        <Input.Search\n+                        <LemonInput\n+                            type=\"search\"\n                             placeholder=\"Search for property keys and values\"\n-                            className=\"mb-4\"\n-                            allowClear\n-                            enterButton\n-                            style={{ maxWidth: 400, width: 'initial', flexGrow: 1 }}\n-                            value={searchTerm}\n-                            onChange={(e) => {\n-                                setSearchTerm(e.target.value)\n-                            }}\n+                            autoFocus\n+                            value={searchTerm || ''}\n+                            onChange={setSearchTerm}\n                         />\n+\n                         {onEdit && <NewPropertyComponent editProperty={onEdit} />}\n                     </div>\n                 )}\ndiff --git a/frontend/src/lib/components/TaxonomicFilter/TaxonomicFilter.tsx b/frontend/src/lib/components/TaxonomicFilter/TaxonomicFilter.tsx\nindex 8b3a7cd90..668b19c64 100644\n--- a/frontend/src/lib/components/TaxonomicFilter/TaxonomicFilter.tsx\n+++ b/frontend/src/lib/components/TaxonomicFilter/TaxonomicFilter.tsx\n@@ -5,7 +5,7 @@ import { InfiniteSelectResults } from './InfiniteSelectResults'\n import { taxonomicFilterLogic } from './taxonomicFilterLogic'\n import { TaxonomicFilterLogicProps, TaxonomicFilterProps } from 'lib/components/TaxonomicFilter/types'\n import { LemonInput } from 'lib/components/LemonInput/LemonInput'\n-import { IconKeyboard, IconMagnifier } from '../icons'\n+import { IconKeyboard } from '../icons'\n import { Tooltip } from '../Tooltip'\n import clsx from 'clsx'\n \n@@ -74,10 +74,10 @@ export function TaxonomicFilter({\n                 <div style={{ position: 'relative' }}>\n                     <LemonInput\n                         data-attr=\"taxonomic-filter-searchfield\"\n-                        placeholder={`Search ${searchPlaceholder}`}\n+                        type=\"search\"\n+                        fullWidth\n+                        placeholder={`Search ${searchPlaceholder} foo`}\n                         value={searchQuery}\n-                        className={searchQuery && 'LemonInput--with-input'}\n-                        icon={<IconMagnifier />}\n                         sideIcon={\n                             <Tooltip\n                                 title={\ndiff --git a/frontend/src/lib/components/UniversalSearch/UniversalSearchPopup.tsx b/frontend/src/lib/components/UniversalSearch/UniversalSearchPopup.tsx\nindex 8474ce99e..4b603e516 100644\n--- a/frontend/src/lib/components/UniversalSearch/UniversalSearchPopup.tsx\n+++ b/frontend/src/lib/components/UniversalSearch/UniversalSearchPopup.tsx\n@@ -21,7 +21,6 @@ import { PluginSelectionType, pluginsLogic } from 'scenes/plugins/pluginsLogic'\n import clsx from 'clsx'\n import { navigationLogic } from '~/layout/navigation/navigationLogic'\n import { useMountedLogic, useValues } from 'kea'\n-import { IconMagnifier } from '../icons'\n import { useEventListener } from 'lib/hooks/useEventListener'\n import { taxonomicFilterLogic } from '../TaxonomicFilter/taxonomicFilterLogic'\n import { TaxonomicFilter } from '../TaxonomicFilter/TaxonomicFilter'\n@@ -194,9 +193,9 @@ export function UniversalSearchPopup({\n                     {!visible && (\n                         <LemonInput\n                             data-attr=\"universal-search-field\"\n+                            type=\"search\"\n                             placeholder={'Search...'}\n                             value={searchQuery}\n-                            icon={<IconMagnifier />}\n                         />\n                     )}\n                 </div>\ndiff --git a/frontend/src/scenes/actions/ActionsTable.tsx b/frontend/src/scenes/actions/ActionsTable.tsx\nindex 1e80a4888..0a4873eb7 100644\n--- a/frontend/src/scenes/actions/ActionsTable.tsx\n+++ b/frontend/src/scenes/actions/ActionsTable.tsx\n@@ -1,7 +1,7 @@\n import React, { useState } from 'react'\n import './Actions.scss'\n import { Link } from 'lib/components/Link'\n-import { Input, Radio } from 'antd'\n+import { Radio } from 'antd'\n import { CheckOutlined } from '@ant-design/icons'\n import { deleteWithUndo, stripHTTP } from 'lib/utils'\n import { useActions, useValues } from 'kea'\n@@ -24,6 +24,7 @@ import { combineUrl } from 'kea-router'\n import { ObjectTags } from 'lib/components/ObjectTags/ObjectTags'\n import { DataManagementPageTabs, DataManagementTab } from 'scenes/data-management/DataManagementPageTabs'\n import { PageHeader } from 'lib/components/PageHeader'\n+import { LemonInput } from '@posthog/lemon-ui'\n \n const searchActions = (sources: ActionType[], search: string): ActionType[] => {\n     return new Fuse(sources, {\n@@ -210,15 +211,9 @@ export function ActionsTable(): JSX.Element {\n                 tabbedPage\n             />\n             <DataManagementPageTabs tab={DataManagementTab.Actions} />\n-            <Input.Search\n-                placeholder=\"Search for actions\"\n-                allowClear\n-                enterButton\n-                style={{ maxWidth: 600, width: 'initial', flexGrow: 1, marginRight: 12 }}\n-                onChange={(e) => {\n-                    setSearchTerm(e.target.value)\n-                }}\n-            />\n+\n+            <LemonInput type=\"search\" placeholder=\"Search for actions\" onChange={setSearchTerm} value={searchTerm} />\n+\n             <Radio.Group buttonStyle=\"solid\" value={filterByMe} onChange={(e) => setFilterByMe(e.target.value)}>\n                 <Radio.Button value={false}>All actions</Radio.Button>\n                 <Radio.Button value={true}>My actions</Radio.Button>\ndiff --git a/frontend/src/scenes/cohorts/Cohorts.tsx b/frontend/src/scenes/cohorts/Cohorts.tsx\nindex 36483ef76..358a280f9 100644\n--- a/frontend/src/scenes/cohorts/Cohorts.tsx\n+++ b/frontend/src/scenes/cohorts/Cohorts.tsx\n@@ -1,5 +1,4 @@\n import React, { useState } from 'react'\n-import { Input } from 'antd'\n import { InfoCircleOutlined } from '@ant-design/icons'\n import { cohortsModel } from '../../models/cohortsModel'\n import { useValues, useActions } from 'kea'\n@@ -20,6 +19,7 @@ import { More } from 'lib/components/LemonButton/More'\n import { LemonButton } from 'lib/components/LemonButton'\n import { LemonDivider } from 'lib/components/LemonDivider'\n import { combineUrl, router } from 'kea-router'\n+import { LemonInput } from '@posthog/lemon-ui'\n \n const searchCohorts = (sources: CohortType[], search: string): CohortType[] => {\n     return new Fuse(sources, {\n@@ -35,7 +35,7 @@ export function Cohorts(): JSX.Element {\n     const { deleteCohort, exportCohortPersons } = useActions(cohortsModel)\n     const { hasAvailableFeature } = useValues(userLogic)\n     const { searchParams } = useValues(router)\n-    const [searchTerm, setSearchTerm] = useState<string | false>(false)\n+    const [searchTerm, setSearchTerm] = useState<string>('')\n \n     const columns: LemonTableColumns<CohortType> = [\n         {\n@@ -145,36 +145,30 @@ export function Cohorts(): JSX.Element {\n                 title=\"Cohorts\"\n                 caption=\"Create lists of users who have something in common to use in analytics or feature flags.\"\n             />\n-            <div>\n-                <Input.Search\n-                    allowClear\n-                    enterButton\n+            <div className=\"flex justify-between items-center mb-4 gap-2\">\n+                <LemonInput\n+                    type=\"search\"\n                     placeholder=\"Search for cohorts\"\n-                    style={{ maxWidth: 400, width: 'initial', flexGrow: 1 }}\n-                    onChange={(e) => {\n-                        setSearchTerm(e.target.value)\n-                    }}\n-                />\n-                <div className=\"mb-4 float-right\">\n-                    <LemonButton\n-                        type=\"primary\"\n-                        data-attr=\"create-cohort\"\n-                        onClick={() => router.actions.push(urls.cohort('new'))}\n-                    >\n-                        New Cohort\n-                    </LemonButton>\n-                </div>\n-\n-                <LemonTable\n-                    columns={columns}\n-                    loading={cohortsLoading}\n-                    rowKey=\"id\"\n-                    pagination={{ pageSize: 100 }}\n-                    dataSource={searchTerm ? searchCohorts(cohorts, searchTerm) : cohorts}\n-                    nouns={['cohort', 'cohorts']}\n-                    data-tooltip=\"cohorts-table\"\n+                    onChange={setSearchTerm}\n+                    value={searchTerm}\n                 />\n+                <LemonButton\n+                    type=\"primary\"\n+                    data-attr=\"create-cohort\"\n+                    onClick={() => router.actions.push(urls.cohort('new'))}\n+                >\n+                    New Cohort\n+                </LemonButton>\n             </div>\n+            <LemonTable\n+                columns={columns}\n+                loading={cohortsLoading}\n+                rowKey=\"id\"\n+                pagination={{ pageSize: 100 }}\n+                dataSource={searchTerm ? searchCohorts(cohorts, searchTerm) : cohorts}\n+                nouns={['cohort', 'cohorts']}\n+                data-tooltip=\"cohorts-table\"\n+            />\n         </div>\n     )\n }\ndiff --git a/frontend/src/scenes/dashboard/Dashboards.tsx b/frontend/src/scenes/dashboard/Dashboards.tsx\nindex 008477406..370ac1911 100644\n--- a/frontend/src/scenes/dashboard/Dashboards.tsx\n+++ b/frontend/src/scenes/dashboard/Dashboards.tsx\n@@ -1,7 +1,7 @@\n import React from 'react'\n import { useActions, useValues } from 'kea'\n import { dashboardsModel } from '~/models/dashboardsModel'\n-import { Card, Col, Input, Row, Tabs } from 'antd'\n+import { Card, Tabs } from 'antd'\n import { dashboardsLogic, DashboardsTab } from 'scenes/dashboard/dashboardsLogic'\n import { Link } from 'lib/components/Link'\n import { AppstoreAddOutlined, PushpinFilled, PushpinOutlined, ShareAltOutlined } from '@ant-design/icons'\n@@ -26,6 +26,7 @@ import { teamLogic } from 'scenes/teamLogic'\n import { newDashboardLogic } from 'scenes/dashboard/newDashboardLogic'\n import { DashboardPrivilegeLevel } from 'lib/constants'\n import { inAppPromptLogic } from 'lib/logic/inAppPrompt/inAppPromptLogic'\n+import { LemonInput } from '@posthog/lemon-ui'\n \n export const scene: SceneExport = {\n     component: Dashboards,\n@@ -210,17 +211,14 @@ export function Dashboards(): JSX.Element {\n                 <Tabs.TabPane tab=\"Pinned\" key={DashboardsTab.Pinned} />\n                 <Tabs.TabPane tab=\"Shared\" key={DashboardsTab.Shared} />\n             </Tabs>\n-            <div>\n-                <Input.Search\n-                    allowClear\n-                    enterButton\n+            <div className=\"flex\">\n+                <LemonInput\n+                    type=\"search\"\n                     placeholder=\"Search for dashboards\"\n-                    style={{ width: 240 }}\n+                    onChange={setSearchTerm}\n                     value={searchTerm}\n-                    onChange={(e) => {\n-                        setSearchTerm(e.target.value)\n-                    }}\n                 />\n+                <div />\n             </div>\n             <LemonDivider large />\n             {dashboardsLoading || dashboards.length > 0 || searchTerm || currentTab !== DashboardsTab.All ? (\n@@ -262,42 +260,38 @@ export function Dashboards(): JSX.Element {\n             ) : (\n                 <div className=\"mt-4\">\n                     <p>Create your first dashboard:</p>\n-                    <Row gutter={[16, 16]}>\n-                        <Col xs={24} xl={6}>\n-                            <Card\n-                                title=\"Empty\"\n-                                size=\"small\"\n-                                style={{ cursor: 'pointer' }}\n-                                onClick={() =>\n-                                    addDashboard({\n-                                        name: 'New Dashboard',\n-                                        useTemplate: '',\n-                                    })\n-                                }\n-                            >\n-                                <div style={{ textAlign: 'center', fontSize: 40 }}>\n-                                    <AppstoreAddOutlined />\n-                                </div>\n-                            </Card>\n-                        </Col>\n-                        <Col xs={24} xl={6}>\n-                            <Card\n-                                title=\"App Default\"\n-                                size=\"small\"\n-                                style={{ cursor: 'pointer' }}\n-                                onClick={() =>\n-                                    addDashboard({\n-                                        name: 'Web App Dashboard',\n-                                        useTemplate: 'DEFAULT_APP',\n-                                    })\n-                                }\n-                            >\n-                                <div style={{ textAlign: 'center', fontSize: 40 }}>\n-                                    <AppstoreAddOutlined />\n-                                </div>\n-                            </Card>\n-                        </Col>\n-                    </Row>\n+                    <div className=\"flex justify-center items-center gap-4\">\n+                        <Card\n+                            title=\"Empty\"\n+                            size=\"small\"\n+                            style={{ width: 200, cursor: 'pointer' }}\n+                            onClick={() =>\n+                                addDashboard({\n+                                    name: 'New Dashboard',\n+                                    useTemplate: '',\n+                                })\n+                            }\n+                        >\n+                            <div style={{ textAlign: 'center', fontSize: 40 }}>\n+                                <AppstoreAddOutlined />\n+                            </div>\n+                        </Card>\n+                        <Card\n+                            title=\"App Default\"\n+                            size=\"small\"\n+                            style={{ width: 200, cursor: 'pointer' }}\n+                            onClick={() =>\n+                                addDashboard({\n+                                    name: 'Web App Dashboard',\n+                                    useTemplate: 'DEFAULT_APP',\n+                                })\n+                            }\n+                        >\n+                            <div style={{ textAlign: 'center', fontSize: 40 }}>\n+                                <AppstoreAddOutlined />\n+                            </div>\n+                        </Card>\n+                    </div>\n                 </div>\n             )}\n         </div>\ndiff --git a/frontend/src/scenes/data-management/event-properties/EventPropertyDefinitionsTable.tsx b/frontend/src/scenes/data-management/event-properties/EventPropertyDefinitionsTable.tsx\nindex ed4cd1f7d..2cecce590 100644\n--- a/frontend/src/scenes/data-management/event-properties/EventPropertyDefinitionsTable.tsx\n+++ b/frontend/src/scenes/data-management/event-properties/EventPropertyDefinitionsTable.tsx\n@@ -12,11 +12,12 @@ import {\n     EVENT_PROPERTY_DEFINITIONS_PER_PAGE,\n     eventPropertyDefinitionsTableLogic,\n } from 'scenes/data-management/event-properties/eventPropertyDefinitionsTableLogic'\n-import { Alert, Input } from 'antd'\n import { DataManagementPageTabs, DataManagementTab } from 'scenes/data-management/DataManagementPageTabs'\n import { UsageDisabledWarning } from 'scenes/events/UsageDisabledWarning'\n import { preflightLogic } from 'scenes/PreflightCheck/preflightLogic'\n import { PageHeader } from 'lib/components/PageHeader'\n+import { LemonInput } from '@posthog/lemon-ui'\n+import { AlertMessage } from 'lib/components/AlertMessage'\n \n export const scene: SceneExport = {\n     component: EventPropertyDefinitionsTable,\n@@ -91,35 +92,23 @@ export function EventPropertyDefinitionsTable(): JSX.Element {\n                 <UsageDisabledWarning tab=\"Event Property Definitions\" />\n             ) : (\n                 eventPropertyDefinitions.results?.[0]?.query_usage_30_day === null && (\n-                    <Alert\n-                        type=\"warning\"\n-                        message=\"We haven't been able to get usage and volume data yet. Please check back later.\"\n-                        style={{ marginBottom: '1rem' }}\n-                    />\n+                    <div className=\"mb-4\">\n+                        <AlertMessage type=\"warning\">\n+                            We haven't been able to get usage and volume data yet. Please check back later.\n+                        </AlertMessage>\n+                    </div>\n                 )\n             )}\n-            <div\n-                style={{\n-                    display: 'flex',\n-                    flexWrap: 'wrap',\n-                    gap: '0.5rem',\n-                    flexDirection: 'row',\n-                    alignItems: 'center',\n-                    width: '100%',\n-                    marginBottom: '1rem',\n-                }}\n-            >\n-                <Input.Search\n+\n+            <div className=\"mb-4\">\n+                <LemonInput\n+                    type=\"search\"\n                     placeholder=\"Search for properties\"\n-                    allowClear\n-                    enterButton\n+                    onChange={(e) => setFilters({ property: e || '' })}\n                     value={filters.property}\n-                    style={{ maxWidth: 600, width: 'initial' }}\n-                    onChange={(e) => {\n-                        setFilters({ property: e.target.value || '' })\n-                    }}\n                 />\n             </div>\n+\n             <LemonTable\n                 columns={columns}\n                 className=\"event-properties-definition-table\"\ndiff --git a/frontend/src/scenes/data-management/events/EventDefinitionsTable.tsx b/frontend/src/scenes/data-management/events/EventDefinitionsTable.tsx\nindex 84099ee0b..7e6fa829c 100644\n--- a/frontend/src/scenes/data-management/events/EventDefinitionsTable.tsx\n+++ b/frontend/src/scenes/data-management/events/EventDefinitionsTable.tsx\n@@ -14,7 +14,7 @@ import { organizationLogic } from 'scenes/organizationLogic'\n import { ActionHeader, EventDefinitionHeader } from 'scenes/data-management/events/DefinitionHeader'\n import { humanFriendlyNumber } from 'lib/utils'\n import { EventDefinitionProperties } from 'scenes/data-management/events/EventDefinitionProperties'\n-import { Alert, Col, Input, Row } from 'antd'\n+import { Alert, Row } from 'antd'\n import { DataManagementPageTabs, DataManagementTab } from 'scenes/data-management/DataManagementPageTabs'\n import { UsageDisabledWarning } from 'scenes/events/UsageDisabledWarning'\n import { preflightLogic } from 'scenes/PreflightCheck/preflightLogic'\n@@ -25,7 +25,7 @@ import { ActionEvent, IconWebhook, UnverifiedEvent } from 'lib/components/icons'\n import { NewActionButton } from 'scenes/actions/NewActionButton'\n import { TZLabel } from 'lib/components/TimezoneAware'\n import { PageHeader } from 'lib/components/PageHeader'\n-import { LemonSelect, LemonSelectOptions } from '@posthog/lemon-ui'\n+import { LemonInput, LemonSelect, LemonSelectOptions } from '@posthog/lemon-ui'\n \n const eventTypeOptions: LemonSelectOptions = {\n     [CombinedEventType.All]: {\n@@ -225,46 +225,31 @@ export function EventDefinitionsTable(): JSX.Element {\n             {preflight && !preflight?.is_event_property_usage_enabled && (\n                 <UsageDisabledWarning tab=\"Event Definitions\" />\n             )}\n-            <Row\n-                justify=\"space-between\"\n-                style={{\n-                    paddingBottom: '1rem',\n-                    marginBottom: '1rem',\n-                    borderBottom: '1px solid var(--border)',\n-                    gap: '0.75rem',\n-                }}\n-            >\n-                <Col>\n-                    <Input.Search\n-                        placeholder=\"Search for events\"\n-                        allowClear\n-                        enterButton\n-                        value={filters.event}\n-                        style={{ maxWidth: 600, width: 'initial' }}\n-                        onChange={(e) => {\n-                            setFilters({ event: e.target.value || '' })\n-                        }}\n-                    />\n-                </Col>\n+\n+            <div className=\"flex justify-between items-center gap-2 mb-4\">\n+                <LemonInput\n+                    type=\"search\"\n+                    placeholder=\"Search for events\"\n+                    onChange={(v) => setFilters({ event: v || '' })}\n+                    value={filters.event}\n+                />\n                 {shouldSimplifyActions && (\n-                    <Row style={{ gap: '0.75rem' }}>\n-                        <Col style={{ display: 'flex', gap: '0.75rem', alignItems: 'center' }}>\n-                            Type:\n-                            <LemonSelect\n-                                value={filters.event_type}\n-                                options={eventTypeOptions}\n-                                data-attr=\"event-type-filter\"\n-                                dropdownMatchSelectWidth={false}\n-                                type=\"secondary\"\n-                                onChange={(value) => {\n-                                    setFilters({ event_type: value as CombinedEventType })\n-                                }}\n-                                size=\"small\"\n-                            />\n-                        </Col>\n-                    </Row>\n+                    <div className=\"flex items-center gap-2\">\n+                        <span>Type:</span>\n+                        <LemonSelect\n+                            value={filters.event_type}\n+                            options={eventTypeOptions}\n+                            data-attr=\"event-type-filter\"\n+                            dropdownMatchSelectWidth={false}\n+                            type=\"secondary\"\n+                            onChange={(value) => {\n+                                setFilters({ event_type: value as CombinedEventType })\n+                            }}\n+                            size=\"small\"\n+                        />\n+                    </div>\n                 )}\n-            </Row>\n+            </div>\n             <LemonTable\n                 columns={columns}\n                 className=\"events-definition-table\"\ndiff --git a/frontend/src/scenes/events/EventsTable.tsx b/frontend/src/scenes/events/EventsTable.tsx\nindex 3deae150a..dc7a817e7 100644\n--- a/frontend/src/scenes/events/EventsTable.tsx\n+++ b/frontend/src/scenes/events/EventsTable.tsx\n@@ -421,7 +421,7 @@ export function EventsTable({\n                 {showAutoload || showCustomizeColumns || showExport ? (\n                     <div\n                         className={clsx(\n-                            'flex justify-between pt-4 mb-4',\n+                            'flex justify-between pt-4 mb-4 items-center',\n                             (showEventFilter || showPropertyFilter) && 'border-t'\n                         )}\n                     >\ndiff --git a/frontend/src/scenes/feature-flags/FeatureFlags.tsx b/frontend/src/scenes/feature-flags/FeatureFlags.tsx\nindex e9c590cbe..19b4987bc 100644\n--- a/frontend/src/scenes/feature-flags/FeatureFlags.tsx\n+++ b/frontend/src/scenes/feature-flags/FeatureFlags.tsx\n@@ -1,7 +1,7 @@\n import React from 'react'\n import { useActions, useValues } from 'kea'\n import { featureFlagsLogic, FeatureFlagsTabs } from './featureFlagsLogic'\n-import { Input, Tabs } from 'antd'\n+import { Tabs } from 'antd'\n import { Link } from 'lib/components/Link'\n import { copyToClipboard, deleteWithUndo } from 'lib/utils'\n import { PageHeader } from 'lib/components/PageHeader'\n@@ -21,6 +21,7 @@ import PropertyFiltersDisplay from 'lib/components/PropertyFilters/components/Pr\n import { ActivityLog } from 'lib/components/ActivityLog/ActivityLog'\n import { flagActivityDescriber } from 'scenes/feature-flags/activityDescriptions'\n import { ActivityScope } from 'lib/components/ActivityLog/humanizeActivity'\n+import { LemonInput } from '@posthog/lemon-ui'\n \n export const scene: SceneExport = {\n     component: FeatureFlags,\n@@ -138,16 +139,14 @@ function OverViewTab(): JSX.Element {\n     return (\n         <>\n             <div>\n-                <Input.Search\n-                    placeholder=\"Search for feature flags\"\n-                    allowClear\n-                    enterButton\n-                    style={{ maxWidth: 400, width: 'initial', flexGrow: 1, marginBottom: '1rem' }}\n-                    value={searchTerm}\n-                    onChange={(e) => {\n-                        setSearchTerm(e.target.value)\n-                    }}\n-                />\n+                <div className=\"mb-4\">\n+                    <LemonInput\n+                        type=\"search\"\n+                        placeholder=\"Search for feature flags\"\n+                        onChange={setSearchTerm}\n+                        value={searchTerm}\n+                    />\n+                </div>\n             </div>\n             <LemonTable\n                 dataSource={searchedFeatureFlags}\ndiff --git a/frontend/src/scenes/insights/EditorFilters/InsightTypeSelector.tsx b/frontend/src/scenes/insights/EditorFilters/InsightTypeSelector.tsx\nindex b41603015..f38bde150 100644\n--- a/frontend/src/scenes/insights/EditorFilters/InsightTypeSelector.tsx\n+++ b/frontend/src/scenes/insights/EditorFilters/InsightTypeSelector.tsx\n@@ -1,19 +1,9 @@\n import { useActions } from 'kea'\n import { insightLogic } from 'scenes/insights/insightLogic'\n-import { INSIGHT_TYPES_METADATA } from 'scenes/saved-insights/SavedInsights'\n+import { INSIGHT_TYPE_OPTIONS } from 'scenes/saved-insights/SavedInsights'\n import React from 'react'\n import { EditorFilterProps } from '~/types'\n-import { LemonSelect, LemonSelectOptions } from '@posthog/lemon-ui'\n-\n-const INSIGHT_TYPE_OPTIONS: LemonSelectOptions = Object.entries(INSIGHT_TYPES_METADATA).reduce((acc, [key, meta]) => {\n-    return {\n-        ...acc,\n-        [key]: {\n-            label: meta.name,\n-            icon: meta.icon ? <meta.icon color=\"#747EA2\" noBackground /> : null,\n-        },\n-    }\n-}, {})\n+import { LemonSelect } from '@posthog/lemon-ui'\n \n export function InsightTypeSelector({ value }: EditorFilterProps): JSX.Element {\n     const { setActiveView } = useActions(insightLogic)\ndiff --git a/frontend/src/scenes/insights/EditorFilters/TrendsFormula.tsx b/frontend/src/scenes/insights/EditorFilters/TrendsFormula.tsx\nindex e8a4ab79c..6b66b9757 100644\n--- a/frontend/src/scenes/insights/EditorFilters/TrendsFormula.tsx\n+++ b/frontend/src/scenes/insights/EditorFilters/TrendsFormula.tsx\n@@ -1,82 +1,57 @@\n import React, { useEffect, useState } from 'react'\n-import { EditorFilterProps, FilterType } from '~/types'\n+import { EditorFilterProps } from '~/types'\n import { useActions } from 'kea'\n import { trendsLogic } from 'scenes/trends/trendsLogic'\n import { Tooltip } from 'lib/components/Tooltip'\n-import { CloseButton } from 'lib/components/CloseButton'\n-import { LemonButton } from '@posthog/lemon-ui'\n-import { IconPlusMini } from 'lib/components/icons'\n-import { Input } from 'antd'\n+import { LemonButton, LemonInput } from '@posthog/lemon-ui'\n+import { IconDelete, IconPlusMini } from 'lib/components/icons'\n \n // When updating this regex, remember to update the regex with the same name in mixins/common.py\n const ALLOWED_FORMULA_CHARACTERS = /^[a-zA-Z\\ \\-\\*\\^0-9\\+\\/\\(\\)\\.]+$/\n \n-function Formula({\n-    filters,\n-    onChange,\n-    onFocus,\n-    autoFocus,\n-    allowClear = true,\n-}: {\n-    filters: Partial<FilterType>\n-    onChange: (formula: string) => void\n-    onFocus?: (hasFocus: boolean, localFormula: string) => void\n-    autoFocus?: boolean\n-    allowClear?: boolean\n-}): JSX.Element {\n-    const [value, setValue] = useState(filters.formula)\n-    useEffect(() => {\n-        setValue(filters.formula)\n-    }, [filters.formula])\n-    return (\n-        <div style={{ maxWidth: 300 }}>\n-            <Input.Search\n-                placeholder=\"e.g. (A + B)/(A - B) * 100\"\n-                allowClear={allowClear}\n-                autoFocus={autoFocus}\n-                value={value}\n-                onChange={(e) => {\n-                    let changedValue = e.target.value.toLocaleUpperCase()\n-                    // Only allow typing of allowed characters\n-                    changedValue = changedValue\n-                        .split('')\n-                        .filter((d) => ALLOWED_FORMULA_CHARACTERS.test(d))\n-                        .join('')\n-                    setValue(changedValue)\n-                }}\n-                onFocus={() => onFocus && onFocus(true, value)}\n-                onBlur={() => !filters.formula && onFocus && onFocus(false, value)}\n-                enterButton=\"Apply\"\n-                onSearch={onChange}\n-            />\n-        </div>\n-    )\n-}\n-\n export function TrendsFormula({ filters, insightProps }: EditorFilterProps): JSX.Element {\n     const { setFilters } = useActions(trendsLogic(insightProps))\n     const [isUsingFormulas, setIsUsingFormulas] = useState(!!filters.formula)\n-\n     const formulaEnabled = (filters.events?.length || 0) + (filters.actions?.length || 0) > 0\n+    const [value, setValue] = useState(filters.formula)\n+\n+    useEffect(() => {\n+        setValue(filters.formula)\n+    }, [filters.formula])\n \n     return (\n         <>\n             {isUsingFormulas ? (\n                 <div className=\"flex items-center gap-2\">\n-                    <CloseButton\n+                    <LemonInput\n+                        className=\"flex-1\"\n+                        placeholder=\"e.g. (A + B)/(A - B) * 100\"\n+                        allowClear\n+                        autoFocus\n+                        value={value}\n+                        onChange={(value) => {\n+                            let changedValue = value.toLocaleUpperCase()\n+                            // Only allow typing of allowed characters\n+                            changedValue = changedValue\n+                                .split('')\n+                                .filter((d) => ALLOWED_FORMULA_CHARACTERS.test(d))\n+                                .join('')\n+                            setValue(changedValue)\n+                        }}\n+                        onBlur={() => setFilters({ formula: value })}\n+                        onPressEnter={() => setFilters({ formula: value })}\n+                    />\n+\n+                    <LemonButton\n+                        className=\"shrink-0\"\n+                        icon={<IconDelete />}\n+                        size=\"small\"\n+                        status=\"primary-alt\"\n                         onClick={() => {\n                             setIsUsingFormulas(false)\n                             setFilters({ formula: undefined })\n                         }}\n                     />\n-                    <Formula\n-                        filters={filters}\n-                        onChange={(formula: string): void => {\n-                            setFilters({ formula })\n-                        }}\n-                        autoFocus\n-                        allowClear={false}\n-                    />\n                 </div>\n             ) : (\n                 <Tooltip\n@@ -87,7 +62,7 @@ export function TrendsFormula({ filters, insightProps }: EditorFilterProps): JSX\n                         onClick={() => setIsUsingFormulas(true)}\n                         disabled={!formulaEnabled}\n                         type=\"secondary\"\n-                        icon={<IconPlusMini color=\"var(--primary)\" />}\n+                        icon={<IconPlusMini />}\n                         data-attr=\"btn-add-formula\"\n                     >\n                         Add formula\ndiff --git a/frontend/src/scenes/organization/Settings/Members.tsx b/frontend/src/scenes/organization/Settings/Members.tsx\nindex 66b75b967..c0a91b8d9 100644\n--- a/frontend/src/scenes/organization/Settings/Members.tsx\n+++ b/frontend/src/scenes/organization/Settings/Members.tsx\n@@ -1,5 +1,5 @@\n import React from 'react'\n-import { Modal, Input } from 'antd'\n+import { Modal } from 'antd'\n import { useValues, useActions } from 'kea'\n import { membersLogic } from './membersLogic'\n import { ExclamationCircleOutlined, SwapOutlined } from '@ant-design/icons'\n@@ -19,6 +19,7 @@ import { LemonButton } from 'lib/components/LemonButton'\n import { More } from 'lib/components/LemonButton/More'\n import { LemonTag } from 'lib/components/LemonTag/LemonTag'\n import { LemonDivider } from 'lib/components/LemonDivider'\n+import { LemonInput } from '@posthog/lemon-ui'\n \n function ActionsComponent(_: any, member: OrganizationMemberType): JSX.Element | null {\n     const { user } = useValues(userLogic)\n@@ -195,16 +196,7 @@ export function Members({ user }: MembersProps): JSX.Element {\n     return (\n         <>\n             <h2 className=\"subtitle\">Members</h2>\n-            <Input.Search\n-                placeholder=\"Search for members\"\n-                allowClear\n-                enterButton\n-                style={{ maxWidth: 600, width: 'initial', flexGrow: 1, marginRight: 12 }}\n-                value={search}\n-                onChange={(e) => {\n-                    setSearch(e.target.value)\n-                }}\n-            />\n+            <LemonInput type=\"search\" placeholder=\"Search for members\" value={search} onChange={setSearch} />\n             <LemonTable\n                 dataSource={filteredMembers}\n                 columns={columns}\ndiff --git a/frontend/src/scenes/persons/Persons.tsx b/frontend/src/scenes/persons/Persons.tsx\nindex 7b4d8e86d..166ab791d 100644\n--- a/frontend/src/scenes/persons/Persons.tsx\n+++ b/frontend/src/scenes/persons/Persons.tsx\n@@ -39,7 +39,7 @@ export function PersonsScene(): JSX.Element {\n         <div className=\"persons-list\">\n             {!cohortId && <PersonPageHeader />}\n             <div className=\"space-y-2\">\n-                <div className=\"flex justify-between\" style={{ gap: '0.75rem' }}>\n+                <div className=\"flex justify-between items-center gap-2\">\n                     <PersonsSearch autoFocus={!cohortId} />\n \n                     <Popconfirm\ndiff --git a/frontend/src/scenes/persons/PersonsSearch.tsx b/frontend/src/scenes/persons/PersonsSearch.tsx\nindex cd6c62a74..09e58d7c5 100644\n--- a/frontend/src/scenes/persons/PersonsSearch.tsx\n+++ b/frontend/src/scenes/persons/PersonsSearch.tsx\n@@ -1,41 +1,36 @@\n-import React, { useState, useEffect } from 'react'\n-import { Input } from 'antd'\n+import React, { useEffect, useState } from 'react'\n import { useValues, useActions } from 'kea'\n import { personsLogic } from './personsLogic'\n import { IconInfo } from 'lib/components/icons'\n import { Tooltip } from 'lib/components/Tooltip'\n+import { LemonInput } from '@posthog/lemon-ui'\n+import { useDebouncedCallback } from 'use-debounce'\n \n export const PersonsSearch = ({ autoFocus = true }: { autoFocus?: boolean }): JSX.Element => {\n     const { loadPersons, setListFilters } = useActions(personsLogic)\n     const { listFilters } = useValues(personsLogic)\n     const [searchTerm, setSearchTerm] = useState('')\n \n+    const loadPersonsDebounced = useDebouncedCallback(loadPersons, 800)\n+\n     useEffect(() => {\n         setSearchTerm(listFilters.search || '')\n     }, [])\n \n+    useEffect(() => {\n+        setListFilters({ search: searchTerm || undefined })\n+        loadPersonsDebounced()\n+    }, [searchTerm])\n+\n     return (\n-        <div className=\"flex items-center gap-2\" style={{ width: 'min(100%, 24rem)' }}>\n-            <Input.Search\n-                data-attr=\"persons-search\"\n-                placeholder=\"Search for persons\"\n+        <div className=\"flex items-center gap-2\">\n+            <LemonInput\n+                type=\"search\"\n                 autoFocus={autoFocus}\n+                placeholder=\"Search for persons\"\n+                onChange={setSearchTerm}\n                 value={searchTerm}\n-                onChange={(e) => {\n-                    setSearchTerm(e.target.value)\n-                }}\n-                enterButton\n-                onPressEnter={(e) => {\n-                    e.preventDefault()\n-                    setListFilters({ search: searchTerm || undefined })\n-                    loadPersons()\n-                }}\n-                allowClear\n-                onSearch={(value) => {\n-                    setListFilters({ search: value || undefined })\n-                    loadPersons()\n-                }}\n-                style={{ width: '100%' }}\n+                data-attr=\"persons-search\"\n             />\n             <Tooltip\n                 title={\n@@ -45,7 +40,7 @@ export const PersonsSearch = ({ autoFocus = true }: { autoFocus?: boolean }): JS\n                     </>\n                 }\n             >\n-                <IconInfo className=\"text-2xl text-muted-alt\" />\n+                <IconInfo className=\"text-2xl text-muted-alt shrink-0\" />\n             </Tooltip>\n         </div>\n     )\ndiff --git a/frontend/src/scenes/plugins/PluginsSearch.tsx b/frontend/src/scenes/plugins/PluginsSearch.tsx\nindex 9ab5bb607..9ce09a37a 100644\n--- a/frontend/src/scenes/plugins/PluginsSearch.tsx\n+++ b/frontend/src/scenes/plugins/PluginsSearch.tsx\n@@ -1,21 +1,19 @@\n import React from 'react'\n import { useActions, useValues } from 'kea'\n import { pluginsLogic } from 'scenes/plugins/pluginsLogic'\n-import { Input } from 'antd'\n+import { LemonInput } from '@posthog/lemon-ui'\n \n export function PluginsSearch(): JSX.Element {\n     const { searchTerm, rearranging } = useValues(pluginsLogic)\n     const { setSearchTerm } = useActions(pluginsLogic)\n     return (\n-        <Input.Search\n+        <LemonInput\n+            type=\"search\"\n             data-attr=\"plugins-search\"\n             placeholder=\"Start typing to search for an app\"\n             autoFocus\n             value={searchTerm || ''}\n-            onChange={(e) => setSearchTerm(e.target.value)}\n-            enterButton\n-            allowClear\n-            style={{ maxWidth: 400, marginTop: 5, marginBottom: 10 }}\n+            onChange={setSearchTerm}\n             disabled={rearranging}\n         />\n     )\ndiff --git a/frontend/src/scenes/saved-insights/SavedInsights.scss b/frontend/src/scenes/saved-insights/SavedInsights.scss\nindex f9a382b12..2acc1363c 100644\n--- a/frontend/src/scenes/saved-insights/SavedInsights.scss\n+++ b/frontend/src/scenes/saved-insights/SavedInsights.scss\n@@ -34,14 +34,6 @@\n         color: var(--border-dark);\n     }\n \n-    .list-or-card-layout {\n-        color: var(--muted-alt);\n-        padding: 1rem 0;\n-        border-top: 1px solid var(--border);\n-        justify-content: space-between;\n-        align-items: center;\n-    }\n-\n     .saved-insight-empty-state {\n         display: flex;\n         justify-content: center;\n@@ -86,9 +78,6 @@\n     max-width: 18rem;\n }\n \n-.insight-type-icon-dropdown {\n-    vertical-align: middle;\n-}\n .insight-type-icon-wrapper {\n     display: flex;\n     align-items: center;\ndiff --git a/frontend/src/scenes/saved-insights/SavedInsights.tsx b/frontend/src/scenes/saved-insights/SavedInsights.tsx\nindex da6fe5ef6..035d46c35 100644\n--- a/frontend/src/scenes/saved-insights/SavedInsights.tsx\n+++ b/frontend/src/scenes/saved-insights/SavedInsights.tsx\n@@ -1,4 +1,4 @@\n-import { Col, Input, Radio, Row, Select, Tabs } from 'antd'\n+import { Radio, Tabs } from 'antd'\n import { useActions, useValues } from 'kea'\n import { Link } from 'lib/components/Link'\n import { ObjectTags } from 'lib/components/ObjectTags/ObjectTags'\n@@ -41,6 +41,7 @@ import { ActivityScope } from 'lib/components/ActivityLog/humanizeActivity'\n import { ActivityLog } from 'lib/components/ActivityLog/ActivityLog'\n import { insightActivityDescriber } from 'scenes/saved-insights/activityDescriptions'\n import { CalendarOutlined } from '@ant-design/icons'\n+import { LemonInput, LemonSelect, LemonSelectOptions } from '@posthog/lemon-ui'\n \n const { TabPane } = Tabs\n \n@@ -90,6 +91,19 @@ export const INSIGHT_TYPES_METADATA: Record<InsightType, InsightTypeMetadata> =\n     },\n }\n \n+export const INSIGHT_TYPE_OPTIONS: LemonSelectOptions = Object.entries(INSIGHT_TYPES_METADATA).reduce(\n+    (acc, [key, meta]) => {\n+        return {\n+            ...acc,\n+            [key]: {\n+                label: meta.name,\n+                icon: meta.icon ? <meta.icon color=\"#747EA2\" noBackground /> : null,\n+            },\n+        }\n+    },\n+    {}\n+)\n+\n export const scene: SceneExport = {\n     component: SavedInsights,\n     logic: savedInsightsLogic,\n@@ -344,54 +358,34 @@ export function SavedInsights(): JSX.Element {\n                 <ActivityLog scope={ActivityScope.INSIGHT} describer={insightActivityDescriber} />\n             ) : (\n                 <>\n-                    <Row style={{ paddingBottom: 16, justifyContent: 'space-between', gap: '0.75rem' }}>\n-                        <Col>\n-                            <Input.Search\n-                                allowClear\n-                                enterButton\n-                                placeholder=\"Search for insights\"\n-                                style={{ width: 240 }}\n-                                onChange={(e) => setSavedInsightsFilters({ search: e.target.value })}\n-                                value={search || ''}\n-                                onSearch={() => loadInsights()}\n-                            />\n-                        </Col>\n-                        <Row style={{ gap: '0.75rem' }}>\n-                            <Col>\n-                                Type:\n-                                <Select\n-                                    className=\"insight-type-icon-dropdown\"\n+                    <div className=\"flex justify-between gap-2 mb-2 items-center flex-wrap\">\n+                        <LemonInput\n+                            type=\"search\"\n+                            placeholder=\"Search for insights\"\n+                            onChange={(value) => setSavedInsightsFilters({ search: value })}\n+                            value={search || ''}\n+                        />\n+                        <div className=\"flex items-center gap-2 flex-wrap\">\n+                            <div className=\"flex items-center gap-2\">\n+                                <span>Type:</span>\n+                                <LemonSelect\n+                                    size=\"small\"\n+                                    options={\n+                                        {\n+                                            'All types': {\n+                                                label: 'All types',\n+                                            },\n+                                            ...INSIGHT_TYPE_OPTIONS,\n+                                        } as LemonSelectOptions\n+                                    }\n                                     value={insightType}\n-                                    style={{ paddingLeft: 8, width: 140 }}\n-                                    onChange={(it) => setSavedInsightsFilters({ insightType: it })}\n-                                >\n-                                    {Object.entries({\n-                                        ['All types']: {\n-                                            name: 'All types',\n-                                            inMenu: false,\n-                                        } as InsightTypeMetadata,\n-                                        ...INSIGHT_TYPES_METADATA,\n-                                    }).map(([listedInsightType, listedInsightTypeMetadata], index) => (\n-                                        <Select.Option key={index} value={listedInsightType}>\n-                                            <div className=\"insight-type-icon-wrapper\">\n-                                                {listedInsightTypeMetadata.icon ? (\n-                                                    <div className=\"icon-container\">\n-                                                        <div className=\"icon-container-inner\">\n-                                                            {\n-                                                                <listedInsightTypeMetadata.icon\n-                                                                    color=\"#747EA2\"\n-                                                                    noBackground\n-                                                                />\n-                                                            }\n-                                                        </div>\n-                                                    </div>\n-                                                ) : null}\n-                                                <div>{listedInsightTypeMetadata.name}</div>\n-                                            </div>\n-                                        </Select.Option>\n-                                    ))}\n-                                </Select>\n-                            </Col>\n+                                    onChange={(v: any): void => setSavedInsightsFilters({ insightType: v })}\n+                                    status=\"stealth\"\n+                                    type=\"secondary\"\n+                                    dropdownMatchSelectWidth={false}\n+                                    data-attr=\"insight-type\"\n+                                />\n+                            </div>\n                             <div className=\"flex items-center gap-2\">\n                                 <span>Last modified:</span>\n                                 <DateFilter\n@@ -411,32 +405,44 @@ export function SavedInsights(): JSX.Element {\n                                 />\n                             </div>\n                             {tab !== SavedInsightsTabs.Yours ? (\n-                                <Col>\n-                                    Created by:\n-                                    <Select\n+                                <div className=\"flex items-center gap-2\">\n+                                    <span>Created by:</span>\n+                                    {/* TODO: Fix issues with user name order due to numbers having priority */}\n+                                    <LemonSelect\n+                                        size=\"small\"\n+                                        options={\n+                                            {\n+                                                'All users': { label: 'All Users' },\n+                                                ...meFirstMembers.reduce(\n+                                                    (acc, x) => ({\n+                                                        ...acc,\n+                                                        [x.user.id]: { label: x.user.first_name },\n+                                                    }),\n+                                                    {}\n+                                                ),\n+                                            } as LemonSelectOptions\n+                                        }\n                                         value={createdBy}\n-                                        style={{ paddingLeft: 8, width: 140 }}\n-                                        onChange={(cb) => {\n-                                            setSavedInsightsFilters({ createdBy: cb })\n+                                        onChange={(v: any): void => {\n+                                            setSavedInsightsFilters({ createdBy: v })\n                                         }}\n-                                    >\n-                                        <Select.Option value={'All users'}>All users</Select.Option>\n-                                        {meFirstMembers.map((member) => (\n-                                            <Select.Option key={member.user.id} value={member.user.id}>\n-                                                {member.user.first_name}\n-                                            </Select.Option>\n-                                        ))}\n-                                    </Select>\n-                                </Col>\n+                                        status=\"stealth\"\n+                                        type=\"secondary\"\n+                                        dropdownMatchSelectWidth={false}\n+                                    />\n+                                </div>\n                             ) : null}\n-                        </Row>\n-                    </Row>\n-                    <Row className=\"list-or-card-layout\">\n-                        {count\n-                            ? `${startCount}${endCount - startCount > 1 ? '-' + endCount : ''} of ${count} insight${\n-                                  count === 1 ? '' : 's'\n-                              }`\n-                            : 'No insights yet'}\n+                        </div>\n+                    </div>\n+                    <LemonDivider />\n+                    <div className=\"flex justify-between mb-4 mt-2 items-center\">\n+                        <span className=\"text-muted-alt\">\n+                            {count\n+                                ? `${startCount}${endCount - startCount > 1 ? '-' + endCount : ''} of ${count} insight${\n+                                      count === 1 ? '' : 's'\n+                                  }`\n+                                : 'No insights yet'}\n+                        </span>\n                         <div>\n                             <Radio.Group\n                                 onChange={(e) => setSavedInsightsFilters({ layoutView: e.target.value })}\n@@ -453,7 +459,7 @@ export function SavedInsights(): JSX.Element {\n                                 </Radio.Button>\n                             </Radio.Group>\n                         </div>\n-                    </Row>\n+                    </div>\n                     {!insightsLoading && insights.count < 1 ? (\n                         <SavedInsightsEmptyState />\n                     ) : (\ndiff --git a/frontend/src/scenes/toolbar-launch/AuthorizedUrls.tsx b/frontend/src/scenes/toolbar-launch/AuthorizedUrls.tsx\nindex 386252c46..e1f79edba 100644\n--- a/frontend/src/scenes/toolbar-launch/AuthorizedUrls.tsx\n+++ b/frontend/src/scenes/toolbar-launch/AuthorizedUrls.tsx\n@@ -3,7 +3,7 @@ import clsx from 'clsx'\n import { useActions, useValues } from 'kea'\n import { LemonTag } from 'lib/components/LemonTag/LemonTag'\n import { LemonButton } from 'lib/components/LemonButton'\n-import { Input, Popconfirm } from 'antd'\n+import { Popconfirm } from 'antd'\n import { authorizedUrlsLogic } from './authorizedUrlsLogic'\n import { isMobile } from 'lib/utils'\n import { LemonRow } from 'lib/components/LemonRow'\n@@ -82,20 +82,14 @@ export function AuthorizedUrls({ pageKey, actionId }: AuthorizedUrlsTableInterfa\n \n     return (\n         <div>\n-            <div className=\"flex items-center mb-4 gap-2\">\n-                <div className=\"flex grow\">\n-                    <Input.Search\n-                        allowClear\n-                        enterButton\n-                        placeholder=\"Search for authorized URLs\"\n-                        style={{ maxWidth: 480 }}\n-                        value={searchTerm}\n-                        onChange={(e) => {\n-                            setSearchTerm(e.target.value)\n-                        }}\n-                        autoFocus={pageKey === 'toolbar-launch' && !isMobile()}\n-                    />\n-                </div>\n+            <div className=\"flex items-center mb-4 gap-2 justify-between\">\n+                <LemonInput\n+                    type=\"search\"\n+                    autoFocus={pageKey === 'toolbar-launch' && !isMobile()}\n+                    placeholder=\"Search for authorized URLs\"\n+                    onChange={setSearchTerm}\n+                    value={searchTerm}\n+                />\n                 <LemonButton onClick={newUrl} type=\"secondary\" icon={<IconPlus />} data-attr=\"toolbar-add-url\">\n                     Add{pageKey === 'toolbar-launch' && ' authorized URL'}\n                 </LemonButton>\ndiff --git a/frontend/src/scenes/trends/PersonsModal.tsx b/frontend/src/scenes/trends/PersonsModal.tsx\nindex 71e53329a..b2cde99a8 100644\n--- a/frontend/src/scenes/trends/PersonsModal.tsx\n+++ b/frontend/src/scenes/trends/PersonsModal.tsx\n@@ -1,7 +1,7 @@\n import React, { useMemo } from 'react'\n import { useActions, useValues } from 'kea'\n-import { DownloadOutlined, UsergroupAddOutlined } from '@ant-design/icons'\n-import { Button, Input, Modal, Select, Skeleton } from 'antd'\n+import { DownloadOutlined } from '@ant-design/icons'\n+import { Button, Select, Skeleton } from 'antd'\n import { ActorType, ChartDisplayType, ExporterFormat, FilterType, InsightType } from '~/types'\n import { personsModalLogic } from './personsModalLogic'\n import { CopyToClipboardInline } from 'lib/components/CopyToClipboard'\n@@ -14,7 +14,7 @@ import { PersonHeader } from '../persons/PersonHeader'\n import api from '../../lib/api'\n import { LemonTable, LemonTableColumns } from 'lib/components/LemonTable'\n import { GroupActorHeader } from 'scenes/persons/GroupActorHeader'\n-import { IconPersonFilled } from 'lib/components/icons'\n+import { IconPersonFilled, IconSave } from 'lib/components/icons'\n import { InsightLabel } from 'lib/components/InsightLabel'\n import { getSeriesColor } from 'lib/colors'\n import { featureFlagLogic } from 'lib/logic/featureFlagLogic'\n@@ -23,6 +23,7 @@ import { SessionPlayerDrawer } from 'scenes/session-recordings/SessionPlayerDraw\n import { MultiRecordingButton } from 'scenes/session-recordings/multiRecordingButton/multiRecordingButton'\n import { countryCodeToFlag, countryCodeToName } from 'scenes/insights/views/WorldMap/countryCodes'\n import { triggerExport } from 'lib/components/ExportButton/exporter'\n+import { LemonButton, LemonInput, LemonModal } from '@posthog/lemon-ui'\n \n export interface PersonsModalProps {\n     visible: boolean\n@@ -115,10 +116,18 @@ export function PersonsModal({\n \n     const showCountedByTag = !!people?.crossDataset?.find(({ action }) => action?.math && action.math !== 'total')\n     const hasMultipleSeries = !!people?.crossDataset?.find(({ action }) => action?.order)\n+\n+    const filterSearchResults = (): void => {\n+        if (!searchTerm) {\n+            setFirstLoadedActors(firstLoadedPeople)\n+        }\n+        people && setPersonsModalFilters(searchTerm, people, filters)\n+    }\n+\n     return (\n         <>\n             {!!sessionRecordingId && <SessionPlayerDrawer onClose={closeRecordingModal} />}\n-            <Modal\n+            <LemonModal\n                 title={title}\n                 visible={visible}\n                 onCancel={hidePeople}\n@@ -126,10 +135,11 @@ export function PersonsModal({\n                     people &&\n                     people.count > 0 &&\n                     (isDownloadCsvAvailable || isSaveAsCohortAvailable) && (\n-                        <>\n+                        <div className=\"flex gap-2\">\n                             {isDownloadCsvAvailable && (\n-                                <Button\n+                                <LemonButton\n                                     icon={<DownloadOutlined />}\n+                                    type=\"secondary\"\n                                     onClick={() => {\n                                         triggerExport({\n                                             export_format: ExporterFormat.CSV,\n@@ -147,171 +157,166 @@ export function PersonsModal({\n                                             },\n                                         })\n                                     }}\n-                                    style={{ marginRight: 8 }}\n                                     data-attr=\"person-modal-download-csv\"\n                                 >\n                                     Download CSV\n-                                </Button>\n+                                </LemonButton>\n                             )}\n                             {isSaveAsCohortAvailable && (\n-                                <Button\n+                                <LemonButton\n                                     onClick={onSaveCohort}\n-                                    icon={<UsergroupAddOutlined />}\n+                                    icon={<IconSave />}\n+                                    type=\"secondary\"\n                                     data-attr=\"person-modal-save-as-cohort\"\n                                 >\n                                     Save as cohort\n-                                </Button>\n+                                </LemonButton>\n                             )}\n-                        </>\n+                        </div>\n                     )\n                 }\n                 width={600}\n                 className=\"person-modal\"\n             >\n+                <div className=\"p-4\">\n+                    <LemonInput\n+                        type=\"search\"\n+                        placeholder=\"Search for persons by email, name, or ID\"\n+                        fullWidth\n+                        onChange={(value) => {\n+                            setSearchTerm(value)\n+                        }}\n+                        onBlur={() => filterSearchResults()}\n+                        onPressEnter={() => filterSearchResults()}\n+                        value={searchTerm}\n+                        disabled={isInitialLoad}\n+                    />\n+                </div>\n                 {isInitialLoad ? (\n-                    <div style={{ padding: 16 }}>\n+                    <div className=\"p-4\">\n                         <Skeleton active />\n                     </div>\n                 ) : (\n-                    people && (\n-                        <>\n-                            <Input.Search\n-                                allowClear\n-                                enterButton\n-                                placeholder=\"Search for persons by email, name, or ID\"\n-                                onChange={(e) => {\n-                                    setSearchTerm(e.target.value)\n-                                    if (!e.target.value) {\n-                                        setFirstLoadedActors(firstLoadedPeople)\n-                                    }\n-                                }}\n-                                value={searchTerm}\n-                                onSearch={(term) =>\n-                                    term\n-                                        ? setPersonsModalFilters(term, people, filters)\n-                                        : setFirstLoadedActors(firstLoadedPeople)\n-                                }\n-                            />\n-                            {!!people.crossDataset?.length && people.seriesId !== undefined && (\n-                                <div className=\"data-point-selector\">\n-                                    <Select value={people.seriesId} onChange={(_id) => switchToDataPoint(_id)}>\n-                                        {people.crossDataset.map((dataPoint) => (\n-                                            <Select.Option\n-                                                value={dataPoint.id}\n-                                                key={`${dataPoint.action?.id}${dataPoint.breakdown_value}`}\n-                                            >\n-                                                <InsightLabel\n-                                                    seriesColor={getSeriesColor(dataPoint.id)}\n-                                                    action={dataPoint.action}\n-                                                    breakdownValue={\n-                                                        dataPoint.breakdown_value === ''\n-                                                            ? 'None'\n-                                                            : dataPoint.breakdown_value?.toString()\n-                                                    }\n-                                                    showCountedByTag={showCountedByTag}\n-                                                    hasMultipleSeries={hasMultipleSeries}\n-                                                />\n-                                            </Select.Option>\n-                                        ))}\n-                                    </Select>\n+                    <>\n+                        {people && (\n+                            <>\n+                                {!!people.crossDataset?.length && people.seriesId !== undefined && (\n+                                    <div className=\"data-point-selector\">\n+                                        <Select value={people.seriesId} onChange={(_id) => switchToDataPoint(_id)}>\n+                                            {people.crossDataset.map((dataPoint) => (\n+                                                <Select.Option\n+                                                    value={dataPoint.id}\n+                                                    key={`${dataPoint.action?.id}${dataPoint.breakdown_value}`}\n+                                                >\n+                                                    <InsightLabel\n+                                                        seriesColor={getSeriesColor(dataPoint.id)}\n+                                                        action={dataPoint.action}\n+                                                        breakdownValue={\n+                                                            dataPoint.breakdown_value === ''\n+                                                                ? 'None'\n+                                                                : dataPoint.breakdown_value?.toString()\n+                                                        }\n+                                                        showCountedByTag={showCountedByTag}\n+                                                        hasMultipleSeries={hasMultipleSeries}\n+                                                    />\n+                                                </Select.Option>\n+                                            ))}\n+                                        </Select>\n+                                    </div>\n+                                )}\n+                                <div className=\"user-count-subheader\">\n+                                    <IconPersonFilled style={{ fontSize: '1.125rem', marginRight: '0.5rem' }} />\n+                                    <span>\n+                                        This list contains{' '}\n+                                        <b>\n+                                            {people.count} unique {aggregationTargetLabel.plural}\n+                                        </b>\n+                                        {peopleParams?.pointValue !== undefined &&\n+                                            (!peopleParams.action?.math || peopleParams.action?.math === 'total') && (\n+                                                <>\n+                                                    {' '}\n+                                                    who performed the event{' '}\n+                                                    <b>\n+                                                        {peopleParams.pointValue} total{' '}\n+                                                        {pluralize(peopleParams.pointValue, 'time', undefined, false)}\n+                                                    </b>\n+                                                </>\n+                                            )}\n+                                        .\n+                                    </span>\n                                 </div>\n-                            )}\n-                            <div className=\"user-count-subheader\">\n-                                <IconPersonFilled style={{ fontSize: '1.125rem', marginRight: '0.5rem' }} />\n-                                <span>\n-                                    This list contains{' '}\n-                                    <b>\n-                                        {people.count} unique {aggregationTargetLabel.plural}\n-                                    </b>\n-                                    {peopleParams?.pointValue !== undefined &&\n-                                        (!peopleParams.action?.math || peopleParams.action?.math === 'total') && (\n-                                            <>\n-                                                {' '}\n-                                                who performed the event{' '}\n-                                                <b>\n-                                                    {peopleParams.pointValue} total{' '}\n-                                                    {pluralize(peopleParams.pointValue, 'time', undefined, false)}\n-                                                </b>\n-                                            </>\n-                                        )}\n-                                    .\n-                                </span>\n-                            </div>\n-                            {people.count > 0 ? (\n-                                <LemonTable\n-                                    columns={\n-                                        [\n-                                            {\n-                                                title: 'Person',\n-                                                key: 'person',\n-                                                render: function Render(_, actor: ActorType) {\n-                                                    return <ActorRow actor={actor} />\n+                                {people.count > 0 ? (\n+                                    <LemonTable\n+                                        columns={\n+                                            [\n+                                                {\n+                                                    title: 'Person',\n+                                                    key: 'person',\n+                                                    render: function Render(_, actor: ActorType) {\n+                                                        return <ActorRow actor={actor} />\n+                                                    },\n                                                 },\n-                                            },\n-                                            {\n-                                                width: 0,\n-                                                title: 'Recordings',\n-                                                key: 'recordings',\n-                                                render: function Render(_, actor: ActorType) {\n-                                                    if (\n-                                                        actor.matched_recordings?.length &&\n-                                                        actor.matched_recordings?.length > 0\n-                                                    ) {\n-                                                        return (\n-                                                            <MultiRecordingButton\n-                                                                sessionRecordings={actor.matched_recordings}\n-                                                                onOpenRecording={(sessionRecording) => {\n-                                                                    openRecordingModal(sessionRecording.session_id)\n-                                                                }}\n-                                                            />\n-                                                        )\n-                                                    }\n+                                                {\n+                                                    width: 0,\n+                                                    title: 'Recordings',\n+                                                    key: 'recordings',\n+                                                    render: function Render(_, actor: ActorType) {\n+                                                        if (\n+                                                            actor.matched_recordings?.length &&\n+                                                            actor.matched_recordings?.length > 0\n+                                                        ) {\n+                                                            return (\n+                                                                <MultiRecordingButton\n+                                                                    sessionRecordings={actor.matched_recordings}\n+                                                                    onOpenRecording={(sessionRecording) => {\n+                                                                        openRecordingModal(sessionRecording.session_id)\n+                                                                    }}\n+                                                                />\n+                                                            )\n+                                                        }\n+                                                    },\n                                                 },\n+                                            ] as LemonTableColumns<ActorType>\n+                                        }\n+                                        className=\"persons-table\"\n+                                        rowKey=\"id\"\n+                                        expandable={{\n+                                            expandedRowRender: function RenderPropertiesTable({ properties }) {\n+                                                return Object.keys(properties).length ? (\n+                                                    <PropertiesTable properties={properties} />\n+                                                ) : (\n+                                                    'This person has no properties.'\n+                                                )\n                                             },\n-                                        ] as LemonTableColumns<ActorType>\n-                                    }\n-                                    className=\"persons-table\"\n-                                    rowKey=\"id\"\n-                                    expandable={{\n-                                        expandedRowRender: function RenderPropertiesTable({ properties }) {\n-                                            return Object.keys(properties).length ? (\n-                                                <PropertiesTable properties={properties} />\n-                                            ) : (\n-                                                'This person has no properties.'\n-                                            )\n-                                        },\n-                                    }}\n-                                    embedded\n-                                    showHeader={false}\n-                                    dataSource={people.people}\n-                                    nouns={['person', 'persons']}\n-                                />\n-                            ) : (\n-                                <div className=\"person-row-container person-row\">\n-                                    We couldn't find any matching {aggregationTargetLabel.plural} for this data point.\n-                                </div>\n-                            )}\n-                            {people?.next && (\n-                                <div\n-                                    style={{\n-                                        margin: '1rem',\n-                                        textAlign: 'center',\n-                                    }}\n-                                >\n-                                    <Button\n-                                        type=\"primary\"\n-                                        style={{ color: 'white' }}\n-                                        onClick={loadMorePeople}\n-                                        loading={loadingMorePeople}\n-                                    >\n-                                        Load more {aggregationTargetLabel.plural}\n-                                    </Button>\n-                                </div>\n-                            )}\n-                        </>\n-                    )\n+                                        }}\n+                                        embedded\n+                                        showHeader={false}\n+                                        dataSource={people.people}\n+                                        nouns={['person', 'persons']}\n+                                    />\n+                                ) : (\n+                                    <div className=\"person-row-container person-row\">\n+                                        We couldn't find any matching {aggregationTargetLabel.plural} for this data\n+                                        point.\n+                                    </div>\n+                                )}\n+                                {people?.next && (\n+                                    <div className=\"m-4 text-center\">\n+                                        <Button\n+                                            type=\"primary\"\n+                                            style={{ color: 'white' }}\n+                                            onClick={loadMorePeople}\n+                                            loading={loadingMorePeople}\n+                                        >\n+                                            Load more {aggregationTargetLabel.plural}\n+                                        </Button>\n+                                    </div>\n+                                )}\n+                            </>\n+                        )}\n+                    </>\n                 )}\n-            </Modal>\n+            </LemonModal>\n         </>\n     )\n }\n"
  },
  "53afdc7283c0ed1f9cac1910b1b8c333ad1548dd": {
    "hash": "53afdc7283c0ed1f9cac1910b1b8c333ad1548dd",
    "message": "feat(data-m): add event type filter to list view (#10961)",
    "diff": "commit 53afdc7283c0ed1f9cac1910b1b8c333ad1548dd\nAuthor: Alex Gyujin Kim <alexgkim205@gmail.com>\nDate:   Tue Jul 26 13:46:15 2022 -0400\n\n    feat(data-m): add event type filter to list view (#10961)\n\ndiff --git a/cypress/e2e/trends.js b/cypress/e2e/trends.js\nindex 0f2db26f9..1696ae284 100644\n--- a/cypress/e2e/trends.js\n+++ b/cypress/e2e/trends.js\n@@ -28,7 +28,7 @@ describe('Trends', () => {\n         cy.contains('Add graph series').click()\n         cy.get('[data-attr=taxonomic-tab-actions]').click()\n         cy.get('[data-attr=taxonomic-filter-searchfield]').click().type('home')\n-        cy.contains('Hogflix homepage view').click()\n+        cy.contains('Hogflix homepage view').click({ force: true })\n \n         // then\n         cy.get('[data-attr=trend-line-graph]').should('exist')\ndiff --git a/ee/api/test/test_event_definition.py b/ee/api/test/test_event_definition.py\nindex 997d111a9..e8fadd82c 100644\n--- a/ee/api/test/test_event_definition.py\n+++ b/ee/api/test/test_event_definition.py\n@@ -243,7 +243,32 @@ class TestEventDefinitionEnterpriseAPI(APIBaseTest):\n \n         self.assertListEqual(sorted(response.json()[\"tags\"]), [\"a\", \"b\"])\n \n-    def test_include_actions(self):\n+    def test_event_type_event(self):\n+        super(LicenseManager, cast(LicenseManager, License.objects)).create(\n+            plan=\"enterprise\", valid_until=timezone.datetime(2500, 1, 19, 3, 14, 7)\n+        )\n+        EnterpriseEventDefinition.objects.create(team=self.team, name=\"rated_app\")\n+        EnterpriseEventDefinition.objects.create(team=self.team, name=\"installed_app\")\n+\n+        response = self.client.get(\"/api/projects/@current/event_definitions/?search=app&event_type=event\")\n+        self.assertEqual(response.status_code, status.HTTP_200_OK)\n+        self.assertEqual(response.json()[\"count\"], 2)\n+        self.assertEqual(response.json()[\"results\"][0][\"name\"], \"installed_app\")\n+\n+    def test_event_type_action_event(self):\n+        super(LicenseManager, cast(LicenseManager, License.objects)).create(\n+            plan=\"enterprise\", valid_until=timezone.datetime(2500, 1, 19, 3, 14, 7)\n+        )\n+        EnterpriseEventDefinition.objects.create(team=self.team, name=\"rated_app\")\n+        EnterpriseEventDefinition.objects.create(team=self.team, name=\"installed_app\")\n+        action = Action.objects.create(team=self.team, name=\"action_app\")\n+\n+        response = self.client.get(\"/api/projects/@current/event_definitions/?search=app&event_type=action_event\")\n+        self.assertEqual(response.status_code, status.HTTP_200_OK)\n+        self.assertEqual(response.json()[\"count\"], 1)\n+        self.assertEqual(response.json()[\"results\"][0][\"name\"], action.name)\n+\n+    def test_event_type_all(self):\n         super(LicenseManager, cast(LicenseManager, License.objects)).create(\n             plan=\"enterprise\", valid_until=timezone.datetime(2500, 1, 19, 3, 14, 7)\n         )\n@@ -251,7 +276,7 @@ class TestEventDefinitionEnterpriseAPI(APIBaseTest):\n         EnterpriseEventDefinition.objects.create(team=self.team, name=\"installed_app\")\n         action = Action.objects.create(team=self.team, name=\"action_app\")\n \n-        response = self.client.get(\"/api/projects/@current/event_definitions/?search=app&include_actions=true\")\n+        response = self.client.get(\"/api/projects/@current/event_definitions/?search=app&event_type=all\")\n         self.assertEqual(response.status_code, status.HTTP_200_OK)\n         self.assertEqual(response.json()[\"count\"], 3)\n         self.assertEqual(response.json()[\"results\"][0][\"action_id\"], action.id)\ndiff --git a/frontend/src/lib/api.ts b/frontend/src/lib/api.ts\nindex d72d3cdeb..0220fe350 100644\n--- a/frontend/src/lib/api.ts\n+++ b/frontend/src/lib/api.ts\n@@ -4,6 +4,7 @@ import {\n     ActionType,\n     ActorType,\n     CohortType,\n+    CombinedEventType,\n     DashboardCollaboratorType,\n     DashboardType,\n     EventDefinition,\n@@ -515,7 +516,7 @@ const api = {\n             limit?: number\n             offset?: number\n             teamId?: TeamType['id']\n-            include_actions?: boolean\n+            event_type?: CombinedEventType\n         }): Promise<PaginatedResponse<EventDefinition>> {\n             return new ApiRequest()\n                 .eventDefinitions(teamId)\n@@ -530,7 +531,7 @@ const api = {\n             limit?: number\n             offset?: number\n             teamId?: TeamType['id']\n-            include_actions?: boolean\n+            event_type?: CombinedEventType\n         }): string {\n             return new ApiRequest()\n                 .eventDefinitions(teamId)\ndiff --git a/frontend/src/scenes/actions/ActionsTable.tsx b/frontend/src/scenes/actions/ActionsTable.tsx\nindex 69acba23f..5de22a265 100644\n--- a/frontend/src/scenes/actions/ActionsTable.tsx\n+++ b/frontend/src/scenes/actions/ActionsTable.tsx\n@@ -22,8 +22,8 @@ import { LemonDivider } from 'lib/components/LemonDivider'\n import { More } from 'lib/components/LemonButton/More'\n import { combineUrl } from 'kea-router'\n import { ObjectTags } from 'lib/components/ObjectTags/ObjectTags'\n-import { DataManagementTab } from 'scenes/data-management/DataManagementPageTabs'\n-import { DataManagementPageHeader } from 'scenes/data-management/DataManagementPageHeader'\n+import { DataManagementPageTabs, DataManagementTab } from 'scenes/data-management/DataManagementPageTabs'\n+import { PageHeader } from 'lib/components/PageHeader'\n \n const searchActions = (sources: ActionType[], search: string): ActionType[] => {\n     return new Fuse(sources, {\n@@ -205,7 +205,12 @@ export function ActionsTable(): JSX.Element {\n \n     return (\n         <div data-attr=\"manage-events-table\">\n-            <DataManagementPageHeader activeTab={DataManagementTab.Actions} />\n+            <PageHeader\n+                title=\"Data Management\"\n+                caption=\"Use data management to organize events that come into PostHog. Reduce noise, clarify usage, and help collaborators get the most value from your data.\"\n+                tabbedPage\n+            />\n+            <DataManagementPageTabs tab={DataManagementTab.Actions} />\n             <Input.Search\n                 placeholder=\"Search for actions\"\n                 allowClear\ndiff --git a/frontend/src/scenes/data-management/DataManagementPageHeader.tsx b/frontend/src/scenes/data-management/DataManagementPageHeader.tsx\ndeleted file mode 100644\nindex 919fe47ba..000000000\n--- a/frontend/src/scenes/data-management/DataManagementPageHeader.tsx\n+++ /dev/null\n@@ -1,22 +0,0 @@\n-import { PageHeader } from 'lib/components/PageHeader'\n-import React from 'react'\n-import { DataManagementPageTabs, DataManagementTab } from 'scenes/data-management/DataManagementPageTabs'\n-\n-export function DataManagementPageHeader({\n-    activeTab,\n-    hideTabs,\n-}: {\n-    activeTab: DataManagementTab\n-    hideTabs?: boolean\n-}): JSX.Element {\n-    return (\n-        <>\n-            <PageHeader\n-                title=\"Data Management\"\n-                caption=\"Use data management to organize events that come into PostHog. Reduce noise, clarify usage, and help collaborators get the most value from your data.\"\n-                tabbedPage\n-            />\n-            {!hideTabs && <DataManagementPageTabs tab={activeTab} />}\n-        </>\n-    )\n-}\ndiff --git a/frontend/src/scenes/data-management/event-properties/EventPropertyDefinitionsTable.tsx b/frontend/src/scenes/data-management/event-properties/EventPropertyDefinitionsTable.tsx\nindex f2d76f553..ed4cd1f7d 100644\n--- a/frontend/src/scenes/data-management/event-properties/EventPropertyDefinitionsTable.tsx\n+++ b/frontend/src/scenes/data-management/event-properties/EventPropertyDefinitionsTable.tsx\n@@ -13,10 +13,10 @@ import {\n     eventPropertyDefinitionsTableLogic,\n } from 'scenes/data-management/event-properties/eventPropertyDefinitionsTableLogic'\n import { Alert, Input } from 'antd'\n-import { DataManagementPageHeader } from 'scenes/data-management/DataManagementPageHeader'\n-import { DataManagementTab } from 'scenes/data-management/DataManagementPageTabs'\n+import { DataManagementPageTabs, DataManagementTab } from 'scenes/data-management/DataManagementPageTabs'\n import { UsageDisabledWarning } from 'scenes/events/UsageDisabledWarning'\n import { preflightLogic } from 'scenes/PreflightCheck/preflightLogic'\n+import { PageHeader } from 'lib/components/PageHeader'\n \n export const scene: SceneExport = {\n     component: EventPropertyDefinitionsTable,\n@@ -81,7 +81,12 @@ export function EventPropertyDefinitionsTable(): JSX.Element {\n \n     return (\n         <div data-attr=\"manage-events-table\">\n-            <DataManagementPageHeader activeTab={DataManagementTab.EventPropertyDefinitions} />\n+            <PageHeader\n+                title=\"Data Management\"\n+                caption=\"Use data management to organize events that come into PostHog. Reduce noise, clarify usage, and help collaborators get the most value from your data.\"\n+                tabbedPage\n+            />\n+            <DataManagementPageTabs tab={DataManagementTab.EventPropertyDefinitions} />\n             {preflight && !preflight?.is_event_property_usage_enabled ? (\n                 <UsageDisabledWarning tab=\"Event Property Definitions\" />\n             ) : (\ndiff --git a/frontend/src/scenes/data-management/events/EventDefinitionsTable.tsx b/frontend/src/scenes/data-management/events/EventDefinitionsTable.tsx\nindex 9df8d81cc..1b8654cb1 100644\n--- a/frontend/src/scenes/data-management/events/EventDefinitionsTable.tsx\n+++ b/frontend/src/scenes/data-management/events/EventDefinitionsTable.tsx\n@@ -2,7 +2,7 @@ import './EventDefinitionsTable.scss'\n import React from 'react'\n import { useActions, useValues } from 'kea'\n import { LemonTable, LemonTableColumn, LemonTableColumns } from 'lib/components/LemonTable'\n-import { CombinedEvent } from '~/types'\n+import { CombinedEvent, CombinedEventType } from '~/types'\n import {\n     EVENT_DEFINITIONS_PER_PAGE,\n     eventDefinitionsTableLogic,\n@@ -14,17 +14,32 @@ import { organizationLogic } from 'scenes/organizationLogic'\n import { ActionHeader, EventDefinitionHeader } from 'scenes/data-management/events/DefinitionHeader'\n import { humanFriendlyNumber } from 'lib/utils'\n import { EventDefinitionProperties } from 'scenes/data-management/events/EventDefinitionProperties'\n-import { Alert, Input, Row } from 'antd'\n-import { DataManagementPageHeader } from 'scenes/data-management/DataManagementPageHeader'\n-import { DataManagementTab } from 'scenes/data-management/DataManagementPageTabs'\n+import { Alert, Col, Input, Row } from 'antd'\n+import { DataManagementPageTabs, DataManagementTab } from 'scenes/data-management/DataManagementPageTabs'\n import { UsageDisabledWarning } from 'scenes/events/UsageDisabledWarning'\n import { preflightLogic } from 'scenes/PreflightCheck/preflightLogic'\n import { ThirtyDayQueryCountTitle, ThirtyDayVolumeTitle } from 'lib/components/DefinitionPopup/DefinitionPopupContents'\n import { ProfilePicture } from 'lib/components/ProfilePicture'\n import { teamLogic } from 'scenes/teamLogic'\n-import { IconWebhook } from 'lib/components/icons'\n+import { ActionEvent, IconWebhook, UnverifiedEvent } from 'lib/components/icons'\n import { NewActionButton } from 'scenes/actions/NewActionButton'\n import { TZLabel } from 'lib/components/TimezoneAware'\n+import { PageHeader } from 'lib/components/PageHeader'\n+import { LemonSelect, LemonSelectOptions } from '@posthog/lemon-ui'\n+\n+const eventTypeOptions: LemonSelectOptions = {\n+    [CombinedEventType.All]: {\n+        label: 'All types',\n+    },\n+    [CombinedEventType.ActionEvent]: {\n+        label: 'Events',\n+        icon: <ActionEvent />,\n+    },\n+    [CombinedEventType.Event]: {\n+        label: 'Raw events',\n+        icon: <UnverifiedEvent />,\n+    },\n+}\n \n export const scene: SceneExport = {\n     component: EventDefinitionsTable,\n@@ -181,7 +196,12 @@ export function EventDefinitionsTable(): JSX.Element {\n \n     return (\n         <div data-attr=\"manage-events-table\">\n-            <DataManagementPageHeader activeTab={DataManagementTab.EventDefinitions} />\n+            <PageHeader\n+                title=\"Data Management\"\n+                caption=\"Use data management to organize events that come into PostHog. Reduce noise, clarify usage, and help collaborators get the most value from your data.\"\n+                tabbedPage\n+                buttons={shouldSimplifyActions && <NewActionButton />}\n+            />\n             {shouldSimplifyActions && (\n                 <Alert\n                     style={{ marginBottom: 16, display: 'flex', alignItems: 'center' }}\n@@ -197,37 +217,50 @@ export function EventDefinitionsTable(): JSX.Element {\n                     closable\n                 />\n             )}\n+            <DataManagementPageTabs tab={DataManagementTab.EventDefinitions} />\n             {preflight && !preflight?.is_event_property_usage_enabled && (\n                 <UsageDisabledWarning tab=\"Event Definitions\" />\n             )}\n-            <div\n+            <Row\n+                justify=\"space-between\"\n                 style={{\n-                    display: 'flex',\n-                    flexWrap: 'wrap',\n-                    gap: '0.5rem',\n-                    flexDirection: 'row',\n-                    alignItems: 'center',\n-                    width: '100%',\n+                    paddingBottom: '1rem',\n                     marginBottom: '1rem',\n+                    borderBottom: '1px solid var(--border)',\n+                    gap: '0.75rem',\n                 }}\n             >\n-                <Input.Search\n-                    placeholder=\"Search for events\"\n-                    allowClear\n-                    enterButton\n-                    value={filters.event}\n-                    style={{ maxWidth: 600, width: 'initial' }}\n-                    onChange={(e) => {\n-                        setFilters({ event: e.target.value || '' })\n-                    }}\n-                />\n+                <Col>\n+                    <Input.Search\n+                        placeholder=\"Search for events\"\n+                        allowClear\n+                        enterButton\n+                        value={filters.event}\n+                        style={{ maxWidth: 600, width: 'initial' }}\n+                        onChange={(e) => {\n+                            setFilters({ event: e.target.value || '' })\n+                        }}\n+                    />\n+                </Col>\n                 {shouldSimplifyActions && (\n-                    <>\n-                        <div style={{ flex: 1 }} />\n-                        <NewActionButton />\n-                    </>\n+                    <Row style={{ gap: '0.75rem' }}>\n+                        <Col style={{ display: 'flex', gap: '0.75rem', alignItems: 'center' }}>\n+                            Type:\n+                            <LemonSelect\n+                                value={filters.event_type}\n+                                options={eventTypeOptions}\n+                                data-attr=\"event-type-filter\"\n+                                dropdownMatchSelectWidth={false}\n+                                bordered\n+                                onChange={(value) => {\n+                                    setFilters({ event_type: value as CombinedEventType })\n+                                }}\n+                                size=\"small\"\n+                            />\n+                        </Col>\n+                    </Row>\n                 )}\n-            </div>\n+            </Row>\n             <LemonTable\n                 columns={columns}\n                 className=\"events-definition-table\"\ndiff --git a/frontend/src/scenes/data-management/events/eventDefinitionsTableLogic.test.ts b/frontend/src/scenes/data-management/events/eventDefinitionsTableLogic.test.ts\nindex 8bad16db8..ada655812 100644\n--- a/frontend/src/scenes/data-management/events/eventDefinitionsTableLogic.test.ts\n+++ b/frontend/src/scenes/data-management/events/eventDefinitionsTableLogic.test.ts\n@@ -12,12 +12,14 @@ import { organizationLogic } from 'scenes/organizationLogic'\n import { combineUrl, router } from 'kea-router'\n import { keyMappingKeys } from 'lib/components/PropertyKeyInfo'\n import { urls } from 'scenes/urls'\n+import { CombinedEventType } from '~/types'\n \n describe('eventDefinitionsTableLogic', () => {\n     let logic: ReturnType<typeof eventDefinitionsTableLogic.build>\n     const startingUrl = `api/projects/${MOCK_TEAM_ID}/event_definitions${\n         combineUrl('', {\n             limit: EVENT_DEFINITIONS_PER_PAGE,\n+            event_type: CombinedEventType.Event,\n         }).search\n     }`\n \n@@ -37,6 +39,7 @@ describe('eventDefinitionsTableLogic', () => {\n                                         ...req.url.searchParams,\n                                         limit: 50,\n                                         offset: 50,\n+                                        event_type: CombinedEventType.Event,\n                                     }).search\n                                 }`,\n                             },\n@@ -53,6 +56,7 @@ describe('eventDefinitionsTableLogic', () => {\n                                         ...req.url.searchParams,\n                                         limit: 50,\n                                         offset: undefined,\n+                                        event_type: CombinedEventType.Event,\n                                     }).search\n                                 }`,\n                                 next: null,\n@@ -145,7 +149,7 @@ describe('eventDefinitionsTableLogic', () => {\n                         count: 50,\n                         results: mockEventDefinitions.slice(0, 50),\n                         previous: null,\n-                        next: `api/projects/${MOCK_TEAM_ID}/event_definitions?limit=50&offset=50`,\n+                        next: `api/projects/${MOCK_TEAM_ID}/event_definitions?limit=50&offset=50&event_type=event`,\n                     }),\n                     apiCache: partial({\n                         [startingUrl]: partial({\n@@ -177,20 +181,22 @@ describe('eventDefinitionsTableLogic', () => {\n                 .toMatchValues({\n                     eventDefinitions: partial({\n                         count: 50,\n-                        next: `api/projects/${MOCK_TEAM_ID}/event_definitions?limit=50&offset=50`,\n+                        next: `api/projects/${MOCK_TEAM_ID}/event_definitions?limit=50&offset=50&event_type=event`,\n                     }),\n                 })\n             expect(api.get).toBeCalledTimes(1)\n             // Forwards\n             await expectLogic(logic, () => {\n-                logic.actions.loadEventDefinitions(`api/projects/${MOCK_TEAM_ID}/event_definitions?limit=50&offset=50`)\n+                logic.actions.loadEventDefinitions(\n+                    `api/projects/${MOCK_TEAM_ID}/event_definitions?limit=50&offset=50&event_type=event`\n+                )\n             })\n                 .toDispatchActions(['loadEventDefinitions', 'loadEventDefinitionsSuccess'])\n                 .toFinishAllListeners()\n                 .toMatchValues({\n                     eventDefinitions: partial({\n                         count: 6,\n-                        previous: `api/projects/${MOCK_TEAM_ID}/event_definitions?limit=50`,\n+                        previous: `api/projects/${MOCK_TEAM_ID}/event_definitions?limit=50&event_type=event`,\n                         next: null,\n                     }),\n                 })\n@@ -203,7 +209,7 @@ describe('eventDefinitionsTableLogic', () => {\n                 .toMatchValues({\n                     eventDefinitions: partial({\n                         count: 50,\n-                        next: `api/projects/${MOCK_TEAM_ID}/event_definitions?limit=50&offset=50`,\n+                        next: `api/projects/${MOCK_TEAM_ID}/event_definitions?limit=50&offset=50&event_type=event`,\n                     }),\n                 })\n             expect(api.get).toBeCalledTimes(2)\ndiff --git a/frontend/src/scenes/data-management/events/eventDefinitionsTableLogic.ts b/frontend/src/scenes/data-management/events/eventDefinitionsTableLogic.ts\nindex 06435dd79..c98183c29 100644\n--- a/frontend/src/scenes/data-management/events/eventDefinitionsTableLogic.ts\n+++ b/frontend/src/scenes/data-management/events/eventDefinitionsTableLogic.ts\n@@ -1,5 +1,12 @@\n import { actions, kea, key, listeners, path, props, reducers, selectors } from 'kea'\n-import { ActionType, AnyPropertyFilter, CombinedEvent, EventDefinition, PropertyDefinition } from '~/types'\n+import {\n+    ActionType,\n+    AnyPropertyFilter,\n+    CombinedEvent,\n+    CombinedEventType,\n+    EventDefinition,\n+    PropertyDefinition,\n+} from '~/types'\n import type { eventDefinitionsTableLogicType } from './eventDefinitionsTableLogicType'\n import api, { PaginatedResponse } from 'lib/api'\n import { keyMappingKeys } from 'lib/components/PropertyKeyInfo'\n@@ -25,12 +32,14 @@ export interface PropertyDefinitionsPaginatedResponse extends PaginatedResponse<\n export interface Filters {\n     event: string\n     properties: AnyPropertyFilter[]\n+    event_type: CombinedEventType\n }\n \n function cleanFilters(filter: Partial<Filters>): Filters {\n     return {\n         event: '',\n         properties: [],\n+        event_type: CombinedEventType.All,\n         ...filter,\n     }\n }\n@@ -61,11 +70,13 @@ function normalizeEventDefinitionEndpointUrl({\n     searchParams = {},\n     full = false,\n     shouldSimplifyActions = false,\n+    eventTypeFilter = CombinedEventType.All,\n }: {\n     url?: string | null | undefined\n     searchParams?: Record<string, any>\n     full?: boolean\n     shouldSimplifyActions?: boolean\n+    eventTypeFilter?: CombinedEventType\n }): string | null {\n     if (!full && !url) {\n         return null\n@@ -74,7 +85,9 @@ function normalizeEventDefinitionEndpointUrl({\n         ...(url\n             ? {\n                   ...combineUrl(url).searchParams,\n-                  ...(shouldSimplifyActions ? { include_actions: true } : {}),\n+                  ...(shouldSimplifyActions\n+                      ? { event_type: eventTypeFilter }\n+                      : { event_type: CombinedEventType.Event }),\n               }\n             : {}),\n         ...searchParams,\n@@ -135,6 +148,7 @@ export const eventDefinitionsTableLogic = kea<eventDefinitionsTableLogicType>([\n                     let url = normalizeEventDefinitionEndpointUrl({\n                         url: _url,\n                         shouldSimplifyActions: values.shouldSimplifyActions,\n+                        eventTypeFilter: values.filters.event_type,\n                     })\n                     if (url && url in (cache.apiCache ?? {})) {\n                         return cache.apiCache[url]\n@@ -144,9 +158,11 @@ export const eventDefinitionsTableLogic = kea<eventDefinitionsTableLogicType>([\n                         url = api.eventDefinitions.determineListEndpoint({\n                             ...(values.shouldSimplifyActions\n                                 ? {\n-                                      include_actions: true,\n+                                      event_type: values.filters.event_type,\n                                   }\n-                                : {}),\n+                                : {\n+                                      event_type: CombinedEventType.Event,\n+                                  }),\n                         })\n                     }\n                     await breakpoint(200)\n@@ -161,10 +177,12 @@ export const eventDefinitionsTableLogic = kea<eventDefinitionsTableLogicType>([\n                             previous: normalizeEventDefinitionEndpointUrl({\n                                 url: response.previous,\n                                 shouldSimplifyActions: values.shouldSimplifyActions,\n+                                eventTypeFilter: values.filters.event_type,\n                             }),\n                             next: normalizeEventDefinitionEndpointUrl({\n                                 url: response.next,\n                                 shouldSimplifyActions: values.shouldSimplifyActions,\n+                                eventTypeFilter: values.filters.event_type,\n                             }),\n                             current: url,\n                             page:\n@@ -297,6 +315,7 @@ export const eventDefinitionsTableLogic = kea<eventDefinitionsTableLogicType>([\n                     searchParams: { search: values.filters.event },\n                     full: true,\n                     shouldSimplifyActions: values.shouldSimplifyActions,\n+                    eventTypeFilter: values.filters.event_type,\n                 })\n             )\n         },\ndiff --git a/frontend/src/types.ts b/frontend/src/types.ts\nindex f5743c2d5..bf3251874 100644\n--- a/frontend/src/types.ts\n+++ b/frontend/src/types.ts\n@@ -1946,6 +1946,12 @@ export type Duration = {\n \n export type CombinedEvent = EventDefinition | ActionType\n \n+export enum CombinedEventType {\n+    All = 'all',\n+    Event = 'event',\n+    ActionEvent = 'action_event',\n+}\n+\n export interface IntegrationType {\n     id: number\n     kind: 'slack'\ndiff --git a/posthog/api/event_definition.py b/posthog/api/event_definition.py\nindex 98c472c47..70e5a1276 100644\n--- a/posthog/api/event_definition.py\n+++ b/posthog/api/event_definition.py\n@@ -7,7 +7,7 @@ from posthog.api.routing import StructuredViewSetMixin\n from posthog.api.shared import UserBasicSerializer\n from posthog.api.tagged_item import TaggedItemSerializerMixin, TaggedItemViewSetMixin\n from posthog.api.utils import create_event_definitions_sql\n-from posthog.constants import AvailableFeature\n+from posthog.constants import AvailableFeature, CombinedEventType\n from posthog.exceptions import EnterpriseFeatureException\n from posthog.filters import TermSearchFilterBackend, term_search_filter_sql\n from posthog.models import EventDefinition, TaggedItem\n@@ -68,9 +68,9 @@ class EventDefinitionViewSet(\n     search_fields = [\"name\"]\n \n     def get_queryset(self):\n-        # `include_actions`\n-        #   If true, return both list of event definitions and actions together.\n-        include_actions = self.request.GET.get(\"include_actions\", None) == \"true\"\n+        # `type` = 'all' | 'event' | 'action_event'\n+        # Allows this endpoint to return lists of event definitions, actions, or both.\n+        event_type = CombinedEventType(self.request.GET.get(\"event_type\", CombinedEventType.ALL))\n \n         search = self.request.GET.get(\"search\", None)\n         search_query, search_kwargs = term_search_filter_sql(self.search_fields, search)\n@@ -84,7 +84,7 @@ class EventDefinitionViewSet(\n             from ee.models.event_definition import EnterpriseEventDefinition\n \n             # Prevent fetching deprecated `tags` field. Tags are separately fetched in TaggedItemSerializerMixin\n-            sql = create_event_definitions_sql(include_actions, is_enterprise=True, conditions=search_query)\n+            sql = create_event_definitions_sql(event_type, is_enterprise=True, conditions=search_query)\n \n             ee_event_definitions = EnterpriseEventDefinition.objects.raw(sql, params=params)\n             ee_event_definitions_list = ee_event_definitions.prefetch_related(\n@@ -93,7 +93,7 @@ class EventDefinitionViewSet(\n \n             return ee_event_definitions_list\n \n-        sql = create_event_definitions_sql(include_actions, is_enterprise=False, conditions=search_query)\n+        sql = create_event_definitions_sql(event_type, is_enterprise=False, conditions=search_query)\n         event_definitions_list = EventDefinition.objects.raw(sql, params=params)\n \n         return event_definitions_list\ndiff --git a/posthog/api/test/test_event_definition.py b/posthog/api/test/test_event_definition.py\nindex e857517a7..efa41de9a 100644\n--- a/posthog/api/test/test_event_definition.py\n+++ b/posthog/api/test/test_event_definition.py\n@@ -151,10 +151,27 @@ class TestEventDefinitionAPI(APIBaseTest):\n         for item in response.json()[\"results\"]:\n             self.assertIn(item[\"name\"], [\"watched_movie\"])\n \n-    def test_include_actions(self):\n+    def test_event_type_event(self):\n         action = Action.objects.create(team=self.demo_team, name=\"action1_app\")\n \n-        response = self.client.get(\"/api/projects/@current/event_definitions/?search=app&include_actions=true\")\n+        response = self.client.get(\"/api/projects/@current/event_definitions/?search=app&event_type=event\")\n+        self.assertEqual(response.status_code, status.HTTP_200_OK)\n+        self.assertEqual(response.json()[\"count\"], 2)\n+        self.assertNotEqual(response.json()[\"results\"][0][\"name\"], action.name)\n+\n+    def test_event_type_action_event(self):\n+        action = Action.objects.create(team=self.demo_team, name=\"action1_app\")\n+\n+        response = self.client.get(\"/api/projects/@current/event_definitions/?search=app&event_type=action_event\")\n+        self.assertEqual(response.status_code, status.HTTP_200_OK)\n+        self.assertEqual(response.json()[\"count\"], 1)\n+        self.assertEqual(response.json()[\"results\"][0][\"action_id\"], action.id)\n+        self.assertEqual(response.json()[\"results\"][0][\"name\"], action.name)\n+\n+    def test_event_type_all(self):\n+        action = Action.objects.create(team=self.demo_team, name=\"action1_app\")\n+\n+        response = self.client.get(\"/api/projects/@current/event_definitions/?search=app&event_type=all\")\n         self.assertEqual(response.status_code, status.HTTP_200_OK)\n         self.assertEqual(response.json()[\"count\"], 3)\n         self.assertEqual(response.json()[\"results\"][0][\"action_id\"], action.id)\ndiff --git a/posthog/api/utils.py b/posthog/api/utils.py\nindex 3a4565563..db6d987e5 100644\n--- a/posthog/api/utils.py\n+++ b/posthog/api/utils.py\n@@ -11,6 +11,7 @@ from rest_framework import request, status\n from sentry_sdk import capture_exception\n from statshog.defaults.django import statsd\n \n+from posthog.constants import CombinedEventType\n from posthog.exceptions import RequestParsingError, generate_exception_response\n from posthog.models import Action, Entity, EventDefinition\n from posthog.models.entity import MATH_TYPE\n@@ -329,7 +330,9 @@ def safe_clickhouse_string(s: str) -> str:\n     return s\n \n \n-def create_event_definitions_sql(include_actions: bool, is_enterprise: bool = False, conditions: str = \"\") -> str:\n+def create_event_definitions_sql(\n+    event_type: CombinedEventType, is_enterprise: bool = False, conditions: str = \"\"\n+) -> str:\n     # Prevent fetching deprecated `tags` field. Tags are separately fetched in TaggedItemSerializerMixin\n     if is_enterprise:\n         from ee.models import EnterpriseEventDefinition\n@@ -345,74 +348,88 @@ def create_event_definitions_sql(include_actions: bool, is_enterprise: bool = Fa\n     }\n     shared_conditions = f\"WHERE team_id = %(team_id)s {conditions}\"\n \n-    if include_actions:\n-        event_definition_fields.discard('\"id\"')\n-        action_fields = {\n-            f'\"{f.column}\"'  # type: ignore\n-            for f in Action._meta.get_fields()\n-            if hasattr(f, \"column\") and f.column not in [\"events\", \"id\"]  # type: ignore\n-        }\n-        combined_fields = event_definition_fields.union(action_fields)\n-\n-        raw_event_definition_fields = \",\".join(\n-            [f\"NULL AS {col}\" if col in action_fields - event_definition_fields else col for col in combined_fields]\n-            + [\"id\", \"NULL AS action_id\", \"last_seen_at AS last_updated_at\"]\n-        )\n-        raw_action_fields = \",\".join(\n-            [f\"NULL AS {col}\" if col in event_definition_fields - action_fields else col for col in combined_fields]\n-            + [\"NULL AS id\", \"id AS action_id\", \"last_calculated_at AS last_updated_at\"]\n-        )\n+    def select_ee_event_definitions(fields: str):\n+        return f\"\"\"\n+            SELECT {fields}\n+            FROM ee_enterpriseeventdefinition\n+            FULL OUTER JOIN posthog_eventdefinition ON posthog_eventdefinition.id=ee_enterpriseeventdefinition.eventdefinition_ptr_id\n+        \"\"\"\n+\n+    def select_event_definitions(fields: str):\n+        return f\"\"\"\n+            SELECT {fields} FROM posthog_eventdefinition\n+        \"\"\"\n+\n+    # Only return event definitions\n+    if event_type == CombinedEventType.EVENT:\n+        raw_event_definition_fields = \",\".join(event_definition_fields)\n         ordering = (\n-            \"ORDER BY last_updated_at DESC NULLS LAST, query_usage_30_day DESC NULLS LAST, name ASC\"\n+            \"ORDER BY last_seen_at DESC NULLS LAST, query_usage_30_day DESC NULLS LAST, name ASC\"\n             if is_enterprise\n             else \"ORDER BY name ASC\"\n         )\n \n-        event_definition_table = (\n+        return (\n             f\"\"\"\n-                SELECT {raw_event_definition_fields}\n-                FROM ee_enterpriseeventdefinition\n-                FULL OUTER JOIN posthog_eventdefinition ON posthog_eventdefinition.id=ee_enterpriseeventdefinition.eventdefinition_ptr_id\n+                {select_ee_event_definitions(raw_event_definition_fields)}\n+                {shared_conditions}\n+                {ordering}\n             \"\"\"\n             if is_enterprise\n             else f\"\"\"\n-                SELECT {raw_event_definition_fields} FROM posthog_eventdefinition\n+                {select_event_definitions(raw_event_definition_fields)}\n+                {shared_conditions}\n+                {ordering}\n             \"\"\"\n         )\n \n-        return f\"\"\"\n-        SELECT * FROM (\n-            {event_definition_table}\n-            {shared_conditions}\n-            UNION\n-            SELECT {raw_action_fields} FROM posthog_action\n-            {shared_conditions} AND posthog_action.deleted = false\n-        ) as T\n-        {ordering}\n-        \"\"\"\n+    event_definition_fields.discard('\"id\"')\n+    action_fields = {\n+        f'\"{f.column}\"'  # type: ignore\n+        for f in Action._meta.get_fields()\n+        if hasattr(f, \"column\") and f.column not in [\"events\", \"id\"]  # type: ignore\n+    }\n+    combined_fields = event_definition_fields.union(action_fields)\n \n-    raw_event_definition_fields = \",\".join(event_definition_fields)\n+    raw_event_definition_fields = \",\".join(\n+        [f\"NULL AS {col}\" if col in action_fields - event_definition_fields else col for col in combined_fields]\n+        + [\"id\", \"NULL AS action_id\", \"last_seen_at AS last_updated_at\"]\n+    )\n+    raw_action_fields = \",\".join(\n+        [f\"NULL AS {col}\" if col in event_definition_fields - action_fields else col for col in combined_fields]\n+        + [\"NULL AS id\", \"id AS action_id\", \"last_calculated_at AS last_updated_at\"]\n+    )\n     ordering = (\n-        \"ORDER BY last_seen_at DESC NULLS LAST, query_usage_30_day DESC NULLS LAST, name ASC\"\n+        \"ORDER BY last_updated_at DESC NULLS LAST, query_usage_30_day DESC NULLS LAST, name ASC\"\n         if is_enterprise\n         else \"ORDER BY name ASC\"\n     )\n \n-    return (\n-        f\"\"\"\n-        SELECT {raw_event_definition_fields}\n-        FROM ee_enterpriseeventdefinition\n-        FULL OUTER JOIN posthog_eventdefinition ON posthog_eventdefinition.id=ee_enterpriseeventdefinition.eventdefinition_ptr_id\n-        {shared_conditions}\n-        {ordering}\n-    \"\"\"\n+    event_definition_table = (\n+        select_ee_event_definitions(raw_event_definition_fields)\n         if is_enterprise\n-        else f\"\"\"\n-        SELECT {raw_event_definition_fields} FROM posthog_eventdefinition\n+        else select_event_definitions(raw_event_definition_fields)\n+    )\n+\n+    # Return only actions\n+    if event_type == CombinedEventType.ACTION_EVENT:\n+        return f\"\"\"\n+            SELECT {raw_action_fields} FROM posthog_action\n+            {shared_conditions} AND posthog_action.deleted = false\n+            {ordering}\n+        \"\"\"\n+\n+    # By default, return both event definitions and actions\n+    return f\"\"\"\n+    SELECT * FROM (\n+        {event_definition_table}\n         {shared_conditions}\n-        {ordering}\n+        UNION\n+        SELECT {raw_action_fields} FROM posthog_action\n+        {shared_conditions} AND posthog_action.deleted = false\n+    ) as T\n+    {ordering}\n     \"\"\"\n-    )\n \n \n def get_pk_or_uuid(queryset: QuerySet, key: Union[int, str]) -> QuerySet:\ndiff --git a/posthog/constants.py b/posthog/constants.py\nindex c5ded8641..d6b12920a 100644\n--- a/posthog/constants.py\n+++ b/posthog/constants.py\n@@ -251,3 +251,10 @@ GROUP_TYPES_LIMIT = 5\n BREAKDOWN_VALUES_LIMIT = 25\n BREAKDOWN_VALUES_LIMIT_FOR_COUNTRIES = 300\n CSV_EXPORT_LIMIT = 10000\n+\n+\n+class CombinedEventType(str, Enum):\n+    # Mimics CombinedEventType in frontend/src/types.ts\n+    ALL = \"all\"\n+    EVENT = \"event\"\n+    ACTION_EVENT = \"action_event\"\n"
  },
  "84718c7beffa3dcd84c2feab79af5084a60fd9d9": {
    "hash": "84718c7beffa3dcd84c2feab79af5084a60fd9d9",
    "message": "fix(column-configurator): Row background disappears when dragging (#11556)\n    \n    Co-authored-by: GitStart <gitstart@users.noreply.github.com>",
    "diff": "commit 84718c7beffa3dcd84c2feab79af5084a60fd9d9\nAuthor: GitStart <1501599+gitstart@users.noreply.github.com>\nDate:   Wed Aug 31 18:05:38 2022 +0545\n\n    fix(column-configurator): Row background disappears when dragging (#11556)\n    \n    Co-authored-by: GitStart <gitstart@users.noreply.github.com>\n\ndiff --git a/frontend/src/lib/components/ResizableTable/TableConfig.scss b/frontend/src/lib/components/ResizableTable/TableConfig.scss\nindex 2638059c7..8132facb2 100644\n--- a/frontend/src/lib/components/ResizableTable/TableConfig.scss\n+++ b/frontend/src/lib/components/ResizableTable/TableConfig.scss\n@@ -68,6 +68,7 @@\n     align-items: center;\n     justify-content: flex-start;\n     padding: 0.5rem;\n+    background-color: var(--primary-bg-hover);\n \n     .drag-handle {\n         color: var(--default);\n"
  },
  "3358992dd88640a42751cb8f43fbd1ad57278578": {
    "hash": "3358992dd88640a42751cb8f43fbd1ad57278578",
    "message": "fix: swallow MissingSchema exception when checking export and don't listify parameters (#11206)\n    \n    * fly by: logger can't cope with the exception without exc_info=True\n    \n    * chore: swallow missing schema exception when checking export task\n    \n    * confirm one of the failing URLs doesn't mess up absute_uri util function\n    \n    * parse URL differently\n    \n    * allow add any query param",
    "diff": "commit 3358992dd88640a42751cb8f43fbd1ad57278578\nAuthor: Paul D'Ambra <paul@posthog.com>\nDate:   Wed Aug 10 09:34:44 2022 +0100\n\n    fix: swallow MissingSchema exception when checking export and don't listify parameters (#11206)\n    \n    * fly by: logger can't cope with the exception without exc_info=True\n    \n    * chore: swallow missing schema exception when checking export task\n    \n    * confirm one of the failing URLs doesn't mess up absute_uri util function\n    \n    * parse URL differently\n    \n    * allow add any query param\n\ndiff --git a/posthog/api/exports.py b/posthog/api/exports.py\nindex 646e00af5..217024e42 100644\n--- a/posthog/api/exports.py\n+++ b/posthog/api/exports.py\n@@ -1,6 +1,7 @@\n from typing import Any, Dict\n \n import celery\n+import requests.exceptions\n import structlog\n from django.http import HttpResponse\n from rest_framework import mixins, serializers, viewsets\n@@ -68,8 +69,11 @@ class ExportedAssetSerializer(serializers.ModelSerializer):\n         except celery.exceptions.TimeoutError:\n             # If the rendering times out - fine, the frontend will poll instead for the response\n             pass\n+        except requests.exceptions.MissingSchema:\n+            # regression test see https://github.com/PostHog/posthog/issues/11204\n+            pass\n         except NotImplementedError as ex:\n-            logger.error(\"exporters.unsupported_export_type\", exception=ex)\n+            logger.error(\"exporters.unsupported_export_type\", exception=ex, exc_info=True)\n             raise serializers.ValidationError(\n                 {\"export_format\": [\"This type of export is not supported for this resource.\"]}\n             )\ndiff --git a/posthog/api/test/test_exports.py b/posthog/api/test/test_exports.py\nindex 96d8ab529..fc5d8313c 100644\n--- a/posthog/api/test/test_exports.py\n+++ b/posthog/api/test/test_exports.py\n@@ -3,6 +3,7 @@ from typing import Dict, List, Optional\n from unittest.mock import patch\n \n import celery\n+import requests.exceptions\n from boto3 import resource\n from botocore.client import Config\n from django.http import HttpResponse\n@@ -86,6 +87,25 @@ class TestExports(APIBaseTest):\n \n         mock_exporter_task.export_asset.delay.assert_called_once_with(data[\"id\"])\n \n+    @patch(\"posthog.api.exports.exporter\")\n+    def test_swallow_missing_schema_and_allow_front_end_to_poll(self, mock_exporter_task) -> None:\n+        # regression test see https://github.com/PostHog/posthog/issues/11204\n+\n+        mock_exporter_task.get.side_effect = requests.exceptions.MissingSchema(\"why is this raised?\")\n+\n+        response = self.client.post(\n+            f\"/api/projects/{self.team.id}/exports\",\n+            {\n+                \"export_format\": \"text/csv\",\n+                \"export_context\": {\n+                    \"path\": f\"api/projects/{self.team.id}/insights/trend/?insight=TRENDS&events=%5B%7B%22id%22%3A%22search%20filtered%22%2C%22name%22%3A%22search%20filtered%22%2C%22type%22%3A%22events%22%2C%22order%22%3A0%7D%5D&actions=%5B%5D&display=ActionsTable&interval=day&breakdown=filters&new_entity=%5B%5D&properties=%5B%5D&breakdown_type=event&filter_test_accounts=false&date_from=-14d\",\n+                },\n+            },\n+        )\n+        self.assertEqual(response.status_code, status.HTTP_201_CREATED, msg=f\"was not HTTP 201 😱 - {response.json()}\")\n+        data = response.json()\n+        mock_exporter_task.export_asset.delay.assert_called_once_with(data[\"id\"])\n+\n     @patch(\"posthog.api.exports.exporter\")\n     @freeze_time(\"2021-08-25T22:09:14.252Z\")\n     def test_can_create_new_valid_export_insight(self, mock_exporter_task) -> None:\n@@ -274,46 +294,47 @@ class TestExports(APIBaseTest):\n \n         after = (datetime.datetime.now() - datetime.timedelta(minutes=10)).isoformat()\n \n-        instance = ExportedAsset.objects.create(\n-            team=self.team,\n-            dashboard=None,\n-            insight=None,\n-            export_format=ExportedAsset.ExportFormat.CSV,\n-            # has to have after param to allow paging to be tested\n-            export_context={\n-                \"path\": \"&\".join(\n-                    [\n-                        f\"/api/projects/{self.team.id}/events?orderBy=%5B%22-timestamp%22%5D\",\n-                        \"properties=%5B%7B%22key%22%3A%22%24browser%22%2C%22value%22%3A%5B%22Safari%22%5D%2C%22operator%22%3A%22exact%22%2C%22type%22%3A%22event%22%7D%5D\",\n-                        f\"after={after}\",\n-                    ]\n-                )\n-            },\n-            created_by=self.user,\n-        )\n-\n         def requests_side_effect(*args, **kwargs):\n             return self.client.get(kwargs[\"url\"], kwargs[\"json\"], **kwargs[\"headers\"])\n \n         patched_request.side_effect = requests_side_effect\n \n-        # pass the root in because django/celery refused to override it otherwise\n+        response = self.client.post(\n+            f\"/api/projects/{self.team.id}/exports\",\n+            {\n+                \"export_format\": \"text/csv\",\n+                \"export_context\": {\n+                    \"path\": \"&\".join(\n+                        [\n+                            f\"/api/projects/{self.team.id}/events?orderBy=%5B%22-timestamp%22%5D\",\n+                            \"properties=%5B%7B%22key%22%3A%22%24browser%22%2C%22value%22%3A%5B%22Safari%22%5D%2C%22operator%22%3A%22exact%22%2C%22type%22%3A%22event%22%7D%5D\",\n+                            f\"after={after}\",\n+                        ]\n+                    ),\n+                },\n+            },\n+        )\n+        self.assertEqual(response.status_code, status.HTTP_201_CREATED, msg=f\"was not HTTP 201 😱 - {response.json()}\")\n+        instance = response.json()\n+\n         # limit the query to force it to page against the API\n         with self.settings(OBJECT_STORAGE_ENABLED=False):\n-            exporter.export_asset(instance.id, limit=1)\n+            exporter.export_asset(instance[\"id\"], limit=1)\n \n-        response: Optional[HttpResponse] = None\n+        download_response: Optional[HttpResponse] = None\n         attempt_count = 0\n-        while attempt_count < 10 and not response:\n-            response = self.client.get(f\"/api/projects/{self.team.id}/exports/{instance.id}/content?download=true\")\n+        while attempt_count < 10 and not download_response:\n+            download_response = self.client.get(\n+                f\"/api/projects/{self.team.id}/exports/{instance['id']}/content?download=true\"\n+            )\n             attempt_count += 1\n \n-        if not response:\n+        if not download_response:\n             self.fail(\"must have a response by this point\")  # hi mypy\n \n-        self.assertEqual(response.status_code, status.HTTP_200_OK)\n-        self.assertIsNotNone(response.content)\n-        file_content = response.content.decode(\"utf-8\")\n+        self.assertEqual(download_response.status_code, status.HTTP_200_OK)\n+        self.assertIsNotNone(download_response.content)\n+        file_content = download_response.content.decode(\"utf-8\")\n         file_lines = file_content.split(\"\\n\")\n         # has a header row and at least two other rows\n         # don't care if the DB hasn't been reset before the test\ndiff --git a/posthog/tasks/exports/csv_exporter.py b/posthog/tasks/exports/csv_exporter.py\nindex 2fd1fec62..b109e7bd5 100644\n--- a/posthog/tasks/exports/csv_exporter.py\n+++ b/posthog/tasks/exports/csv_exporter.py\n@@ -1,6 +1,6 @@\n import datetime\n-from typing import Any, Dict, List, Optional\n-from urllib.parse import parse_qs, urlencode, urlparse, urlunparse\n+from typing import Any, Dict, List, Optional, Tuple\n+from urllib.parse import parse_qsl, quote, urlencode, urlparse, urlunparse\n \n import requests\n import structlog\n@@ -41,11 +41,26 @@ logger = structlog.get_logger(__name__)\n # 5. We save the final blob output and update the ExportedAsset\n \n \n-def _modifiy_query(url: str, params: Dict[str, List[str]]) -> str:\n+def add_limit(url: str, params: Dict[str, str]) -> str:\n+    \"\"\"\n+    Uses parse_qsl because parse_qs turns all values into lists but doesn't unbox them when re-encoded\n+    \"\"\"\n     parsed = urlparse(url)\n-    query_params = parse_qs(parsed.query)\n-    query_params.update(params)\n-    parsed._replace(query=urlencode(query_params))\n+    query_params = parse_qsl(parsed.query, keep_blank_values=True)\n+\n+    update_params: List[Tuple[str, Any]] = []\n+    for param, value in query_params:\n+        if param in params:\n+            update_params.append((param, params.pop(param)))\n+        else:\n+            update_params.append((param, value))\n+\n+    for key, value in params.items():\n+        update_params.append((key, value))\n+\n+    # mypy bug ? https://github.com/python/typeshed/issues/4234\n+    encodedQueryParams = urlencode(update_params, quote_via=quote)  # type: ignore\n+    parsed = parsed._replace(query=encodedQueryParams)\n     return urlunparse(parsed)\n \n \n@@ -151,13 +166,19 @@ def _export_to_csv(exported_asset: ExportedAsset, limit: int = 1000, max_limit:\n     all_csv_rows: List[Any] = []\n \n     while len(all_csv_rows) < max_limit:\n-        url = _modifiy_query(next_url or absolute_uri(path), {\"limit\": [str(limit)]})\n+        url = add_limit(next_url or absolute_uri(path), {\"limit\": str(limit)})\n \n         response = requests.request(\n             method=method.lower(), url=url, json=body, headers={\"Authorization\": f\"Bearer {access_token}\"},\n         )\n+\n         if response.status_code != 200:\n-            raise Exception(f\"export API call failed with status_code: {response.status_code}\")\n+            # noinspection PyBroadException\n+            try:\n+                response_json = response.json()\n+            except Exception:\n+                response_json = \"no response json to parse\"\n+            raise Exception(f\"export API call failed with status_code: {response.status_code}. {response_json}\")\n \n         # Figure out how to handle funnel polling....\n         data = response.json()\ndiff --git a/posthog/tasks/exports/test/test_csv_exporter.py b/posthog/tasks/exports/test/test_csv_exporter.py\nindex 33142e6b3..aad7a575b 100644\n--- a/posthog/tasks/exports/test/test_csv_exporter.py\n+++ b/posthog/tasks/exports/test/test_csv_exporter.py\n@@ -1,3 +1,4 @@\n+from typing import Any, Dict\n from unittest.mock import MagicMock, Mock, patch\n \n import pytest\n@@ -14,10 +15,15 @@ from posthog.settings import (\n from posthog.storage import object_storage\n from posthog.storage.object_storage import ObjectStorageError\n from posthog.tasks.exports import csv_exporter\n+from posthog.tasks.exports.csv_exporter import add_limit\n from posthog.test.base import APIBaseTest\n+from posthog.utils import absolute_uri\n \n TEST_BUCKET = \"Test-Exports\"\n \n+# see GitHub issue #11204\n+regression_11204 = \"api/projects/6642/insights/trend/?events=%5B%7B%22id%22%3A%22product%20viewed%22%2C%22name%22%3A%22product%20viewed%22%2C%22type%22%3A%22events%22%2C%22order%22%3A0%7D%5D&actions=%5B%5D&display=ActionsTable&insight=TRENDS&interval=day&breakdown=productName&new_entity=%5B%5D&properties=%5B%5D&step_limit=5&funnel_filter=%7B%7D&breakdown_type=event&exclude_events=%5B%5D&path_groupings=%5B%5D&include_event_types=%5B%22%24pageview%22%5D&filter_test_accounts=false&local_path_cleaning_filters=%5B%5D&date_from=-14d&offset=50\"\n+\n \n class TestCSVExporter(APIBaseTest):\n     @pytest.fixture(autouse=True)\n@@ -160,3 +166,24 @@ class TestCSVExporter(APIBaseTest):\n \n             with pytest.raises(Exception, match=\"export API call failed with status_code: 403\"):\n                 csv_exporter.export_csv(exported_asset)\n+\n+    def test_limiting_query_as_expected(self) -> None:\n+\n+        with self.settings(SITE_URL=\"https://app.posthog.com\"):\n+            modified_url = add_limit(absolute_uri(regression_11204), {\"limit\": \"3500\"})\n+            actual_bits = self._split_to_dict(modified_url)\n+            expected_bits = {**self._split_to_dict(regression_11204), **{\"limit\": \"3500\"}}\n+            assert expected_bits == actual_bits\n+\n+    def test_limiting_existing_limit_query_as_expected(self) -> None:\n+        with self.settings(SITE_URL=\"https://app.posthog.com\"):\n+            url_with_existing_limit = regression_11204 + \"&limit=100000\"\n+            modified_url = add_limit(absolute_uri(url_with_existing_limit), {\"limit\": \"3500\"})\n+            actual_bits = self._split_to_dict(modified_url)\n+            expected_bits = {**self._split_to_dict(regression_11204), **{\"limit\": \"3500\"}}\n+            assert expected_bits == actual_bits\n+\n+    def _split_to_dict(self, url: str) -> Dict[str, Any]:\n+        first_split_parts = url.split(\"?\")\n+        assert len(first_split_parts) == 2\n+        return {bits[0]: bits[1] for bits in [param.split(\"=\") for param in first_split_parts[1].split(\"&\")]}\ndiff --git a/posthog/test/test_utils.py b/posthog/test/test_utils.py\nindex 6f97b9772..40334a27e 100644\n--- a/posthog/test/test_utils.py\n+++ b/posthog/test/test_utils.py\n@@ -13,6 +13,7 @@ from posthog.models import EventDefinition\n from posthog.settings.utils import get_from_env\n from posthog.test.base import BaseTest\n from posthog.utils import (\n+    absolute_uri,\n     format_query_params_absolute_url,\n     get_available_timezones_with_offsets,\n     get_default_event_name,\n@@ -23,6 +24,28 @@ from posthog.utils import (\n )\n \n \n+class TestAbsoluteUrls(TestCase):\n+    def test_format_absolute_url(self) -> None:\n+        regression_11204 = \"api/projects/6642/insights/trend/?events=%5B%7B%22id%22%3A%22product%20viewed%22%2C%22name%22%3A%22product%20viewed%22%2C%22type%22%3A%22events%22%2C%22order%22%3A0%7D%5D&actions=%5B%5D&display=ActionsTable&insight=TRENDS&interval=day&breakdown=productName&new_entity=%5B%5D&properties=%5B%5D&step_limit=5&funnel_filter=%7B%7D&breakdown_type=event&exclude_events=%5B%5D&path_groupings=%5B%5D&include_event_types=%5B%22%24pageview%22%5D&filter_test_accounts=false&local_path_cleaning_filters=%5B%5D&date_from=-14d&offset=50\"\n+        absolute_urls_test_cases = [\n+            (None, \"https://my-amazing.site\", \"https://my-amazing.site\"),\n+            (None, \"https://my-amazing.site/\", \"https://my-amazing.site/\"),\n+            (\"api/path\", \"https://my-amazing.site/\", \"https://my-amazing.site/api/path\"),\n+            (\"/api/path\", \"https://my-amazing.site/\", \"https://my-amazing.site/api/path\"),\n+            (\"api/path\", \"https://my-amazing.site/base_url/\", \"https://my-amazing.site/base_url/api/path\"),\n+            (\"/api/path\", \"https://my-amazing.site/base_url\", \"https://my-amazing.site/base_url/api/path\"),\n+            (regression_11204, \"https://app.posthog.com\", f\"https://app.posthog.com/{regression_11204}\",),\n+        ]\n+        for url, site_url, expected in absolute_urls_test_cases:\n+            with self.subTest():\n+                with self.settings(SITE_URL=site_url):\n+                    self.assertEqual(\n+                        expected,\n+                        absolute_uri(url),\n+                        msg=f\"with URL='{url}' & site_url setting='{site_url}' actual did not equal {expected}\",\n+                    )\n+\n+\n class TestFormatUrls(TestCase):\n     factory = RequestFactory()\n \n"
  },
  "663ac01baaeb3d3698dd1596f37d7f2676fe5881": {
    "hash": "663ac01baaeb3d3698dd1596f37d7f2676fe5881",
    "message": "fix: csv_exporter reports API errors as errors (#10823)",
    "diff": "commit 663ac01baaeb3d3698dd1596f37d7f2676fe5881\nAuthor: Paul D'Ambra <paul@posthog.com>\nDate:   Fri Jul 15 14:46:07 2022 +0100\n\n    fix: csv_exporter reports API errors as errors (#10823)\n\ndiff --git a/posthog/tasks/exports/csv_exporter.py b/posthog/tasks/exports/csv_exporter.py\nindex ab2f0cb6d..d8e1c53fd 100644\n--- a/posthog/tasks/exports/csv_exporter.py\n+++ b/posthog/tasks/exports/csv_exporter.py\n@@ -151,6 +151,9 @@ def _export_to_csv(exported_asset: ExportedAsset, limit: int = 1000, max_limit:\n         response = requests.request(\n             method=method.lower(), url=url, json=body, headers={\"Authorization\": f\"Bearer {access_token}\"},\n         )\n+        if not response.ok:\n+            raise Exception(f\"export API call failed with status_code: {response.status_code}\")\n+\n         # Figure out how to handle funnel polling....\n         data = response.json()\n         csv_rows = _convert_response_to_csv_data(data)\ndiff --git a/posthog/tasks/exports/test/test_csv_exporter.py b/posthog/tasks/exports/test/test_csv_exporter.py\nindex 343cf6899..842476f71 100644\n--- a/posthog/tasks/exports/test/test_csv_exporter.py\n+++ b/posthog/tasks/exports/test/test_csv_exporter.py\n@@ -1,4 +1,4 @@\n-from unittest.mock import Mock, patch\n+from unittest.mock import MagicMock, Mock, patch\n \n import pytest\n from boto3 import resource\n@@ -146,3 +146,16 @@ class TestCSVExporter(APIBaseTest):\n                 exported_asset.content\n                 == b\"distinct_id,elements_chain,event,id,person,properties.$browser,timestamp\\r\\n2,,event_name,e9ca132e-400f-4854-a83c-16c151b2f145,,Safari,2022-07-06T19:37:43.095295+00:00\\r\\n2,,event_name,1624228e-a4f1-48cd-aabc-6baa3ddb22e4,,Safari,2022-07-06T19:37:43.095279+00:00\\r\\n2,,event_name,66d45914-bdf5-4980-a54a-7dc699bdcce9,,Safari,2022-07-06T19:37:43.095262+00:00\\r\\n\"\n             )\n+\n+    @patch(\"posthog.tasks.exports.csv_exporter.logger\")\n+    @patch(\"posthog.tasks.exports.csv_exporter.statsd\")\n+    def test_failing_export_api_is_reported(self, mock_statsd, mock_logger) -> None:\n+        with patch(\"posthog.tasks.exports.csv_exporter.requests.request\") as patched_request:\n+            exported_asset = self._create_asset()\n+            mock_response = MagicMock()\n+            mock_response.status_code = 403\n+            mock_response.ok = False\n+            patched_request.return_value = mock_response\n+\n+            with pytest.raises(Exception, match=\"export API call failed with status_code: 403\"):\n+                csv_exporter.export_csv(exported_asset)\n"
  },
  "eb91d31aa1781851178f8a90e2d3866d2e0841be": {
    "hash": "eb91d31aa1781851178f8a90e2d3866d2e0841be",
    "message": "fix: format aggregation value bug (#11168)",
    "diff": "commit eb91d31aa1781851178f8a90e2d3866d2e0841be\nAuthor: Paul D'Ambra <paul@posthog.com>\nDate:   Fri Aug 5 14:11:17 2022 +0100\n\n    fix: format aggregation value bug (#11168)\n\ndiff --git a/frontend/src/scenes/insights/utils.test.ts b/frontend/src/scenes/insights/utils.test.ts\nindex c3dd9d1de..3a70c97e7 100644\n--- a/frontend/src/scenes/insights/utils.test.ts\n+++ b/frontend/src/scenes/insights/utils.test.ts\n@@ -7,6 +7,7 @@ import {\n } from 'scenes/insights/utils'\n import { BASE_MATH_DEFINITIONS, MathDefinition, PROPERTY_MATH_DEFINITIONS } from 'scenes/trends/mathsLogic'\n import { RETENTION_FIRST_TIME, RETENTION_RECURRING } from 'lib/constants'\n+import { formatAggregationAxisValue } from 'scenes/insights/aggregationAxisFormat'\n \n const createFilter = (id?: Entity['id'], name?: string, custom_name?: string): EntityFilter => {\n     return {\n@@ -499,4 +500,18 @@ describe('formatAggregationValue', () => {\n         const actual = formatAggregationValue('some name', null, fakeRenderCount, noOpFormatProperty)\n         expect(actual).toEqual('-')\n     })\n+\n+    it('uses render count when there is a value and property format is a no-op', () => {\n+        const fakeRenderCount = (x: number): string => formatAggregationAxisValue('duration', x)\n+        const noOpFormatProperty = jest.fn((_, y) => y)\n+        const actual = formatAggregationValue('some name', 500, fakeRenderCount, noOpFormatProperty)\n+        expect(actual).toEqual('8m 20s')\n+    })\n+\n+    it('uses render count when there is a value and property format converts number to string', () => {\n+        const fakeRenderCount = (x: number): string => formatAggregationAxisValue('duration', x)\n+        const noOpFormatProperty = jest.fn((_, y) => String(y))\n+        const actual = formatAggregationValue('some name', 500, fakeRenderCount, noOpFormatProperty)\n+        expect(actual).toEqual('8m 20s')\n+    })\n })\ndiff --git a/frontend/src/scenes/insights/utils.tsx b/frontend/src/scenes/insights/utils.tsx\nindex 7bc3b5ebd..c343df00d 100644\n--- a/frontend/src/scenes/insights/utils.tsx\n+++ b/frontend/src/scenes/insights/utils.tsx\n@@ -313,12 +313,13 @@ export function formatAggregationValue(\n     let formattedValue: ReactNode\n     if (property && formatPropertyValueForDisplay) {\n         formattedValue = formatPropertyValueForDisplay(property, propertyValue)\n-        if (formattedValue === propertyValue) {\n+        // yes, double equals not triple equals  ¯\\_(ツ)_/¯ let JS compare strings and numbers however it wants\n+        if (formattedValue == propertyValue) {\n             // formatPropertyValueForDisplay didn't change the value...\n-            formattedValue = renderCount(propertyValue ?? 0)\n+            formattedValue = renderCount(propertyValue)\n         }\n     } else {\n-        formattedValue = renderCount(propertyValue ?? 0)\n+        formattedValue = renderCount(propertyValue)\n     }\n \n     // Since `propertyValue` is a number. `formatPropertyValueForDisplay` will only return a string\n"
  },
  "6d6aefca4638e4a03159578fdb362964b4108064": {
    "hash": "6d6aefca4638e4a03159578fdb362964b4108064",
    "message": "feat: allow numeric, duration, or percentage as y axis of trend line (#11078)\n    \n    * feat: allow duration or percentage Y axis\n    \n    * no need to check for null before type guard\n    \n    * simplify is yaxis format check\n    \n    * generate select options off to one side\n    \n    * move formatting value into yaxisformat module too\n    \n    * make your mind up: arrow functions or not\n    \n    * make the assumption this filter does not affect caching explicit\n    \n    * sort out spacing\n    \n    * don't clash selectors\n    \n    * don't show y axis formatting on all trends types\n    \n    * re-use existing utility percentage function\n    \n    * work with time bar charts\n    \n    * a little tsx refactoring\n    \n    * add some more tests\n    \n    * format aggregation axis\n    \n    * tooltips render value correctly on horizontal bar\n    \n    * Capitalize first letter in select\n    \n    * important difference in how to call set filters O_o\n    \n    * more spacing",
    "diff": "commit 6d6aefca4638e4a03159578fdb362964b4108064\nAuthor: Paul D'Ambra <paul@posthog.com>\nDate:   Tue Aug 2 21:30:17 2022 +0100\n\n    feat: allow numeric, duration, or percentage as y axis of trend line (#11078)\n    \n    * feat: allow duration or percentage Y axis\n    \n    * no need to check for null before type guard\n    \n    * simplify is yaxis format check\n    \n    * generate select options off to one side\n    \n    * move formatting value into yaxisformat module too\n    \n    * make your mind up: arrow functions or not\n    \n    * make the assumption this filter does not affect caching explicit\n    \n    * sort out spacing\n    \n    * don't clash selectors\n    \n    * don't show y axis formatting on all trends types\n    \n    * re-use existing utility percentage function\n    \n    * work with time bar charts\n    \n    * a little tsx refactoring\n    \n    * add some more tests\n    \n    * format aggregation axis\n    \n    * tooltips render value correctly on horizontal bar\n    \n    * Capitalize first letter in select\n    \n    * important difference in how to call set filters O_o\n    \n    * more spacing\n\ndiff --git a/frontend/src/scenes/funnels/FunnelLineGraph.tsx b/frontend/src/scenes/funnels/FunnelLineGraph.tsx\nindex 3c3444c67..5fafcad03 100644\n--- a/frontend/src/scenes/funnels/FunnelLineGraph.tsx\n+++ b/frontend/src/scenes/funnels/FunnelLineGraph.tsx\n@@ -46,7 +46,7 @@ export function FunnelLineGraph({\n                     return `${count}%`\n                 },\n             }}\n-            percentage={true}\n+            aggregationAxisFormat=\"percentage\"\n             labelGroupType={filters.aggregation_group_type_index ?? 'people'}\n             incompletenessOffsetFromEnd={incompletenessOffsetFromEnd}\n             onClick={\ndiff --git a/frontend/src/scenes/insights/Insight.scss b/frontend/src/scenes/insights/Insight.scss\nindex 5fdd4e133..9225cfb09 100644\n--- a/frontend/src/scenes/insights/Insight.scss\n+++ b/frontend/src/scenes/insights/Insight.scss\n@@ -134,33 +134,6 @@\n \n             .ant-card-head-title {\n                 padding: 0;\n-\n-                span.filter {\n-                    font-size: 14px;\n-                    display: flex;\n-                    align-items: center;\n-\n-                    &:not(:last-child) {\n-                        margin-right: 0.5rem;\n-                    }\n-\n-                    span.head-title-item {\n-                        margin-right: 0.5rem;\n-                    }\n-                }\n-            }\n-        }\n-        .display-config-inner {\n-            display: flex;\n-            align-items: center;\n-            justify-content: space-between;\n-            flex-wrap: wrap;\n-\n-            .display-config-inner-row {\n-                flex-wrap: wrap;\n-                display: flex;\n-                align-items: center;\n-                margin: 0.5rem 0;\n             }\n         }\n \ndiff --git a/frontend/src/scenes/insights/InsightDisplayConfig.tsx b/frontend/src/scenes/insights/InsightDisplayConfig.tsx\nindex b0838d92b..77bd9e70a 100644\n--- a/frontend/src/scenes/insights/InsightDisplayConfig.tsx\n+++ b/frontend/src/scenes/insights/InsightDisplayConfig.tsx\n@@ -1,4 +1,4 @@\n-import React from 'react'\n+import React, { PropsWithChildren, ReactNode } from 'react'\n import { ChartFilter } from 'lib/components/ChartFilter'\n import { CompareFilter } from 'lib/components/CompareFilter/CompareFilter'\n import { IntervalFilter } from 'lib/components/IntervalFilter'\n@@ -15,8 +15,15 @@ import { Tooltip } from 'antd'\n import { InfoCircleOutlined } from '@ant-design/icons'\n import { FunnelBinsPicker } from './views/Funnels/FunnelBinsPicker'\n import { featureFlagLogic } from 'lib/logic/featureFlagLogic'\n-import { useValues } from 'kea'\n+import { useActions, useValues } from 'kea'\n import { FEATURE_FLAGS } from 'lib/constants'\n+import { LemonSelect } from 'lib/components/LemonSelect'\n+import { insightLogic } from 'scenes/insights/insightLogic'\n+import {\n+    isAggregationAxisFormat,\n+    aggregationAxisFormatSelectOptions,\n+    canFormatAxis,\n+} from 'scenes/insights/aggregationAxisFormat'\n \n interface InsightDisplayConfigProps {\n     filters: FilterType\n@@ -78,17 +85,23 @@ const isFunnelEmpty = (filters: FilterType): boolean => {\n     return (!filters.actions && !filters.events) || (filters.actions?.length === 0 && filters.events?.length === 0)\n }\n \n+function ConfigFilter(props: PropsWithChildren<ReactNode>): JSX.Element {\n+    return <span className=\"space-x-2 flex items-center text-sm\">{props.children}</span>\n+}\n+\n export function InsightDisplayConfig({ filters, activeView, disableTable }: InsightDisplayConfigProps): JSX.Element {\n     const showFunnelBarOptions = activeView === InsightType.FUNNELS\n     const showPathOptions = activeView === InsightType.PATHS\n     const { featureFlags } = useValues(featureFlagLogic)\n \n+    const { setFilters } = useActions(insightLogic)\n+\n     return (\n-        <div className=\"display-config-inner\">\n-            <div className=\"display-config-inner-row\">\n+        <div className=\"flex justify-between items-center flex-wrap\">\n+            <div className=\"flex items-center space-x-2 flex-wrap my-2\">\n                 {showDateFilter[activeView] && !disableTable && (\n-                    <span className=\"filter\">\n-                        <span className=\"head-title-item\">Date range</span>\n+                    <ConfigFilter>\n+                        <span>Date range</span>\n                         <InsightDateFilter\n                             defaultValue={'Last 7 days'}\n                             disabled={showFunnelBarOptions && isFunnelEmpty(filters)}\n@@ -103,16 +116,16 @@ export function InsightDisplayConfig({ filters, activeView, disableTable }: Insi\n                                 </>\n                             )}\n                         />\n-                    </span>\n+                    </ConfigFilter>\n                 )}\n \n                 {showIntervalFilter(activeView, filters) && (\n-                    <span className=\"filter\">\n-                        <span className=\"head-title-item\">\n+                    <ConfigFilter>\n+                        <span>\n                             <span className=\"hide-lte-md\">grouped </span>by\n                         </span>\n                         <IntervalFilter view={activeView} />\n-                    </span>\n+                    </ConfigFilter>\n                 )}\n \n                 {activeView === InsightType.TRENDS &&\n@@ -120,46 +133,72 @@ export function InsightDisplayConfig({ filters, activeView, disableTable }: Insi\n                 !filters.compare &&\n                 (!filters.display || filters.display === ChartDisplayType.ActionsLineGraph) &&\n                 featureFlags[FEATURE_FLAGS.SMOOTHING_INTERVAL] ? (\n-                    <SmoothingFilter />\n+                    <ConfigFilter>\n+                        <SmoothingFilter />\n+                    </ConfigFilter>\n                 ) : null}\n \n                 {activeView === InsightType.RETENTION && (\n-                    <>\n+                    <ConfigFilter>\n                         <RetentionDatePicker />\n                         <RetentionReferencePicker />\n-                    </>\n+                    </ConfigFilter>\n                 )}\n \n                 {showPathOptions && (\n-                    <span className=\"filter\">\n+                    <ConfigFilter>\n                         <PathStepPicker />\n-                    </span>\n+                    </ConfigFilter>\n                 )}\n \n                 {showComparePrevious[activeView] && (\n-                    <span className=\"filter\">\n+                    <ConfigFilter>\n                         <CompareFilter />\n-                    </span>\n+                    </ConfigFilter>\n                 )}\n             </div>\n-            <div className=\"display-config-inner-row\">\n+            <div className=\"flex items-center space-x-4 flex-wrap my-2\">\n+                {activeView === InsightType.TRENDS && (\n+                    <ConfigFilter>\n+                        <span>Aggregation Axis format</span>\n+                        <LemonSelect\n+                            value={\n+                                canFormatAxis(filters.display) ? filters.aggregation_axis_format || 'numeric' : 'N/A'\n+                            }\n+                            onChange={(value) => {\n+                                if (isAggregationAxisFormat(value)) {\n+                                    setFilters({ ...filters, aggregation_axis_format: value })\n+                                }\n+                            }}\n+                            bordered\n+                            dropdownPlacement={'bottom-end'}\n+                            dropdownMatchSelectWidth={false}\n+                            disabled={!canFormatAxis(filters.display)}\n+                            data-attr=\"chart-aggregation-axis-format\"\n+                            options={aggregationAxisFormatSelectOptions}\n+                            type={'stealth'}\n+                            size={'small'}\n+                        />\n+                    </ConfigFilter>\n+                )}\n                 {showChartFilter(activeView) && (\n-                    <span className=\"filter\">\n-                        <span className=\"head-title-item\">Chart type</span>\n+                    <ConfigFilter>\n+                        <span>Chart type</span>\n                         <ChartFilter filters={filters} disabled={filters.insight === InsightType.LIFECYCLE} />\n-                    </span>\n+                    </ConfigFilter>\n                 )}\n+\n                 {showFunnelBarOptions && filters.funnel_viz_type === FunnelVizType.Steps && (\n                     <>\n-                        <span className=\"filter\">\n+                        <ConfigFilter>\n                             <FunnelDisplayLayoutPicker />\n-                        </span>\n+                        </ConfigFilter>\n                     </>\n                 )}\n                 {showFunnelBarOptions && filters.funnel_viz_type === FunnelVizType.TimeToConvert && (\n-                    <span className=\"filter\">\n+                    <ConfigFilter>\n                         <FunnelBinsPicker />\n-                    </span>\n+                    </ConfigFilter>\n                 )}\n             </div>\n         </div>\ndiff --git a/frontend/src/scenes/insights/InsightTooltip/InsightTooltip.tsx b/frontend/src/scenes/insights/InsightTooltip/InsightTooltip.tsx\nindex 7b4d26387..1b5297d52 100644\n--- a/frontend/src/scenes/insights/InsightTooltip/InsightTooltip.tsx\n+++ b/frontend/src/scenes/insights/InsightTooltip/InsightTooltip.tsx\n@@ -17,7 +17,7 @@ import { IconHandClick } from 'lib/components/icons'\n import { shortTimeZone } from 'lib/utils'\n import { humanFriendlyNumber } from 'lib/utils'\n import { useValues } from 'kea'\n-import { propertyDefinitionsModel } from '~/models/propertyDefinitionsModel'\n+import { FormatPropertyValueForDisplayFunction, propertyDefinitionsModel } from '~/models/propertyDefinitionsModel'\n \n export function ClickToInspectActors({\n     isTruncated,\n@@ -41,6 +41,24 @@ export function ClickToInspectActors({\n     )\n }\n \n+function renderDatumToTableCell(\n+    datumMathProperty: string | undefined,\n+    datumValue: number,\n+    formatPropertyValueForDisplay: FormatPropertyValueForDisplayFunction,\n+    renderCount: (value: number) => React.ReactNode\n+): ReactNode {\n+    let innerValue = datumMathProperty\n+        ? formatPropertyValueForDisplay(datumMathProperty, datumValue)\n+        : renderCount(datumValue ?? 0)\n+\n+    if (datumMathProperty && innerValue === datumValue.toString()) {\n+        // formatPropertyValueForDisplay didn't change the value...\n+        innerValue = renderCount(datumValue ?? 0)\n+    }\n+\n+    return <div className=\"series-data-cell\">{innerValue}</div>\n+}\n+\n export function InsightTooltip({\n     date,\n     timezone = 'UTC',\n@@ -54,7 +72,7 @@ export function InsightTooltip({\n         </>\n     ),\n     renderCount = (value: number) => {\n-        return <>{typeof value === 'number' ? humanFriendlyNumber(value) : value}</>\n+        return <>{humanFriendlyNumber(value)}</>\n     },\n     hideColorCol = false,\n     hideInspectActorsSection = false,\n@@ -123,14 +141,12 @@ export function InsightTooltip({\n                                     colIdx\n                                 )),\n                         render: function renderSeriesColumnData(_, datum) {\n-                            const innerValue = datum.seriesData?.[colIdx]?.action?.math_property\n-                                ? formatPropertyValueForDisplay(\n-                                      datum.seriesData?.[colIdx]?.action?.math_property,\n-                                      datum.seriesData?.[colIdx]?.count\n-                                  )\n-                                : renderCount(datum.seriesData?.[colIdx]?.count ?? 0)\n-\n-                            return <div className=\"series-data-cell\">{innerValue}</div>\n+                            return renderDatumToTableCell(\n+                                datum.seriesData?.[colIdx]?.action?.math_property,\n+                                datum.seriesData?.[colIdx]?.count,\n+                                formatPropertyValueForDisplay,\n+                                renderCount\n+                            )\n                         },\n                     })\n                 })\n@@ -186,14 +202,15 @@ export function InsightTooltip({\n             key: 'counts',\n             className: 'datum-counts-column',\n             width: 50,\n-            title: <span style={{ whiteSpace: 'nowrap' }}>{rightTitle ?? undefined}</span>,\n+            title: <span className=\"whitespace-nowrap\">{rightTitle ?? undefined}</span>,\n             align: 'right',\n             render: function renderDatum(_, datum) {\n-                const innerValue = datum.action?.math_property\n-                    ? formatPropertyValueForDisplay(datum.action?.math_property, datum.count)\n-                    : renderCount(datum.count ?? 0)\n-\n-                return <div className=\"series-data-cell\">{innerValue}</div>\n+                return renderDatumToTableCell(\n+                    datum.action?.math_property,\n+                    datum.count,\n+                    formatPropertyValueForDisplay,\n+                    renderCount\n+                )\n             },\n         })\n \ndiff --git a/frontend/src/scenes/insights/aggregationAxisFormat.ts b/frontend/src/scenes/insights/aggregationAxisFormat.ts\nnew file mode 100644\nindex 000000000..ae57916f1\n--- /dev/null\n+++ b/frontend/src/scenes/insights/aggregationAxisFormat.ts\n@@ -0,0 +1,38 @@\n+import { LemonSelectOptions } from 'lib/components/LemonSelect'\n+import { capitalizeFirstLetter, compactNumber, humanFriendlyDuration, percentage } from 'lib/utils'\n+import { ChartDisplayType } from '~/types'\n+\n+const formats = ['numeric', 'duration', 'percentage'] as const\n+export type AggregationAxisFormat = typeof formats[number]\n+\n+export const isAggregationAxisFormat = (candidate: unknown): candidate is AggregationAxisFormat =>\n+    formats.includes(candidate as AggregationAxisFormat)\n+\n+export const aggregationAxisFormatSelectOptions = formats.reduce((target, format) => {\n+    target[format as string] = { label: capitalizeFirstLetter(format as string) }\n+    return target\n+}, {} as LemonSelectOptions)\n+\n+export const formatAggregationAxisValue = (axisFormat: AggregationAxisFormat, value: number | string): string => {\n+    switch (axisFormat) {\n+        case 'duration':\n+            return humanFriendlyDuration(value)\n+        case 'percentage':\n+            return percentage(Number(value) / 100)\n+        case 'numeric': // numeric is default\n+        default:\n+            return compactNumber(Number(value))\n+    }\n+}\n+\n+export const canFormatAxis = (chartDisplayType: ChartDisplayType | undefined): boolean => {\n+    return (\n+        !!chartDisplayType &&\n+        [\n+            ChartDisplayType.ActionsLineGraph,\n+            ChartDisplayType.ActionsLineGraphCumulative,\n+            ChartDisplayType.ActionsBar,\n+            ChartDisplayType.ActionsBarValue,\n+        ].includes(chartDisplayType)\n+    )\n+}\ndiff --git a/frontend/src/scenes/insights/aggregationAxisFormats.test.ts b/frontend/src/scenes/insights/aggregationAxisFormats.test.ts\nnew file mode 100644\nindex 000000000..624088d22\n--- /dev/null\n+++ b/frontend/src/scenes/insights/aggregationAxisFormats.test.ts\n@@ -0,0 +1,44 @@\n+import {\n+    formatAggregationAxisValue,\n+    isAggregationAxisFormat,\n+    AggregationAxisFormat,\n+} from 'scenes/insights/aggregationAxisFormat'\n+\n+describe('aggregation axis formats', () => {\n+    const testcases = [\n+        { candidate: null, expected: false },\n+        { candidate: 1, expected: false },\n+        { candidate: [], expected: false },\n+        { candidate: {}, expected: false },\n+        { candidate: 'tomato', expected: false },\n+        { candidate: 'numeric', expected: true },\n+        { candidate: 'percentage', expected: true },\n+        { candidate: 'duration', expected: true },\n+    ]\n+    testcases.forEach((testcase) => {\n+        it(`correctly detects that \"${testcase.candidate}\" ${\n+            testcase.expected ? 'is' : 'is _not_'\n+        } a valid aggregation axis format`, () => {\n+            expect(isAggregationAxisFormat(testcase.candidate)).toEqual(testcase.expected)\n+        })\n+    })\n+\n+    const formatTestcases = [\n+        { candidate: 34, format: 'duration', expected: '34s' },\n+        { candidate: 340, format: 'duration', expected: '5m 40s' },\n+        { candidate: 3940, format: 'duration', expected: '1h 5m 40s' },\n+        { candidate: 3.944, format: 'percentage', expected: '3.94%' },\n+        { candidate: 3.956, format: 'percentage', expected: '3.96%' },\n+        { candidate: 3940, format: 'percentage', expected: '3 940%' },\n+        { candidate: 34, format: 'numeric', expected: '34' },\n+        { candidate: 394, format: 'numeric', expected: '394' },\n+        { candidate: 3940, format: 'numeric', expected: '3.94K' },\n+    ]\n+    formatTestcases.forEach((testcase) => {\n+        it(`correctly formats \"${testcase.candidate}\" as ${testcase.expected} when it is a ${testcase.format}`, () => {\n+            expect(formatAggregationAxisValue(testcase.format as AggregationAxisFormat, testcase.candidate)).toEqual(\n+                testcase.expected\n+            )\n+        })\n+    })\n+})\ndiff --git a/frontend/src/scenes/insights/views/LineGraph/LineGraph.tsx b/frontend/src/scenes/insights/views/LineGraph/LineGraph.tsx\nindex f2b87cb4c..175ef2dc4 100644\n--- a/frontend/src/scenes/insights/views/LineGraph/LineGraph.tsx\n+++ b/frontend/src/scenes/insights/views/LineGraph/LineGraph.tsx\n@@ -19,7 +19,7 @@ import {\n } from 'chart.js'\n import CrosshairPlugin, { CrosshairOptions } from 'chartjs-plugin-crosshair'\n import 'chartjs-adapter-dayjs'\n-import { areObjectValuesEmpty, compactNumber, lightenDarkenColor, mapRange } from '~/lib/utils'\n+import { areObjectValuesEmpty, lightenDarkenColor, mapRange } from '~/lib/utils'\n import { getBarColorFromStatus, getGraphColors, getSeriesColor } from 'lib/colors'\n import { AnnotationMarker, Annotations, annotationsLogic } from 'lib/components/Annotations'\n import { useEscapeKey } from 'lib/hooks/useEscapeKey'\n@@ -32,6 +32,7 @@ import { TooltipConfig } from 'scenes/insights/InsightTooltip/insightTooltipUtil\n import { groupsModel } from '~/models/groupsModel'\n import { useResizeObserver } from 'lib/hooks/useResizeObserver'\n import { ErrorBoundary } from '~/layout/ErrorBoundary'\n+import { formatAggregationAxisValue, AggregationAxisFormat } from 'scenes/insights/aggregationAxisFormat'\n \n //--Chart Style Options--//\n if (registerables) {\n@@ -53,13 +54,13 @@ interface LineGraphProps {\n     ['data-attr']: string\n     insightNumericId?: number\n     inSharedMode?: boolean\n-    percentage?: boolean\n     showPersonsModal?: boolean\n     tooltip?: TooltipConfig\n     isCompare?: boolean\n     incompletenessOffsetFromEnd?: number // Number of data points at end of dataset to replace with a dotted line. Only used in line graphs.\n     labelGroupType: number | 'people' | 'none'\n     timezone?: string | null\n+    aggregationAxisFormat?: AggregationAxisFormat\n }\n \n const noop = (): void => {}\n@@ -93,13 +94,13 @@ export function LineGraph_({\n     ['data-attr']: dataAttr,\n     insightNumericId,\n     inSharedMode = false,\n-    percentage = false,\n     showPersonsModal = true,\n     isCompare = false,\n     incompletenessOffsetFromEnd = -1,\n     tooltip: tooltipConfig,\n     labelGroupType,\n     timezone,\n+    aggregationAxisFormat = 'numeric',\n }: LineGraphProps): JSX.Element {\n     let datasets = _datasets\n     const { createTooltipData } = useValues(lineGraphLogic)\n@@ -358,7 +359,11 @@ export function LineGraph_({\n                                         timezone={timezone}\n                                         seriesData={seriesData}\n                                         hideColorCol={isHorizontal || !!tooltipConfig?.hideColorCol}\n-                                        renderCount={tooltipConfig?.renderCount}\n+                                        renderCount={\n+                                            tooltipConfig?.renderCount ||\n+                                            ((value: number): string =>\n+                                                formatAggregationAxisValue(aggregationAxisFormat, value))\n+                                        }\n                                         forceEntitiesAsColumns={isHorizontal}\n                                         hideInspectActorsSection={!onClick || !showPersonsModal}\n                                         groupTypeLabel={\n@@ -519,7 +524,7 @@ export function LineGraph_({\n                         precision: 0,\n                         color: colors.axisLabel as string,\n                         callback: (value) => {\n-                            return compactNumber(Number(value))\n+                            return formatAggregationAxisValue(aggregationAxisFormat, value)\n                         },\n                     },\n                 },\n@@ -541,20 +546,10 @@ export function LineGraph_({\n                     display: true,\n                     ticks: {\n                         precision: 0,\n-                        ...(percentage\n-                            ? {\n-                                  callback: function (value) {\n-                                      const numVal = Number(value)\n-                                      const fixedValue = numVal < 1 ? numVal.toFixed(2) : numVal.toFixed(0)\n-                                      return `${fixedValue}%` // convert it to percentage\n-                                  },\n-                              }\n-                            : {\n-                                  ...tickOptions,\n-                                  callback: (value) => {\n-                                      return compactNumber(Number(value))\n-                                  },\n-                              }),\n+                        ...tickOptions,\n+                        callback: (value) => {\n+                            return formatAggregationAxisValue(aggregationAxisFormat, value)\n+                        },\n                     },\n                     grid: {\n                         borderColor: colors.axisLine as string,\n@@ -570,7 +565,7 @@ export function LineGraph_({\n                         ...tickOptions,\n                         precision: 0,\n                         callback: (value) => {\n-                            return compactNumber(Number(value))\n+                            return formatAggregationAxisValue(aggregationAxisFormat, value)\n                         },\n                     },\n                 },\ndiff --git a/frontend/src/scenes/retention/RetentionLineGraph.tsx b/frontend/src/scenes/retention/RetentionLineGraph.tsx\nindex 09a514a14..61930f1d9 100644\n--- a/frontend/src/scenes/retention/RetentionLineGraph.tsx\n+++ b/frontend/src/scenes/retention/RetentionLineGraph.tsx\n@@ -48,7 +48,7 @@ export function RetentionLineGraph({ inSharedMode = false }: RetentionLineGraphP\n                 inSharedMode={!!inSharedMode}\n                 showPersonsModal={false}\n                 labelGroupType={filters.aggregation_group_type_index ?? 'people'}\n-                percentage={true}\n+                aggregationAxisFormat=\"percentage\"\n                 tooltip={{\n                     rowCutoff: 11, // 11 time units is hardcoded into retention insights\n                     renderSeries: function _renderCohortPrefix(value) {\ndiff --git a/frontend/src/scenes/trends/viz/ActionsHorizontalBar.tsx b/frontend/src/scenes/trends/viz/ActionsHorizontalBar.tsx\nindex 7df12ce01..6dba82590 100644\n--- a/frontend/src/scenes/trends/viz/ActionsHorizontalBar.tsx\n+++ b/frontend/src/scenes/trends/viz/ActionsHorizontalBar.tsx\n@@ -81,6 +81,7 @@ export function ActionsHorizontalBar({ showPersonsModal = true }: ChartParams):\n             insightNumericId={insight.id}\n             hiddenLegendKeys={hiddenLegendKeys}\n             showPersonsModal={showPersonsModal}\n+            aggregationAxisFormat={insight.filters?.aggregation_axis_format}\n             onClick={\n                 !showPersonsModal || insight.filters?.formula\n                     ? undefined\ndiff --git a/frontend/src/scenes/trends/viz/ActionsLineGraph.tsx b/frontend/src/scenes/trends/viz/ActionsLineGraph.tsx\nindex 2fd877587..ad94fd643 100644\n--- a/frontend/src/scenes/trends/viz/ActionsLineGraph.tsx\n+++ b/frontend/src/scenes/trends/viz/ActionsLineGraph.tsx\n@@ -31,6 +31,7 @@ export function ActionsLineGraph({ inSharedMode = false, showPersonsModal = true\n             inSharedMode={inSharedMode}\n             labelGroupType={labelGroupType}\n             showPersonsModal={showPersonsModal}\n+            aggregationAxisFormat={filters.aggregation_axis_format}\n             tooltip={\n                 filters.insight === InsightType.LIFECYCLE\n                     ? {\ndiff --git a/frontend/src/scenes/trends/viz/ActionsPie.tsx b/frontend/src/scenes/trends/viz/ActionsPie.tsx\nindex 2f20b88b4..7f8c34fc9 100644\n--- a/frontend/src/scenes/trends/viz/ActionsPie.tsx\n+++ b/frontend/src/scenes/trends/viz/ActionsPie.tsx\n@@ -62,6 +62,7 @@ export function ActionsPie({ inSharedMode, showPersonsModal = true }: ChartParam\n                         inSharedMode={!!inSharedMode}\n                         insightNumericId={insight.id}\n                         showPersonsModal={showPersonsModal}\n+                        aggregationAxisFormat={insight.filters?.aggregation_axis_format}\n                         onClick={\n                             !showPersonsModal || insight.filters?.formula\n                                 ? undefined\ndiff --git a/frontend/src/types.ts b/frontend/src/types.ts\nindex 6e36e034f..59e4cefdd 100644\n--- a/frontend/src/types.ts\n+++ b/frontend/src/types.ts\n@@ -23,6 +23,7 @@ import { LogLevel } from 'rrweb'\n import { TaxonomicFilterGroupType } from 'lib/components/TaxonomicFilter/types'\n import { BehavioralFilterKey, BehavioralFilterType } from 'scenes/cohorts/CohortFilters/types'\n import { LogicWrapper } from 'kea'\n+import { AggregationAxisFormat } from 'scenes/insights/aggregationAxisFormat'\n \n export type Optional<T, K extends string | number | symbol> = Omit<T, K> & { [K in keyof T]?: T[K] }\n \n@@ -1102,6 +1103,7 @@ export interface FilterType {\n     breakdown_attribution_type?: BreakdownAttributionType // funnels breakdown attribution type\n     breakdown_attribution_value?: number // funnels breakdown attribution specific step value\n     breakdown_histogram_bin_count?: number // trends breakdown histogram bin count\n+    aggregation_axis_format?: AggregationAxisFormat\n }\n \n export interface RecordingEventsFilters {\ndiff --git a/posthog/tasks/test/test_update_cache.py b/posthog/tasks/test/test_update_cache.py\nindex b3aa9aa7a..ae60331b9 100644\n--- a/posthog/tasks/test/test_update_cache.py\n+++ b/posthog/tasks/test/test_update_cache.py\n@@ -180,6 +180,22 @@ class TestUpdateCache(APIBaseTest):\n \n             yield [i for i, _ in recent_teams]\n \n+    def test_not_all_filters_affect_the_filters_hash(self) -> None:\n+        insight_one = create_shared_insight(self.team, is_enabled=True, filters={\"events\": [{\"id\": \"$pageview\"}]},)\n+        insight_two = create_shared_insight(\n+            self.team,\n+            is_enabled=True,\n+            filters={\"events\": [{\"id\": \"$pageview\"}], \"aggregation_axis_format\": \"percentage\"},\n+        )\n+        insight_three = create_shared_insight(\n+            self.team,\n+            is_enabled=True,\n+            filters={\"events\": [{\"id\": \"$pageview\"}], \"aggregation_axis_format\": \"duration\"},\n+        )\n+\n+        assert insight_one.filters_hash == insight_two.filters_hash\n+        assert insight_two.filters_hash == insight_three.filters_hash\n+\n     @patch(\"posthog.tasks.update_cache.group.apply_async\")\n     @patch(\"posthog.celery.update_cache_item_task.s\")\n     def test_refresh_dashboard_cache(self, patch_update_cache_item: MagicMock, _: MagicMock) -> None:\n"
  },
  "8c190ca14f9fd0dbadd03c26db9209740a71f713": {
    "hash": "8c190ca14f9fd0dbadd03c26db9209740a71f713",
    "message": "fix: remove cohort filter option from persons page (#11236)",
    "diff": "commit 8c190ca14f9fd0dbadd03c26db9209740a71f713\nAuthor: Li Yi Yu <li@posthog.com>\nDate:   Thu Aug 11 06:02:31 2022 -0400\n\n    fix: remove cohort filter option from persons page (#11236)\n\ndiff --git a/frontend/src/scenes/persons/Persons.tsx b/frontend/src/scenes/persons/Persons.tsx\nindex 166ab791d..3a6a714a8 100644\n--- a/frontend/src/scenes/persons/Persons.tsx\n+++ b/frontend/src/scenes/persons/Persons.tsx\n@@ -73,7 +73,7 @@ export function PersonsScene(): JSX.Element {\n                         loadPersons()\n                     }}\n                     endpoint=\"person\"\n-                    taxonomicGroupTypes={[TaxonomicFilterGroupType.PersonProperties, TaxonomicFilterGroupType.Cohorts]}\n+                    taxonomicGroupTypes={[TaxonomicFilterGroupType.PersonProperties]}\n                     showConditionBadge\n                 />\n                 <PersonsTable\n"
  },
  "e10ea61d633a490f02b33f8e3424d80d7a5186e2": {
    "hash": "e10ea61d633a490f02b33f8e3424d80d7a5186e2",
    "message": "Use normal filters person (#7325)\n    \n    * Use normal filters for person\n    \n    * Clean up is_identified\n    \n    * fix jest stuff\n    \n    * fix tests and nits\n    \n    * types etc\n    \n    * e2e test",
    "diff": "commit e10ea61d633a490f02b33f8e3424d80d7a5186e2\nAuthor: Tim Glaser <tim@posthog.com>\nDate:   Wed Nov 24 18:21:56 2021 +0100\n\n    Use normal filters person (#7325)\n    \n    * Use normal filters for person\n    \n    * Clean up is_identified\n    \n    * fix jest stuff\n    \n    * fix tests and nits\n    \n    * types etc\n    \n    * e2e test\n\ndiff --git a/cypress/integration/person.js b/cypress/integration/person.js\nindex 73199add9..08af07ab5 100644\n--- a/cypress/integration/person.js\n+++ b/cypress/integration/person.js\n@@ -33,20 +33,6 @@ describe('Person Visualization Check', () => {\n     })\n })\n \n-describe('Person Show All Distinct Checks', () => {\n-    beforeEach(() => {\n-        cy.clickNavMenu('persons')\n-        cy.get('.ant-spin-spinning').should('not.exist') // Wait until initial table load\n-    })\n-\n-    it('Should have no Show All Distinct Id Button', () => {\n-        cy.get('[data-attr=persons-search]').type('fernand{enter}')\n-        cy.get('.ant-radio-button-wrapper').contains('All persons').click()\n-        cy.contains('deborah.fernandez@gmail.com').click()\n-        cy.get('[data-cy=\"show-more-distinct-id\"]').should('not.exist')\n-    })\n-})\n-\n describe('Merge person', () => {\n     beforeEach(() => {\n         cy.clickNavMenu('persons')\ndiff --git a/cypress/integration/persons.js b/cypress/integration/persons.js\nindex 6d9010081..79765fcf8 100644\n--- a/cypress/integration/persons.js\n+++ b/cypress/integration/persons.js\n@@ -3,18 +3,10 @@ describe('Persons', () => {\n         cy.clickNavMenu('persons')\n     })\n \n-    it('People loaded', () => {\n-        cy.get('h1').should('contain', 'Persons')\n-    })\n-\n     it('All tabs work', () => {\n-        cy.get('[data-attr=persons-search]').type('has:email').type('{enter}').should('have.value', 'has:email')\n-        cy.wait(200)\n-        cy.get('.ant-radio-group > :nth-child(2)').click()\n-        cy.get('[data-row-key]').its('length').should('be.gte', 10)\n-        cy.get('.person-header.identified > .ph-no-capture').should('contain', '@')\n-        cy.get('.ant-radio-group > :nth-child(3)').click()\n+        cy.get('h1').should('contain', 'Persons')\n+        cy.get('[data-attr=persons-search]').type('marisol').type('{enter}').should('have.value', 'marisol')\n         cy.wait(200)\n-        cy.get('.ant-empty-img-simple').should('exist') // No results placeholder\n+        cy.get('[data-row-key]').its('length').should('be.gte', 0)\n     })\n })\ndiff --git a/frontend/src/lib/utils/eventUsageLogic.ts b/frontend/src/lib/utils/eventUsageLogic.ts\nindex eb78c5e2e..416b707c0 100644\n--- a/frontend/src/lib/utils/eventUsageLogic.ts\n+++ b/frontend/src/lib/utils/eventUsageLogic.ts\n@@ -72,7 +72,6 @@ interface RecordingViewedProps {\n     end_time?: number // End timestamp of the session\n     page_change_events_length: number\n     recording_width?: number\n-    user_is_identified?: boolean\n     source: RecordingWatchedSource\n }\n \n@@ -343,7 +342,6 @@ export const eventUsageLogic = kea<\n \n             const properties = {\n                 properties_count: Object.keys(person.properties).length,\n-                is_identified: person.is_identified,\n                 has_email: !!person.properties.email,\n                 has_name: !!person.properties.name,\n                 custom_properties_count,\n@@ -652,7 +650,6 @@ export const eventUsageLogic = kea<\n                 end_time: recordingData?.session_recording?.end_time,\n                 page_change_events_length: eventIndex.pageChangeEvents().length,\n                 recording_width: eventIndex.getRecordingMetadata(0)[0]?.width,\n-                user_is_identified: recordingData.person?.is_identified,\n                 source: source,\n             }\n             posthog.capture(`recording ${type}`, payload)\ndiff --git a/frontend/src/scenes/persons/PersonHeader.scss b/frontend/src/scenes/persons/PersonHeader.scss\nindex 9f6197142..19c632dd4 100644\n--- a/frontend/src/scenes/persons/PersonHeader.scss\n+++ b/frontend/src/scenes/persons/PersonHeader.scss\n@@ -8,18 +8,6 @@\n         margin-right: 4px;\n     }\n \n-    &.anonymous {\n-        color: $text_muted;\n-        .profile-picture {\n-            color: $primary_alt;\n-            background-color: $yellow_100;\n-        }\n-    }\n-\n-    &.identified {\n-        color: $text_default;\n-    }\n-\n     &:hover {\n         text-decoration: underline;\n     }\ndiff --git a/frontend/src/scenes/persons/PersonHeader.test.ts b/frontend/src/scenes/persons/PersonHeader.test.ts\nindex 4bcbb675a..27917a6e0 100644\n--- a/frontend/src/scenes/persons/PersonHeader.test.ts\n+++ b/frontend/src/scenes/persons/PersonHeader.test.ts\n@@ -75,7 +75,7 @@ describe('the person header', () => {\n             props: {\n                 email: null,\n             },\n-            personDisplay: 'Identified user A9D1C',\n+            personDisplay: 'User A9D1C',\n \n             describe: 'when person is identified',\n             testName: 'if there are no person properties it shows identified people by hash',\n@@ -86,7 +86,7 @@ describe('the person header', () => {\n             props: {\n                 email: null,\n             },\n-            personDisplay: 'Unidentified user ABCDE',\n+            personDisplay: 'User ABCDE',\n \n             describe: 'when person is unidentified',\n             testName: 'if there are no person properties it shows people by hash',\n@@ -98,7 +98,7 @@ describe('the person header', () => {\n                 email: 'example@person.com',\n                 name: 'is not preferred over email',\n             },\n-            personDisplay: 'Unidentified example@person.com',\n+            personDisplay: 'example@person.com',\n \n             describe: 'when person is unidentified',\n             testName: 'if there are no person properties it shows people by hash',\n@@ -108,7 +108,6 @@ describe('the person header', () => {\n     displayTestCases.forEach((testCase) => {\n         describe(testCase.describe, () => {\n             const person: Partial<PersonType> = {\n-                is_identified: testCase.isIdentified,\n                 distinct_ids: testCase.distinctIds || [uuid()],\n                 properties: testCase.props,\n             }\ndiff --git a/frontend/src/scenes/persons/PersonHeader.tsx b/frontend/src/scenes/persons/PersonHeader.tsx\nindex 8e78e39ee..025e1df0c 100644\n--- a/frontend/src/scenes/persons/PersonHeader.tsx\n+++ b/frontend/src/scenes/persons/PersonHeader.tsx\n@@ -3,7 +3,6 @@ import React from 'react'\n import { IconPersonFilled } from 'lib/components/icons'\n import './PersonHeader.scss'\n import { Link } from 'lib/components/Link'\n-import clsx from 'clsx'\n import { urls } from 'scenes/urls'\n \n export interface PersonHeaderProps {\n@@ -12,7 +11,7 @@ export interface PersonHeaderProps {\n }\n \n export const asDisplay = (person: Partial<PersonType> | null | undefined): string => {\n-    let display, displayId\n+    let displayId\n     const propertyIdentifier = person?.properties\n         ? person.properties.email || person.properties.name || person.properties.username\n         : 'with no IDs'\n@@ -26,13 +25,7 @@ export const asDisplay = (person: Partial<PersonType> | null | undefined): strin\n         displayId = baseId.substr(baseId.length - 5).toUpperCase()\n     }\n \n-    if (person?.is_identified) {\n-        display = customIdentifier ? customIdentifier : `Identified user ${displayId}`\n-    } else {\n-        display = `Unidentified ${customIdentifier || `user ${displayId}`}`\n-    }\n-\n-    return display\n+    return customIdentifier ? customIdentifier : `User ${displayId}`\n }\n \n export const asLink = (person: Partial<PersonType> | null | undefined): string | undefined =>\n@@ -41,12 +34,7 @@ export const asLink = (person: Partial<PersonType> | null | undefined): string |\n export function PersonHeader(props: PersonHeaderProps): JSX.Element {\n     return (\n         <Link to={asLink(props.person)} data-attr=\"goto-person-email\">\n-            <div\n-                className={clsx('person-header', {\n-                    identified: props.person?.is_identified,\n-                    anonymous: !props.person?.is_identified,\n-                })}\n-            >\n+            <div className=\"person-header\">\n                 {props.withIcon && <IconPersonFilled style={{ marginRight: 8 }} />}\n                 <span className=\"ph-no-capture text-ellipsis\">{asDisplay(props.person)}</span>\n             </div>\ndiff --git a/frontend/src/scenes/persons/Persons.cy-spec.js b/frontend/src/scenes/persons/Persons.cy-spec.js\nindex ead06d8e2..fd6b3f505 100644\n--- a/frontend/src/scenes/persons/Persons.cy-spec.js\n+++ b/frontend/src/scenes/persons/Persons.cy-spec.js\n@@ -14,21 +14,6 @@ describe('<Person /> ', () => {\n         helpers.setLocation('/persons')\n     })\n \n-    it('person type tabs', () => {\n-        mount()\n-        cy.contains('Persons').should('be.visible')\n-        cy.wait('@api_persons').map(helpers.getSearchParameters).should('be.empty')\n-        cy.get('[data-attr=\"people-types-tab-identified\"]').click({ force: true })\n-        cy.wait('@api_persons').map(helpers.getSearchParameters).should('include', {\n-            is_identified: 'true',\n-        })\n-\n-        cy.get('[data-attr=\"people-types-tab-anonymous\"]').click({ force: true })\n-        cy.wait('@api_persons').map(helpers.getSearchParameters).should('include', {\n-            is_identified: 'false',\n-        })\n-    })\n-\n     it('person search', () => {\n         mount()\n \ndiff --git a/frontend/src/scenes/persons/Persons.tsx b/frontend/src/scenes/persons/Persons.tsx\nindex 5819d51da..e43387ad9 100644\n--- a/frontend/src/scenes/persons/Persons.tsx\n+++ b/frontend/src/scenes/persons/Persons.tsx\n@@ -1,18 +1,18 @@\n import React from 'react'\n import { useValues, useActions, BindLogic } from 'kea'\n import { PersonsTable } from './PersonsTable'\n-import { Button, Row, Radio, Alert } from 'antd'\n-import { ExportOutlined, PlusOutlined } from '@ant-design/icons'\n+import { Button, Row } from 'antd'\n+import { ExportOutlined } from '@ant-design/icons'\n import { PersonLogicProps, personsLogic } from './personsLogic'\n-import { Link } from 'lib/components/Link'\n import { CohortType } from '~/types'\n import { LinkButton } from 'lib/components/LinkButton'\n import { ClockCircleFilled } from '@ant-design/icons'\n import { toParams } from 'lib/utils'\n import { PersonsSearch } from './PersonsSearch'\n-import { IconExternalLink } from 'lib/components/icons'\n import { SceneExport } from 'scenes/sceneTypes'\n import { PersonPageHeader } from './PersonPageHeader'\n+import { PropertyFilters } from 'lib/components/PropertyFilters'\n+import { TaxonomicFilterGroupType } from 'lib/components/TaxonomicFilter/types'\n \n export const scene: SceneExport = {\n     component: Persons,\n@@ -36,59 +36,19 @@ export function Persons({ cohort }: PersonsProps = {}): JSX.Element {\n                 <Row style={{ gap: '0.75rem' }} className=\"mb\">\n                     <div style={{ flexGrow: 1, maxWidth: 600 }}>\n                         <PersonsSearch autoFocus={!cohort} />\n-                        <div className=\"text-muted text-small\">\n-                            You can also filter persons that have a certain property set (e.g. <code>has:email</code> or{' '}\n-                            <code>has:name</code>)\n-                        </div>\n-                    </div>\n-                    <div>\n-                        <Radio.Group\n-                            buttonStyle=\"solid\"\n-                            onChange={(e) => {\n-                                const key = e.target.value\n-                                setListFilters({ is_identified: key === 'all' ? undefined : key })\n-                                loadPersons()\n-                            }}\n-                            value={\n-                                listFilters.is_identified !== undefined ? listFilters.is_identified.toString() : 'all'\n-                            }\n-                        >\n-                            <Radio.Button data-attr=\"people-types-tab-all\" value=\"all\">\n-                                All persons\n-                            </Radio.Button>\n-                            <Radio.Button data-attr=\"people-types-tab-identified\" value=\"true\">\n-                                Identified\n-                            </Radio.Button>\n-                            <Radio.Button data-attr=\"people-types-tab-anonymous\" value=\"false\">\n-                                Unidentified\n-                            </Radio.Button>\n-                        </Radio.Group>\n                     </div>\n                 </Row>\n-                {listFilters.is_identified === 'false' && (\n-                    <div className=\"mb\">\n-                        {/* TODO: Product suggestion: We'll want to turn these off for advanced users  */}\n-                        <Alert\n-                            type=\"info\"\n-                            closable\n-                            message={\n-                                <>\n-                                    Unidentified persons are usually anonymous visitors to your app or website that have\n-                                    not been identified to you. To mark a person as identified, call{' '}\n-                                    <code>posthog.identify</code> on your frontend.{' '}\n-                                    <a\n-                                        href=\"https://posthog.com/docs/integrations/js-integration?utm_medium=in-product&utm_campaign=persons-unidentified#identifying-users\"\n-                                        target=\"_blank\"\n-                                        style={{ display: 'inline-flex', alignItems: 'center' }}\n-                                    >\n-                                        <IconExternalLink /> Learn more\n-                                    </a>\n-                                </>\n-                            }\n-                            showIcon\n-                        />\n-                    </div>\n-                )}\n+                <PropertyFilters\n+                    pageKey=\"persons-list-page\"\n+                    propertyFilters={listFilters.properties}\n+                    onChange={(properties) => {\n+                        setListFilters({ properties })\n+                        loadPersons()\n+                    }}\n+                    endpoint=\"person\"\n+                    taxonomicGroupTypes={[TaxonomicFilterGroupType.PersonProperties, TaxonomicFilterGroupType.Cohorts]}\n+                    showConditionBadge\n+                />\n                 <div className=\"mb text-right\">\n                     {cohort ? (\n                         <LinkButton\n@@ -108,12 +68,6 @@ export function Persons({ cohort }: PersonsProps = {}): JSX.Element {\n                     >\n                         Export\n                     </Button>\n-                    {/* TODO: Hidden until new cohorts UX is defined */}\n-                    <Link to=\"/cohorts/new\" style={{ display: 'none' }} className=\"ml\">\n-                        <Button type=\"default\" icon={<PlusOutlined />}>\n-                            New Cohort\n-                        </Button>\n-                    </Link>\n                 </div>\n \n                 <div>\ndiff --git a/frontend/src/scenes/persons/PersonsSearch.tsx b/frontend/src/scenes/persons/PersonsSearch.tsx\nindex 04c14c6fa..eaa9cf8f0 100644\n--- a/frontend/src/scenes/persons/PersonsSearch.tsx\n+++ b/frontend/src/scenes/persons/PersonsSearch.tsx\n@@ -6,7 +6,7 @@ import { personsLogic } from './personsLogic'\n export const PersonsSearch = ({ autoFocus = true }: { autoFocus?: boolean }): JSX.Element => {\n     const { loadPersons, setListFilters } = useActions(personsLogic)\n     const { exampleEmail, listFilters } = useValues(personsLogic)\n-    const [searchTerm, setSearchTerm] = useState('')\n+    const [searchTerm, setSearchTerm] = useState('' as string | undefined)\n \n     useEffect(() => {\n         setSearchTerm(listFilters.search)\ndiff --git a/frontend/src/scenes/persons/personsLogic.test.ts b/frontend/src/scenes/persons/personsLogic.test.ts\nnew file mode 100644\nindex 000000000..8f5fefc16\n--- /dev/null\n+++ b/frontend/src/scenes/persons/personsLogic.test.ts\n@@ -0,0 +1,59 @@\n+import { defaultAPIMocks, mockAPI } from 'lib/api.mock'\n+import { expectLogic } from 'kea-test-utils'\n+import { initKeaTestLogic } from '~/test/init'\n+import { personsLogic } from './personsLogic'\n+import { router } from 'kea-router'\n+import { PropertyOperator } from '~/types'\n+\n+jest.mock('lib/api')\n+\n+describe('personsLogic', () => {\n+    let logic: ReturnType<typeof personsLogic.build>\n+\n+    mockAPI(async (url) => {\n+        const { pathname, searchParams } = url\n+        if (`api/person/` === pathname && searchParams == { properties: [{ key: 'email', operator: 'is_set' }] }) {\n+            return { result: ['result from api'] }\n+        }\n+        return defaultAPIMocks(url)\n+    })\n+\n+    describe('syncs with insightLogic', () => {\n+        initKeaTestLogic({\n+            logic: personsLogic,\n+            props: { syncWithUrl: true },\n+            onLogic: (l) => (logic = l),\n+        })\n+\n+        it('setAllFilters properties works', async () => {\n+            router.actions.push('/persons')\n+            await expectLogic(logic, () => {\n+                logic.actions.setListFilters({\n+                    properties: [{ key: 'email', operator: PropertyOperator.IsSet }],\n+                })\n+                logic.actions.loadPersons()\n+            })\n+                .toMatchValues(logic, {\n+                    listFilters: { properties: [{ key: 'email', operator: 'is_set' }] },\n+                })\n+                .toDispatchActions(router, ['replace', 'locationChanged'])\n+                .toMatchValues(router, { searchParams: { properties: [{ key: 'email', operator: 'is_set' }] } })\n+        })\n+        it('properties from url works', async () => {\n+            router.actions.push('/persons', { properties: [{ key: 'email', operator: 'is_set' }] })\n+            await expectLogic(logic, () => {}).toMatchValues(logic, {\n+                listFilters: { properties: [{ key: 'email', operator: 'is_set' }] },\n+            })\n+\n+            // Expect a clean url (no ?properties={})\n+            await expectLogic(logic, () => {\n+                logic.actions.setListFilters({\n+                    properties: [],\n+                })\n+                logic.actions.loadPersons()\n+            })\n+                .toDispatchActions(router, ['replace', 'locationChanged'])\n+                .toMatchValues(router, { searchParams: {} })\n+        })\n+    })\n+})\ndiff --git a/frontend/src/scenes/persons/personsLogic.ts b/frontend/src/scenes/persons/personsLogic.ts\nindex bed78e305..8718a2ba4 100644\n--- a/frontend/src/scenes/persons/personsLogic.ts\n+++ b/frontend/src/scenes/persons/personsLogic.ts\n@@ -3,12 +3,13 @@ import { router } from 'kea-router'\n import api from 'lib/api'\n import { toast } from 'react-toastify'\n import { personsLogicType } from './personsLogicType'\n-import { CohortType, PersonsTabType, PersonType } from '~/types'\n+import { CohortType, PersonsTabType, PersonType, AnyPropertyFilter } from '~/types'\n import { eventUsageLogic } from 'lib/utils/eventUsageLogic'\n import { urls } from 'scenes/urls'\n import { featureFlagLogic } from 'lib/logic/featureFlagLogic'\n import { FEATURE_FLAGS } from 'lib/constants'\n import { teamLogic } from 'scenes/teamLogic'\n+import { toParams } from 'lib/utils'\n \n interface PersonPaginatedResponse {\n     next: string | null\n@@ -16,14 +17,18 @@ interface PersonPaginatedResponse {\n     results: PersonType[]\n }\n \n-const FILTER_ALLOWLIST: string[] = ['is_identified', 'search', 'cohort']\n+interface Filters {\n+    properties?: AnyPropertyFilter[]\n+    search?: string\n+    cohort?: number\n+}\n \n export interface PersonLogicProps {\n     cohort?: number | 'new' | 'personsModalNew'\n     syncWithUrl?: boolean\n }\n \n-export const personsLogic = kea<personsLogicType<PersonLogicProps, PersonPaginatedResponse>>({\n+export const personsLogic = kea<personsLogicType<Filters, PersonLogicProps, PersonPaginatedResponse>>({\n     props: {} as PersonLogicProps,\n     key: (props) => {\n         if (!props.cohort && !props.syncWithUrl) {\n@@ -40,7 +45,7 @@ export const personsLogic = kea<personsLogicType<PersonLogicProps, PersonPaginat\n         setPerson: (person: PersonType) => ({ person }),\n         loadPerson: (id: string) => ({ id }),\n         loadPersons: (url: string | null = '') => ({ url }),\n-        setListFilters: (payload) => ({ payload }),\n+        setListFilters: (payload: Filters) => ({ payload }),\n         editProperty: (key: string, newValue?: string | number | boolean | null) => ({ key, newValue }),\n         setHasNewKeys: true,\n         navigateToCohort: (cohort: CohortType) => ({ cohort }),\n@@ -49,9 +54,15 @@ export const personsLogic = kea<personsLogicType<PersonLogicProps, PersonPaginat\n     },\n     reducers: {\n         listFilters: [\n-            {} as Record<string, string>,\n+            {} as Filters,\n             {\n-                setListFilters: (state, { payload }) => ({ ...state, ...payload }),\n+                setListFilters: (state, { payload }) => {\n+                    const newFilters = { ...state, ...payload }\n+                    if (newFilters.properties?.length === 0) {\n+                        delete newFilters['properties']\n+                    }\n+                    return newFilters\n+                },\n             },\n         ],\n         hasNewKeys: [\n@@ -179,20 +190,7 @@ export const personsLogic = kea<personsLogicType<PersonLogicProps, PersonPaginat\n             {\n                 loadPersons: async ({ url }) => {\n                     if (!url) {\n-                        const qs = Object.keys(values.listFilters)\n-                            .filter((key) =>\n-                                key !== 'is_identified'\n-                                    ? FILTER_ALLOWLIST.includes(key)\n-                                    : !url?.includes('is_identified')\n-                            )\n-                            .reduce(function (result, key) {\n-                                const value = values.listFilters[key]\n-                                if (value !== undefined && value !== null) {\n-                                    result.push(`${key}=${encodeURIComponent(value)}`)\n-                                }\n-                                return result\n-                            }, [] as string[])\n-                        url = `api/person/${qs.length ? '?' + qs.join('&') : ''}`\n+                        url = `api/person/?${toParams(values.listFilters)}`\n                     }\n                     return await api.get(url)\n                 },\ndiff --git a/frontend/src/types.ts b/frontend/src/types.ts\nindex 54a14a340..e8d03ff08 100644\n--- a/frontend/src/types.ts\n+++ b/frontend/src/types.ts\n@@ -465,7 +465,6 @@ export interface PersonType {\n     name?: string\n     distinct_ids: string[]\n     properties: Record<string, any>\n-    is_identified: boolean\n     created_at?: string\n }\n \ndiff --git a/posthog/api/person.py b/posthog/api/person.py\nindex 9f2c354c0..0c07d4e38 100644\n--- a/posthog/api/person.py\n+++ b/posthog/api/person.py\n@@ -50,7 +50,6 @@ class PersonSerializer(serializers.HyperlinkedModelSerializer):\n             \"name\",\n             \"distinct_ids\",\n             \"properties\",\n-            \"is_identified\",\n             \"created_at\",\n             \"uuid\",\n         ]\n@@ -77,7 +76,7 @@ class PersonFilter(filters.FilterSet):\n \n     class Meta:\n         model = Person\n-        fields = [\"is_identified\"]\n+        fields = [\"email\"]\n \n \n class PersonViewSet(StructuredViewSetMixin, viewsets.ModelViewSet):\ndiff --git a/posthog/api/test/test_person.py b/posthog/api/test/test_person.py\nindex fd9523dd4..80fa3b3c4 100644\n--- a/posthog/api/test/test_person.py\n+++ b/posthog/api/test/test_person.py\n@@ -21,22 +21,10 @@ def factory_test_person(event_factory, person_factory, get_events):\n             )\n             person_factory(team=self.team, distinct_ids=[\"distinct_id_3\"], properties={\"name\": \"jane\"})\n \n-            response = self.client.get(\"/api/person/?search=has:email\")\n-            self.assertEqual(response.status_code, status.HTTP_200_OK)\n-            self.assertEqual(len(response.json()[\"results\"]), 2)\n-\n             response = self.client.get(\"/api/person/?search=another@gm\")\n             self.assertEqual(response.status_code, status.HTTP_200_OK)\n             self.assertEqual(len(response.json()[\"results\"]), 1)\n \n-            response = self.client.get(\"/api/person/?search=another@gm%20has:invalid_property\")\n-            self.assertEqual(response.status_code, status.HTTP_200_OK)\n-            self.assertEqual(len(response.json()[\"results\"]), 0)\n-\n-            response = self.client.get(\"/api/person/?search=another@gm%20has:name\")\n-            self.assertEqual(response.status_code, status.HTTP_200_OK)\n-            self.assertEqual(len(response.json()[\"results\"]), 1)\n-\n             response = self.client.get(\"/api/person/?search=_id_3\")\n             self.assertEqual(response.status_code, status.HTTP_200_OK)\n             self.assertEqual(len(response.json()[\"results\"]), 1)\n@@ -128,7 +116,6 @@ def factory_test_person(event_factory, person_factory, get_events):\n             self.assertEqual(response.status_code, status.HTTP_200_OK)\n             self.assertEqual(len(response.json()[\"results\"]), 1)\n             self.assertEqual(response.json()[\"results\"][0][\"id\"], person1.pk)\n-            self.assertEqual(response.json()[\"results\"][0][\"is_identified\"], True)\n \n             response = self.client.get(\"/api/person/?distinct_id=another_one\")  # can search on any of the distinct IDs\n             self.assertEqual(response.status_code, status.HTTP_200_OK)\n@@ -192,31 +179,6 @@ def factory_test_person(event_factory, person_factory, get_events):\n                 self.assertEqual(response.status_code, status.HTTP_200_OK)\n                 self.assertEqual(response.json()[\"results\"], [])\n \n-        def test_filter_is_identified(self):\n-            person_anonymous = person_factory(team=self.team, distinct_ids=[\"xyz\"])\n-            person_identified_already = person_factory(team=self.team, distinct_ids=[\"tuv\"], is_identified=True)\n-\n-            # all\n-            response = self.client.get(\n-                \"/api/person\",\n-            )  # Make sure the endpoint works with and without the trailing slash\n-            self.assertEqual(response.status_code, status.HTTP_200_OK)\n-            self.assertEqual(len(response.json()[\"results\"]), 2)\n-\n-            # anonymous\n-            response = self.client.get(\"/api/person/?is_identified=false\")\n-            self.assertEqual(response.status_code, status.HTTP_200_OK)\n-            self.assertEqual(len(response.json()[\"results\"]), 1)\n-            self.assertEqual(response.json()[\"results\"][0][\"id\"], person_anonymous.id)\n-            self.assertEqual(response.json()[\"results\"][0][\"is_identified\"], False)\n-\n-            # identified\n-            response = self.client.get(\"/api/person/?is_identified=true\")\n-            self.assertEqual(response.status_code, status.HTTP_200_OK)\n-            self.assertEqual(len(response.json()[\"results\"]), 1)\n-            self.assertEqual(response.json()[\"results\"][0][\"id\"], person_identified_already.id)\n-            self.assertEqual(response.json()[\"results\"][0][\"is_identified\"], True)\n-\n         def test_delete_person(self):\n             person = person_factory(\n                 team=self.team, distinct_ids=[\"person_1\", \"anonymous_id\"], properties={\"$os\": \"Chrome\"},\ndiff --git a/posthog/api/test/test_retention.py b/posthog/api/test/test_retention.py\nindex a47eb3637..19291c46f 100644\n--- a/posthog/api/test/test_retention.py\n+++ b/posthog/api/test/test_retention.py\n@@ -175,7 +175,6 @@ def test_insight_retention_missing_persons_gh_5443(client: Client):\n                 \"created_at\": \"2021-08-03T00:00:00Z\",\n                 \"distinct_ids\": [\"abc\"],\n                 \"id\": ANY,\n-                \"is_identified\": False,\n                 \"name\": \"abc\",\n                 \"properties\": {},\n                 \"uuid\": ANY,\ndiff --git a/posthog/api/test/test_session_recordings.py b/posthog/api/test/test_session_recordings.py\nindex 2094ea91c..83a220985 100644\n--- a/posthog/api/test/test_session_recordings.py\n+++ b/posthog/api/test/test_session_recordings.py\n@@ -104,7 +104,6 @@ def factory_test_session_recordings_api(session_recording_event_factory):\n             self.assertEqual(parse(first_session[\"end_time\"]), (base_time + relativedelta(seconds=20)))\n             self.assertEqual(first_session[\"recording_duration\"], \"0.0\")\n             self.assertEqual(first_session[\"viewed\"], False)\n-            self.assertEqual(first_session[\"person\"][\"is_identified\"], False)\n \n             self.assertEqual(second_session[\"id\"], \"1\")\n             self.assertEqual(second_session[\"distinct_id\"], \"user\")\n@@ -326,7 +325,7 @@ def factory_test_session_recordings_api(session_recording_event_factory):\n             self.create_snapshot(\"d1\", \"id_no_person\", now() - relativedelta(days=1))\n             response = self.client.get(f\"/api/projects/{self.team.id}/session_recordings/id_no_person\")\n             response_data = response.json()\n-            self.assertEqual(response_data[\"result\"][\"person\"], {\"properties\": None, \"is_identified\": False})\n+            self.assertEqual(response_data[\"result\"][\"person\"], {\"properties\": None})\n \n         def test_session_recording_doesnt_exist(self):\n             response = self.client.get(f\"/api/projects/{self.team.id}/session_recordings/non_existent_id\")\ndiff --git a/posthog/queries/base.py b/posthog/queries/base.py\nindex 8691ae22b..12843ea90 100644\n--- a/posthog/queries/base.py\n+++ b/posthog/queries/base.py\n@@ -207,18 +207,9 @@ def filter_persons(team_id: int, request: request.Request, queryset: QuerySet) -\n         uuids = request.GET[\"uuid\"].split(\",\")\n         queryset = queryset.filter(uuid__in=uuids)\n     if request.GET.get(\"search\"):\n-        parts = request.GET[\"search\"].split(\" \")\n-        contains = []\n-        for part in parts:\n-            if \":\" in part:\n-                matcher, key = part.split(\":\")\n-                if matcher == \"has\":\n-                    # Matches for example has:email or has:name\n-                    queryset = queryset.filter(properties__has_key=key)\n-            else:\n-                contains.append(part)\n         queryset = queryset.filter(\n-            Q(properties__icontains=\" \".join(contains)) | Q(persondistinctid__distinct_id__icontains=\" \".join(contains))\n+            Q(properties__icontains=request.GET[\"search\"])\n+            | Q(persondistinctid__distinct_id__icontains=request.GET[\"search\"])\n         ).distinct(\"id\")\n     if request.GET.get(\"cohort\"):\n         queryset = queryset.filter(cohort__id=request.GET[\"cohort\"])\n"
  },
  "6ad9cbb9ea77c8f7690601905fbf7236efcdf52a": {
    "hash": "6ad9cbb9ea77c8f7690601905fbf7236efcdf52a",
    "message": "fix: LemonButton options (#11223)",
    "diff": "commit 6ad9cbb9ea77c8f7690601905fbf7236efcdf52a\nAuthor: Ben White <ben@benjackwhite.co.uk>\nDate:   Wed Aug 10 15:46:02 2022 +0200\n\n    fix: LemonButton options (#11223)\n\ndiff --git a/cypress/support/commands.js b/cypress/support/commands.js\nindex ba89ed783..b994bc5aa 100644\n--- a/cypress/support/commands.js\n+++ b/cypress/support/commands.js\n@@ -28,5 +28,5 @@ Cypress.Commands.add('map', { prevSubject: true }, (subject, method) => {\n })\n \n Cypress.Commands.add('clickNavMenu', (name) => {\n-    cy.get(`[data-attr=\"menu-item-${name}\"]`).click().should('have.class', 'LemonButton--active')\n+    cy.get(`[data-attr=\"menu-item-${name}\"]`).click()\n })\ndiff --git a/frontend/src/lib/components/LemonButton/LemonButton.scss b/frontend/src/lib/components/LemonButton/LemonButton.scss\nindex 59aa7babb..cdf19d7ca 100644\n--- a/frontend/src/lib/components/LemonButton/LemonButton.scss\n+++ b/frontend/src/lib/components/LemonButton/LemonButton.scss\n@@ -55,6 +55,7 @@\n \n         &.LemonButton--no-content {\n             padding: 0.125rem;\n+            min-height: 1rem;\n         }\n \n         > .LemonIcon {\n@@ -139,7 +140,7 @@\n         }\n     }\n \n-    @each $status in ('default', 'primary', 'success', 'warning', 'danger', 'primary-alt', 'muted', 'muted-alt') {\n+    @each $status in ('default', 'primary', 'danger', 'primary-alt', 'muted-alt') {\n         &.LemonButton--status-#{$status} {\n             color: var(--#{$status}, var(--primary));\n \n@@ -223,4 +224,13 @@\n     top: 50%;\n     right: 0.5rem;\n     transform: translateY(-50%);\n+\n+    .LemonButton {\n+        &.LemonButton--status-primary {\n+            &:hover {\n+                // NOTE: this is a rare case so we are hardcoding the value. Only primary status is supported\n+                background: #d2dbff;\n+            }\n+        }\n+    }\n }\ndiff --git a/frontend/src/lib/components/LemonButton/LemonButton.stories.tsx b/frontend/src/lib/components/LemonButton/LemonButton.stories.tsx\nindex 44a28cb11..0b4d6f449 100644\n--- a/frontend/src/lib/components/LemonButton/LemonButton.stories.tsx\n+++ b/frontend/src/lib/components/LemonButton/LemonButton.stories.tsx\n@@ -13,15 +13,7 @@ import { LemonDivider } from '../LemonDivider'\n import { capitalizeFirstLetter } from 'lib/utils'\n import { urls } from 'scenes/urls'\n \n-const statuses: LemonButtonProps['status'][] = [\n-    'primary',\n-    'danger',\n-    'success',\n-    'warning',\n-    'primary-alt',\n-    'muted-alt',\n-    'stealth',\n-]\n+const statuses: LemonButtonProps['status'][] = ['primary', 'danger', 'primary-alt', 'muted-alt']\n const types: LemonButtonProps['type'][] = ['primary', 'secondary', 'tertiary']\n \n export default {\n@@ -45,7 +37,7 @@ const BasicTemplate: ComponentStory<typeof LemonButton> = (props: LemonButtonPro\n export const Default = BasicTemplate.bind({})\n Default.args = {}\n \n-const StatusesTemplate: ComponentStory<typeof LemonButton> = ({ ...props }) => {\n+const StatusesTemplate = ({ ...props }: LemonButtonProps & { noText?: boolean }): JSX.Element => {\n     return (\n         <div className=\"flex gap-2 border rounded-lg p-2 flex-wrap\">\n             {statuses.map((status, j) => (\n@@ -81,11 +73,13 @@ const MoreTemplate: ComponentStory<typeof More> = (props: MoreProps) => {\n     return <More {...props} />\n }\n \n-export const NoPadding = StatusesTemplate.bind({})\n-NoPadding.args = { noText: true, noPadding: true } as any\n+export const NoPadding = (): JSX.Element => {\n+    return <StatusesTemplate noText noPadding />\n+}\n \n-export const TextOnly = StatusesTemplate.bind({})\n-TextOnly.args = { icon: undefined, type: 'secondary' } as any\n+export const TextOnly = (): JSX.Element => {\n+    return <StatusesTemplate type={'secondary'} icon={null} />\n+}\n \n export const Sizes = (): JSX.Element => {\n     const sizes: LemonButtonProps['size'][] = ['small', 'medium', 'large']\n@@ -95,18 +89,35 @@ export const Sizes = (): JSX.Element => {\n             {sizes.map((size) => (\n                 <>\n                     <h5>size={size}</h5>\n-                    <StatusesTemplate size={size} type=\"primary\" />\n+                    <StatusesTemplate size={size} type=\"secondary\" />\n+                </>\n+            ))}\n+        </div>\n+    )\n+}\n+\n+export const SizesIconOnly = (): JSX.Element => {\n+    const sizes: LemonButtonProps['size'][] = ['small', 'medium', 'large']\n+\n+    return (\n+        <div className=\"space-y-2\">\n+            {sizes.map((size) => (\n+                <>\n+                    <h5>size={size}</h5>\n+                    <StatusesTemplate size={size} type=\"secondary\" noText />\n                 </>\n             ))}\n         </div>\n     )\n }\n \n-export const Disabled = StatusesTemplate.bind({})\n-Disabled.args = { disabled: true }\n+export const Disabled = (): JSX.Element => {\n+    return <StatusesTemplate disabled />\n+}\n \n-export const Loading = StatusesTemplate.bind({})\n-Loading.args = { loading: true }\n+export const Loading = (): JSX.Element => {\n+    return <StatusesTemplate disabled />\n+}\n \n export const Active = (): JSX.Element => {\n     return (\n@@ -123,8 +134,24 @@ export const Active = (): JSX.Element => {\n     )\n }\n \n-export const WithSideIcon = StatusesTemplate.bind({})\n-WithSideIcon.args = { sideIcon: <IconInfo /> }\n+export const MenuButtons = (): JSX.Element => {\n+    return (\n+        <div className=\"space-y-2\">\n+            <p>When a button is used inside a menu item it should have the special status **stealth**</p>\n+            <div className=\"border rounded-lg flex flex-col p-2 space-y-1\">\n+                <LemonButton active status=\"stealth\">\n+                    Active item\n+                </LemonButton>\n+                <LemonButton status=\"stealth\">Item 1</LemonButton>\n+                <LemonButton status=\"stealth\">Item 2</LemonButton>\n+            </div>\n+        </div>\n+    )\n+}\n+\n+export const WithSideIcon = (): JSX.Element => {\n+    return <StatusesTemplate sideIcon={<IconInfo />} />\n+}\n \n export const FullWidth = (): JSX.Element => {\n     return (\n@@ -184,7 +211,7 @@ export const WithSideAction = (): JSX.Element => {\n \n export const AsLinks = (): JSX.Element => {\n     return (\n-        <div className=\"space-x-2\">\n+        <div className=\"flex gap-2\">\n             <LemonButton href=\"https://posthog.com\">External link with \"href\"</LemonButton>\n \n             <LemonButton to={urls.projectHomepage()}>Internal link with \"to\"</LemonButton>\ndiff --git a/frontend/src/lib/components/LemonButton/LemonButton.tsx b/frontend/src/lib/components/LemonButton/LemonButton.tsx\nindex 3693476ea..40e7ba876 100644\n--- a/frontend/src/lib/components/LemonButton/LemonButton.tsx\n+++ b/frontend/src/lib/components/LemonButton/LemonButton.tsx\n@@ -15,7 +15,8 @@ export interface LemonButtonPropsBase\n     extends Pick<React.ButtonHTMLAttributes<HTMLElement>, 'title' | 'onClick' | 'id' | 'tabIndex' | 'form'> {\n     children?: React.ReactNode\n     type?: 'primary' | 'secondary' | 'tertiary'\n-    status?: 'primary' | 'success' | 'warning' | 'danger' | 'primary-alt' | 'muted' | 'muted-alt' | 'stealth'\n+    /** What color scheme the button should follow */\n+    status?: 'primary' | 'danger' | 'primary-alt' | 'muted' | 'muted-alt' | 'stealth'\n     /** Whether hover style should be applied, signaling that the button is held active in some way. */\n     active?: boolean\n     /** URL to link to. */\n@@ -167,7 +168,6 @@ export function LemonButtonWithSideAction({\n                     // We don't want secondary style as it creates double borders\n                     type={buttonProps.type !== 'secondary' ? buttonProps.type : undefined}\n                     status={buttonProps.status}\n-                    active={buttonProps.active}\n                     popup={sidePopup as LemonButtonPopup}\n                     noPadding\n                     {...sideActionRest}\ndiff --git a/frontend/src/scenes/experiments/Experiment.tsx b/frontend/src/scenes/experiments/Experiment.tsx\nindex 184804cbf..e5db604bc 100644\n--- a/frontend/src/scenes/experiments/Experiment.tsx\n+++ b/frontend/src/scenes/experiments/Experiment.tsx\n@@ -678,7 +678,7 @@ export function Experiment(): JSX.Element {\n                                     {experimentData.end_date ? (\n                                         <CloseOutlined className=\"close-button\" onClick={() => setShowWarning(false)} />\n                                     ) : (\n-                                        <LemonButton status=\"success\" type=\"primary\" onClick={() => endExperiment()}>\n+                                        <LemonButton type=\"primary\" onClick={() => endExperiment()}>\n                                             End experiment\n                                         </LemonButton>\n                                     )}\n"
  },
  "54ce0fbcd8c48fe1f73f286aad5d19e057547a28": {
    "hash": "54ce0fbcd8c48fe1f73f286aad5d19e057547a28",
    "message": "fix(experiments): experiment results various fixes (#9163)\n    \n    * remove underline\n    \n    * required secondary metric name and fix wonky initial load\n    \n    * fix banner text font weight\n    \n    * forgot about the other banners",
    "diff": "commit 54ce0fbcd8c48fe1f73f286aad5d19e057547a28\nAuthor: Li Yi Yu <li@posthog.com>\nDate:   Tue Mar 22 08:28:21 2022 -0400\n\n    fix(experiments): experiment results various fixes (#9163)\n    \n    * remove underline\n    \n    * required secondary metric name and fix wonky initial load\n    \n    * fix banner text font weight\n    \n    * forgot about the other banners\n\ndiff --git a/frontend/src/scenes/experiments/Experiment.scss b/frontend/src/scenes/experiments/Experiment.scss\nindex fdeeb828f..1e4681eab 100644\n--- a/frontend/src/scenes/experiments/Experiment.scss\n+++ b/frontend/src/scenes/experiments/Experiment.scss\n@@ -287,6 +287,14 @@\n         min-height: 320px;\n         font-size: 24px;\n     }\n+\n+    .end-experiment-btn {\n+        background: $success;\n+        color: white;\n+        &:hover {\n+            color: black;\n+        }\n+    }\n }\n \n .preview-conversion-goal-num {\ndiff --git a/frontend/src/scenes/experiments/Experiment.tsx b/frontend/src/scenes/experiments/Experiment.tsx\nindex 1264f48ec..1e10913ed 100644\n--- a/frontend/src/scenes/experiments/Experiment.tsx\n+++ b/frontend/src/scenes/experiments/Experiment.tsx\n@@ -683,23 +683,34 @@ export function Experiment_({ id }: { id?: Experiment['id'] } = {}): JSX.Element\n                     <Row>\n                         {showWarning && experimentResults && areResultsSignificant && !experimentData.end_date && (\n                             <Row align=\"middle\" className=\"significant-results\">\n-                                <Col span={19} style={{ color: '#497342' }}>\n-                                    Your results are <b>statistically significant</b>.{' '}\n-                                    {experimentData.end_date\n-                                        ? ''\n-                                        : 'You can end this experiment now or let it run to completion.'}\n+                                <Col span={20} style={{ fontWeight: 500, color: '#497342' }}>\n+                                    <div>\n+                                        Experiment results are significant.{' '}\n+                                        {experimentData.end_date\n+                                            ? ''\n+                                            : 'You can end your experiment now or let it run until complete.'}\n+                                    </div>\n                                 </Col>\n-                                <Col span={5}>\n-                                    <Button style={{ color: '#497342' }} onClick={() => setShowWarning(false)}>\n-                                        Dismiss\n-                                    </Button>\n+                                <Col span={4}>\n+                                    {experimentData.end_date ? (\n+                                        <CloseOutlined className=\"close-button\" onClick={() => setShowWarning(false)} />\n+                                    ) : (\n+                                        <LemonButton\n+                                            type=\"highlighted\"\n+                                            className=\"end-experiment-btn\"\n+                                            onClick={() => endExperiment()}\n+                                        >\n+                                            End experiment\n+                                        </LemonButton>\n+                                    )}\n                                 </Col>\n                             </Row>\n                         )}\n                         {showWarning && experimentResults && !areResultsSignificant && !experimentData.end_date && (\n-                            <Row align=\"middle\" className=\"not-significant-results\">\n-                                <Col span={23} style={{ color: '#2D2D2D' }}>\n-                                    <b>Your results are not statistically significant</b>. {significanceBannerDetails}{' '}\n+                            <Row align=\"top\" className=\"not-significant-results\">\n+                                <Col span={23} style={{ fontWeight: 500, color: '#2D2D2D' }}>\n+                                    <strong>Your results are not statistically significant</strong>.{' '}\n+                                    {significanceBannerDetails}{' '}\n                                     {experimentData?.end_date ? '' : \"We don't recommend ending this experiment yet.\"}{' '}\n                                     See our{' '}\n                                     <a href=\"https://posthog.com/docs/user-guides/experimentation#funnel-experiment-calculations\">\n@@ -714,10 +725,10 @@ export function Experiment_({ id }: { id?: Experiment['id'] } = {}): JSX.Element\n                             </Row>\n                         )}\n                         {showWarning && experimentData.end_date && (\n-                            <Row align=\"middle\" className=\"feature-flag-mods\">\n-                                <Col span={23}>\n-                                    <b>Your experiment is complete.</b> We recommend removing the feature flag from your\n-                                    code completely, instead of relying on this distribution:{' '}\n+                            <Row align=\"top\" className=\"feature-flag-mods\">\n+                                <Col span={23} style={{ fontWeight: 500 }}>\n+                                    <strong>Your experiment is complete.</strong> We recommend removing the feature flag\n+                                    from your code completely, instead of relying on this distribution.{' '}\n                                     <Link\n                                         to={\n                                             experimentData.feature_flag\n@@ -725,7 +736,7 @@ export function Experiment_({ id }: { id?: Experiment['id'] } = {}): JSX.Element\n                                                 : undefined\n                                         }\n                                     >\n-                                        <b>Adjust feature flag distribution.</b>\n+                                        <b>Adjust feature flag distribution</b>\n                                     </Link>\n                                 </Col>\n                                 <Col span={1}>\n@@ -750,7 +761,7 @@ export function Experiment_({ id }: { id?: Experiment['id'] } = {}): JSX.Element\n                                             }\n                                         />\n                                     </Col>\n-                                    {!experimentResults && experimentData.start_date && (\n+                                    {!experimentResultsLoading && !experimentResults && experimentData.start_date && (\n                                         <Col span={12}>\n                                             <ExperimentImplementationDetails experiment={experimentData} />\n                                         </Col>\ndiff --git a/frontend/src/scenes/experiments/Experiments.tsx b/frontend/src/scenes/experiments/Experiments.tsx\nindex 7a85ed60d..135b45ff1 100644\n--- a/frontend/src/scenes/experiments/Experiments.tsx\n+++ b/frontend/src/scenes/experiments/Experiments.tsx\n@@ -136,13 +136,7 @@ export function Experiments(): JSX.Element {\n             />\n             {hasAvailableFeature(AvailableFeature.EXPERIMENTATION) ? (\n                 <>\n-                    <div\n-                        style={{\n-                            borderBottom: '1px solid var(--border)',\n-                            paddingBottom: '0.5rem',\n-                            marginBottom: '1rem',\n-                        }}\n-                    >\n+                    <div className=\"mb\">\n                         Check out our\n                         <a\n                             data-attr=\"experiment-help\"\ndiff --git a/frontend/src/scenes/experiments/SecondaryMetrics.tsx b/frontend/src/scenes/experiments/SecondaryMetrics.tsx\nindex 3156985df..a44e16e21 100644\n--- a/frontend/src/scenes/experiments/SecondaryMetrics.tsx\n+++ b/frontend/src/scenes/experiments/SecondaryMetrics.tsx\n@@ -10,6 +10,7 @@ import './Experiment.scss'\n import { InsightContainer } from 'scenes/insights/InsightContainer'\n import { CaretDownOutlined, DeleteOutlined } from '@ant-design/icons'\n import { secondaryMetricsLogic, SecondaryMetricsProps } from './secondaryMetricsLogic'\n+import { LemonButton } from 'lib/components/LemonButton'\n \n export function SecondaryMetrics({ onMetricsChange, initialMetrics }: SecondaryMetricsProps): JSX.Element {\n     const logic = secondaryMetricsLogic({ onMetricsChange, initialMetrics })\n@@ -41,23 +42,29 @@ export function SecondaryMetrics({ onMetricsChange, initialMetrics }: SecondaryM\n                 visible={modalVisible}\n                 destroyOnClose={true}\n                 onCancel={hideModal}\n-                onOk={() => {\n-                    createNewMetric()\n-                    hideModal()\n-                }}\n-                okText=\"Save\"\n+                footer={null}\n                 style={{ minWidth: 600 }}\n             >\n                 <Form\n                     layout=\"vertical\"\n-                    initialValues={{ name: '', type: InsightType.TRENDS }}\n+                    initialValues={{ type: InsightType.TRENDS }}\n                     onValuesChange={(values) => {\n                         if (values.name) {\n                             setCurrentMetricName(values.name)\n                         }\n                     }}\n+                    onFinish={() => {\n+                        createNewMetric()\n+                        hideModal()\n+                    }}\n+                    scrollToFirstError\n+                    requiredMark={false}\n                 >\n-                    <Form.Item name=\"name\" label=\"Name\">\n+                    <Form.Item\n+                        name=\"name\"\n+                        label=\"Name\"\n+                        rules={[{ required: true, message: 'You have to enter a name.' }]}\n+                    >\n                         <Input />\n                     </Form.Item>\n                     <Form.Item name=\"type\" label=\"Type\">\n@@ -155,6 +162,14 @@ export function SecondaryMetrics({ onMetricsChange, initialMetrics }: SecondaryM\n                             <InsightContainer disableHeader={true} disableTable={true} />\n                         </BindLogic>\n                     </Form.Item>\n+                    <Row justify=\"end\">\n+                        <LemonButton type=\"secondary\" className=\"mr-05\" onClick={() => hideModal()}>\n+                            Cancel\n+                        </LemonButton>\n+                        <LemonButton type=\"primary\" htmlType=\"submit\">\n+                            Save\n+                        </LemonButton>\n+                    </Row>\n                 </Form>\n             </Modal>\n             <Row>\n@@ -163,9 +178,7 @@ export function SecondaryMetrics({ onMetricsChange, initialMetrics }: SecondaryM\n                         <Row key={idx} className=\"mt\">\n                             <Row align=\"middle\" className=\"full-width border-all\" style={{ padding: 8 }}>\n                                 <div style={{ fontWeight: 500 }}>Name</div>{' '}\n-                                <div className=\"metric-name\">\n-                                    {metric.name ? metric.name : `${metric.filters.insight} metric`}\n-                                </div>\n+                                <div className=\"metric-name\">{metric.name}</div>\n                                 <DeleteOutlined\n                                     className=\"text-danger\"\n                                     style={{ padding: 8 }}\ndiff --git a/frontend/src/scenes/experiments/secondaryMetricsLogic.ts b/frontend/src/scenes/experiments/secondaryMetricsLogic.ts\nindex 24ce8b677..10886f1a9 100644\n--- a/frontend/src/scenes/experiments/secondaryMetricsLogic.ts\n+++ b/frontend/src/scenes/experiments/secondaryMetricsLogic.ts\n@@ -13,7 +13,6 @@ import {\n } from '~/types'\n import { cleanFilters } from 'scenes/insights/utils/cleanFilters'\n import { FunnelLayout } from 'lib/constants'\n-import { generateRandomAnimal } from 'lib/utils/randomAnimal'\n import { funnelLogic } from 'scenes/funnels/funnelLogic'\n import { trendsLogic } from 'scenes/trends/trendsLogic'\n \n@@ -142,7 +141,6 @@ export const secondaryMetricsLogic = kea<secondaryMetricsLogicType<SecondaryMetr\n             }\n \n             const newInsight = {\n-                name: generateRandomAnimal(),\n                 description: '',\n                 tags: [],\n                 filters: newInsightFilters,\n"
  },
  "9712f65111edcfb037edecfe36aa3ed2fcd5d70a": {
    "hash": "9712f65111edcfb037edecfe36aa3ed2fcd5d70a",
    "message": "fix(feature-flags): Speed up and improve groups ff query (#11295)\n    \n    * fix(feature-flags): Speed up and improve groups ff query\n    \n    * clean up\n    \n    * clean up\n    \n    * make snapshots resilient",
    "diff": "commit 9712f65111edcfb037edecfe36aa3ed2fcd5d70a\nAuthor: Neil Kakkar <neilkakkar@gmail.com>\nDate:   Mon Aug 15 14:57:32 2022 +0100\n\n    fix(feature-flags): Speed up and improve groups ff query (#11295)\n    \n    * fix(feature-flags): Speed up and improve groups ff query\n    \n    * clean up\n    \n    * clean up\n    \n    * make snapshots resilient\n\ndiff --git a/posthog/models/feature_flag.py b/posthog/models/feature_flag.py\nindex 6f91e5845..058adac0b 100644\n--- a/posthog/models/feature_flag.py\n+++ b/posthog/models/feature_flag.py\n@@ -1,10 +1,9 @@\n import hashlib\n from dataclasses import dataclass\n-from typing import Any, Dict, List, Optional, Union\n+from typing import Any, Dict, List, Optional, Tuple, Union\n \n from django.core.cache import cache\n from django.db import models\n-from django.db.models import Q\n from django.db.models.expressions import ExpressionWrapper, RawSQL\n from django.db.models.fields import BooleanField\n from django.db.models.query import QuerySet\n@@ -260,9 +259,21 @@ class FeatureFlagMatcher:\n         person_query: QuerySet = Person.objects.filter(\n             team_id=team_id, persondistinctid__distinct_id=self.distinct_id, persondistinctid__team_id=team_id,\n         )\n-        group_query: QuerySet = Group.objects.filter(team_id=team_id,)\n+        basic_group_query: QuerySet = Group.objects.filter(team_id=team_id,)\n+        group_query_per_group_type_mapping: Dict[GroupTypeIndex, Tuple[QuerySet, List[str]]] = {}\n+        # :TRICKY: Create a queryset for each group type that uniquely identifies a group, based on the groups passed in.\n+        # If no groups for a group type are passed in, we can skip querying for that group type,\n+        # since the result will always be `false`.\n+        for group_type, group_key in self.groups.items():\n+            group_type_index = self.cache.group_types_to_indexes.get(group_type)\n+            if group_type_index is not None:\n+                # a tuple of querySet and field names\n+                group_query_per_group_type_mapping[group_type_index] = (\n+                    basic_group_query.filter(group_type_index=group_type_index, group_key=group_key),\n+                    [],\n+                )\n+\n         person_fields = []\n-        group_fields = []\n \n         for feature_flag in self.feature_flags:\n             for index, condition in enumerate(feature_flag.conditions):\n@@ -283,25 +294,31 @@ class FeatureFlagMatcher:\n                     )\n                     person_fields.append(key)\n                 else:\n-                    group_filter = Q(\n-                        group_type_index=feature_flag.aggregation_group_type_index,\n-                        group_key=self.hashed_identifier(feature_flag),\n+                    if feature_flag.aggregation_group_type_index not in group_query_per_group_type_mapping:\n+                        # ignore flags that didn't have the right groups passed in\n+                        continue\n+                    group_query, group_fields = group_query_per_group_type_mapping[\n+                        feature_flag.aggregation_group_type_index\n+                    ]\n+                    group_query = group_query.annotate(\n+                        **{key: ExpressionWrapper(expr if expr else RawSQL(\"true\", []), output_field=BooleanField())}\n                     )\n-                    if expr:\n-                        expr = expr & group_filter\n-                    else:\n-                        expr = group_filter\n-                    group_query = group_query.annotate(**{key: ExpressionWrapper(expr, output_field=BooleanField())})\n                     group_fields.append(key)\n+                    group_query_per_group_type_mapping[feature_flag.aggregation_group_type_index] = (\n+                        group_query,\n+                        group_fields,\n+                    )\n \n         all_conditions = {}\n         if len(person_fields) > 0:\n             person_query = person_query.values(*person_fields)\n             if len(person_query) > 0:\n                 all_conditions = {**person_query[0]}\n-        if len(group_fields) > 0:\n+\n+        for group_query, group_fields in group_query_per_group_type_mapping.values():\n             group_query = group_query.values(*group_fields)\n             if len(group_query) > 0:\n+                assert len(group_query) == 1, f\"Expected 1 group query result, got {len(group_query)}\"\n                 all_conditions = {**all_conditions, **group_query[0]}\n \n         return all_conditions\ndiff --git a/posthog/test/__snapshots__/test_feature_flag.ambr b/posthog/test/__snapshots__/test_feature_flag.ambr\nnew file mode 100644\nindex 000000000..0634a93cd\n--- /dev/null\n+++ b/posthog/test/__snapshots__/test_feature_flag.ambr\n@@ -0,0 +1,143 @@\n+# name: TestFeatureFlagMatcher.test_multiple_flags\n+  '\n+  SELECT \"posthog_team\".\"id\",\n+         \"posthog_team\".\"uuid\",\n+         \"posthog_team\".\"organization_id\",\n+         \"posthog_team\".\"api_token\",\n+         \"posthog_team\".\"app_urls\",\n+         \"posthog_team\".\"name\",\n+         \"posthog_team\".\"slack_incoming_webhook\",\n+         \"posthog_team\".\"created_at\",\n+         \"posthog_team\".\"updated_at\",\n+         \"posthog_team\".\"anonymize_ips\",\n+         \"posthog_team\".\"completed_snippet_onboarding\",\n+         \"posthog_team\".\"ingested_event\",\n+         \"posthog_team\".\"session_recording_opt_in\",\n+         \"posthog_team\".\"signup_token\",\n+         \"posthog_team\".\"is_demo\",\n+         \"posthog_team\".\"access_control\",\n+         \"posthog_team\".\"test_account_filters\",\n+         \"posthog_team\".\"path_cleaning_filters\",\n+         \"posthog_team\".\"timezone\",\n+         \"posthog_team\".\"data_attributes\",\n+         \"posthog_team\".\"person_display_name_properties\",\n+         \"posthog_team\".\"live_events_columns\",\n+         \"posthog_team\".\"primary_dashboard_id\",\n+         \"posthog_team\".\"correlation_config\",\n+         \"posthog_team\".\"session_recording_retention_period_days\",\n+         \"posthog_team\".\"plugins_opt_in\",\n+         \"posthog_team\".\"opt_out_capture\",\n+         \"posthog_team\".\"event_names\",\n+         \"posthog_team\".\"event_names_with_usage\",\n+         \"posthog_team\".\"event_properties\",\n+         \"posthog_team\".\"event_properties_with_usage\",\n+         \"posthog_team\".\"event_properties_numerical\"\n+  FROM \"posthog_team\"\n+  WHERE \"posthog_team\".\"id\" = 2\n+  LIMIT 21\n+  '\n+---\n+# name: TestFeatureFlagMatcher.test_multiple_flags.1\n+  '\n+  SELECT \"posthog_asyncmigration\".\"id\",\n+         \"posthog_asyncmigration\".\"name\",\n+         \"posthog_asyncmigration\".\"description\",\n+         \"posthog_asyncmigration\".\"progress\",\n+         \"posthog_asyncmigration\".\"status\",\n+         \"posthog_asyncmigration\".\"current_operation_index\",\n+         \"posthog_asyncmigration\".\"current_query_id\",\n+         \"posthog_asyncmigration\".\"celery_task_id\",\n+         \"posthog_asyncmigration\".\"started_at\",\n+         \"posthog_asyncmigration\".\"finished_at\",\n+         \"posthog_asyncmigration\".\"posthog_min_version\",\n+         \"posthog_asyncmigration\".\"posthog_max_version\",\n+         \"posthog_asyncmigration\".\"parameters\"\n+  FROM \"posthog_asyncmigration\"\n+  WHERE (\"posthog_asyncmigration\".\"name\" = '0003_fill_person_distinct_id2'\n+         AND \"posthog_asyncmigration\".\"status\" = 2)\n+  ORDER BY \"posthog_asyncmigration\".\"id\" ASC\n+  LIMIT 1\n+  '\n+---\n+# name: TestFeatureFlagMatcher.test_multiple_flags.2\n+  '\n+  SELECT \"posthog_grouptypemapping\".\"id\",\n+         \"posthog_grouptypemapping\".\"team_id\",\n+         \"posthog_grouptypemapping\".\"group_type\",\n+         \"posthog_grouptypemapping\".\"group_type_index\",\n+         \"posthog_grouptypemapping\".\"name_singular\",\n+         \"posthog_grouptypemapping\".\"name_plural\"\n+  FROM \"posthog_grouptypemapping\"\n+  WHERE \"posthog_grouptypemapping\".\"team_id\" = 2\n+  '\n+---\n+# name: TestFeatureFlagMatcher.test_multiple_flags.3\n+  '\n+  SELECT (\"posthog_person\".\"properties\" -> 'email') = '\"test@posthog.com\"' AS \"flag_X_condition_0\",\n+         (true) AS \"flag_X_condition_1\",\n+         (true) AS \"flag_X_condition_0\",\n+         (true) AS \"flag_X_condition_0\",\n+         (true) AS \"flag_X_condition_0\"\n+  FROM \"posthog_person\"\n+  INNER JOIN \"posthog_persondistinctid\" ON (\"posthog_person\".\"id\" = \"posthog_persondistinctid\".\"person_id\")\n+  WHERE (\"posthog_persondistinctid\".\"distinct_id\" = 'test_id'\n+         AND \"posthog_persondistinctid\".\"team_id\" = 2\n+         AND \"posthog_person\".\"team_id\" = 2)\n+  '\n+---\n+# name: TestFeatureFlagMatcher.test_multiple_flags.4\n+  '\n+  SELECT (true) AS \"flag_X_condition_0\",\n+         (true) AS \"flag_X_condition_0\"\n+  FROM \"posthog_group\"\n+  WHERE (\"posthog_group\".\"team_id\" = 2\n+         AND \"posthog_group\".\"group_key\" = 'group_key'\n+         AND \"posthog_group\".\"group_type_index\" = 2)\n+  '\n+---\n+# name: TestFeatureFlagMatcher.test_multiple_flags.5\n+  '\n+  SELECT (\"posthog_group\".\"group_properties\" -> 'name') IN ('\"foo.inc\"') AS \"flag_X_condition_0\",\n+         (\"posthog_group\".\"group_properties\" -> 'name') IN ('\"foo2.inc\"') AS \"flag_X_condition_0\"\n+  FROM \"posthog_group\"\n+  WHERE (\"posthog_group\".\"team_id\" = 2\n+         AND \"posthog_group\".\"group_key\" = 'foo'\n+         AND \"posthog_group\".\"group_type_index\" = 2)\n+  '\n+---\n+# name: TestFeatureFlagMatcher.test_multiple_flags.6\n+  '\n+  SELECT \"posthog_grouptypemapping\".\"id\",\n+         \"posthog_grouptypemapping\".\"team_id\",\n+         \"posthog_grouptypemapping\".\"group_type\",\n+         \"posthog_grouptypemapping\".\"group_type_index\",\n+         \"posthog_grouptypemapping\".\"name_singular\",\n+         \"posthog_grouptypemapping\".\"name_plural\"\n+  FROM \"posthog_grouptypemapping\"\n+  WHERE \"posthog_grouptypemapping\".\"team_id\" = 2\n+  '\n+---\n+# name: TestFeatureFlagMatcher.test_multiple_flags.7\n+  '\n+  SELECT (\"posthog_person\".\"properties\" -> 'email') = '\"test@posthog.com\"' AS \"flag_X_condition_0\",\n+         (true) AS \"flag_X_condition_1\",\n+         (true) AS \"flag_X_condition_0\",\n+         (true) AS \"flag_X_condition_0\",\n+         (true) AS \"flag_X_condition_0\"\n+  FROM \"posthog_person\"\n+  INNER JOIN \"posthog_persondistinctid\" ON (\"posthog_person\".\"id\" = \"posthog_persondistinctid\".\"person_id\")\n+  WHERE (\"posthog_persondistinctid\".\"distinct_id\" = 'test_id'\n+         AND \"posthog_persondistinctid\".\"team_id\" = 2\n+         AND \"posthog_person\".\"team_id\" = 2)\n+  '\n+---\n+# name: TestFeatureFlagMatcher.test_multiple_flags.8\n+  '\n+  SELECT (\"posthog_group\".\"group_properties\" -> 'name') IN ('\"foo.inc\"') AS \"flag_X_condition_0\",\n+         (\"posthog_group\".\"group_properties\" -> 'name') IN ('\"foo2.inc\"') AS \"flag_X_condition_0\"\n+  FROM \"posthog_group\"\n+  WHERE (\"posthog_group\".\"team_id\" = 2\n+         AND \"posthog_group\".\"group_key\" = 'foo2'\n+         AND \"posthog_group\".\"group_type_index\" = 2)\n+  '\n+---\ndiff --git a/posthog/test/base.py b/posthog/test/base.py\nindex 08e3c6619..105ec1054 100644\n--- a/posthog/test/base.py\n+++ b/posthog/test/base.py\n@@ -266,6 +266,8 @@ class QueryMatchingTest:\n         if replace_all_numbers:\n             query = re.sub(r\"(\\\"?) = \\d+\", r\"\\1 = 2\", query)\n             query = re.sub(r\"(\\\"?) IN \\(\\d+(, \\d+)*\\)\", r\"\\1 IN (1, 2, 3, 4, 5 /* ... */)\", query)\n+            # feature flag conditions use primary keys as columns in queries, so replace those too\n+            query = re.sub(r\"flag_\\d+_condition\", r\"flag_X_condition\", query)\n         else:\n             query = re.sub(r\"(team|cohort)_id(\\\"?) = \\d+\", r\"\\1_id\\2 = 2\", query)\n \ndiff --git a/posthog/test/test_feature_flag.py b/posthog/test/test_feature_flag.py\nindex 2a2e9b1d3..7d230f264 100644\n--- a/posthog/test/test_feature_flag.py\n+++ b/posthog/test/test_feature_flag.py\n@@ -13,7 +13,7 @@ from posthog.models.feature_flag import (\n     set_feature_flag_hash_key_overrides,\n )\n from posthog.models.group import Group\n-from posthog.test.base import BaseTest, QueryMatchingTest\n+from posthog.test.base import BaseTest, QueryMatchingTest, snapshot_postgres_queries\n \n \n class TestFeatureFlagMatcher(BaseTest, QueryMatchingTest):\n@@ -64,6 +64,7 @@ class TestFeatureFlagMatcher(BaseTest, QueryMatchingTest):\n         self.assertEqual(FeatureFlagMatcher([feature_flag], \"example_id\").get_match(feature_flag), FeatureFlagMatch())\n         self.assertIsNone(FeatureFlagMatcher([feature_flag], \"another_id\").get_match(feature_flag))\n \n+    @snapshot_postgres_queries\n     def test_multiple_flags(self):\n         Person.objects.create(\n             team=self.team, distinct_ids=[\"test_id\"], properties={\"email\": \"test@posthog.com\"},\n@@ -115,6 +116,26 @@ class TestFeatureFlagMatcher(BaseTest, QueryMatchingTest):\n             },\n             key=\"group_property_match\",\n         )\n+        feature_flag_group_property_match_for_different_group_key = self.create_feature_flag(\n+            filters={\n+                \"aggregation_group_type_index\": 0,\n+                \"groups\": [\n+                    {\n+                        \"rollout_percentage\": 100,\n+                        \"properties\": [\n+                            {\n+                                \"key\": \"name\",\n+                                \"value\": [\"foo2.inc\"],\n+                                \"operator\": \"exact\",\n+                                \"type\": \"group\",\n+                                \"group_type_index\": 0,\n+                            }\n+                        ],\n+                    }\n+                ],\n+            },\n+            key=\"group_property_different_match\",\n+        )\n         feature_flag_variant = self.create_feature_flag(\n             filters={\n                 \"groups\": [{\"properties\": [], \"rollout_percentage\": None}],\n@@ -130,8 +151,8 @@ class TestFeatureFlagMatcher(BaseTest, QueryMatchingTest):\n         )\n \n         with self.assertNumQueries(\n-            3\n-        ):  # 1 to fill group cache, 1 to match feature flags with group properties, 1 to match feature flags with person properties\n+            4\n+        ):  # 1 to fill group cache, 2 to match feature flags with group properties (of each type), 1 to match feature flags with person properties\n \n             matches = FeatureFlagMatcher(\n                 [\n@@ -142,6 +163,7 @@ class TestFeatureFlagMatcher(BaseTest, QueryMatchingTest):\n                     feature_flag_group_no_match,\n                     feature_flag_variant,\n                     feature_flag_group_property_match,\n+                    feature_flag_group_property_match_for_different_group_key,\n                 ],\n                 \"test_id\",\n                 {\"project\": \"group_key\", \"organization\": \"foo\"},\n@@ -157,6 +179,40 @@ class TestFeatureFlagMatcher(BaseTest, QueryMatchingTest):\n                     \"variant\": \"first-variant\",\n                     \"group_property_match\": True,\n                     # never_match and group_no_match don't match\n+                    # group_property_different_match doesn't match because we're dealing with a different group key\n+                },\n+            )\n+\n+        with self.assertNumQueries(\n+            3\n+        ):  # 1 to fill group cache, 1 to match feature flags with group properties (only 1 group provided), 1 to match feature flags with person properties\n+\n+            matches = FeatureFlagMatcher(\n+                [\n+                    feature_flag_one,\n+                    feature_flag_always_match,\n+                    feature_flag_never_match,\n+                    feature_flag_group_match,\n+                    feature_flag_group_no_match,\n+                    feature_flag_variant,\n+                    feature_flag_group_property_match,\n+                    feature_flag_group_property_match_for_different_group_key,\n+                ],\n+                \"test_id\",\n+                {\"organization\": \"foo2\"},\n+                FlagsMatcherCache(self.team.id),\n+            ).get_matches()\n+\n+            self.assertEqual(\n+                matches,\n+                {\n+                    \"one\": True,\n+                    \"always_match\": True,\n+                    \"variant\": \"first-variant\",\n+                    \"group_property_different_match\": True,\n+                    # never_match and group_no_match don't match\n+                    # group_match doesn't match because no project (group type index 1) given.\n+                    # group_property_match doesn't match because we're dealing with a different group key\n                 },\n             )\n \n@@ -504,12 +560,27 @@ class TestFeatureFlagMatcher(BaseTest, QueryMatchingTest):\n     def create_groups(self):\n         GroupTypeMapping.objects.create(team=self.team, group_type=\"organization\", group_type_index=0)\n         GroupTypeMapping.objects.create(team=self.team, group_type=\"project\", group_type_index=1)\n+\n+        # Add other irrelevant groups\n+        for i in range(5):\n+            Group.objects.create(\n+                team=self.team,\n+                group_type_index=0,\n+                group_key=f\"foo{i}\",\n+                group_properties={\"name\": f\"foo{i}.inc\"},\n+                version=1,\n+            )\n         Group.objects.create(\n             team=self.team, group_type_index=0, group_key=\"foo\", group_properties={\"name\": \"foo.inc\"}, version=1\n         )\n         Group.objects.create(\n             team=self.team, group_type_index=0, group_key=\"bar\", group_properties={\"name\": \"var.inc\"}, version=1\n         )\n+        # Add other irrelevant groups\n+        for i in range(5):\n+            Group.objects.create(\n+                team=self.team, group_type_index=1, group_key=f\"group_key{i}\", group_properties={}, version=1,\n+            )\n         Group.objects.create(\n             team=self.team, group_type_index=1, group_key=\"group_key\", group_properties={\"name\": \"var.inc\"}, version=1\n         )\n"
  },
  "07f9cc211837a1040c0ecda01839efa397c526b2": {
    "hash": "07f9cc211837a1040c0ecda01839efa397c526b2",
    "message": "feat(feature-flags): Allow GeoIP property overrides for persons in decide (#10914)\n    \n    * feat: add libmaxminddb0 as dependency. C library will speed things up significantly\n    \n    * pin libmaxminddb to 1.5 for whats available from APK\n    \n    * get geolite2 db during build\n    \n    * add settings for geoip2 django contrib library\n    \n    * black formatting\n    \n    * consistently use share director\n    \n    * isort fixes\n    \n    * remove GeoLite2-City.mmdb from git and add script to ./bin/start to download it if file does not exist\n    \n    * remove GeoLite2-City.mmdb from git\n    \n    * add doc for share directory expaining why it exists\n    \n    * relative path for curl in build\n    \n    * shared vs share consistency\n    \n    * feat(feature-flags): Allow GeoIP property overrides for persons in decide\n    \n    * add geoip class\n    \n    * Update snapshots\n    \n    * add geoip to ci\n    \n    * wrong place\n    \n    * check where I am\n    \n    * decompress database\n    \n    * Update snapshots\n    \n    * brotli decompress\n    \n    * ..everywhere\n    \n    * remove annoying ff snapshot\n    \n    * make exception surface larger\n    \n    * add permissions to view folder & read file for everyone\n    \n    * make exception surface larger\n    \n    Co-authored-by: James Greenhill <fuziontech@gmail.com>\n    Co-authored-by: neilkakkar <neilkakkar@users.noreply.github.com>",
    "diff": "commit 07f9cc211837a1040c0ecda01839efa397c526b2\nAuthor: Neil Kakkar <neilkakkar@gmail.com>\nDate:   Tue Jul 26 22:52:36 2022 +0100\n\n    feat(feature-flags): Allow GeoIP property overrides for persons in decide (#10914)\n    \n    * feat: add libmaxminddb0 as dependency. C library will speed things up significantly\n    \n    * pin libmaxminddb to 1.5 for whats available from APK\n    \n    * get geolite2 db during build\n    \n    * add settings for geoip2 django contrib library\n    \n    * black formatting\n    \n    * consistently use share director\n    \n    * isort fixes\n    \n    * remove GeoLite2-City.mmdb from git and add script to ./bin/start to download it if file does not exist\n    \n    * remove GeoLite2-City.mmdb from git\n    \n    * add doc for share directory expaining why it exists\n    \n    * relative path for curl in build\n    \n    * shared vs share consistency\n    \n    * feat(feature-flags): Allow GeoIP property overrides for persons in decide\n    \n    * add geoip class\n    \n    * Update snapshots\n    \n    * add geoip to ci\n    \n    * wrong place\n    \n    * check where I am\n    \n    * decompress database\n    \n    * Update snapshots\n    \n    * brotli decompress\n    \n    * ..everywhere\n    \n    * remove annoying ff snapshot\n    \n    * make exception surface larger\n    \n    * add permissions to view folder & read file for everyone\n    \n    * make exception surface larger\n    \n    Co-authored-by: James Greenhill <fuziontech@gmail.com>\n    Co-authored-by: neilkakkar <neilkakkar@users.noreply.github.com>\n\ndiff --git a/frontend/src/scenes/instance/SystemStatus/systemStatusLogic.ts b/frontend/src/scenes/instance/SystemStatus/systemStatusLogic.ts\nindex 5c88facf0..f970b04b0 100644\n--- a/frontend/src/scenes/instance/SystemStatus/systemStatusLogic.ts\n+++ b/frontend/src/scenes/instance/SystemStatus/systemStatusLogic.ts\n@@ -49,6 +49,7 @@ const EDITABLE_INSTANCE_SETTINGS = [\n     'EMAIL_REPLY_TO',\n     'AGGREGATE_BY_DISTINCT_IDS_TEAMS',\n     'ENABLE_ACTOR_ON_EVENTS_TEAMS',\n+    'GEOIP_PROPERTY_OVERRIDES_TEAMS',\n     'STRICT_CACHING_TEAMS',\n     'SLACK_APP_CLIENT_ID',\n     'SLACK_APP_CLIENT_SECRET',\ndiff --git a/posthog/api/decide.py b/posthog/api/decide.py\nindex c143ec58b..60daf8326 100644\n--- a/posthog/api/decide.py\n+++ b/posthog/api/decide.py\n@@ -8,12 +8,13 @@ from rest_framework import status\n from sentry_sdk import capture_exception\n from statshog.defaults.django import statsd\n \n+from posthog.api.geoip import get_geoip_properties\n from posthog.api.utils import get_token\n from posthog.exceptions import RequestParsingError, generate_exception_response\n from posthog.logging.timing import timed\n from posthog.models import Team, User\n from posthog.models.feature_flag import get_active_feature_flags\n-from posthog.utils import cors_response, get_js_url, load_data_from_request\n+from posthog.utils import cors_response, get_ip_address, get_js_url, load_data_from_request\n \n from .utils import get_project_id\n \n@@ -156,8 +157,17 @@ def get_decide(request: HttpRequest):\n                         status_code=status.HTTP_400_BAD_REQUEST,\n                     ),\n                 )\n+\n+            property_overrides = (\n+                get_geoip_properties(get_ip_address(request)) if team.geoip_property_overrides_enabled else {}\n+            )\n+\n             feature_flags = get_active_feature_flags(\n-                team.pk, distinct_id, data.get(\"groups\", {}), hash_key_override=data.get(\"$anon_distinct_id\")\n+                team.pk,\n+                data[\"distinct_id\"],\n+                data.get(\"groups\", {}),\n+                hash_key_override=data.get(\"$anon_distinct_id\"),\n+                property_value_overrides=property_overrides,\n             )\n             response[\"featureFlags\"] = feature_flags if api_version >= 2 else list(feature_flags.keys())\n \ndiff --git a/posthog/api/geoip.py b/posthog/api/geoip.py\nnew file mode 100644\nindex 000000000..0afc3af21\n--- /dev/null\n+++ b/posthog/api/geoip.py\n@@ -0,0 +1,56 @@\n+from typing import Dict, Optional\n+\n+import structlog\n+from django.contrib.gis.geoip2 import GeoIP2\n+from sentry_sdk import capture_exception\n+\n+logger = structlog.get_logger(__name__)\n+\n+\n+try:\n+    geoip: Optional[GeoIP2] = GeoIP2(cache=8)\n+    # Cache setting corresponds to MODE_MEMORY: Load database into memory. Pure Python.\n+    # Provides faster performance but uses more memory.\n+except Exception as e:\n+    # Inform Sentry, but don't bring down the app\n+    capture_exception(e)\n+    geoip = None\n+\n+VALID_GEOIP_PROPERTIES = [\n+    \"city_name\",\n+    \"country_name\",\n+    \"country_code\",\n+    \"continent_name\",\n+    \"continent_code\",\n+    \"postal_code\",\n+    \"time_zone\",\n+]\n+\n+\n+def get_geoip_properties(ip_address: Optional[str]) -> Dict[str, str]:\n+    \"\"\"\n+    Returns a dictionary of geoip properties for the given ip address.\n+\n+    Contains the following:\n+        $geoip_city_name\n+        $geoip_country_name\n+        $geoip_country_code\n+        $geoip_continent_name\n+        $geoip_continent_code\n+        $geoip_postal_code\n+        $geoip_time_zone\n+    \"\"\"\n+    if not ip_address or not geoip:\n+        return {}\n+\n+    try:\n+        geoip_properties = geoip.city(ip_address)\n+    except Exception as e:\n+        logger.exception(f\"geoIP computation error: {e}\")\n+        return {}\n+\n+    properties = {}\n+    for key, value in geoip_properties.items():\n+        if value and key in VALID_GEOIP_PROPERTIES:\n+            properties[f\"$geoip_{key}\"] = value\n+    return properties\ndiff --git a/posthog/api/test/test_decide.py b/posthog/api/test/test_decide.py\nindex d7737dd41..dda09e0ae 100644\n--- a/posthog/api/test/test_decide.py\n+++ b/posthog/api/test/test_decide.py\n@@ -6,6 +6,7 @@ from django.test.client import Client\n from rest_framework import status\n \n from posthog.models import FeatureFlag, GroupTypeMapping, Person, PersonalAPIKey\n+from posthog.models.instance_setting import override_instance_config\n from posthog.test.base import BaseTest\n \n \n@@ -25,7 +26,13 @@ class TestDecide(BaseTest):\n         return base64.b64encode(json.dumps(data).encode(\"utf-8\")).decode(\"utf-8\")\n \n     def _post_decide(\n-        self, data=None, origin=\"http://127.0.0.1:8000\", api_version=1, distinct_id=\"example_id\", groups={}\n+        self,\n+        data=None,\n+        origin=\"http://127.0.0.1:8000\",\n+        api_version=1,\n+        distinct_id=\"example_id\",\n+        groups={},\n+        ip=\"127.0.0.1\",\n     ):\n         return self.client.post(\n             f\"/decide/?v={api_version}\",\n@@ -35,6 +42,7 @@ class TestDecide(BaseTest):\n                 )\n             },\n             HTTP_ORIGIN=origin,\n+            REMOTE_ADDR=ip,\n         )\n \n     def test_defaults_to_v2_if_conflicting_parameters(self):\n@@ -139,14 +147,14 @@ class TestDecide(BaseTest):\n             created_by=self.user,\n         )\n \n-        with self.assertNumQueries(3):\n+        with self.assertNumQueries(4):\n             response = self._post_decide()\n             self.assertEqual(response.status_code, status.HTTP_200_OK)\n         self.assertIn(\"default-flag\", response.json()[\"featureFlags\"])\n         self.assertIn(\"beta-feature\", response.json()[\"featureFlags\"])\n         self.assertIn(\"filer-by-property-2\", response.json()[\"featureFlags\"])\n \n-        with self.assertNumQueries(3):\n+        with self.assertNumQueries(4):\n             response = self._post_decide({\"token\": self.team.api_token, \"distinct_id\": \"another_id\"})\n             self.assertEqual(response.status_code, status.HTTP_200_OK)\n         self.assertEqual(response.json()[\"featureFlags\"], [\"default-flag\"])\n@@ -183,13 +191,13 @@ class TestDecide(BaseTest):\n             created_by=self.user,\n         )\n \n-        with self.assertNumQueries(2):\n+        with self.assertNumQueries(3):\n             response = self._post_decide(api_version=1)  # v1 functionality should not break\n             self.assertEqual(response.status_code, status.HTTP_200_OK)\n             self.assertIn(\"beta-feature\", response.json()[\"featureFlags\"])\n             self.assertIn(\"default-flag\", response.json()[\"featureFlags\"])\n \n-        with self.assertNumQueries(2):\n+        with self.assertNumQueries(3):\n             response = self._post_decide(api_version=2)\n             self.assertTrue(response.json()[\"featureFlags\"][\"beta-feature\"])\n             self.assertTrue(response.json()[\"featureFlags\"][\"default-flag\"])\n@@ -197,7 +205,7 @@ class TestDecide(BaseTest):\n                 \"first-variant\", response.json()[\"featureFlags\"][\"multivariate-flag\"]\n             )  # assigned by distinct_id hash\n \n-        with self.assertNumQueries(2):\n+        with self.assertNumQueries(3):\n             response = self._post_decide(api_version=2, distinct_id=\"other_id\")\n             self.assertTrue(response.json()[\"featureFlags\"][\"beta-feature\"])\n             self.assertTrue(response.json()[\"featureFlags\"][\"default-flag\"])\n@@ -205,6 +213,123 @@ class TestDecide(BaseTest):\n                 \"third-variant\", response.json()[\"featureFlags\"][\"multivariate-flag\"]\n             )  # different hash, different variant assigned\n \n+    def test_feature_flags_v2_with_property_overrides(self):\n+        self.team.app_urls = [\"https://example.com\"]\n+        self.team.save()\n+        self.client.logout()\n+        Person.objects.create(team=self.team, distinct_ids=[\"example_id\"], properties={\"$geoip_country_name\": \"India\"})\n+        Person.objects.create(team=self.team, distinct_ids=[\"other_id\"], properties={})\n+\n+        australia_ip = \"13.106.122.3\"\n+\n+        FeatureFlag.objects.create(\n+            team=self.team,\n+            rollout_percentage=50,\n+            name=\"Beta feature\",\n+            key=\"beta-feature\",\n+            created_by=self.user,\n+            filters={\n+                \"groups\": [\n+                    {\n+                        \"properties\": [{\"key\": \"$geoip_country_name\", \"value\": \"Australia\", \"type\": \"person\"}],\n+                        \"rollout_percentage\": 100,\n+                    }\n+                ]\n+            },\n+        )\n+        FeatureFlag.objects.create(\n+            team=self.team,\n+            filters={\n+                \"groups\": [\n+                    {\n+                        \"properties\": [{\"key\": \"$geoip_country_name\", \"value\": \"India\", \"type\": \"person\"}],\n+                        \"rollout_percentage\": None,\n+                    }\n+                ],\n+                \"multivariate\": {\n+                    \"variants\": [\n+                        {\"key\": \"first-variant\", \"name\": \"First Variant\", \"rollout_percentage\": 50},\n+                        {\"key\": \"second-variant\", \"name\": \"Second Variant\", \"rollout_percentage\": 25},\n+                        {\"key\": \"third-variant\", \"name\": \"Third Variant\", \"rollout_percentage\": 25},\n+                    ],\n+                },\n+            },\n+            name=\"This is a feature flag with multiple variants.\",\n+            key=\"multivariate-flag\",\n+            created_by=self.user,\n+        )\n+\n+        with override_instance_config(\"GEOIP_PROPERTY_OVERRIDES_TEAMS\", f\"{self.team.pk}\"):\n+\n+            with self.assertNumQueries(4):\n+                response = self._post_decide(api_version=2, ip=australia_ip)\n+                self.assertTrue(response.json()[\"featureFlags\"][\"beta-feature\"])\n+                self.assertTrue(\"multivariate-flag\" not in response.json()[\"featureFlags\"])\n+\n+            with self.assertNumQueries(4):\n+                response = self._post_decide(api_version=2, distinct_id=\"other_id\", ip=australia_ip)\n+                self.assertTrue(response.json()[\"featureFlags\"][\"beta-feature\"])\n+                self.assertTrue(\"multivariate-flag\" not in response.json()[\"featureFlags\"])\n+\n+    def test_feature_flags_v2_with_geoip_error(self):\n+        self.team.app_urls = [\"https://example.com\"]\n+        self.team.save()\n+        self.client.logout()\n+        Person.objects.create(team=self.team, distinct_ids=[\"example_id\"], properties={\"$geoip_country_name\": \"India\"})\n+        Person.objects.create(team=self.team, distinct_ids=[\"other_id\"], properties={})\n+\n+        FeatureFlag.objects.create(\n+            team=self.team,\n+            rollout_percentage=50,\n+            name=\"Beta feature\",\n+            key=\"beta-feature\",\n+            created_by=self.user,\n+            filters={\n+                \"groups\": [\n+                    {\n+                        \"properties\": [{\"key\": \"$geoip_country_name\", \"value\": \"Australia\", \"type\": \"person\"}],\n+                        \"rollout_percentage\": 100,\n+                    }\n+                ]\n+            },\n+        )\n+        FeatureFlag.objects.create(\n+            team=self.team,\n+            filters={\n+                \"groups\": [\n+                    {\n+                        \"properties\": [{\"key\": \"$geoip_country_name\", \"value\": \"India\", \"type\": \"person\"}],\n+                        \"rollout_percentage\": None,\n+                    }\n+                ],\n+                \"multivariate\": {\n+                    \"variants\": [\n+                        {\"key\": \"first-variant\", \"name\": \"First Variant\", \"rollout_percentage\": 50},\n+                        {\"key\": \"second-variant\", \"name\": \"Second Variant\", \"rollout_percentage\": 25},\n+                        {\"key\": \"third-variant\", \"name\": \"Third Variant\", \"rollout_percentage\": 25},\n+                    ],\n+                },\n+            },\n+            name=\"This is a feature flag with multiple variants.\",\n+            key=\"multivariate-flag\",\n+            created_by=self.user,\n+        )\n+\n+        with override_instance_config(\"GEOIP_PROPERTY_OVERRIDES_TEAMS\", f\"{self.team.pk}\"):\n+            with self.assertNumQueries(4):\n+                # One to get team\n+                # One to get instance setting\n+                # One to get all feature flags\n+                # One to compute properties for all flags\n+                response = self._post_decide(api_version=2, distinct_id=\"example_id\")\n+                self.assertTrue(\"beta-feature\" not in response.json()[\"featureFlags\"])\n+                self.assertEqual(\"first-variant\", response.json()[\"featureFlags\"][\"multivariate-flag\"])\n+\n+            with self.assertNumQueries(4):\n+                response = self._post_decide(api_version=2, distinct_id=\"other_id\")\n+                self.assertTrue(\"beta-feature\" not in response.json()[\"featureFlags\"])\n+                self.assertTrue(\"multivariate-flag\" not in response.json()[\"featureFlags\"])\n+\n     def test_feature_flags_v2_consistent_flags(self):\n         self.team.app_urls = [\"https://example.com\"]\n         self.team.save()\n@@ -245,7 +370,7 @@ class TestDecide(BaseTest):\n             ensure_experience_continuity=True,\n         )\n \n-        with self.assertNumQueries(4):\n+        with self.assertNumQueries(5):\n             response = self._post_decide(api_version=2)\n             self.assertTrue(response.json()[\"featureFlags\"][\"beta-feature\"])\n             self.assertTrue(response.json()[\"featureFlags\"][\"default-flag\"])\n@@ -258,7 +383,7 @@ class TestDecide(BaseTest):\n         # person2 = Person.objects.create(team=self.team, distinct_ids=[\"example_id\", \"other_id\"], properties={\"email\": \"tim@posthog.com\"})\n         person.add_distinct_id(\"other_id\")\n \n-        with self.assertNumQueries(6):\n+        with self.assertNumQueries(7):\n             response = self._post_decide(\n                 api_version=2,\n                 data={\"token\": self.team.api_token, \"distinct_id\": \"other_id\", \"$anon_distinct_id\": \"example_id\"},\n@@ -309,7 +434,7 @@ class TestDecide(BaseTest):\n             ensure_experience_continuity=True,\n         )\n \n-        with self.assertNumQueries(3):\n+        with self.assertNumQueries(4):\n             response = self._post_decide(api_version=2)\n             self.assertTrue(response.json()[\"featureFlags\"][\"beta-feature\"])\n             self.assertTrue(response.json()[\"featureFlags\"][\"default-flag\"])\n@@ -320,7 +445,7 @@ class TestDecide(BaseTest):\n         # identify event is sent, but again, ingestion delays, so no entry in personDistinctID table\n         # person.add_distinct_id(\"other_id\")\n         # in which case, we're pretty much trashed\n-        with self.assertNumQueries(4):\n+        with self.assertNumQueries(5):\n             response = self._post_decide(\n                 api_version=2,\n                 data={\"token\": self.team.api_token, \"distinct_id\": \"other_id\", \"$anon_distinct_id\": \"example_id\"},\n@@ -371,7 +496,7 @@ class TestDecide(BaseTest):\n             ensure_experience_continuity=True,\n         )\n \n-        with self.assertNumQueries(4):\n+        with self.assertNumQueries(5):\n             response = self._post_decide(api_version=2)\n             self.assertTrue(response.json()[\"featureFlags\"][\"beta-feature\"])\n             self.assertTrue(response.json()[\"featureFlags\"][\"default-flag\"])\n@@ -386,7 +511,7 @@ class TestDecide(BaseTest):\n             team=self.team, distinct_ids=[\"other_id\"], properties={\"email\": \"tim@posthog.com\"}\n         )\n \n-        with self.assertNumQueries(6):\n+        with self.assertNumQueries(7):\n             response = self._post_decide(\n                 api_version=2,\n                 data={\"token\": self.team.api_token, \"distinct_id\": \"other_id\", \"$anon_distinct_id\": \"example_id\"},\n@@ -413,7 +538,7 @@ class TestDecide(BaseTest):\n         person2.delete()\n         person.add_distinct_id(\"other_id\")\n \n-        with self.assertNumQueries(4):\n+        with self.assertNumQueries(5):\n             response = self._post_decide(api_version=2, data={\"token\": self.team.api_token, \"distinct_id\": \"other_id\"},)\n             self.assertTrue(response.json()[\"featureFlags\"][\"beta-feature\"])\n             self.assertTrue(response.json()[\"featureFlags\"][\"default-flag\"])\n@@ -461,7 +586,7 @@ class TestDecide(BaseTest):\n             ensure_experience_continuity=True,\n         )\n \n-        with self.assertNumQueries(4):\n+        with self.assertNumQueries(5):\n             response = self._post_decide(api_version=2)\n             self.assertTrue(response.json()[\"featureFlags\"][\"beta-feature\"])\n             self.assertTrue(response.json()[\"featureFlags\"][\"default-flag\"])\n@@ -471,7 +596,7 @@ class TestDecide(BaseTest):\n \n         # new person with \"other_id\" is yet to be created\n \n-        with self.assertNumQueries(7):\n+        with self.assertNumQueries(8):\n             # one extra query to find person_id for $anon_distinct_id\n             response = self._post_decide(\n                 api_version=2,\n@@ -487,7 +612,7 @@ class TestDecide(BaseTest):\n         # In this case, we are over our grace period for ingestion, and there's\n         # no quick decent way to find how 'other_id' is to be treated.\n         # So, things appear like a completely new person with distinct-id = other_id.\n-        with self.assertNumQueries(3):\n+        with self.assertNumQueries(4):\n             response = self._post_decide(api_version=2, data={\"token\": self.team.api_token, \"distinct_id\": \"other_id\"},)\n             # self.assertTrue(response.json()[\"featureFlags\"][\"beta-feature\"])\n             self.assertTrue(response.json()[\"featureFlags\"][\"default-flag\"])\n@@ -496,7 +621,7 @@ class TestDecide(BaseTest):\n         person.add_distinct_id(\"other_id\")\n         # Finally, 'other_id' is merged. The result goes back to its overridden values\n \n-        with self.assertNumQueries(4):\n+        with self.assertNumQueries(5):\n             response = self._post_decide(api_version=2, data={\"token\": self.team.api_token, \"distinct_id\": \"other_id\"},)\n             self.assertTrue(response.json()[\"featureFlags\"][\"beta-feature\"])\n             self.assertTrue(response.json()[\"featureFlags\"][\"default-flag\"])\n@@ -541,7 +666,7 @@ class TestDecide(BaseTest):\n             created_by=self.user,\n         )\n \n-        with self.assertNumQueries(3):\n+        with self.assertNumQueries(4):\n             response = self._post_decide(api_version=2, distinct_id=\"hosted_id\")\n             self.assertIsNone(\n                 (response.json()[\"featureFlags\"]).get(\"multivariate-flag\", None)\n@@ -550,7 +675,7 @@ class TestDecide(BaseTest):\n                 (response.json()[\"featureFlags\"]).get(\"default-flag\")\n             )  # User still receives the default flag\n \n-        with self.assertNumQueries(3):\n+        with self.assertNumQueries(4):\n             response = self._post_decide(api_version=2, distinct_id=\"example_id\")\n             self.assertIsNotNone(\n                 response.json()[\"featureFlags\"][\"multivariate-flag\"]\n@@ -584,11 +709,11 @@ class TestDecide(BaseTest):\n             created_by=self.user,\n         )\n \n-        with self.assertNumQueries(3):\n+        with self.assertNumQueries(4):\n             response = self._post_decide(api_version=2, distinct_id=\"example_id\")\n             self.assertEqual(response.json()[\"featureFlags\"], {})\n \n-        with self.assertNumQueries(3):\n+        with self.assertNumQueries(4):\n             response = self._post_decide(api_version=2, distinct_id=\"example_id\", groups={\"organization\": \"foo\"})\n             self.assertEqual(response.json()[\"featureFlags\"], {\"groups-flag\": True})\n \ndiff --git a/posthog/api/test/test_geoip.py b/posthog/api/test/test_geoip.py\nnew file mode 100644\nindex 000000000..bcd48ed88\n--- /dev/null\n+++ b/posthog/api/test/test_geoip.py\n@@ -0,0 +1,51 @@\n+from typing import cast\n+from unittest.mock import Mock\n+\n+import pytest\n+from django.contrib.gis.geoip2 import GeoIP2, GeoIP2Exception\n+from django.test import TestCase\n+\n+from posthog.api.geoip import geoip, get_geoip_properties\n+\n+australia_ip = \"13.106.122.3\"\n+uk_ip = \"31.28.64.3\"\n+uk_ip_v6 = \"2a01:4b00:875f:cf01:109e:dbfd:8cb9:a5d4\"\n+local_ip = \"127.0.0.1\"\n+\n+\n+@pytest.mark.parametrize(\n+    \"test_input,expected\", [(australia_ip, \"Australia\"), (uk_ip, \"United Kingdom\"), (uk_ip_v6, \"United Kingdom\"),],\n+)\n+def test_geoip_results(test_input, expected):\n+    properties = get_geoip_properties(test_input)\n+    assert properties[\"$geoip_country_name\"] == expected\n+    assert len(properties) == 6\n+\n+\n+class TestGeoIPDBError(TestCase):\n+    def setUp(self) -> None:\n+        self.geoip_city_method = cast(GeoIP2, geoip).city\n+        geoip.city = Mock(side_effect=GeoIP2Exception(\"GeoIP file not found\"))  # type: ignore\n+\n+    def tearDown(self) -> None:\n+        geoip.city = self.geoip_city_method  # type: ignore\n+\n+    def test_geoip_with_invalid_database_file_returns_successfully(self):\n+\n+        properties = get_geoip_properties(australia_ip)\n+\n+        self.assertEqual(properties, {})\n+\n+\n+class TestGeoIPError(TestCase):\n+    def test_geoip_on_local_ip_returns_successfully(self):\n+\n+        properties = get_geoip_properties(local_ip)\n+\n+        self.assertEqual(properties, {})\n+\n+    def test_geoip_on_invalid_ip_returns_successfully(self):\n+\n+        properties = get_geoip_properties(None)\n+\n+        self.assertEqual(properties, {})\ndiff --git a/posthog/models/team/team.py b/posthog/models/team/team.py\nindex 0d0d8198d..a9d49de6a 100644\n--- a/posthog/models/team/team.py\n+++ b/posthog/models/team/team.py\n@@ -204,6 +204,11 @@ class Team(UUIDClassicModel):\n         enabled_teams = get_list(get_instance_setting(\"STRICT_CACHING_TEAMS\"))\n         return str(self.pk) in enabled_teams or \"all\" in enabled_teams\n \n+    @property\n+    def geoip_property_overrides_enabled(self) -> bool:\n+        enabled_teams = get_list(get_instance_setting(\"GEOIP_PROPERTY_OVERRIDES_TEAMS\"))\n+        return str(self.pk) in enabled_teams or \"all\" in enabled_teams\n+\n     def __str__(self):\n         if self.name:\n             return self.name\ndiff --git a/posthog/settings/dynamic_settings.py b/posthog/settings/dynamic_settings.py\nindex e9f4c3ce9..9f38e2e60 100644\n--- a/posthog/settings/dynamic_settings.py\n+++ b/posthog/settings/dynamic_settings.py\n@@ -31,6 +31,11 @@ CONSTANCE_CONFIG = {\n         \"Whether to use query path using person_id, person_properties, and group_properties on events or the old query\",\n         str,\n     ),\n+    \"GEOIP_PROPERTY_OVERRIDES_TEAMS\": (\n+        get_from_env(\"GEOIP_PROPERTY_OVERRIDES_TEAMS\", \"\"),\n+        \"Whether to use GeoIP to override person properties when calling the `/decide` endpoint for feature flags\",\n+        str,\n+    ),\n     \"AUTO_START_ASYNC_MIGRATIONS\": (\n         get_from_env(\"AUTO_START_ASYNC_MIGRATIONS\", False, type_cast=str_to_bool),\n         \"Whether the earliest unapplied async migration should be triggered automatically on server startup.\",\n@@ -150,6 +155,7 @@ SETTINGS_ALLOWING_API_OVERRIDE = (\n     \"EMAIL_REPLY_TO\",\n     \"ASYNC_MIGRATIONS_OPT_OUT_EMAILS\",\n     \"ENABLE_ACTOR_ON_EVENTS_TEAMS\",\n+    \"GEOIP_PROPERTY_OVERRIDES_TEAMS\",\n     \"STRICT_CACHING_TEAMS\",\n     \"SLACK_APP_CLIENT_ID\",\n     \"SLACK_APP_CLIENT_SECRET\",\ndiff --git a/posthog/test/__snapshots__/test_feature_flag.ambr b/posthog/test/__snapshots__/test_feature_flag.ambr\nindex 87f0bd379..e69de29bb 100644\n--- a/posthog/test/__snapshots__/test_feature_flag.ambr\n+++ b/posthog/test/__snapshots__/test_feature_flag.ambr\n@@ -1,99 +0,0 @@\n-# name: TestFeatureFlagMatcher.test_multiple_flags\n-  '\n-  SELECT \"posthog_team\".\"id\",\n-         \"posthog_team\".\"uuid\",\n-         \"posthog_team\".\"organization_id\",\n-         \"posthog_team\".\"api_token\",\n-         \"posthog_team\".\"app_urls\",\n-         \"posthog_team\".\"name\",\n-         \"posthog_team\".\"slack_incoming_webhook\",\n-         \"posthog_team\".\"created_at\",\n-         \"posthog_team\".\"updated_at\",\n-         \"posthog_team\".\"anonymize_ips\",\n-         \"posthog_team\".\"completed_snippet_onboarding\",\n-         \"posthog_team\".\"ingested_event\",\n-         \"posthog_team\".\"session_recording_opt_in\",\n-         \"posthog_team\".\"signup_token\",\n-         \"posthog_team\".\"is_demo\",\n-         \"posthog_team\".\"access_control\",\n-         \"posthog_team\".\"test_account_filters\",\n-         \"posthog_team\".\"path_cleaning_filters\",\n-         \"posthog_team\".\"timezone\",\n-         \"posthog_team\".\"data_attributes\",\n-         \"posthog_team\".\"person_display_name_properties\",\n-         \"posthog_team\".\"live_events_columns\",\n-         \"posthog_team\".\"primary_dashboard_id\",\n-         \"posthog_team\".\"correlation_config\",\n-         \"posthog_team\".\"session_recording_retention_period_days\",\n-         \"posthog_team\".\"plugins_opt_in\",\n-         \"posthog_team\".\"opt_out_capture\",\n-         \"posthog_team\".\"event_names\",\n-         \"posthog_team\".\"event_names_with_usage\",\n-         \"posthog_team\".\"event_properties\",\n-         \"posthog_team\".\"event_properties_with_usage\",\n-         \"posthog_team\".\"event_properties_numerical\"\n-  FROM \"posthog_team\"\n-  WHERE \"posthog_team\".\"id\" = 2\n-  LIMIT 21\n-  '\n----\n-# name: TestFeatureFlagMatcher.test_multiple_flags.1\n-  '\n-  SELECT \"posthog_asyncmigration\".\"id\",\n-         \"posthog_asyncmigration\".\"name\",\n-         \"posthog_asyncmigration\".\"description\",\n-         \"posthog_asyncmigration\".\"progress\",\n-         \"posthog_asyncmigration\".\"status\",\n-         \"posthog_asyncmigration\".\"current_operation_index\",\n-         \"posthog_asyncmigration\".\"current_query_id\",\n-         \"posthog_asyncmigration\".\"celery_task_id\",\n-         \"posthog_asyncmigration\".\"started_at\",\n-         \"posthog_asyncmigration\".\"finished_at\",\n-         \"posthog_asyncmigration\".\"posthog_min_version\",\n-         \"posthog_asyncmigration\".\"posthog_max_version\"\n-  FROM \"posthog_asyncmigration\"\n-  WHERE (\"posthog_asyncmigration\".\"name\" = '0003_fill_person_distinct_id2'\n-         AND \"posthog_asyncmigration\".\"status\" = 2)\n-  ORDER BY \"posthog_asyncmigration\".\"id\" ASC\n-  LIMIT 1\n-  '\n----\n-# name: TestFeatureFlagMatcher.test_multiple_flags.2\n-  '\n-  SELECT \"posthog_grouptypemapping\".\"id\",\n-         \"posthog_grouptypemapping\".\"team_id\",\n-         \"posthog_grouptypemapping\".\"group_type\",\n-         \"posthog_grouptypemapping\".\"group_type_index\",\n-         \"posthog_grouptypemapping\".\"name_singular\",\n-         \"posthog_grouptypemapping\".\"name_plural\"\n-  FROM \"posthog_grouptypemapping\"\n-  WHERE \"posthog_grouptypemapping\".\"team_id\" = 2\n-  '\n----\n-# name: TestFeatureFlagMatcher.test_multiple_flags.3\n-  '\n-  SELECT (\"posthog_person\".\"properties\" -> 'email') = '\"test@posthog.com\"' AS \"flag_97_condition_0\",\n-         (true) AS \"flag_97_condition_1\",\n-         (true) AS \"flag_98_condition_0\",\n-         (true) AS \"flag_99_condition_0\",\n-         (true) AS \"flag_103_condition_0\"\n-  FROM \"posthog_person\"\n-  INNER JOIN \"posthog_persondistinctid\" ON (\"posthog_person\".\"id\" = \"posthog_persondistinctid\".\"person_id\")\n-  WHERE (\"posthog_persondistinctid\".\"distinct_id\" = 'test_id'\n-         AND \"posthog_persondistinctid\".\"team_id\" = 2\n-         AND \"posthog_person\".\"team_id\" = 2)\n-  '\n----\n-# name: TestFeatureFlagMatcher.test_multiple_flags.4\n-  '\n-  SELECT (\"posthog_group\".\"group_key\" = 'group_key'\n-          AND \"posthog_group\".\"group_type_index\" = 2) AS \"flag_100_condition_0\",\n-         (\"posthog_group\".\"group_key\" = 'group_key'\n-          AND \"posthog_group\".\"group_type_index\" = 2) AS \"flag_101_condition_0\",\n-         ((\"posthog_group\".\"group_properties\" -> 'name') IN ('\"foo.inc\"')\n-          AND \"posthog_group\".\"group_key\" = 'foo'\n-          AND \"posthog_group\".\"group_type_index\" = 2) AS \"flag_102_condition_0\"\n-  FROM \"posthog_group\"\n-  WHERE \"posthog_group\".\"team_id\" = 2\n-  '\n----\ndiff --git a/posthog/test/test_feature_flag.py b/posthog/test/test_feature_flag.py\nindex 3ea927366..d4a7fd5af 100644\n--- a/posthog/test/test_feature_flag.py\n+++ b/posthog/test/test_feature_flag.py\n@@ -11,7 +11,7 @@ from posthog.models.feature_flag import (\n     set_feature_flag_hash_key_overrides,\n )\n from posthog.models.group import Group\n-from posthog.test.base import BaseTest, QueryMatchingTest, snapshot_postgres_queries\n+from posthog.test.base import BaseTest, QueryMatchingTest\n \n \n class TestFeatureFlagMatcher(BaseTest, QueryMatchingTest):\n@@ -62,7 +62,6 @@ class TestFeatureFlagMatcher(BaseTest, QueryMatchingTest):\n         self.assertEqual(FeatureFlagMatcher([feature_flag], \"example_id\").get_match(feature_flag), FeatureFlagMatch())\n         self.assertIsNone(FeatureFlagMatcher([feature_flag], \"another_id\").get_match(feature_flag))\n \n-    @snapshot_postgres_queries\n     def test_multiple_flags(self):\n         Person.objects.create(\n             team=self.team, distinct_ids=[\"test_id\"], properties={\"email\": \"test@posthog.com\"},\ndiff --git a/production.Dockerfile b/production.Dockerfile\nindex e54018572..b88112ba1 100644\n--- a/production.Dockerfile\n+++ b/production.Dockerfile\n@@ -89,6 +89,8 @@ RUN apk --update --no-cache --virtual .geolite-deps add \\\n     && \\\n     ( curl -L \"https://mmdbcdn.posthog.net/\" | brotli --decompress --output=./share/GeoLite2-City.mmdb ) \\\n     && \\\n+    chmod -R 755 ./share/GeoLite2-City.mmdb \\\n+    && \\\n     apk del .geolite-deps\n \n \n"
  },
  "291f2754cdb011d8db0c26116261ff73529c183a": {
    "hash": "291f2754cdb011d8db0c26116261ff73529c183a",
    "message": "fix: basic insight representation should include favorited (#11132)",
    "diff": "commit 291f2754cdb011d8db0c26116261ff73529c183a\nAuthor: Paul D'Ambra <paul@posthog.com>\nDate:   Thu Aug 4 11:07:05 2022 +0100\n\n    fix: basic insight representation should include favorited (#11132)\n\ndiff --git a/posthog/api/insight.py b/posthog/api/insight.py\nindex 05dc8e063..fdb057181 100644\n--- a/posthog/api/insight.py\n+++ b/posthog/api/insight.py\n@@ -120,6 +120,7 @@ class InsightBasicSerializer(TaggedItemSerializerMixin, serializers.ModelSeriali\n             \"created_by\",\n             \"created_at\",\n             \"last_modified_at\",\n+            \"favorited\",\n         ]\n         read_only_fields = (\"short_id\", \"updated_at\", \"last_refresh\", \"refreshing\")\n \ndiff --git a/posthog/api/test/test_insight.py b/posthog/api/test/test_insight.py\nindex 90d4eba06..7a6e1d6a0 100644\n--- a/posthog/api/test/test_insight.py\n+++ b/posthog/api/test/test_insight.py\n@@ -272,6 +272,7 @@ class TestInsight(ClickhouseTestMixin, LicensedTestMixin, APIBaseTest, QueryMatc\n                 \"id\",\n                 \"short_id\",\n                 \"name\",\n+                \"favorited\",\n                 \"filters\",\n                 \"dashboards\",\n                 \"description\",\n"
  },
  "3c214a3df6a67be5549408d36ac6193acce486f9": {
    "hash": "3c214a3df6a67be5549408d36ac6193acce486f9",
    "message": "fix(dashboards): make sure DOM loaded before react rendering (#11675)\n    \n    * fix(dashboards): make sure DOM loaded before react rendering\n    \n    Previously we were not waiting for the document to be necessary, and as\n    a result there is a race between the JS and the DOM loading. If for\n    example you have the JS cached, then you'll end up running this before\n    the DOM.\n    \n    Instead we do as we do elsewhere and wait for the dom to be ready. We\n    could also put the JS at the end of the body, but I'm just voting for\n    doing the same as elsewhere as that seems to be working fine.\n    \n    This relates to\n    https://posthogusers.slack.com/archives/C01GLBKHKQT/p1661933834559599\n    and fixes https://github.com/PostHog/posthog/issues/11082\n    \n    * use the right ErrorBoundary",
    "diff": "commit 3c214a3df6a67be5549408d36ac6193acce486f9\nAuthor: Harry Waye <harry@posthog.com>\nDate:   Tue Sep 6 10:49:17 2022 +0100\n\n    fix(dashboards): make sure DOM loaded before react rendering (#11675)\n    \n    * fix(dashboards): make sure DOM loaded before react rendering\n    \n    Previously we were not waiting for the document to be necessary, and as\n    a result there is a race between the JS and the DOM loading. If for\n    example you have the JS cached, then you'll end up running this before\n    the DOM.\n    \n    Instead we do as we do elsewhere and wait for the dom to be ready. We\n    could also put the JS at the end of the body, but I'm just voting for\n    doing the same as elsewhere as that seems to be working fine.\n    \n    This relates to\n    https://posthogusers.slack.com/archives/C01GLBKHKQT/p1661933834559599\n    and fixes https://github.com/PostHog/posthog/issues/11082\n    \n    * use the right ErrorBoundary\n\ndiff --git a/frontend/src/exporter/index.tsx b/frontend/src/exporter/index.tsx\nindex 5c57aa2e9..0e45995e1 100644\n--- a/frontend/src/exporter/index.tsx\n+++ b/frontend/src/exporter/index.tsx\n@@ -6,6 +6,7 @@ import { loadPostHogJS } from '~/loadPostHogJS'\n import { initKea } from '~/initKea'\n import { Exporter } from '~/exporter/Exporter'\n import { ExportedData } from '~/exporter/types'\n+import { ErrorBoundary } from '../layout/ErrorBoundary'\n \n // Disable tracking for all exports and embeds.\n // This is explicitly set as to not track our customers' customers data.\n@@ -17,4 +18,23 @@ initKea()\n \n const exportedData: ExportedData = window.POSTHOG_EXPORTED_DATA\n \n-ReactDOM.render(<Exporter {...exportedData} />, document.getElementById('root'))\n+function renderApp(): void {\n+    const root = document.getElementById('root')\n+    if (root) {\n+        ReactDOM.render(\n+            <ErrorBoundary>\n+                <Exporter {...exportedData} />\n+            </ErrorBoundary>,\n+            root\n+        )\n+    } else {\n+        console.error('Attempted, but could not render PostHog app because <div id=\"root\" /> is not found.')\n+    }\n+}\n+\n+// Render react only when DOM has loaded - javascript might be cached and loaded before the page is ready.\n+if (document.readyState !== 'loading') {\n+    renderApp()\n+} else {\n+    document.addEventListener('DOMContentLoaded', renderApp)\n+}\n"
  },
  "a3922863aa041fef05be9c33f37bef3f48ccf0ac": {
    "hash": "a3922863aa041fef05be9c33f37bef3f48ccf0ac",
    "message": "fix: allow searching and adding on staff users tab (#11033)",
    "diff": "commit a3922863aa041fef05be9c33f37bef3f48ccf0ac\nAuthor: Paul D'Ambra <paul@posthog.com>\nDate:   Thu Jul 28 21:17:08 2022 +0100\n\n    fix: allow searching and adding on staff users tab (#11033)\n\ndiff --git a/frontend/src/scenes/instance/SystemStatus/StaffUsersTab.tsx b/frontend/src/scenes/instance/SystemStatus/StaffUsersTab.tsx\nindex ed2b3b7fb..a7c17a979 100644\n--- a/frontend/src/scenes/instance/SystemStatus/StaffUsersTab.tsx\n+++ b/frontend/src/scenes/instance/SystemStatus/StaffUsersTab.tsx\n@@ -120,10 +120,10 @@ export function StaffUsersTab(): JSX.Element {\n                             loading={allUsersLoading}\n                             value={staffUsersToBeAdded}\n                             onChange={(newValues) => setStaffUsersToBeAdded(newValues)}\n-                            filterOption={false}\n+                            filterOption={true}\n                             mode=\"multiple\"\n                             data-attr=\"subscribed-emails\"\n-                            options={usersLemonSelectOptions(nonStaffUsers)}\n+                            options={usersLemonSelectOptions(nonStaffUsers, 'uuid')}\n                         />\n                     </div>\n                     <LemonButton\n"
  },
  "cb5c29008c44a2db612596133c76fa7ed16609a6": {
    "hash": "cb5c29008c44a2db612596133c76fa7ed16609a6",
    "message": "feat: Added LemonSelectMultiple (#10454)\n    \n    * Added LemonSelectMultiple\n    * Added LemonSnack",
    "diff": "commit cb5c29008c44a2db612596133c76fa7ed16609a6\nAuthor: Ben White <ben@benjackwhite.co.uk>\nDate:   Fri Jun 24 14:04:49 2022 +0200\n\n    feat: Added LemonSelectMultiple (#10454)\n    \n    * Added LemonSelectMultiple\n    * Added LemonSnack\n\ndiff --git a/frontend/src/lib/components/LemonSelectMultiple/LemonSelectMultiple.scss b/frontend/src/lib/components/LemonSelectMultiple/LemonSelectMultiple.scss\nnew file mode 100644\nindex 000000000..eb4a03ca1\n--- /dev/null\n+++ b/frontend/src/lib/components/LemonSelectMultiple/LemonSelectMultiple.scss\n@@ -0,0 +1,97 @@\n+.LemonSelectMultiple {\n+    .ant-select {\n+        width: 100%;\n+        .ant-select-selector,\n+        &.ant-select-single .ant-select-selector {\n+            min-height: 40px;\n+            padding: 0.25rem;\n+            border-radius: var(--radius);\n+            font-size: 0.875rem;\n+            text-align: left;\n+            line-height: 1.25rem;\n+\n+            border: 1px solid var(--border);\n+            background: var(--bg-light);\n+\n+            .ant-select-selection-overflow {\n+                gap: 0.25rem;\n+            }\n+        }\n+\n+        &:not(.ant-select-disabled):hover,\n+        &.ant-select-focused:not(.ant-select-disabled),\n+        &:not(.ant-select-disabled):active {\n+            .ant-select-selector {\n+                background: var(--bg-light);\n+                border-color: var(--primary);\n+                box-shadow: none;\n+            }\n+        }\n+        &:not(.ant-select-disabled):active {\n+            .ant-select-selector {\n+                color: var(--primary-active);\n+            }\n+        }\n+\n+        .ant-select-selection-placeholder {\n+            color: var(--text-muted);\n+        }\n+\n+        &.ant-select-single {\n+            .ant-select-selector {\n+                height: 40px;\n+                box-sizing: border-box;\n+\n+                .ant-select-selection-search-input {\n+                    height: 38px;\n+                }\n+\n+                .ant-select-selection-placeholder {\n+                    padding-left: 0.4rem;\n+                }\n+\n+                .ant-select-selection-item {\n+                    padding-left: 0.4rem;\n+                }\n+            }\n+        }\n+\n+        .ant-select-arrow {\n+            display: none;\n+        }\n+    }\n+}\n+\n+.LemonSelectMultipleDropdown {\n+    background: #fff;\n+    padding: 0.5rem;\n+    border-radius: var(--radius);\n+    border: 1px solid var(--primary);\n+    margin: -4px 0px; // Counteract antd wrapper\n+\n+    .ant-select-item {\n+        height: 40px;\n+        cursor: pointer;\n+        border-radius: var(--radius);\n+        padding: 0.25rem 0.5rem;\n+        &.ant-select-item-option-active {\n+            background: var(--primary-bg-hover);\n+        }\n+\n+        &.ant-select-item-option-selected {\n+            background: var(--primary-bg-active);\n+        }\n+        .ant-select-item-option-state {\n+            display: none;\n+        }\n+    }\n+\n+    .rc-virtual-list-holder-inner {\n+        gap: 0.25rem;\n+    }\n+\n+    .ant-select-item-option-content {\n+        display: flex;\n+        align-items: center;\n+    }\n+}\ndiff --git a/frontend/src/lib/components/LemonSelectMultiple/LemonSelectMultiple.stories.tsx b/frontend/src/lib/components/LemonSelectMultiple/LemonSelectMultiple.stories.tsx\nnew file mode 100644\nindex 000000000..9f7f9067c\n--- /dev/null\n+++ b/frontend/src/lib/components/LemonSelectMultiple/LemonSelectMultiple.stories.tsx\n@@ -0,0 +1,58 @@\n+import React, { useState } from 'react'\n+import { ComponentMeta, ComponentStory } from '@storybook/react'\n+import { LemonSelectMultiple, LemonSelectMultipleProps } from './LemonSelectMultiple'\n+import { ProfilePicture } from '../ProfilePicture'\n+import { capitalizeFirstLetter } from 'lib/utils'\n+\n+export default {\n+    title: 'Lemon UI/Lemon SelectMultiple',\n+    component: LemonSelectMultiple,\n+    argTypes: {\n+        options: {\n+            defaultValue: ['ben', 'marius', 'paul', 'tiina', 'li'].reduce(\n+                (acc, x) => ({\n+                    ...acc,\n+                    [`${x}@posthog.com`]: {\n+                        label: (\n+                            <span className=\"flex gap-05 items-center\">\n+                                <ProfilePicture name={x} email={`${x}@posthog.com`} size=\"sm\" />\n+                                <span>\n+                                    {capitalizeFirstLetter(x)} <b>{`<${x}@posthog.com>`}</b>\n+                                </span>\n+                            </span>\n+                        ),\n+                    },\n+                }),\n+                {}\n+            ),\n+        },\n+    },\n+} as ComponentMeta<typeof LemonSelectMultiple>\n+\n+const Template: ComponentStory<typeof LemonSelectMultiple> = (props: LemonSelectMultipleProps) => {\n+    const [value, setValue] = useState(props.value || [])\n+    return <LemonSelectMultiple {...props} value={value} onChange={setValue} />\n+}\n+\n+export const Default = Template.bind({})\n+Default.args = {\n+    placeholder: 'Pick one email',\n+}\n+\n+export const MultipleSelect = Template.bind({})\n+MultipleSelect.args = {\n+    placeholder: 'Enter emails...',\n+    mode: 'multiple',\n+}\n+\n+export const MultipleSelectWithCustom = Template.bind({})\n+MultipleSelectWithCustom.args = {\n+    placeholder: 'Enter any email...',\n+    mode: 'multiple-custom',\n+}\n+\n+export const Disabled = Template.bind({})\n+Disabled.args = {\n+    placeholder: 'Disabled...',\n+    disabled: true,\n+}\ndiff --git a/frontend/src/lib/components/LemonSelectMultiple/LemonSelectMultiple.tsx b/frontend/src/lib/components/LemonSelectMultiple/LemonSelectMultiple.tsx\nnew file mode 100644\nindex 000000000..2370e0794\n--- /dev/null\n+++ b/frontend/src/lib/components/LemonSelectMultiple/LemonSelectMultiple.tsx\n@@ -0,0 +1,76 @@\n+import { Select } from 'antd'\n+import React from 'react'\n+import { LemonSnack } from '../LemonSnack/LemonSnack'\n+import './LemonSelectMultiple.scss'\n+\n+export interface LemonSelectMultipleOption {\n+    label: string | React.ReactNode\n+    disabled?: boolean\n+    'data-attr'?: string\n+}\n+\n+export interface LemonSelectMultipleOptionItem extends LemonSelectMultipleOption {\n+    key: string\n+}\n+\n+export type LemonSelectMultipleOptions = Record<string, LemonSelectMultipleOption>\n+\n+export interface LemonSelectMultipleProps {\n+    options?: LemonSelectMultipleOptions | LemonSelectMultipleOptionItem[]\n+    value?: string[] | null\n+    disabled?: boolean\n+    loading?: boolean\n+    placeholder?: string\n+    onChange?: (newValue: string[]) => void\n+    onSearch?: (value: string) => void\n+    filterOption?: boolean\n+    mode?: 'single' | 'multiple' | 'multiple-custom'\n+    'data-attr'?: string\n+}\n+\n+export function LemonSelectMultiple({\n+    value,\n+    options,\n+    disabled,\n+    loading,\n+    placeholder,\n+    onChange,\n+    onSearch,\n+    filterOption = true,\n+    mode = 'single',\n+    ...props\n+}: LemonSelectMultipleProps): JSX.Element {\n+    const optionsAsList: LemonSelectMultipleOptionItem[] = Array.isArray(options)\n+        ? options\n+        : Object.entries(options || {}).map(([key, option]) => ({\n+              key: key,\n+              ...option,\n+          }))\n+\n+    const antOptions = optionsAsList.map((option) => ({\n+        key: option.key,\n+        value: option.key,\n+        label: option.label,\n+    }))\n+\n+    return (\n+        <div className=\"LemonSelectMultiple\" {...props}>\n+            <Select\n+                mode={mode === 'multiple' ? 'multiple' : mode === 'multiple-custom' ? 'tags' : undefined}\n+                showSearch\n+                disabled={disabled}\n+                loading={loading}\n+                onSearch={onSearch}\n+                onChange={(v) => onChange?.(v)}\n+                tokenSeparators={[',']}\n+                value={value ? value : []}\n+                dropdownRender={(menu) => <div className=\"LemonSelectMultipleDropdown\">{menu}</div>}\n+                options={antOptions}\n+                placeholder={placeholder}\n+                notFoundContent={<></>}\n+                filterOption={filterOption}\n+                tagRender={({ label, onClose }) => <LemonSnack onClose={onClose}>{label}</LemonSnack>}\n+            />\n+        </div>\n+    )\n+}\ndiff --git a/frontend/src/lib/components/LemonSnack/LemonSnack.scss b/frontend/src/lib/components/LemonSnack/LemonSnack.scss\nnew file mode 100644\nindex 000000000..d0af1bf89\n--- /dev/null\n+++ b/frontend/src/lib/components/LemonSnack/LemonSnack.scss\n@@ -0,0 +1,17 @@\n+.LemonSnack {\n+    display: inline-block;\n+    background: var(--primary-bg-hover);\n+    border-radius: var(--radius);\n+    color: var(--primary-alt);\n+\n+    .LemonSnack__inner {\n+        display: flex;\n+        flex-direction: row;\n+        align-items: center;\n+        padding: 0.25rem 0.4rem;\n+    }\n+\n+    .LemonSnack__close {\n+        margin-left: 0.25rem;\n+    }\n+}\ndiff --git a/frontend/src/lib/components/LemonSnack/LemonSnack.stories.tsx b/frontend/src/lib/components/LemonSnack/LemonSnack.stories.tsx\nnew file mode 100644\nindex 000000000..910a4cf5f\n--- /dev/null\n+++ b/frontend/src/lib/components/LemonSnack/LemonSnack.stories.tsx\n@@ -0,0 +1,36 @@\n+import React from 'react'\n+import { ComponentMeta, ComponentStory } from '@storybook/react'\n+import { LemonSnack, LemonSnackProps } from './LemonSnack'\n+import { ProfilePicture } from '../ProfilePicture'\n+\n+export default {\n+    title: 'Lemon UI/Lemon Snack',\n+    component: LemonSnack,\n+    argTypes: {\n+        children: {\n+            defaultValue: 'Tasty snacks',\n+        },\n+    },\n+} as ComponentMeta<typeof LemonSnack>\n+\n+const BasicTemplate: ComponentStory<typeof LemonSnack> = (props: LemonSnackProps) => {\n+    return <LemonSnack {...props} />\n+}\n+\n+export const Default = BasicTemplate.bind({})\n+Default.args = {\n+    onClose: null as any,\n+}\n+\n+export const ComplexContent = BasicTemplate.bind({})\n+ComplexContent.args = {\n+    children: (\n+        <span className=\"flex gap-05 items-center\">\n+            <ProfilePicture email=\"ben@posthog.com\" size=\"sm\" />\n+            <span>\n+                Look at me I'm <b>bold!</b>\n+            </span>\n+        </span>\n+    ),\n+    onClose: () => alert('Close clicked!'),\n+}\ndiff --git a/frontend/src/lib/components/LemonSnack/LemonSnack.tsx b/frontend/src/lib/components/LemonSnack/LemonSnack.tsx\nnew file mode 100644\nindex 000000000..e01bbee0a\n--- /dev/null\n+++ b/frontend/src/lib/components/LemonSnack/LemonSnack.tsx\n@@ -0,0 +1,32 @@\n+import { LemonButton } from '@posthog/lemon-ui'\n+import clsx from 'clsx'\n+import React from 'react'\n+import { IconClose } from '../icons'\n+import './LemonSnack.scss'\n+\n+export interface LemonSnackProps {\n+    children?: React.ReactNode\n+    disabled?: boolean\n+    onClose?: () => void\n+    'data-attr'?: string\n+}\n+\n+export function LemonSnack({ children, disabled, onClose }: LemonSnackProps): JSX.Element {\n+    return (\n+        <span\n+            className={clsx('LemonSnack', {\n+                'LemonSnack--disabled': disabled,\n+            })}\n+        >\n+            <span className=\"LemonSnack__inner\">\n+                {children}\n+\n+                {onClose ? (\n+                    <span className=\"LemonSnack__close\">\n+                        <LemonButton type=\"stealth\" size=\"small\" icon={<IconClose />} onClick={onClose} />\n+                    </span>\n+                ) : undefined}\n+            </span>\n+        </span>\n+    )\n+}\ndiff --git a/frontend/src/lib/components/Subscriptions/views/EditSubscription.tsx b/frontend/src/lib/components/Subscriptions/views/EditSubscription.tsx\nindex ea6225953..955716213 100644\n--- a/frontend/src/lib/components/Subscriptions/views/EditSubscription.tsx\n+++ b/frontend/src/lib/components/Subscriptions/views/EditSubscription.tsx\n@@ -2,7 +2,6 @@ import React, { useEffect, useMemo } from 'react'\n import { useActions, useValues } from 'kea'\n import { LemonButton } from 'lib/components/LemonButton'\n import { VerticalForm } from 'lib/forms/VerticalForm'\n-import { Select } from 'antd'\n import { membersLogic } from 'scenes/organization/Settings/membersLogic'\n import { preflightLogic } from 'scenes/PreflightCheck/preflightLogic'\n import { Field } from 'lib/forms/Field'\n@@ -24,6 +23,11 @@ import {\n     weekdayOptions,\n } from '../utils'\n import { LemonDivider, LemonInput, LemonTextArea, Link } from '@posthog/lemon-ui'\n+import {\n+    LemonSelectMultiple,\n+    LemonSelectMultipleOptionItem,\n+} from 'lib/components/LemonSelectMultiple/LemonSelectMultiple'\n+import { usersLemonSelectOptions } from 'lib/components/UserSelectItem'\n import { integrationsLogic } from 'scenes/project/Settings/integrationsLogic'\n import { featureFlagLogic } from 'lib/logic/featureFlagLogic'\n import { FEATURE_FLAGS } from 'lib/constants'\n@@ -53,7 +57,7 @@ export function EditSubscription({\n         dashboardId,\n     })\n \n-    const { antSelectOptions } = useValues(membersLogic)\n+    const { members, membersLoading } = useValues(membersLogic)\n     const { subscription, isSubscriptionSubmitting, subscriptionChanged } = useValues(logic)\n     const { preflight, siteUrlMisconfigured } = useValues(preflightLogic)\n     const { deleteSubscription } = useActions(subscriptionslogic)\n@@ -83,18 +87,16 @@ export function EditSubscription({\n     }, [subscription.target_type])\n \n     // If slackChannels aren't loaded, make sure we display only the channel name and not the actual underlying value\n-    const slackChannelOptions = useMemo(\n+    const slackChannelOptions: LemonSelectMultipleOptionItem[] = useMemo(\n         () =>\n             slackChannels\n                 ? slackChannels.map((x) => ({\n-                      key: x.id,\n-                      value: `${x.id}|#${x.name}`,\n+                      key: `${x.id}|#${x.name}`,\n                       label: x.is_private ? `🔒${x.name}` : `#${x.name}`,\n                   }))\n                 : [\n                       {\n                           key: subscription.target_value,\n-                          value: subscription.target_value,\n                           label: subscription.target_value?.split('|')?.pop(),\n                       },\n                   ],\n@@ -150,7 +152,7 @@ export function EditSubscription({\n                     )}\n \n                     <Field name={'title'} label={'Name'}>\n-                        <LemonInput placeholder=\"e.g. Weekly team report\" />\n+                        <LemonInput placeholder=\"e.g. Weekly team report\" disabled={emailDisabled} />\n                     </Field>\n \n                     {featureFlags[FEATURE_FLAGS.SUBSCRIPTIONS_SLACK] && (\n@@ -177,26 +179,28 @@ export function EditSubscription({\n                                     </>\n                                 </AlertMessage>\n                             )}\n+\n                             <Field name={'target_value'} label={'Who do you want to subscribe'}>\n                                 {({ value, onChange }) => (\n                                     <>\n-                                        <Select\n+                                        <LemonSelectMultiple\n+                                            onChange={(val) => onChange(val.join(','))}\n+                                            value={value?.split(',').filter(Boolean)}\n+                                            filterOption={false}\n                                             disabled={emailDisabled}\n-                                            bordered\n-                                            mode=\"tags\"\n-                                            dropdownMatchSelectWidth={false}\n+                                            mode=\"multiple-custom\"\n                                             data-attr=\"subscribed-emails\"\n-                                            options={antSelectOptions}\n-                                            style={{ width: '100%' }}\n-                                            value={value?.split(',').filter(Boolean)}\n-                                            onChange={(val) => onChange(val.join(','))}\n+                                            options={usersLemonSelectOptions(members.map((x) => x.user))}\n+                                            loading={membersLoading}\n+                                            placeholder=\"Enter an email address\"\n                                         />\n-                                        <div className=\"text-small text-muted mt-05\">\n-                                            Enter the email addresses of the users you want to share with\n-                                        </div>\n                                     </>\n                                 )}\n                             </Field>\n+                            <div className=\"text-small text-muted mt-05\">\n+                                Enter the email addresses of the users you want to share with\n+                            </div>\n+\n                             <Field name={'invite_message'} label={'Message (optional)'}>\n                                 <LemonTextArea placeholder=\"Your message to new subscribers (optional)\" />\n                             </Field>\n@@ -222,17 +226,16 @@ export function EditSubscription({\n                             <Field name={'target_value'} label={'Which Slack channel to send reports to'}>\n                                 {({ value, onChange }) => (\n                                     <>\n-                                        <Select\n-                                            showSearch\n+                                        <LemonSelectMultiple\n+                                            onChange={(val) => onChange(val)}\n                                             value={value}\n-                                            placeholder={'Pick a Slack channel'}\n-                                            disabled={slackDisabled}\n                                             filterOption={true}\n-                                            onChange={(val) => onChange(val)}\n-                                            notFoundContent={null}\n-                                            style={{ width: '100%' }}\n-                                            loading={slackChannelsLoading}\n+                                            disabled={slackDisabled}\n+                                            mode=\"single\"\n+                                            data-attr=\"select-slack-channel\"\n                                             options={slackChannelOptions}\n+                                            loading={slackChannelsLoading}\n+                                            placeholder={'Pick a Slack channel'}\n                                         />\n                                     </>\n                                 )}\ndiff --git a/frontend/src/lib/components/UserSelectItem.tsx b/frontend/src/lib/components/UserSelectItem.tsx\nnew file mode 100644\nindex 000000000..f6b5f2223\n--- /dev/null\n+++ b/frontend/src/lib/components/UserSelectItem.tsx\n@@ -0,0 +1,29 @@\n+import React from 'react'\n+import { UserBasicType, UserType } from '~/types'\n+import { LemonSelectMultipleOptionItem } from './LemonSelectMultiple/LemonSelectMultiple'\n+import { ProfilePicture } from './ProfilePicture'\n+\n+export interface UserSelectItemProps {\n+    user: UserBasicType | UserType\n+}\n+\n+export function UserSelectItem({ user }: UserSelectItemProps): JSX.Element {\n+    return (\n+        <span className=\"flex gap-05 items-center\">\n+            <ProfilePicture name={user.first_name} email={user.email} size=\"sm\" />\n+            <span>\n+                {user.first_name} <b>{`<${user.email}>`}</b>\n+            </span>\n+        </span>\n+    )\n+}\n+\n+export function usersLemonSelectOptions(\n+    users: (UserBasicType | UserType)[],\n+    key: 'email' | 'uuid' = 'email'\n+): LemonSelectMultipleOptionItem[] {\n+    return users.map((user) => ({\n+        key: user[key],\n+        label: <UserSelectItem user={user} />,\n+    }))\n+}\ndiff --git a/frontend/src/scenes/dashboard/ShareModal.tsx b/frontend/src/scenes/dashboard/ShareModal.tsx\nindex e1fb71672..d8f7f1151 100644\n--- a/frontend/src/scenes/dashboard/ShareModal.tsx\n+++ b/frontend/src/scenes/dashboard/ShareModal.tsx\n@@ -14,10 +14,11 @@ import { DashboardRestrictionLevel, privilegeLevelToName, DashboardPrivilegeLeve\n import { LemonSelect, LemonSelectOptions } from 'lib/components/LemonSelect'\n import { dashboardCollaboratorsLogic } from './dashboardCollaboratorsLogic'\n import { ProfilePicture } from 'lib/components/ProfilePicture'\n-import { Button, Select } from 'antd'\n import { Tooltip } from 'lib/components/Tooltip'\n import { PayGateMini } from 'lib/components/PayGateMini/PayGateMini'\n import { AlertMessage } from 'lib/components/AlertMessage'\n+import { LemonSelectMultiple } from 'lib/components/LemonSelectMultiple/LemonSelectMultiple'\n+import { usersLemonSelectOptions } from 'lib/components/UserSelectItem'\n \n export const DASHBOARD_RESTRICTION_OPTIONS: LemonSelectOptions = {\n     [DashboardRestrictionLevel.EveryoneInProjectCanEdit]: {\n@@ -128,44 +129,30 @@ function DashboardCollaboration({ dashboardId }: { dashboardId: DashboardType['i\n                         <section>\n                             <h5>Collaborators</h5>\n                             {canEditDashboard && (\n-                                <div style={{ display: 'flex', marginBottom: '0.75rem' }}>\n-                                    {/* TOOD: Use Lemon instead of Ant components here */}\n-                                    <Select\n-                                        mode=\"multiple\"\n-                                        placeholder=\"Search for team members to add…\"\n-                                        loading={explicitCollaboratorsLoading}\n-                                        value={explicitCollaboratorsToBeAdded}\n-                                        onChange={(newValues) => setExplicitCollaboratorsToBeAdded(newValues)}\n-                                        showArrow\n-                                        showSearch\n-                                        style={{ flexGrow: 1 }}\n-                                    >\n-                                        {addableMembers.map((user) => (\n-                                            <Select.Option\n-                                                key={user.id}\n-                                                value={user.uuid}\n-                                                title={`${user.first_name} (${user.email})`}\n-                                            >\n-                                                <ProfilePicture\n-                                                    name={user.first_name}\n-                                                    email={user.email}\n-                                                    size=\"sm\"\n-                                                    style={{ display: 'inline-flex', marginRight: 8 }}\n-                                                />\n-                                                {user.first_name} ({user.email})\n-                                            </Select.Option>\n-                                        ))}\n-                                    </Select>\n-                                    <Button\n-                                        type=\"primary\"\n-                                        style={{ flexShrink: 0, marginLeft: '0.5rem' }}\n-                                        loading={explicitCollaboratorsLoading}\n-                                        disabled={explicitCollaboratorsToBeAdded.length === 0}\n-                                        onClick={() => addExplicitCollaborators()}\n-                                    >\n-                                        Add\n-                                    </Button>\n-                                </div>\n+                                <>\n+                                    <div className=\"flex gap-05\">\n+                                        <div style={{ flex: 1 }}>\n+                                            <LemonSelectMultiple\n+                                                placeholder=\"Search for team members to add…\"\n+                                                value={explicitCollaboratorsToBeAdded}\n+                                                loading={explicitCollaboratorsLoading}\n+                                                onChange={(newValues) => setExplicitCollaboratorsToBeAdded(newValues)}\n+                                                filterOption={false}\n+                                                mode=\"multiple\"\n+                                                data-attr=\"subscribed-emails\"\n+                                                options={usersLemonSelectOptions(addableMembers)}\n+                                            />\n+                                        </div>\n+                                        <LemonButton\n+                                            type=\"primary\"\n+                                            loading={explicitCollaboratorsLoading}\n+                                            disabled={explicitCollaboratorsToBeAdded.length === 0}\n+                                            onClick={() => addExplicitCollaborators()}\n+                                        >\n+                                            Add\n+                                        </LemonButton>\n+                                    </div>\n+                                </>\n                             )}\n                             {allCollaborators.map((collaborator) => (\n                                 <CollaboratorRow\ndiff --git a/frontend/src/scenes/insights/EditorFilters/EFPathsWildcardGroups.tsx b/frontend/src/scenes/insights/EditorFilters/EFPathsWildcardGroups.tsx\nindex dfd2b091d..dae98bfb8 100644\n--- a/frontend/src/scenes/insights/EditorFilters/EFPathsWildcardGroups.tsx\n+++ b/frontend/src/scenes/insights/EditorFilters/EFPathsWildcardGroups.tsx\n@@ -1,20 +1,21 @@\n import React from 'react'\n import { useValues, useActions } from 'kea'\n import { pathsLogic } from 'scenes/paths/pathsLogic'\n-import { Select } from 'antd'\n import { EditorFilterProps } from '~/types'\n+import { LemonSelectMultiple } from 'lib/components/LemonSelectMultiple/LemonSelectMultiple'\n \n export function EFPathsWildcardGroups({ insightProps }: EditorFilterProps): JSX.Element {\n     const { filter } = useValues(pathsLogic(insightProps))\n     const { setFilter } = useActions(pathsLogic(insightProps))\n \n     return (\n-        <Select\n-            mode=\"tags\"\n-            style={{ width: '100%' }}\n-            onChange={(path_groupings) => setFilter({ path_groupings })}\n-            tokenSeparators={[',']}\n-            value={filter.path_groupings || []}\n-        />\n+        <>\n+            <LemonSelectMultiple\n+                onChange={(path_groupings) => setFilter({ path_groupings })}\n+                value={filter.path_groupings || []}\n+                filterOption={false}\n+                mode=\"multiple-custom\"\n+            />\n+        </>\n     )\n }\ndiff --git a/frontend/src/scenes/instance/SystemStatus/StaffUsersTab.tsx b/frontend/src/scenes/instance/SystemStatus/StaffUsersTab.tsx\nindex 1aca9abe7..ed2b3b7fb 100644\n--- a/frontend/src/scenes/instance/SystemStatus/StaffUsersTab.tsx\n+++ b/frontend/src/scenes/instance/SystemStatus/StaffUsersTab.tsx\n@@ -1,4 +1,4 @@\n-import { Button, Divider, Modal, Select } from 'antd'\n+import { Divider, Modal } from 'antd'\n import { useActions, useValues } from 'kea'\n import { IconDelete, IconOpenInNew } from 'lib/components/icons'\n import { LemonTableColumns, LemonTable } from 'lib/components/LemonTable'\n@@ -9,6 +9,8 @@ import { staffUsersLogic } from './staffUsersLogic'\n import { LemonButton } from 'lib/components/LemonButton'\n import { userLogic } from 'scenes/userLogic'\n import { LemonTag } from 'lib/components/LemonTag/LemonTag'\n+import { LemonSelectMultiple } from 'lib/components/LemonSelectMultiple/LemonSelectMultiple'\n+import { usersLemonSelectOptions } from 'lib/components/UserSelectItem'\n \n export function StaffUsersTab(): JSX.Element {\n     const { user: myself } = useValues(userLogic)\n@@ -111,43 +113,27 @@ export function StaffUsersTab(): JSX.Element {\n             </div>\n             <Divider style={{ margin: 0, marginBottom: 16 }} />\n             <section>\n-                <div style={{ display: 'flex', marginBottom: '0.75rem' }}>\n-                    {/* TOOD: Use Lemon instead of Ant components here */}\n-                    <Select\n-                        mode=\"multiple\"\n-                        placeholder=\"Add staff users here…\"\n-                        loading={allUsersLoading}\n-                        value={staffUsersToBeAdded}\n-                        onChange={(newValues) => setStaffUsersToBeAdded(newValues)}\n-                        showArrow\n-                        showSearch\n-                        style={{ flexGrow: 1 }}\n-                    >\n-                        {nonStaffUsers.map((user) => (\n-                            <Select.Option\n-                                key={user.uuid}\n-                                value={user.uuid}\n-                                title={`${user.first_name} (${user.email})`}\n-                            >\n-                                <ProfilePicture\n-                                    name={user.first_name}\n-                                    email={user.email}\n-                                    size=\"sm\"\n-                                    style={{ display: 'inline-flex', marginRight: 8 }}\n-                                />\n-                                {user.first_name} ({user.email})\n-                            </Select.Option>\n-                        ))}\n-                    </Select>\n-                    <Button\n+                <div className=\"flex gap-05 mb\">\n+                    <div style={{ flex: 1 }}>\n+                        <LemonSelectMultiple\n+                            placeholder=\"Add staff users here…\"\n+                            loading={allUsersLoading}\n+                            value={staffUsersToBeAdded}\n+                            onChange={(newValues) => setStaffUsersToBeAdded(newValues)}\n+                            filterOption={false}\n+                            mode=\"multiple\"\n+                            data-attr=\"subscribed-emails\"\n+                            options={usersLemonSelectOptions(nonStaffUsers)}\n+                        />\n+                    </div>\n+                    <LemonButton\n                         type=\"primary\"\n-                        style={{ flexShrink: 0, marginLeft: '0.5rem' }}\n                         loading={allUsersLoading}\n                         disabled={staffUsersToBeAdded.length === 0}\n                         onClick={addStaffUsers}\n                     >\n                         Add\n-                    </Button>\n+                    </LemonButton>\n                 </div>\n             </section>\n             <LemonTable dataSource={staffUsers} columns={columns} loading={allUsersLoading} rowKey=\"uuid\" />\ndiff --git a/frontend/src/scenes/organization/Settings/membersLogic.tsx b/frontend/src/scenes/organization/Settings/membersLogic.tsx\nindex ca3969257..dba06422e 100644\n--- a/frontend/src/scenes/organization/Settings/membersLogic.tsx\n+++ b/frontend/src/scenes/organization/Settings/membersLogic.tsx\n@@ -53,16 +53,6 @@ export const membersLogic = kea<membersLogicType>({\n                 return result\n             },\n         ],\n-\n-        antSelectOptions: [\n-            (s) => [s.members],\n-            (members) =>\n-                members.map((member) => ({\n-                    key: member.user.email,\n-                    value: member.user.email,\n-                    label: `${member.user.first_name} <${member.user.email}>`,\n-                })),\n-        ],\n     },\n     listeners: ({ actions }) => ({\n         changeMemberAccessLevel: async ({ member, level }) => {\ndiff --git a/frontend/src/scenes/persons/MergeSplitPerson.tsx b/frontend/src/scenes/persons/MergeSplitPerson.tsx\nindex 2577a0bde..0673985ea 100644\n--- a/frontend/src/scenes/persons/MergeSplitPerson.tsx\n+++ b/frontend/src/scenes/persons/MergeSplitPerson.tsx\n@@ -7,6 +7,7 @@ import { ActivityType, mergeSplitPersonLogic } from './mergeSplitPersonLogic'\n import { capitalizeFirstLetter, midEllipsis, pluralize } from 'lib/utils'\n import { InlineMessage } from 'lib/components/InlineMessage/InlineMessage'\n import { Tooltip } from 'lib/components/Tooltip'\n+import { LemonSelectMultiple } from 'lib/components/LemonSelectMultiple/LemonSelectMultiple'\n \n export function MergeSplitPerson({ person }: { person: PersonType }): JSX.Element {\n     const logicProps = { person }\n@@ -55,7 +56,7 @@ export function MergeSplitPerson({ person }: { person: PersonType }): JSX.Elemen\n }\n \n function MergePerson(): JSX.Element {\n-    const { persons, person, executedLoading } = useValues(mergeSplitPersonLogic)\n+    const { persons, person, executedLoading, selectedPersonsToMerge } = useValues(mergeSplitPersonLogic)\n     const { setListFilters, setSelectedPersonsToMerge } = useActions(mergeSplitPersonLogic)\n \n     return (\n@@ -71,31 +72,23 @@ function MergePerson(): JSX.Element {\n                 </a>\n                 .\n             </p>\n-            <Select\n-                mode=\"multiple\"\n-                allowClear\n-                showSearch\n-                style={{ width: '100%' }}\n+\n+            <LemonSelectMultiple\n                 placeholder=\"Please select persons to merge\"\n-                onChange={(value: number[]) => setSelectedPersonsToMerge(value)}\n+                onChange={(value) => setSelectedPersonsToMerge(value.map((x) => parseInt(x, 10)))}\n                 filterOption={false}\n-                onSearch={(value) => {\n-                    setListFilters({ search: value })\n-                }}\n-                className=\"mt\"\n+                onSearch={(value) => setListFilters({ search: value })}\n+                mode=\"multiple\"\n+                data-attr=\"subscribed-emails\"\n+                value={selectedPersonsToMerge.map((x) => x.toString())}\n+                options={(persons.results || [])\n+                    .filter((p: PersonType) => p.id && p.uuid !== person.uuid)\n+                    .map((p) => ({\n+                        key: `${p.id}`,\n+                        label: p.name,\n+                    }))}\n                 disabled={executedLoading}\n-            >\n-                {persons.results &&\n-                    persons.results\n-                        .filter((p: PersonType) => p.uuid !== person.uuid)\n-                        .map((p: PersonType) =>\n-                            p.id ? (\n-                                <Select.Option value={p.id} key={p.id}>\n-                                    {p.name}\n-                                </Select.Option>\n-                            ) : undefined\n-                        )}\n-            </Select>\n+            />\n             <InlineMessage style={{ marginTop: 16 }} type=\"danger\">\n                 This action is not reversible. Please be sure before continuing.\n             </InlineMessage>\ndiff --git a/frontend/src/scenes/project/Settings/AddMembersModal.tsx b/frontend/src/scenes/project/Settings/AddMembersModal.tsx\nindex 2dfd04925..b0faf4f82 100644\n--- a/frontend/src/scenes/project/Settings/AddMembersModal.tsx\n+++ b/frontend/src/scenes/project/Settings/AddMembersModal.tsx\n@@ -67,6 +67,7 @@ export function AddMembersModalWithButton({ isRestricted }: RestrictedComponentP\n                         style={{ marginBottom: 8 }}\n                         name=\"userUuids\"\n                     >\n+                        {/* TODO: Refactor this to LemonSelectMultiple */}\n                         <Select\n                             mode=\"multiple\"\n                             placeholder=\"Organization members\"\n"
  },
  "6bbc409b500b67efbc1d26e5bb24fd244e1520cf": {
    "hash": "6bbc409b500b67efbc1d26e5bb24fd244e1520cf",
    "message": "fix: Exclude liveness probes from IP blocks (#11023)",
    "diff": "commit 6bbc409b500b67efbc1d26e5bb24fd244e1520cf\nAuthor: Ben White <ben@benjackwhite.co.uk>\nDate:   Thu Jul 28 09:56:34 2022 +0200\n\n    fix: Exclude liveness probes from IP blocks (#11023)\n\ndiff --git a/posthog/middleware.py b/posthog/middleware.py\nindex 2db748775..3fee79fb4 100644\n--- a/posthog/middleware.py\n+++ b/posthog/middleware.py\n@@ -54,16 +54,7 @@ class AllowIPMiddleware:\n \n     def __call__(self, request: HttpRequest):\n         response: HttpResponse = self.get_response(request)\n-        if request.path.split(\"/\")[1] in [\n-            \"decide\",\n-            \"engage\",\n-            \"track\",\n-            \"capture\",\n-            \"batch\",\n-            \"e\",\n-            \"static\",\n-            \"_health\",\n-        ]:\n+        if request.path.split(\"/\")[1] in [\"decide\", \"engage\", \"track\", \"capture\", \"batch\", \"e\", \"static\", \"_health\"]:\n             return response\n         ip = self.extract_client_ip(request)\n         if ip and any(ip_address(ip) in ip_network(block, strict=False) for block in self.ip_blocks):\ndiff --git a/posthog/settings/web.py b/posthog/settings/web.py\nindex af1a62a16..41050e3d1 100644\n--- a/posthog/settings/web.py\n+++ b/posthog/settings/web.py\n@@ -48,12 +48,12 @@ MIDDLEWARE = [\n     \"django_structlog.middlewares.RequestMiddleware\",\n     \"django_structlog.middlewares.CeleryMiddleware\",\n     \"django.middleware.security.SecurityMiddleware\",\n-    \"posthog.middleware.ShortCircuitMiddleware\",\n-    \"posthog.middleware.AllowIPMiddleware\",\n     # NOTE: we need healthcheck high up to avoid hitting middlewares that may be\n     # using dependencies that the healthcheck should be checking. It should be\n     # ok below the above middlewares however.\n     \"posthog.health.healthcheck_middleware\",\n+    \"posthog.middleware.ShortCircuitMiddleware\",\n+    \"posthog.middleware.AllowIPMiddleware\",\n     \"google.cloud.sqlcommenter.django.middleware.SqlCommenter\",\n     \"django.contrib.sessions.middleware.SessionMiddleware\",\n     \"corsheaders.middleware.CorsMiddleware\",\n"
  },
  "3d8f8dfe26ff75b8eb9ad971b6a3f952ab0f24e2": {
    "hash": "3d8f8dfe26ff75b8eb9ad971b6a3f952ab0f24e2",
    "message": "perf(decide): Speed up decide endpoint by shortcircuiting middleware (#10744)\n    \n    * perf(decide): Speed up decide endpoint by shortcircuiting middleware\n    \n    * fix cypress tests",
    "diff": "commit 3d8f8dfe26ff75b8eb9ad971b6a3f952ab0f24e2\nAuthor: timgl <tim@glsr.nl>\nDate:   Wed Jul 13 15:37:53 2022 +0200\n\n    perf(decide): Speed up decide endpoint by shortcircuiting middleware (#10744)\n    \n    * perf(decide): Speed up decide endpoint by shortcircuiting middleware\n    \n    * fix cypress tests\n\ndiff --git a/cypress/e2e/toolbar.js b/cypress/e2e/toolbar.js\nindex ceed0694c..b33fc3980 100644\n--- a/cypress/e2e/toolbar.js\n+++ b/cypress/e2e/toolbar.js\n@@ -1,7 +1,19 @@\n describe('Toolbar', () => {\n     it('Toolbar loads', () => {\n-        cy.visit('/demo')\n-        cy.get('#__POSTHOG_TOOLBAR__').should('exist')\n+        cy.get('[data-attr=\"menu-item-toolbar-launch\"]').click()\n+        cy.get('[data-attr=\"sidebar-launch-toolbar\"]').contains('Add toolbar URL').click()\n+        cy.location().then((loc) => {\n+            cy.get('[data-attr=\"url-input\"]').clear().type(`http://${loc.host}/demo`)\n+            cy.get('[data-attr=\"url-save\"]').click()\n+            cy.get('[data-attr=\"toolbar-open\"]')\n+                .first()\n+                .parent()\n+                .invoke('attr', 'href')\n+                .then((href) => {\n+                    cy.visit(href)\n+                })\n+            cy.get('#__POSTHOG_TOOLBAR__').shadow().find('div').should('exist')\n+        })\n     })\n \n     it('toolbar item in sidebar has launch options', () => {\ndiff --git a/frontend/src/scenes/toolbar-launch/AuthorizedUrlsTable.tsx b/frontend/src/scenes/toolbar-launch/AuthorizedUrlsTable.tsx\nindex 4b7212eb3..d210b7788 100644\n--- a/frontend/src/scenes/toolbar-launch/AuthorizedUrlsTable.tsx\n+++ b/frontend/src/scenes/toolbar-launch/AuthorizedUrlsTable.tsx\n@@ -76,8 +76,9 @@ export function AuthorizedUrlsTable({ pageKey, actionId }: AuthorizedUrlsTableIn\n                                 onPressEnter={save}\n                                 autoFocus\n                                 placeholder=\"Enter a URL or wildcard subdomain (e.g. https://*.posthog.com)\"\n+                                data-attr=\"url-input\"\n                             />\n-                            <Button type=\"primary\" onClick={save}>\n+                            <Button type=\"primary\" onClick={save} data-attr=\"url-save\">\n                                 Save\n                             </Button>\n                         </div>\n@@ -93,12 +94,21 @@ export function AuthorizedUrlsTable({ pageKey, actionId }: AuthorizedUrlsTableIn\n                 return (\n                     <div className=\"actions-col\">\n                         {record.type === 'suggestion' ? (\n-                            <LemonButton type=\"secondary\" onClick={() => addUrl(record.url)}>\n+                            <LemonButton\n+                                type=\"secondary\"\n+                                onClick={() => addUrl(record.url)}\n+                                data-attr=\"toolbar-apply-suggestion\"\n+                            >\n                                 Apply suggestion\n                             </LemonButton>\n                         ) : (\n                             <>\n-                                <LemonButton type=\"highlighted\" href={launchUrl(record.url)} className=\"mr\">\n+                                <LemonButton\n+                                    type=\"highlighted\"\n+                                    href={launchUrl(record.url)}\n+                                    className=\"mr\"\n+                                    data-attr=\"toolbar-open\"\n+                                >\n                                     Open with Toolbar\n                                 </LemonButton>\n                                 <More\n@@ -146,7 +156,7 @@ export function AuthorizedUrlsTable({ pageKey, actionId }: AuthorizedUrlsTableIn\n                         autoFocus={pageKey === 'toolbar-launch' && !isMobile()}\n                     />\n                 </div>\n-                <LemonButton type=\"primary\" onClick={newUrl}>\n+                <LemonButton type=\"primary\" onClick={newUrl} data-attr=\"toolbar-add-url\">\n                     Add{pageKey === 'toolbar-launch' && ' authorized URL'}\n                 </LemonButton>\n             </div>\ndiff --git a/posthog/api/decide.py b/posthog/api/decide.py\nindex 6ab93fef2..3a46680f2 100644\n--- a/posthog/api/decide.py\n+++ b/posthog/api/decide.py\n@@ -1,5 +1,4 @@\n import re\n-import secrets\n from typing import Any, Dict, Optional, Tuple\n from urllib.parse import urlparse\n \n@@ -84,13 +83,6 @@ def get_decide(request: HttpRequest):\n         \"supportedCompression\": [\"gzip\", \"gzip-js\", \"lz64\"],\n     }\n \n-    if request.user.is_authenticated:\n-        r, update_user_token = decide_editor_params(request)\n-        response.update(r)\n-        if update_user_token:\n-            request.user.temporary_token = secrets.token_urlsafe(32)\n-            request.user.save()\n-\n     response[\"featureFlags\"] = []\n     response[\"sessionRecording\"] = False\n \ndiff --git a/posthog/api/test/test_decide.py b/posthog/api/test/test_decide.py\nindex 1c7d9a2e5..7fb8f7dba 100644\n--- a/posthog/api/test/test_decide.py\n+++ b/posthog/api/test/test_decide.py\n@@ -55,31 +55,6 @@ class TestDecide(BaseTest):\n         )\n         self.assertEqual(response.status_code, status.HTTP_200_OK)\n \n-    def test_user_on_own_site_enabled(self):\n-        user = self.organization.members.first()\n-        user.toolbar_mode = \"toolbar\"\n-        user.save()\n-\n-        self.team.app_urls = [\"https://example.com/maybesubdomain\"]\n-        self.team.save()\n-        response = self.client.get(\"/decide/\", HTTP_ORIGIN=\"https://example.com\").json()\n-        self.assertEqual(response[\"isAuthenticated\"], True)\n-        self.assertEqual(response[\"supportedCompression\"], [\"gzip\", \"gzip-js\", \"lz64\"])\n-        self.assertEqual(response[\"editorParams\"][\"toolbarVersion\"], \"toolbar\")\n-\n-    def test_user_on_own_site_disabled(self):\n-        user = self.organization.members.first()\n-        user.toolbar_mode = \"disabled\"\n-        user.save()\n-\n-        self.team.app_urls = [\"https://example.com/maybesubdomain\"]\n-        self.team.save()\n-\n-        # Make sure the endpoint works with and without the trailing slash\n-        response = self.client.get(\"/decide\", HTTP_ORIGIN=\"https://example.com\").json()\n-        self.assertEqual(response[\"isAuthenticated\"], True)\n-        self.assertIsNone(response[\"editorParams\"].get(\"toolbarVersion\"))\n-\n     def test_user_on_evil_site(self):\n         user = self.organization.members.first()\n         user.toolbar_mode = \"toolbar\"\n@@ -91,19 +66,6 @@ class TestDecide(BaseTest):\n         self.assertEqual(response[\"isAuthenticated\"], False)\n         self.assertIsNone(response[\"editorParams\"].get(\"toolbarVersion\", None))\n \n-    def test_user_on_local_host(self):\n-        user = self.organization.members.first()\n-        user.toolbar_mode = \"toolbar\"\n-        user.save()\n-\n-        self.team.app_urls = [\"https://example.com\"]\n-        self.team.save()\n-        response = self.client.get(\"/decide\", HTTP_ORIGIN=\"http://127.0.0.1:8000\").json()\n-        self.assertEqual(response[\"isAuthenticated\"], True)\n-        self.assertEqual(response[\"sessionRecording\"], False)\n-        self.assertEqual(response[\"editorParams\"][\"toolbarVersion\"], \"toolbar\")\n-        self.assertEqual(response[\"supportedCompression\"], [\"gzip\", \"gzip-js\", \"lz64\"])\n-\n     def test_user_session_recording_opt_in(self):\n         # :TRICKY: Test for regression around caching\n         response = self._post_decide().json()\ndiff --git a/posthog/middleware.py b/posthog/middleware.py\nindex 9a2d1d903..2db748775 100644\n--- a/posthog/middleware.py\n+++ b/posthog/middleware.py\n@@ -10,6 +10,7 @@ from django.urls.base import resolve\n from django.utils.cache import add_never_cache_headers\n from loginas.utils import is_impersonated_session\n \n+from posthog.api.decide import get_decide\n from posthog.internal_metrics import incr\n from posthog.models import Action, Cohort, Dashboard, FeatureFlag, Insight, Team, User\n \n@@ -187,3 +188,24 @@ class CHQueries(object):\n         client._request_information = None\n \n         return response\n+\n+\n+def shortcircuitmiddleware(f):\n+    \"\"\" view decorator, the sole purpose to is 'rename' the function\n+    '_shortcircuitmiddleware' \"\"\"\n+\n+    def _shortcircuitmiddleware(*args, **kwargs):\n+        return f(*args, **kwargs)\n+\n+    return _shortcircuitmiddleware\n+\n+\n+class ShortCircuitMiddleware(object):\n+    def __init__(self, get_response):\n+        self.get_response = get_response\n+\n+    def __call__(self, request: HttpRequest):\n+        if request.path == \"/decide/\" or request.path == \"/decide\":\n+            return get_decide(request)\n+        response: HttpResponse = self.get_response(request)\n+        return response\ndiff --git a/posthog/models/property/property.py b/posthog/models/property/property.py\nindex 7df7b1021..e089d3572 100644\n--- a/posthog/models/property/property.py\n+++ b/posthog/models/property/property.py\n@@ -262,7 +262,8 @@ class Property:\n             from posthog.models.cohort import Cohort\n \n             cohort_id = int(cast(Union[str, int], value))\n-            cohort = Cohort.objects.get(pk=cohort_id)\n+\n+            cohort = Cohort.objects.only(\"version\").get(pk=cohort_id)\n             return Q(\n                 Exists(\n                     CohortPeople.objects.filter(\ndiff --git a/posthog/settings/web.py b/posthog/settings/web.py\nindex 587105876..2a8cae6f2 100644\n--- a/posthog/settings/web.py\n+++ b/posthog/settings/web.py\n@@ -47,10 +47,11 @@ MIDDLEWARE = [\n     \"django_structlog.middlewares.RequestMiddleware\",\n     \"django_structlog.middlewares.CeleryMiddleware\",\n     \"django.middleware.security.SecurityMiddleware\",\n-    \"posthog.middleware.AllowIPMiddleware\",\n+    \"posthog.middleware.ShortCircuitMiddleware\",\n     # NOTE: we need healthcheck high up to avoid hitting middlewares that may be\n     # using dependencies that the healthcheck should be checking. It should be\n     # ok below the above middlewares however.\n+    \"posthog.middleware.AllowIPMiddleware\",\n     \"posthog.health.healthcheck_middleware\",\n     \"google.cloud.sqlcommenter.django.middleware.SqlCommenter\",\n     \"django.contrib.sessions.middleware.SessionMiddleware\",\n"
  },
  "3ab12bae4505b813fe65752e7c9ab3dfbbb7ff89": {
    "hash": "3ab12bae4505b813fe65752e7c9ab3dfbbb7ff89",
    "message": "fix(webperformance): fixing typo on webperformance tab (#11096)\n    \n    Closing #10985 : Bug: Typo in Web Performance tab title #10985 (missing a space between Web and Performance in tab title text)",
    "diff": "commit 3ab12bae4505b813fe65752e7c9ab3dfbbb7ff89\nAuthor: stuposluns <stuposluns@gmail.com>\nDate:   Tue Aug 2 23:47:58 2022 -0700\n\n    fix(webperformance): fixing typo on webperformance tab (#11096)\n    \n    Closing #10985 : Bug: Typo in Web Performance tab title #10985 (missing a space between Web and Performance in tab title text)\n\ndiff --git a/frontend/src/scenes/performance/webPerformanceLogic.tsx b/frontend/src/scenes/performance/webPerformanceLogic.tsx\nindex 67a05fc5c..f2c5f55a4 100644\n--- a/frontend/src/scenes/performance/webPerformanceLogic.tsx\n+++ b/frontend/src/scenes/performance/webPerformanceLogic.tsx\n@@ -336,7 +336,7 @@ export const webPerformanceLogic = kea<webPerformanceLogicType>({\n             (eventToDisplay, currentPage): Breadcrumb[] => {\n                 const baseCrumb = [\n                     {\n-                        name: 'WebPerformance',\n+                        name: 'Web Performance',\n                         path: urls.webPerformance(),\n                     },\n                 ]\n"
  },
  "cc5d48c6fa9221f68c09742da91a83bf75fdd108": {
    "hash": "cc5d48c6fa9221f68c09742da91a83bf75fdd108",
    "message": "Iterate on performance waterfall chart (#8453)\n    \n    * handle partial data better and prepare for complex UI\n    \n    * get component story working\n    \n    * add pop-up to web performance blocks\n    \n    * few more small improvements\n    \n    * more complete performance section processing\n    \n    * add reporting on size of resources\n    \n    * update redux state for story\n    \n    * add property filtering\n    \n    * use reduced height flag when drawing a performance block\n    \n    * fix test\n    \n    * humanize filesize in pop up",
    "diff": "commit cc5d48c6fa9221f68c09742da91a83bf75fdd108\nAuthor: Paul D'Ambra <paul.dambra@gmail.com>\nDate:   Mon Feb 7 09:11:31 2022 +0000\n\n    Iterate on performance waterfall chart (#8453)\n    \n    * handle partial data better and prepare for complex UI\n    \n    * get component story working\n    \n    * add pop-up to web performance blocks\n    \n    * few more small improvements\n    \n    * more complete performance section processing\n    \n    * add reporting on size of resources\n    \n    * update redux state for story\n    \n    * add property filtering\n    \n    * use reduced height flag when drawing a performance block\n    \n    * fix test\n    \n    * humanize filesize in pop up\n\ndiff --git a/frontend/src/lib/api.test.ts b/frontend/src/lib/api.test.ts\nindex 1b6e49e4d..96d7da95c 100644\n--- a/frontend/src/lib/api.test.ts\n+++ b/frontend/src/lib/api.test.ts\n@@ -25,7 +25,7 @@ describe('API helper', () => {\n             )\n \n             expect(fakeFetch).toHaveBeenCalledWith(\n-                '/api/projects/2/events?properties=%5B%7B%22key%22%3A%22something%22%2C%22value%22%3A%22is_set%22%2C%22operator%22%3A%22is_set%22%2C%22type%22%3A%22event%22%7D%5D&limit=10',\n+                '/api/projects/2/events?properties=%5B%7B%22key%22%3A%22something%22%2C%22value%22%3A%22is_set%22%2C%22operator%22%3A%22is_set%22%2C%22type%22%3A%22event%22%7D%5D&limit=10&orderBy=%5B%22-timestamp%22%5D',\n                 { signal: undefined }\n             )\n         })\ndiff --git a/frontend/src/lib/api.ts b/frontend/src/lib/api.ts\nindex f7f639fbc..61cdeb8e5 100644\n--- a/frontend/src/lib/api.ts\n+++ b/frontend/src/lib/api.ts\n@@ -213,7 +213,7 @@ const api = {\n             limit: number = 10,\n             teamId: TeamType['id'] = getCurrentTeamId()\n         ): Promise<PaginatedResponse<EventType[]>> {\n-            const params: Record<string, any> = { ...filters, limit }\n+            const params: Record<string, any> = { ...filters, limit, orderBy: ['-timestamp'] }\n             return new ApiRequest().events(teamId).withQueryString(toParams(params)).get()\n         },\n     },\ndiff --git a/frontend/src/lib/utils.tsx b/frontend/src/lib/utils.tsx\nindex fe3107711..ed847d0fa 100644\n--- a/frontend/src/lib/utils.tsx\n+++ b/frontend/src/lib/utils.tsx\n@@ -82,6 +82,18 @@ export function areObjectValuesEmpty(obj?: Record<string, any>): boolean {\n     )\n }\n \n+// taken from https://stackoverflow.com/questions/10420352/converting-file-size-in-bytes-to-human-readable-string/10420404\n+export const humanizeBytes = (fileSizeInBytes: number): string => {\n+    let i = -1\n+    const byteUnits = [' kB', ' MB', ' GB', ' TB', 'PB', 'EB', 'ZB', 'YB']\n+    do {\n+        fileSizeInBytes = fileSizeInBytes / 1024\n+        i++\n+    } while (fileSizeInBytes > 1024)\n+\n+    return Math.max(fileSizeInBytes, 0.1).toFixed(1) + byteUnits[i]\n+}\n+\n export function toParams(obj: Record<string, any>, explodeArrays: boolean = false): string {\n     if (!obj) {\n         return ''\ndiff --git a/frontend/src/scenes/performance/WebPerformance.scss b/frontend/src/scenes/performance/WebPerformance.scss\nindex 48b25527e..1c1cb0886 100644\n--- a/frontend/src/scenes/performance/WebPerformance.scss\n+++ b/frontend/src/scenes/performance/WebPerformance.scss\n@@ -45,6 +45,11 @@\n             height: 32px;\n         }\n \n+        .reduced-height {\n+            height: 16px;\n+            margin-top: 7px;\n+        }\n+\n         .vertical-marker {\n             height: 100%;\n             position: absolute;\ndiff --git a/frontend/src/scenes/performance/WebPerformance.tsx b/frontend/src/scenes/performance/WebPerformance.tsx\nindex f1bf586b4..c3acbe731 100644\n--- a/frontend/src/scenes/performance/WebPerformance.tsx\n+++ b/frontend/src/scenes/performance/WebPerformance.tsx\n@@ -1,4 +1,4 @@\n-import React from 'react'\n+import React, { useState } from 'react'\n import { Button, Col, Row, Typography } from 'antd'\n import './WebPerformance.scss'\n import { LemonTag } from 'lib/components/LemonTag/LemonTag'\n@@ -11,37 +11,133 @@ import { EyeOutlined } from '@ant-design/icons'\n import { dayjs } from 'lib/dayjs'\n import { Tooltip } from 'lib/components/Tooltip'\n import { useActions, useValues } from 'kea'\n-import { webPerformanceLogic } from 'scenes/performance/webPerformanceLogic'\n+import {\n+    MinimalPerformanceResourceTiming,\n+    ResourceTiming,\n+    webPerformanceLogic,\n+} from 'scenes/performance/webPerformanceLogic'\n import { SceneExport } from 'scenes/sceneTypes'\n import { urls } from 'scenes/urls'\n+import { getChartColors } from 'lib/colors'\n+import { areObjectValuesEmpty, humanizeBytes } from 'lib/utils'\n+import { Popup } from 'lib/components/Popup/Popup'\n+import { PropertyFilters } from 'lib/components/PropertyFilters/PropertyFilters'\n \n interface PerfBlockProps {\n-    start: number\n-    end: number\n+    resourceTiming: ResourceTiming\n     max: number | undefined\n-    color?: string\n }\n \n-function PerfBlock({ start, end, max, color }: PerfBlockProps): JSX.Element {\n+const toPositionStyle = (\n+    start: number,\n+    end: number,\n+    max: number\n+): { right: number; blockSides: { left: string; right: string } } | null => {\n+    if (!start && !end) {\n+        return null\n+    }\n+    const left = (start / max) * 100\n+    const right = 100 - (end / max) * 100\n+    const blockSides = { left: `${left}%`, right: `${right}%` }\n+\n+    return { right, blockSides }\n+}\n+const colors = getChartColors('green')\n+\n+const overlayFor = (resourceTiming: ResourceTiming): JSX.Element => {\n+    const title = typeof resourceTiming.item == 'string' ? resourceTiming.item : resourceTiming.item.pathname\n+    const url = typeof resourceTiming.item == 'string' ? null : resourceTiming.item.host\n+    const asResourceTiming = resourceTiming.entry as PerformanceResourceTiming\n+    return (\n+        <>\n+            {url && <Typography.Text type=\"secondary\">{url}</Typography.Text>}\n+            <h2>{title}</h2>\n+            <hr />\n+            <p>\n+                started at {resourceTiming.entry.startTime || resourceTiming.entry.fetchStart}ms and took{' '}\n+                {resourceTiming.entry.duration}ms to complete\n+            </p>\n+            {Object.entries(resourceTiming.performanceParts).map(([key, part], index) => (\n+                <p key={index}>\n+                    {key}: from: {part.start}ms to {part.end}ms (\n+                    {(((part.end - part.start) / resourceTiming.entry.duration) * 100).toFixed(2)}%)\n+                </p>\n+            ))}\n+            {asResourceTiming.decodedBodySize && asResourceTiming.encodedBodySize && (\n+                <>\n+                    <hr />\n+                    Resource is {humanizeBytes(asResourceTiming.decodedBodySize)}\n+                    {asResourceTiming.encodedBodySize !== asResourceTiming.decodedBodySize && (\n+                        <p>\n+                            Was compressed. Sent {humanizeBytes(asResourceTiming.encodedBodySize)}. Saving{' '}\n+                            {((asResourceTiming.decodedBodySize - asResourceTiming.encodedBodySize) /\n+                                asResourceTiming.decodedBodySize) *\n+                                100}\n+                            %\n+                        </p>\n+                    )}\n+                </>\n+            )}\n+            <hr />\n+        </>\n+    )\n+}\n+\n+export const PerfBlock = ({ resourceTiming, max }: PerfBlockProps): JSX.Element => {\n     if (max) {\n-        const left = (start / max) * 100\n-        const right = 100 - (end / max) * 100\n-        const blockSides = { left: `${left}%`, right: `${right}%` }\n+        let right = 0\n+        let end = 0\n+        let blocks: JSX.Element[]\n+\n+        if (areObjectValuesEmpty(resourceTiming.performanceParts)) {\n+            const minimalEntry = resourceTiming.entry as MinimalPerformanceResourceTiming\n+            const style = toPositionStyle(minimalEntry.fetchStart, minimalEntry.responseEnd, max)\n+            right = style?.right ?? 100\n+            end = minimalEntry.responseEnd\n+\n+            blocks = [\n+                <div\n+                    key={minimalEntry.name}\n+                    className=\"performance-block positioned\"\n+                    data-attr-name={minimalEntry.name}\n+                    style={{ ...style?.blockSides, backgroundColor: resourceTiming.color }}\n+                />,\n+            ]\n+        } else {\n+            blocks = Object.entries(resourceTiming.performanceParts).map(([name, measure], index) => {\n+                const style = toPositionStyle(measure.start, measure.end, max)\n+                right = style?.right ?? 100\n+                end = measure.end\n+                return (\n+                    <div\n+                        key={name}\n+                        className={clsx('performance-block positioned', measure.reducedHeight && 'reduced-height')}\n+                        data-attr-name={name}\n+                        style={{ ...style?.blockSides, backgroundColor: colors[index] }}\n+                    />\n+                )\n+            })\n+        }\n+\n+        const [mouseIsOver, setMouseIsOver] = useState(false)\n+\n         const textPosition = { left: `${100 - right + 1}%`, right: `${right}%` }\n         return (\n-            <>\n-                <div className=\"performance-block positioned\" style={{ ...blockSides, backgroundColor: color }} />\n-                <div className=\"positioned\" style={textPosition}>\n-                    {Math.round(end)}ms\n+            <Popup overlay={overlayFor(resourceTiming)} visible={mouseIsOver}>\n+                <div onMouseEnter={() => setMouseIsOver(true)} onMouseLeave={() => setMouseIsOver(false)}>\n+                    {blocks}\n+                    <div className=\"positioned\" style={textPosition}>\n+                        {Math.round(end)}ms\n+                    </div>\n                 </div>\n-            </>\n+            </Popup>\n         )\n     } else {\n         return <></>\n     }\n }\n \n-function VerticalMarker({\n+const VerticalMarker = ({\n     max,\n     position,\n     color,\n@@ -51,7 +147,7 @@ function VerticalMarker({\n     position: number\n     color: string\n     bringToFront?: boolean\n-}): JSX.Element {\n+}): JSX.Element => {\n     if (max) {\n         const left = (position / max) * 100\n         return (\n@@ -65,7 +161,7 @@ function VerticalMarker({\n     }\n }\n \n-function WaterfallChart(): JSX.Element {\n+const WaterfallChart = (): JSX.Element => {\n     const { eventToDisplay } = useValues(webPerformanceLogic)\n     return (\n         <>\n@@ -87,10 +183,11 @@ function WaterfallChart(): JSX.Element {\n                     </Row>\n                     <Row>\n                         <Col span={8}>\n-                            {Object.entries(eventToDisplay.durations).map(([marker]) => {\n+                            {eventToDisplay.resourceTimings.map((timing) => {\n+                                const name = typeof timing.item === 'string' ? timing.item : timing.item.pathname\n                                 return (\n-                                    <Row key={marker} className=\"marker-name marker-row\">\n-                                        {marker}\n+                                    <Row key={name} className=\"marker-name marker-row\">\n+                                        {name}\n                                     </Row>\n                                 )\n                             })}\n@@ -113,15 +210,14 @@ function WaterfallChart(): JSX.Element {\n                                     color={'var(--border-light)'}\n                                 />\n                             ))}\n-                            {Object.entries(eventToDisplay.durations).map(([marker, measure]) => {\n+                            {eventToDisplay.resourceTimings.map((resourceTiming) => {\n+                                const name =\n+                                    typeof resourceTiming.item === 'string'\n+                                        ? resourceTiming.item\n+                                        : resourceTiming.item.pathname\n                                 return (\n-                                    <Row key={marker} className={'marker-row'}>\n-                                        <PerfBlock\n-                                            start={measure.start}\n-                                            end={measure.end}\n-                                            max={eventToDisplay?.maxTime}\n-                                            color={measure.color}\n-                                        />\n+                                    <Row key={name} className={'marker-row'}>\n+                                        <PerfBlock resourceTiming={resourceTiming} max={eventToDisplay?.maxTime} />\n                                     </Row>\n                                 )\n                             })}\n@@ -133,9 +229,11 @@ function WaterfallChart(): JSX.Element {\n     )\n }\n \n-function EventsWithPerformanceTable(): JSX.Element {\n-    const { pageViewEventsLoading, pageViewEvents, eventToDisplay } = useValues(webPerformanceLogic)\n+const EventsWithPerformanceTable = (): JSX.Element => {\n+    const logic = webPerformanceLogic({ sceneUrl: urls.webPerformance() })\n+    const { pageViewEventsLoading, pageViewEvents, eventToDisplay } = useValues(logic)\n     const { setEventToDisplay } = useActions(webPerformanceLogic)\n+\n     const columns: LemonTableColumns<EventType> = [\n         {\n             title: 'URL / Screen',\n@@ -220,7 +318,7 @@ function EventsWithPerformanceTable(): JSX.Element {\n     )\n }\n \n-function DebugPerfData(): JSX.Element {\n+const DebugPerfData = (): JSX.Element => {\n     const { currentEvent } = useValues(webPerformanceLogic)\n     return (\n         <pre>\n@@ -229,7 +327,10 @@ function DebugPerfData(): JSX.Element {\n     )\n }\n \n-export function WebPerformance(): JSX.Element {\n+export const WebPerformance = (): JSX.Element => {\n+    const logic = webPerformanceLogic({ sceneUrl: urls.webPerformance() })\n+    const { properties } = useValues(logic)\n+    const { setProperties } = useActions(logic)\n     return (\n         <div className=\"performance-waterfall\">\n             <PageHeader\n@@ -241,8 +342,20 @@ export function WebPerformance(): JSX.Element {\n                         </LemonTag>\n                     </Row>\n                 }\n+                caption={\n+                    'Shows page view events where performance information has been captured. Not all events have all performance information.'\n+                }\n             />\n             <Row gutter={[0, 32]}>\n+                <Col span={24}>\n+                    <PropertyFilters\n+                        propertyFilters={properties}\n+                        onChange={setProperties}\n+                        pageKey={'web-performance-table'}\n+                        style={{ marginBottom: 0 }}\n+                        eventNames={[]}\n+                    />\n+                </Col>\n                 <Col span={24}>\n                     <EventsWithPerformanceTable />\n                 </Col>\ndiff --git a/frontend/src/scenes/performance/__stories__/PerformanceWaterfall.stories.tsx b/frontend/src/scenes/performance/__stories__/PerformanceWaterfall.stories.tsx\nindex 9a37c67c3..8ee128c4b 100644\n--- a/frontend/src/scenes/performance/__stories__/PerformanceWaterfall.stories.tsx\n+++ b/frontend/src/scenes/performance/__stories__/PerformanceWaterfall.stories.tsx\n@@ -2,10 +2,114 @@ import { Meta } from '@storybook/react'\n import { keaStory } from 'lib/storybook/kea-story'\n \n import eventsState from './events.json'\n-import { WebPerformance } from 'scenes/performance/WebPerformance'\n+import { PerfBlock, WebPerformance } from 'scenes/performance/WebPerformance'\n+import React from 'react'\n+import { Row } from 'antd'\n+import { MinimalPerformanceResourceTiming } from 'scenes/performance/webPerformanceLogic'\n \n export default {\n     title: 'PostHog/Scenes/WebPerformance',\n } as Meta\n \n export const WebPerformanceStory = keaStory(WebPerformance, eventsState)\n+\n+export const PerformanceBlockWithNoPerformanceDetails = keaStory(\n+    () => (\n+        <div className=\"performance-waterfall\">\n+            <div className=\"waterfall-chart\">\n+                <Row key={0} className={'marker-row'}>\n+                    <PerfBlock\n+                        max={1000}\n+                        resourceTiming={{\n+                            item: new URL('http://localhost:8234/static/chunk-MCOK6TO3.js'),\n+                            performanceParts: {},\n+                            entry: {\n+                                name: 'http://localhost:8234/static/chunk-MCOK6TO3.js',\n+                                startTime: 436.4,\n+                                duration: 10.9,\n+                                initiatorType: 'other',\n+                                fetchStart: 436.4,\n+                                responseEnd: 447.3,\n+                            } as MinimalPerformanceResourceTiming,\n+                            color: 'hsl(205, 100%, 74%)',\n+                        }}\n+                    />\n+                </Row>\n+            </div>\n+        </div>\n+    ),\n+    eventsState\n+)\n+\n+export const PerformanceBlockWithPerformanceDetails = keaStory(\n+    () => (\n+        <div className=\"performance-waterfall\">\n+            <div className=\"waterfall-chart\">\n+                <Row key={0} className={'marker-row'}>\n+                    <PerfBlock\n+                        max={700}\n+                        resourceTiming={{\n+                            item: 'the page',\n+                            performanceParts: {\n+                                'dns lookup': {\n+                                    start: 18,\n+                                    end: 79,\n+                                    color: 'hsl(235, 60%, 34%)',\n+                                },\n+                                'connection time': {\n+                                    start: 79,\n+                                    end: 110,\n+                                    color: 'hsl(235, 60%, 34%)',\n+                                },\n+                                'tls time': {\n+                                    start: 90,\n+                                    end: 110,\n+                                    color: 'hsl(235, 60%, 34%)',\n+                                    reducedHeight: true,\n+                                },\n+                                'waiting for first byte (TTFB)': {\n+                                    start: 110,\n+                                    end: 450,\n+                                    color: 'hsl(235, 60%, 34%)',\n+                                },\n+                                'receiving response': {\n+                                    start: 450,\n+                                    end: 502.8,\n+                                    color: 'hsl(235, 60%, 34%)',\n+                                },\n+                            },\n+                            entry: {\n+                                name: 'http://127.0.0.1:8000/events/stats',\n+                                entryType: 'navigation',\n+                                duration: 510,\n+                                initiatorType: 'navigation',\n+                                fetchStart: 18,\n+                                domainLookupStart: 18,\n+                                domainLookupEnd: 79,\n+                                connectStart: 79,\n+                                connectEnd: 110,\n+                                secureConnectionStart: 90,\n+                                requestStart: 110,\n+                                responseStart: 450,\n+                                responseEnd: 502.8,\n+                                transferSize: 35115,\n+                                encodedBodySize: 34815,\n+                                decodedBodySize: 34815,\n+                                unloadEventStart: 502.8,\n+                                unloadEventEnd: 503.8,\n+                                domInteractive: 505,\n+                                domContentLoadedEventStart: 507,\n+                                domContentLoadedEventEnd: 510,\n+                                domComplete: 510,\n+                                loadEventStart: 510,\n+                                loadEventEnd: 510,\n+                                type: 'reload',\n+                            } as PerformanceNavigationTiming,\n+                        }}\n+                    />\n+                </Row>\n+            </div>\n+        </div>\n+    ),\n+    eventsState\n+)\ndiff --git a/frontend/src/scenes/performance/__stories__/events.json b/frontend/src/scenes/performance/__stories__/events.json\nindex 53469e172..88808f648 100644\n--- a/frontend/src/scenes/performance/__stories__/events.json\n+++ b/frontend/src/scenes/performance/__stories__/events.json\n@@ -3,12 +3,21 @@\n         \"router\": {\n             \"location\": {\n                 \"pathname\": \"/web-performance\",\n-                \"search\": \"\",\n+                \"search\": \"?properties=%5B%7B%22key%22%3A%22%24performance_page_loaded%22%2C%22value%22%3A%222700%22%2C%22operator%22%3A%22gt%22%2C%22type%22%3A%22event%22%7D%5D\",\n                 \"hash\": \"\"\n             },\n-            \"searchParams\": {},\n+            \"searchParams\": {\n+                \"properties\": [\n+                    {\n+                        \"key\": \"$performance_page_loaded\",\n+                        \"value\": \"2700\",\n+                        \"operator\": \"gt\",\n+                        \"type\": \"event\"\n+                    }\n+                ]\n+            },\n             \"hashParams\": {},\n-            \"lastMethod\": \"PUSH\"\n+            \"lastMethod\": \"REPLACE\"\n         }\n     },\n     \"scenes\": {\n@@ -17,7 +26,7 @@\n                 \"preflight\": {\n                     \"django\": true,\n                     \"redis\": true,\n-                    \"plugins\": false,\n+                    \"plugins\": true,\n                     \"celery\": false,\n                     \"db\": true,\n                     \"initiated\": true,\n@@ -475,7 +484,7 @@\n                         \"UTC\": 0\n                     },\n                     \"opt_out_capture\": false,\n-                    \"posthog_version\": \"1.31.1\",\n+                    \"posthog_version\": \"1.32.0\",\n                     \"is_debug\": true,\n                     \"is_event_property_usage_enabled\": true,\n                     \"licensed_users_available\": null,\n@@ -491,10 +500,10 @@\n         },\n         \"userLogic\": {\n             \"user\": {\n-                \"date_joined\": \"2022-01-18T14:24:55.696643Z\",\n-                \"uuid\": \"017e6d93-9590-0000-9341-f3a62724c4ea\",\n-                \"distinct_id\": \"UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj\",\n-                \"first_name\": \"Paul\",\n+                \"date_joined\": \"2022-02-05T15:41:20.675851Z\",\n+                \"uuid\": \"017eca8c-03a3-0000-dbed-448b5e2e347d\",\n+                \"distinct_id\": \"F3RTp6GByAuqUkpsUUjzKTQlmJzIQTFoX44fKup95BC\",\n+                \"first_name\": \"p\",\n                 \"email\": \"paul@posthog.com\",\n                 \"email_opt_in\": true,\n                 \"anonymize_data\": false,\n@@ -504,9 +513,9 @@\n                 \"is_impersonated\": false,\n                 \"team\": {\n                     \"id\": 1,\n-                    \"uuid\": \"017e6d93-95c4-0000-3336-11f4c03eb344\",\n-                    \"organization\": \"017e6d93-8fa6-0000-deb6-1c78260418c9\",\n-                    \"api_token\": \"phc_PzZhed4GBoxecFlTaC2hIY7JsSAghIPAIp2f3uwUsvw\",\n+                    \"uuid\": \"017eca8c-03d9-0000-45ef-b1d4ecab7048\",\n+                    \"organization\": \"017eca8b-fdce-0000-6923-f64fc0d0edac\",\n+                    \"api_token\": \"phc_k6AJ5lImHZHzO7uBX5PBWPL0EmSrHEATJfaXOWREOAJ\",\n                     \"name\": \"Default Project\",\n                     \"completed_snippet_onboarding\": true,\n                     \"ingested_event\": true,\n@@ -516,11 +525,11 @@\n                     \"effective_membership_level\": 15\n                 },\n                 \"organization\": {\n-                    \"id\": \"017e6d93-8fa6-0000-deb6-1c78260418c9\",\n-                    \"name\": \"Dev\",\n-                    \"slug\": \"dev\",\n-                    \"created_at\": \"2022-01-18T14:24:54.185912Z\",\n-                    \"updated_at\": \"2022-01-18T14:24:54.185930Z\",\n+                    \"id\": \"017eca8b-fdce-0000-6923-f64fc0d0edac\",\n+                    \"name\": \"p\",\n+                    \"slug\": \"p\",\n+                    \"created_at\": \"2022-02-05T15:41:19.186003Z\",\n+                    \"updated_at\": \"2022-02-05T15:41:19.186027Z\",\n                     \"membership_level\": 15,\n                     \"personalization\": {},\n                     \"setup\": {\n@@ -531,9 +540,9 @@\n                     \"teams\": [\n                         {\n                             \"id\": 1,\n-                            \"uuid\": \"017e6d93-95c4-0000-3336-11f4c03eb344\",\n-                            \"organization\": \"017e6d93-8fa6-0000-deb6-1c78260418c9\",\n-                            \"api_token\": \"phc_PzZhed4GBoxecFlTaC2hIY7JsSAghIPAIp2f3uwUsvw\",\n+                            \"uuid\": \"017eca8c-03d9-0000-45ef-b1d4ecab7048\",\n+                            \"organization\": \"017eca8b-fdce-0000-6923-f64fc0d0edac\",\n+                            \"api_token\": \"phc_k6AJ5lImHZHzO7uBX5PBWPL0EmSrHEATJfaXOWREOAJ\",\n                             \"name\": \"Default Project\",\n                             \"completed_snippet_onboarding\": true,\n                             \"ingested_event\": true,\n@@ -553,9 +562,9 @@\n                 },\n                 \"organizations\": [\n                     {\n-                        \"id\": \"017e6d93-8fa6-0000-deb6-1c78260418c9\",\n-                        \"name\": \"Dev\",\n-                        \"slug\": \"dev\",\n+                        \"id\": \"017eca8b-fdce-0000-6923-f64fc0d0edac\",\n+                        \"name\": \"p\",\n+                        \"slug\": \"p\",\n                         \"membership_level\": 15\n                     }\n                 ],\n@@ -567,11 +576,11 @@\n         },\n         \"organizationLogic\": {\n             \"currentOrganization\": {\n-                \"id\": \"017e6d93-8fa6-0000-deb6-1c78260418c9\",\n-                \"name\": \"Dev\",\n-                \"slug\": \"dev\",\n-                \"created_at\": \"2022-01-18T14:24:54.185912Z\",\n-                \"updated_at\": \"2022-01-18T14:24:54.185930Z\",\n+                \"id\": \"017eca8b-fdce-0000-6923-f64fc0d0edac\",\n+                \"name\": \"p\",\n+                \"slug\": \"p\",\n+                \"created_at\": \"2022-02-05T15:41:19.186003Z\",\n+                \"updated_at\": \"2022-02-05T15:41:19.186027Z\",\n                 \"membership_level\": 15,\n                 \"personalization\": {},\n                 \"setup\": {\n@@ -582,9 +591,9 @@\n                 \"teams\": [\n                     {\n                         \"id\": 1,\n-                        \"uuid\": \"017e6d93-95c4-0000-3336-11f4c03eb344\",\n-                        \"organization\": \"017e6d93-8fa6-0000-deb6-1c78260418c9\",\n-                        \"api_token\": \"phc_PzZhed4GBoxecFlTaC2hIY7JsSAghIPAIp2f3uwUsvw\",\n+                        \"uuid\": \"017eca8c-03d9-0000-45ef-b1d4ecab7048\",\n+                        \"organization\": \"017eca8b-fdce-0000-6923-f64fc0d0edac\",\n+                        \"api_token\": \"phc_k6AJ5lImHZHzO7uBX5PBWPL0EmSrHEATJfaXOWREOAJ\",\n                         \"name\": \"Default Project\",\n                         \"completed_snippet_onboarding\": true,\n                         \"ingested_event\": true,\n@@ -608,14 +617,14 @@\n         \"teamLogic\": {\n             \"currentTeam\": {\n                 \"id\": 1,\n-                \"uuid\": \"017e6d93-95c4-0000-3336-11f4c03eb344\",\n-                \"organization\": \"017e6d93-8fa6-0000-deb6-1c78260418c9\",\n-                \"api_token\": \"phc_PzZhed4GBoxecFlTaC2hIY7JsSAghIPAIp2f3uwUsvw\",\n-                \"app_urls\": [\"http://127.0.0.1:8000/\"],\n+                \"uuid\": \"017eca8c-03d9-0000-45ef-b1d4ecab7048\",\n+                \"organization\": \"017eca8b-fdce-0000-6923-f64fc0d0edac\",\n+                \"api_token\": \"phc_k6AJ5lImHZHzO7uBX5PBWPL0EmSrHEATJfaXOWREOAJ\",\n+                \"app_urls\": [],\n                 \"name\": \"Default Project\",\n                 \"slack_incoming_webhook\": null,\n-                \"created_at\": \"2022-01-18T14:24:55.748653Z\",\n-                \"updated_at\": \"2022-01-24T07:43:01.957211Z\",\n+                \"created_at\": \"2022-02-05T15:41:20.729513Z\",\n+                \"updated_at\": \"2022-02-05T15:41:30.267490Z\",\n                 \"anonymize_ips\": false,\n                 \"completed_snippet_onboarding\": true,\n                 \"ingested_event\": true,\n@@ -676,5895 +685,3940 @@\n                         \"hashParams\": {}\n                     }\n                 },\n-                \"SavedInsights\": {\n-                    \"name\": \"SavedInsights\",\n-                    \"sceneParams\": {\n-                        \"params\": {},\n-                        \"searchParams\": {},\n-                        \"hashParams\": {}\n-                    },\n-                    \"lastTouch\": 1643022690054\n-                },\n                 \"WebPerformance\": {\n                     \"name\": \"WebPerformance\",\n                     \"sceneParams\": {\n                         \"params\": {},\n-                        \"searchParams\": {},\n+                        \"searchParams\": {\n+                            \"properties\": [\n+                                {\n+                                    \"key\": \"$performance_page_loaded\",\n+                                    \"value\": \"2700\",\n+                                    \"operator\": \"gt\",\n+                                    \"type\": \"event\"\n+                                }\n+                            ]\n+                        },\n                         \"hashParams\": {}\n                     },\n-                    \"lastTouch\": 1643022691517\n+                    \"lastTouch\": 1644085955030\n                 }\n             },\n             \"loadingScene\": null,\n             \"upgradeModalFeatureNameAndCaption\": null,\n-            \"lastReloadAt\": null\n+            \"lastReloadAt\": 1636400118819\n         },\n-        \"instance\": {\n-            \"SystemStatus\": {\n-                \"systemStatusLogic\": {\n-                    \"systemStatus\": {\n-                        \"overview\": [\n-                            {\n-                                \"key\": \"posthog_version\",\n-                                \"metric\": \"PostHog version\",\n-                                \"value\": \"1.31.1\"\n-                            },\n-                            {\n-                                \"key\": \"posthog_git_sha\",\n-                                \"metric\": \"PostHog Git SHA\",\n-                                \"value\": \"Undefined\"\n-                            },\n-                            {\n-                                \"key\": \"analytics_database\",\n-                                \"metric\": \"Analytics database in use\",\n-                                \"value\": \"ClickHouse\"\n-                            },\n-                            {\n-                                \"key\": \"plugin_sever_alive\",\n-                                \"metric\": \"Plugin server alive\",\n-                                \"value\": false\n-                            },\n-                            {\n-                                \"key\": \"plugin_sever_version\",\n-                                \"metric\": \"Plugin server version\",\n-                                \"value\": \"1.10.5\"\n-                            },\n-                            {\n-                                \"key\": \"plugin_sever_job_queues\",\n-                                \"metric\": \"Job queues enabled in plugin server\",\n-                                \"value\": \"Graphile\"\n-                            },\n-                            {\n-                                \"key\": \"db_alive\",\n-                                \"metric\": \"Postgres database alive\",\n-                                \"value\": true\n-                            },\n-                            {\n-                                \"key\": \"pg_version\",\n-                                \"metric\": \"Postgres version\",\n-                                \"value\": \"12.0.9\"\n-                            },\n-                            {\n-                                \"key\": \"clickhouse_alive\",\n-                                \"metric\": \"Clickhouse database alive\",\n-                                \"value\": true\n-                            },\n-                            {\n-                                \"key\": \"clickhouse_event_count\",\n-                                \"metric\": \"Events in ClickHouse\",\n-                                \"value\": 11763\n-                            },\n-                            {\n-                                \"key\": \"clickhouse_event_count_last_month\",\n-                                \"metric\": \"Events recorded last month\",\n-                                \"value\": 0\n-                            },\n-                            {\n-                                \"key\": \"clickhouse_event_count_month_to_date\",\n-                                \"metric\": \"Events recorded month to date\",\n-                                \"value\": 11763\n-                            },\n-                            {\n-                                \"key\": \"clickhouse_disk_0_free_space\",\n-                                \"metric\": \"Clickhouse disk free space\",\n-                                \"value\": \"127.88 GiB\"\n-                            },\n-                            {\n-                                \"key\": \"clickhouse_disk_0_total_space\",\n-                                \"metric\": \"Clickhouse disk total space\",\n-                                \"value\": \"149.36 GiB\"\n-                            },\n-                            {\n-                                \"key\": \"clickhouse_table_sizes\",\n-                                \"metric\": \"Clickhouse table sizes\",\n-                                \"value\": \"\",\n-                                \"subrows\": {\n-                                    \"columns\": [\"Table\", \"Size\", \"Rows\"],\n-                                    \"rows\": [\n-                                        [\"asynchronous_metric_log\", \"89.87 MiB\", 75097041],\n-                                        [\"text_log\", \"636.12 MiB\", 33915479],\n-                                        [\"query_thread_log\", \"35.27 MiB\", 408173],\n-                                        [\"query_log\", \"21.38 MiB\", 179742],\n-                                        [\"metric_log\", \"17.13 MiB\", 163017],\n-                                        [\"events\", \"6.85 MiB\", 11763],\n-                                        [\"plugin_log_entries\", \"9.63 KiB\", 112],\n-                                        [\"infi_clickhouse_orm_migrations\", \"1.48 KiB\", 42],\n-                                        [\"groups\", \"982.00 B\", 3],\n-                                        [\"person_distinct_id2\", \"844.00 B\", 3],\n-                                        [\"person_distinct_id\", \"735.00 B\", 3],\n-                                        [\"person\", \"1.21 KiB\", 2]\n-                                    ]\n-                                }\n-                            },\n-                            {\n-                                \"key\": \"clickhouse_system_metrics\",\n-                                \"metric\": \"Clickhouse system metrics\",\n-                                \"value\": \"\",\n-                                \"subrows\": {\n-                                    \"columns\": [\"Metric\", \"Value\", \"Description\"],\n-                                    \"rows\": [\n-                                        [\n-                                            \"ActiveAsyncDrainedConnections\",\n-                                            0,\n-                                            \"Number of active connections drained asynchronously.\"\n-                                        ],\n-                                        [\n-                                            \"ActiveSyncDrainedConnections\",\n-                                            0,\n-                                            \"Number of active connections drained synchronously.\"\n-                                        ],\n-                                        [\"AsyncDrainedConnections\", 0, \"Number of connections drained asynchronously.\"],\n-                                        [\"AsynchronousMetricsCalculationTimeSpent\", 0.001203584],\n-                                        [\n-                                            \"BackgroundBufferFlushSchedulePoolTask\",\n-                                            0,\n-                                            \"Number of active tasks in BackgroundBufferFlushSchedulePool. This pool is used for periodic Buffer flushes\"\n-                                        ],\n-                                        [\n-                                            \"BackgroundDistributedSchedulePoolTask\",\n-                                            0,\n-                                            \"Number of active tasks in BackgroundDistributedSchedulePool. This pool is used for distributed sends that is done in background.\"\n-                                        ],\n-                                        [\n-                                            \"BackgroundFetchesPoolTask\",\n-                                            0,\n-                                            \"Number of active tasks in BackgroundFetchesPool\"\n-                                        ],\n-                                        [\n-                                            \"BackgroundMessageBrokerSchedulePoolTask\",\n-                                            6,\n-                                            \"Number of active tasks in BackgroundProcessingPool for message streaming\"\n-                                        ],\n-                                        [\n-                                            \"BackgroundMovePoolTask\",\n-                                            0,\n-                                            \"Number of active tasks in BackgroundProcessingPool for moves\"\n-                                        ],\n-                                        [\n-                                            \"BackgroundPoolTask\",\n-                                            0,\n-                                            \"Number of active tasks in BackgroundProcessingPool (merges, mutations, or replication queue bookkeeping)\"\n-                                        ],\n-                                        [\n-                                            \"BackgroundSchedulePoolTask\",\n-                                            0,\n-                                            \"Number of active tasks in BackgroundSchedulePool. This pool is used for periodic ReplicatedMergeTree tasks, like cleaning old data parts, altering data parts, replica re-initialization, etc.\"\n-                                        ],\n-                                        [\"BlockActiveTime_nbd0\", 0],\n-                                        [\"BlockActiveTime_nbd1\", 0],\n-                                        [\"BlockActiveTime_nbd10\", 0],\n-                                        [\"BlockActiveTime_nbd11\", 0],\n-                                        [\"BlockActiveTime_nbd12\", 0],\n-                                        [\"BlockActiveTime_nbd13\", 0],\n-                                        [\"BlockActiveTime_nbd14\", 0],\n-                                        [\"BlockActiveTime_nbd15\", 0],\n-                                        [\"BlockActiveTime_nbd2\", 0],\n-                                        [\"BlockActiveTime_nbd3\", 0],\n-                                        [\"BlockActiveTime_nbd4\", 0],\n-                                        [\"BlockActiveTime_nbd5\", 0],\n-                                        [\"BlockActiveTime_nbd6\", 0],\n-                                        [\"BlockActiveTime_nbd7\", 0],\n-                                        [\"BlockActiveTime_nbd8\", 0],\n-                                        [\"BlockActiveTime_nbd9\", 0],\n-                                        [\"BlockActiveTime_vda\", 0],\n-                                        [\"BlockDiscardBytes_nbd0\", 0],\n-                                        [\"BlockDiscardBytes_nbd1\", 0],\n-                                        [\"BlockDiscardBytes_nbd10\", 0],\n-                                        [\"BlockDiscardBytes_nbd11\", 0],\n-                                        [\"BlockDiscardBytes_nbd12\", 0],\n-                                        [\"BlockDiscardBytes_nbd13\", 0],\n-                                        [\"BlockDiscardBytes_nbd14\", 0],\n-                                        [\"BlockDiscardBytes_nbd15\", 0],\n-                                        [\"BlockDiscardBytes_nbd2\", 0],\n-                                        [\"BlockDiscardBytes_nbd3\", 0],\n-                                        [\"BlockDiscardBytes_nbd4\", 0],\n-                                        [\"BlockDiscardBytes_nbd5\", 0],\n-                                        [\"BlockDiscardBytes_nbd6\", 0],\n-                                        [\"BlockDiscardBytes_nbd7\", 0],\n-                                        [\"BlockDiscardBytes_nbd8\", 0],\n-                                        [\"BlockDiscardBytes_nbd9\", 0],\n-                                        [\"BlockDiscardBytes_vda\", 0],\n-                                        [\"BlockDiscardMerges_nbd0\", 0],\n-                                        [\"BlockDiscardMerges_nbd1\", 0],\n-                                        [\"BlockDiscardMerges_nbd10\", 0],\n-                                        [\"BlockDiscardMerges_nbd11\", 0],\n-                                        [\"BlockDiscardMerges_nbd12\", 0],\n-                                        [\"BlockDiscardMerges_nbd13\", 0],\n-                                        [\"BlockDiscardMerges_nbd14\", 0],\n-                                        [\"BlockDiscardMerges_nbd15\", 0],\n-                                        [\"BlockDiscardMerges_nbd2\", 0],\n-                                        [\"BlockDiscardMerges_nbd3\", 0],\n-                                        [\"BlockDiscardMerges_nbd4\", 0],\n-                                        [\"BlockDiscardMerges_nbd5\", 0],\n-                                        [\"BlockDiscardMerges_nbd6\", 0],\n-                                        [\"BlockDiscardMerges_nbd7\", 0],\n-                                        [\"BlockDiscardMerges_nbd8\", 0],\n-                                        [\"BlockDiscardMerges_nbd9\", 0],\n-                                        [\"BlockDiscardMerges_vda\", 0],\n-                                        [\"BlockDiscardOps_nbd0\", 0],\n-                                        [\"BlockDiscardOps_nbd1\", 0],\n-                                        [\"BlockDiscardOps_nbd10\", 0],\n-                                        [\"BlockDiscardOps_nbd11\", 0],\n-                                        [\"BlockDiscardOps_nbd12\", 0],\n-                                        [\"BlockDiscardOps_nbd13\", 0],\n-                                        [\"BlockDiscardOps_nbd14\", 0],\n-                                        [\"BlockDiscardOps_nbd15\", 0],\n-                                        [\"BlockDiscardOps_nbd2\", 0],\n-                                        [\"BlockDiscardOps_nbd3\", 0],\n-                                        [\"BlockDiscardOps_nbd4\", 0],\n-                                        [\"BlockDiscardOps_nbd5\", 0],\n-                                        [\"BlockDiscardOps_nbd6\", 0],\n-                                        [\"BlockDiscardOps_nbd7\", 0],\n-                                        [\"BlockDiscardOps_nbd8\", 0],\n-                                        [\"BlockDiscardOps_nbd9\", 0],\n-                                        [\"BlockDiscardOps_vda\", 0],\n-                                        [\"BlockDiscardTime_nbd0\", 0],\n-                                        [\"BlockDiscardTime_nbd1\", 0],\n-                                        [\"BlockDiscardTime_nbd10\", 0],\n-                                        [\"BlockDiscardTime_nbd11\", 0],\n-                                        [\"BlockDiscardTime_nbd12\", 0],\n-                                        [\"BlockDiscardTime_nbd13\", 0],\n-                                        [\"BlockDiscardTime_nbd14\", 0],\n-                                        [\"BlockDiscardTime_nbd15\", 0],\n-                                        [\"BlockDiscardTime_nbd2\", 0],\n-                                        [\"BlockDiscardTime_nbd3\", 0],\n-                                        [\"BlockDiscardTime_nbd4\", 0],\n-                                        [\"BlockDiscardTime_nbd5\", 0],\n-                                        [\"BlockDiscardTime_nbd6\", 0],\n-                                        [\"BlockDiscardTime_nbd7\", 0],\n-                                        [\"BlockDiscardTime_nbd8\", 0],\n-                                        [\"BlockDiscardTime_nbd9\", 0],\n-                                        [\"BlockDiscardTime_vda\", 0],\n-                                        [\"BlockInFlightOps_nbd0\", 0],\n-                                        [\"BlockInFlightOps_nbd1\", 0],\n-                                        [\"BlockInFlightOps_nbd10\", 0],\n-                                        [\"BlockInFlightOps_nbd11\", 0],\n-                                        [\"BlockInFlightOps_nbd12\", 0],\n-                                        [\"BlockInFlightOps_nbd13\", 0],\n-                                        [\"BlockInFlightOps_nbd14\", 0],\n-                                        [\"BlockInFlightOps_nbd15\", 0],\n-                                        [\"BlockInFlightOps_nbd2\", 0],\n-                                        [\"BlockInFlightOps_nbd3\", 0],\n-                                        [\"BlockInFlightOps_nbd4\", 0],\n-                                        [\"BlockInFlightOps_nbd5\", 0],\n-                                        [\"BlockInFlightOps_nbd6\", 0],\n-                                        [\"BlockInFlightOps_nbd7\", 0],\n-                                        [\"BlockInFlightOps_nbd8\", 0],\n-                                        [\"BlockInFlightOps_nbd9\", 0],\n-                                        [\"BlockInFlightOps_vda\", 0],\n-                                        [\"BlockQueueTime_nbd0\", 0],\n-                                        [\"BlockQueueTime_nbd1\", 0],\n-                                        [\"BlockQueueTime_nbd10\", 0],\n-                                        [\"BlockQueueTime_nbd11\", 0],\n-                                        [\"BlockQueueTime_nbd12\", 0],\n-                                        [\"BlockQueueTime_nbd13\", 0],\n-                                        [\"BlockQueueTime_nbd14\", 0],\n-                                        [\"BlockQueueTime_nbd15\", 0],\n-                                        [\"BlockQueueTime_nbd2\", 0],\n-                                        [\"BlockQueueTime_nbd3\", 0],\n-                                        [\"BlockQueueTime_nbd4\", 0],\n-                                        [\"BlockQueueTime_nbd5\", 0],\n-                                        [\"BlockQueueTime_nbd6\", 0],\n-                                        [\"BlockQueueTime_nbd7\", 0],\n-                                        [\"BlockQueueTime_nbd8\", 0],\n-                                        [\"BlockQueueTime_nbd9\", 0],\n-                                        [\"BlockQueueTime_vda\", 0],\n-                                        [\"BlockReadBytes_nbd0\", 0],\n-                                        [\"BlockReadBytes_nbd1\", 0],\n-                                        [\"BlockReadBytes_nbd10\", 0],\n-                                        [\"BlockReadBytes_nbd11\", 0],\n-                                        [\"BlockReadBytes_nbd12\", 0],\n-                                        [\"BlockReadBytes_nbd13\", 0],\n-                                        [\"BlockReadBytes_nbd14\", 0],\n-                                        [\"BlockReadBytes_nbd15\", 0],\n-                                        [\"BlockReadBytes_nbd2\", 0],\n-                                        [\"BlockReadBytes_nbd3\", 0],\n-                                        [\"BlockReadBytes_nbd4\", 0],\n-                                        [\"BlockReadBytes_nbd5\", 0],\n-                                        [\"BlockReadBytes_nbd6\", 0],\n-                                        [\"BlockReadBytes_nbd7\", 0],\n-                                        [\"BlockReadBytes_nbd8\", 0],\n-                                        [\"BlockReadBytes_nbd9\", 0],\n-                                        [\"BlockReadBytes_vda\", 0],\n-                                        [\"BlockReadMerges_nbd0\", 0],\n-                                        [\"BlockReadMerges_nbd1\", 0],\n-                                        [\"BlockReadMerges_nbd10\", 0],\n-                                        [\"BlockReadMerges_nbd11\", 0],\n-                                        [\"BlockReadMerges_nbd12\", 0],\n-                                        [\"BlockReadMerges_nbd13\", 0],\n-                                        [\"BlockReadMerges_nbd14\", 0],\n-                                        [\"BlockReadMerges_nbd15\", 0],\n-                                        [\"BlockReadMerges_nbd2\", 0],\n-                                        [\"BlockReadMerges_nbd3\", 0],\n-                                        [\"BlockReadMerges_nbd4\", 0],\n-                                        [\"BlockReadMerges_nbd5\", 0],\n-                                        [\"BlockReadMerges_nbd6\", 0],\n-                                        [\"BlockReadMerges_nbd7\", 0],\n-                                        [\"BlockReadMerges_nbd8\", 0],\n-                                        [\"BlockReadMerges_nbd9\", 0],\n-                                        [\"BlockReadMerges_vda\", 0],\n-                                        [\"BlockReadOps_nbd0\", 0],\n-                                        [\"BlockReadOps_nbd1\", 0],\n-                                        [\"BlockReadOps_nbd10\", 0],\n-                                        [\"BlockReadOps_nbd11\", 0],\n-                                        [\"BlockReadOps_nbd12\", 0],\n-                                        [\"BlockReadOps_nbd13\", 0],\n-                                        [\"BlockReadOps_nbd14\", 0],\n-                                        [\"BlockReadOps_nbd15\", 0],\n-                                        [\"BlockReadOps_nbd2\", 0],\n-                                        [\"BlockReadOps_nbd3\", 0],\n-                                        [\"BlockReadOps_nbd4\", 0],\n-                                        [\"BlockReadOps_nbd5\", 0],\n-                                        [\"BlockReadOps_nbd6\", 0],\n-                                        [\"BlockReadOps_nbd7\", 0],\n-                                        [\"BlockReadOps_nbd8\", 0],\n-                                        [\"BlockReadOps_nbd9\", 0],\n-                                        [\"BlockReadOps_vda\", 0],\n-                                        [\"BlockReadTime_nbd0\", 0],\n-                                        [\"BlockReadTime_nbd1\", 0],\n-                                        [\"BlockReadTime_nbd10\", 0],\n-                                        [\"BlockReadTime_nbd11\", 0],\n-                                        [\"BlockReadTime_nbd12\", 0],\n-                                        [\"BlockReadTime_nbd13\", 0],\n-                                        [\"BlockReadTime_nbd14\", 0],\n-                                        [\"BlockReadTime_nbd15\", 0],\n-                                        [\"BlockReadTime_nbd2\", 0],\n-                                        [\"BlockReadTime_nbd3\", 0],\n-                                        [\"BlockReadTime_nbd4\", 0],\n-                                        [\"BlockReadTime_nbd5\", 0],\n-                                        [\"BlockReadTime_nbd6\", 0],\n-                                        [\"BlockReadTime_nbd7\", 0],\n-                                        [\"BlockReadTime_nbd8\", 0],\n-                                        [\"BlockReadTime_nbd9\", 0],\n-                                        [\"BlockReadTime_vda\", 0],\n-                                        [\"BlockWriteBytes_nbd0\", 0],\n-                                        [\"BlockWriteBytes_nbd1\", 0],\n-                                        [\"BlockWriteBytes_nbd10\", 0],\n-                                        [\"BlockWriteBytes_nbd11\", 0],\n-                                        [\"BlockWriteBytes_nbd12\", 0],\n-                                        [\"BlockWriteBytes_nbd13\", 0],\n-                                        [\"BlockWriteBytes_nbd14\", 0],\n-                                        [\"BlockWriteBytes_nbd15\", 0],\n-                                        [\"BlockWriteBytes_nbd2\", 0],\n-                                        [\"BlockWriteBytes_nbd3\", 0],\n-                                        [\"BlockWriteBytes_nbd4\", 0],\n-                                        [\"BlockWriteBytes_nbd5\", 0],\n-                                        [\"BlockWriteBytes_nbd6\", 0],\n-                                        [\"BlockWriteBytes_nbd7\", 0],\n-                                        [\"BlockWriteBytes_nbd8\", 0],\n-                                        [\"BlockWriteBytes_nbd9\", 0],\n-                                        [\"BlockWriteBytes_vda\", 0],\n-                                        [\"BlockWriteMerges_nbd0\", 0],\n-                                        [\"BlockWriteMerges_nbd1\", 0],\n-                                        [\"BlockWriteMerges_nbd10\", 0],\n-                                        [\"BlockWriteMerges_nbd11\", 0],\n-                                        [\"BlockWriteMerges_nbd12\", 0],\n-                                        [\"BlockWriteMerges_nbd13\", 0],\n-                                        [\"BlockWriteMerges_nbd14\", 0],\n-                                        [\"BlockWriteMerges_nbd15\", 0],\n-                                        [\"BlockWriteMerges_nbd2\", 0],\n-                                        [\"BlockWriteMerges_nbd3\", 0],\n-                                        [\"BlockWriteMerges_nbd4\", 0],\n-                                        [\"BlockWriteMerges_nbd5\", 0],\n-                                        [\"BlockWriteMerges_nbd6\", 0],\n-                                        [\"BlockWriteMerges_nbd7\", 0],\n-                                        [\"BlockWriteMerges_nbd8\", 0],\n-                                        [\"BlockWriteMerges_nbd9\", 0],\n-                                        [\"BlockWriteMerges_vda\", 0],\n-                                        [\"BlockWriteOps_nbd0\", 0],\n-                                        [\"BlockWriteOps_nbd1\", 0],\n-                                        [\"BlockWriteOps_nbd10\", 0],\n-                                        [\"BlockWriteOps_nbd11\", 0],\n-                                        [\"BlockWriteOps_nbd12\", 0],\n-                                        [\"BlockWriteOps_nbd13\", 0],\n-                                        [\"BlockWriteOps_nbd14\", 0],\n-                                        [\"BlockWriteOps_nbd15\", 0],\n-                                        [\"BlockWriteOps_nbd2\", 0],\n-                                        [\"BlockWriteOps_nbd3\", 0],\n-                                        [\"BlockWriteOps_nbd4\", 0],\n-                                        [\"BlockWriteOps_nbd5\", 0],\n-                                        [\"BlockWriteOps_nbd6\", 0],\n-                                        [\"BlockWriteOps_nbd7\", 0],\n-                                        [\"BlockWriteOps_nbd8\", 0],\n-                                        [\"BlockWriteOps_nbd9\", 0],\n-                                        [\"BlockWriteOps_vda\", 0],\n-                                        [\"BlockWriteTime_nbd0\", 0],\n-                                        [\"BlockWriteTime_nbd1\", 0],\n-                                        [\"BlockWriteTime_nbd10\", 0],\n-                                        [\"BlockWriteTime_nbd11\", 0],\n-                                        [\"BlockWriteTime_nbd12\", 0],\n-                                        [\"BlockWriteTime_nbd13\", 0],\n-                                        [\"BlockWriteTime_nbd14\", 0],\n-                                        [\"BlockWriteTime_nbd15\", 0],\n-                                        [\"BlockWriteTime_nbd2\", 0],\n-                                        [\"BlockWriteTime_nbd3\", 0],\n-                                        [\"BlockWriteTime_nbd4\", 0],\n-                                        [\"BlockWriteTime_nbd5\", 0],\n-                                        [\"BlockWriteTime_nbd6\", 0],\n-                                        [\"BlockWriteTime_nbd7\", 0],\n-                                        [\"BlockWriteTime_nbd8\", 0],\n-                                        [\"BlockWriteTime_nbd9\", 0],\n-                                        [\"BlockWriteTime_vda\", 0],\n-                                        [\n-                                            \"BrokenDistributedFilesToInsert\",\n-                                            0,\n-                                            \"Number of files for asynchronous insertion into Distributed tables that has been marked as broken. This metric will starts from 0 on start. Number of files for every shard is summed.\"\n-                                        ],\n-                                        [\n-                                            \"CacheDictionaryUpdateQueueBatches\",\n-                                            0,\n-                                            \"Number of 'batches' (a set of keys) in update queue in CacheDictionaries.\"\n-                                        ],\n-                                        [\n-                                            \"CacheDictionaryUpdateQueueKeys\",\n-                                            0,\n-                                            \"Exact number of keys in update queue in CacheDictionaries.\"\n-                                        ],\n-                                        [\n-                                            \"ContextLockWait\",\n-                                            0,\n-                                            \"Number of threads waiting for lock in Context. This is global lock.\"\n-                                        ],\n-                                        [\n-                                            \"DelayedInserts\",\n-                                            0,\n-                                            \"Number of INSERT queries that are throttled due to high number of active data parts for partition in a MergeTree table.\"\n-                                        ],\n-                                        [\n-                                            \"DictCacheRequests\",\n-                                            0,\n-                                            \"Number of requests in fly to data sources of dictionaries of cache type.\"\n-                                        ],\n-                                        [\"DiskAvailable_default\", 137312858112],\n-                                        [\n-                                            \"DiskSpaceReservedForMerge\",\n-                                            0,\n-                                            \"Disk space reserved for currently running background merges. It is slightly more than the total size of currently merging parts.\"\n-                                        ],\n-                                        [\"DiskTotal_default\", 160377946112],\n-                                        [\"DiskUnreserved_default\", 137312858112],\n-                                        [\"DiskUsed_default\", 23065088000],\n-                                        [\n-                                            \"DistributedFilesToInsert\",\n-                                            0,\n-                                            \"Number of pending files to process for asynchronous insertion into Distributed tables. Number of files for every shard is summed.\"\n-                                        ],\n-                                        [\n-                                            \"DistributedSend\",\n-                                            0,\n-                                            \"Number of connections to remote servers sending data that was INSERTed into Distributed tables. Both synchronous and asynchronous mode.\"\n-                                        ],\n-                                        [\"EphemeralNode\", 0, \"Number of ephemeral nodes hold in ZooKeeper.\"],\n-                                        [\"FilesystemLogsPathAvailableBytes\", 137312858112],\n-                                        [\"FilesystemLogsPathAvailableINodes\", 9812794],\n-                                        [\"FilesystemLogsPathTotalBytes\", 160377946112],\n-                                        [\"FilesystemLogsPathTotalINodes\", 9961472],\n-                                        [\"FilesystemLogsPathUsedBytes\", 23065088000],\n-                                        [\"FilesystemLogsPathUsedINodes\", 148678],\n-                                        [\"FilesystemMainPathAvailableBytes\", 137312858112],\n-                                        [\"FilesystemMainPathAvailableINodes\", 9812794],\n-                                        [\"FilesystemMainPathTotalBytes\", 160377946112],\n-                                        [\"FilesystemMainPathTotalINodes\", 9961472],\n-                                        [\"FilesystemMainPathUsedBytes\", 23065088000],\n-                                        [\"FilesystemMainPathUsedINodes\", 148678],\n-                                        [\"GlobalThread\", 193, \"Number of threads in global thread pool.\"],\n-                                        [\n-                                            \"GlobalThreadActive\",\n-                                            164,\n-                                            \"Number of threads in global thread pool running a task.\"\n-                                        ],\n-                                        [\"HTTPConnection\", 0, \"Number of connections to HTTP server\"],\n-                                        [\"HTTPThreads\", 1],\n-                                        [\n-                                            \"InterserverConnection\",\n-                                            0,\n-                                            \"Number of connections from other replicas to fetch parts\"\n-                                        ],\n-                                        [\"InterserverThreads\", 0],\n-                                        [\"Jitter\", 0.0041],\n-                                        [\"LoadAverage1\", 0.15],\n-                                        [\"LoadAverage15\", 0.25],\n-                                        [\"LoadAverage5\", 0.3],\n-                                        [\n-                                            \"LocalThread\",\n-                                            0,\n-                                            \"Number of threads in local thread pools. The threads in local thread pools are taken from the global thread pool.\"\n-                                        ],\n-                                        [\n-                                            \"LocalThreadActive\",\n-                                            0,\n-                                            \"Number of threads in local thread pools running a task.\"\n-                                        ],\n-                                        [\"MMapCacheCells\", 0],\n-                                        [\"MMappedFileBytes\", 1958451168, \"Sum size of mmapped file regions.\"],\n-                                        [\"MMappedFiles\", 7, \"Total number of mmapped files.\"],\n-                                        [\"MarkCacheBytes\", 742512],\n-                                        [\"MarkCacheFiles\", 1600],\n-                                        [\"MaxDDLEntryID\", 1474, \"Max processed DDL entry of DDLWorker.\"],\n-                                        [\"MaxPartCountForPartition\", 13],\n-                                        [\n-                                            \"MaxPushedDDLEntryID\",\n-                                            1474,\n-                                            \"Max DDL entry of DDLWorker that pushed to zookeeper.\"\n-                                        ],\n-                                        [\"MemoryCode\", 265568256],\n-                                        [\"MemoryDataAndStack\", 21082824704],\n-                                        [\"MemoryResident\", 699920384],\n-                                        [\"MemoryShared\", 302919680],\n-                                        [\n-                                            \"MemoryTracking\",\n-                                            699946320,\n-                                            \"Total amount of memory (bytes) allocated by the server.\"\n-                                        ],\n-                                        [\"MemoryVirtual\", 23315181568],\n-                                        [\"Merge\", 0, \"Number of executing background merges\"],\n-                                        [\"MySQLConnection\", 0, \"Number of client connections using MySQL protocol\"],\n-                                        [\"MySQLThreads\", 0],\n-                                        [\n-                                            \"NetworkReceive\",\n-                                            0,\n-                                            \"Number of threads receiving data from network. Only ClickHouse-related network interaction is included, not by 3rd party libraries.\"\n-                                        ],\n-                                        [\"NetworkReceiveBytes_eth0\", 3776],\n-                                        [\"NetworkReceiveBytes_ip6tnl0\", 0],\n-                                        [\"NetworkReceiveBytes_tunl0\", 0],\n-                                        [\"NetworkReceiveDrop_eth0\", 0],\n-                                        [\"NetworkReceiveDrop_ip6tnl0\", 0],\n-                                        [\"NetworkReceiveDrop_tunl0\", 0],\n-                                        [\"NetworkReceiveErrors_eth0\", 0],\n-                                        [\"NetworkReceiveErrors_ip6tnl0\", 0],\n-                                        [\"NetworkReceiveErrors_tunl0\", 0],\n-                                        [\"NetworkReceivePackets_eth0\", 31],\n-                                        [\"NetworkReceivePackets_ip6tnl0\", 0],\n-                                        [\"NetworkReceivePackets_tunl0\", 0],\n-                                        [\n-                                            \"NetworkSend\",\n-                                            0,\n-                                            \"Number of threads sending data to network. Only ClickHouse-related network interaction is included, not by 3rd party libraries.\"\n-                                        ],\n-                                        [\"NetworkSendBytes_eth0\", 4101],\n-                                        [\"NetworkSendBytes_ip6tnl0\", 0],\n-                                        [\"NetworkSendBytes_tunl0\", 0],\n-                                        [\"NetworkSendDrop_eth0\", 0],\n-                                        [\"NetworkSendDrop_ip6tnl0\", 0],\n-                                        [\"NetworkSendDrop_tunl0\", 0],\n-                                        [\"NetworkSendErrors_eth0\", 0],\n-                                        [\"NetworkSendErrors_ip6tnl0\", 0],\n-                                        [\"NetworkSendErrors_tunl0\", 0],\n-                                        [\"NetworkSendPackets_eth0\", 24],\n-                                        [\"NetworkSendPackets_ip6tnl0\", 0],\n-                                        [\"NetworkSendPackets_tunl0\", 0],\n-                                        [\"NumberOfDatabases\", 4],\n-                                        [\"NumberOfTables\", 128],\n-                                        [\"OSContextSwitches\", 1932],\n-                                        [\"OSGuestNiceTime\", 0],\n-                                        [\"OSGuestNiceTimeCPU0\", 0],\n-                                        [\"OSGuestNiceTimeCPU1\", 0],\n-                                        [\"OSGuestNiceTimeCPU2\", 0],\n-                                        [\"OSGuestNiceTimeCPU3\", 0],\n-                                        [\"OSGuestNiceTimeCPU4\", 0],\n-                                        [\"OSGuestNiceTimeCPU5\", 0],\n-                                        [\"OSGuestNiceTimeCPU6\", 0],\n-                                        [\"OSGuestNiceTimeCPU7\", 0],\n-                                        [\"OSGuestNiceTimeNormalized\", 0],\n-                                        [\"OSGuestTime\", 0],\n-                                        [\"OSGuestTimeCPU0\", 0],\n-                                        [\"OSGuestTimeCPU1\", 0],\n-                                        [\"OSGuestTimeCPU2\", 0],\n-                                        [\"OSGuestTimeCPU3\", 0],\n-                                        [\"OSGuestTimeCPU4\", 0],\n-                                        [\"OSGuestTimeCPU5\", 0],\n-                                        [\"OSGuestTimeCPU6\", 0],\n-                                        [\"OSGuestTimeCPU7\", 0],\n-                                        [\"OSGuestTimeNormalized\", 0],\n-                                        [\"OSIOWaitTime\", 0],\n-                                        [\"OSIOWaitTimeCPU0\", 0],\n-                                        [\"OSIOWaitTimeCPU1\", 0],\n-                                        [\"OSIOWaitTimeCPU2\", 0],\n-                                        [\"OSIOWaitTimeCPU3\", 0],\n-                                        [\"OSIOWaitTimeCPU4\", 0],\n-                                        [\"OSIOWaitTimeCPU5\", 0],\n-                                        [\"OSIOWaitTimeCPU6\", 0],\n-                                        [\"OSIOWaitTimeCPU7\", 0],\n-                                        [\"OSIOWaitTimeNormalized\", 0],\n-                                        [\"OSIdleTime\", 7.688477243302461],\n-                                        [\"OSIdleTimeCPU0\", 0.936161736878797],\n-                                        [\"OSIdleTimeCPU1\", 0.9660392391196096],\n-                                        [\"OSIdleTimeCPU2\", 0.9759984065332139],\n-                                        [\"OSIdleTimeCPU3\", 0.9660392391196096],\n-                                        [\"OSIdleTimeCPU4\", 0.9859575739468182],\n-                                        [\"OSIdleTimeCPU5\", 0.9759984065332139],\n-                                        [\"OSIdleTimeCPU6\", 0.9461209042924013],\n-                                        [\"OSIdleTimeCPU7\", 0.9461209042924013],\n-                                        [\"OSIdleTimeNormalized\", 0.9610596554128076],\n-                                        [\"OSInterrupts\", 1381],\n-                                        [\"OSIrqTime\", 0],\n-                                        [\"OSIrqTimeCPU0\", 0],\n-                                        [\"OSIrqTimeCPU1\", 0],\n-                                        [\"OSIrqTimeCPU2\", 0],\n-                                        [\"OSIrqTimeCPU3\", 0],\n-                                        [\"OSIrqTimeCPU4\", 0],\n-                                        [\"OSIrqTimeCPU5\", 0],\n-                                        [\"OSIrqTimeCPU6\", 0],\n-                                        [\"OSIrqTimeCPU7\", 0],\n-                                        [\"OSIrqTimeNormalized\", 0],\n-                                        [\"OSMemoryAvailable\", 3126497280],\n-                                        [\"OSMemoryBuffers\", 564826112],\n-                                        [\"OSMemoryCached\", 2362413056],\n-                                        [\"OSMemoryFreePlusCached\", 2661896192],\n-                                        [\"OSMemoryFreeWithoutCached\", 299483136],\n-                                        [\"OSMemorySwapCached\", 150097920],\n-                                        [\"OSMemoryTotal\", 5172416512],\n-                                        [\"OSNiceTime\", 0],\n-                                        [\"OSNiceTimeCPU0\", 0],\n-                                        [\"OSNiceTimeCPU1\", 0],\n-                                        [\"OSNiceTimeCPU2\", 0],\n-                                        [\"OSNiceTimeCPU3\", 0],\n-                                        [\"OSNiceTimeCPU4\", 0],\n-                                        [\"OSNiceTimeCPU5\", 0],\n-                                        [\"OSNiceTimeCPU6\", 0],\n-                                        [\"OSNiceTimeCPU7\", 0],\n-                                        [\"OSNiceTimeNormalized\", 0],\n-                                        [\"OSOpenFiles\", 2208],\n-                                        [\"OSProcessesBlocked\", 0],\n-                                        [\"OSProcessesCreated\", 1],\n-                                        [\"OSProcessesRunning\", 3],\n-                                        [\"OSSoftIrqTime\", 0.009959167413604223],\n-                                        [\"OSSoftIrqTimeCPU0\", 0.009959167413604223],\n-                                        [\"OSSoftIrqTimeCPU1\", 0.009959167413604223],\n-                                        [\"OSSoftIrqTimeCPU2\", 0],\n-                                        [\"OSSoftIrqTimeCPU3\", 0],\n-                                        [\"OSSoftIrqTimeCPU4\", 0],\n-                                        [\"OSSoftIrqTimeCPU5\", 0],\n-                                        [\"OSSoftIrqTimeCPU6\", 0],\n-                                        [\"OSSoftIrqTimeCPU7\", 0],\n-                                        [\"OSSoftIrqTimeNormalized\", 0.001244895926700528],\n-                                        [\"OSStealTime\", 0],\n-                                        [\"OSStealTimeCPU0\", 0],\n-                                        [\"OSStealTimeCPU1\", 0],\n-                                        [\"OSStealTimeCPU2\", 0],\n-                                        [\"OSStealTimeCPU3\", 0],\n-                                        [\"OSStealTimeCPU4\", 0],\n-                                        [\"OSStealTimeCPU5\", 0],\n-                                        [\"OSStealTimeCPU6\", 0],\n-                                        [\"OSStealTimeCPU7\", 0],\n-                                        [\"OSStealTimeNormalized\", 0],\n-                                        [\"OSSystemTime\", 0.04979583706802112],\n-                                        [\"OSSystemTimeCPU0\", 0],\n-                                        [\"OSSystemTimeCPU1\", 0],\n-                                        [\"OSSystemTimeCPU2\", 0],\n-                                        [\"OSSystemTimeCPU3\", 0],\n-                                        [\"OSSystemTimeCPU4\", 0],\n-                                        [\"OSSystemTimeCPU5\", 0.009959167413604223],\n-                                        [\"OSSystemTimeCPU6\", 0.009959167413604223],\n-                                        [\"OSSystemTimeCPU7\", 0.009959167413604223],\n-                                        [\"OSSystemTimeNormalized\", 0.00622447963350264],\n-                                        [\"OSThreadsRunnable\", 3],\n-                                        [\"OSThreadsTotal\", 1025],\n-                                        [\"OSUptime\", 121861.85],\n-                                        [\"OSUserTime\", 0.06971417189522956],\n-                                        [\"OSUserTimeCPU0\", 0.009959167413604223],\n-                                        [\"OSUserTimeCPU1\", 0],\n-                                        [\"OSUserTimeCPU2\", 0.009959167413604223],\n-                                        [\"OSUserTimeCPU3\", 0.009959167413604223],\n-                                        [\"OSUserTimeCPU4\", 0],\n-                                        [\"OSUserTimeCPU5\", 0.009959167413604223],\n-                                        [\"OSUserTimeCPU6\", 0.009959167413604223],\n-                                        [\"OSUserTimeCPU7\", 0.009959167413604223],\n-                                        [\"OSUserTimeNormalized\", 0.008714271486903695],\n-                                        [\"OpenFileForRead\", 31, \"Number of files open for reading\"],\n-                                        [\"OpenFileForWrite\", 0, \"Number of files open for writing\"],\n-                                        [\"PartMutation\", 0, \"Number of mutations (ALTER DELETE/UPDATE)\"],\n-                                        [\n-                                            \"PartsCommitted\",\n-                                            51,\n-                                            \"Active data part, used by current and upcoming SELECTs.\"\n-                                        ],\n-                                        [\"PartsCompact\", 171, \"Compact parts.\"],\n-                                        [\n-                                            \"PartsDeleteOnDestroy\",\n-                                            0,\n-                                            \"Part was moved to another disk and should be deleted in own destructor.\"\n-                                        ],\n-                                        [\n-                                            \"PartsDeleting\",\n-                                            0,\n-                                            \"Not active data part with identity refcounter, it is deleting right now by a cleaner.\"\n-                                        ],\n-                                        [\"PartsInMemory\", 0, \"In-memory parts.\"],\n-                                        [\n-                                            \"PartsOutdated\",\n-                                            209,\n-                                            \"Not active data part, but could be used by only current SELECTs, could be deleted after SELECTs finishes.\"\n-                                        ],\n-                                        [\n-                                            \"PartsPreCommitted\",\n-                                            0,\n-                                            \"The part is in data_parts, but not used for SELECTs.\"\n-                                        ],\n-                                        [\n-                                            \"PartsTemporary\",\n-                                            0,\n-                                            \"The part is generating now, it is not in data_parts list.\"\n-                                        ],\n-                                        [\"PartsWide\", 89, \"Wide parts.\"],\n-                                        [\n-                                            \"PostgreSQLConnection\",\n-                                            0,\n-                                            \"Number of client connections using PostgreSQL protocol\"\n-                                        ],\n-                                        [\"Query\", 1, \"Number of executing queries\"],\n-                                        [\n-                                            \"QueryPreempted\",\n-                                            0,\n-                                            \"Number of queries that are stopped and waiting due to 'priority' setting.\"\n-                                        ],\n-                                        [\"QueryThread\", 0, \"Number of query processing threads\"],\n-                                        [\n-                                            \"RWLockActiveReaders\",\n-                                            19,\n-                                            \"Number of threads holding read lock in a table RWLock.\"\n-                                        ],\n-                                        [\n-                                            \"RWLockActiveWriters\",\n-                                            0,\n-                                            \"Number of threads holding write lock in a table RWLock.\"\n-                                        ],\n-                                        [\n-                                            \"RWLockWaitingReaders\",\n-                                            0,\n-                                            \"Number of threads waiting for read on a table RWLock.\"\n-                                        ],\n-                                        [\n-                                            \"RWLockWaitingWriters\",\n-                                            0,\n-                                            \"Number of threads waiting for write on a table RWLock.\"\n-                                        ],\n-                                        [\"Read\", 1, \"Number of read (read, pread, io_getevents, etc.) syscalls in fly\"],\n-                                        [\n-                                            \"ReadonlyReplica\",\n-                                            0,\n-                                            \"Number of Replicated tables that are currently in readonly state due to re-initialization after ZooKeeper session loss or due to startup without ZooKeeper configured.\"\n-                                        ],\n-                                        [\"ReplicasMaxAbsoluteDelay\", 0],\n-                                        [\"ReplicasMaxInsertsInQueue\", 0],\n-                                        [\"ReplicasMaxMergesInQueue\", 0],\n-                                        [\"ReplicasMaxQueueSize\", 0],\n-                                        [\"ReplicasMaxRelativeDelay\", 0],\n-                                        [\"ReplicasSumInsertsInQueue\", 0],\n-                                        [\"ReplicasSumMergesInQueue\", 0],\n-                                        [\"ReplicasSumQueueSize\", 0],\n-                                        [\"ReplicatedChecks\", 0, \"Number of data parts checking for consistency\"],\n-                                        [\"ReplicatedFetch\", 0, \"Number of data parts being fetched from replica\"],\n-                                        [\"ReplicatedSend\", 0, \"Number of data parts being sent to replicas\"],\n-                                        [\n-                                            \"Revision\",\n-                                            54454,\n-                                            \"Revision of the server. It is a number incremented for every release or release candidate except patch releases.\"\n-                                        ],\n-                                        [\n-                                            \"SendExternalTables\",\n-                                            0,\n-                                            \"Number of connections that are sending data for external tables to remote servers. External tables are used to implement GLOBAL IN and GLOBAL JOIN operators with distributed subqueries.\"\n-                                        ],\n-                                        [\n-                                            \"SendScalars\",\n-                                            0,\n-                                            \"Number of connections that are sending data for scalars to remote servers.\"\n-                                        ],\n-                                        [\"StorageBufferBytes\", 0, \"Number of bytes in buffers of Buffer tables\"],\n-                                        [\"StorageBufferRows\", 0, \"Number of rows in buffers of Buffer tables\"],\n-                                        [\"SyncDrainedConnections\", 0, \"Number of connections drained synchronously.\"],\n-                                        [\n-                                            \"TCPConnection\",\n-                                            2,\n-                                            \"Number of connections to TCP server (clients with native interface), also included server-server distributed query connections\"\n-                                        ],\n-                                        [\"TCPThreads\", 1],\n-                                        [\n-                                            \"TablesToDropQueueSize\",\n-                                            0,\n-                                            \"Number of dropped tables, that are waiting for background data removal.\"\n-                                        ],\n-                                        [\"TotalBytesOfMergeTreeTables\", 845776381],\n-                                        [\"TotalPartsOfMergeTreeTables\", 50],\n-                                        [\"TotalRowsOfMergeTreeTables\", 109747720],\n-                                        [\"UncompressedCacheBytes\", 0],\n-                                        [\"UncompressedCacheCells\", 0],\n-                                        [\"Uptime\", 55816],\n-                                        [\n-                                            \"VersionInteger\",\n-                                            21009002,\n-                                            \"Version of the server in a single integer number in base-1000. For example, version 11.22.33 is translated to 11022033.\"\n-                                        ],\n-                                        [\n-                                            \"Write\",\n-                                            0,\n-                                            \"Number of write (write, pwrite, io_getevents, etc.) syscalls in fly\"\n-                                        ],\n-                                        [\"ZooKeeperRequest\", 0, \"Number of requests to ZooKeeper in fly.\"],\n-                                        [\n-                                            \"ZooKeeperSession\",\n-                                            1,\n-                                            \"Number of sessions (connections) to ZooKeeper. Should be no more than one, because using more than one connection to ZooKeeper may lead to bugs due to lack of linearizability (stale reads) that ZooKeeper consistency model allows.\"\n-                                        ],\n-                                        [\"ZooKeeperWatch\", 1, \"Number of watches (event subscriptions) in ZooKeeper.\"],\n-                                        [\"jemalloc.active\", 341966848],\n-                                        [\"jemalloc.allocated\", 185910832],\n-                                        [\"jemalloc.arenas.all.dirty_purged\", 51772491],\n-                                        [\"jemalloc.arenas.all.muzzy_purged\", 49575606],\n-                                        [\"jemalloc.arenas.all.pactive\", 5218],\n-                                        [\"jemalloc.arenas.all.pdirty\", 14173],\n-                                        [\"jemalloc.arenas.all.pmuzzy\", 4],\n-                                        [\"jemalloc.background_thread.num_runs\", 0],\n-                                        [\"jemalloc.background_thread.num_threads\", 0],\n-                                        [\"jemalloc.background_thread.run_intervals\", 0],\n-                                        [\"jemalloc.epoch\", 55964],\n-                                        [\"jemalloc.mapped\", 5566038016],\n-                                        [\"jemalloc.metadata\", 38559440],\n-                                        [\"jemalloc.metadata_thp\", 0],\n-                                        [\"jemalloc.resident\", 1294598144],\n-                                        [\"jemalloc.retained\", 13224443904]\n-                                    ]\n-                                }\n-                            },\n-                            {\n-                                \"key\": \"last_event_ingested_timestamp\",\n-                                \"metric\": \"Last event ingested\",\n-                                \"value\": [\"2022-01-24T07:43:51\"]\n-                            },\n-                            {\n-                                \"key\": \"redis_alive\",\n-                                \"metric\": \"Redis alive\",\n-                                \"value\": true\n-                            },\n-                            {\n-                                \"metric\": \"Redis version\",\n-                                \"value\": \"6.2.6\"\n-                            },\n-                            {\n-                                \"metric\": \"Redis current queue depth\",\n-                                \"value\": \"0\"\n-                            },\n-                            {\n-                                \"metric\": \"Redis connected client count\",\n-                                \"value\": \"18\"\n-                            },\n-                            {\n-                                \"metric\": \"Redis memory used\",\n-                                \"value\": \"1.52MB\"\n-                            },\n-                            {\n-                                \"metric\": \"Redis memory peak\",\n-                                \"value\": \"19.72MB\"\n-                            },\n-                            {\n-                                \"metric\": \"Redis total memory available\",\n-                                \"value\": \"4.82GB\"\n-                            }\n-                        ],\n-                        \"internal_metrics\": {}\n-                    },\n-                    \"systemStatusLoading\": false,\n-                    \"queries\": null,\n-                    \"queriesLoading\": false,\n-                    \"analyzeQueryResult\": null,\n-                    \"analyzeQueryResultLoading\": false,\n-                    \"tab\": \"overview\",\n-                    \"error\": null,\n-                    \"openSections\": [\"0\"],\n-                    \"analyzeModalOpen\": false,\n-                    \"analyzeQuery\": \"\"\n-                }\n-            },\n-            \"Licenses\": {\n-                \"licenseLogic\": {\n-                    \"licenses\": [],\n-                    \"licensesLoading\": false,\n-                    \"error\": null\n-                }\n-            }\n-        },\n-        \"organization\": {\n-            \"Settings\": {\n-                \"inviteLogic\": {\n-                    \"invitedTeamMembersInternal\": [],\n-                    \"invitedTeamMembersInternalLoading\": false,\n-                    \"invites\": [],\n-                    \"invitesLoading\": false,\n-                    \"isInviteModalShown\": false,\n-                    \"invitesToSend\": [\n-                        {\n-                            \"target_email\": \"\",\n-                            \"first_name\": \"\",\n-                            \"isValid\": true\n-                        }\n-                    ]\n-                }\n-            }\n-        },\n-        \"billing\": {\n-            \"billingLogic\": {\n-                \"billing\": null,\n-                \"billingLoading\": false,\n-                \"plans\": [],\n-                \"plansLoading\": false,\n-                \"billingSubscription\": null,\n-                \"billingSubscriptionLoading\": false\n-            }\n-        },\n-        \"saved-insights\": {\n-            \"savedInsightsLogic\": {\n-                \"insights\": {\n-                    \"count\": 6,\n-                    \"next\": null,\n-                    \"previous\": null,\n-                    \"results\": [\n-                        {\n-                            \"id\": 4,\n-                            \"short_id\": \"HziQ4Wue\",\n-                            \"name\": \"Sample - Purchase conversion funnel\",\n-                            \"filters\": {\n-                                \"events\": [\n-                                    {\n-                                        \"id\": \"$pageview\",\n-                                        \"type\": \"events\",\n-                                        \"order\": 0\n-                                    },\n-                                    {\n-                                        \"id\": \"$autocapture\",\n-                                        \"name\": \"Clicked purchase button\",\n-                                        \"type\": \"events\",\n-                                        \"order\": 1,\n-                                        \"properties\": [\n-                                            {\n-                                                \"key\": \"$event_type\",\n-                                                \"type\": \"event\",\n-                                                \"value\": \"click\"\n-                                            },\n-                                            {\n-                                                \"key\": \"text\",\n-                                                \"type\": \"element\",\n-                                                \"value\": \"Purchase\"\n-                                            }\n-                                        ]\n-                                    },\n-                                    {\n-                                        \"id\": \"$autocapture\",\n-                                        \"name\": \"Submitted checkout form\",\n-                                        \"type\": \"events\",\n-                                        \"order\": 2,\n-                                        \"properties\": [\n-                                            {\n-                                                \"key\": \"$event_type\",\n-                                                \"type\": \"event\",\n-                                                \"value\": \"submit\"\n-                                            },\n-                                            {\n-                                                \"key\": \"$pathname\",\n-                                                \"type\": \"event\",\n-                                                \"value\": \"/purchase\"\n-                                            }\n-                                        ]\n-                                    },\n-                                    {\n-                                        \"id\": \"Order Completed\",\n-                                        \"name\": \"Order Completed\",\n-                                        \"type\": \"events\",\n-                                        \"order\": 3\n-                                    }\n-                                ],\n-                                \"insight\": \"FUNNELS\"\n-                            },\n-                            \"filters_hash\": \"cache_f37417cf8847f7cfcc4080347fae7756\",\n-                            \"order\": null,\n-                            \"deleted\": false,\n-                            \"dashboard\": 1,\n-                            \"dive_dashboard\": null,\n-                            \"layouts\": {\n-                                \"sm\": {\n-                                    \"h\": 5,\n-                                    \"w\": 6,\n-                                    \"x\": 6,\n-                                    \"y\": 0\n-                                },\n-                                \"xs\": {\n-                                    \"h\": 5,\n-                                    \"w\": 1,\n-                                    \"x\": 0,\n-                                    \"y\": 15,\n-                                    \"moved\": false,\n-                                    \"static\": false\n-                                }\n-                            },\n-                            \"color\": null,\n-                            \"last_refresh\": \"2022-01-20T20:17:01.224179Z\",\n-                            \"refreshing\": false,\n-                            \"result\": [\n-                                {\n-                                    \"action_id\": \"$pageview\",\n-                                    \"name\": \"$pageview\",\n-                                    \"custom_name\": null,\n-                                    \"order\": 0,\n-                                    \"people\": [],\n-                                    \"count\": 1,\n-                                    \"type\": \"events\",\n-                                    \"average_conversion_time\": null,\n-                                    \"median_conversion_time\": null,\n-                                    \"converted_people_url\": \"/api/person/funnel/?date_from=2022-01-13T00%3A00%3A00%2B00%3A00&date_to=2022-01-20T20%3A17%3A00.783805%2B00%3A00&display=FunnelViz&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+0%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+null%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%2C+%7B%22id%22%3A+%22%24autocapture%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+1%2C+%22name%22%3A+%22Clicked+purchase+button%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+null%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%7B%22key%22%3A+%22%24event_type%22%2C+%22value%22%3A+%22click%22%2C+%22operator%22%3A+null%2C+%22type%22%3A+%22event%22%7D%2C+%7B%22key%22%3A+%22text%22%2C+%22value%22%3A+%22Purchase%22%2C+%22operator%22%3A+null%2C+%22type%22%3A+%22element%22%7D%5D%7D%2C+%7B%22id%22%3A+%22%24autocapture%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+2%2C+%22name%22%3A+%22Submitted+checkout+form%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+null%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%7B%22key%22%3A+%22%24event_type%22%2C+%22value%22%3A+%22submit%22%2C+%22operator%22%3A+null%2C+%22type%22%3A+%22event%22%7D%2C+%7B%22key%22%3A+%22%24pathname%22%2C+%22value%22%3A+%22%2Fpurchase%22%2C+%22operator%22%3A+null%2C+%22type%22%3A+%22event%22%7D%5D%7D%2C+%7B%22id%22%3A+%22Order+Completed%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+3%2C+%22name%22%3A+%22Order+Completed%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+null%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&funnel_step=1&funnel_window_interval=14&funnel_window_interval_unit=day&insight=FUNNELS&interval=day&limit=100\",\n-                                    \"dropped_people_url\": null\n-                                },\n-                                {\n-                                    \"action_id\": \"$autocapture\",\n-                                    \"name\": \"$autocapture\",\n-                                    \"custom_name\": null,\n-                                    \"order\": 1,\n-                                    \"people\": [],\n-                                    \"count\": 0,\n-                                    \"type\": \"events\",\n-                                    \"average_conversion_time\": null,\n-                                    \"median_conversion_time\": null,\n-                                    \"converted_people_url\": \"/api/person/funnel/?date_from=2022-01-13T00%3A00%3A00%2B00%3A00&date_to=2022-01-20T20%3A17%3A00.783805%2B00%3A00&display=FunnelViz&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+0%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+null%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%2C+%7B%22id%22%3A+%22%24autocapture%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+1%2C+%22name%22%3A+%22Clicked+purchase+button%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+null%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%7B%22key%22%3A+%22%24event_type%22%2C+%22value%22%3A+%22click%22%2C+%22operator%22%3A+null%2C+%22type%22%3A+%22event%22%7D%2C+%7B%22key%22%3A+%22text%22%2C+%22value%22%3A+%22Purchase%22%2C+%22operator%22%3A+null%2C+%22type%22%3A+%22element%22%7D%5D%7D%2C+%7B%22id%22%3A+%22%24autocapture%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+2%2C+%22name%22%3A+%22Submitted+checkout+form%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+null%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%7B%22key%22%3A+%22%24event_type%22%2C+%22value%22%3A+%22submit%22%2C+%22operator%22%3A+null%2C+%22type%22%3A+%22event%22%7D%2C+%7B%22key%22%3A+%22%24pathname%22%2C+%22value%22%3A+%22%2Fpurchase%22%2C+%22operator%22%3A+null%2C+%22type%22%3A+%22event%22%7D%5D%7D%2C+%7B%22id%22%3A+%22Order+Completed%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+3%2C+%22name%22%3A+%22Order+Completed%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+null%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&funnel_step=2&funnel_window_interval=14&funnel_window_interval_unit=day&insight=FUNNELS&interval=day&limit=100\",\n-                                    \"dropped_people_url\": \"/api/person/funnel/?date_from=2022-01-13T00%3A00%3A00%2B00%3A00&date_to=2022-01-20T20%3A17%3A00.783805%2B00%3A00&display=FunnelViz&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+0%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+null%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%2C+%7B%22id%22%3A+%22%24autocapture%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+1%2C+%22name%22%3A+%22Clicked+purchase+button%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+null%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%7B%22key%22%3A+%22%24event_type%22%2C+%22value%22%3A+%22click%22%2C+%22operator%22%3A+null%2C+%22type%22%3A+%22event%22%7D%2C+%7B%22key%22%3A+%22text%22%2C+%22value%22%3A+%22Purchase%22%2C+%22operator%22%3A+null%2C+%22type%22%3A+%22element%22%7D%5D%7D%2C+%7B%22id%22%3A+%22%24autocapture%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+2%2C+%22name%22%3A+%22Submitted+checkout+form%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+null%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%7B%22key%22%3A+%22%24event_type%22%2C+%22value%22%3A+%22submit%22%2C+%22operator%22%3A+null%2C+%22type%22%3A+%22event%22%7D%2C+%7B%22key%22%3A+%22%24pathname%22%2C+%22value%22%3A+%22%2Fpurchase%22%2C+%22operator%22%3A+null%2C+%22type%22%3A+%22event%22%7D%5D%7D%2C+%7B%22id%22%3A+%22Order+Completed%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+3%2C+%22name%22%3A+%22Order+Completed%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+null%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&funnel_step=-2&funnel_window_interval=14&funnel_window_interval_unit=day&insight=FUNNELS&interval=day&limit=100\"\n-                                },\n-                                {\n-                                    \"action_id\": \"$autocapture\",\n-                                    \"name\": \"$autocapture\",\n-                                    \"custom_name\": null,\n-                                    \"order\": 2,\n-                                    \"people\": [],\n-                                    \"count\": 0,\n-                                    \"type\": \"events\",\n-                                    \"average_conversion_time\": null,\n-                                    \"median_conversion_time\": null,\n-                                    \"converted_people_url\": \"/api/person/funnel/?date_from=2022-01-13T00%3A00%3A00%2B00%3A00&date_to=2022-01-20T20%3A17%3A00.783805%2B00%3A00&display=FunnelViz&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+0%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+null%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%2C+%7B%22id%22%3A+%22%24autocapture%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+1%2C+%22name%22%3A+%22Clicked+purchase+button%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+null%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%7B%22key%22%3A+%22%24event_type%22%2C+%22value%22%3A+%22click%22%2C+%22operator%22%3A+null%2C+%22type%22%3A+%22event%22%7D%2C+%7B%22key%22%3A+%22text%22%2C+%22value%22%3A+%22Purchase%22%2C+%22operator%22%3A+null%2C+%22type%22%3A+%22element%22%7D%5D%7D%2C+%7B%22id%22%3A+%22%24autocapture%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+2%2C+%22name%22%3A+%22Submitted+checkout+form%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+null%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%7B%22key%22%3A+%22%24event_type%22%2C+%22value%22%3A+%22submit%22%2C+%22operator%22%3A+null%2C+%22type%22%3A+%22event%22%7D%2C+%7B%22key%22%3A+%22%24pathname%22%2C+%22value%22%3A+%22%2Fpurchase%22%2C+%22operator%22%3A+null%2C+%22type%22%3A+%22event%22%7D%5D%7D%2C+%7B%22id%22%3A+%22Order+Completed%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+3%2C+%22name%22%3A+%22Order+Completed%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+null%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&funnel_step=3&funnel_window_interval=14&funnel_window_interval_unit=day&insight=FUNNELS&interval=day&limit=100\",\n-                                    \"dropped_people_url\": \"/api/person/funnel/?date_from=2022-01-13T00%3A00%3A00%2B00%3A00&date_to=2022-01-20T20%3A17%3A00.783805%2B00%3A00&display=FunnelViz&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+0%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+null%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%2C+%7B%22id%22%3A+%22%24autocapture%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+1%2C+%22name%22%3A+%22Clicked+purchase+button%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+null%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%7B%22key%22%3A+%22%24event_type%22%2C+%22value%22%3A+%22click%22%2C+%22operator%22%3A+null%2C+%22type%22%3A+%22event%22%7D%2C+%7B%22key%22%3A+%22text%22%2C+%22value%22%3A+%22Purchase%22%2C+%22operator%22%3A+null%2C+%22type%22%3A+%22element%22%7D%5D%7D%2C+%7B%22id%22%3A+%22%24autocapture%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+2%2C+%22name%22%3A+%22Submitted+checkout+form%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+null%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%7B%22key%22%3A+%22%24event_type%22%2C+%22value%22%3A+%22submit%22%2C+%22operator%22%3A+null%2C+%22type%22%3A+%22event%22%7D%2C+%7B%22key%22%3A+%22%24pathname%22%2C+%22value%22%3A+%22%2Fpurchase%22%2C+%22operator%22%3A+null%2C+%22type%22%3A+%22event%22%7D%5D%7D%2C+%7B%22id%22%3A+%22Order+Completed%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+3%2C+%22name%22%3A+%22Order+Completed%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+null%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&funnel_step=-3&funnel_window_interval=14&funnel_window_interval_unit=day&insight=FUNNELS&interval=day&limit=100\"\n-                                },\n-                                {\n-                                    \"action_id\": \"Order Completed\",\n-                                    \"name\": \"Order Completed\",\n-                                    \"custom_name\": null,\n-                                    \"order\": 3,\n-                                    \"people\": [],\n-                                    \"count\": 0,\n-                                    \"type\": \"events\",\n-                                    \"average_conversion_time\": null,\n-                                    \"median_conversion_time\": null,\n-                                    \"converted_people_url\": \"/api/person/funnel/?date_from=2022-01-13T00%3A00%3A00%2B00%3A00&date_to=2022-01-20T20%3A17%3A00.783805%2B00%3A00&display=FunnelViz&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+0%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+null%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%2C+%7B%22id%22%3A+%22%24autocapture%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+1%2C+%22name%22%3A+%22Clicked+purchase+button%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+null%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%7B%22key%22%3A+%22%24event_type%22%2C+%22value%22%3A+%22click%22%2C+%22operator%22%3A+null%2C+%22type%22%3A+%22event%22%7D%2C+%7B%22key%22%3A+%22text%22%2C+%22value%22%3A+%22Purchase%22%2C+%22operator%22%3A+null%2C+%22type%22%3A+%22element%22%7D%5D%7D%2C+%7B%22id%22%3A+%22%24autocapture%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+2%2C+%22name%22%3A+%22Submitted+checkout+form%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+null%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%7B%22key%22%3A+%22%24event_type%22%2C+%22value%22%3A+%22submit%22%2C+%22operator%22%3A+null%2C+%22type%22%3A+%22event%22%7D%2C+%7B%22key%22%3A+%22%24pathname%22%2C+%22value%22%3A+%22%2Fpurchase%22%2C+%22operator%22%3A+null%2C+%22type%22%3A+%22event%22%7D%5D%7D%2C+%7B%22id%22%3A+%22Order+Completed%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+3%2C+%22name%22%3A+%22Order+Completed%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+null%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&funnel_step=4&funnel_window_interval=14&funnel_window_interval_unit=day&insight=FUNNELS&interval=day&limit=100\",\n-                                    \"dropped_people_url\": \"/api/person/funnel/?date_from=2022-01-13T00%3A00%3A00%2B00%3A00&date_to=2022-01-20T20%3A17%3A00.783805%2B00%3A00&display=FunnelViz&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+0%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+null%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%2C+%7B%22id%22%3A+%22%24autocapture%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+1%2C+%22name%22%3A+%22Clicked+purchase+button%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+null%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%7B%22key%22%3A+%22%24event_type%22%2C+%22value%22%3A+%22click%22%2C+%22operator%22%3A+null%2C+%22type%22%3A+%22event%22%7D%2C+%7B%22key%22%3A+%22text%22%2C+%22value%22%3A+%22Purchase%22%2C+%22operator%22%3A+null%2C+%22type%22%3A+%22element%22%7D%5D%7D%2C+%7B%22id%22%3A+%22%24autocapture%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+2%2C+%22name%22%3A+%22Submitted+checkout+form%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+null%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%7B%22key%22%3A+%22%24event_type%22%2C+%22value%22%3A+%22submit%22%2C+%22operator%22%3A+null%2C+%22type%22%3A+%22event%22%7D%2C+%7B%22key%22%3A+%22%24pathname%22%2C+%22value%22%3A+%22%2Fpurchase%22%2C+%22operator%22%3A+null%2C+%22type%22%3A+%22event%22%7D%5D%7D%2C+%7B%22id%22%3A+%22Order+Completed%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+3%2C+%22name%22%3A+%22Order+Completed%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+null%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&funnel_step=-4&funnel_window_interval=14&funnel_window_interval_unit=day&insight=FUNNELS&interval=day&limit=100\"\n-                                }\n-                            ],\n-                            \"created_at\": \"2022-01-18T14:24:55.783042Z\",\n-                            \"description\": \"This is a sample of how a user funnel could look like. It represents the number of users that performed a specific action at each step.\",\n-                            \"updated_at\": \"2022-01-21T09:38:00.658007Z\",\n-                            \"tags\": [],\n-                            \"favorited\": false,\n-                            \"saved\": false,\n-                            \"created_by\": null,\n-                            \"is_sample\": true\n-                        },\n-                        {\n-                            \"id\": 5,\n-                            \"short_id\": \"yLyu0KHl\",\n-                            \"name\": \"Users by browser (last 2 weeks)\",\n-                            \"filters\": {\n-                                \"events\": [\n-                                    {\n-                                        \"id\": \"$pageview\",\n-                                        \"math\": \"dau\",\n-                                        \"type\": \"events\"\n-                                    }\n-                                ],\n-                                \"display\": \"ActionsPie\",\n-                                \"insight\": \"TRENDS\",\n-                                \"interval\": \"day\",\n-                                \"breakdown\": \"$browser\",\n-                                \"date_from\": \"-14d\",\n-                                \"breakdown_type\": \"person\"\n-                            },\n-                            \"filters_hash\": \"cache_9cccfa1701dfbfc3cc0ae42ac0954a6a\",\n-                            \"order\": null,\n-                            \"deleted\": false,\n-                            \"dashboard\": 1,\n-                            \"dive_dashboard\": null,\n-                            \"layouts\": {\n-                                \"sm\": {\n-                                    \"h\": 5,\n-                                    \"w\": 6,\n-                                    \"x\": 6,\n-                                    \"y\": 5\n-                                },\n-                                \"xs\": {\n-                                    \"h\": 5,\n-                                    \"w\": 1,\n-                                    \"x\": 0,\n-                                    \"y\": 20,\n-                                    \"moved\": false,\n-                                    \"static\": false\n-                                }\n-                            },\n-                            \"color\": null,\n-                            \"last_refresh\": \"2022-01-20T20:17:01.120361Z\",\n-                            \"refreshing\": false,\n-                            \"result\": [\n-                                {\n-                                    \"action\": {\n-                                        \"id\": \"$pageview\",\n-                                        \"type\": \"events\",\n-                                        \"order\": null,\n-                                        \"name\": \"$pageview\",\n-                                        \"custom_name\": null,\n-                                        \"math\": \"dau\",\n-                                        \"math_property\": null,\n-                                        \"math_group_type_index\": null,\n-                                        \"properties\": []\n-                                    },\n-                                    \"label\": \"$pageview - Chrome\",\n-                                    \"count\": 0,\n-                                    \"data\": [],\n-                                    \"labels\": [],\n-                                    \"days\": [\n-                                        \"2022-01-06\",\n-                                        \"2022-01-07\",\n-                                        \"2022-01-08\",\n-                                        \"2022-01-09\",\n-                                        \"2022-01-10\",\n-                                        \"2022-01-11\",\n-                                        \"2022-01-12\",\n-                                        \"2022-01-13\",\n-                                        \"2022-01-14\",\n-                                        \"2022-01-15\",\n-                                        \"2022-01-16\",\n-                                        \"2022-01-17\",\n-                                        \"2022-01-18\",\n-                                        \"2022-01-19\",\n-                                        \"2022-01-20\"\n-                                    ],\n-                                    \"aggregated_value\": 1,\n-                                    \"filter\": {\n-                                        \"breakdown\": \"$browser\",\n-                                        \"breakdown_type\": \"person\",\n-                                        \"date_from\": \"-14d\",\n-                                        \"date_to\": \"2022-01-20T20:17:01.024319+00:00\",\n-                                        \"display\": \"ActionsPie\",\n-                                        \"events\": \"[{\\\"id\\\": \\\"$pageview\\\", \\\"type\\\": \\\"events\\\", \\\"order\\\": null, \\\"name\\\": \\\"$pageview\\\", \\\"custom_name\\\": null, \\\"math\\\": \\\"dau\\\", \\\"math_property\\\": null, \\\"math_group_type_index\\\": null, \\\"properties\\\": []}]\",\n-                                        \"insight\": \"TRENDS\",\n-                                        \"interval\": \"day\"\n-                                    },\n-                                    \"persons\": {\n-                                        \"filter\": {\n-                                            \"entity_id\": \"$pageview\",\n-                                            \"entity_type\": \"events\",\n-                                            \"breakdown_value\": \"Chrome\",\n-                                            \"breakdown_type\": \"person\"\n-                                        },\n-                                        \"url\": \"api/projects/1/actions/people/?breakdown=%24browser&breakdown_type=person&date_from=-14d&date_to=2022-01-20T20%3A17%3A01.024319%2B00%3A00&display=ActionsPie&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&breakdown_value=Chrome\"\n-                                    },\n-                                    \"breakdown_value\": \"Chrome\"\n-                                }\n-                            ],\n-                            \"created_at\": \"2022-01-18T14:24:55.785012Z\",\n-                            \"description\": \"Shows a breakdown of browsers used to visit your app per unique users in the last 14 days.\",\n-                            \"updated_at\": \"2022-01-21T09:38:00.626360Z\",\n-                            \"tags\": [],\n-                            \"favorited\": false,\n-                            \"saved\": false,\n-                            \"created_by\": null,\n-                            \"is_sample\": false\n-                        },\n-                        {\n-                            \"id\": 3,\n-                            \"short_id\": \"v32GU15M\",\n-                            \"name\": \"Repeat users over time\",\n-                            \"filters\": {\n-                                \"events\": [\n-                                    {\n-                                        \"id\": \"$pageview\",\n-                                        \"math\": \"dau\",\n-                                        \"type\": \"events\"\n-                                    }\n-                                ],\n-                                \"insight\": \"TRENDS\",\n-                                \"interval\": \"day\",\n-                                \"shown_as\": \"Stickiness\",\n-                                \"entity_id\": \"$pageview\",\n-                                \"entity_type\": \"events\"\n-                            },\n-                            \"filters_hash\": \"cache_8c11dab33b7edff57e96dfd6babe6ea5\",\n-                            \"order\": null,\n-                            \"deleted\": false,\n-                            \"dashboard\": 1,\n-                            \"dive_dashboard\": null,\n-                            \"layouts\": {\n-                                \"sm\": {\n-                                    \"h\": 5,\n-                                    \"w\": 6,\n-                                    \"x\": 0,\n-                                    \"y\": 5\n-                                },\n-                                \"xs\": {\n-                                    \"h\": 5,\n-                                    \"w\": 1,\n-                                    \"x\": 0,\n-                                    \"y\": 5,\n-                                    \"moved\": false,\n-                                    \"static\": false\n-                                }\n-                            },\n-                            \"color\": \"black\",\n-                            \"last_refresh\": \"2022-01-21T17:40:01.357360Z\",\n-                            \"refreshing\": false,\n-                            \"result\": [\n-                                {\n-                                    \"action\": {\n-                                        \"id\": \"$pageview\",\n-                                        \"type\": \"events\",\n-                                        \"order\": null,\n-                                        \"name\": \"$pageview\",\n-                                        \"custom_name\": null,\n-                                        \"math\": \"dau\",\n-                                        \"math_property\": null,\n-                                        \"math_group_type_index\": null,\n-                                        \"properties\": []\n-                                    },\n-                                    \"label\": \"$pageview\",\n-                                    \"count\": 1,\n-                                    \"data\": [0, 0, 0, 1, 0, 0, 0, 0],\n-                                    \"labels\": [\n-                                        \"1 day\",\n-                                        \"2 days\",\n-                                        \"3 days\",\n-                                        \"4 days\",\n-                                        \"5 days\",\n-                                        \"6 days\",\n-                                        \"7 days\",\n-                                        \"8 days\"\n-                                    ],\n-                                    \"days\": [1, 2, 3, 4, 5, 6, 7, 8],\n-                                    \"filter\": {\n-                                        \"date_from\": \"2022-01-14T00:00:00+00:00\",\n-                                        \"events\": \"[{\\\"id\\\": \\\"$pageview\\\", \\\"type\\\": \\\"events\\\", \\\"order\\\": null, \\\"name\\\": \\\"$pageview\\\", \\\"custom_name\\\": null, \\\"math\\\": \\\"dau\\\", \\\"math_property\\\": null, \\\"math_group_type_index\\\": null, \\\"properties\\\": []}]\",\n-                                        \"entity_id\": \"$pageview\",\n-                                        \"entity_type\": \"events\",\n-                                        \"insight\": \"TRENDS\",\n-                                        \"interval\": \"day\",\n-                                        \"shown_as\": \"Stickiness\"\n-                                    },\n-                                    \"persons_urls\": [\n-                                        {\n-                                            \"filter\": {\n-                                                \"stickiness_days\": 1,\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\"\n-                                            },\n-                                            \"url\": \"api/person/stickiness/?date_from=2022-01-14T00%3A00%3A00%2B00%3A00&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&entity_id=%24pageview&entity_type=events&insight=TRENDS&interval=day&shown_as=Stickiness&stickiness_days=1&entity_math=dau\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"stickiness_days\": 2,\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\"\n-                                            },\n-                                            \"url\": \"api/person/stickiness/?date_from=2022-01-14T00%3A00%3A00%2B00%3A00&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&entity_id=%24pageview&entity_type=events&insight=TRENDS&interval=day&shown_as=Stickiness&stickiness_days=2&entity_math=dau\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"stickiness_days\": 3,\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\"\n-                                            },\n-                                            \"url\": \"api/person/stickiness/?date_from=2022-01-14T00%3A00%3A00%2B00%3A00&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&entity_id=%24pageview&entity_type=events&insight=TRENDS&interval=day&shown_as=Stickiness&stickiness_days=3&entity_math=dau\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"stickiness_days\": 4,\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\"\n-                                            },\n-                                            \"url\": \"api/person/stickiness/?date_from=2022-01-14T00%3A00%3A00%2B00%3A00&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&entity_id=%24pageview&entity_type=events&insight=TRENDS&interval=day&shown_as=Stickiness&stickiness_days=4&entity_math=dau\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"stickiness_days\": 5,\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\"\n-                                            },\n-                                            \"url\": \"api/person/stickiness/?date_from=2022-01-14T00%3A00%3A00%2B00%3A00&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&entity_id=%24pageview&entity_type=events&insight=TRENDS&interval=day&shown_as=Stickiness&stickiness_days=5&entity_math=dau\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"stickiness_days\": 6,\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\"\n-                                            },\n-                                            \"url\": \"api/person/stickiness/?date_from=2022-01-14T00%3A00%3A00%2B00%3A00&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&entity_id=%24pageview&entity_type=events&insight=TRENDS&interval=day&shown_as=Stickiness&stickiness_days=6&entity_math=dau\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"stickiness_days\": 7,\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\"\n-                                            },\n-                                            \"url\": \"api/person/stickiness/?date_from=2022-01-14T00%3A00%3A00%2B00%3A00&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&entity_id=%24pageview&entity_type=events&insight=TRENDS&interval=day&shown_as=Stickiness&stickiness_days=7&entity_math=dau\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"stickiness_days\": 8,\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\"\n-                                            },\n-                                            \"url\": \"api/person/stickiness/?date_from=2022-01-14T00%3A00%3A00%2B00%3A00&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&entity_id=%24pageview&entity_type=events&insight=TRENDS&interval=day&shown_as=Stickiness&stickiness_days=8&entity_math=dau\"\n-                                        }\n-                                    ]\n-                                }\n-                            ],\n-                            \"created_at\": \"2022-01-18T14:24:55.781180Z\",\n-                            \"description\": \"Shows you how many users visited your app for a specific number of days (e.g. a user that visited your app twice in the time period will be shown under \\\"2 days\\\").\",\n-                            \"updated_at\": \"2022-01-21T09:38:00.615989Z\",\n-                            \"tags\": [],\n-                            \"favorited\": false,\n-                            \"saved\": false,\n-                            \"created_by\": null,\n-                            \"is_sample\": false\n-                        },\n-                        {\n-                            \"id\": 6,\n-                            \"short_id\": \"B0NDATEE\",\n-                            \"name\": \"Users by traffic source\",\n-                            \"filters\": {\n-                                \"events\": [\n-                                    {\n-                                        \"id\": \"$pageview\",\n-                                        \"math\": \"dau\",\n-                                        \"type\": \"events\"\n-                                    }\n-                                ],\n-                                \"insight\": \"TRENDS\",\n-                                \"interval\": \"day\",\n-                                \"breakdown\": \"$initial_referring_domain\",\n-                                \"breakdown_type\": \"event\"\n-                            },\n-                            \"filters_hash\": \"cache_8cceb5419f581e2780db31f61a1805d6\",\n-                            \"order\": null,\n-                            \"deleted\": false,\n-                            \"dashboard\": 1,\n-                            \"dive_dashboard\": null,\n-                            \"layouts\": {\n-                                \"sm\": {\n-                                    \"h\": 5,\n-                                    \"w\": 6,\n-                                    \"x\": 0,\n-                                    \"y\": 15\n-                                },\n-                                \"xs\": {\n-                                    \"h\": 5,\n-                                    \"w\": 1,\n-                                    \"x\": 0,\n-                                    \"y\": 25,\n-                                    \"moved\": false,\n-                                    \"static\": false\n-                                }\n-                            },\n-                            \"color\": null,\n-                            \"last_refresh\": \"2022-01-20T20:15:30.894922Z\",\n-                            \"refreshing\": false,\n-                            \"result\": [\n-                                {\n-                                    \"action\": {\n-                                        \"id\": \"$pageview\",\n-                                        \"type\": \"events\",\n-                                        \"order\": null,\n-                                        \"name\": \"$pageview\",\n-                                        \"custom_name\": null,\n-                                        \"math\": \"dau\",\n-                                        \"math_property\": null,\n-                                        \"math_group_type_index\": null,\n-                                        \"properties\": []\n-                                    },\n-                                    \"label\": \"$pageview - 127.0.0.1:8000\",\n-                                    \"count\": 3,\n-                                    \"data\": [0, 0, 0, 0, 0, 1, 1, 1],\n-                                    \"labels\": [\n-                                        \"13-Jan-2022\",\n-                                        \"14-Jan-2022\",\n-                                        \"15-Jan-2022\",\n-                                        \"16-Jan-2022\",\n-                                        \"17-Jan-2022\",\n-                                        \"18-Jan-2022\",\n-                                        \"19-Jan-2022\",\n-                                        \"20-Jan-2022\"\n-                                    ],\n-                                    \"days\": [\n-                                        \"2022-01-13\",\n-                                        \"2022-01-14\",\n-                                        \"2022-01-15\",\n-                                        \"2022-01-16\",\n-                                        \"2022-01-17\",\n-                                        \"2022-01-18\",\n-                                        \"2022-01-19\",\n-                                        \"2022-01-20\"\n-                                    ],\n-                                    \"breakdown_value\": \"127.0.0.1:8000\",\n-                                    \"persons_urls\": [\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2022-01-13\",\n-                                                \"date_to\": \"2022-01-13\",\n-                                                \"breakdown_value\": \"127.0.0.1:8000\",\n-                                                \"breakdown_type\": \"event\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?breakdown=%24initial_referring_domain&breakdown_type=event&date_from=2022-01-13&date_to=2022-01-13&display=ActionsLineGraph&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau&breakdown_value=127.0.0.1%3A8000\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2022-01-14\",\n-                                                \"date_to\": \"2022-01-14\",\n-                                                \"breakdown_value\": \"127.0.0.1:8000\",\n-                                                \"breakdown_type\": \"event\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?breakdown=%24initial_referring_domain&breakdown_type=event&date_from=2022-01-14&date_to=2022-01-14&display=ActionsLineGraph&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau&breakdown_value=127.0.0.1%3A8000\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2022-01-15\",\n-                                                \"date_to\": \"2022-01-15\",\n-                                                \"breakdown_value\": \"127.0.0.1:8000\",\n-                                                \"breakdown_type\": \"event\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?breakdown=%24initial_referring_domain&breakdown_type=event&date_from=2022-01-15&date_to=2022-01-15&display=ActionsLineGraph&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau&breakdown_value=127.0.0.1%3A8000\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2022-01-16\",\n-                                                \"date_to\": \"2022-01-16\",\n-                                                \"breakdown_value\": \"127.0.0.1:8000\",\n-                                                \"breakdown_type\": \"event\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?breakdown=%24initial_referring_domain&breakdown_type=event&date_from=2022-01-16&date_to=2022-01-16&display=ActionsLineGraph&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau&breakdown_value=127.0.0.1%3A8000\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2022-01-17\",\n-                                                \"date_to\": \"2022-01-17\",\n-                                                \"breakdown_value\": \"127.0.0.1:8000\",\n-                                                \"breakdown_type\": \"event\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?breakdown=%24initial_referring_domain&breakdown_type=event&date_from=2022-01-17&date_to=2022-01-17&display=ActionsLineGraph&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau&breakdown_value=127.0.0.1%3A8000\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2022-01-18\",\n-                                                \"date_to\": \"2022-01-18\",\n-                                                \"breakdown_value\": \"127.0.0.1:8000\",\n-                                                \"breakdown_type\": \"event\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?breakdown=%24initial_referring_domain&breakdown_type=event&date_from=2022-01-18&date_to=2022-01-18&display=ActionsLineGraph&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau&breakdown_value=127.0.0.1%3A8000\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2022-01-19\",\n-                                                \"date_to\": \"2022-01-19\",\n-                                                \"breakdown_value\": \"127.0.0.1:8000\",\n-                                                \"breakdown_type\": \"event\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?breakdown=%24initial_referring_domain&breakdown_type=event&date_from=2022-01-19&date_to=2022-01-19&display=ActionsLineGraph&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau&breakdown_value=127.0.0.1%3A8000\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2022-01-20\",\n-                                                \"date_to\": \"2022-01-20\",\n-                                                \"breakdown_value\": \"127.0.0.1:8000\",\n-                                                \"breakdown_type\": \"event\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?breakdown=%24initial_referring_domain&breakdown_type=event&date_from=2022-01-20&date_to=2022-01-20&display=ActionsLineGraph&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau&breakdown_value=127.0.0.1%3A8000\"\n-                                        }\n-                                    ],\n-                                    \"filter\": {\n-                                        \"breakdown\": \"$initial_referring_domain\",\n-                                        \"breakdown_type\": \"event\",\n-                                        \"date_from\": \"2022-01-13T00:00:00+00:00\",\n-                                        \"date_to\": \"2022-01-20T20:15:30.767836+00:00\",\n-                                        \"display\": \"ActionsLineGraph\",\n-                                        \"events\": [\n-                                            {\n-                                                \"id\": \"$pageview\",\n-                                                \"type\": \"events\",\n-                                                \"order\": null,\n-                                                \"name\": \"$pageview\",\n-                                                \"custom_name\": null,\n-                                                \"math\": \"dau\",\n-                                                \"math_property\": null,\n-                                                \"math_group_type_index\": null,\n-                                                \"properties\": []\n-                                            }\n-                                        ],\n-                                        \"insight\": \"TRENDS\",\n-                                        \"interval\": \"day\"\n-                                    }\n-                                }\n-                            ],\n-                            \"created_at\": \"2022-01-18T14:24:55.787194Z\",\n-                            \"description\": \"Shows a breakdown of where unique users came from when visiting your app.\",\n-                            \"updated_at\": \"2022-01-21T09:38:00.594700Z\",\n-                            \"tags\": [],\n-                            \"favorited\": false,\n-                            \"saved\": false,\n-                            \"created_by\": null,\n-                            \"is_sample\": false\n-                        },\n-                        {\n-                            \"id\": 2,\n-                            \"short_id\": \"yYDbkHt9\",\n-                            \"name\": \"Cumulative DAUs\",\n-                            \"filters\": {\n-                                \"events\": [\n-                                    {\n-                                        \"id\": \"$pageview\",\n-                                        \"math\": \"dau\",\n-                                        \"type\": \"events\"\n-                                    }\n-                                ],\n-                                \"display\": \"ActionsLineGraphCumulative\",\n-                                \"insight\": \"TRENDS\",\n-                                \"interval\": \"day\",\n-                                \"date_from\": \"-30d\"\n-                            },\n-                            \"filters_hash\": \"cache_4c5fd31eddc8041707deabf594906f08\",\n-                            \"order\": null,\n-                            \"deleted\": false,\n-                            \"dashboard\": 1,\n-                            \"dive_dashboard\": null,\n-                            \"layouts\": {\n-                                \"sm\": {\n-                                    \"h\": 5,\n-                                    \"w\": 6,\n-                                    \"x\": 0,\n-                                    \"y\": 10\n-                                },\n-                                \"xs\": {\n-                                    \"h\": 5,\n-                                    \"w\": 1,\n-                                    \"x\": 0,\n-                                    \"y\": 10,\n-                                    \"moved\": false,\n-                                    \"static\": false\n-                                }\n-                            },\n-                            \"color\": \"green\",\n-                            \"last_refresh\": \"2022-01-20T20:17:01.076315Z\",\n-                            \"refreshing\": false,\n-                            \"result\": [\n-                                {\n-                                    \"action\": {\n-                                        \"id\": \"$pageview\",\n-                                        \"type\": \"events\",\n-                                        \"order\": null,\n-                                        \"name\": \"$pageview\",\n-                                        \"custom_name\": null,\n-                                        \"math\": \"dau\",\n-                                        \"math_property\": null,\n-                                        \"math_group_type_index\": null,\n-                                        \"properties\": []\n-                                    },\n-                                    \"label\": \"$pageview\",\n-                                    \"count\": 1,\n-                                    \"data\": [\n-                                        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n-                                        0, 1, 1, 1\n-                                    ],\n-                                    \"labels\": [\n-                                        \"21-Dec-2021\",\n-                                        \"22-Dec-2021\",\n-                                        \"23-Dec-2021\",\n-                                        \"24-Dec-2021\",\n-                                        \"25-Dec-2021\",\n-                                        \"26-Dec-2021\",\n-                                        \"27-Dec-2021\",\n-                                        \"28-Dec-2021\",\n-                                        \"29-Dec-2021\",\n-                                        \"30-Dec-2021\",\n-                                        \"31-Dec-2021\",\n-                                        \"1-Jan-2022\",\n-                                        \"2-Jan-2022\",\n-                                        \"3-Jan-2022\",\n-                                        \"4-Jan-2022\",\n-                                        \"5-Jan-2022\",\n-                                        \"6-Jan-2022\",\n-                                        \"7-Jan-2022\",\n-                                        \"8-Jan-2022\",\n-                                        \"9-Jan-2022\",\n-                                        \"10-Jan-2022\",\n-                                        \"11-Jan-2022\",\n-                                        \"12-Jan-2022\",\n-                                        \"13-Jan-2022\",\n-                                        \"14-Jan-2022\",\n-                                        \"15-Jan-2022\",\n-                                        \"16-Jan-2022\",\n-                                        \"17-Jan-2022\",\n-                                        \"18-Jan-2022\",\n-                                        \"19-Jan-2022\",\n-                                        \"20-Jan-2022\"\n-                                    ],\n-                                    \"days\": [\n-                                        \"2021-12-21\",\n-                                        \"2021-12-22\",\n-                                        \"2021-12-23\",\n-                                        \"2021-12-24\",\n-                                        \"2021-12-25\",\n-                                        \"2021-12-26\",\n-                                        \"2021-12-27\",\n-                                        \"2021-12-28\",\n-                                        \"2021-12-29\",\n-                                        \"2021-12-30\",\n-                                        \"2021-12-31\",\n-                                        \"2022-01-01\",\n-                                        \"2022-01-02\",\n-                                        \"2022-01-03\",\n-                                        \"2022-01-04\",\n-                                        \"2022-01-05\",\n-                                        \"2022-01-06\",\n-                                        \"2022-01-07\",\n-                                        \"2022-01-08\",\n-                                        \"2022-01-09\",\n-                                        \"2022-01-10\",\n-                                        \"2022-01-11\",\n-                                        \"2022-01-12\",\n-                                        \"2022-01-13\",\n-                                        \"2022-01-14\",\n-                                        \"2022-01-15\",\n-                                        \"2022-01-16\",\n-                                        \"2022-01-17\",\n-                                        \"2022-01-18\",\n-                                        \"2022-01-19\",\n-                                        \"2022-01-20\"\n-                                    ],\n-                                    \"persons_urls\": [\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2021-12-21T00:00:00Z\",\n-                                                \"date_to\": \"2021-12-21\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?date_from=2021-12-21+00%3A00%3A00%2B00%3A00&date_to=2021-12-21&display=ActionsLineGraphCumulative&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2021-12-21T00:00:00Z\",\n-                                                \"date_to\": \"2021-12-22\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?date_from=2021-12-21+00%3A00%3A00%2B00%3A00&date_to=2021-12-22&display=ActionsLineGraphCumulative&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2021-12-21T00:00:00Z\",\n-                                                \"date_to\": \"2021-12-23\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?date_from=2021-12-21+00%3A00%3A00%2B00%3A00&date_to=2021-12-23&display=ActionsLineGraphCumulative&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2021-12-21T00:00:00Z\",\n-                                                \"date_to\": \"2021-12-24\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?date_from=2021-12-21+00%3A00%3A00%2B00%3A00&date_to=2021-12-24&display=ActionsLineGraphCumulative&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2021-12-21T00:00:00Z\",\n-                                                \"date_to\": \"2021-12-25\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?date_from=2021-12-21+00%3A00%3A00%2B00%3A00&date_to=2021-12-25&display=ActionsLineGraphCumulative&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2021-12-21T00:00:00Z\",\n-                                                \"date_to\": \"2021-12-26\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?date_from=2021-12-21+00%3A00%3A00%2B00%3A00&date_to=2021-12-26&display=ActionsLineGraphCumulative&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2021-12-21T00:00:00Z\",\n-                                                \"date_to\": \"2021-12-27\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?date_from=2021-12-21+00%3A00%3A00%2B00%3A00&date_to=2021-12-27&display=ActionsLineGraphCumulative&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2021-12-21T00:00:00Z\",\n-                                                \"date_to\": \"2021-12-28\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?date_from=2021-12-21+00%3A00%3A00%2B00%3A00&date_to=2021-12-28&display=ActionsLineGraphCumulative&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2021-12-21T00:00:00Z\",\n-                                                \"date_to\": \"2021-12-29\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?date_from=2021-12-21+00%3A00%3A00%2B00%3A00&date_to=2021-12-29&display=ActionsLineGraphCumulative&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2021-12-21T00:00:00Z\",\n-                                                \"date_to\": \"2021-12-30\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?date_from=2021-12-21+00%3A00%3A00%2B00%3A00&date_to=2021-12-30&display=ActionsLineGraphCumulative&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2021-12-21T00:00:00Z\",\n-                                                \"date_to\": \"2021-12-31\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?date_from=2021-12-21+00%3A00%3A00%2B00%3A00&date_to=2021-12-31&display=ActionsLineGraphCumulative&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2021-12-21T00:00:00Z\",\n-                                                \"date_to\": \"2022-01-01\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?date_from=2021-12-21+00%3A00%3A00%2B00%3A00&date_to=2022-01-01&display=ActionsLineGraphCumulative&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2021-12-21T00:00:00Z\",\n-                                                \"date_to\": \"2022-01-02\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?date_from=2021-12-21+00%3A00%3A00%2B00%3A00&date_to=2022-01-02&display=ActionsLineGraphCumulative&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2021-12-21T00:00:00Z\",\n-                                                \"date_to\": \"2022-01-03\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?date_from=2021-12-21+00%3A00%3A00%2B00%3A00&date_to=2022-01-03&display=ActionsLineGraphCumulative&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2021-12-21T00:00:00Z\",\n-                                                \"date_to\": \"2022-01-04\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?date_from=2021-12-21+00%3A00%3A00%2B00%3A00&date_to=2022-01-04&display=ActionsLineGraphCumulative&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2021-12-21T00:00:00Z\",\n-                                                \"date_to\": \"2022-01-05\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?date_from=2021-12-21+00%3A00%3A00%2B00%3A00&date_to=2022-01-05&display=ActionsLineGraphCumulative&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2021-12-21T00:00:00Z\",\n-                                                \"date_to\": \"2022-01-06\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?date_from=2021-12-21+00%3A00%3A00%2B00%3A00&date_to=2022-01-06&display=ActionsLineGraphCumulative&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2021-12-21T00:00:00Z\",\n-                                                \"date_to\": \"2022-01-07\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?date_from=2021-12-21+00%3A00%3A00%2B00%3A00&date_to=2022-01-07&display=ActionsLineGraphCumulative&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2021-12-21T00:00:00Z\",\n-                                                \"date_to\": \"2022-01-08\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?date_from=2021-12-21+00%3A00%3A00%2B00%3A00&date_to=2022-01-08&display=ActionsLineGraphCumulative&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2021-12-21T00:00:00Z\",\n-                                                \"date_to\": \"2022-01-09\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?date_from=2021-12-21+00%3A00%3A00%2B00%3A00&date_to=2022-01-09&display=ActionsLineGraphCumulative&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2021-12-21T00:00:00Z\",\n-                                                \"date_to\": \"2022-01-10\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?date_from=2021-12-21+00%3A00%3A00%2B00%3A00&date_to=2022-01-10&display=ActionsLineGraphCumulative&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2021-12-21T00:00:00Z\",\n-                                                \"date_to\": \"2022-01-11\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?date_from=2021-12-21+00%3A00%3A00%2B00%3A00&date_to=2022-01-11&display=ActionsLineGraphCumulative&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2021-12-21T00:00:00Z\",\n-                                                \"date_to\": \"2022-01-12\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?date_from=2021-12-21+00%3A00%3A00%2B00%3A00&date_to=2022-01-12&display=ActionsLineGraphCumulative&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2021-12-21T00:00:00Z\",\n-                                                \"date_to\": \"2022-01-13\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?date_from=2021-12-21+00%3A00%3A00%2B00%3A00&date_to=2022-01-13&display=ActionsLineGraphCumulative&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2021-12-21T00:00:00Z\",\n-                                                \"date_to\": \"2022-01-14\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?date_from=2021-12-21+00%3A00%3A00%2B00%3A00&date_to=2022-01-14&display=ActionsLineGraphCumulative&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2021-12-21T00:00:00Z\",\n-                                                \"date_to\": \"2022-01-15\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?date_from=2021-12-21+00%3A00%3A00%2B00%3A00&date_to=2022-01-15&display=ActionsLineGraphCumulative&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2021-12-21T00:00:00Z\",\n-                                                \"date_to\": \"2022-01-16\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?date_from=2021-12-21+00%3A00%3A00%2B00%3A00&date_to=2022-01-16&display=ActionsLineGraphCumulative&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2021-12-21T00:00:00Z\",\n-                                                \"date_to\": \"2022-01-17\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?date_from=2021-12-21+00%3A00%3A00%2B00%3A00&date_to=2022-01-17&display=ActionsLineGraphCumulative&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2021-12-21T00:00:00Z\",\n-                                                \"date_to\": \"2022-01-18\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?date_from=2021-12-21+00%3A00%3A00%2B00%3A00&date_to=2022-01-18&display=ActionsLineGraphCumulative&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2021-12-21T00:00:00Z\",\n-                                                \"date_to\": \"2022-01-19\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?date_from=2021-12-21+00%3A00%3A00%2B00%3A00&date_to=2022-01-19&display=ActionsLineGraphCumulative&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2021-12-21T00:00:00Z\",\n-                                                \"date_to\": \"2022-01-20\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?date_from=2021-12-21+00%3A00%3A00%2B00%3A00&date_to=2022-01-20&display=ActionsLineGraphCumulative&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau\"\n-                                        }\n-                                    ],\n-                                    \"filter\": {\n-                                        \"date_from\": \"-30d\",\n-                                        \"date_to\": \"2022-01-20T20:17:00.804981+00:00\",\n-                                        \"display\": \"ActionsLineGraphCumulative\",\n-                                        \"events\": [\n-                                            {\n-                                                \"id\": \"$pageview\",\n-                                                \"type\": \"events\",\n-                                                \"order\": null,\n-                                                \"name\": \"$pageview\",\n-                                                \"custom_name\": null,\n-                                                \"math\": \"dau\",\n-                                                \"math_property\": null,\n-                                                \"math_group_type_index\": null,\n-                                                \"properties\": []\n-                                            }\n-                                        ],\n-                                        \"insight\": \"TRENDS\",\n-                                        \"interval\": \"day\"\n-                                    }\n-                                }\n-                            ],\n-                            \"created_at\": \"2022-01-18T14:24:55.779167Z\",\n-                            \"description\": \"Shows the total cumulative number of unique users that have been using your app.\",\n-                            \"updated_at\": \"2022-01-21T09:38:00.583732Z\",\n-                            \"tags\": [],\n-                            \"favorited\": false,\n-                            \"saved\": false,\n-                            \"created_by\": null,\n-                            \"is_sample\": false\n-                        },\n-                        {\n-                            \"id\": 1,\n-                            \"short_id\": \"6U87Oi8r\",\n-                            \"name\": \"Daily Active Users (DAUs)\",\n-                            \"filters\": {\n-                                \"events\": [\n-                                    {\n-                                        \"id\": \"$pageview\",\n-                                        \"math\": \"dau\",\n-                                        \"type\": \"events\"\n-                                    }\n-                                ],\n-                                \"insight\": \"TRENDS\",\n-                                \"interval\": \"day\"\n-                            },\n-                            \"filters_hash\": \"cache_10242f26e25fd30ec2c9721e4f90a018\",\n-                            \"order\": null,\n-                            \"deleted\": false,\n-                            \"dashboard\": 1,\n-                            \"dive_dashboard\": null,\n-                            \"layouts\": {\n-                                \"sm\": {\n-                                    \"h\": 5,\n-                                    \"w\": 6,\n-                                    \"x\": 0,\n-                                    \"y\": 0\n-                                },\n-                                \"xs\": {\n-                                    \"h\": 5,\n-                                    \"w\": 1,\n-                                    \"x\": 0,\n-                                    \"y\": 0,\n-                                    \"moved\": false,\n-                                    \"static\": false\n-                                }\n-                            },\n-                            \"color\": \"blue\",\n-                            \"last_refresh\": \"2022-01-20T20:17:01.070614Z\",\n-                            \"refreshing\": false,\n-                            \"result\": [\n-                                {\n-                                    \"action\": {\n-                                        \"id\": \"$pageview\",\n-                                        \"type\": \"events\",\n-                                        \"order\": null,\n-                                        \"name\": \"$pageview\",\n-                                        \"custom_name\": null,\n-                                        \"math\": \"dau\",\n-                                        \"math_property\": null,\n-                                        \"math_group_type_index\": null,\n-                                        \"properties\": []\n-                                    },\n-                                    \"label\": \"$pageview\",\n-                                    \"count\": 3,\n-                                    \"data\": [0, 0, 0, 0, 0, 1, 1, 1],\n-                                    \"labels\": [\n-                                        \"13-Jan-2022\",\n-                                        \"14-Jan-2022\",\n-                                        \"15-Jan-2022\",\n-                                        \"16-Jan-2022\",\n-                                        \"17-Jan-2022\",\n-                                        \"18-Jan-2022\",\n-                                        \"19-Jan-2022\",\n-                                        \"20-Jan-2022\"\n-                                    ],\n-                                    \"days\": [\n-                                        \"2022-01-13\",\n-                                        \"2022-01-14\",\n-                                        \"2022-01-15\",\n-                                        \"2022-01-16\",\n-                                        \"2022-01-17\",\n-                                        \"2022-01-18\",\n-                                        \"2022-01-19\",\n-                                        \"2022-01-20\"\n-                                    ],\n-                                    \"persons_urls\": [\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2022-01-13\",\n-                                                \"date_to\": \"2022-01-13\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?date_from=2022-01-13&date_to=2022-01-13&display=ActionsLineGraph&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2022-01-14\",\n-                                                \"date_to\": \"2022-01-14\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?date_from=2022-01-14&date_to=2022-01-14&display=ActionsLineGraph&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2022-01-15\",\n-                                                \"date_to\": \"2022-01-15\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?date_from=2022-01-15&date_to=2022-01-15&display=ActionsLineGraph&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2022-01-16\",\n-                                                \"date_to\": \"2022-01-16\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?date_from=2022-01-16&date_to=2022-01-16&display=ActionsLineGraph&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2022-01-17\",\n-                                                \"date_to\": \"2022-01-17\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?date_from=2022-01-17&date_to=2022-01-17&display=ActionsLineGraph&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2022-01-18\",\n-                                                \"date_to\": \"2022-01-18\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?date_from=2022-01-18&date_to=2022-01-18&display=ActionsLineGraph&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2022-01-19\",\n-                                                \"date_to\": \"2022-01-19\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?date_from=2022-01-19&date_to=2022-01-19&display=ActionsLineGraph&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau\"\n-                                        },\n-                                        {\n-                                            \"filter\": {\n-                                                \"entity_id\": \"$pageview\",\n-                                                \"entity_type\": \"events\",\n-                                                \"entity_math\": \"dau\",\n-                                                \"date_from\": \"2022-01-20\",\n-                                                \"date_to\": \"2022-01-20\"\n-                                            },\n-                                            \"url\": \"api/projects/1/actions/people/?date_from=2022-01-20&date_to=2022-01-20&display=ActionsLineGraph&events=%5B%7B%22id%22%3A+%22%24pageview%22%2C+%22type%22%3A+%22events%22%2C+%22order%22%3A+null%2C+%22name%22%3A+%22%24pageview%22%2C+%22custom_name%22%3A+null%2C+%22math%22%3A+%22dau%22%2C+%22math_property%22%3A+null%2C+%22math_group_type_index%22%3A+null%2C+%22properties%22%3A+%5B%5D%7D%5D&insight=TRENDS&interval=day&entity_id=%24pageview&entity_type=events&entity_math=dau\"\n-                                        }\n-                                    ],\n-                                    \"filter\": {\n-                                        \"date_from\": \"2022-01-13T00:00:00+00:00\",\n-                                        \"date_to\": \"2022-01-20T20:17:00.797484+00:00\",\n-                                        \"display\": \"ActionsLineGraph\",\n-                                        \"events\": [\n-                                            {\n-                                                \"id\": \"$pageview\",\n-                                                \"type\": \"events\",\n-                                                \"order\": null,\n-                                                \"name\": \"$pageview\",\n-                                                \"custom_name\": null,\n-                                                \"math\": \"dau\",\n-                                                \"math_property\": null,\n-                                                \"math_group_type_index\": null,\n-                                                \"properties\": []\n-                                            }\n-                                        ],\n-                                        \"insight\": \"TRENDS\",\n-                                        \"interval\": \"day\"\n-                                    }\n-                                }\n-                            ],\n-                            \"created_at\": \"2022-01-18T14:24:55.771482Z\",\n-                            \"description\": \"Shows the number of unique users that use your app every day.\",\n-                            \"updated_at\": \"2022-01-21T09:38:00.567555Z\",\n-                            \"tags\": [],\n-                            \"favorited\": false,\n-                            \"saved\": false,\n-                            \"created_by\": null,\n-                            \"is_sample\": false\n-                        }\n-                    ],\n-                    \"filters\": {\n-                        \"layoutView\": \"list\",\n-                        \"order\": \"-updated_at\",\n-                        \"tab\": \"all\",\n-                        \"search\": \"\",\n-                        \"insightType\": \"All types\",\n-                        \"createdBy\": \"All users\",\n-                        \"dateFrom\": \"all\",\n-                        \"page\": 1\n-                    }\n-                },\n-                \"insightsLoading\": false,\n-                \"rawFilters\": {\n-                    \"layoutView\": \"list\",\n-                    \"order\": \"-updated_at\",\n-                    \"tab\": \"all\",\n-                    \"search\": \"\",\n-                    \"insightType\": \"All types\",\n-                    \"createdBy\": \"All users\",\n-                    \"dateFrom\": \"all\",\n-                    \"page\": 1\n-                }\n-            }\n-        },\n-        \"performance\": {\n-            \"pageViewEvents\": [\n-                {\n-                    \"id\": \"017e8b0a-7960-0002-7998-6902e7ca8d97\",\n-                    \"distinct_id\": \"UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj\",\n-                    \"properties\": {\n-                        \"$os\": \"Mac OS X\",\n-                        \"$browser\": \"Chrome\",\n-                        \"$device_type\": \"Desktop\",\n-                        \"$current_url\": \"http://127.0.0.1:8000/action/15?properties=%5B%5D\",\n-                        \"$host\": \"127.0.0.1:8000\",\n-                        \"$pathname\": \"/action/15\",\n-                        \"$browser_version\": 97,\n-                        \"$screen_height\": 982,\n-                        \"$screen_width\": 1512,\n-                        \"$viewport_height\": 865,\n-                        \"$viewport_width\": 953,\n-                        \"$lib\": \"web\",\n-                        \"$lib_version\": \"1.17.3\",\n-                        \"$insert_id\": \"mkrv09t18jtfhijv\",\n-                        \"$time\": 1643010223.99,\n-                        \"distinct_id\": \"UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj\",\n-                        \"$device_id\": \"17e6d9397cc50f-03939b929747b8-1d326253-16a7f0-17e6d9397cd1aa7\",\n-                        \"$initial_referrer\": \"http://127.0.0.1:8000/signup\",\n-                        \"$initial_referring_domain\": \"127.0.0.1:8000\",\n-                        \"$referrer\": \"http://127.0.0.1:8000/action/15?properties=%5B%5D\",\n-                        \"$referring_domain\": \"127.0.0.1:8000\",\n-                        \"$user_id\": \"UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj\",\n-                        \"is_demo_project\": false,\n-                        \"$groups\": {\n-                            \"project\": \"017e6d93-95c4-0000-3336-11f4c03eb344\",\n-                            \"organization\": \"017e6d93-8fa6-0000-deb6-1c78260418c9\",\n-                            \"instance\": \"http://localhost:8000\"\n-                        },\n-                        \"posthog_version\": \"1.31.1\",\n-                        \"realm\": \"hosted-clickhouse\",\n-                        \"is_clickhouse_enabled\": true,\n-                        \"ee_available\": true,\n-                        \"email_service_available\": false,\n-                        \"$active_feature_flags\": [\"6619-query-events-by-date\", \"hackathon-apm\", \"something\"],\n-                        \"$feature/6619-query-events-by-date\": true,\n-                        \"$feature/hackathon-apm\": true,\n-                        \"$feature/something\": true,\n-                        \"token\": \"phc_PzZhed4GBoxecFlTaC2hIY7JsSAghIPAIp2f3uwUsvw\",\n-                        \"$session_id\": \"17e8ae4b5a9323-0db8ef18d837a-1d326253-16a7f0-17e8ae4b5aa2db\",\n-                        \"$window_id\": \"17e8b0a3cad569-0e22532a0d29f9-1d326253-16a7f0-17e8b0a3caefa6\",\n-                        \"$performance_page_loaded\": 975.9,\n-                        \"$performance_raw\": \"{\\\"navigation\\\":[[\\\"name\\\",\\\"entryType\\\",\\\"duration\\\",\\\"initiatorType\\\",\\\"fetchStart\\\",\\\"domainLookupStart\\\",\\\"domainLookupEnd\\\",\\\"connectStart\\\",\\\"connectEnd\\\",\\\"requestStart\\\",\\\"responseStart\\\",\\\"responseEnd\\\",\\\"transferSize\\\",\\\"encodedBodySize\\\",\\\"decodedBodySize\\\",\\\"domInteractive\\\",\\\"domContentLoadedEventStart\\\",\\\"domContentLoadedEventEnd\\\",\\\"domComplete\\\",\\\"loadEventStart\\\",\\\"loadEventEnd\\\",\\\"type\\\"],[[\\\"http://127.0.0.1:8000/\\\",\\\"navigation\\\",975.9,\\\"navigation\\\",4.7,4.7,4.7,4.7,4.7,6,143.9,144.6,33609,33309,33309,328.2,328.2,328.2,975.5,975.5,975.9,\\\"navigate\\\"]]],\\\"paint\\\":[[\\\"name\\\",\\\"entryType\\\",\\\"startTime\\\"],[[\\\"first-paint\\\",\\\"paint\\\",289.7],[\\\"first-contentful-paint\\\",\\\"paint\\\",289.7]]],\\\"resource\\\":[[\\\"name\\\",\\\"startTime\\\",\\\"duration\\\",\\\"initiatorType\\\",\\\"fetchStart\\\",\\\"responseEnd\\\"],[[\\\"http://localhost:8234/static/index.css?t=1643010062816\\\",177.1,10.3,\\\"link\\\",177.1,187.4],[\\\"http://localhost:8234/static/index.js?t=1643010062816\\\",201.7,5.1,\\\"other\\\",201.7,206.8],[\\\"http://localhost:8234/static/chunk-XICZDHER.js\\\",208,4.3,\\\"other\\\",208,212.3],[\\\"http://localhost:8234/static/chunk-5MMMF5K7.js\\\",208.1,2.7,\\\"other\\\",208.1,210.8],[\\\"http://localhost:8234/static/chunk-ROHUIGSJ.js\\\",208.3,3.8,\\\"other\\\",208.3,212.1],[\\\"http://localhost:8234/static/chunk-ZO6AYWDD.js\\\",209.2,3.2,\\\"other\\\",209.2,212.4],[\\\"http://localhost:8234/static/chunk-3TJORNMS.js\\\",209.4,3,\\\"other\\\",209.4,212.4],[\\\"http://localhost:8234/static/chunk-MIOXAXF4.js\\\",209.5,2.9,\\\"other\\\",209.5,212.4],[\\\"http://localhost:8234/static/chunk-W3XSBZQT.js\\\",210.3,3.5,\\\"other\\\",210.3,213.8],[\\\"http://localhost:8234/static/chunk-HG47DNA6.js\\\",211.1,7.3,\\\"other\\\",211.1,218.4],[\\\"http://localhost:8234/static/chunk-KT2H2P52.js\\\",211.6,7,\\\"other\\\",211.6,218.6],[\\\"http://localhost:8234/static/chunk-WCD5LITO.js\\\",211.7,7.5,\\\"other\\\",211.7,219.2],[\\\"http://localhost:8234/static/chunk-OZGU6W75.js\\\",211.9,7.3,\\\"other\\\",211.9,219.2],[\\\"http://localhost:8234/static/chunk-GN5GHDD7.js\\\",212.6,8.9,\\\"other\\\",212.6,221.5],[\\\"http://localhost:8234/static/chunk-3HMUCGO3.js\\\",213.3,8.3,\\\"other\\\",213.3,221.6],[\\\"http://localhost:8234/static/chunk-LO4HT7SR.js\\\",213.5,6,\\\"other\\\",213.5,219.5],[\\\"http://localhost:8234/static/chunk-3GPSPDA2.js\\\",213.6,7.7,\\\"other\\\",213.6,221.3],[\\\"http://localhost:8234/static/chunk-3YSVPLYF.js\\\",213.7,7.6,\\\"other\\\",213.7,221.3],[\\\"http://localhost:8234/static/chunk-SS3VKUJU.js\\\",213.8,7.7,\\\"other\\\",213.8,221.5],[\\\"http://localhost:8234/static/chunk-2O667M4D.js\\\",214,7.8,\\\"other\\\",214,221.8],[\\\"http://localhost:8234/static/chunk-2VV7PQO5.js\\\",214.1,7.9,\\\"other\\\",214.1,222],[\\\"http://localhost:8234/static/chunk-SKUSLQI7.js\\\",214.3,7.8,\\\"other\\\",214.3,222.1],[\\\"http://localhost:8234/static/chunk-EOM6WIAG.js\\\",214.4,7.9,\\\"other\\\",214.4,222.3],[\\\"http://localhost:8234/static/chunk-GUJPPS5R.js\\\",214.4,7.9,\\\"other\\\",214.4,222.3],[\\\"http://localhost:8234/static/chunk-BCILFNT3.js\\\",216.6,5.7,\\\"other\\\",216.6,222.3],[\\\"http://localhost:8234/static/chunk-SPXZCQAI.js\\\",216.7,8,\\\"other\\\",216.7,224.7],[\\\"http://localhost:8234/static/chunk-XPGE43VJ.js\\\",217.4,5.8,\\\"other\\\",217.4,223.2],[\\\"http://localhost:8234/static/chunk-L4IYGZIG.js\\\",217.5,5.4,\\\"other\\\",217.5,222.9],[\\\"http://localhost:8234/static/chunk-IGTMCF24.js\\\",218.2,5.7,\\\"other\\\",218.2,223.9],[\\\"http://localhost:8234/static/chunk-AMOE3OJU.js\\\",220.6,3.6,\\\"other\\\",220.6,224.2],[\\\"http://localhost:8234/static/chunk-BO4VDBQ6.js\\\",223.4,4.6,\\\"other\\\",223.4,228],[\\\"http://localhost:8234/static/chunk-QE52CDVG.js\\\",223.7,4.4,\\\"other\\\",223.7,228.1],[\\\"http://localhost:8234/static/chunk-VHSG55N2.js\\\",223.9,4.2,\\\"other\\\",223.9,228.1],[\\\"http://localhost:8234/static/chunk-4ZUV5LND.js\\\",224.7,3.5,\\\"other\\\",224.7,228.2],[\\\"http://localhost:8234/static/chunk-ASGLZXIV.js\\\",224.8,3.4,\\\"other\\\",224.8,228.2],[\\\"http://localhost:8234/static/chunk-HGNVPWDY.js\\\",225.8,5.1,\\\"other\\\",225.8,230.9],[\\\"http://localhost:8234/static/chunk-LD3TGMGW.js\\\",225.8,8,\\\"other\\\",225.8,233.8],[\\\"http://localhost:8234/static/chunk-PRPBRI2E.js\\\",226.1,7.7,\\\"other\\\",226.1,233.8],[\\\"http://localhost:8234/static/chunk-CA6FFFUC.js\\\",226.2,8.1,\\\"other\\\",226.2,234.3],[\\\"http://localhost:8234/static/chunk-YBU6RJ5N.js\\\",226.4,7.9,\\\"other\\\",226.4,234.3],[\\\"http://localhost:8234/static/chunk-HB4RLT5O.js\\\",226.5,7.9,\\\"other\\\",226.5,234.4],[\\\"http://localhost:8234/static/chunk-UJJIEZBP.js\\\",226.6,9.4,\\\"other\\\",226.6,236],[\\\"http://localhost:8234/static/chunk-KXP7VI6L.js\\\",226.7,10.9,\\\"other\\\",226.7,237.6],[\\\"http://localhost:8234/static/chunk-OHMX2FMJ.js\\\",226.9,10.8,\\\"other\\\",226.9,237.7],[\\\"http://localhost:8234/static/chunk-ATKSJCQX.js\\\",227,10.9,\\\"other\\\",227,237.9],[\\\"http://localhost:8234/static/chunk-ZUFDLBNZ.js\\\",227.1,10.9,\\\"other\\\",227.1,238],[\\\"http://localhost:8234/static/chunk-HOR2D746.js\\\",228.2,13.7,\\\"other\\\",228.2,241.9],[\\\"http://localhost:8234/static/chunk-M6NPX6BS.js\\\",228.7,111.5,\\\"other\\\",228.7,340.2],[\\\"http://localhost:8234/static/chunk-VJGIAYQC.js\\\",229.1,9.5,\\\"other\\\",229.1,238.6],[\\\"http://localhost:8234/static/toolbar.js?_ts=1643010210987\\\",486.1,322.2,\\\"script\\\",486.1,808.3],[\\\"http://127.0.0.1:8000/e/?ip=1&_=1643010210995\\\",496.2,54,\\\"xmlhttprequest\\\",496.2,550.2],[\\\"http://127.0.0.1:8000/decide/?v=2&ip=1&_=1643010210998\\\",498.6,92,\\\"xmlhttprequest\\\",498.6,590.6],[\\\"http://127.0.0.1:8000/engage/?ip=1&_=1643010211018\\\",518.8,45.6,\\\"xmlhttprequest\\\",518.8,564.4],[\\\"http://localhost:8234/static/SavedInsights-TLZR4WTT.js\\\",528.9,5,\\\"other\\\",528.9,533.9],[\\\"http://127.0.0.1:8000/api/projects/1/actions/\\\",539.4,89.8,\\\"fetch\\\",539.4,629.2],[\\\"http://127.0.0.1:8000/api/projects/1/annotations/?scope=organization&deleted=false\\\",545.6,72.3,\\\"fetch\\\",545.6,617.9],[\\\"http://127.0.0.1:8000/api/projects/1/cohorts?limit=600\\\",546.5,71.4,\\\"fetch\\\",546.5,617.9],[\\\"http://127.0.0.1:8000/api/projects/1/event_definitions/?limit=5000\\\",547.6,107.5,\\\"fetch\\\",547.6,655.1],[\\\"http://127.0.0.1:8000/api/person/properties/\\\",548.1,113.5,\\\"fetch\\\",548.1,661.6],[\\\"http://127.0.0.1:8000/api/projects/@current/property_definitions/?limit=5000\\\",549.3,124.5,\\\"fetch\\\",549.3,673.8],[\\\"http://127.0.0.1:8000/api/instance_status/\\\",554.9,259.7,\\\"fetch\\\",554.9,814.6],[\\\"https://update.posthog.com/\\\",556.7,45.2,\\\"fetch\\\",556.7,601.9],[\\\"http://127.0.0.1:8000/api/organizations/@current/invites/\\\",558.5,107.4,\\\"fetch\\\",558.5,665.9],[\\\"http://127.0.0.1:8000/api/personal_api_keys/\\\",578.8,83.4,\\\"fetch\\\",578.8,662.2],[\\\"http://127.0.0.1:8000/api/license/\\\",586.5,90.1,\\\"fetch\\\",586.5,676.6],[\\\"https://www.gravatar.com/avatar/2e7d95b60efbe947f71009a1af1ba8d0?s=96&d=404\\\",625.1,1.9,\\\"img\\\",625.1,627],[\\\"http://127.0.0.1:8000/api/projects/1/dashboards/\\\",791.4,89.2,\\\"fetch\\\",791.4,880.6],[\\\"http://localhost:8234/static/chunk-LUMXGCOP.js\\\",836.2,3.8,\\\"other\\\",836.2,840],[\\\"http://localhost:8234/static/chunk-KJPTCBBC.js\\\",836.5,4.1,\\\"other\\\",836.5,840.6],[\\\"http://localhost:8234/static/chunk-X7HB5SUU.js\\\",836.6,10.6,\\\"other\\\",836.6,847.2],[\\\"http://localhost:8234/static/chunk-Z2MYP2M2.js\\\",836.7,14.4,\\\"other\\\",836.7,851.1],[\\\"http://localhost:8234/static/chunk-Z6ENRSEA.js\\\",836.8,20.6,\\\"other\\\",836.8,857.4],[\\\"http://localhost:8234/static/chunk-FJKTD6MY.js\\\",837.2,7,\\\"other\\\",837.2,844.2],[\\\"http://localhost:8234/static/chunk-XUGMYJGP.js\\\",837.6,10,\\\"other\\\",837.6,847.6],[\\\"http://localhost:8234/static/chunk-MVOT6GTL.js\\\",837.8,13.6,\\\"other\\\",837.8,851.4],[\\\"http://localhost:8234/static/chunk-IMI5TOQA.js\\\",838.1,10,\\\"other\\\",838.1,848.1],[\\\"http://localhost:8234/static/chunk-UHSVE7PG.js\\\",838.1,14.5,\\\"other\\\",838.1,852.6],[\\\"http://localhost:8234/static/chunk-HDKRWHJ6.js\\\",838.2,11.7,\\\"other\\\",838.2,849.9],[\\\"http://localhost:8234/static/chunk-BDCDUKQO.js\\\",838.3,11.8,\\\"other\\\",838.3,850.1],[\\\"http://localhost:8234/static/chunk-OIXFZ5LK.js\\\",838.5,13.1,\\\"other\\\",838.5,851.6],[\\\"http://localhost:8234/static/chunk-EB5W63F3.js\\\",838.5,13.3,\\\"other\\\",838.5,851.8],[\\\"http://localhost:8234/static/chunk-DFRCCFPU.js\\\",838.6,13.2,\\\"other\\\",838.6,851.8],[\\\"http://localhost:8234/static/chunk-A4QCHFI6.js\\\",838.7,13.1,\\\"other\\\",838.7,851.8],[\\\"http://localhost:8234/static/chunk-3BPMDJ3N.js\\\",838.9,12.9,\\\"other\\\",838.9,851.8],[\\\"http://localhost:8234/static/chunk-NHUSGGUD.js\\\",838.9,14.1,\\\"other\\\",838.9,853],[\\\"http://localhost:8234/static/chunk-SLQJA2PL.js\\\",838.9,15.2,\\\"other\\\",838.9,854.1],[\\\"http://localhost:8234/static/chunk-I5O3JHP6.js\\\",839.7,14.5,\\\"other\\\",839.7,854.2],[\\\"http://localhost:8234/static/chunk-F4AIONA2.js\\\",839.9,14.4,\\\"other\\\",839.9,854.3],[\\\"http://localhost:8234/static/chunk-63HTFI3S.js\\\",840,14.5,\\\"other\\\",840,854.5],[\\\"http://localhost:8234/static/chunk-ZCRZKRW7.js\\\",842.4,12.6,\\\"other\\\",842.4,855],[\\\"http://localhost:8234/static/chunk-C2C4IEM7.js\\\",842.7,12.7,\\\"other\\\",842.7,855.4],[\\\"http://localhost:8234/static/chunk-NGQGL7D3.js\\\",845.9,10,\\\"other\\\",845.9,855.9],[\\\"http://localhost:8234/static/chunk-PTR2RUUP.js\\\",846.2,9.7,\\\"other\\\",846.2,855.9],[\\\"http://localhost:8234/static/chunk-R3PDDW67.js\\\",846.8,9.1,\\\"other\\\",846.8,855.9],[\\\"http://localhost:8234/static/chunk-Q2Y3HUWS.js\\\",847.1,8.8,\\\"other\\\",847.1,855.9],[\\\"http://localhost:8234/static/chunk-Y7BHXLNZ.js\\\",847.2,9.2,\\\"other\\\",847.2,856.4],[\\\"http://localhost:8234/static/chunk-IVAJFO7S.js\\\",847.4,9.5,\\\"other\\\",847.4,856.9],[\\\"https://app.posthog.com/e/?ip=1&_=1643010211443&v=0.0.3\\\",942.9,133,\\\"fetch\\\",942.9,1075.9],[\\\"https://app.posthog.com/e/?ip=1&_=1643010211445&v=0.0.3\\\",944.1,140.3,\\\"fetch\\\",944.1,1084.4],[\\\"http://127.0.0.1:8000/api/projects/@current/feature_flags/my_flags?groups=%7B%22project%22%3A%22017e6d93-95c4-0000-3336-11f4c03eb344%22%2C%22organization%22%3A%22017e6d93-8fa6-0000-deb6-1c78260418c9%22%2C%22instance%22%3A%22http%3A%2F%2Flocalhost%3A8000%22%7D&temporary_token=0XkmhCQW51KcZfVzCPPlYmepazWsYXSTczmBHyJE2-g\\\",944.8,126.9,\\\"fetch\\\",944.8,1071.7],[\\\"http://localhost:8234/static/toolbar.css\\\",978.5,4.2,\\\"link\\\",978.5,982.7],[\\\"http://127.0.0.1:8000/api/projects/1/insights/?order=-updated_at&limit=20&offset=0&saved=true\\\",1021.7,183.3,\\\"fetch\\\",1021.7,1205],[\\\"http://127.0.0.1:8000/static/site.webmanifest?v=2021-04-29\\\",1046.1,10.4,\\\"other\\\",1046.1,1056.5],[\\\"http://127.0.0.1:8000/api/organizations/@current/members/?limit=200\\\",1122.8,68.5,\\\"fetch\\\",1122.8,1191.3],[\\\"http://127.0.0.1:8000/e/?compression=gzip-js&ip=1&_=1643010214487\\\",3989.9,14.7,\\\"xmlhttprequest\\\",3989.9,4004.6],[\\\"http://127.0.0.1:8000/e/?compression=gzip-js&ip=1&_=1643010217493\\\",6993.6,27.6,\\\"xmlhttprequest\\\",6993.6,7021.2],[\\\"http://localhost:8234/static/chunk-EYLKE6KE.js\\\",8043.3,54.4,\\\"other\\\",8043.3,8097.7],[\\\"http://localhost:8234/static/chunk-URHQA52P.js\\\",8043.7,55,\\\"other\\\",8043.7,8098.7],[\\\"http://localhost:8234/static/chunk-3B7RVXAB.js\\\",8043.9,56.2,\\\"other\\\",8043.9,8100.1],[\\\"http://localhost:8234/static/chunk-FS5CTTMA.js\\\",8044.4,54.3,\\\"other\\\",8044.4,8098.7],[\\\"http://localhost:8234/static/chunk-D43ZYSLF.js\\\",8044.7,54.2,\\\"other\\\",8044.7,8098.9],[\\\"http://localhost:8234/static/chunk-DUQI5YEH.js\\\",8044.9,56.5,\\\"other\\\",8044.9,8101.4],[\\\"http://localhost:8234/static/chunk-CJ7JBN4P.js\\\",8045.3,56.7,\\\"other\\\",8045.3,8102],[\\\"http://localhost:8234/static/chunk-JRLWBJNF.js\\\",8045.6,55.9,\\\"other\\\",8045.6,8101.5],[\\\"http://localhost:8234/static/chunk-OSOS22ZK.js\\\",8045.9,58.2,\\\"other\\\",8045.9,8104.1],[\\\"http://localhost:8234/static/chunk-KQBLA4V6.js\\\",8046.1,55.4,\\\"other\\\",8046.1,8101.5],[\\\"http://localhost:8234/static/chunk-W7PNUTIQ.js\\\",8046.3,55.5,\\\"other\\\",8046.3,8101.8],[\\\"http://localhost:8234/static/Events-LZ45RGCO.js\\\",8047.1,54.5,\\\"other\\\",8047.1,8101.6],[\\\"http://127.0.0.1:8000/api/projects/1/events/?properties=%5B%5D&orderBy=%5B%22-timestamp%22%5D&after=2021-01-24T07%3A43%3A38.625Z\\\",8124.2,513.5,\\\"fetch\\\",8124.2,8637.7],[\\\"http://127.0.0.1:8000/api/projects/1/events/?properties=%5B%5D&orderBy=%5B%22-timestamp%22%5D&after=2021-01-24T07%3A43%3A38.646Z\\\",8145.6,523.3,\\\"fetch\\\",8145.6,8668.9],[\\\"http://localhost:8234/static/assets/posthog-icon-FDVNZJ5Z.svg\\\",8855.4,1.9,\\\"css\\\",8855.4,8857.3],[\\\"http://127.0.0.1:8000/e/?compression=gzip-js&ip=1&_=1643010220499\\\",9999.8,40.2,\\\"xmlhttprequest\\\",9999.8,10040],[\\\"http://localhost:8234/static/chunk-EWTWTRB2.js\\\",10113.7,6.3,\\\"other\\\",10113.7,10120],[\\\"http://localhost:8234/static/ActionsTable-HEA24TMU.js\\\",10114.3,5.9,\\\"other\\\",10114.3,10120.2],[\\\"http://127.0.0.1:8000/static/assets/actions-tutorial-grouping-JZSPRS7B.svg\\\",10305.7,15.9,\\\"img\\\",10305.7,10321.6],[\\\"http://127.0.0.1:8000/static/assets/actions-tutorial-standardized-G647GOB5.svg\\\",10306,25.8,\\\"img\\\",10306,10331.8],[\\\"http://127.0.0.1:8000/static/assets/actions-tutorial-retroactive-S22RZKEF.svg\\\",10306.1,27.4,\\\"img\\\",10306.1,10333.5],[\\\"http://127.0.0.1:8000/e/?compression=gzip-js&ip=1&_=1643010223503\\\",13003.7,22,\\\"xmlhttprequest\\\",13003.7,13025.7],[\\\"http://localhost:8234/static/Action-V5A27KJB.js\\\",13222.6,17.2,\\\"other\\\",13222.6,13239.8],[\\\"http://127.0.0.1:8000/api/projects/1/actions/15/\\\",13246.3,38.8,\\\"fetch\\\",13246.3,13285.1]]]}\",\n-                        \"$geoip_city_name\": \"Sydney\",\n-                        \"$geoip_country_name\": \"Australia\",\n-                        \"$geoip_country_code\": \"AU\",\n-                        \"$geoip_continent_name\": \"Oceania\",\n-                        \"$geoip_continent_code\": \"OC\",\n-                        \"$geoip_postal_code\": \"2000\",\n-                        \"$geoip_latitude\": -33.8601,\n-                        \"$geoip_longitude\": 151.2101,\n-                        \"$geoip_time_zone\": \"Australia/Sydney\",\n-                        \"$geoip_subdivision_1_code\": \"NSW\",\n-                        \"$geoip_subdivision_1_name\": \"New South Wales\",\n-                        \"$plugins_succeeded\": [\"GeoIP (1)\"],\n-                        \"$plugins_failed\": [],\n-                        \"$plugins_deferred\": [],\n-                        \"$ip\": \"127.0.0.1\",\n-                        \"$set_once\": {\n-                            \"$initial_os\": \"Mac OS X\",\n-                            \"$initial_browser\": \"Chrome\",\n-                            \"$initial_device_type\": \"Desktop\",\n-                            \"$initial_current_url\": \"http://127.0.0.1:8000/action/15?properties=%5B%5D\",\n-                            \"$initial_browser_version\": 97,\n-                            \"$initial_referrer\": \"http://127.0.0.1:8000/action/15?properties=%5B%5D\",\n-                            \"$initial_referring_domain\": \"127.0.0.1:8000\"\n-                        },\n-                        \"$group_0\": \"017e6d93-95c4-0000-3336-11f4c03eb344\",\n-                        \"$group_1\": \"017e6d93-8fa6-0000-deb6-1c78260418c9\",\n-                        \"$group_2\": \"http://localhost:8000\"\n-                    },\n-                    \"event\": \"$pageview\",\n-                    \"timestamp\": \"2022-01-24T07:43:44.012000+00:00\",\n-                    \"person\": {\n-                        \"is_identified\": true,\n-                        \"distinct_ids\": [\"UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj\"],\n-                        \"properties\": {\n-                            \"email\": \"paul@posthog.com\"\n-                        }\n-                    },\n-                    \"elements\": [],\n-                    \"elements_chain\": \"\"\n-                },\n-                {\n-                    \"id\": \"017e8b0a-7960-0001-883e-d1b3b2aa0d6f\",\n-                    \"distinct_id\": \"UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj\",\n-                    \"properties\": {\n-                        \"$os\": \"Mac OS X\",\n-                        \"$browser\": \"Chrome\",\n-                        \"$device_type\": \"Desktop\",\n-                        \"$current_url\": \"http://127.0.0.1:8000/action/15?properties=%5B%5D\",\n-                        \"$host\": \"127.0.0.1:8000\",\n-                        \"$pathname\": \"/action/15\",\n-                        \"$browser_version\": 97,\n-                        \"$screen_height\": 982,\n-                        \"$screen_width\": 1512,\n-                        \"$viewport_height\": 865,\n-                        \"$viewport_width\": 953,\n-                        \"$lib\": \"web\",\n-                        \"$lib_version\": \"1.17.3\",\n-                        \"$insert_id\": \"ajsnlp6t5nd8r5sn\",\n-                        \"$time\": 1643010223.819,\n-                        \"distinct_id\": \"UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj\",\n-                        \"$device_id\": \"17e6d9397cc50f-03939b929747b8-1d326253-16a7f0-17e6d9397cd1aa7\",\n-                        \"$initial_referrer\": \"http://127.0.0.1:8000/signup\",\n-                        \"$initial_referring_domain\": \"127.0.0.1:8000\",\n-                        \"$referrer\": \"http://127.0.0.1:8000/action/15?properties=%5B%5D\",\n-                        \"$referring_domain\": \"127.0.0.1:8000\",\n-                        \"$user_id\": \"UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj\",\n-                        \"is_demo_project\": false,\n-                        \"$groups\": {\n-                            \"project\": \"017e6d93-95c4-0000-3336-11f4c03eb344\",\n-                            \"organization\": \"017e6d93-8fa6-0000-deb6-1c78260418c9\",\n-                            \"instance\": \"http://localhost:8000\"\n-                        },\n-                        \"posthog_version\": \"1.31.1\",\n-                        \"realm\": \"hosted-clickhouse\",\n-                        \"is_clickhouse_enabled\": true,\n-                        \"ee_available\": true,\n-                        \"email_service_available\": false,\n-                        \"$active_feature_flags\": [\"6619-query-events-by-date\", \"hackathon-apm\", \"something\"],\n-                        \"$feature/6619-query-events-by-date\": true,\n-                        \"$feature/hackathon-apm\": true,\n-                        \"$feature/something\": true,\n-                        \"token\": \"phc_PzZhed4GBoxecFlTaC2hIY7JsSAghIPAIp2f3uwUsvw\",\n-                        \"$session_id\": \"17e8ae4b5a9323-0db8ef18d837a-1d326253-16a7f0-17e8ae4b5aa2db\",\n-                        \"$window_id\": \"17e8b0a3cad569-0e22532a0d29f9-1d326253-16a7f0-17e8b0a3caefa6\",\n-                        \"$performance_page_loaded\": 975.9,\n-                        \"$performance_raw\": \"{\\\"navigation\\\":[[\\\"name\\\",\\\"entryType\\\",\\\"duration\\\",\\\"initiatorType\\\",\\\"fetchStart\\\",\\\"domainLookupStart\\\",\\\"domainLookupEnd\\\",\\\"connectStart\\\",\\\"connectEnd\\\",\\\"requestStart\\\",\\\"responseStart\\\",\\\"responseEnd\\\",\\\"transferSize\\\",\\\"encodedBodySize\\\",\\\"decodedBodySize\\\",\\\"domInteractive\\\",\\\"domContentLoadedEventStart\\\",\\\"domContentLoadedEventEnd\\\",\\\"domComplete\\\",\\\"loadEventStart\\\",\\\"loadEventEnd\\\",\\\"type\\\"],[[\\\"http://127.0.0.1:8000/\\\",\\\"navigation\\\",975.9,\\\"navigation\\\",4.7,4.7,4.7,4.7,4.7,6,143.9,144.6,33609,33309,33309,328.2,328.2,328.2,975.5,975.5,975.9,\\\"navigate\\\"]]],\\\"paint\\\":[[\\\"name\\\",\\\"entryType\\\",\\\"startTime\\\"],[[\\\"first-paint\\\",\\\"paint\\\",289.7],[\\\"first-contentful-paint\\\",\\\"paint\\\",289.7]]],\\\"resource\\\":[[\\\"name\\\",\\\"startTime\\\",\\\"duration\\\",\\\"initiatorType\\\",\\\"fetchStart\\\",\\\"responseEnd\\\"],[[\\\"http://localhost:8234/static/index.css?t=1643010062816\\\",177.1,10.3,\\\"link\\\",177.1,187.4],[\\\"http://localhost:8234/static/index.js?t=1643010062816\\\",201.7,5.1,\\\"other\\\",201.7,206.8],[\\\"http://localhost:8234/static/chunk-XICZDHER.js\\\",208,4.3,\\\"other\\\",208,212.3],[\\\"http://localhost:8234/static/chunk-5MMMF5K7.js\\\",208.1,2.7,\\\"other\\\",208.1,210.8],[\\\"http://localhost:8234/static/chunk-ROHUIGSJ.js\\\",208.3,3.8,\\\"other\\\",208.3,212.1],[\\\"http://localhost:8234/static/chunk-ZO6AYWDD.js\\\",209.2,3.2,\\\"other\\\",209.2,212.4],[\\\"http://localhost:8234/static/chunk-3TJORNMS.js\\\",209.4,3,\\\"other\\\",209.4,212.4],[\\\"http://localhost:8234/static/chunk-MIOXAXF4.js\\\",209.5,2.9,\\\"other\\\",209.5,212.4],[\\\"http://localhost:8234/static/chunk-W3XSBZQT.js\\\",210.3,3.5,\\\"other\\\",210.3,213.8],[\\\"http://localhost:8234/static/chunk-HG47DNA6.js\\\",211.1,7.3,\\\"other\\\",211.1,218.4],[\\\"http://localhost:8234/static/chunk-KT2H2P52.js\\\",211.6,7,\\\"other\\\",211.6,218.6],[\\\"http://localhost:8234/static/chunk-WCD5LITO.js\\\",211.7,7.5,\\\"other\\\",211.7,219.2],[\\\"http://localhost:8234/static/chunk-OZGU6W75.js\\\",211.9,7.3,\\\"other\\\",211.9,219.2],[\\\"http://localhost:8234/static/chunk-GN5GHDD7.js\\\",212.6,8.9,\\\"other\\\",212.6,221.5],[\\\"http://localhost:8234/static/chunk-3HMUCGO3.js\\\",213.3,8.3,\\\"other\\\",213.3,221.6],[\\\"http://localhost:8234/static/chunk-LO4HT7SR.js\\\",213.5,6,\\\"other\\\",213.5,219.5],[\\\"http://localhost:8234/static/chunk-3GPSPDA2.js\\\",213.6,7.7,\\\"other\\\",213.6,221.3],[\\\"http://localhost:8234/static/chunk-3YSVPLYF.js\\\",213.7,7.6,\\\"other\\\",213.7,221.3],[\\\"http://localhost:8234/static/chunk-SS3VKUJU.js\\\",213.8,7.7,\\\"other\\\",213.8,221.5],[\\\"http://localhost:8234/static/chunk-2O667M4D.js\\\",214,7.8,\\\"other\\\",214,221.8],[\\\"http://localhost:8234/static/chunk-2VV7PQO5.js\\\",214.1,7.9,\\\"other\\\",214.1,222],[\\\"http://localhost:8234/static/chunk-SKUSLQI7.js\\\",214.3,7.8,\\\"other\\\",214.3,222.1],[\\\"http://localhost:8234/static/chunk-EOM6WIAG.js\\\",214.4,7.9,\\\"other\\\",214.4,222.3],[\\\"http://localhost:8234/static/chunk-GUJPPS5R.js\\\",214.4,7.9,\\\"other\\\",214.4,222.3],[\\\"http://localhost:8234/static/chunk-BCILFNT3.js\\\",216.6,5.7,\\\"other\\\",216.6,222.3],[\\\"http://localhost:8234/static/chunk-SPXZCQAI.js\\\",216.7,8,\\\"other\\\",216.7,224.7],[\\\"http://localhost:8234/static/chunk-XPGE43VJ.js\\\",217.4,5.8,\\\"other\\\",217.4,223.2],[\\\"http://localhost:8234/static/chunk-L4IYGZIG.js\\\",217.5,5.4,\\\"other\\\",217.5,222.9],[\\\"http://localhost:8234/static/chunk-IGTMCF24.js\\\",218.2,5.7,\\\"other\\\",218.2,223.9],[\\\"http://localhost:8234/static/chunk-AMOE3OJU.js\\\",220.6,3.6,\\\"other\\\",220.6,224.2],[\\\"http://localhost:8234/static/chunk-BO4VDBQ6.js\\\",223.4,4.6,\\\"other\\\",223.4,228],[\\\"http://localhost:8234/static/chunk-QE52CDVG.js\\\",223.7,4.4,\\\"other\\\",223.7,228.1],[\\\"http://localhost:8234/static/chunk-VHSG55N2.js\\\",223.9,4.2,\\\"other\\\",223.9,228.1],[\\\"http://localhost:8234/static/chunk-4ZUV5LND.js\\\",224.7,3.5,\\\"other\\\",224.7,228.2],[\\\"http://localhost:8234/static/chunk-ASGLZXIV.js\\\",224.8,3.4,\\\"other\\\",224.8,228.2],[\\\"http://localhost:8234/static/chunk-HGNVPWDY.js\\\",225.8,5.1,\\\"other\\\",225.8,230.9],[\\\"http://localhost:8234/static/chunk-LD3TGMGW.js\\\",225.8,8,\\\"other\\\",225.8,233.8],[\\\"http://localhost:8234/static/chunk-PRPBRI2E.js\\\",226.1,7.7,\\\"other\\\",226.1,233.8],[\\\"http://localhost:8234/static/chunk-CA6FFFUC.js\\\",226.2,8.1,\\\"other\\\",226.2,234.3],[\\\"http://localhost:8234/static/chunk-YBU6RJ5N.js\\\",226.4,7.9,\\\"other\\\",226.4,234.3],[\\\"http://localhost:8234/static/chunk-HB4RLT5O.js\\\",226.5,7.9,\\\"other\\\",226.5,234.4],[\\\"http://localhost:8234/static/chunk-UJJIEZBP.js\\\",226.6,9.4,\\\"other\\\",226.6,236],[\\\"http://localhost:8234/static/chunk-KXP7VI6L.js\\\",226.7,10.9,\\\"other\\\",226.7,237.6],[\\\"http://localhost:8234/static/chunk-OHMX2FMJ.js\\\",226.9,10.8,\\\"other\\\",226.9,237.7],[\\\"http://localhost:8234/static/chunk-ATKSJCQX.js\\\",227,10.9,\\\"other\\\",227,237.9],[\\\"http://localhost:8234/static/chunk-ZUFDLBNZ.js\\\",227.1,10.9,\\\"other\\\",227.1,238],[\\\"http://localhost:8234/static/chunk-HOR2D746.js\\\",228.2,13.7,\\\"other\\\",228.2,241.9],[\\\"http://localhost:8234/static/chunk-M6NPX6BS.js\\\",228.7,111.5,\\\"other\\\",228.7,340.2],[\\\"http://localhost:8234/static/chunk-VJGIAYQC.js\\\",229.1,9.5,\\\"other\\\",229.1,238.6],[\\\"http://localhost:8234/static/toolbar.js?_ts=1643010210987\\\",486.1,322.2,\\\"script\\\",486.1,808.3],[\\\"http://127.0.0.1:8000/e/?ip=1&_=1643010210995\\\",496.2,54,\\\"xmlhttprequest\\\",496.2,550.2],[\\\"http://127.0.0.1:8000/decide/?v=2&ip=1&_=1643010210998\\\",498.6,92,\\\"xmlhttprequest\\\",498.6,590.6],[\\\"http://127.0.0.1:8000/engage/?ip=1&_=1643010211018\\\",518.8,45.6,\\\"xmlhttprequest\\\",518.8,564.4],[\\\"http://localhost:8234/static/SavedInsights-TLZR4WTT.js\\\",528.9,5,\\\"other\\\",528.9,533.9],[\\\"http://127.0.0.1:8000/api/projects/1/actions/\\\",539.4,89.8,\\\"fetch\\\",539.4,629.2],[\\\"http://127.0.0.1:8000/api/projects/1/annotations/?scope=organization&deleted=false\\\",545.6,72.3,\\\"fetch\\\",545.6,617.9],[\\\"http://127.0.0.1:8000/api/projects/1/cohorts?limit=600\\\",546.5,71.4,\\\"fetch\\\",546.5,617.9],[\\\"http://127.0.0.1:8000/api/projects/1/event_definitions/?limit=5000\\\",547.6,107.5,\\\"fetch\\\",547.6,655.1],[\\\"http://127.0.0.1:8000/api/person/properties/\\\",548.1,113.5,\\\"fetch\\\",548.1,661.6],[\\\"http://127.0.0.1:8000/api/projects/@current/property_definitions/?limit=5000\\\",549.3,124.5,\\\"fetch\\\",549.3,673.8],[\\\"http://127.0.0.1:8000/api/instance_status/\\\",554.9,259.7,\\\"fetch\\\",554.9,814.6],[\\\"https://update.posthog.com/\\\",556.7,45.2,\\\"fetch\\\",556.7,601.9],[\\\"http://127.0.0.1:8000/api/organizations/@current/invites/\\\",558.5,107.4,\\\"fetch\\\",558.5,665.9],[\\\"http://127.0.0.1:8000/api/personal_api_keys/\\\",578.8,83.4,\\\"fetch\\\",578.8,662.2],[\\\"http://127.0.0.1:8000/api/license/\\\",586.5,90.1,\\\"fetch\\\",586.5,676.6],[\\\"https://www.gravatar.com/avatar/2e7d95b60efbe947f71009a1af1ba8d0?s=96&d=404\\\",625.1,1.9,\\\"img\\\",625.1,627],[\\\"http://127.0.0.1:8000/api/projects/1/dashboards/\\\",791.4,89.2,\\\"fetch\\\",791.4,880.6],[\\\"http://localhost:8234/static/chunk-LUMXGCOP.js\\\",836.2,3.8,\\\"other\\\",836.2,840],[\\\"http://localhost:8234/static/chunk-KJPTCBBC.js\\\",836.5,4.1,\\\"other\\\",836.5,840.6],[\\\"http://localhost:8234/static/chunk-X7HB5SUU.js\\\",836.6,10.6,\\\"other\\\",836.6,847.2],[\\\"http://localhost:8234/static/chunk-Z2MYP2M2.js\\\",836.7,14.4,\\\"other\\\",836.7,851.1],[\\\"http://localhost:8234/static/chunk-Z6ENRSEA.js\\\",836.8,20.6,\\\"other\\\",836.8,857.4],[\\\"http://localhost:8234/static/chunk-FJKTD6MY.js\\\",837.2,7,\\\"other\\\",837.2,844.2],[\\\"http://localhost:8234/static/chunk-XUGMYJGP.js\\\",837.6,10,\\\"other\\\",837.6,847.6],[\\\"http://localhost:8234/static/chunk-MVOT6GTL.js\\\",837.8,13.6,\\\"other\\\",837.8,851.4],[\\\"http://localhost:8234/static/chunk-IMI5TOQA.js\\\",838.1,10,\\\"other\\\",838.1,848.1],[\\\"http://localhost:8234/static/chunk-UHSVE7PG.js\\\",838.1,14.5,\\\"other\\\",838.1,852.6],[\\\"http://localhost:8234/static/chunk-HDKRWHJ6.js\\\",838.2,11.7,\\\"other\\\",838.2,849.9],[\\\"http://localhost:8234/static/chunk-BDCDUKQO.js\\\",838.3,11.8,\\\"other\\\",838.3,850.1],[\\\"http://localhost:8234/static/chunk-OIXFZ5LK.js\\\",838.5,13.1,\\\"other\\\",838.5,851.6],[\\\"http://localhost:8234/static/chunk-EB5W63F3.js\\\",838.5,13.3,\\\"other\\\",838.5,851.8],[\\\"http://localhost:8234/static/chunk-DFRCCFPU.js\\\",838.6,13.2,\\\"other\\\",838.6,851.8],[\\\"http://localhost:8234/static/chunk-A4QCHFI6.js\\\",838.7,13.1,\\\"other\\\",838.7,851.8],[\\\"http://localhost:8234/static/chunk-3BPMDJ3N.js\\\",838.9,12.9,\\\"other\\\",838.9,851.8],[\\\"http://localhost:8234/static/chunk-NHUSGGUD.js\\\",838.9,14.1,\\\"other\\\",838.9,853],[\\\"http://localhost:8234/static/chunk-SLQJA2PL.js\\\",838.9,15.2,\\\"other\\\",838.9,854.1],[\\\"http://localhost:8234/static/chunk-I5O3JHP6.js\\\",839.7,14.5,\\\"other\\\",839.7,854.2],[\\\"http://localhost:8234/static/chunk-F4AIONA2.js\\\",839.9,14.4,\\\"other\\\",839.9,854.3],[\\\"http://localhost:8234/static/chunk-63HTFI3S.js\\\",840,14.5,\\\"other\\\",840,854.5],[\\\"http://localhost:8234/static/chunk-ZCRZKRW7.js\\\",842.4,12.6,\\\"other\\\",842.4,855],[\\\"http://localhost:8234/static/chunk-C2C4IEM7.js\\\",842.7,12.7,\\\"other\\\",842.7,855.4],[\\\"http://localhost:8234/static/chunk-NGQGL7D3.js\\\",845.9,10,\\\"other\\\",845.9,855.9],[\\\"http://localhost:8234/static/chunk-PTR2RUUP.js\\\",846.2,9.7,\\\"other\\\",846.2,855.9],[\\\"http://localhost:8234/static/chunk-R3PDDW67.js\\\",846.8,9.1,\\\"other\\\",846.8,855.9],[\\\"http://localhost:8234/static/chunk-Q2Y3HUWS.js\\\",847.1,8.8,\\\"other\\\",847.1,855.9],[\\\"http://localhost:8234/static/chunk-Y7BHXLNZ.js\\\",847.2,9.2,\\\"other\\\",847.2,856.4],[\\\"http://localhost:8234/static/chunk-IVAJFO7S.js\\\",847.4,9.5,\\\"other\\\",847.4,856.9],[\\\"https://app.posthog.com/e/?ip=1&_=1643010211443&v=0.0.3\\\",942.9,133,\\\"fetch\\\",942.9,1075.9],[\\\"https://app.posthog.com/e/?ip=1&_=1643010211445&v=0.0.3\\\",944.1,140.3,\\\"fetch\\\",944.1,1084.4],[\\\"http://127.0.0.1:8000/api/projects/@current/feature_flags/my_flags?groups=%7B%22project%22%3A%22017e6d93-95c4-0000-3336-11f4c03eb344%22%2C%22organization%22%3A%22017e6d93-8fa6-0000-deb6-1c78260418c9%22%2C%22instance%22%3A%22http%3A%2F%2Flocalhost%3A8000%22%7D&temporary_token=0XkmhCQW51KcZfVzCPPlYmepazWsYXSTczmBHyJE2-g\\\",944.8,126.9,\\\"fetch\\\",944.8,1071.7],[\\\"http://localhost:8234/static/toolbar.css\\\",978.5,4.2,\\\"link\\\",978.5,982.7],[\\\"http://127.0.0.1:8000/api/projects/1/insights/?order=-updated_at&limit=20&offset=0&saved=true\\\",1021.7,183.3,\\\"fetch\\\",1021.7,1205],[\\\"http://127.0.0.1:8000/static/site.webmanifest?v=2021-04-29\\\",1046.1,10.4,\\\"other\\\",1046.1,1056.5],[\\\"http://127.0.0.1:8000/api/organizations/@current/members/?limit=200\\\",1122.8,68.5,\\\"fetch\\\",1122.8,1191.3],[\\\"http://127.0.0.1:8000/e/?compression=gzip-js&ip=1&_=1643010214487\\\",3989.9,14.7,\\\"xmlhttprequest\\\",3989.9,4004.6],[\\\"http://127.0.0.1:8000/e/?compression=gzip-js&ip=1&_=1643010217493\\\",6993.6,27.6,\\\"xmlhttprequest\\\",6993.6,7021.2],[\\\"http://localhost:8234/static/chunk-EYLKE6KE.js\\\",8043.3,54.4,\\\"other\\\",8043.3,8097.7],[\\\"http://localhost:8234/static/chunk-URHQA52P.js\\\",8043.7,55,\\\"other\\\",8043.7,8098.7],[\\\"http://localhost:8234/static/chunk-3B7RVXAB.js\\\",8043.9,56.2,\\\"other\\\",8043.9,8100.1],[\\\"http://localhost:8234/static/chunk-FS5CTTMA.js\\\",8044.4,54.3,\\\"other\\\",8044.4,8098.7],[\\\"http://localhost:8234/static/chunk-D43ZYSLF.js\\\",8044.7,54.2,\\\"other\\\",8044.7,8098.9],[\\\"http://localhost:8234/static/chunk-DUQI5YEH.js\\\",8044.9,56.5,\\\"other\\\",8044.9,8101.4],[\\\"http://localhost:8234/static/chunk-CJ7JBN4P.js\\\",8045.3,56.7,\\\"other\\\",8045.3,8102],[\\\"http://localhost:8234/static/chunk-JRLWBJNF.js\\\",8045.6,55.9,\\\"other\\\",8045.6,8101.5],[\\\"http://localhost:8234/static/chunk-OSOS22ZK.js\\\",8045.9,58.2,\\\"other\\\",8045.9,8104.1],[\\\"http://localhost:8234/static/chunk-KQBLA4V6.js\\\",8046.1,55.4,\\\"other\\\",8046.1,8101.5],[\\\"http://localhost:8234/static/chunk-W7PNUTIQ.js\\\",8046.3,55.5,\\\"other\\\",8046.3,8101.8],[\\\"http://localhost:8234/static/Events-LZ45RGCO.js\\\",8047.1,54.5,\\\"other\\\",8047.1,8101.6],[\\\"http://127.0.0.1:8000/api/projects/1/events/?properties=%5B%5D&orderBy=%5B%22-timestamp%22%5D&after=2021-01-24T07%3A43%3A38.625Z\\\",8124.2,513.5,\\\"fetch\\\",8124.2,8637.7],[\\\"http://127.0.0.1:8000/api/projects/1/events/?properties=%5B%5D&orderBy=%5B%22-timestamp%22%5D&after=2021-01-24T07%3A43%3A38.646Z\\\",8145.6,523.3,\\\"fetch\\\",8145.6,8668.9],[\\\"http://localhost:8234/static/assets/posthog-icon-FDVNZJ5Z.svg\\\",8855.4,1.9,\\\"css\\\",8855.4,8857.3],[\\\"http://127.0.0.1:8000/e/?compression=gzip-js&ip=1&_=1643010220499\\\",9999.8,40.2,\\\"xmlhttprequest\\\",9999.8,10040],[\\\"http://localhost:8234/static/chunk-EWTWTRB2.js\\\",10113.7,6.3,\\\"other\\\",10113.7,10120],[\\\"http://localhost:8234/static/ActionsTable-HEA24TMU.js\\\",10114.3,5.9,\\\"other\\\",10114.3,10120.2],[\\\"http://127.0.0.1:8000/static/assets/actions-tutorial-grouping-JZSPRS7B.svg\\\",10305.7,15.9,\\\"img\\\",10305.7,10321.6],[\\\"http://127.0.0.1:8000/static/assets/actions-tutorial-standardized-G647GOB5.svg\\\",10306,25.8,\\\"img\\\",10306,10331.8],[\\\"http://127.0.0.1:8000/static/assets/actions-tutorial-retroactive-S22RZKEF.svg\\\",10306.1,27.4,\\\"img\\\",10306.1,10333.5],[\\\"http://127.0.0.1:8000/e/?compression=gzip-js&ip=1&_=1643010223503\\\",13003.7,22,\\\"xmlhttprequest\\\",13003.7,13025.7],[\\\"http://localhost:8234/static/Action-V5A27KJB.js\\\",13222.6,17.2,\\\"other\\\",13222.6,13239.8],[\\\"http://127.0.0.1:8000/api/projects/1/actions/15/\\\",13246.3,38.8,\\\"fetch\\\",13246.3,13285.1]]]}\",\n-                        \"$geoip_city_name\": \"Sydney\",\n-                        \"$geoip_country_name\": \"Australia\",\n-                        \"$geoip_country_code\": \"AU\",\n-                        \"$geoip_continent_name\": \"Oceania\",\n-                        \"$geoip_continent_code\": \"OC\",\n-                        \"$geoip_postal_code\": \"2000\",\n-                        \"$geoip_latitude\": -33.8601,\n-                        \"$geoip_longitude\": 151.2101,\n-                        \"$geoip_time_zone\": \"Australia/Sydney\",\n-                        \"$geoip_subdivision_1_code\": \"NSW\",\n-                        \"$geoip_subdivision_1_name\": \"New South Wales\",\n-                        \"$plugins_succeeded\": [\"GeoIP (1)\"],\n-                        \"$plugins_failed\": [],\n-                        \"$plugins_deferred\": [],\n-                        \"$ip\": \"127.0.0.1\",\n-                        \"$set_once\": {\n-                            \"$initial_os\": \"Mac OS X\",\n-                            \"$initial_browser\": \"Chrome\",\n-                            \"$initial_device_type\": \"Desktop\",\n-                            \"$initial_current_url\": \"http://127.0.0.1:8000/action/15?properties=%5B%5D\",\n-                            \"$initial_browser_version\": 97,\n-                            \"$initial_referrer\": \"http://127.0.0.1:8000/action/15?properties=%5B%5D\",\n-                            \"$initial_referring_domain\": \"127.0.0.1:8000\"\n-                        },\n-                        \"$group_0\": \"017e6d93-95c4-0000-3336-11f4c03eb344\",\n-                        \"$group_1\": \"017e6d93-8fa6-0000-deb6-1c78260418c9\",\n-                        \"$group_2\": \"http://localhost:8000\"\n-                    },\n-                    \"event\": \"$pageview\",\n-                    \"timestamp\": \"2022-01-24T07:43:43.841000+00:00\",\n-                    \"person\": {\n-                        \"is_identified\": true,\n-                        \"distinct_ids\": [\"UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj\"],\n-                        \"properties\": {\n-                            \"email\": \"paul@posthog.com\"\n-                        }\n-                    },\n-                    \"elements\": [],\n-                    \"elements_chain\": \"\"\n-                },\n-                {\n-                    \"id\": \"017e8b0a-6da0-0000-7f65-7962ad0dc3ae\",\n-                    \"distinct_id\": \"UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj\",\n-                    \"properties\": {\n-                        \"$os\": \"Mac OS X\",\n-                        \"$browser\": \"Chrome\",\n-                        \"$device_type\": \"Desktop\",\n-                        \"$current_url\": \"http://127.0.0.1:8000/events/actions\",\n-                        \"$host\": \"127.0.0.1:8000\",\n-                        \"$pathname\": \"/events/actions\",\n-                        \"$browser_version\": 97,\n-                        \"$screen_height\": 982,\n-                        \"$screen_width\": 1512,\n-                        \"$viewport_height\": 865,\n-                        \"$viewport_width\": 953,\n-                        \"$lib\": \"web\",\n-                        \"$lib_version\": \"1.17.3\",\n-                        \"$insert_id\": \"dg02wkulm5i3s0ae\",\n-                        \"$time\": 1643010220.805,\n-                        \"distinct_id\": \"UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj\",\n-                        \"$device_id\": \"17e6d9397cc50f-03939b929747b8-1d326253-16a7f0-17e6d9397cd1aa7\",\n-                        \"$initial_referrer\": \"http://127.0.0.1:8000/signup\",\n-                        \"$initial_referring_domain\": \"127.0.0.1:8000\",\n-                        \"$referrer\": \"http://127.0.0.1:8000/action/15?properties=%5B%5D\",\n-                        \"$referring_domain\": \"127.0.0.1:8000\",\n-                        \"$user_id\": \"UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj\",\n-                        \"is_demo_project\": false,\n-                        \"$groups\": {\n-                            \"project\": \"017e6d93-95c4-0000-3336-11f4c03eb344\",\n-                            \"organization\": \"017e6d93-8fa6-0000-deb6-1c78260418c9\",\n-                            \"instance\": \"http://localhost:8000\"\n-                        },\n-                        \"posthog_version\": \"1.31.1\",\n-                        \"realm\": \"hosted-clickhouse\",\n-                        \"is_clickhouse_enabled\": true,\n-                        \"ee_available\": true,\n-                        \"email_service_available\": false,\n-                        \"$active_feature_flags\": [\"6619-query-events-by-date\", \"hackathon-apm\", \"something\"],\n-                        \"$feature/6619-query-events-by-date\": true,\n-                        \"$feature/hackathon-apm\": true,\n-                        \"$feature/something\": true,\n-                        \"token\": \"phc_PzZhed4GBoxecFlTaC2hIY7JsSAghIPAIp2f3uwUsvw\",\n-                        \"$session_id\": \"17e8ae4b5a9323-0db8ef18d837a-1d326253-16a7f0-17e8ae4b5aa2db\",\n-                        \"$window_id\": \"17e8b0a3cad569-0e22532a0d29f9-1d326253-16a7f0-17e8b0a3caefa6\",\n-                        \"$performance_page_loaded\": 975.9,\n-                        \"$performance_raw\": \"{\\\"navigation\\\":[[\\\"name\\\",\\\"entryType\\\",\\\"duration\\\",\\\"initiatorType\\\",\\\"fetchStart\\\",\\\"domainLookupStart\\\",\\\"domainLookupEnd\\\",\\\"connectStart\\\",\\\"connectEnd\\\",\\\"requestStart\\\",\\\"responseStart\\\",\\\"responseEnd\\\",\\\"transferSize\\\",\\\"encodedBodySize\\\",\\\"decodedBodySize\\\",\\\"domInteractive\\\",\\\"domContentLoadedEventStart\\\",\\\"domContentLoadedEventEnd\\\",\\\"domComplete\\\",\\\"loadEventStart\\\",\\\"loadEventEnd\\\",\\\"type\\\"],[[\\\"http://127.0.0.1:8000/\\\",\\\"navigation\\\",975.9,\\\"navigation\\\",4.7,4.7,4.7,4.7,4.7,6,143.9,144.6,33609,33309,33309,328.2,328.2,328.2,975.5,975.5,975.9,\\\"navigate\\\"]]],\\\"paint\\\":[[\\\"name\\\",\\\"entryType\\\",\\\"startTime\\\"],[[\\\"first-paint\\\",\\\"paint\\\",289.7],[\\\"first-contentful-paint\\\",\\\"paint\\\",289.7]]],\\\"resource\\\":[[\\\"name\\\",\\\"startTime\\\",\\\"duration\\\",\\\"initiatorType\\\",\\\"fetchStart\\\",\\\"responseEnd\\\"],[[\\\"http://localhost:8234/static/index.css?t=1643010062816\\\",177.1,10.3,\\\"link\\\",177.1,187.4],[\\\"http://localhost:8234/static/index.js?t=1643010062816\\\",201.7,5.1,\\\"other\\\",201.7,206.8],[\\\"http://localhost:8234/static/chunk-XICZDHER.js\\\",208,4.3,\\\"other\\\",208,212.3],[\\\"http://localhost:8234/static/chunk-5MMMF5K7.js\\\",208.1,2.7,\\\"other\\\",208.1,210.8],[\\\"http://localhost:8234/static/chunk-ROHUIGSJ.js\\\",208.3,3.8,\\\"other\\\",208.3,212.1],[\\\"http://localhost:8234/static/chunk-ZO6AYWDD.js\\\",209.2,3.2,\\\"other\\\",209.2,212.4],[\\\"http://localhost:8234/static/chunk-3TJORNMS.js\\\",209.4,3,\\\"other\\\",209.4,212.4],[\\\"http://localhost:8234/static/chunk-MIOXAXF4.js\\\",209.5,2.9,\\\"other\\\",209.5,212.4],[\\\"http://localhost:8234/static/chunk-W3XSBZQT.js\\\",210.3,3.5,\\\"other\\\",210.3,213.8],[\\\"http://localhost:8234/static/chunk-HG47DNA6.js\\\",211.1,7.3,\\\"other\\\",211.1,218.4],[\\\"http://localhost:8234/static/chunk-KT2H2P52.js\\\",211.6,7,\\\"other\\\",211.6,218.6],[\\\"http://localhost:8234/static/chunk-WCD5LITO.js\\\",211.7,7.5,\\\"other\\\",211.7,219.2],[\\\"http://localhost:8234/static/chunk-OZGU6W75.js\\\",211.9,7.3,\\\"other\\\",211.9,219.2],[\\\"http://localhost:8234/static/chunk-GN5GHDD7.js\\\",212.6,8.9,\\\"other\\\",212.6,221.5],[\\\"http://localhost:8234/static/chunk-3HMUCGO3.js\\\",213.3,8.3,\\\"other\\\",213.3,221.6],[\\\"http://localhost:8234/static/chunk-LO4HT7SR.js\\\",213.5,6,\\\"other\\\",213.5,219.5],[\\\"http://localhost:8234/static/chunk-3GPSPDA2.js\\\",213.6,7.7,\\\"other\\\",213.6,221.3],[\\\"http://localhost:8234/static/chunk-3YSVPLYF.js\\\",213.7,7.6,\\\"other\\\",213.7,221.3],[\\\"http://localhost:8234/static/chunk-SS3VKUJU.js\\\",213.8,7.7,\\\"other\\\",213.8,221.5],[\\\"http://localhost:8234/static/chunk-2O667M4D.js\\\",214,7.8,\\\"other\\\",214,221.8],[\\\"http://localhost:8234/static/chunk-2VV7PQO5.js\\\",214.1,7.9,\\\"other\\\",214.1,222],[\\\"http://localhost:8234/static/chunk-SKUSLQI7.js\\\",214.3,7.8,\\\"other\\\",214.3,222.1],[\\\"http://localhost:8234/static/chunk-EOM6WIAG.js\\\",214.4,7.9,\\\"other\\\",214.4,222.3],[\\\"http://localhost:8234/static/chunk-GUJPPS5R.js\\\",214.4,7.9,\\\"other\\\",214.4,222.3],[\\\"http://localhost:8234/static/chunk-BCILFNT3.js\\\",216.6,5.7,\\\"other\\\",216.6,222.3],[\\\"http://localhost:8234/static/chunk-SPXZCQAI.js\\\",216.7,8,\\\"other\\\",216.7,224.7],[\\\"http://localhost:8234/static/chunk-XPGE43VJ.js\\\",217.4,5.8,\\\"other\\\",217.4,223.2],[\\\"http://localhost:8234/static/chunk-L4IYGZIG.js\\\",217.5,5.4,\\\"other\\\",217.5,222.9],[\\\"http://localhost:8234/static/chunk-IGTMCF24.js\\\",218.2,5.7,\\\"other\\\",218.2,223.9],[\\\"http://localhost:8234/static/chunk-AMOE3OJU.js\\\",220.6,3.6,\\\"other\\\",220.6,224.2],[\\\"http://localhost:8234/static/chunk-BO4VDBQ6.js\\\",223.4,4.6,\\\"other\\\",223.4,228],[\\\"http://localhost:8234/static/chunk-QE52CDVG.js\\\",223.7,4.4,\\\"other\\\",223.7,228.1],[\\\"http://localhost:8234/static/chunk-VHSG55N2.js\\\",223.9,4.2,\\\"other\\\",223.9,228.1],[\\\"http://localhost:8234/static/chunk-4ZUV5LND.js\\\",224.7,3.5,\\\"other\\\",224.7,228.2],[\\\"http://localhost:8234/static/chunk-ASGLZXIV.js\\\",224.8,3.4,\\\"other\\\",224.8,228.2],[\\\"http://localhost:8234/static/chunk-HGNVPWDY.js\\\",225.8,5.1,\\\"other\\\",225.8,230.9],[\\\"http://localhost:8234/static/chunk-LD3TGMGW.js\\\",225.8,8,\\\"other\\\",225.8,233.8],[\\\"http://localhost:8234/static/chunk-PRPBRI2E.js\\\",226.1,7.7,\\\"other\\\",226.1,233.8],[\\\"http://localhost:8234/static/chunk-CA6FFFUC.js\\\",226.2,8.1,\\\"other\\\",226.2,234.3],[\\\"http://localhost:8234/static/chunk-YBU6RJ5N.js\\\",226.4,7.9,\\\"other\\\",226.4,234.3],[\\\"http://localhost:8234/static/chunk-HB4RLT5O.js\\\",226.5,7.9,\\\"other\\\",226.5,234.4],[\\\"http://localhost:8234/static/chunk-UJJIEZBP.js\\\",226.6,9.4,\\\"other\\\",226.6,236],[\\\"http://localhost:8234/static/chunk-KXP7VI6L.js\\\",226.7,10.9,\\\"other\\\",226.7,237.6],[\\\"http://localhost:8234/static/chunk-OHMX2FMJ.js\\\",226.9,10.8,\\\"other\\\",226.9,237.7],[\\\"http://localhost:8234/static/chunk-ATKSJCQX.js\\\",227,10.9,\\\"other\\\",227,237.9],[\\\"http://localhost:8234/static/chunk-ZUFDLBNZ.js\\\",227.1,10.9,\\\"other\\\",227.1,238],[\\\"http://localhost:8234/static/chunk-HOR2D746.js\\\",228.2,13.7,\\\"other\\\",228.2,241.9],[\\\"http://localhost:8234/static/chunk-M6NPX6BS.js\\\",228.7,111.5,\\\"other\\\",228.7,340.2],[\\\"http://localhost:8234/static/chunk-VJGIAYQC.js\\\",229.1,9.5,\\\"other\\\",229.1,238.6],[\\\"http://localhost:8234/static/toolbar.js?_ts=1643010210987\\\",486.1,322.2,\\\"script\\\",486.1,808.3],[\\\"http://127.0.0.1:8000/e/?ip=1&_=1643010210995\\\",496.2,54,\\\"xmlhttprequest\\\",496.2,550.2],[\\\"http://127.0.0.1:8000/decide/?v=2&ip=1&_=1643010210998\\\",498.6,92,\\\"xmlhttprequest\\\",498.6,590.6],[\\\"http://127.0.0.1:8000/engage/?ip=1&_=1643010211018\\\",518.8,45.6,\\\"xmlhttprequest\\\",518.8,564.4],[\\\"http://localhost:8234/static/SavedInsights-TLZR4WTT.js\\\",528.9,5,\\\"other\\\",528.9,533.9],[\\\"http://127.0.0.1:8000/api/projects/1/actions/\\\",539.4,89.8,\\\"fetch\\\",539.4,629.2],[\\\"http://127.0.0.1:8000/api/projects/1/annotations/?scope=organization&deleted=false\\\",545.6,72.3,\\\"fetch\\\",545.6,617.9],[\\\"http://127.0.0.1:8000/api/projects/1/cohorts?limit=600\\\",546.5,71.4,\\\"fetch\\\",546.5,617.9],[\\\"http://127.0.0.1:8000/api/projects/1/event_definitions/?limit=5000\\\",547.6,107.5,\\\"fetch\\\",547.6,655.1],[\\\"http://127.0.0.1:8000/api/person/properties/\\\",548.1,113.5,\\\"fetch\\\",548.1,661.6],[\\\"http://127.0.0.1:8000/api/projects/@current/property_definitions/?limit=5000\\\",549.3,124.5,\\\"fetch\\\",549.3,673.8],[\\\"http://127.0.0.1:8000/api/instance_status/\\\",554.9,259.7,\\\"fetch\\\",554.9,814.6],[\\\"https://update.posthog.com/\\\",556.7,45.2,\\\"fetch\\\",556.7,601.9],[\\\"http://127.0.0.1:8000/api/organizations/@current/invites/\\\",558.5,107.4,\\\"fetch\\\",558.5,665.9],[\\\"http://127.0.0.1:8000/api/personal_api_keys/\\\",578.8,83.4,\\\"fetch\\\",578.8,662.2],[\\\"http://127.0.0.1:8000/api/license/\\\",586.5,90.1,\\\"fetch\\\",586.5,676.6],[\\\"https://www.gravatar.com/avatar/2e7d95b60efbe947f71009a1af1ba8d0?s=96&d=404\\\",625.1,1.9,\\\"img\\\",625.1,627],[\\\"http://127.0.0.1:8000/api/projects/1/dashboards/\\\",791.4,89.2,\\\"fetch\\\",791.4,880.6],[\\\"http://localhost:8234/static/chunk-LUMXGCOP.js\\\",836.2,3.8,\\\"other\\\",836.2,840],[\\\"http://localhost:8234/static/chunk-KJPTCBBC.js\\\",836.5,4.1,\\\"other\\\",836.5,840.6],[\\\"http://localhost:8234/static/chunk-X7HB5SUU.js\\\",836.6,10.6,\\\"other\\\",836.6,847.2],[\\\"http://localhost:8234/static/chunk-Z2MYP2M2.js\\\",836.7,14.4,\\\"other\\\",836.7,851.1],[\\\"http://localhost:8234/static/chunk-Z6ENRSEA.js\\\",836.8,20.6,\\\"other\\\",836.8,857.4],[\\\"http://localhost:8234/static/chunk-FJKTD6MY.js\\\",837.2,7,\\\"other\\\",837.2,844.2],[\\\"http://localhost:8234/static/chunk-XUGMYJGP.js\\\",837.6,10,\\\"other\\\",837.6,847.6],[\\\"http://localhost:8234/static/chunk-MVOT6GTL.js\\\",837.8,13.6,\\\"other\\\",837.8,851.4],[\\\"http://localhost:8234/static/chunk-IMI5TOQA.js\\\",838.1,10,\\\"other\\\",838.1,848.1],[\\\"http://localhost:8234/static/chunk-UHSVE7PG.js\\\",838.1,14.5,\\\"other\\\",838.1,852.6],[\\\"http://localhost:8234/static/chunk-HDKRWHJ6.js\\\",838.2,11.7,\\\"other\\\",838.2,849.9],[\\\"http://localhost:8234/static/chunk-BDCDUKQO.js\\\",838.3,11.8,\\\"other\\\",838.3,850.1],[\\\"http://localhost:8234/static/chunk-OIXFZ5LK.js\\\",838.5,13.1,\\\"other\\\",838.5,851.6],[\\\"http://localhost:8234/static/chunk-EB5W63F3.js\\\",838.5,13.3,\\\"other\\\",838.5,851.8],[\\\"http://localhost:8234/static/chunk-DFRCCFPU.js\\\",838.6,13.2,\\\"other\\\",838.6,851.8],[\\\"http://localhost:8234/static/chunk-A4QCHFI6.js\\\",838.7,13.1,\\\"other\\\",838.7,851.8],[\\\"http://localhost:8234/static/chunk-3BPMDJ3N.js\\\",838.9,12.9,\\\"other\\\",838.9,851.8],[\\\"http://localhost:8234/static/chunk-NHUSGGUD.js\\\",838.9,14.1,\\\"other\\\",838.9,853],[\\\"http://localhost:8234/static/chunk-SLQJA2PL.js\\\",838.9,15.2,\\\"other\\\",838.9,854.1],[\\\"http://localhost:8234/static/chunk-I5O3JHP6.js\\\",839.7,14.5,\\\"other\\\",839.7,854.2],[\\\"http://localhost:8234/static/chunk-F4AIONA2.js\\\",839.9,14.4,\\\"other\\\",839.9,854.3],[\\\"http://localhost:8234/static/chunk-63HTFI3S.js\\\",840,14.5,\\\"other\\\",840,854.5],[\\\"http://localhost:8234/static/chunk-ZCRZKRW7.js\\\",842.4,12.6,\\\"other\\\",842.4,855],[\\\"http://localhost:8234/static/chunk-C2C4IEM7.js\\\",842.7,12.7,\\\"other\\\",842.7,855.4],[\\\"http://localhost:8234/static/chunk-NGQGL7D3.js\\\",845.9,10,\\\"other\\\",845.9,855.9],[\\\"http://localhost:8234/static/chunk-PTR2RUUP.js\\\",846.2,9.7,\\\"other\\\",846.2,855.9],[\\\"http://localhost:8234/static/chunk-R3PDDW67.js\\\",846.8,9.1,\\\"other\\\",846.8,855.9],[\\\"http://localhost:8234/static/chunk-Q2Y3HUWS.js\\\",847.1,8.8,\\\"other\\\",847.1,855.9],[\\\"http://localhost:8234/static/chunk-Y7BHXLNZ.js\\\",847.2,9.2,\\\"other\\\",847.2,856.4],[\\\"http://localhost:8234/static/chunk-IVAJFO7S.js\\\",847.4,9.5,\\\"other\\\",847.4,856.9],[\\\"https://app.posthog.com/e/?ip=1&_=1643010211443&v=0.0.3\\\",942.9,133,\\\"fetch\\\",942.9,1075.9],[\\\"https://app.posthog.com/e/?ip=1&_=1643010211445&v=0.0.3\\\",944.1,140.3,\\\"fetch\\\",944.1,1084.4],[\\\"http://127.0.0.1:8000/api/projects/@current/feature_flags/my_flags?groups=%7B%22project%22%3A%22017e6d93-95c4-0000-3336-11f4c03eb344%22%2C%22organization%22%3A%22017e6d93-8fa6-0000-deb6-1c78260418c9%22%2C%22instance%22%3A%22http%3A%2F%2Flocalhost%3A8000%22%7D&temporary_token=0XkmhCQW51KcZfVzCPPlYmepazWsYXSTczmBHyJE2-g\\\",944.8,126.9,\\\"fetch\\\",944.8,1071.7],[\\\"http://localhost:8234/static/toolbar.css\\\",978.5,4.2,\\\"link\\\",978.5,982.7],[\\\"http://127.0.0.1:8000/api/projects/1/insights/?order=-updated_at&limit=20&offset=0&saved=true\\\",1021.7,183.3,\\\"fetch\\\",1021.7,1205],[\\\"http://127.0.0.1:8000/static/site.webmanifest?v=2021-04-29\\\",1046.1,10.4,\\\"other\\\",1046.1,1056.5],[\\\"http://127.0.0.1:8000/api/organizations/@current/members/?limit=200\\\",1122.8,68.5,\\\"fetch\\\",1122.8,1191.3],[\\\"http://127.0.0.1:8000/e/?compression=gzip-js&ip=1&_=1643010214487\\\",3989.9,14.7,\\\"xmlhttprequest\\\",3989.9,4004.6],[\\\"http://127.0.0.1:8000/e/?compression=gzip-js&ip=1&_=1643010217493\\\",6993.6,27.6,\\\"xmlhttprequest\\\",6993.6,7021.2],[\\\"http://localhost:8234/static/chunk-EYLKE6KE.js\\\",8043.3,54.4,\\\"other\\\",8043.3,8097.7],[\\\"http://localhost:8234/static/chunk-URHQA52P.js\\\",8043.7,55,\\\"other\\\",8043.7,8098.7],[\\\"http://localhost:8234/static/chunk-3B7RVXAB.js\\\",8043.9,56.2,\\\"other\\\",8043.9,8100.1],[\\\"http://localhost:8234/static/chunk-FS5CTTMA.js\\\",8044.4,54.3,\\\"other\\\",8044.4,8098.7],[\\\"http://localhost:8234/static/chunk-D43ZYSLF.js\\\",8044.7,54.2,\\\"other\\\",8044.7,8098.9],[\\\"http://localhost:8234/static/chunk-DUQI5YEH.js\\\",8044.9,56.5,\\\"other\\\",8044.9,8101.4],[\\\"http://localhost:8234/static/chunk-CJ7JBN4P.js\\\",8045.3,56.7,\\\"other\\\",8045.3,8102],[\\\"http://localhost:8234/static/chunk-JRLWBJNF.js\\\",8045.6,55.9,\\\"other\\\",8045.6,8101.5],[\\\"http://localhost:8234/static/chunk-OSOS22ZK.js\\\",8045.9,58.2,\\\"other\\\",8045.9,8104.1],[\\\"http://localhost:8234/static/chunk-KQBLA4V6.js\\\",8046.1,55.4,\\\"other\\\",8046.1,8101.5],[\\\"http://localhost:8234/static/chunk-W7PNUTIQ.js\\\",8046.3,55.5,\\\"other\\\",8046.3,8101.8],[\\\"http://localhost:8234/static/Events-LZ45RGCO.js\\\",8047.1,54.5,\\\"other\\\",8047.1,8101.6],[\\\"http://127.0.0.1:8000/api/projects/1/events/?properties=%5B%5D&orderBy=%5B%22-timestamp%22%5D&after=2021-01-24T07%3A43%3A38.625Z\\\",8124.2,513.5,\\\"fetch\\\",8124.2,8637.7],[\\\"http://127.0.0.1:8000/api/projects/1/events/?properties=%5B%5D&orderBy=%5B%22-timestamp%22%5D&after=2021-01-24T07%3A43%3A38.646Z\\\",8145.6,523.3,\\\"fetch\\\",8145.6,8668.9],[\\\"http://localhost:8234/static/assets/posthog-icon-FDVNZJ5Z.svg\\\",8855.4,1.9,\\\"css\\\",8855.4,8857.3],[\\\"http://127.0.0.1:8000/e/?compression=gzip-js&ip=1&_=1643010220499\\\",9999.8,40.2,\\\"xmlhttprequest\\\",9999.8,10040],[\\\"http://localhost:8234/static/chunk-EWTWTRB2.js\\\",10113.7,6.3,\\\"other\\\",10113.7,10120],[\\\"http://localhost:8234/static/ActionsTable-HEA24TMU.js\\\",10114.3,5.9,\\\"other\\\",10114.3,10120.2]]]}\",\n-                        \"$geoip_city_name\": \"Sydney\",\n-                        \"$geoip_country_name\": \"Australia\",\n-                        \"$geoip_country_code\": \"AU\",\n-                        \"$geoip_continent_name\": \"Oceania\",\n-                        \"$geoip_continent_code\": \"OC\",\n-                        \"$geoip_postal_code\": \"2000\",\n-                        \"$geoip_latitude\": -33.8601,\n-                        \"$geoip_longitude\": 151.2101,\n-                        \"$geoip_time_zone\": \"Australia/Sydney\",\n-                        \"$geoip_subdivision_1_code\": \"NSW\",\n-                        \"$geoip_subdivision_1_name\": \"New South Wales\",\n-                        \"$plugins_succeeded\": [\"GeoIP (1)\"],\n-                        \"$plugins_failed\": [],\n-                        \"$plugins_deferred\": [],\n-                        \"$ip\": \"127.0.0.1\",\n-                        \"$set_once\": {\n-                            \"$initial_os\": \"Mac OS X\",\n-                            \"$initial_browser\": \"Chrome\",\n-                            \"$initial_device_type\": \"Desktop\",\n-                            \"$initial_current_url\": \"http://127.0.0.1:8000/events/actions\",\n-                            \"$initial_browser_version\": 97,\n-                            \"$initial_referrer\": \"http://127.0.0.1:8000/action/15?properties=%5B%5D\",\n-                            \"$initial_referring_domain\": \"127.0.0.1:8000\"\n-                        },\n-                        \"$group_0\": \"017e6d93-95c4-0000-3336-11f4c03eb344\",\n-                        \"$group_1\": \"017e6d93-8fa6-0000-deb6-1c78260418c9\",\n-                        \"$group_2\": \"http://localhost:8000\"\n-                    },\n-                    \"event\": \"$pageview\",\n-                    \"timestamp\": \"2022-01-24T07:43:40.820000+00:00\",\n-                    \"person\": {\n-                        \"is_identified\": true,\n-                        \"distinct_ids\": [\"UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj\"],\n-                        \"properties\": {\n-                            \"email\": \"paul@posthog.com\"\n-                        }\n-                    },\n-                    \"elements\": [],\n-                    \"elements_chain\": \"\"\n-                },\n-                {\n-                    \"id\": \"017e8b0a-61ea-0000-42ad-f3a1db04b33f\",\n-                    \"distinct_id\": \"UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj\",\n-                    \"properties\": {\n-                        \"$os\": \"Mac OS X\",\n-                        \"$browser\": \"Chrome\",\n-                        \"$device_type\": \"Desktop\",\n-                        \"$current_url\": \"http://127.0.0.1:8000/events?properties=%5B%5D\",\n-                        \"$host\": \"127.0.0.1:8000\",\n-                        \"$pathname\": \"/events\",\n-                        \"$browser_version\": 97,\n-                        \"$screen_height\": 982,\n-                        \"$screen_width\": 1512,\n-                        \"$viewport_height\": 865,\n-                        \"$viewport_width\": 953,\n-                        \"$lib\": \"web\",\n-                        \"$lib_version\": \"1.17.3\",\n-                        \"$insert_id\": \"p5z9zh7jjx88px1c\",\n-                        \"$time\": 1643010218.641,\n-                        \"distinct_id\": \"UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj\",\n-                        \"$device_id\": \"17e6d9397cc50f-03939b929747b8-1d326253-16a7f0-17e6d9397cd1aa7\",\n-                        \"$initial_referrer\": \"http://127.0.0.1:8000/signup\",\n-                        \"$initial_referring_domain\": \"127.0.0.1:8000\",\n-                        \"$referrer\": \"http://127.0.0.1:8000/action/15?properties=%5B%5D\",\n-                        \"$referring_domain\": \"127.0.0.1:8000\",\n-                        \"$user_id\": \"UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj\",\n-                        \"is_demo_project\": false,\n-                        \"$groups\": {\n-                            \"project\": \"017e6d93-95c4-0000-3336-11f4c03eb344\",\n-                            \"organization\": \"017e6d93-8fa6-0000-deb6-1c78260418c9\",\n-                            \"instance\": \"http://localhost:8000\"\n-                        },\n-                        \"posthog_version\": \"1.31.1\",\n-                        \"realm\": \"hosted-clickhouse\",\n-                        \"is_clickhouse_enabled\": true,\n-                        \"ee_available\": true,\n-                        \"email_service_available\": false,\n-                        \"$active_feature_flags\": [\"6619-query-events-by-date\", \"hackathon-apm\", \"something\"],\n-                        \"$feature/6619-query-events-by-date\": true,\n-                        \"$feature/hackathon-apm\": true,\n-                        \"$feature/something\": true,\n-                        \"token\": \"phc_PzZhed4GBoxecFlTaC2hIY7JsSAghIPAIp2f3uwUsvw\",\n-                        \"$session_id\": \"17e8ae4b5a9323-0db8ef18d837a-1d326253-16a7f0-17e8ae4b5aa2db\",\n-                        \"$window_id\": \"17e8b0a3cad569-0e22532a0d29f9-1d326253-16a7f0-17e8b0a3caefa6\",\n-                        \"$performance_page_loaded\": 975.9,\n-                        \"$performance_raw\": \"{\\\"navigation\\\":[[\\\"name\\\",\\\"entryType\\\",\\\"duration\\\",\\\"initiatorType\\\",\\\"fetchStart\\\",\\\"domainLookupStart\\\",\\\"domainLookupEnd\\\",\\\"connectStart\\\",\\\"connectEnd\\\",\\\"requestStart\\\",\\\"responseStart\\\",\\\"responseEnd\\\",\\\"transferSize\\\",\\\"encodedBodySize\\\",\\\"decodedBodySize\\\",\\\"domInteractive\\\",\\\"domContentLoadedEventStart\\\",\\\"domContentLoadedEventEnd\\\",\\\"domComplete\\\",\\\"loadEventStart\\\",\\\"loadEventEnd\\\",\\\"type\\\"],[[\\\"http://127.0.0.1:8000/\\\",\\\"navigation\\\",975.9,\\\"navigation\\\",4.7,4.7,4.7,4.7,4.7,6,143.9,144.6,33609,33309,33309,328.2,328.2,328.2,975.5,975.5,975.9,\\\"navigate\\\"]]],\\\"paint\\\":[[\\\"name\\\",\\\"entryType\\\",\\\"startTime\\\"],[[\\\"first-paint\\\",\\\"paint\\\",289.7],[\\\"first-contentful-paint\\\",\\\"paint\\\",289.7]]],\\\"resource\\\":[[\\\"name\\\",\\\"startTime\\\",\\\"duration\\\",\\\"initiatorType\\\",\\\"fetchStart\\\",\\\"responseEnd\\\"],[[\\\"http://localhost:8234/static/index.css?t=1643010062816\\\",177.1,10.3,\\\"link\\\",177.1,187.4],[\\\"http://localhost:8234/static/index.js?t=1643010062816\\\",201.7,5.1,\\\"other\\\",201.7,206.8],[\\\"http://localhost:8234/static/chunk-XICZDHER.js\\\",208,4.3,\\\"other\\\",208,212.3],[\\\"http://localhost:8234/static/chunk-5MMMF5K7.js\\\",208.1,2.7,\\\"other\\\",208.1,210.8],[\\\"http://localhost:8234/static/chunk-ROHUIGSJ.js\\\",208.3,3.8,\\\"other\\\",208.3,212.1],[\\\"http://localhost:8234/static/chunk-ZO6AYWDD.js\\\",209.2,3.2,\\\"other\\\",209.2,212.4],[\\\"http://localhost:8234/static/chunk-3TJORNMS.js\\\",209.4,3,\\\"other\\\",209.4,212.4],[\\\"http://localhost:8234/static/chunk-MIOXAXF4.js\\\",209.5,2.9,\\\"other\\\",209.5,212.4],[\\\"http://localhost:8234/static/chunk-W3XSBZQT.js\\\",210.3,3.5,\\\"other\\\",210.3,213.8],[\\\"http://localhost:8234/static/chunk-HG47DNA6.js\\\",211.1,7.3,\\\"other\\\",211.1,218.4],[\\\"http://localhost:8234/static/chunk-KT2H2P52.js\\\",211.6,7,\\\"other\\\",211.6,218.6],[\\\"http://localhost:8234/static/chunk-WCD5LITO.js\\\",211.7,7.5,\\\"other\\\",211.7,219.2],[\\\"http://localhost:8234/static/chunk-OZGU6W75.js\\\",211.9,7.3,\\\"other\\\",211.9,219.2],[\\\"http://localhost:8234/static/chunk-GN5GHDD7.js\\\",212.6,8.9,\\\"other\\\",212.6,221.5],[\\\"http://localhost:8234/static/chunk-3HMUCGO3.js\\\",213.3,8.3,\\\"other\\\",213.3,221.6],[\\\"http://localhost:8234/static/chunk-LO4HT7SR.js\\\",213.5,6,\\\"other\\\",213.5,219.5],[\\\"http://localhost:8234/static/chunk-3GPSPDA2.js\\\",213.6,7.7,\\\"other\\\",213.6,221.3],[\\\"http://localhost:8234/static/chunk-3YSVPLYF.js\\\",213.7,7.6,\\\"other\\\",213.7,221.3],[\\\"http://localhost:8234/static/chunk-SS3VKUJU.js\\\",213.8,7.7,\\\"other\\\",213.8,221.5],[\\\"http://localhost:8234/static/chunk-2O667M4D.js\\\",214,7.8,\\\"other\\\",214,221.8],[\\\"http://localhost:8234/static/chunk-2VV7PQO5.js\\\",214.1,7.9,\\\"other\\\",214.1,222],[\\\"http://localhost:8234/static/chunk-SKUSLQI7.js\\\",214.3,7.8,\\\"other\\\",214.3,222.1],[\\\"http://localhost:8234/static/chunk-EOM6WIAG.js\\\",214.4,7.9,\\\"other\\\",214.4,222.3],[\\\"http://localhost:8234/static/chunk-GUJPPS5R.js\\\",214.4,7.9,\\\"other\\\",214.4,222.3],[\\\"http://localhost:8234/static/chunk-BCILFNT3.js\\\",216.6,5.7,\\\"other\\\",216.6,222.3],[\\\"http://localhost:8234/static/chunk-SPXZCQAI.js\\\",216.7,8,\\\"other\\\",216.7,224.7],[\\\"http://localhost:8234/static/chunk-XPGE43VJ.js\\\",217.4,5.8,\\\"other\\\",217.4,223.2],[\\\"http://localhost:8234/static/chunk-L4IYGZIG.js\\\",217.5,5.4,\\\"other\\\",217.5,222.9],[\\\"http://localhost:8234/static/chunk-IGTMCF24.js\\\",218.2,5.7,\\\"other\\\",218.2,223.9],[\\\"http://localhost:8234/static/chunk-AMOE3OJU.js\\\",220.6,3.6,\\\"other\\\",220.6,224.2],[\\\"http://localhost:8234/static/chunk-BO4VDBQ6.js\\\",223.4,4.6,\\\"other\\\",223.4,228],[\\\"http://localhost:8234/static/chunk-QE52CDVG.js\\\",223.7,4.4,\\\"other\\\",223.7,228.1],[\\\"http://localhost:8234/static/chunk-VHSG55N2.js\\\",223.9,4.2,\\\"other\\\",223.9,228.1],[\\\"http://localhost:8234/static/chunk-4ZUV5LND.js\\\",224.7,3.5,\\\"other\\\",224.7,228.2],[\\\"http://localhost:8234/static/chunk-ASGLZXIV.js\\\",224.8,3.4,\\\"other\\\",224.8,228.2],[\\\"http://localhost:8234/static/chunk-HGNVPWDY.js\\\",225.8,5.1,\\\"other\\\",225.8,230.9],[\\\"http://localhost:8234/static/chunk-LD3TGMGW.js\\\",225.8,8,\\\"other\\\",225.8,233.8],[\\\"http://localhost:8234/static/chunk-PRPBRI2E.js\\\",226.1,7.7,\\\"other\\\",226.1,233.8],[\\\"http://localhost:8234/static/chunk-CA6FFFUC.js\\\",226.2,8.1,\\\"other\\\",226.2,234.3],[\\\"http://localhost:8234/static/chunk-YBU6RJ5N.js\\\",226.4,7.9,\\\"other\\\",226.4,234.3],[\\\"http://localhost:8234/static/chunk-HB4RLT5O.js\\\",226.5,7.9,\\\"other\\\",226.5,234.4],[\\\"http://localhost:8234/static/chunk-UJJIEZBP.js\\\",226.6,9.4,\\\"other\\\",226.6,236],[\\\"http://localhost:8234/static/chunk-KXP7VI6L.js\\\",226.7,10.9,\\\"other\\\",226.7,237.6],[\\\"http://localhost:8234/static/chunk-OHMX2FMJ.js\\\",226.9,10.8,\\\"other\\\",226.9,237.7],[\\\"http://localhost:8234/static/chunk-ATKSJCQX.js\\\",227,10.9,\\\"other\\\",227,237.9],[\\\"http://localhost:8234/static/chunk-ZUFDLBNZ.js\\\",227.1,10.9,\\\"other\\\",227.1,238],[\\\"http://localhost:8234/static/chunk-HOR2D746.js\\\",228.2,13.7,\\\"other\\\",228.2,241.9],[\\\"http://localhost:8234/static/chunk-M6NPX6BS.js\\\",228.7,111.5,\\\"other\\\",228.7,340.2],[\\\"http://localhost:8234/static/chunk-VJGIAYQC.js\\\",229.1,9.5,\\\"other\\\",229.1,238.6],[\\\"http://localhost:8234/static/toolbar.js?_ts=1643010210987\\\",486.1,322.2,\\\"script\\\",486.1,808.3],[\\\"http://127.0.0.1:8000/e/?ip=1&_=1643010210995\\\",496.2,54,\\\"xmlhttprequest\\\",496.2,550.2],[\\\"http://127.0.0.1:8000/decide/?v=2&ip=1&_=1643010210998\\\",498.6,92,\\\"xmlhttprequest\\\",498.6,590.6],[\\\"http://127.0.0.1:8000/engage/?ip=1&_=1643010211018\\\",518.8,45.6,\\\"xmlhttprequest\\\",518.8,564.4],[\\\"http://localhost:8234/static/SavedInsights-TLZR4WTT.js\\\",528.9,5,\\\"other\\\",528.9,533.9],[\\\"http://127.0.0.1:8000/api/projects/1/actions/\\\",539.4,89.8,\\\"fetch\\\",539.4,629.2],[\\\"http://127.0.0.1:8000/api/projects/1/annotations/?scope=organization&deleted=false\\\",545.6,72.3,\\\"fetch\\\",545.6,617.9],[\\\"http://127.0.0.1:8000/api/projects/1/cohorts?limit=600\\\",546.5,71.4,\\\"fetch\\\",546.5,617.9],[\\\"http://127.0.0.1:8000/api/projects/1/event_definitions/?limit=5000\\\",547.6,107.5,\\\"fetch\\\",547.6,655.1],[\\\"http://127.0.0.1:8000/api/person/properties/\\\",548.1,113.5,\\\"fetch\\\",548.1,661.6],[\\\"http://127.0.0.1:8000/api/projects/@current/property_definitions/?limit=5000\\\",549.3,124.5,\\\"fetch\\\",549.3,673.8],[\\\"http://127.0.0.1:8000/api/instance_status/\\\",554.9,259.7,\\\"fetch\\\",554.9,814.6],[\\\"https://update.posthog.com/\\\",556.7,45.2,\\\"fetch\\\",556.7,601.9],[\\\"http://127.0.0.1:8000/api/organizations/@current/invites/\\\",558.5,107.4,\\\"fetch\\\",558.5,665.9],[\\\"http://127.0.0.1:8000/api/personal_api_keys/\\\",578.8,83.4,\\\"fetch\\\",578.8,662.2],[\\\"http://127.0.0.1:8000/api/license/\\\",586.5,90.1,\\\"fetch\\\",586.5,676.6],[\\\"https://www.gravatar.com/avatar/2e7d95b60efbe947f71009a1af1ba8d0?s=96&d=404\\\",625.1,1.9,\\\"img\\\",625.1,627],[\\\"http://127.0.0.1:8000/api/projects/1/dashboards/\\\",791.4,89.2,\\\"fetch\\\",791.4,880.6],[\\\"http://localhost:8234/static/chunk-LUMXGCOP.js\\\",836.2,3.8,\\\"other\\\",836.2,840],[\\\"http://localhost:8234/static/chunk-KJPTCBBC.js\\\",836.5,4.1,\\\"other\\\",836.5,840.6],[\\\"http://localhost:8234/static/chunk-X7HB5SUU.js\\\",836.6,10.6,\\\"other\\\",836.6,847.2],[\\\"http://localhost:8234/static/chunk-Z2MYP2M2.js\\\",836.7,14.4,\\\"other\\\",836.7,851.1],[\\\"http://localhost:8234/static/chunk-Z6ENRSEA.js\\\",836.8,20.6,\\\"other\\\",836.8,857.4],[\\\"http://localhost:8234/static/chunk-FJKTD6MY.js\\\",837.2,7,\\\"other\\\",837.2,844.2],[\\\"http://localhost:8234/static/chunk-XUGMYJGP.js\\\",837.6,10,\\\"other\\\",837.6,847.6],[\\\"http://localhost:8234/static/chunk-MVOT6GTL.js\\\",837.8,13.6,\\\"other\\\",837.8,851.4],[\\\"http://localhost:8234/static/chunk-IMI5TOQA.js\\\",838.1,10,\\\"other\\\",838.1,848.1],[\\\"http://localhost:8234/static/chunk-UHSVE7PG.js\\\",838.1,14.5,\\\"other\\\",838.1,852.6],[\\\"http://localhost:8234/static/chunk-HDKRWHJ6.js\\\",838.2,11.7,\\\"other\\\",838.2,849.9],[\\\"http://localhost:8234/static/chunk-BDCDUKQO.js\\\",838.3,11.8,\\\"other\\\",838.3,850.1],[\\\"http://localhost:8234/static/chunk-OIXFZ5LK.js\\\",838.5,13.1,\\\"other\\\",838.5,851.6],[\\\"http://localhost:8234/static/chunk-EB5W63F3.js\\\",838.5,13.3,\\\"other\\\",838.5,851.8],[\\\"http://localhost:8234/static/chunk-DFRCCFPU.js\\\",838.6,13.2,\\\"other\\\",838.6,851.8],[\\\"http://localhost:8234/static/chunk-A4QCHFI6.js\\\",838.7,13.1,\\\"other\\\",838.7,851.8],[\\\"http://localhost:8234/static/chunk-3BPMDJ3N.js\\\",838.9,12.9,\\\"other\\\",838.9,851.8],[\\\"http://localhost:8234/static/chunk-NHUSGGUD.js\\\",838.9,14.1,\\\"other\\\",838.9,853],[\\\"http://localhost:8234/static/chunk-SLQJA2PL.js\\\",838.9,15.2,\\\"other\\\",838.9,854.1],[\\\"http://localhost:8234/static/chunk-I5O3JHP6.js\\\",839.7,14.5,\\\"other\\\",839.7,854.2],[\\\"http://localhost:8234/static/chunk-F4AIONA2.js\\\",839.9,14.4,\\\"other\\\",839.9,854.3],[\\\"http://localhost:8234/static/chunk-63HTFI3S.js\\\",840,14.5,\\\"other\\\",840,854.5],[\\\"http://localhost:8234/static/chunk-ZCRZKRW7.js\\\",842.4,12.6,\\\"other\\\",842.4,855],[\\\"http://localhost:8234/static/chunk-C2C4IEM7.js\\\",842.7,12.7,\\\"other\\\",842.7,855.4],[\\\"http://localhost:8234/static/chunk-NGQGL7D3.js\\\",845.9,10,\\\"other\\\",845.9,855.9],[\\\"http://localhost:8234/static/chunk-PTR2RUUP.js\\\",846.2,9.7,\\\"other\\\",846.2,855.9],[\\\"http://localhost:8234/static/chunk-R3PDDW67.js\\\",846.8,9.1,\\\"other\\\",846.8,855.9],[\\\"http://localhost:8234/static/chunk-Q2Y3HUWS.js\\\",847.1,8.8,\\\"other\\\",847.1,855.9],[\\\"http://localhost:8234/static/chunk-Y7BHXLNZ.js\\\",847.2,9.2,\\\"other\\\",847.2,856.4],[\\\"http://localhost:8234/static/chunk-IVAJFO7S.js\\\",847.4,9.5,\\\"other\\\",847.4,856.9],[\\\"https://app.posthog.com/e/?ip=1&_=1643010211443&v=0.0.3\\\",942.9,133,\\\"fetch\\\",942.9,1075.9],[\\\"https://app.posthog.com/e/?ip=1&_=1643010211445&v=0.0.3\\\",944.1,140.3,\\\"fetch\\\",944.1,1084.4],[\\\"http://127.0.0.1:8000/api/projects/@current/feature_flags/my_flags?groups=%7B%22project%22%3A%22017e6d93-95c4-0000-3336-11f4c03eb344%22%2C%22organization%22%3A%22017e6d93-8fa6-0000-deb6-1c78260418c9%22%2C%22instance%22%3A%22http%3A%2F%2Flocalhost%3A8000%22%7D&temporary_token=0XkmhCQW51KcZfVzCPPlYmepazWsYXSTczmBHyJE2-g\\\",944.8,126.9,\\\"fetch\\\",944.8,1071.7],[\\\"http://localhost:8234/static/toolbar.css\\\",978.5,4.2,\\\"link\\\",978.5,982.7],[\\\"http://127.0.0.1:8000/api/projects/1/insights/?order=-updated_at&limit=20&offset=0&saved=true\\\",1021.7,183.3,\\\"fetch\\\",1021.7,1205],[\\\"http://127.0.0.1:8000/static/site.webmanifest?v=2021-04-29\\\",1046.1,10.4,\\\"other\\\",1046.1,1056.5],[\\\"http://127.0.0.1:8000/api/organizations/@current/members/?limit=200\\\",1122.8,68.5,\\\"fetch\\\",1122.8,1191.3],[\\\"http://127.0.0.1:8000/e/?compression=gzip-js&ip=1&_=1643010214487\\\",3989.9,14.7,\\\"xmlhttprequest\\\",3989.9,4004.6],[\\\"http://127.0.0.1:8000/e/?compression=gzip-js&ip=1&_=1643010217493\\\",6993.6,27.6,\\\"xmlhttprequest\\\",6993.6,7021.2],[\\\"http://localhost:8234/static/chunk-EYLKE6KE.js\\\",8043.3,54.4,\\\"other\\\",8043.3,8097.7],[\\\"http://localhost:8234/static/chunk-URHQA52P.js\\\",8043.7,55,\\\"other\\\",8043.7,8098.7],[\\\"http://localhost:8234/static/chunk-3B7RVXAB.js\\\",8043.9,56.2,\\\"other\\\",8043.9,8100.1],[\\\"http://localhost:8234/static/chunk-FS5CTTMA.js\\\",8044.4,54.3,\\\"other\\\",8044.4,8098.7],[\\\"http://localhost:8234/static/chunk-D43ZYSLF.js\\\",8044.7,54.2,\\\"other\\\",8044.7,8098.9],[\\\"http://localhost:8234/static/chunk-DUQI5YEH.js\\\",8044.9,56.5,\\\"other\\\",8044.9,8101.4],[\\\"http://localhost:8234/static/chunk-CJ7JBN4P.js\\\",8045.3,56.7,\\\"other\\\",8045.3,8102],[\\\"http://localhost:8234/static/chunk-JRLWBJNF.js\\\",8045.6,55.9,\\\"other\\\",8045.6,8101.5],[\\\"http://localhost:8234/static/chunk-OSOS22ZK.js\\\",8045.9,58.2,\\\"other\\\",8045.9,8104.1],[\\\"http://localhost:8234/static/chunk-KQBLA4V6.js\\\",8046.1,55.4,\\\"other\\\",8046.1,8101.5],[\\\"http://localhost:8234/static/chunk-W7PNUTIQ.js\\\",8046.3,55.5,\\\"other\\\",8046.3,8101.8],[\\\"http://localhost:8234/static/Events-LZ45RGCO.js\\\",8047.1,54.5,\\\"other\\\",8047.1,8101.6]]]}\",\n-                        \"$geoip_city_name\": \"Sydney\",\n-                        \"$geoip_country_name\": \"Australia\",\n-                        \"$geoip_country_code\": \"AU\",\n-                        \"$geoip_continent_name\": \"Oceania\",\n-                        \"$geoip_continent_code\": \"OC\",\n-                        \"$geoip_postal_code\": \"2000\",\n-                        \"$geoip_latitude\": -33.8601,\n-                        \"$geoip_longitude\": 151.2101,\n-                        \"$geoip_time_zone\": \"Australia/Sydney\",\n-                        \"$geoip_subdivision_1_code\": \"NSW\",\n-                        \"$geoip_subdivision_1_name\": \"New South Wales\",\n-                        \"$plugins_succeeded\": [\"GeoIP (1)\"],\n-                        \"$plugins_failed\": [],\n-                        \"$plugins_deferred\": [],\n-                        \"$ip\": \"127.0.0.1\",\n-                        \"$set_once\": {\n-                            \"$initial_os\": \"Mac OS X\",\n-                            \"$initial_browser\": \"Chrome\",\n-                            \"$initial_device_type\": \"Desktop\",\n-                            \"$initial_current_url\": \"http://127.0.0.1:8000/events?properties=%5B%5D\",\n-                            \"$initial_browser_version\": 97,\n-                            \"$initial_referrer\": \"http://127.0.0.1:8000/action/15?properties=%5B%5D\",\n-                            \"$initial_referring_domain\": \"127.0.0.1:8000\"\n-                        },\n-                        \"$group_0\": \"017e6d93-95c4-0000-3336-11f4c03eb344\",\n-                        \"$group_1\": \"017e6d93-8fa6-0000-deb6-1c78260418c9\",\n-                        \"$group_2\": \"http://localhost:8000\"\n-                    },\n-                    \"event\": \"$pageview\",\n-                    \"timestamp\": \"2022-01-24T07:43:38.665000+00:00\",\n-                    \"person\": {\n-                        \"is_identified\": true,\n-                        \"distinct_ids\": [\"UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj\"],\n-                        \"properties\": {\n-                            \"email\": \"paul@posthog.com\"\n-                        }\n-                    },\n-                    \"elements\": [],\n-                    \"elements_chain\": \"\"\n-                },\n-                {\n-                    \"id\": \"017e8b0a-4a65-0006-1530-aca064434508\",\n-                    \"distinct_id\": \"UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj\",\n-                    \"properties\": {\n-                        \"$os\": \"Mac OS X\",\n-                        \"$browser\": \"Chrome\",\n-                        \"$device_type\": \"Desktop\",\n-                        \"$current_url\": \"http://127.0.0.1:8000/insights\",\n-                        \"$host\": \"127.0.0.1:8000\",\n-                        \"$pathname\": \"/insights\",\n-                        \"$browser_version\": 97,\n-                        \"$screen_height\": 982,\n-                        \"$screen_width\": 1512,\n-                        \"$viewport_height\": 865,\n-                        \"$viewport_width\": 568,\n-                        \"$lib\": \"web\",\n-                        \"$lib_version\": \"1.17.3\",\n-                        \"$insert_id\": \"660amhw52jlqe7ra\",\n-                        \"$time\": 1643010211.781,\n-                        \"distinct_id\": \"UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj\",\n-                        \"$device_id\": \"17e6d9397cc50f-03939b929747b8-1d326253-16a7f0-17e6d9397cd1aa7\",\n-                        \"$initial_referrer\": \"http://127.0.0.1:8000/signup\",\n-                        \"$initial_referring_domain\": \"127.0.0.1:8000\",\n-                        \"$referrer\": \"http://127.0.0.1:8000/action/15?properties=%5B%5D\",\n-                        \"$referring_domain\": \"127.0.0.1:8000\",\n-                        \"$user_id\": \"UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj\",\n-                        \"is_demo_project\": false,\n-                        \"$groups\": {\n-                            \"project\": \"017e6d93-95c4-0000-3336-11f4c03eb344\",\n-                            \"organization\": \"017e6d93-8fa6-0000-deb6-1c78260418c9\",\n-                            \"instance\": \"http://localhost:8000\"\n-                        },\n-                        \"posthog_version\": \"1.31.1\",\n-                        \"realm\": \"hosted-clickhouse\",\n-                        \"is_clickhouse_enabled\": true,\n-                        \"ee_available\": true,\n-                        \"email_service_available\": false,\n-                        \"$active_feature_flags\": [\"6619-query-events-by-date\", \"hackathon-apm\", \"something\"],\n-                        \"$feature/6619-query-events-by-date\": true,\n-                        \"$feature/hackathon-apm\": true,\n-                        \"$feature/something\": true,\n-                        \"token\": \"phc_PzZhed4GBoxecFlTaC2hIY7JsSAghIPAIp2f3uwUsvw\",\n-                        \"$session_id\": \"17e8ae4b5a9323-0db8ef18d837a-1d326253-16a7f0-17e8ae4b5aa2db\",\n-                        \"$window_id\": \"17e8b0a3cad569-0e22532a0d29f9-1d326253-16a7f0-17e8b0a3caefa6\",\n-                        \"$performance_page_loaded\": 975.9,\n-                        \"$performance_raw\": \"{\\\"navigation\\\":[[\\\"name\\\",\\\"entryType\\\",\\\"duration\\\",\\\"initiatorType\\\",\\\"fetchStart\\\",\\\"domainLookupStart\\\",\\\"domainLookupEnd\\\",\\\"connectStart\\\",\\\"connectEnd\\\",\\\"requestStart\\\",\\\"responseStart\\\",\\\"responseEnd\\\",\\\"transferSize\\\",\\\"encodedBodySize\\\",\\\"decodedBodySize\\\",\\\"domInteractive\\\",\\\"domContentLoadedEventStart\\\",\\\"domContentLoadedEventEnd\\\",\\\"domComplete\\\",\\\"loadEventStart\\\",\\\"loadEventEnd\\\",\\\"type\\\"],[[\\\"http://127.0.0.1:8000/\\\",\\\"navigation\\\",975.9,\\\"navigation\\\",4.7,4.7,4.7,4.7,4.7,6,143.9,144.6,33609,33309,33309,328.2,328.2,328.2,975.5,975.5,975.9,\\\"navigate\\\"]]],\\\"paint\\\":[[\\\"name\\\",\\\"entryType\\\",\\\"startTime\\\"],[[\\\"first-paint\\\",\\\"paint\\\",289.7],[\\\"first-contentful-paint\\\",\\\"paint\\\",289.7]]],\\\"resource\\\":[[\\\"name\\\",\\\"startTime\\\",\\\"duration\\\",\\\"initiatorType\\\",\\\"fetchStart\\\",\\\"responseEnd\\\"],[[\\\"http://localhost:8234/static/index.css?t=1643010062816\\\",177.1,10.3,\\\"link\\\",177.1,187.4],[\\\"http://localhost:8234/static/index.js?t=1643010062816\\\",201.7,5.1,\\\"other\\\",201.7,206.8],[\\\"http://localhost:8234/static/chunk-XICZDHER.js\\\",208,4.3,\\\"other\\\",208,212.3],[\\\"http://localhost:8234/static/chunk-5MMMF5K7.js\\\",208.1,2.7,\\\"other\\\",208.1,210.8],[\\\"http://localhost:8234/static/chunk-ROHUIGSJ.js\\\",208.3,3.8,\\\"other\\\",208.3,212.1],[\\\"http://localhost:8234/static/chunk-ZO6AYWDD.js\\\",209.2,3.2,\\\"other\\\",209.2,212.4],[\\\"http://localhost:8234/static/chunk-3TJORNMS.js\\\",209.4,3,\\\"other\\\",209.4,212.4],[\\\"http://localhost:8234/static/chunk-MIOXAXF4.js\\\",209.5,2.9,\\\"other\\\",209.5,212.4],[\\\"http://localhost:8234/static/chunk-W3XSBZQT.js\\\",210.3,3.5,\\\"other\\\",210.3,213.8],[\\\"http://localhost:8234/static/chunk-HG47DNA6.js\\\",211.1,7.3,\\\"other\\\",211.1,218.4],[\\\"http://localhost:8234/static/chunk-KT2H2P52.js\\\",211.6,7,\\\"other\\\",211.6,218.6],[\\\"http://localhost:8234/static/chunk-WCD5LITO.js\\\",211.7,7.5,\\\"other\\\",211.7,219.2],[\\\"http://localhost:8234/static/chunk-OZGU6W75.js\\\",211.9,7.3,\\\"other\\\",211.9,219.2],[\\\"http://localhost:8234/static/chunk-GN5GHDD7.js\\\",212.6,8.9,\\\"other\\\",212.6,221.5],[\\\"http://localhost:8234/static/chunk-3HMUCGO3.js\\\",213.3,8.3,\\\"other\\\",213.3,221.6],[\\\"http://localhost:8234/static/chunk-LO4HT7SR.js\\\",213.5,6,\\\"other\\\",213.5,219.5],[\\\"http://localhost:8234/static/chunk-3GPSPDA2.js\\\",213.6,7.7,\\\"other\\\",213.6,221.3],[\\\"http://localhost:8234/static/chunk-3YSVPLYF.js\\\",213.7,7.6,\\\"other\\\",213.7,221.3],[\\\"http://localhost:8234/static/chunk-SS3VKUJU.js\\\",213.8,7.7,\\\"other\\\",213.8,221.5],[\\\"http://localhost:8234/static/chunk-2O667M4D.js\\\",214,7.8,\\\"other\\\",214,221.8],[\\\"http://localhost:8234/static/chunk-2VV7PQO5.js\\\",214.1,7.9,\\\"other\\\",214.1,222],[\\\"http://localhost:8234/static/chunk-SKUSLQI7.js\\\",214.3,7.8,\\\"other\\\",214.3,222.1],[\\\"http://localhost:8234/static/chunk-EOM6WIAG.js\\\",214.4,7.9,\\\"other\\\",214.4,222.3],[\\\"http://localhost:8234/static/chunk-GUJPPS5R.js\\\",214.4,7.9,\\\"other\\\",214.4,222.3],[\\\"http://localhost:8234/static/chunk-BCILFNT3.js\\\",216.6,5.7,\\\"other\\\",216.6,222.3],[\\\"http://localhost:8234/static/chunk-SPXZCQAI.js\\\",216.7,8,\\\"other\\\",216.7,224.7],[\\\"http://localhost:8234/static/chunk-XPGE43VJ.js\\\",217.4,5.8,\\\"other\\\",217.4,223.2],[\\\"http://localhost:8234/static/chunk-L4IYGZIG.js\\\",217.5,5.4,\\\"other\\\",217.5,222.9],[\\\"http://localhost:8234/static/chunk-IGTMCF24.js\\\",218.2,5.7,\\\"other\\\",218.2,223.9],[\\\"http://localhost:8234/static/chunk-AMOE3OJU.js\\\",220.6,3.6,\\\"other\\\",220.6,224.2],[\\\"http://localhost:8234/static/chunk-BO4VDBQ6.js\\\",223.4,4.6,\\\"other\\\",223.4,228],[\\\"http://localhost:8234/static/chunk-QE52CDVG.js\\\",223.7,4.4,\\\"other\\\",223.7,228.1],[\\\"http://localhost:8234/static/chunk-VHSG55N2.js\\\",223.9,4.2,\\\"other\\\",223.9,228.1],[\\\"http://localhost:8234/static/chunk-4ZUV5LND.js\\\",224.7,3.5,\\\"other\\\",224.7,228.2],[\\\"http://localhost:8234/static/chunk-ASGLZXIV.js\\\",224.8,3.4,\\\"other\\\",224.8,228.2],[\\\"http://localhost:8234/static/chunk-HGNVPWDY.js\\\",225.8,5.1,\\\"other\\\",225.8,230.9],[\\\"http://localhost:8234/static/chunk-LD3TGMGW.js\\\",225.8,8,\\\"other\\\",225.8,233.8],[\\\"http://localhost:8234/static/chunk-PRPBRI2E.js\\\",226.1,7.7,\\\"other\\\",226.1,233.8],[\\\"http://localhost:8234/static/chunk-CA6FFFUC.js\\\",226.2,8.1,\\\"other\\\",226.2,234.3],[\\\"http://localhost:8234/static/chunk-YBU6RJ5N.js\\\",226.4,7.9,\\\"other\\\",226.4,234.3],[\\\"http://localhost:8234/static/chunk-HB4RLT5O.js\\\",226.5,7.9,\\\"other\\\",226.5,234.4],[\\\"http://localhost:8234/static/chunk-UJJIEZBP.js\\\",226.6,9.4,\\\"other\\\",226.6,236],[\\\"http://localhost:8234/static/chunk-KXP7VI6L.js\\\",226.7,10.9,\\\"other\\\",226.7,237.6],[\\\"http://localhost:8234/static/chunk-OHMX2FMJ.js\\\",226.9,10.8,\\\"other\\\",226.9,237.7],[\\\"http://localhost:8234/static/chunk-ATKSJCQX.js\\\",227,10.9,\\\"other\\\",227,237.9],[\\\"http://localhost:8234/static/chunk-ZUFDLBNZ.js\\\",227.1,10.9,\\\"other\\\",227.1,238],[\\\"http://localhost:8234/static/chunk-HOR2D746.js\\\",228.2,13.7,\\\"other\\\",228.2,241.9],[\\\"http://localhost:8234/static/chunk-M6NPX6BS.js\\\",228.7,111.5,\\\"other\\\",228.7,340.2],[\\\"http://localhost:8234/static/chunk-VJGIAYQC.js\\\",229.1,9.5,\\\"other\\\",229.1,238.6],[\\\"http://localhost:8234/static/toolbar.js?_ts=1643010210987\\\",486.1,322.2,\\\"script\\\",486.1,808.3],[\\\"http://127.0.0.1:8000/e/?ip=1&_=1643010210995\\\",496.2,54,\\\"xmlhttprequest\\\",496.2,550.2],[\\\"http://127.0.0.1:8000/decide/?v=2&ip=1&_=1643010210998\\\",498.6,92,\\\"xmlhttprequest\\\",498.6,590.6],[\\\"http://127.0.0.1:8000/engage/?ip=1&_=1643010211018\\\",518.8,45.6,\\\"xmlhttprequest\\\",518.8,564.4],[\\\"http://localhost:8234/static/SavedInsights-TLZR4WTT.js\\\",528.9,5,\\\"other\\\",528.9,533.9],[\\\"http://127.0.0.1:8000/api/projects/1/actions/\\\",539.4,89.8,\\\"fetch\\\",539.4,629.2],[\\\"http://127.0.0.1:8000/api/projects/1/annotations/?scope=organization&deleted=false\\\",545.6,72.3,\\\"fetch\\\",545.6,617.9],[\\\"http://127.0.0.1:8000/api/projects/1/cohorts?limit=600\\\",546.5,71.4,\\\"fetch\\\",546.5,617.9],[\\\"http://127.0.0.1:8000/api/projects/1/event_definitions/?limit=5000\\\",547.6,107.5,\\\"fetch\\\",547.6,655.1],[\\\"http://127.0.0.1:8000/api/person/properties/\\\",548.1,113.5,\\\"fetch\\\",548.1,661.6],[\\\"http://127.0.0.1:8000/api/projects/@current/property_definitions/?limit=5000\\\",549.3,124.5,\\\"fetch\\\",549.3,673.8],[\\\"http://127.0.0.1:8000/api/instance_status/\\\",554.9,259.7,\\\"fetch\\\",554.9,814.6],[\\\"https://update.posthog.com/\\\",556.7,45.2,\\\"fetch\\\",556.7,601.9],[\\\"http://127.0.0.1:8000/api/organizations/@current/invites/\\\",558.5,107.4,\\\"fetch\\\",558.5,665.9],[\\\"http://127.0.0.1:8000/api/personal_api_keys/\\\",578.8,83.4,\\\"fetch\\\",578.8,662.2],[\\\"http://127.0.0.1:8000/api/license/\\\",586.5,90.1,\\\"fetch\\\",586.5,676.6],[\\\"https://www.gravatar.com/avatar/2e7d95b60efbe947f71009a1af1ba8d0?s=96&d=404\\\",625.1,1.9,\\\"img\\\",625.1,627],[\\\"http://127.0.0.1:8000/api/projects/1/dashboards/\\\",791.4,89.2,\\\"fetch\\\",791.4,880.6],[\\\"http://localhost:8234/static/chunk-LUMXGCOP.js\\\",836.2,3.8,\\\"other\\\",836.2,840],[\\\"http://localhost:8234/static/chunk-KJPTCBBC.js\\\",836.5,4.1,\\\"other\\\",836.5,840.6],[\\\"http://localhost:8234/static/chunk-X7HB5SUU.js\\\",836.6,10.6,\\\"other\\\",836.6,847.2],[\\\"http://localhost:8234/static/chunk-Z2MYP2M2.js\\\",836.7,14.4,\\\"other\\\",836.7,851.1],[\\\"http://localhost:8234/static/chunk-Z6ENRSEA.js\\\",836.8,20.6,\\\"other\\\",836.8,857.4],[\\\"http://localhost:8234/static/chunk-FJKTD6MY.js\\\",837.2,7,\\\"other\\\",837.2,844.2],[\\\"http://localhost:8234/static/chunk-XUGMYJGP.js\\\",837.6,10,\\\"other\\\",837.6,847.6],[\\\"http://localhost:8234/static/chunk-MVOT6GTL.js\\\",837.8,13.6,\\\"other\\\",837.8,851.4],[\\\"http://localhost:8234/static/chunk-IMI5TOQA.js\\\",838.1,10,\\\"other\\\",838.1,848.1],[\\\"http://localhost:8234/static/chunk-UHSVE7PG.js\\\",838.1,14.5,\\\"other\\\",838.1,852.6],[\\\"http://localhost:8234/static/chunk-HDKRWHJ6.js\\\",838.2,11.7,\\\"other\\\",838.2,849.9],[\\\"http://localhost:8234/static/chunk-BDCDUKQO.js\\\",838.3,11.8,\\\"other\\\",838.3,850.1],[\\\"http://localhost:8234/static/chunk-OIXFZ5LK.js\\\",838.5,13.1,\\\"other\\\",838.5,851.6],[\\\"http://localhost:8234/static/chunk-EB5W63F3.js\\\",838.5,13.3,\\\"other\\\",838.5,851.8],[\\\"http://localhost:8234/static/chunk-DFRCCFPU.js\\\",838.6,13.2,\\\"other\\\",838.6,851.8],[\\\"http://localhost:8234/static/chunk-A4QCHFI6.js\\\",838.7,13.1,\\\"other\\\",838.7,851.8],[\\\"http://localhost:8234/static/chunk-3BPMDJ3N.js\\\",838.9,12.9,\\\"other\\\",838.9,851.8],[\\\"http://localhost:8234/static/chunk-NHUSGGUD.js\\\",838.9,14.1,\\\"other\\\",838.9,853],[\\\"http://localhost:8234/static/chunk-SLQJA2PL.js\\\",838.9,15.2,\\\"other\\\",838.9,854.1],[\\\"http://localhost:8234/static/chunk-I5O3JHP6.js\\\",839.7,14.5,\\\"other\\\",839.7,854.2],[\\\"http://localhost:8234/static/chunk-F4AIONA2.js\\\",839.9,14.4,\\\"other\\\",839.9,854.3],[\\\"http://localhost:8234/static/chunk-63HTFI3S.js\\\",840,14.5,\\\"other\\\",840,854.5],[\\\"http://localhost:8234/static/chunk-ZCRZKRW7.js\\\",842.4,12.6,\\\"other\\\",842.4,855],[\\\"http://localhost:8234/static/chunk-C2C4IEM7.js\\\",842.7,12.7,\\\"other\\\",842.7,855.4],[\\\"http://localhost:8234/static/chunk-NGQGL7D3.js\\\",845.9,10,\\\"other\\\",845.9,855.9],[\\\"http://localhost:8234/static/chunk-PTR2RUUP.js\\\",846.2,9.7,\\\"other\\\",846.2,855.9],[\\\"http://localhost:8234/static/chunk-R3PDDW67.js\\\",846.8,9.1,\\\"other\\\",846.8,855.9],[\\\"http://localhost:8234/static/chunk-Q2Y3HUWS.js\\\",847.1,8.8,\\\"other\\\",847.1,855.9],[\\\"http://localhost:8234/static/chunk-Y7BHXLNZ.js\\\",847.2,9.2,\\\"other\\\",847.2,856.4],[\\\"http://localhost:8234/static/chunk-IVAJFO7S.js\\\",847.4,9.5,\\\"other\\\",847.4,856.9],[\\\"http://localhost:8234/static/toolbar.css\\\",978.5,4.2,\\\"link\\\",978.5,982.7],[\\\"http://127.0.0.1:8000/static/site.webmanifest?v=2021-04-29\\\",1046.1,10.4,\\\"other\\\",1046.1,1056.5]]]}\",\n-                        \"$geoip_city_name\": \"Sydney\",\n-                        \"$geoip_country_name\": \"Australia\",\n-                        \"$geoip_country_code\": \"AU\",\n-                        \"$geoip_continent_name\": \"Oceania\",\n-                        \"$geoip_continent_code\": \"OC\",\n-                        \"$geoip_postal_code\": \"2000\",\n-                        \"$geoip_latitude\": -33.8601,\n-                        \"$geoip_longitude\": 151.2101,\n-                        \"$geoip_time_zone\": \"Australia/Sydney\",\n-                        \"$geoip_subdivision_1_code\": \"NSW\",\n-                        \"$geoip_subdivision_1_name\": \"New South Wales\",\n-                        \"$plugins_succeeded\": [\"GeoIP (1)\"],\n-                        \"$plugins_failed\": [],\n-                        \"$plugins_deferred\": [],\n-                        \"$ip\": \"127.0.0.1\",\n-                        \"$set_once\": {\n-                            \"$initial_os\": \"Mac OS X\",\n-                            \"$initial_browser\": \"Chrome\",\n-                            \"$initial_device_type\": \"Desktop\",\n-                            \"$initial_current_url\": \"http://127.0.0.1:8000/insights\",\n-                            \"$initial_browser_version\": 97,\n-                            \"$initial_referrer\": \"http://127.0.0.1:8000/action/15?properties=%5B%5D\",\n-                            \"$initial_referring_domain\": \"127.0.0.1:8000\"\n-                        },\n-                        \"$group_0\": \"017e6d93-95c4-0000-3336-11f4c03eb344\",\n-                        \"$group_1\": \"017e6d93-8fa6-0000-deb6-1c78260418c9\",\n-                        \"$group_2\": \"http://localhost:8000\"\n-                    },\n-                    \"event\": \"$pageview\",\n-                    \"timestamp\": \"2022-01-24T07:43:31.802000+00:00\",\n-                    \"person\": {\n-                        \"is_identified\": true,\n-                        \"distinct_ids\": [\"UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj\"],\n-                        \"properties\": {\n-                            \"email\": \"paul@posthog.com\"\n-                        }\n-                    },\n-                    \"elements\": [],\n-                    \"elements_chain\": \"\"\n-                },\n-                {\n-                    \"id\": \"017e8b0a-072f-0000-f722-bf39e30af1b2\",\n-                    \"distinct_id\": \"UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj\",\n-                    \"properties\": {\n-                        \"$os\": \"Mac OS X\",\n-                        \"$browser\": \"Chrome\",\n-                        \"$device_type\": \"Desktop\",\n-                        \"$current_url\": \"http://127.0.0.1:8000/events?properties=%5B%5D\",\n-                        \"$host\": \"127.0.0.1:8000\",\n-                        \"$pathname\": \"/events\",\n-                        \"$browser_version\": 97,\n-                        \"$screen_height\": 982,\n-                        \"$screen_width\": 1512,\n-                        \"$viewport_height\": 865,\n-                        \"$viewport_width\": 1512,\n-                        \"$lib\": \"web\",\n-                        \"$lib_version\": \"1.17.3\",\n-                        \"$insert_id\": \"j5movdaxjn4796a4\",\n-                        \"$time\": 1643010194.284,\n-                        \"distinct_id\": \"UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj\",\n-                        \"$device_id\": \"17e6d9397cc50f-03939b929747b8-1d326253-16a7f0-17e6d9397cd1aa7\",\n-                        \"$initial_referrer\": \"http://127.0.0.1:8000/signup\",\n-                        \"$initial_referring_domain\": \"127.0.0.1:8000\",\n-                        \"$referrer\": \"http://127.0.0.1:8000/action/15?properties=%5B%5D\",\n-                        \"$referring_domain\": \"127.0.0.1:8000\",\n-                        \"$user_id\": \"UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj\",\n-                        \"is_demo_project\": false,\n-                        \"$groups\": {\n-                            \"project\": \"017e6d93-95c4-0000-3336-11f4c03eb344\",\n-                            \"organization\": \"017e6d93-8fa6-0000-deb6-1c78260418c9\",\n-                            \"instance\": \"http://localhost:8000\"\n-                        },\n-                        \"posthog_version\": \"1.31.1\",\n-                        \"realm\": \"hosted-clickhouse\",\n-                        \"is_clickhouse_enabled\": true,\n-                        \"ee_available\": true,\n-                        \"email_service_available\": false,\n-                        \"$active_feature_flags\": [\"6619-query-events-by-date\", \"hackathon-apm\", \"something\"],\n-                        \"$feature/6619-query-events-by-date\": true,\n-                        \"$feature/hackathon-apm\": true,\n-                        \"$feature/something\": true,\n-                        \"token\": \"phc_PzZhed4GBoxecFlTaC2hIY7JsSAghIPAIp2f3uwUsvw\",\n-                        \"$session_id\": \"17e8ae4b5a9323-0db8ef18d837a-1d326253-16a7f0-17e8ae4b5aa2db\",\n-                        \"$window_id\": \"17e8ae4b5add5-09b55a3a638ebf-1d326253-16a7f0-17e8ae4b5ae1913\",\n-                        \"$performance_page_loaded\": 306.1,\n-                        \"$performance_raw\": \"{\\\"navigation\\\":[[\\\"name\\\",\\\"entryType\\\",\\\"duration\\\",\\\"initiatorType\\\",\\\"redirectStart\\\",\\\"redirectEnd\\\",\\\"fetchStart\\\",\\\"domainLookupStart\\\",\\\"domainLookupEnd\\\",\\\"connectStart\\\",\\\"connectEnd\\\",\\\"requestStart\\\",\\\"responseStart\\\",\\\"responseEnd\\\",\\\"transferSize\\\",\\\"encodedBodySize\\\",\\\"decodedBodySize\\\",\\\"unloadEventStart\\\",\\\"unloadEventEnd\\\",\\\"domInteractive\\\",\\\"domContentLoadedEventStart\\\",\\\"domContentLoadedEventEnd\\\",\\\"domComplete\\\",\\\"loadEventStart\\\",\\\"loadEventEnd\\\",\\\"type\\\",\\\"redirectCount\\\"],[[\\\"http://127.0.0.1:8000/#__posthog=%7B%22action%22%3A%20%22ph_authorize%22%2C%20%22token%22%3A%20%22phc_PzZhed4GBoxecFlTaC2hIY7JsSAghIPAIp2f3uwUsvw%22%2C%20%22temporaryToken%22%3A%20%220XkmhCQW51KcZfVzCPPlYmepazWsYXSTczmBHyJE2-g%22%2C%20%22actionId%22%3A%20%2215%22%2C%20%22userIntent%22%3A%20%22edit-action%22%2C%20%22toolbarVersion%22%3A%20%22toolbar%22%2C%20%22dataAttributes%22%3A%20%5B%22data-attr%22%5D%2C%20%22jsURL%22%3A%20%22http%3A//localhost%3A8234/%22%2C%20%22instrument%22%3A%20true%2C%20%22userEmail%22%3A%20%22paul%40posthog.com%22%2C%20%22distinctId%22%3A%20%22UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj%22%7D\\\",\\\"navigation\\\",306.1,\\\"navigation\\\",2.7,29.3,29.3,29.3,29.3,29.3,29.3,29.9,162.8,163.5,33609,33309,33309,169.7,173.4,239.6,239.6,239.6,306,306,306.1,\\\"navigate\\\",1]]],\\\"paint\\\":[[\\\"name\\\",\\\"entryType\\\",\\\"startTime\\\"],[[\\\"first-paint\\\",\\\"paint\\\",245.1],[\\\"first-contentful-paint\\\",\\\"paint\\\",245.1]]],\\\"resource\\\":[[\\\"name\\\",\\\"startTime\\\",\\\"duration\\\",\\\"initiatorType\\\",\\\"fetchStart\\\",\\\"responseEnd\\\"],[[\\\"http://localhost:8234/static/index.css?t=1643010062816\\\",199.9,12.1,\\\"link\\\",199.9,212],[\\\"http://localhost:8234/static/index.js?t=1643010062816\\\",220.2,7.8,\\\"other\\\",220.2,228],[\\\"http://localhost:8234/static/chunk-XICZDHER.js\\\",220.6,17.9,\\\"other\\\",220.6,238.5],[\\\"http://localhost:8234/static/chunk-5MMMF5K7.js\\\",220.7,15.7,\\\"other\\\",220.7,236.4],[\\\"http://localhost:8234/static/chunk-ROHUIGSJ.js\\\",220.7,10.3,\\\"other\\\",220.7,231],[\\\"http://localhost:8234/static/chunk-3TJORNMS.js\\\",221,16.4,\\\"other\\\",221,237.4],[\\\"http://localhost:8234/static/chunk-ZO6AYWDD.js\\\",221,16.2,\\\"other\\\",221,237.2],[\\\"http://localhost:8234/static/chunk-MIOXAXF4.js\\\",221.1,16.4,\\\"other\\\",221.1,237.5],[\\\"http://localhost:8234/static/chunk-W3XSBZQT.js\\\",221.3,16.2,\\\"other\\\",221.3,237.5],[\\\"http://localhost:8234/static/chunk-HG47DNA6.js\\\",221.4,16.7,\\\"other\\\",221.4,238.1],[\\\"http://localhost:8234/static/chunk-KT2H2P52.js\\\",221.5,16.8,\\\"other\\\",221.5,238.3],[\\\"http://localhost:8234/static/chunk-WCD5LITO.js\\\",221.6,17.1,\\\"other\\\",221.6,238.7],[\\\"http://localhost:8234/static/chunk-OZGU6W75.js\\\",221.6,17.2,\\\"other\\\",221.6,238.8],[\\\"http://localhost:8234/static/chunk-GN5GHDD7.js\\\",221.8,17.3,\\\"other\\\",221.8,239.1],[\\\"http://localhost:8234/static/chunk-3HMUCGO3.js\\\",221.8,20.7,\\\"other\\\",221.8,242.5],[\\\"http://localhost:8234/static/chunk-LO4HT7SR.js\\\",221.8,20.8,\\\"other\\\",221.8,242.6],[\\\"http://localhost:8234/static/chunk-3GPSPDA2.js\\\",222,20.8,\\\"other\\\",222,242.8],[\\\"http://localhost:8234/static/chunk-SS3VKUJU.js\\\",222.2,20.8,\\\"other\\\",222.2,243],[\\\"http://localhost:8234/static/chunk-3YSVPLYF.js\\\",222.2,20.7,\\\"other\\\",222.2,242.9],[\\\"http://localhost:8234/static/chunk-2O667M4D.js\\\",222.4,20.6,\\\"other\\\",222.4,243],[\\\"http://localhost:8234/static/chunk-2VV7PQO5.js\\\",222.6,20.8,\\\"other\\\",222.6,243.4],[\\\"http://localhost:8234/static/chunk-SKUSLQI7.js\\\",222.7,21.2,\\\"other\\\",222.7,243.9],[\\\"http://localhost:8234/static/chunk-EOM6WIAG.js\\\",222.9,22.8,\\\"other\\\",222.9,245.7],[\\\"http://localhost:8234/static/chunk-GUJPPS5R.js\\\",223,22.7,\\\"other\\\",223,245.7],[\\\"http://localhost:8234/static/chunk-BCILFNT3.js\\\",223,22.9,\\\"other\\\",223,245.9],[\\\"http://localhost:8234/static/chunk-SPXZCQAI.js\\\",223.2,24.4,\\\"other\\\",223.2,247.6],[\\\"http://localhost:8234/static/chunk-XPGE43VJ.js\\\",223.4,22.6,\\\"other\\\",223.4,246],[\\\"http://localhost:8234/static/chunk-L4IYGZIG.js\\\",223.5,22.5,\\\"other\\\",223.5,246],[\\\"http://localhost:8234/static/chunk-IGTMCF24.js\\\",223.7,22.6,\\\"other\\\",223.7,246.3],[\\\"http://localhost:8234/static/chunk-AMOE3OJU.js\\\",223.7,23.5,\\\"other\\\",223.7,247.2],[\\\"http://localhost:8234/static/chunk-BO4VDBQ6.js\\\",223.9,23.5,\\\"other\\\",223.9,247.4],[\\\"http://localhost:8234/static/chunk-QE52CDVG.js\\\",224,23.9,\\\"other\\\",224,247.9],[\\\"http://localhost:8234/static/chunk-VHSG55N2.js\\\",224.2,24,\\\"other\\\",224.2,248.2],[\\\"http://localhost:8234/static/chunk-4ZUV5LND.js\\\",224.3,23.9,\\\"other\\\",224.3,248.2],[\\\"http://localhost:8234/static/chunk-ASGLZXIV.js\\\",224.4,24.1,\\\"other\\\",224.4,248.5],[\\\"http://localhost:8234/static/chunk-HGNVPWDY.js\\\",224.4,24.4,\\\"other\\\",224.4,248.8],[\\\"http://localhost:8234/static/chunk-LD3TGMGW.js\\\",224.5,29,\\\"other\\\",224.5,253.5],[\\\"http://localhost:8234/static/chunk-PRPBRI2E.js\\\",224.6,29,\\\"other\\\",224.6,253.6],[\\\"http://localhost:8234/static/chunk-CA6FFFUC.js\\\",224.8,28.8,\\\"other\\\",224.8,253.6],[\\\"http://localhost:8234/static/chunk-YBU6RJ5N.js\\\",225.2,28.5,\\\"other\\\",225.2,253.7],[\\\"http://localhost:8234/static/chunk-HB4RLT5O.js\\\",225.7,28,\\\"other\\\",225.7,253.7],[\\\"http://localhost:8234/static/chunk-UJJIEZBP.js\\\",225.8,28.1,\\\"other\\\",225.8,253.9],[\\\"http://localhost:8234/static/chunk-KXP7VI6L.js\\\",226,29.5,\\\"other\\\",226,255.5],[\\\"http://localhost:8234/static/chunk-OHMX2FMJ.js\\\",226.3,29.7,\\\"other\\\",226.3,256],[\\\"http://localhost:8234/static/chunk-ATKSJCQX.js\\\",226.3,29.8,\\\"other\\\",226.3,256.1],[\\\"http://localhost:8234/static/chunk-ZUFDLBNZ.js\\\",226.6,29.7,\\\"other\\\",226.6,256.3],[\\\"http://localhost:8234/static/chunk-HOR2D746.js\\\",226.8,35,\\\"other\\\",226.8,261.8],[\\\"http://localhost:8234/static/chunk-VJGIAYQC.js\\\",227.2,29.3,\\\"other\\\",227.2,256.5],[\\\"http://localhost:8234/static/chunk-M6NPX6BS.js\\\",227.2,36.7,\\\"other\\\",227.2,263.9],[\\\"http://localhost:8234/static/toolbar.js?_ts=1643010188245\\\",376.2,134.3,\\\"script\\\",376.2,510.5],[\\\"http://127.0.0.1:8000/e/?ip=1&_=1643010188256\\\",390.9,27.6,\\\"xmlhttprequest\\\",390.9,418.5],[\\\"http://127.0.0.1:8000/decide/?v=2&ip=1&_=1643010188260\\\",392.6,76.3,\\\"xmlhttprequest\\\",392.6,468.9],[\\\"http://127.0.0.1:8000/engage/?ip=1&_=1643010188274\\\",406.6,47.8,\\\"xmlhttprequest\\\",406.6,454.4],[\\\"http://localhost:8234/static/SavedInsights-TLZR4WTT.js\\\",416.3,4.2,\\\"other\\\",416.3,420.5],[\\\"http://127.0.0.1:8000/api/projects/1/actions/\\\",420.3,121.1,\\\"fetch\\\",420.3,541.4],[\\\"http://127.0.0.1:8000/api/projects/1/annotations/?scope=organization&deleted=false\\\",420.8,58.1,\\\"fetch\\\",420.8,478.9],[\\\"http://127.0.0.1:8000/api/projects/1/cohorts?limit=600\\\",421.6,110.8,\\\"fetch\\\",421.6,532.4],[\\\"http://127.0.0.1:8000/api/projects/1/event_definitions/?limit=5000\\\",422.1,135.8,\\\"fetch\\\",422.1,557.9],[\\\"http://127.0.0.1:8000/api/person/properties/\\\",422.2,205,\\\"fetch\\\",422.2,627.2],[\\\"http://127.0.0.1:8000/api/projects/@current/property_definitions/?limit=5000\\\",422.8,168.1,\\\"fetch\\\",422.8,590.9],[\\\"http://127.0.0.1:8000/api/instance_status/\\\",426.8,407.7,\\\"fetch\\\",426.8,834.5],[\\\"https://update.posthog.com/\\\",427.4,145.9,\\\"fetch\\\",427.4,573.3],[\\\"http://127.0.0.1:8000/api/organizations/@current/invites/\\\",428.2,153.9,\\\"fetch\\\",428.2,582.1],[\\\"http://127.0.0.1:8000/api/personal_api_keys/\\\",437.7,147.3,\\\"fetch\\\",437.7,585],[\\\"http://127.0.0.1:8000/api/license/\\\",441.7,152.6,\\\"fetch\\\",441.7,594.3],[\\\"https://www.gravatar.com/avatar/2e7d95b60efbe947f71009a1af1ba8d0?s=96&d=404\\\",442.6,418.3,\\\"img\\\",442.6,860.9],[\\\"http://127.0.0.1:8000/api/projects/1/dashboards/\\\",485.8,154.2,\\\"fetch\\\",485.8,640],[\\\"http://127.0.0.1:8000/static/site.webmanifest?v=2021-04-29\\\",486.1,106.6,\\\"other\\\",486.1,592.7],[\\\"http://localhost:8234/static/chunk-LUMXGCOP.js\\\",491,13.4,\\\"other\\\",491,504.4],[\\\"http://localhost:8234/static/chunk-KJPTCBBC.js\\\",491.2,11.8,\\\"other\\\",491.2,503],[\\\"http://localhost:8234/static/chunk-X7HB5SUU.js\\\",491.2,13,\\\"other\\\",491.2,504.2],[\\\"http://localhost:8234/static/chunk-Z2MYP2M2.js\\\",491.4,14.7,\\\"other\\\",491.4,506.1],[\\\"http://localhost:8234/static/chunk-Z6ENRSEA.js\\\",491.4,29.1,\\\"other\\\",491.4,520.5],[\\\"http://localhost:8234/static/chunk-FJKTD6MY.js\\\",491.5,17,\\\"other\\\",491.5,508.5],[\\\"http://localhost:8234/static/chunk-XUGMYJGP.js\\\",491.6,17,\\\"other\\\",491.6,508.6],[\\\"http://localhost:8234/static/chunk-MVOT6GTL.js\\\",491.6,26.6,\\\"other\\\",491.6,518.2],[\\\"http://localhost:8234/static/chunk-UHSVE7PG.js\\\",491.8,27.5,\\\"other\\\",491.8,519.3],[\\\"http://localhost:8234/static/chunk-HDKRWHJ6.js\\\",491.8,30.7,\\\"other\\\",491.8,522.5],[\\\"http://localhost:8234/static/chunk-IMI5TOQA.js\\\",491.8,29.8,\\\"other\\\",491.8,521.6],[\\\"http://localhost:8234/static/chunk-BDCDUKQO.js\\\",492,30.6,\\\"other\\\",492,522.6],[\\\"http://localhost:8234/static/chunk-OIXFZ5LK.js\\\",492,39,\\\"other\\\",492,531],[\\\"http://localhost:8234/static/chunk-DFRCCFPU.js\\\",492.1,19.8,\\\"other\\\",492.1,511.9],[\\\"http://localhost:8234/static/chunk-EB5W63F3.js\\\",492.1,38.3,\\\"other\\\",492.1,530.4],[\\\"http://localhost:8234/static/chunk-3BPMDJ3N.js\\\",492.3,25.1,\\\"other\\\",492.3,517.4],[\\\"http://localhost:8234/static/chunk-A4QCHFI6.js\\\",492.3,26.2,\\\"other\\\",492.3,518.5],[\\\"http://localhost:8234/static/chunk-NHUSGGUD.js\\\",492.4,34.1,\\\"other\\\",492.4,526.5],[\\\"http://localhost:8234/static/chunk-SLQJA2PL.js\\\",492.5,33.9,\\\"other\\\",492.5,526.4],[\\\"http://localhost:8234/static/chunk-I5O3JHP6.js\\\",492.5,36.8,\\\"other\\\",492.5,529.3],[\\\"http://localhost:8234/static/chunk-F4AIONA2.js\\\",492.6,32.3,\\\"other\\\",492.6,524.9],[\\\"http://localhost:8234/static/chunk-63HTFI3S.js\\\",492.6,32.3,\\\"other\\\",492.6,524.9],[\\\"http://localhost:8234/static/chunk-ZCRZKRW7.js\\\",492.7,33.8,\\\"other\\\",492.7,526.5],[\\\"http://localhost:8234/static/chunk-C2C4IEM7.js\\\",492.9,33.7,\\\"other\\\",492.9,526.6],[\\\"http://localhost:8234/static/chunk-NGQGL7D3.js\\\",492.9,37.9,\\\"other\\\",492.9,530.8],[\\\"http://localhost:8234/static/chunk-PTR2RUUP.js\\\",493,28.5,\\\"other\\\",493,521.5],[\\\"http://localhost:8234/static/chunk-R3PDDW67.js\\\",493,35.9,\\\"other\\\",493,528.9],[\\\"http://localhost:8234/static/chunk-Q2Y3HUWS.js\\\",493.2,33.4,\\\"other\\\",493.2,526.6],[\\\"http://localhost:8234/static/chunk-Y7BHXLNZ.js\\\",493.2,35.9,\\\"other\\\",493.2,529.1],[\\\"http://localhost:8234/static/chunk-IVAJFO7S.js\\\",493.2,36.3,\\\"other\\\",493.2,529.5],[\\\"http://127.0.0.1:8000/api/projects/1/insights/?order=-updated_at&limit=20&offset=0&saved=true\\\",555.8,136,\\\"fetch\\\",555.8,691.8],[\\\"https://app.posthog.com/e/?ip=1&_=1643010188549&v=0.0.3\\\",681.6,531.9,\\\"fetch\\\",681.6,1213.5],[\\\"http://127.0.0.1:8000/api/projects/@current/actions/?temporary_token=0XkmhCQW51KcZfVzCPPlYmepazWsYXSTczmBHyJE2-g\\\",683.4,96.2,\\\"fetch\\\",683.4,779.6],[\\\"https://app.posthog.com/e/?ip=1&_=1643010188553&v=0.0.3\\\",684.2,508.3,\\\"fetch\\\",684.2,1192.5],[\\\"https://app.posthog.com/e/?ip=1&_=1643010188556&v=0.0.3\\\",687.6,512,\\\"fetch\\\",687.6,1199.6],[\\\"http://127.0.0.1:8000/api/projects/@current/feature_flags/my_flags?groups=%7B%22project%22%3A%22017e6d93-95c4-0000-3336-11f4c03eb344%22%2C%22organization%22%3A%22017e6d93-8fa6-0000-deb6-1c78260418c9%22%2C%22instance%22%3A%22http%3A%2F%2Flocalhost%3A8000%22%7D&temporary_token=0XkmhCQW51KcZfVzCPPlYmepazWsYXSTczmBHyJE2-g\\\",688,119,\\\"fetch\\\",688,807],[\\\"http://127.0.0.1:8000/api/organizations/@current/members/?limit=200\\\",725.2,67.7,\\\"fetch\\\",725.2,792.9],[\\\"http://localhost:8234/static/toolbar.css\\\",780.1,4.4,\\\"link\\\",780.1,784.5],[\\\"http://127.0.0.1:8000/e/?compression=gzip-js&ip=1&_=1643010191256\\\",3388.6,35.7,\\\"xmlhttprequest\\\",3388.6,3424.3],[\\\"http://localhost:8234/static/chunk-EYLKE6KE.js\\\",6366,22.2,\\\"other\\\",6366,6388.2],[\\\"http://localhost:8234/static/chunk-URHQA52P.js\\\",6366.1,26.8,\\\"other\\\",6366.1,6392.9],[\\\"http://localhost:8234/static/chunk-3B7RVXAB.js\\\",6366.3,27.1,\\\"other\\\",6366.3,6393.4],[\\\"http://localhost:8234/static/chunk-FS5CTTMA.js\\\",6366.4,26.6,\\\"other\\\",6366.4,6393],[\\\"http://localhost:8234/static/chunk-D43ZYSLF.js\\\",6366.5,27.9,\\\"other\\\",6366.5,6394.4],[\\\"http://localhost:8234/static/chunk-DUQI5YEH.js\\\",6366.7,27.8,\\\"other\\\",6366.7,6394.5],[\\\"http://localhost:8234/static/chunk-CJ7JBN4P.js\\\",6366.8,29.2,\\\"other\\\",6366.8,6396],[\\\"http://localhost:8234/static/chunk-JRLWBJNF.js\\\",6366.9,28.6,\\\"other\\\",6366.9,6395.5],[\\\"http://localhost:8234/static/chunk-OSOS22ZK.js\\\",6367,29.1,\\\"other\\\",6367,6396.1],[\\\"http://localhost:8234/static/chunk-KQBLA4V6.js\\\",6367.1,28.5,\\\"other\\\",6367.1,6395.6],[\\\"http://localhost:8234/static/chunk-W7PNUTIQ.js\\\",6367.2,28.6,\\\"other\\\",6367.2,6395.8],[\\\"http://localhost:8234/static/Events-LZ45RGCO.js\\\",6367.5,28.5,\\\"other\\\",6367.5,6396]]]}\",\n-                        \"$geoip_city_name\": \"Sydney\",\n-                        \"$geoip_country_name\": \"Australia\",\n-                        \"$geoip_country_code\": \"AU\",\n-                        \"$geoip_continent_name\": \"Oceania\",\n-                        \"$geoip_continent_code\": \"OC\",\n-                        \"$geoip_postal_code\": \"2000\",\n-                        \"$geoip_latitude\": -33.8601,\n-                        \"$geoip_longitude\": 151.2101,\n-                        \"$geoip_time_zone\": \"Australia/Sydney\",\n-                        \"$geoip_subdivision_1_code\": \"NSW\",\n-                        \"$geoip_subdivision_1_name\": \"New South Wales\",\n-                        \"$plugins_succeeded\": [\"GeoIP (1)\"],\n-                        \"$plugins_failed\": [],\n-                        \"$plugins_deferred\": [],\n-                        \"$ip\": \"127.0.0.1\",\n-                        \"$set_once\": {\n-                            \"$initial_os\": \"Mac OS X\",\n-                            \"$initial_browser\": \"Chrome\",\n-                            \"$initial_device_type\": \"Desktop\",\n-                            \"$initial_current_url\": \"http://127.0.0.1:8000/events?properties=%5B%5D\",\n-                            \"$initial_browser_version\": 97,\n-                            \"$initial_referrer\": \"http://127.0.0.1:8000/action/15?properties=%5B%5D\",\n-                            \"$initial_referring_domain\": \"127.0.0.1:8000\"\n-                        },\n-                        \"$group_0\": \"017e6d93-95c4-0000-3336-11f4c03eb344\",\n-                        \"$group_1\": \"017e6d93-8fa6-0000-deb6-1c78260418c9\",\n-                        \"$group_2\": \"http://localhost:8000\"\n-                    },\n-                    \"event\": \"$pageview\",\n-                    \"timestamp\": \"2022-01-24T07:43:14.306000+00:00\",\n-                    \"person\": {\n-                        \"is_identified\": true,\n-                        \"distinct_ids\": [\"UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj\"],\n-                        \"properties\": {\n-                            \"email\": \"paul@posthog.com\"\n-                        }\n-                    },\n-                    \"elements\": [],\n-                    \"elements_chain\": \"\"\n-                },\n-                {\n-                    \"id\": \"017e8b09-efb2-0001-0776-fe6e65ceb82d\",\n-                    \"distinct_id\": \"UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj\",\n-                    \"properties\": {\n-                        \"$os\": \"Mac OS X\",\n-                        \"$browser\": \"Chrome\",\n-                        \"$device_type\": \"Desktop\",\n-                        \"$current_url\": \"http://127.0.0.1:8000/insights\",\n-                        \"$host\": \"127.0.0.1:8000\",\n-                        \"$pathname\": \"/insights\",\n-                        \"$browser_version\": 97,\n-                        \"$screen_height\": 982,\n-                        \"$screen_width\": 1512,\n-                        \"$viewport_height\": 865,\n-                        \"$viewport_width\": 1512,\n-                        \"$lib\": \"web\",\n-                        \"$lib_version\": \"1.17.3\",\n-                        \"$insert_id\": \"2g77lyx9c1ru09dh\",\n-                        \"$time\": 1643010188.636,\n-                        \"distinct_id\": \"UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj\",\n-                        \"$device_id\": \"17e6d9397cc50f-03939b929747b8-1d326253-16a7f0-17e6d9397cd1aa7\",\n-                        \"$initial_referrer\": \"http://127.0.0.1:8000/signup\",\n-                        \"$initial_referring_domain\": \"127.0.0.1:8000\",\n-                        \"$referrer\": \"http://127.0.0.1:8000/action/15?properties=%5B%5D\",\n-                        \"$referring_domain\": \"127.0.0.1:8000\",\n-                        \"$user_id\": \"UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj\",\n-                        \"is_demo_project\": false,\n-                        \"$groups\": {\n-                            \"project\": \"017e6d93-95c4-0000-3336-11f4c03eb344\",\n-                            \"organization\": \"017e6d93-8fa6-0000-deb6-1c78260418c9\",\n-                            \"instance\": \"http://localhost:8000\"\n-                        },\n-                        \"posthog_version\": \"1.31.1\",\n-                        \"realm\": \"hosted-clickhouse\",\n-                        \"is_clickhouse_enabled\": true,\n-                        \"ee_available\": true,\n-                        \"email_service_available\": false,\n-                        \"$active_feature_flags\": [\"6619-query-events-by-date\", \"hackathon-apm\", \"something\"],\n-                        \"$feature/6619-query-events-by-date\": true,\n-                        \"$feature/hackathon-apm\": true,\n-                        \"$feature/something\": true,\n-                        \"token\": \"phc_PzZhed4GBoxecFlTaC2hIY7JsSAghIPAIp2f3uwUsvw\",\n-                        \"$session_id\": \"17e8ae4b5a9323-0db8ef18d837a-1d326253-16a7f0-17e8ae4b5aa2db\",\n-                        \"$window_id\": \"17e8ae4b5add5-09b55a3a638ebf-1d326253-16a7f0-17e8ae4b5ae1913\",\n-                        \"$performance_page_loaded\": 306.1,\n-                        \"$performance_raw\": \"{\\\"navigation\\\":[[\\\"name\\\",\\\"entryType\\\",\\\"duration\\\",\\\"initiatorType\\\",\\\"redirectStart\\\",\\\"redirectEnd\\\",\\\"fetchStart\\\",\\\"domainLookupStart\\\",\\\"domainLookupEnd\\\",\\\"connectStart\\\",\\\"connectEnd\\\",\\\"requestStart\\\",\\\"responseStart\\\",\\\"responseEnd\\\",\\\"transferSize\\\",\\\"encodedBodySize\\\",\\\"decodedBodySize\\\",\\\"unloadEventStart\\\",\\\"unloadEventEnd\\\",\\\"domInteractive\\\",\\\"domContentLoadedEventStart\\\",\\\"domContentLoadedEventEnd\\\",\\\"domComplete\\\",\\\"loadEventStart\\\",\\\"loadEventEnd\\\",\\\"type\\\",\\\"redirectCount\\\"],[[\\\"http://127.0.0.1:8000/#__posthog=%7B%22action%22%3A%20%22ph_authorize%22%2C%20%22token%22%3A%20%22phc_PzZhed4GBoxecFlTaC2hIY7JsSAghIPAIp2f3uwUsvw%22%2C%20%22temporaryToken%22%3A%20%220XkmhCQW51KcZfVzCPPlYmepazWsYXSTczmBHyJE2-g%22%2C%20%22actionId%22%3A%20%2215%22%2C%20%22userIntent%22%3A%20%22edit-action%22%2C%20%22toolbarVersion%22%3A%20%22toolbar%22%2C%20%22dataAttributes%22%3A%20%5B%22data-attr%22%5D%2C%20%22jsURL%22%3A%20%22http%3A//localhost%3A8234/%22%2C%20%22instrument%22%3A%20true%2C%20%22userEmail%22%3A%20%22paul%40posthog.com%22%2C%20%22distinctId%22%3A%20%22UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj%22%7D\\\",\\\"navigation\\\",306.1,\\\"navigation\\\",2.7,29.3,29.3,29.3,29.3,29.3,29.3,29.9,162.8,163.5,33609,33309,33309,169.7,173.4,239.6,239.6,239.6,306,306,306.1,\\\"navigate\\\",1]]],\\\"paint\\\":[[\\\"name\\\",\\\"entryType\\\",\\\"startTime\\\"],[[\\\"first-paint\\\",\\\"paint\\\",245.1],[\\\"first-contentful-paint\\\",\\\"paint\\\",245.1]]],\\\"resource\\\":[[\\\"name\\\",\\\"startTime\\\",\\\"duration\\\",\\\"initiatorType\\\",\\\"fetchStart\\\",\\\"responseEnd\\\"],[[\\\"http://localhost:8234/static/index.css?t=1643010062816\\\",199.9,12.1,\\\"link\\\",199.9,212],[\\\"http://localhost:8234/static/index.js?t=1643010062816\\\",220.2,7.8,\\\"other\\\",220.2,228],[\\\"http://localhost:8234/static/chunk-XICZDHER.js\\\",220.6,17.9,\\\"other\\\",220.6,238.5],[\\\"http://localhost:8234/static/chunk-5MMMF5K7.js\\\",220.7,15.7,\\\"other\\\",220.7,236.4],[\\\"http://localhost:8234/static/chunk-ROHUIGSJ.js\\\",220.7,10.3,\\\"other\\\",220.7,231],[\\\"http://localhost:8234/static/chunk-3TJORNMS.js\\\",221,16.4,\\\"other\\\",221,237.4],[\\\"http://localhost:8234/static/chunk-ZO6AYWDD.js\\\",221,16.2,\\\"other\\\",221,237.2],[\\\"http://localhost:8234/static/chunk-MIOXAXF4.js\\\",221.1,16.4,\\\"other\\\",221.1,237.5],[\\\"http://localhost:8234/static/chunk-W3XSBZQT.js\\\",221.3,16.2,\\\"other\\\",221.3,237.5],[\\\"http://localhost:8234/static/chunk-HG47DNA6.js\\\",221.4,16.7,\\\"other\\\",221.4,238.1],[\\\"http://localhost:8234/static/chunk-KT2H2P52.js\\\",221.5,16.8,\\\"other\\\",221.5,238.3],[\\\"http://localhost:8234/static/chunk-WCD5LITO.js\\\",221.6,17.1,\\\"other\\\",221.6,238.7],[\\\"http://localhost:8234/static/chunk-OZGU6W75.js\\\",221.6,17.2,\\\"other\\\",221.6,238.8],[\\\"http://localhost:8234/static/chunk-GN5GHDD7.js\\\",221.8,17.3,\\\"other\\\",221.8,239.1],[\\\"http://localhost:8234/static/chunk-3HMUCGO3.js\\\",221.8,20.7,\\\"other\\\",221.8,242.5],[\\\"http://localhost:8234/static/chunk-LO4HT7SR.js\\\",221.8,20.8,\\\"other\\\",221.8,242.6],[\\\"http://localhost:8234/static/chunk-3GPSPDA2.js\\\",222,20.8,\\\"other\\\",222,242.8],[\\\"http://localhost:8234/static/chunk-SS3VKUJU.js\\\",222.2,20.8,\\\"other\\\",222.2,243],[\\\"http://localhost:8234/static/chunk-3YSVPLYF.js\\\",222.2,20.7,\\\"other\\\",222.2,242.9],[\\\"http://localhost:8234/static/chunk-2O667M4D.js\\\",222.4,20.6,\\\"other\\\",222.4,243],[\\\"http://localhost:8234/static/chunk-2VV7PQO5.js\\\",222.6,20.8,\\\"other\\\",222.6,243.4],[\\\"http://localhost:8234/static/chunk-SKUSLQI7.js\\\",222.7,21.2,\\\"other\\\",222.7,243.9],[\\\"http://localhost:8234/static/chunk-EOM6WIAG.js\\\",222.9,22.8,\\\"other\\\",222.9,245.7],[\\\"http://localhost:8234/static/chunk-GUJPPS5R.js\\\",223,22.7,\\\"other\\\",223,245.7],[\\\"http://localhost:8234/static/chunk-BCILFNT3.js\\\",223,22.9,\\\"other\\\",223,245.9],[\\\"http://localhost:8234/static/chunk-SPXZCQAI.js\\\",223.2,24.4,\\\"other\\\",223.2,247.6],[\\\"http://localhost:8234/static/chunk-XPGE43VJ.js\\\",223.4,22.6,\\\"other\\\",223.4,246],[\\\"http://localhost:8234/static/chunk-L4IYGZIG.js\\\",223.5,22.5,\\\"other\\\",223.5,246],[\\\"http://localhost:8234/static/chunk-IGTMCF24.js\\\",223.7,22.6,\\\"other\\\",223.7,246.3],[\\\"http://localhost:8234/static/chunk-AMOE3OJU.js\\\",223.7,23.5,\\\"other\\\",223.7,247.2],[\\\"http://localhost:8234/static/chunk-BO4VDBQ6.js\\\",223.9,23.5,\\\"other\\\",223.9,247.4],[\\\"http://localhost:8234/static/chunk-QE52CDVG.js\\\",224,23.9,\\\"other\\\",224,247.9],[\\\"http://localhost:8234/static/chunk-VHSG55N2.js\\\",224.2,24,\\\"other\\\",224.2,248.2],[\\\"http://localhost:8234/static/chunk-4ZUV5LND.js\\\",224.3,23.9,\\\"other\\\",224.3,248.2],[\\\"http://localhost:8234/static/chunk-ASGLZXIV.js\\\",224.4,24.1,\\\"other\\\",224.4,248.5],[\\\"http://localhost:8234/static/chunk-HGNVPWDY.js\\\",224.4,24.4,\\\"other\\\",224.4,248.8],[\\\"http://localhost:8234/static/chunk-LD3TGMGW.js\\\",224.5,29,\\\"other\\\",224.5,253.5],[\\\"http://localhost:8234/static/chunk-PRPBRI2E.js\\\",224.6,29,\\\"other\\\",224.6,253.6],[\\\"http://localhost:8234/static/chunk-CA6FFFUC.js\\\",224.8,28.8,\\\"other\\\",224.8,253.6],[\\\"http://localhost:8234/static/chunk-YBU6RJ5N.js\\\",225.2,28.5,\\\"other\\\",225.2,253.7],[\\\"http://localhost:8234/static/chunk-HB4RLT5O.js\\\",225.7,28,\\\"other\\\",225.7,253.7],[\\\"http://localhost:8234/static/chunk-UJJIEZBP.js\\\",225.8,28.1,\\\"other\\\",225.8,253.9],[\\\"http://localhost:8234/static/chunk-KXP7VI6L.js\\\",226,29.5,\\\"other\\\",226,255.5],[\\\"http://localhost:8234/static/chunk-OHMX2FMJ.js\\\",226.3,29.7,\\\"other\\\",226.3,256],[\\\"http://localhost:8234/static/chunk-ATKSJCQX.js\\\",226.3,29.8,\\\"other\\\",226.3,256.1],[\\\"http://localhost:8234/static/chunk-ZUFDLBNZ.js\\\",226.6,29.7,\\\"other\\\",226.6,256.3],[\\\"http://localhost:8234/static/chunk-HOR2D746.js\\\",226.8,35,\\\"other\\\",226.8,261.8],[\\\"http://localhost:8234/static/chunk-VJGIAYQC.js\\\",227.2,29.3,\\\"other\\\",227.2,256.5],[\\\"http://localhost:8234/static/chunk-M6NPX6BS.js\\\",227.2,36.7,\\\"other\\\",227.2,263.9],[\\\"http://localhost:8234/static/toolbar.js?_ts=1643010188245\\\",376.2,134.3,\\\"script\\\",376.2,510.5],[\\\"http://127.0.0.1:8000/e/?ip=1&_=1643010188256\\\",390.9,27.6,\\\"xmlhttprequest\\\",390.9,418.5],[\\\"http://127.0.0.1:8000/decide/?v=2&ip=1&_=1643010188260\\\",392.6,76.3,\\\"xmlhttprequest\\\",392.6,468.9],[\\\"http://127.0.0.1:8000/engage/?ip=1&_=1643010188274\\\",406.6,47.8,\\\"xmlhttprequest\\\",406.6,454.4],[\\\"http://localhost:8234/static/SavedInsights-TLZR4WTT.js\\\",416.3,4.2,\\\"other\\\",416.3,420.5],[\\\"http://127.0.0.1:8000/api/projects/1/actions/\\\",420.3,121.1,\\\"fetch\\\",420.3,541.4],[\\\"http://127.0.0.1:8000/api/projects/1/annotations/?scope=organization&deleted=false\\\",420.8,58.1,\\\"fetch\\\",420.8,478.9],[\\\"http://127.0.0.1:8000/api/projects/1/cohorts?limit=600\\\",421.6,110.8,\\\"fetch\\\",421.6,532.4],[\\\"http://127.0.0.1:8000/api/projects/1/event_definitions/?limit=5000\\\",422.1,135.8,\\\"fetch\\\",422.1,557.9],[\\\"http://127.0.0.1:8000/static/site.webmanifest?v=2021-04-29\\\",486.1,106.6,\\\"other\\\",486.1,592.7],[\\\"http://localhost:8234/static/chunk-LUMXGCOP.js\\\",491,13.4,\\\"other\\\",491,504.4],[\\\"http://localhost:8234/static/chunk-KJPTCBBC.js\\\",491.2,11.8,\\\"other\\\",491.2,503],[\\\"http://localhost:8234/static/chunk-X7HB5SUU.js\\\",491.2,13,\\\"other\\\",491.2,504.2],[\\\"http://localhost:8234/static/chunk-Z2MYP2M2.js\\\",491.4,14.7,\\\"other\\\",491.4,506.1],[\\\"http://localhost:8234/static/chunk-Z6ENRSEA.js\\\",491.4,29.1,\\\"other\\\",491.4,520.5],[\\\"http://localhost:8234/static/chunk-FJKTD6MY.js\\\",491.5,17,\\\"other\\\",491.5,508.5],[\\\"http://localhost:8234/static/chunk-XUGMYJGP.js\\\",491.6,17,\\\"other\\\",491.6,508.6],[\\\"http://localhost:8234/static/chunk-MVOT6GTL.js\\\",491.6,26.6,\\\"other\\\",491.6,518.2],[\\\"http://localhost:8234/static/chunk-UHSVE7PG.js\\\",491.8,27.5,\\\"other\\\",491.8,519.3],[\\\"http://localhost:8234/static/chunk-HDKRWHJ6.js\\\",491.8,30.7,\\\"other\\\",491.8,522.5],[\\\"http://localhost:8234/static/chunk-IMI5TOQA.js\\\",491.8,29.8,\\\"other\\\",491.8,521.6],[\\\"http://localhost:8234/static/chunk-BDCDUKQO.js\\\",492,30.6,\\\"other\\\",492,522.6],[\\\"http://localhost:8234/static/chunk-OIXFZ5LK.js\\\",492,39,\\\"other\\\",492,531],[\\\"http://localhost:8234/static/chunk-DFRCCFPU.js\\\",492.1,19.8,\\\"other\\\",492.1,511.9],[\\\"http://localhost:8234/static/chunk-EB5W63F3.js\\\",492.1,38.3,\\\"other\\\",492.1,530.4],[\\\"http://localhost:8234/static/chunk-3BPMDJ3N.js\\\",492.3,25.1,\\\"other\\\",492.3,517.4],[\\\"http://localhost:8234/static/chunk-A4QCHFI6.js\\\",492.3,26.2,\\\"other\\\",492.3,518.5],[\\\"http://localhost:8234/static/chunk-NHUSGGUD.js\\\",492.4,34.1,\\\"other\\\",492.4,526.5],[\\\"http://localhost:8234/static/chunk-SLQJA2PL.js\\\",492.5,33.9,\\\"other\\\",492.5,526.4],[\\\"http://localhost:8234/static/chunk-I5O3JHP6.js\\\",492.5,36.8,\\\"other\\\",492.5,529.3],[\\\"http://localhost:8234/static/chunk-F4AIONA2.js\\\",492.6,32.3,\\\"other\\\",492.6,524.9],[\\\"http://localhost:8234/static/chunk-63HTFI3S.js\\\",492.6,32.3,\\\"other\\\",492.6,524.9],[\\\"http://localhost:8234/static/chunk-ZCRZKRW7.js\\\",492.7,33.8,\\\"other\\\",492.7,526.5],[\\\"http://localhost:8234/static/chunk-C2C4IEM7.js\\\",492.9,33.7,\\\"other\\\",492.9,526.6],[\\\"http://localhost:8234/static/chunk-NGQGL7D3.js\\\",492.9,37.9,\\\"other\\\",492.9,530.8],[\\\"http://localhost:8234/static/chunk-PTR2RUUP.js\\\",493,28.5,\\\"other\\\",493,521.5],[\\\"http://localhost:8234/static/chunk-R3PDDW67.js\\\",493,35.9,\\\"other\\\",493,528.9],[\\\"http://localhost:8234/static/chunk-Q2Y3HUWS.js\\\",493.2,33.4,\\\"other\\\",493.2,526.6],[\\\"http://localhost:8234/static/chunk-Y7BHXLNZ.js\\\",493.2,35.9,\\\"other\\\",493.2,529.1],[\\\"http://localhost:8234/static/chunk-IVAJFO7S.js\\\",493.2,36.3,\\\"other\\\",493.2,529.5]]]}\",\n-                        \"$geoip_city_name\": \"Sydney\",\n-                        \"$geoip_country_name\": \"Australia\",\n-                        \"$geoip_country_code\": \"AU\",\n-                        \"$geoip_continent_name\": \"Oceania\",\n-                        \"$geoip_continent_code\": \"OC\",\n-                        \"$geoip_postal_code\": \"2000\",\n-                        \"$geoip_latitude\": -33.8601,\n-                        \"$geoip_longitude\": 151.2101,\n-                        \"$geoip_time_zone\": \"Australia/Sydney\",\n-                        \"$geoip_subdivision_1_code\": \"NSW\",\n-                        \"$geoip_subdivision_1_name\": \"New South Wales\",\n-                        \"$plugins_succeeded\": [\"GeoIP (1)\"],\n-                        \"$plugins_failed\": [],\n-                        \"$plugins_deferred\": [],\n-                        \"$ip\": \"127.0.0.1\",\n-                        \"$set_once\": {\n-                            \"$initial_os\": \"Mac OS X\",\n-                            \"$initial_browser\": \"Chrome\",\n-                            \"$initial_device_type\": \"Desktop\",\n-                            \"$initial_current_url\": \"http://127.0.0.1:8000/insights\",\n-                            \"$initial_browser_version\": 97,\n-                            \"$initial_referrer\": \"http://127.0.0.1:8000/action/15?properties=%5B%5D\",\n-                            \"$initial_referring_domain\": \"127.0.0.1:8000\"\n-                        },\n-                        \"$group_0\": \"017e6d93-95c4-0000-3336-11f4c03eb344\",\n-                        \"$group_1\": \"017e6d93-8fa6-0000-deb6-1c78260418c9\",\n-                        \"$group_2\": \"http://localhost:8000\"\n-                    },\n-                    \"event\": \"$pageview\",\n-                    \"timestamp\": \"2022-01-24T07:43:08.659000+00:00\",\n-                    \"person\": {\n-                        \"is_identified\": true,\n-                        \"distinct_ids\": [\"UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj\"],\n-                        \"properties\": {\n-                            \"email\": \"paul@posthog.com\"\n-                        }\n-                    },\n-                    \"elements\": [],\n-                    \"elements_chain\": \"\"\n-                },\n-                {\n-                    \"id\": \"017e8b09-e3f8-0000-e99b-b3dc589699fd\",\n-                    \"distinct_id\": \"UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj\",\n-                    \"properties\": {\n-                        \"$os\": \"Mac OS X\",\n-                        \"$browser\": \"Chrome\",\n-                        \"$device_type\": \"Desktop\",\n-                        \"$current_url\": \"http://127.0.0.1:8000/\",\n-                        \"$host\": \"127.0.0.1:8000\",\n-                        \"$pathname\": \"/\",\n-                        \"$browser_version\": 97,\n-                        \"$screen_height\": 982,\n-                        \"$screen_width\": 1512,\n-                        \"$viewport_height\": 865,\n-                        \"$viewport_width\": 1512,\n-                        \"$lib\": \"web\",\n-                        \"$lib_version\": \"1.17.3\",\n-                        \"$insert_id\": \"4wy48eb5e43kenok\",\n-                        \"$time\": 1643010188.248,\n-                        \"distinct_id\": \"UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj\",\n-                        \"$device_id\": \"17e6d9397cc50f-03939b929747b8-1d326253-16a7f0-17e6d9397cd1aa7\",\n-                        \"$initial_referrer\": \"http://127.0.0.1:8000/signup\",\n-                        \"$initial_referring_domain\": \"127.0.0.1:8000\",\n-                        \"$referrer\": \"http://127.0.0.1:8000/action/15?properties=%5B%5D\",\n-                        \"$referring_domain\": \"127.0.0.1:8000\",\n-                        \"$user_id\": \"UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj\",\n-                        \"is_demo_project\": false,\n-                        \"$groups\": {\n-                            \"project\": \"017e6d93-95c4-0000-3336-11f4c03eb344\",\n-                            \"organization\": \"017e6d93-8fa6-0000-deb6-1c78260418c9\",\n-                            \"instance\": \"http://localhost:8000\"\n-                        },\n-                        \"posthog_version\": \"1.31.1\",\n-                        \"realm\": \"hosted-clickhouse\",\n-                        \"is_clickhouse_enabled\": true,\n-                        \"ee_available\": true,\n-                        \"email_service_available\": false,\n-                        \"$active_feature_flags\": [\"6619-query-events-by-date\", \"hackathon-apm\", \"something\"],\n-                        \"$feature/6619-query-events-by-date\": true,\n-                        \"$feature/hackathon-apm\": true,\n-                        \"$feature/something\": true,\n-                        \"token\": \"phc_PzZhed4GBoxecFlTaC2hIY7JsSAghIPAIp2f3uwUsvw\",\n-                        \"$session_id\": \"17e8ae4b5a9323-0db8ef18d837a-1d326253-16a7f0-17e8ae4b5aa2db\",\n-                        \"$window_id\": \"17e8ae4b5add5-09b55a3a638ebf-1d326253-16a7f0-17e8ae4b5ae1913\",\n-                        \"$performance_page_loaded\": 306.1,\n-                        \"$performance_raw\": \"{\\\"navigation\\\":[[\\\"name\\\",\\\"entryType\\\",\\\"duration\\\",\\\"initiatorType\\\",\\\"redirectStart\\\",\\\"redirectEnd\\\",\\\"fetchStart\\\",\\\"domainLookupStart\\\",\\\"domainLookupEnd\\\",\\\"connectStart\\\",\\\"connectEnd\\\",\\\"requestStart\\\",\\\"responseStart\\\",\\\"responseEnd\\\",\\\"transferSize\\\",\\\"encodedBodySize\\\",\\\"decodedBodySize\\\",\\\"unloadEventStart\\\",\\\"unloadEventEnd\\\",\\\"domInteractive\\\",\\\"domContentLoadedEventStart\\\",\\\"domContentLoadedEventEnd\\\",\\\"domComplete\\\",\\\"loadEventStart\\\",\\\"loadEventEnd\\\",\\\"type\\\",\\\"redirectCount\\\"],[[\\\"http://127.0.0.1:8000/#__posthog=%7B%22action%22%3A%20%22ph_authorize%22%2C%20%22token%22%3A%20%22phc_PzZhed4GBoxecFlTaC2hIY7JsSAghIPAIp2f3uwUsvw%22%2C%20%22temporaryToken%22%3A%20%220XkmhCQW51KcZfVzCPPlYmepazWsYXSTczmBHyJE2-g%22%2C%20%22actionId%22%3A%20%2215%22%2C%20%22userIntent%22%3A%20%22edit-action%22%2C%20%22toolbarVersion%22%3A%20%22toolbar%22%2C%20%22dataAttributes%22%3A%20%5B%22data-attr%22%5D%2C%20%22jsURL%22%3A%20%22http%3A//localhost%3A8234/%22%2C%20%22instrument%22%3A%20true%2C%20%22userEmail%22%3A%20%22paul%40posthog.com%22%2C%20%22distinctId%22%3A%20%22UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj%22%7D\\\",\\\"navigation\\\",306.1,\\\"navigation\\\",2.7,29.3,29.3,29.3,29.3,29.3,29.3,29.9,162.8,163.5,33609,33309,33309,169.7,173.4,239.6,239.6,239.6,306,306,306.1,\\\"navigate\\\",1]]],\\\"paint\\\":[[\\\"name\\\",\\\"entryType\\\",\\\"startTime\\\"],[[\\\"first-paint\\\",\\\"paint\\\",245.1],[\\\"first-contentful-paint\\\",\\\"paint\\\",245.1]]],\\\"resource\\\":[[\\\"name\\\",\\\"startTime\\\",\\\"duration\\\",\\\"initiatorType\\\",\\\"fetchStart\\\",\\\"responseEnd\\\"],[[\\\"http://localhost:8234/static/index.css?t=1643010062816\\\",199.9,12.1,\\\"link\\\",199.9,212],[\\\"http://localhost:8234/static/index.js?t=1643010062816\\\",220.2,7.8,\\\"other\\\",220.2,228],[\\\"http://localhost:8234/static/chunk-XICZDHER.js\\\",220.6,17.9,\\\"other\\\",220.6,238.5],[\\\"http://localhost:8234/static/chunk-5MMMF5K7.js\\\",220.7,15.7,\\\"other\\\",220.7,236.4],[\\\"http://localhost:8234/static/chunk-ROHUIGSJ.js\\\",220.7,10.3,\\\"other\\\",220.7,231],[\\\"http://localhost:8234/static/chunk-3TJORNMS.js\\\",221,16.4,\\\"other\\\",221,237.4],[\\\"http://localhost:8234/static/chunk-ZO6AYWDD.js\\\",221,16.2,\\\"other\\\",221,237.2],[\\\"http://localhost:8234/static/chunk-MIOXAXF4.js\\\",221.1,16.4,\\\"other\\\",221.1,237.5],[\\\"http://localhost:8234/static/chunk-W3XSBZQT.js\\\",221.3,16.2,\\\"other\\\",221.3,237.5],[\\\"http://localhost:8234/static/chunk-HG47DNA6.js\\\",221.4,16.7,\\\"other\\\",221.4,238.1],[\\\"http://localhost:8234/static/chunk-KT2H2P52.js\\\",221.5,16.8,\\\"other\\\",221.5,238.3],[\\\"http://localhost:8234/static/chunk-WCD5LITO.js\\\",221.6,17.1,\\\"other\\\",221.6,238.7],[\\\"http://localhost:8234/static/chunk-OZGU6W75.js\\\",221.6,17.2,\\\"other\\\",221.6,238.8],[\\\"http://localhost:8234/static/chunk-GN5GHDD7.js\\\",221.8,17.3,\\\"other\\\",221.8,239.1],[\\\"http://localhost:8234/static/chunk-3HMUCGO3.js\\\",221.8,20.7,\\\"other\\\",221.8,242.5],[\\\"http://localhost:8234/static/chunk-LO4HT7SR.js\\\",221.8,20.8,\\\"other\\\",221.8,242.6],[\\\"http://localhost:8234/static/chunk-3GPSPDA2.js\\\",222,20.8,\\\"other\\\",222,242.8],[\\\"http://localhost:8234/static/chunk-SS3VKUJU.js\\\",222.2,20.8,\\\"other\\\",222.2,243],[\\\"http://localhost:8234/static/chunk-3YSVPLYF.js\\\",222.2,20.7,\\\"other\\\",222.2,242.9],[\\\"http://localhost:8234/static/chunk-2O667M4D.js\\\",222.4,20.6,\\\"other\\\",222.4,243],[\\\"http://localhost:8234/static/chunk-2VV7PQO5.js\\\",222.6,20.8,\\\"other\\\",222.6,243.4],[\\\"http://localhost:8234/static/chunk-SKUSLQI7.js\\\",222.7,21.2,\\\"other\\\",222.7,243.9],[\\\"http://localhost:8234/static/chunk-EOM6WIAG.js\\\",222.9,22.8,\\\"other\\\",222.9,245.7],[\\\"http://localhost:8234/static/chunk-GUJPPS5R.js\\\",223,22.7,\\\"other\\\",223,245.7],[\\\"http://localhost:8234/static/chunk-BCILFNT3.js\\\",223,22.9,\\\"other\\\",223,245.9],[\\\"http://localhost:8234/static/chunk-SPXZCQAI.js\\\",223.2,24.4,\\\"other\\\",223.2,247.6],[\\\"http://localhost:8234/static/chunk-XPGE43VJ.js\\\",223.4,22.6,\\\"other\\\",223.4,246],[\\\"http://localhost:8234/static/chunk-L4IYGZIG.js\\\",223.5,22.5,\\\"other\\\",223.5,246],[\\\"http://localhost:8234/static/chunk-IGTMCF24.js\\\",223.7,22.6,\\\"other\\\",223.7,246.3],[\\\"http://localhost:8234/static/chunk-AMOE3OJU.js\\\",223.7,23.5,\\\"other\\\",223.7,247.2],[\\\"http://localhost:8234/static/chunk-BO4VDBQ6.js\\\",223.9,23.5,\\\"other\\\",223.9,247.4],[\\\"http://localhost:8234/static/chunk-QE52CDVG.js\\\",224,23.9,\\\"other\\\",224,247.9],[\\\"http://localhost:8234/static/chunk-VHSG55N2.js\\\",224.2,24,\\\"other\\\",224.2,248.2],[\\\"http://localhost:8234/static/chunk-4ZUV5LND.js\\\",224.3,23.9,\\\"other\\\",224.3,248.2],[\\\"http://localhost:8234/static/chunk-ASGLZXIV.js\\\",224.4,24.1,\\\"other\\\",224.4,248.5],[\\\"http://localhost:8234/static/chunk-HGNVPWDY.js\\\",224.4,24.4,\\\"other\\\",224.4,248.8],[\\\"http://localhost:8234/static/chunk-LD3TGMGW.js\\\",224.5,29,\\\"other\\\",224.5,253.5],[\\\"http://localhost:8234/static/chunk-PRPBRI2E.js\\\",224.6,29,\\\"other\\\",224.6,253.6],[\\\"http://localhost:8234/static/chunk-CA6FFFUC.js\\\",224.8,28.8,\\\"other\\\",224.8,253.6],[\\\"http://localhost:8234/static/chunk-YBU6RJ5N.js\\\",225.2,28.5,\\\"other\\\",225.2,253.7],[\\\"http://localhost:8234/static/chunk-HB4RLT5O.js\\\",225.7,28,\\\"other\\\",225.7,253.7],[\\\"http://localhost:8234/static/chunk-UJJIEZBP.js\\\",225.8,28.1,\\\"other\\\",225.8,253.9],[\\\"http://localhost:8234/static/chunk-KXP7VI6L.js\\\",226,29.5,\\\"other\\\",226,255.5],[\\\"http://localhost:8234/static/chunk-OHMX2FMJ.js\\\",226.3,29.7,\\\"other\\\",226.3,256],[\\\"http://localhost:8234/static/chunk-ATKSJCQX.js\\\",226.3,29.8,\\\"other\\\",226.3,256.1],[\\\"http://localhost:8234/static/chunk-ZUFDLBNZ.js\\\",226.6,29.7,\\\"other\\\",226.6,256.3],[\\\"http://localhost:8234/static/chunk-HOR2D746.js\\\",226.8,35,\\\"other\\\",226.8,261.8],[\\\"http://localhost:8234/static/chunk-VJGIAYQC.js\\\",227.2,29.3,\\\"other\\\",227.2,256.5],[\\\"http://localhost:8234/static/chunk-M6NPX6BS.js\\\",227.2,36.7,\\\"other\\\",227.2,263.9]]]}\",\n-                        \"$geoip_city_name\": \"Sydney\",\n-                        \"$geoip_country_name\": \"Australia\",\n-                        \"$geoip_country_code\": \"AU\",\n-                        \"$geoip_continent_name\": \"Oceania\",\n-                        \"$geoip_continent_code\": \"OC\",\n-                        \"$geoip_postal_code\": \"2000\",\n-                        \"$geoip_latitude\": -33.8601,\n-                        \"$geoip_longitude\": 151.2101,\n-                        \"$geoip_time_zone\": \"Australia/Sydney\",\n-                        \"$geoip_subdivision_1_code\": \"NSW\",\n-                        \"$geoip_subdivision_1_name\": \"New South Wales\",\n-                        \"$plugins_succeeded\": [\"GeoIP (1)\"],\n-                        \"$plugins_failed\": [],\n-                        \"$plugins_deferred\": [],\n-                        \"$ip\": \"127.0.0.1\",\n-                        \"$set_once\": {\n-                            \"$initial_os\": \"Mac OS X\",\n-                            \"$initial_browser\": \"Chrome\",\n-                            \"$initial_device_type\": \"Desktop\",\n-                            \"$initial_current_url\": \"http://127.0.0.1:8000/\",\n-                            \"$initial_browser_version\": 97,\n-                            \"$initial_referrer\": \"http://127.0.0.1:8000/action/15?properties=%5B%5D\",\n-                            \"$initial_referring_domain\": \"127.0.0.1:8000\"\n-                        },\n-                        \"$group_0\": \"017e6d93-95c4-0000-3336-11f4c03eb344\",\n-                        \"$group_1\": \"017e6d93-8fa6-0000-deb6-1c78260418c9\",\n-                        \"$group_2\": \"http://localhost:8000\"\n-                    },\n-                    \"event\": \"$pageview\",\n-                    \"timestamp\": \"2022-01-24T07:43:08.276000+00:00\",\n-                    \"person\": {\n-                        \"is_identified\": true,\n-                        \"distinct_ids\": [\"UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj\"],\n-                        \"properties\": {\n-                            \"email\": \"paul@posthog.com\"\n-                        }\n-                    },\n-                    \"elements\": [],\n-                    \"elements_chain\": \"\"\n-                },\n-                {\n-                    \"id\": \"017e8b08-58f3-0000-46ae-e200fbdaf748\",\n-                    \"distinct_id\": \"UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj\",\n-                    \"properties\": {\n-                        \"$os\": \"Mac OS X\",\n-                        \"$browser\": \"Chrome\",\n-                        \"$device_type\": \"Desktop\",\n-                        \"$current_url\": \"http://127.0.0.1:8000/action/15?properties=%5B%5D\",\n-                        \"$host\": \"127.0.0.1:8000\",\n-                        \"$pathname\": \"/action/15\",\n-                        \"$browser_version\": 97,\n-                        \"$screen_height\": 982,\n-                        \"$screen_width\": 1512,\n-                        \"$viewport_height\": 865,\n-                        \"$viewport_width\": 1512,\n-                        \"$lib\": \"web\",\n-                        \"$lib_version\": \"1.17.3\",\n-                        \"$insert_id\": \"0pwzuyr8tu30g27q\",\n-                        \"$time\": 1643010085.528,\n-                        \"distinct_id\": \"UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj\",\n-                        \"$device_id\": \"17e6d9397cc50f-03939b929747b8-1d326253-16a7f0-17e6d9397cd1aa7\",\n-                        \"$initial_referrer\": \"http://127.0.0.1:8000/signup\",\n-                        \"$initial_referring_domain\": \"127.0.0.1:8000\",\n-                        \"$referrer\": \"http://127.0.0.1:8000/events?properties=%5B%7B%22key%22%3A%22created_at%22%2C%22value%22%3A%222022-01-19%2007%3A01%3A28%22%2C%22operator%22%3A%22is_date_before%22%2C%22type%22%3A%22event%22%7D%5D\",\n-                        \"$referring_domain\": \"127.0.0.1:8000\",\n-                        \"$user_id\": \"UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj\",\n-                        \"is_demo_project\": false,\n-                        \"$groups\": {\n-                            \"project\": \"017e6d93-95c4-0000-3336-11f4c03eb344\",\n-                            \"organization\": \"017e6d93-8fa6-0000-deb6-1c78260418c9\",\n-                            \"instance\": \"http://localhost:8000\"\n-                        },\n-                        \"posthog_version\": \"1.31.1\",\n-                        \"realm\": \"hosted-clickhouse\",\n-                        \"is_clickhouse_enabled\": true,\n-                        \"ee_available\": true,\n-                        \"email_service_available\": false,\n-                        \"$active_feature_flags\": [\"6619-query-events-by-date\", \"hackathon-apm\", \"something\"],\n-                        \"$feature/6619-query-events-by-date\": true,\n-                        \"$feature/hackathon-apm\": true,\n-                        \"$feature/something\": true,\n-                        \"token\": \"phc_PzZhed4GBoxecFlTaC2hIY7JsSAghIPAIp2f3uwUsvw\",\n-                        \"$session_id\": \"17e8ae4b5a9323-0db8ef18d837a-1d326253-16a7f0-17e8ae4b5aa2db\",\n-                        \"$window_id\": \"17e8ae4b5add5-09b55a3a638ebf-1d326253-16a7f0-17e8ae4b5ae1913\",\n-                        \"$performance_page_loaded\": 2617.3,\n-                        \"$performance_raw\": \"{\\\"navigation\\\":[[\\\"name\\\",\\\"entryType\\\",\\\"duration\\\",\\\"initiatorType\\\",\\\"fetchStart\\\",\\\"domainLookupStart\\\",\\\"domainLookupEnd\\\",\\\"connectStart\\\",\\\"connectEnd\\\",\\\"requestStart\\\",\\\"responseStart\\\",\\\"responseEnd\\\",\\\"transferSize\\\",\\\"encodedBodySize\\\",\\\"decodedBodySize\\\",\\\"unloadEventStart\\\",\\\"unloadEventEnd\\\",\\\"domInteractive\\\",\\\"domContentLoadedEventStart\\\",\\\"domContentLoadedEventEnd\\\",\\\"domComplete\\\",\\\"loadEventStart\\\",\\\"loadEventEnd\\\",\\\"type\\\"],[[\\\"http://127.0.0.1:8000/events?properties=%5B%7B%22key%22%3A%22created_at%22%2C%22value%22%3A%222022-01-19%2007%3A01%3A28%22%2C%22operator%22%3A%22is_date_before%22%2C%22type%22%3A%22event%22%7D%5D\\\",\\\"navigation\\\",2617.3,\\\"navigation\\\",11,11,11,11,11,24.3,1084,1084.8,33585,33285,33285,1092.9,1104,2478.9,2478.9,2478.9,2617.3,2617.3,2617.3,\\\"reload\\\"]]],\\\"paint\\\":[[\\\"name\\\",\\\"entryType\\\",\\\"startTime\\\"],[[\\\"first-paint\\\",\\\"paint\\\",2483.6],[\\\"first-contentful-paint\\\",\\\"paint\\\",2483.6]]],\\\"resource\\\":[[\\\"name\\\",\\\"startTime\\\",\\\"duration\\\",\\\"initiatorType\\\",\\\"fetchStart\\\",\\\"responseEnd\\\"],[[\\\"http://localhost:8234/static/index.css?t=1643009964175\\\",1135,1332.7,\\\"link\\\",1135,2467.7],[\\\"http://localhost:8234/static/index.js?t=1643009964175\\\",1168.1,1274.7,\\\"other\\\",1168.1,2442.8],[\\\"http://localhost:8234/static/chunk-XICZDHER.js\\\",1168.4,1281.9,\\\"other\\\",1168.4,2450.3],[\\\"http://localhost:8234/static/chunk-5MMMF5K7.js\\\",1168.5,1271.6,\\\"other\\\",1168.5,2440.1],[\\\"http://localhost:8234/static/chunk-ROHUIGSJ.js\\\",1168.6,1271.8,\\\"other\\\",1168.6,2440.4],[\\\"http://localhost:8234/static/chunk-ZO6AYWDD.js\\\",1171,1274.5,\\\"other\\\",1171,2445.5],[\\\"http://localhost:8234/static/chunk-3TJORNMS.js\\\",1171.1,1267.5,\\\"other\\\",1171.1,2438.6],[\\\"http://localhost:8234/static/chunk-MIOXAXF4.js\\\",1171.2,1289.2,\\\"other\\\",1171.2,2460.4],[\\\"http://localhost:8234/static/chunk-W3XSBZQT.js\\\",1171.2,1303.1,\\\"other\\\",1171.2,2474.3],[\\\"http://localhost:8234/static/chunk-HG47DNA6.js\\\",1171.3,1289.5,\\\"other\\\",1171.3,2460.8],[\\\"http://localhost:8234/static/chunk-KT2H2P52.js\\\",1171.5,1292.4,\\\"other\\\",1171.5,2463.9],[\\\"http://localhost:8234/static/chunk-WCD5LITO.js\\\",1171.6,1288.9,\\\"other\\\",1171.6,2460.5],[\\\"http://localhost:8234/static/chunk-OZGU6W75.js\\\",1171.6,1290.2,\\\"other\\\",1171.6,2461.8],[\\\"http://localhost:8234/static/chunk-GN5GHDD7.js\\\",1171.7,1308.5,\\\"other\\\",1171.7,2480.2],[\\\"http://localhost:8234/static/chunk-3HMUCGO3.js\\\",1171.7,1310.1,\\\"other\\\",1171.7,2481.8],[\\\"http://localhost:8234/static/chunk-LO4HT7SR.js\\\",1171.9,1292.6,\\\"other\\\",1171.9,2464.5],[\\\"http://localhost:8234/static/chunk-3GPSPDA2.js\\\",1172,1303,\\\"other\\\",1172,2475],[\\\"http://localhost:8234/static/chunk-3YSVPLYF.js\\\",1172.1,1306,\\\"other\\\",1172.1,2478.1],[\\\"http://localhost:8234/static/chunk-SS3VKUJU.js\\\",1172.3,1308.2,\\\"other\\\",1172.3,2480.5],[\\\"http://localhost:8234/static/chunk-2O667M4D.js\\\",1172.3,1316.6,\\\"other\\\",1172.3,2488.9],[\\\"http://localhost:8234/static/chunk-2VV7PQO5.js\\\",1172.4,1317.2,\\\"other\\\",1172.4,2489.6],[\\\"http://localhost:8234/static/chunk-EOM6WIAG.js\\\",1172.5,1317.2,\\\"other\\\",1172.5,2489.7],[\\\"http://localhost:8234/static/chunk-SKUSLQI7.js\\\",1172.5,1317.1,\\\"other\\\",1172.5,2489.6],[\\\"http://localhost:8234/static/chunk-GUJPPS5R.js\\\",1172.7,1319.9,\\\"other\\\",1172.7,2492.6],[\\\"http://localhost:8234/static/chunk-BCILFNT3.js\\\",1172.7,1320,\\\"other\\\",1172.7,2492.7],[\\\"http://localhost:8234/static/chunk-SPXZCQAI.js\\\",1172.8,1346.9,\\\"other\\\",1172.8,2519.7],[\\\"http://localhost:8234/static/chunk-XPGE43VJ.js\\\",1172.9,1335.8,\\\"other\\\",1172.9,2508.7],[\\\"http://localhost:8234/static/chunk-L4IYGZIG.js\\\",1172.9,1336,\\\"other\\\",1172.9,2508.9],[\\\"http://localhost:8234/static/chunk-IGTMCF24.js\\\",1173,1334.3,\\\"other\\\",1173,2507.3],[\\\"http://localhost:8234/static/chunk-AMOE3OJU.js\\\",1173,1334.6,\\\"other\\\",1173,2507.6],[\\\"http://localhost:8234/static/chunk-BO4VDBQ6.js\\\",1173.2,1347.5,\\\"other\\\",1173.2,2520.7],[\\\"http://localhost:8234/static/chunk-QE52CDVG.js\\\",1173.2,1347.6,\\\"other\\\",1173.2,2520.8],[\\\"http://localhost:8234/static/chunk-VHSG55N2.js\\\",1173.4,1344.5,\\\"other\\\",1173.4,2517.9],[\\\"http://localhost:8234/static/chunk-4ZUV5LND.js\\\",1173.4,1347.5,\\\"other\\\",1173.4,2520.9],[\\\"http://localhost:8234/static/chunk-ASGLZXIV.js\\\",1173.5,1347.4,\\\"other\\\",1173.5,2520.9],[\\\"http://localhost:8234/static/chunk-HGNVPWDY.js\\\",1173.7,1348.7,\\\"other\\\",1173.7,2522.4],[\\\"http://localhost:8234/static/chunk-PRPBRI2E.js\\\",1173.7,1350.4,\\\"other\\\",1173.7,2524.1],[\\\"http://localhost:8234/static/chunk-LD3TGMGW.js\\\",1173.7,1360.8,\\\"other\\\",1173.7,2534.5],[\\\"http://localhost:8234/static/chunk-CA6FFFUC.js\\\",1173.8,1347.8,\\\"other\\\",1173.8,2521.6],[\\\"http://localhost:8234/static/chunk-YBU6RJ5N.js\\\",1173.8,1350.3,\\\"other\\\",1173.8,2524.1],[\\\"http://localhost:8234/static/chunk-HB4RLT5O.js\\\",1174,1352.7,\\\"other\\\",1174,2526.7],[\\\"http://localhost:8234/static/chunk-UJJIEZBP.js\\\",1174,1352.9,\\\"other\\\",1174,2526.9],[\\\"http://localhost:8234/static/chunk-KXP7VI6L.js\\\",1174.2,1360.6,\\\"other\\\",1174.2,2534.8],[\\\"http://localhost:8234/static/chunk-OHMX2FMJ.js\\\",1174.3,1355.2,\\\"other\\\",1174.3,2529.5],[\\\"http://localhost:8234/static/chunk-ATKSJCQX.js\\\",1174.3,1355.7,\\\"other\\\",1174.3,2530],[\\\"http://localhost:8234/static/chunk-ZUFDLBNZ.js\\\",1174.4,1356,\\\"other\\\",1174.4,2530.4],[\\\"http://localhost:8234/static/chunk-HOR2D746.js\\\",1174.4,1379.6,\\\"other\\\",1174.4,2554],[\\\"http://localhost:8234/static/chunk-M6NPX6BS.js\\\",1174.5,1405.7,\\\"other\\\",1174.5,2580.2],[\\\"http://localhost:8234/static/chunk-VJGIAYQC.js\\\",1174.6,1356.2,\\\"other\\\",1174.6,2530.8],[\\\"http://localhost:8234/static/toolbar.js?_ts=1643010063093\\\",2702.9,193.6,\\\"script\\\",2702.9,2896.5],[\\\"http://127.0.0.1:8000/e/?ip=1&_=1643010063101\\\",2712.5,72.7,\\\"xmlhttprequest\\\",2712.5,2785.2],[\\\"http://127.0.0.1:8000/decide/?v=2&ip=1&_=1643010063103\\\",2714.4,337.4,\\\"xmlhttprequest\\\",2714.4,3051.8],[\\\"http://127.0.0.1:8000/engage/?ip=1&_=1643010063119\\\",2730.4,609.2,\\\"xmlhttprequest\\\",2730.4,3339.6],[\\\"http://localhost:8234/static/chunk-EYLKE6KE.js\\\",2742.3,5.7,\\\"other\\\",2742.3,2748],[\\\"http://localhost:8234/static/chunk-URHQA52P.js\\\",2742.5,5.8,\\\"other\\\",2742.5,2748.3],[\\\"http://localhost:8234/static/chunk-RNNL3253.js\\\",2742.6,4.3,\\\"other\\\",2742.6,2746.9],[\\\"http://localhost:8234/static/chunk-FS5CTTMA.js\\\",2742.7,7.4,\\\"other\\\",2742.7,2750.1],[\\\"http://localhost:8234/static/chunk-D43ZYSLF.js\\\",2742.7,6.7,\\\"other\\\",2742.7,2749.4],[\\\"http://localhost:8234/static/chunk-DUQI5YEH.js\\\",2743.2,7.3,\\\"other\\\",2743.2,2750.5],[\\\"http://localhost:8234/static/chunk-G2QPUPTV.js\\\",2743.5,9.4,\\\"other\\\",2743.5,2752.9],[\\\"http://localhost:8234/static/chunk-JRLWBJNF.js\\\",2743.8,7.7,\\\"other\\\",2743.8,2751.5],[\\\"http://localhost:8234/static/chunk-OSOS22ZK.js\\\",2744.1,9.9,\\\"other\\\",2744.1,2754],[\\\"http://localhost:8234/static/chunk-KQBLA4V6.js\\\",2744.3,8.9,\\\"other\\\",2744.3,2753.2],[\\\"http://localhost:8234/static/chunk-W7PNUTIQ.js\\\",2744.8,8.6,\\\"other\\\",2744.8,2753.4],[\\\"http://localhost:8234/static/chunk-EB5W63F3.js\\\",2745,8.5,\\\"other\\\",2745,2753.5],[\\\"http://localhost:8234/static/chunk-SLQJA2PL.js\\\",2745.1,15.5,\\\"other\\\",2745.1,2760.6],[\\\"http://localhost:8234/static/chunk-I5O3JHP6.js\\\",2745.5,15.9,\\\"other\\\",2745.5,2761.4],[\\\"http://localhost:8234/static/chunk-F4AIONA2.js\\\",2745.8,18.4,\\\"other\\\",2745.8,2764.2],[\\\"http://localhost:8234/static/chunk-63HTFI3S.js\\\",2746.1,18.5,\\\"other\\\",2746.1,2764.6],[\\\"http://localhost:8234/static/chunk-ZCRZKRW7.js\\\",2746.2,18.7,\\\"other\\\",2746.2,2764.9],[\\\"http://localhost:8234/static/chunk-C2C4IEM7.js\\\",2746.7,18,\\\"other\\\",2746.7,2764.7],[\\\"http://localhost:8234/static/chunk-R3PDDW67.js\\\",2746.9,21,\\\"other\\\",2746.9,2767.9],[\\\"http://localhost:8234/static/chunk-Q2Y3HUWS.js\\\",2747,21,\\\"other\\\",2747,2768],[\\\"http://localhost:8234/static/chunk-Y7BHXLNZ.js\\\",2747.2,20.9,\\\"other\\\",2747.2,2768.1],[\\\"http://localhost:8234/static/chunk-IVAJFO7S.js\\\",2747.5,21,\\\"other\\\",2747.5,2768.5],[\\\"http://localhost:8234/static/Events-LZ45RGCO.js\\\",2747.6,5.3,\\\"other\\\",2747.6,2752.9],[\\\"http://127.0.0.1:8000/api/projects/1/actions/\\\",2752.6,730.1,\\\"fetch\\\",2752.6,3482.7],[\\\"http://127.0.0.1:8000/api/projects/1/annotations/?scope=organization&deleted=false\\\",2753,752.4,\\\"fetch\\\",2753,3505.4],[\\\"http://127.0.0.1:8000/api/projects/1/cohorts?limit=600\\\",2753.4,714.2,\\\"fetch\\\",2753.4,3467.6],[\\\"http://127.0.0.1:8000/api/projects/1/event_definitions/?limit=5000\\\",2753.9,747.6,\\\"fetch\\\",2753.9,3501.5],[\\\"http://127.0.0.1:8000/api/person/properties/\\\",2754.1,1089.1,\\\"fetch\\\",2754.1,3843.2],[\\\"http://127.0.0.1:8000/api/projects/@current/property_definitions/?limit=5000\\\",2754.4,865.2,\\\"fetch\\\",2754.4,3619.6],[\\\"http://127.0.0.1:8000/api/instance_status/\\\",2759.8,1354.8,\\\"fetch\\\",2759.8,4114.6],[\\\"https://update.posthog.com/\\\",2760.7,258.8,\\\"fetch\\\",2760.7,3019.5],[\\\"http://127.0.0.1:8000/api/organizations/@current/invites/\\\",2762,889.1,\\\"fetch\\\",2762,3651.1],[\\\"http://127.0.0.1:8000/api/personal_api_keys/\\\",2773.3,824.3,\\\"fetch\\\",2773.3,3597.6],[\\\"http://127.0.0.1:8000/api/license/\\\",2777.3,848.6,\\\"fetch\\\",2777.3,3625.9],[\\\"https://www.gravatar.com/avatar/2e7d95b60efbe947f71009a1af1ba8d0?s=96&d=404\\\",2778.2,null,\\\"img\\\",2778.2,2778.2],[\\\"http://127.0.0.1:8000/static/icons/favicon-dev.ico?v=2021-04-29\\\",2814.7,842.2,\\\"other\\\",2814.7,3656.9],[\\\"http://127.0.0.1:8000/api/projects/1/dashboards/\\\",2829.3,1082,\\\"fetch\\\",2829.3,3911.3],[\\\"http://127.0.0.1:8000/static/site.webmanifest?v=2021-04-29\\\",2829.5,831.8,\\\"other\\\",2829.5,3661.3],[\\\"http://localhost:8234/static/chunk-3B7RVXAB.js\\\",2845.9,28.6,\\\"other\\\",2845.9,2874.5],[\\\"http://localhost:8234/static/chunk-CJ7JBN4P.js\\\",2846,29.1,\\\"other\\\",2846,2875.1],[\\\"http://127.0.0.1:8000/api/projects/1/events/?properties=%5B%7B%22key%22%3A%22created_at%22%2C%22value%22%3A%222022-01-19%2007%3A01%3A28%22%2C%22operator%22%3A%22is_date_before%22%2C%22type%22%3A%22event%22%7D%5D&orderBy=%5B%22-timestamp%22%5D&after=2021-01-24T07%3A41%3A03.290Z\\\",2900,1344,\\\"fetch\\\",2900,4244],[\\\"https://app.posthog.com/e/?ip=1&_=1643010063486&v=0.0.3\\\",3097.2,498,\\\"fetch\\\",3097.2,3595.2],[\\\"https://app.posthog.com/e/?ip=1&_=1643010063488&v=0.0.3\\\",3098.2,499.3,\\\"fetch\\\",3098.2,3597.5],[\\\"http://127.0.0.1:8000/api/projects/@current/feature_flags/my_flags?groups=%7B%22project%22%3A%22017e6d93-95c4-0000-3336-11f4c03eb344%22%2C%22organization%22%3A%22017e6d93-8fa6-0000-deb6-1c78260418c9%22%2C%22instance%22%3A%22http%3A%2F%2Flocalhost%3A8000%22%7D&temporary_token=y4r__bL-SbC4EXQkDC2VNCzjE4bZPTqBvKqMiut7zNw\\\",3098.8,880.9,\\\"fetch\\\",3098.8,3979.7],[\\\"http://localhost:8234/static/toolbar.css\\\",3188.8,13.1,\\\"link\\\",3188.8,3201.9],[\\\"http://127.0.0.1:8000/e/?compression=gzip-js&ip=1&_=1643010066104\\\",5717,26.7,\\\"xmlhttprequest\\\",5717,5743.7],[\\\"http://localhost:8234/static/chunk-EWTWTRB2.js\\\",8817.9,27,\\\"other\\\",8817.9,8844.9],[\\\"http://localhost:8234/static/chunk-NGQGL7D3.js\\\",8818.1,27.3,\\\"other\\\",8818.1,8845.4],[\\\"http://localhost:8234/static/ActionsTable-HEA24TMU.js\\\",8818.2,27.4,\\\"other\\\",8818.2,8845.6],[\\\"http://127.0.0.1:8000/static/assets/actions-tutorial-grouping-JZSPRS7B.svg\\\",8906,32.9,\\\"img\\\",8906,8938.9],[\\\"http://127.0.0.1:8000/static/assets/actions-tutorial-standardized-G647GOB5.svg\\\",8906.1,36.9,\\\"img\\\",8906.1,8943],[\\\"http://127.0.0.1:8000/static/assets/actions-tutorial-retroactive-S22RZKEF.svg\\\",8906.2,32.6,\\\"img\\\",8906.2,8938.8],[\\\"http://127.0.0.1:8000/e/?compression=gzip-js&ip=1&_=1643010072108\\\",11729.6,23.8,\\\"xmlhttprequest\\\",11729.6,11753.4],[\\\"http://localhost:8234/static/Action-V5A27KJB.js\\\",13603.2,13.3,\\\"other\\\",13603.2,13616.5],[\\\"http://127.0.0.1:8000/e/?compression=gzip-js&ip=1&_=1643010075116\\\",14739.6,18.3,\\\"xmlhttprequest\\\",14739.6,14757.9],[\\\"http://127.0.0.1:8000/e/?compression=gzip-js&ip=1&_=1643010078117\\\",17743.3,20.5,\\\"xmlhttprequest\\\",17743.3,17763.8],[\\\"http://127.0.0.1:8000/e/?compression=gzip-js&ip=1&_=1643010081122\\\",20750.3,10.7,\\\"xmlhttprequest\\\",20750.3,20761],[\\\"http://127.0.0.1:8000/api/projects/1/actions/\\\",25029.2,96,\\\"fetch\\\",25029.2,25125.2]]]}\",\n-                        \"$geoip_city_name\": \"Sydney\",\n-                        \"$geoip_country_name\": \"Australia\",\n-                        \"$geoip_country_code\": \"AU\",\n-                        \"$geoip_continent_name\": \"Oceania\",\n-                        \"$geoip_continent_code\": \"OC\",\n-                        \"$geoip_postal_code\": \"2000\",\n-                        \"$geoip_latitude\": -33.8601,\n-                        \"$geoip_longitude\": 151.2101,\n-                        \"$geoip_time_zone\": \"Australia/Sydney\",\n-                        \"$geoip_subdivision_1_code\": \"NSW\",\n-                        \"$geoip_subdivision_1_name\": \"New South Wales\",\n-                        \"$plugins_succeeded\": [\"GeoIP (1)\"],\n-                        \"$plugins_failed\": [],\n-                        \"$plugins_deferred\": [],\n-                        \"$ip\": \"127.0.0.1\",\n-                        \"$set_once\": {\n-                            \"$initial_os\": \"Mac OS X\",\n-                            \"$initial_browser\": \"Chrome\",\n-                            \"$initial_device_type\": \"Desktop\",\n-                            \"$initial_current_url\": \"http://127.0.0.1:8000/action/15?properties=%5B%5D\",\n-                            \"$initial_browser_version\": 97,\n-                            \"$initial_referrer\": \"http://127.0.0.1:8000/events?properties=%5B%7B%22key%22%3A%22created_at%22%2C%22value%22%3A%222022-01-19%2007%3A01%3A28%22%2C%22operator%22%3A%22is_date_before%22%2C%22type%22%3A%22event%22%7D%5D\",\n-                            \"$initial_referring_domain\": \"127.0.0.1:8000\"\n-                        },\n-                        \"$group_0\": \"017e6d93-95c4-0000-3336-11f4c03eb344\",\n-                        \"$group_1\": \"017e6d93-8fa6-0000-deb6-1c78260418c9\",\n-                        \"$group_2\": \"http://localhost:8000\"\n-                    },\n-                    \"event\": \"$pageview\",\n-                    \"timestamp\": \"2022-01-24T07:41:25.554000+00:00\",\n-                    \"person\": {\n-                        \"is_identified\": true,\n-                        \"distinct_ids\": [\"UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj\"],\n-                        \"properties\": {\n-                            \"email\": \"paul@posthog.com\"\n-                        }\n-                    },\n-                    \"elements\": [],\n-                    \"elements_chain\": \"\"\n-                },\n-                {\n-                    \"id\": \"017e8b08-58f2-0000-847b-d2c9940f5966\",\n-                    \"distinct_id\": \"UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj\",\n-                    \"properties\": {\n-                        \"$os\": \"Mac OS X\",\n-                        \"$browser\": \"Chrome\",\n-                        \"$device_type\": \"Desktop\",\n-                        \"$current_url\": \"http://127.0.0.1:8000/action/15?properties=%5B%5D\",\n-                        \"$host\": \"127.0.0.1:8000\",\n-                        \"$pathname\": \"/action/15\",\n-                        \"$browser_version\": 97,\n-                        \"$screen_height\": 982,\n-                        \"$screen_width\": 1512,\n-                        \"$viewport_height\": 865,\n-                        \"$viewport_width\": 1512,\n-                        \"$lib\": \"web\",\n-                        \"$lib_version\": \"1.17.3\",\n-                        \"$insert_id\": \"31i9yo0yy3g7pol4\",\n-                        \"$time\": 1643010085.509,\n-                        \"distinct_id\": \"UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj\",\n-                        \"$device_id\": \"17e6d9397cc50f-03939b929747b8-1d326253-16a7f0-17e6d9397cd1aa7\",\n-                        \"$initial_referrer\": \"http://127.0.0.1:8000/signup\",\n-                        \"$initial_referring_domain\": \"127.0.0.1:8000\",\n-                        \"$referrer\": \"http://127.0.0.1:8000/events?properties=%5B%7B%22key%22%3A%22created_at%22%2C%22value%22%3A%222022-01-19%2007%3A01%3A28%22%2C%22operator%22%3A%22is_date_before%22%2C%22type%22%3A%22event%22%7D%5D\",\n-                        \"$referring_domain\": \"127.0.0.1:8000\",\n-                        \"$user_id\": \"UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj\",\n-                        \"is_demo_project\": false,\n-                        \"$groups\": {\n-                            \"project\": \"017e6d93-95c4-0000-3336-11f4c03eb344\",\n-                            \"organization\": \"017e6d93-8fa6-0000-deb6-1c78260418c9\",\n-                            \"instance\": \"http://localhost:8000\"\n-                        },\n-                        \"posthog_version\": \"1.31.1\",\n-                        \"realm\": \"hosted-clickhouse\",\n-                        \"is_clickhouse_enabled\": true,\n-                        \"ee_available\": true,\n-                        \"email_service_available\": false,\n-                        \"$active_feature_flags\": [\"6619-query-events-by-date\", \"hackathon-apm\", \"something\"],\n-                        \"$feature/6619-query-events-by-date\": true,\n-                        \"$feature/hackathon-apm\": true,\n-                        \"$feature/something\": true,\n-                        \"token\": \"phc_PzZhed4GBoxecFlTaC2hIY7JsSAghIPAIp2f3uwUsvw\",\n-                        \"$session_id\": \"17e8ae4b5a9323-0db8ef18d837a-1d326253-16a7f0-17e8ae4b5aa2db\",\n-                        \"$window_id\": \"17e8ae4b5add5-09b55a3a638ebf-1d326253-16a7f0-17e8ae4b5ae1913\",\n-                        \"$performance_page_loaded\": 2617.3,\n-                        \"$performance_raw\": \"{\\\"navigation\\\":[[\\\"name\\\",\\\"entryType\\\",\\\"duration\\\",\\\"initiatorType\\\",\\\"fetchStart\\\",\\\"domainLookupStart\\\",\\\"domainLookupEnd\\\",\\\"connectStart\\\",\\\"connectEnd\\\",\\\"requestStart\\\",\\\"responseStart\\\",\\\"responseEnd\\\",\\\"transferSize\\\",\\\"encodedBodySize\\\",\\\"decodedBodySize\\\",\\\"unloadEventStart\\\",\\\"unloadEventEnd\\\",\\\"domInteractive\\\",\\\"domContentLoadedEventStart\\\",\\\"domContentLoadedEventEnd\\\",\\\"domComplete\\\",\\\"loadEventStart\\\",\\\"loadEventEnd\\\",\\\"type\\\"],[[\\\"http://127.0.0.1:8000/events?properties=%5B%7B%22key%22%3A%22created_at%22%2C%22value%22%3A%222022-01-19%2007%3A01%3A28%22%2C%22operator%22%3A%22is_date_before%22%2C%22type%22%3A%22event%22%7D%5D\\\",\\\"navigation\\\",2617.3,\\\"navigation\\\",11,11,11,11,11,24.3,1084,1084.8,33585,33285,33285,1092.9,1104,2478.9,2478.9,2478.9,2617.3,2617.3,2617.3,\\\"reload\\\"]]],\\\"paint\\\":[[\\\"name\\\",\\\"entryType\\\",\\\"startTime\\\"],[[\\\"first-paint\\\",\\\"paint\\\",2483.6],[\\\"first-contentful-paint\\\",\\\"paint\\\",2483.6]]],\\\"resource\\\":[[\\\"name\\\",\\\"startTime\\\",\\\"duration\\\",\\\"initiatorType\\\",\\\"fetchStart\\\",\\\"responseEnd\\\"],[[\\\"http://localhost:8234/static/index.css?t=1643009964175\\\",1135,1332.7,\\\"link\\\",1135,2467.7],[\\\"http://localhost:8234/static/index.js?t=1643009964175\\\",1168.1,1274.7,\\\"other\\\",1168.1,2442.8],[\\\"http://localhost:8234/static/chunk-XICZDHER.js\\\",1168.4,1281.9,\\\"other\\\",1168.4,2450.3],[\\\"http://localhost:8234/static/chunk-5MMMF5K7.js\\\",1168.5,1271.6,\\\"other\\\",1168.5,2440.1],[\\\"http://localhost:8234/static/chunk-ROHUIGSJ.js\\\",1168.6,1271.8,\\\"other\\\",1168.6,2440.4],[\\\"http://localhost:8234/static/chunk-ZO6AYWDD.js\\\",1171,1274.5,\\\"other\\\",1171,2445.5],[\\\"http://localhost:8234/static/chunk-3TJORNMS.js\\\",1171.1,1267.5,\\\"other\\\",1171.1,2438.6],[\\\"http://localhost:8234/static/chunk-MIOXAXF4.js\\\",1171.2,1289.2,\\\"other\\\",1171.2,2460.4],[\\\"http://localhost:8234/static/chunk-W3XSBZQT.js\\\",1171.2,1303.1,\\\"other\\\",1171.2,2474.3],[\\\"http://localhost:8234/static/chunk-HG47DNA6.js\\\",1171.3,1289.5,\\\"other\\\",1171.3,2460.8],[\\\"http://localhost:8234/static/chunk-KT2H2P52.js\\\",1171.5,1292.4,\\\"other\\\",1171.5,2463.9],[\\\"http://localhost:8234/static/chunk-WCD5LITO.js\\\",1171.6,1288.9,\\\"other\\\",1171.6,2460.5],[\\\"http://localhost:8234/static/chunk-OZGU6W75.js\\\",1171.6,1290.2,\\\"other\\\",1171.6,2461.8],[\\\"http://localhost:8234/static/chunk-GN5GHDD7.js\\\",1171.7,1308.5,\\\"other\\\",1171.7,2480.2],[\\\"http://localhost:8234/static/chunk-3HMUCGO3.js\\\",1171.7,1310.1,\\\"other\\\",1171.7,2481.8],[\\\"http://localhost:8234/static/chunk-LO4HT7SR.js\\\",1171.9,1292.6,\\\"other\\\",1171.9,2464.5],[\\\"http://localhost:8234/static/chunk-3GPSPDA2.js\\\",1172,1303,\\\"other\\\",1172,2475],[\\\"http://localhost:8234/static/chunk-3YSVPLYF.js\\\",1172.1,1306,\\\"other\\\",1172.1,2478.1],[\\\"http://localhost:8234/static/chunk-SS3VKUJU.js\\\",1172.3,1308.2,\\\"other\\\",1172.3,2480.5],[\\\"http://localhost:8234/static/chunk-2O667M4D.js\\\",1172.3,1316.6,\\\"other\\\",1172.3,2488.9],[\\\"http://localhost:8234/static/chunk-2VV7PQO5.js\\\",1172.4,1317.2,\\\"other\\\",1172.4,2489.6],[\\\"http://localhost:8234/static/chunk-EOM6WIAG.js\\\",1172.5,1317.2,\\\"other\\\",1172.5,2489.7],[\\\"http://localhost:8234/static/chunk-SKUSLQI7.js\\\",1172.5,1317.1,\\\"other\\\",1172.5,2489.6],[\\\"http://localhost:8234/static/chunk-GUJPPS5R.js\\\",1172.7,1319.9,\\\"other\\\",1172.7,2492.6],[\\\"http://localhost:8234/static/chunk-BCILFNT3.js\\\",1172.7,1320,\\\"other\\\",1172.7,2492.7],[\\\"http://localhost:8234/static/chunk-SPXZCQAI.js\\\",1172.8,1346.9,\\\"other\\\",1172.8,2519.7],[\\\"http://localhost:8234/static/chunk-XPGE43VJ.js\\\",1172.9,1335.8,\\\"other\\\",1172.9,2508.7],[\\\"http://localhost:8234/static/chunk-L4IYGZIG.js\\\",1172.9,1336,\\\"other\\\",1172.9,2508.9],[\\\"http://localhost:8234/static/chunk-IGTMCF24.js\\\",1173,1334.3,\\\"other\\\",1173,2507.3],[\\\"http://localhost:8234/static/chunk-AMOE3OJU.js\\\",1173,1334.6,\\\"other\\\",1173,2507.6],[\\\"http://localhost:8234/static/chunk-BO4VDBQ6.js\\\",1173.2,1347.5,\\\"other\\\",1173.2,2520.7],[\\\"http://localhost:8234/static/chunk-QE52CDVG.js\\\",1173.2,1347.6,\\\"other\\\",1173.2,2520.8],[\\\"http://localhost:8234/static/chunk-VHSG55N2.js\\\",1173.4,1344.5,\\\"other\\\",1173.4,2517.9],[\\\"http://localhost:8234/static/chunk-4ZUV5LND.js\\\",1173.4,1347.5,\\\"other\\\",1173.4,2520.9],[\\\"http://localhost:8234/static/chunk-ASGLZXIV.js\\\",1173.5,1347.4,\\\"other\\\",1173.5,2520.9],[\\\"http://localhost:8234/static/chunk-HGNVPWDY.js\\\",1173.7,1348.7,\\\"other\\\",1173.7,2522.4],[\\\"http://localhost:8234/static/chunk-PRPBRI2E.js\\\",1173.7,1350.4,\\\"other\\\",1173.7,2524.1],[\\\"http://localhost:8234/static/chunk-LD3TGMGW.js\\\",1173.7,1360.8,\\\"other\\\",1173.7,2534.5],[\\\"http://localhost:8234/static/chunk-CA6FFFUC.js\\\",1173.8,1347.8,\\\"other\\\",1173.8,2521.6],[\\\"http://localhost:8234/static/chunk-YBU6RJ5N.js\\\",1173.8,1350.3,\\\"other\\\",1173.8,2524.1],[\\\"http://localhost:8234/static/chunk-HB4RLT5O.js\\\",1174,1352.7,\\\"other\\\",1174,2526.7],[\\\"http://localhost:8234/static/chunk-UJJIEZBP.js\\\",1174,1352.9,\\\"other\\\",1174,2526.9],[\\\"http://localhost:8234/static/chunk-KXP7VI6L.js\\\",1174.2,1360.6,\\\"other\\\",1174.2,2534.8],[\\\"http://localhost:8234/static/chunk-OHMX2FMJ.js\\\",1174.3,1355.2,\\\"other\\\",1174.3,2529.5],[\\\"http://localhost:8234/static/chunk-ATKSJCQX.js\\\",1174.3,1355.7,\\\"other\\\",1174.3,2530],[\\\"http://localhost:8234/static/chunk-ZUFDLBNZ.js\\\",1174.4,1356,\\\"other\\\",1174.4,2530.4],[\\\"http://localhost:8234/static/chunk-HOR2D746.js\\\",1174.4,1379.6,\\\"other\\\",1174.4,2554],[\\\"http://localhost:8234/static/chunk-M6NPX6BS.js\\\",1174.5,1405.7,\\\"other\\\",1174.5,2580.2],[\\\"http://localhost:8234/static/chunk-VJGIAYQC.js\\\",1174.6,1356.2,\\\"other\\\",1174.6,2530.8],[\\\"http://localhost:8234/static/toolbar.js?_ts=1643010063093\\\",2702.9,193.6,\\\"script\\\",2702.9,2896.5],[\\\"http://127.0.0.1:8000/e/?ip=1&_=1643010063101\\\",2712.5,72.7,\\\"xmlhttprequest\\\",2712.5,2785.2],[\\\"http://127.0.0.1:8000/decide/?v=2&ip=1&_=1643010063103\\\",2714.4,337.4,\\\"xmlhttprequest\\\",2714.4,3051.8],[\\\"http://127.0.0.1:8000/engage/?ip=1&_=1643010063119\\\",2730.4,609.2,\\\"xmlhttprequest\\\",2730.4,3339.6],[\\\"http://localhost:8234/static/chunk-EYLKE6KE.js\\\",2742.3,5.7,\\\"other\\\",2742.3,2748],[\\\"http://localhost:8234/static/chunk-URHQA52P.js\\\",2742.5,5.8,\\\"other\\\",2742.5,2748.3],[\\\"http://localhost:8234/static/chunk-RNNL3253.js\\\",2742.6,4.3,\\\"other\\\",2742.6,2746.9],[\\\"http://localhost:8234/static/chunk-FS5CTTMA.js\\\",2742.7,7.4,\\\"other\\\",2742.7,2750.1],[\\\"http://localhost:8234/static/chunk-D43ZYSLF.js\\\",2742.7,6.7,\\\"other\\\",2742.7,2749.4],[\\\"http://localhost:8234/static/chunk-DUQI5YEH.js\\\",2743.2,7.3,\\\"other\\\",2743.2,2750.5],[\\\"http://localhost:8234/static/chunk-G2QPUPTV.js\\\",2743.5,9.4,\\\"other\\\",2743.5,2752.9],[\\\"http://localhost:8234/static/chunk-JRLWBJNF.js\\\",2743.8,7.7,\\\"other\\\",2743.8,2751.5],[\\\"http://localhost:8234/static/chunk-OSOS22ZK.js\\\",2744.1,9.9,\\\"other\\\",2744.1,2754],[\\\"http://localhost:8234/static/chunk-KQBLA4V6.js\\\",2744.3,8.9,\\\"other\\\",2744.3,2753.2],[\\\"http://localhost:8234/static/chunk-W7PNUTIQ.js\\\",2744.8,8.6,\\\"other\\\",2744.8,2753.4],[\\\"http://localhost:8234/static/chunk-EB5W63F3.js\\\",2745,8.5,\\\"other\\\",2745,2753.5],[\\\"http://localhost:8234/static/chunk-SLQJA2PL.js\\\",2745.1,15.5,\\\"other\\\",2745.1,2760.6],[\\\"http://localhost:8234/static/chunk-I5O3JHP6.js\\\",2745.5,15.9,\\\"other\\\",2745.5,2761.4],[\\\"http://localhost:8234/static/chunk-F4AIONA2.js\\\",2745.8,18.4,\\\"other\\\",2745.8,2764.2],[\\\"http://localhost:8234/static/chunk-63HTFI3S.js\\\",2746.1,18.5,\\\"other\\\",2746.1,2764.6],[\\\"http://localhost:8234/static/chunk-ZCRZKRW7.js\\\",2746.2,18.7,\\\"other\\\",2746.2,2764.9],[\\\"http://localhost:8234/static/chunk-C2C4IEM7.js\\\",2746.7,18,\\\"other\\\",2746.7,2764.7],[\\\"http://localhost:8234/static/chunk-R3PDDW67.js\\\",2746.9,21,\\\"other\\\",2746.9,2767.9],[\\\"http://localhost:8234/static/chunk-Q2Y3HUWS.js\\\",2747,21,\\\"other\\\",2747,2768],[\\\"http://localhost:8234/static/chunk-Y7BHXLNZ.js\\\",2747.2,20.9,\\\"other\\\",2747.2,2768.1],[\\\"http://localhost:8234/static/chunk-IVAJFO7S.js\\\",2747.5,21,\\\"other\\\",2747.5,2768.5],[\\\"http://localhost:8234/static/Events-LZ45RGCO.js\\\",2747.6,5.3,\\\"other\\\",2747.6,2752.9],[\\\"http://127.0.0.1:8000/api/projects/1/actions/\\\",2752.6,730.1,\\\"fetch\\\",2752.6,3482.7],[\\\"http://127.0.0.1:8000/api/projects/1/annotations/?scope=organization&deleted=false\\\",2753,752.4,\\\"fetch\\\",2753,3505.4],[\\\"http://127.0.0.1:8000/api/projects/1/cohorts?limit=600\\\",2753.4,714.2,\\\"fetch\\\",2753.4,3467.6],[\\\"http://127.0.0.1:8000/api/projects/1/event_definitions/?limit=5000\\\",2753.9,747.6,\\\"fetch\\\",2753.9,3501.5],[\\\"http://127.0.0.1:8000/api/person/properties/\\\",2754.1,1089.1,\\\"fetch\\\",2754.1,3843.2],[\\\"http://127.0.0.1:8000/api/projects/@current/property_definitions/?limit=5000\\\",2754.4,865.2,\\\"fetch\\\",2754.4,3619.6],[\\\"http://127.0.0.1:8000/api/instance_status/\\\",2759.8,1354.8,\\\"fetch\\\",2759.8,4114.6],[\\\"https://update.posthog.com/\\\",2760.7,258.8,\\\"fetch\\\",2760.7,3019.5],[\\\"http://127.0.0.1:8000/api/organizations/@current/invites/\\\",2762,889.1,\\\"fetch\\\",2762,3651.1],[\\\"http://127.0.0.1:8000/api/personal_api_keys/\\\",2773.3,824.3,\\\"fetch\\\",2773.3,3597.6],[\\\"http://127.0.0.1:8000/api/license/\\\",2777.3,848.6,\\\"fetch\\\",2777.3,3625.9],[\\\"https://www.gravatar.com/avatar/2e7d95b60efbe947f71009a1af1ba8d0?s=96&d=404\\\",2778.2,null,\\\"img\\\",2778.2,2778.2],[\\\"http://127.0.0.1:8000/static/icons/favicon-dev.ico?v=2021-04-29\\\",2814.7,842.2,\\\"other\\\",2814.7,3656.9],[\\\"http://127.0.0.1:8000/api/projects/1/dashboards/\\\",2829.3,1082,\\\"fetch\\\",2829.3,3911.3],[\\\"http://127.0.0.1:8000/static/site.webmanifest?v=2021-04-29\\\",2829.5,831.8,\\\"other\\\",2829.5,3661.3],[\\\"http://localhost:8234/static/chunk-3B7RVXAB.js\\\",2845.9,28.6,\\\"other\\\",2845.9,2874.5],[\\\"http://localhost:8234/static/chunk-CJ7JBN4P.js\\\",2846,29.1,\\\"other\\\",2846,2875.1],[\\\"http://127.0.0.1:8000/api/projects/1/events/?properties=%5B%7B%22key%22%3A%22created_at%22%2C%22value%22%3A%222022-01-19%2007%3A01%3A28%22%2C%22operator%22%3A%22is_date_before%22%2C%22type%22%3A%22event%22%7D%5D&orderBy=%5B%22-timestamp%22%5D&after=2021-01-24T07%3A41%3A03.290Z\\\",2900,1344,\\\"fetch\\\",2900,4244],[\\\"https://app.posthog.com/e/?ip=1&_=1643010063486&v=0.0.3\\\",3097.2,498,\\\"fetch\\\",3097.2,3595.2],[\\\"https://app.posthog.com/e/?ip=1&_=1643010063488&v=0.0.3\\\",3098.2,499.3,\\\"fetch\\\",3098.2,3597.5],[\\\"http://127.0.0.1:8000/api/projects/@current/feature_flags/my_flags?groups=%7B%22project%22%3A%22017e6d93-95c4-0000-3336-11f4c03eb344%22%2C%22organization%22%3A%22017e6d93-8fa6-0000-deb6-1c78260418c9%22%2C%22instance%22%3A%22http%3A%2F%2Flocalhost%3A8000%22%7D&temporary_token=y4r__bL-SbC4EXQkDC2VNCzjE4bZPTqBvKqMiut7zNw\\\",3098.8,880.9,\\\"fetch\\\",3098.8,3979.7],[\\\"http://localhost:8234/static/toolbar.css\\\",3188.8,13.1,\\\"link\\\",3188.8,3201.9],[\\\"http://127.0.0.1:8000/e/?compression=gzip-js&ip=1&_=1643010066104\\\",5717,26.7,\\\"xmlhttprequest\\\",5717,5743.7],[\\\"http://localhost:8234/static/chunk-EWTWTRB2.js\\\",8817.9,27,\\\"other\\\",8817.9,8844.9],[\\\"http://localhost:8234/static/chunk-NGQGL7D3.js\\\",8818.1,27.3,\\\"other\\\",8818.1,8845.4],[\\\"http://localhost:8234/static/ActionsTable-HEA24TMU.js\\\",8818.2,27.4,\\\"other\\\",8818.2,8845.6],[\\\"http://127.0.0.1:8000/static/assets/actions-tutorial-grouping-JZSPRS7B.svg\\\",8906,32.9,\\\"img\\\",8906,8938.9],[\\\"http://127.0.0.1:8000/static/assets/actions-tutorial-standardized-G647GOB5.svg\\\",8906.1,36.9,\\\"img\\\",8906.1,8943],[\\\"http://127.0.0.1:8000/static/assets/actions-tutorial-retroactive-S22RZKEF.svg\\\",8906.2,32.6,\\\"img\\\",8906.2,8938.8],[\\\"http://127.0.0.1:8000/e/?compression=gzip-js&ip=1&_=1643010072108\\\",11729.6,23.8,\\\"xmlhttprequest\\\",11729.6,11753.4],[\\\"http://localhost:8234/static/Action-V5A27KJB.js\\\",13603.2,13.3,\\\"other\\\",13603.2,13616.5],[\\\"http://127.0.0.1:8000/e/?compression=gzip-js&ip=1&_=1643010075116\\\",14739.6,18.3,\\\"xmlhttprequest\\\",14739.6,14757.9],[\\\"http://127.0.0.1:8000/e/?compression=gzip-js&ip=1&_=1643010078117\\\",17743.3,20.5,\\\"xmlhttprequest\\\",17743.3,17763.8],[\\\"http://127.0.0.1:8000/e/?compression=gzip-js&ip=1&_=1643010081122\\\",20750.3,10.7,\\\"xmlhttprequest\\\",20750.3,20761],[\\\"http://127.0.0.1:8000/api/projects/1/actions/\\\",25029.2,96,\\\"fetch\\\",25029.2,25125.2]]]}\",\n-                        \"$geoip_city_name\": \"Sydney\",\n-                        \"$geoip_country_name\": \"Australia\",\n-                        \"$geoip_country_code\": \"AU\",\n-                        \"$geoip_continent_name\": \"Oceania\",\n-                        \"$geoip_continent_code\": \"OC\",\n-                        \"$geoip_postal_code\": \"2000\",\n-                        \"$geoip_latitude\": -33.8601,\n-                        \"$geoip_longitude\": 151.2101,\n-                        \"$geoip_time_zone\": \"Australia/Sydney\",\n-                        \"$geoip_subdivision_1_code\": \"NSW\",\n-                        \"$geoip_subdivision_1_name\": \"New South Wales\",\n-                        \"$plugins_succeeded\": [\"GeoIP (1)\"],\n-                        \"$plugins_failed\": [],\n-                        \"$plugins_deferred\": [],\n-                        \"$ip\": \"127.0.0.1\",\n-                        \"$set_once\": {\n-                            \"$initial_os\": \"Mac OS X\",\n-                            \"$initial_browser\": \"Chrome\",\n-                            \"$initial_device_type\": \"Desktop\",\n-                            \"$initial_current_url\": \"http://127.0.0.1:8000/action/15?properties=%5B%5D\",\n-                            \"$initial_browser_version\": 97,\n-                            \"$initial_referrer\": \"http://127.0.0.1:8000/events?properties=%5B%7B%22key%22%3A%22created_at%22%2C%22value%22%3A%222022-01-19%2007%3A01%3A28%22%2C%22operator%22%3A%22is_date_before%22%2C%22type%22%3A%22event%22%7D%5D\",\n-                            \"$initial_referring_domain\": \"127.0.0.1:8000\"\n-                        },\n-                        \"$group_0\": \"017e6d93-95c4-0000-3336-11f4c03eb344\",\n-                        \"$group_1\": \"017e6d93-8fa6-0000-deb6-1c78260418c9\",\n-                        \"$group_2\": \"http://localhost:8000\"\n-                    },\n-                    \"event\": \"$pageview\",\n-                    \"timestamp\": \"2022-01-24T07:41:25.536000+00:00\",\n-                    \"person\": {\n-                        \"is_identified\": true,\n-                        \"distinct_ids\": [\"UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj\"],\n-                        \"properties\": {\n-                            \"email\": \"paul@posthog.com\"\n-                        }\n-                    },\n-                    \"elements\": [],\n-                    \"elements_chain\": \"\"\n-                }\n-            ],\n-            \"pageViewEventsLoading\": false,\n-            \"eventToDisplay\": {\n-                \"id\": \"017e8b0a-7960-0002-7998-6902e7ca8d97\",\n-                \"pointsInTime\": {\n-                    \"domComplete\": {\n-                        \"time\": 975.5,\n-                        \"color\": \"hsl(135, 40%, 74%)\"\n-                    },\n-                    \"domInteractive\": {\n-                        \"time\": 328.2,\n-                        \"color\": \"hsl(135, 100%, 14%)\"\n-                    },\n-                    \"pageLoaded\": {\n-                        \"time\": 975.9,\n-                        \"color\": \"hsl(155, 60%, 54%)\"\n-                    },\n-                    \"firstContentfulPaint\": {\n-                        \"time\": 289.7,\n-                        \"color\": \"hsl(155, 60%, 14%)\"\n-                    }\n-                },\n-                \"durations\": {\n-                    \"dns lookup\": {\n-                        \"start\": 4.7,\n-                        \"end\": 4.7,\n-                        \"color\": \"hsl(235, 60%, 34%)\"\n-                    },\n-                    \"connection time\": {\n-                        \"start\": 4.7,\n-                        \"end\": 4.7,\n-                        \"color\": \"hsl(235, 60%, 34%)\"\n-                    },\n-                    \"waiting for first byte (TTFB)\": {\n-                        \"start\": 6,\n-                        \"end\": 143.9,\n-                        \"color\": \"hsl(235, 60%, 34%)\"\n-                    },\n-                    \"/static/index.css\": {\n-                        \"start\": 177.1,\n-                        \"end\": 187.4,\n-                        \"color\": \"hsl(85, 60%, 14%)\"\n-                    },\n-                    \"/static/index.js\": {\n-                        \"start\": 201.7,\n-                        \"end\": 206.8,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-XICZDHER.js\": {\n-                        \"start\": 208,\n-                        \"end\": 212.3,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-5MMMF5K7.js\": {\n-                        \"start\": 208.1,\n-                        \"end\": 210.8,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-ROHUIGSJ.js\": {\n-                        \"start\": 208.3,\n-                        \"end\": 212.1,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-ZO6AYWDD.js\": {\n-                        \"start\": 209.2,\n-                        \"end\": 212.4,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-3TJORNMS.js\": {\n-                        \"start\": 209.4,\n-                        \"end\": 212.4,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-MIOXAXF4.js\": {\n-                        \"start\": 209.5,\n-                        \"end\": 212.4,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-W3XSBZQT.js\": {\n-                        \"start\": 210.3,\n-                        \"end\": 213.8,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-HG47DNA6.js\": {\n-                        \"start\": 211.1,\n-                        \"end\": 218.4,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-KT2H2P52.js\": {\n-                        \"start\": 211.6,\n-                        \"end\": 218.6,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-WCD5LITO.js\": {\n-                        \"start\": 211.7,\n-                        \"end\": 219.2,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-OZGU6W75.js\": {\n-                        \"start\": 211.9,\n-                        \"end\": 219.2,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-GN5GHDD7.js\": {\n-                        \"start\": 212.6,\n-                        \"end\": 221.5,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-3HMUCGO3.js\": {\n-                        \"start\": 213.3,\n-                        \"end\": 221.6,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-LO4HT7SR.js\": {\n-                        \"start\": 213.5,\n-                        \"end\": 219.5,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-3GPSPDA2.js\": {\n-                        \"start\": 213.6,\n-                        \"end\": 221.3,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-3YSVPLYF.js\": {\n-                        \"start\": 213.7,\n-                        \"end\": 221.3,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-SS3VKUJU.js\": {\n-                        \"start\": 213.8,\n-                        \"end\": 221.5,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-2O667M4D.js\": {\n-                        \"start\": 214,\n-                        \"end\": 221.8,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-2VV7PQO5.js\": {\n-                        \"start\": 214.1,\n-                        \"end\": 222,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-SKUSLQI7.js\": {\n-                        \"start\": 214.3,\n-                        \"end\": 222.1,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-EOM6WIAG.js\": {\n-                        \"start\": 214.4,\n-                        \"end\": 222.3,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-GUJPPS5R.js\": {\n-                        \"start\": 214.4,\n-                        \"end\": 222.3,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-BCILFNT3.js\": {\n-                        \"start\": 216.6,\n-                        \"end\": 222.3,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-SPXZCQAI.js\": {\n-                        \"start\": 216.7,\n-                        \"end\": 224.7,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-XPGE43VJ.js\": {\n-                        \"start\": 217.4,\n-                        \"end\": 223.2,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-L4IYGZIG.js\": {\n-                        \"start\": 217.5,\n-                        \"end\": 222.9,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-IGTMCF24.js\": {\n-                        \"start\": 218.2,\n-                        \"end\": 223.9,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-AMOE3OJU.js\": {\n-                        \"start\": 220.6,\n-                        \"end\": 224.2,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-BO4VDBQ6.js\": {\n-                        \"start\": 223.4,\n-                        \"end\": 228,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-QE52CDVG.js\": {\n-                        \"start\": 223.7,\n-                        \"end\": 228.1,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-VHSG55N2.js\": {\n-                        \"start\": 223.9,\n-                        \"end\": 228.1,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-4ZUV5LND.js\": {\n-                        \"start\": 224.7,\n-                        \"end\": 228.2,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-ASGLZXIV.js\": {\n-                        \"start\": 224.8,\n-                        \"end\": 228.2,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-HGNVPWDY.js\": {\n-                        \"start\": 225.8,\n-                        \"end\": 230.9,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-LD3TGMGW.js\": {\n-                        \"start\": 225.8,\n-                        \"end\": 233.8,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-PRPBRI2E.js\": {\n-                        \"start\": 226.1,\n-                        \"end\": 233.8,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-CA6FFFUC.js\": {\n-                        \"start\": 226.2,\n-                        \"end\": 234.3,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-YBU6RJ5N.js\": {\n-                        \"start\": 226.4,\n-                        \"end\": 234.3,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-HB4RLT5O.js\": {\n-                        \"start\": 226.5,\n-                        \"end\": 234.4,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-UJJIEZBP.js\": {\n-                        \"start\": 226.6,\n-                        \"end\": 236,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-KXP7VI6L.js\": {\n-                        \"start\": 226.7,\n-                        \"end\": 237.6,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-OHMX2FMJ.js\": {\n-                        \"start\": 226.9,\n-                        \"end\": 237.7,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-ATKSJCQX.js\": {\n-                        \"start\": 227,\n-                        \"end\": 237.9,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-ZUFDLBNZ.js\": {\n-                        \"start\": 227.1,\n-                        \"end\": 238,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-HOR2D746.js\": {\n-                        \"start\": 228.2,\n-                        \"end\": 241.9,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-M6NPX6BS.js\": {\n-                        \"start\": 228.7,\n-                        \"end\": 340.2,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-VJGIAYQC.js\": {\n-                        \"start\": 229.1,\n-                        \"end\": 238.6,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/toolbar.js\": {\n-                        \"start\": 486.1,\n-                        \"end\": 808.3,\n-                        \"color\": \"hsl(85, 60%, 34%)\"\n-                    },\n-                    \"/e/\": {\n-                        \"start\": 13003.7,\n-                        \"end\": 13025.7,\n-                        \"color\": \"hsl(205, 60%, 34%)\"\n-                    },\n-                    \"/decide/\": {\n-                        \"start\": 498.6,\n-                        \"end\": 590.6,\n-                        \"color\": \"hsl(205, 60%, 34%)\"\n-                    },\n-                    \"/engage/\": {\n-                        \"start\": 518.8,\n-                        \"end\": 564.4,\n-                        \"color\": \"hsl(205, 60%, 34%)\"\n-                    },\n-                    \"/static/SavedInsights-TLZR4WTT.js\": {\n-                        \"start\": 528.9,\n-                        \"end\": 533.9,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/api/projects/1/actions/\": {\n-                        \"start\": 539.4,\n-                        \"end\": 629.2,\n-                        \"color\": \"hsl(205, 60%, 14%)\"\n-                    },\n-                    \"/api/projects/1/annotations/\": {\n-                        \"start\": 545.6,\n-                        \"end\": 617.9,\n-                        \"color\": \"hsl(205, 60%, 14%)\"\n-                    },\n-                    \"/api/projects/1/cohorts\": {\n-                        \"start\": 546.5,\n-                        \"end\": 617.9,\n-                        \"color\": \"hsl(205, 60%, 14%)\"\n-                    },\n-                    \"/api/projects/1/event_definitions/\": {\n-                        \"start\": 547.6,\n-                        \"end\": 655.1,\n-                        \"color\": \"hsl(205, 60%, 14%)\"\n-                    },\n-                    \"/api/person/properties/\": {\n-                        \"start\": 548.1,\n-                        \"end\": 661.6,\n-                        \"color\": \"hsl(205, 60%, 14%)\"\n-                    },\n-                    \"/api/projects/@current/property_definitions/\": {\n-                        \"start\": 549.3,\n-                        \"end\": 673.8,\n-                        \"color\": \"hsl(205, 60%, 14%)\"\n-                    },\n-                    \"/api/instance_status/\": {\n-                        \"start\": 554.9,\n-                        \"end\": 814.6,\n-                        \"color\": \"hsl(205, 60%, 14%)\"\n-                    },\n-                    \"/\": {\n-                        \"start\": 556.7,\n-                        \"end\": 601.9,\n-                        \"color\": \"hsl(205, 60%, 14%)\"\n-                    },\n-                    \"/api/organizations/@current/invites/\": {\n-                        \"start\": 558.5,\n-                        \"end\": 665.9,\n-                        \"color\": \"hsl(205, 60%, 14%)\"\n-                    },\n-                    \"/api/personal_api_keys/\": {\n-                        \"start\": 578.8,\n-                        \"end\": 662.2,\n-                        \"color\": \"hsl(205, 60%, 14%)\"\n-                    },\n-                    \"/api/license/\": {\n-                        \"start\": 586.5,\n-                        \"end\": 676.6,\n-                        \"color\": \"hsl(205, 60%, 14%)\"\n-                    },\n-                    \"/avatar/2e7d95b60efbe947f71009a1af1ba8d0\": {\n-                        \"start\": 625.1,\n-                        \"end\": 627,\n-                        \"color\": \"hsl(235, 60%, 34%)\"\n-                    },\n-                    \"/api/projects/1/dashboards/\": {\n-                        \"start\": 791.4,\n-                        \"end\": 880.6,\n-                        \"color\": \"hsl(205, 60%, 14%)\"\n-                    },\n-                    \"/static/chunk-LUMXGCOP.js\": {\n-                        \"start\": 836.2,\n-                        \"end\": 840,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-KJPTCBBC.js\": {\n-                        \"start\": 836.5,\n-                        \"end\": 840.6,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-X7HB5SUU.js\": {\n-                        \"start\": 836.6,\n-                        \"end\": 847.2,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-Z2MYP2M2.js\": {\n-                        \"start\": 836.7,\n-                        \"end\": 851.1,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-Z6ENRSEA.js\": {\n-                        \"start\": 836.8,\n-                        \"end\": 857.4,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-FJKTD6MY.js\": {\n-                        \"start\": 837.2,\n-                        \"end\": 844.2,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-XUGMYJGP.js\": {\n-                        \"start\": 837.6,\n-                        \"end\": 847.6,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-MVOT6GTL.js\": {\n-                        \"start\": 837.8,\n-                        \"end\": 851.4,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-IMI5TOQA.js\": {\n-                        \"start\": 838.1,\n-                        \"end\": 848.1,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-UHSVE7PG.js\": {\n-                        \"start\": 838.1,\n-                        \"end\": 852.6,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-HDKRWHJ6.js\": {\n-                        \"start\": 838.2,\n-                        \"end\": 849.9,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-BDCDUKQO.js\": {\n-                        \"start\": 838.3,\n-                        \"end\": 850.1,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-OIXFZ5LK.js\": {\n-                        \"start\": 838.5,\n-                        \"end\": 851.6,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-EB5W63F3.js\": {\n-                        \"start\": 838.5,\n-                        \"end\": 851.8,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-DFRCCFPU.js\": {\n-                        \"start\": 838.6,\n-                        \"end\": 851.8,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-A4QCHFI6.js\": {\n-                        \"start\": 838.7,\n-                        \"end\": 851.8,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-3BPMDJ3N.js\": {\n-                        \"start\": 838.9,\n-                        \"end\": 851.8,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-NHUSGGUD.js\": {\n-                        \"start\": 838.9,\n-                        \"end\": 853,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-SLQJA2PL.js\": {\n-                        \"start\": 838.9,\n-                        \"end\": 854.1,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-I5O3JHP6.js\": {\n-                        \"start\": 839.7,\n-                        \"end\": 854.2,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-F4AIONA2.js\": {\n-                        \"start\": 839.9,\n-                        \"end\": 854.3,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-63HTFI3S.js\": {\n-                        \"start\": 840,\n-                        \"end\": 854.5,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-ZCRZKRW7.js\": {\n-                        \"start\": 842.4,\n-                        \"end\": 855,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-C2C4IEM7.js\": {\n-                        \"start\": 842.7,\n-                        \"end\": 855.4,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-NGQGL7D3.js\": {\n-                        \"start\": 845.9,\n-                        \"end\": 855.9,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-PTR2RUUP.js\": {\n-                        \"start\": 846.2,\n-                        \"end\": 855.9,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-R3PDDW67.js\": {\n-                        \"start\": 846.8,\n-                        \"end\": 855.9,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-Q2Y3HUWS.js\": {\n-                        \"start\": 847.1,\n-                        \"end\": 855.9,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-Y7BHXLNZ.js\": {\n-                        \"start\": 847.2,\n-                        \"end\": 856.4,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-IVAJFO7S.js\": {\n-                        \"start\": 847.4,\n-                        \"end\": 856.9,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/api/projects/@current/feature_flags/my_flags\": {\n-                        \"start\": 944.8,\n-                        \"end\": 1071.7,\n-                        \"color\": \"hsl(205, 60%, 14%)\"\n-                    },\n-                    \"/static/toolbar.css\": {\n-                        \"start\": 978.5,\n-                        \"end\": 982.7,\n-                        \"color\": \"hsl(85, 60%, 14%)\"\n-                    },\n-                    \"/api/projects/1/insights/\": {\n-                        \"start\": 1021.7,\n-                        \"end\": 1205,\n-                        \"color\": \"hsl(205, 60%, 14%)\"\n-                    },\n-                    \"/static/site.webmanifest\": {\n-                        \"start\": 1046.1,\n-                        \"end\": 1056.5,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/api/organizations/@current/members/\": {\n-                        \"start\": 1122.8,\n-                        \"end\": 1191.3,\n-                        \"color\": \"hsl(205, 60%, 14%)\"\n-                    },\n-                    \"/static/chunk-EYLKE6KE.js\": {\n-                        \"start\": 8043.3,\n-                        \"end\": 8097.7,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-URHQA52P.js\": {\n-                        \"start\": 8043.7,\n-                        \"end\": 8098.7,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-3B7RVXAB.js\": {\n-                        \"start\": 8043.9,\n-                        \"end\": 8100.1,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-FS5CTTMA.js\": {\n-                        \"start\": 8044.4,\n-                        \"end\": 8098.7,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-D43ZYSLF.js\": {\n-                        \"start\": 8044.7,\n-                        \"end\": 8098.9,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-DUQI5YEH.js\": {\n-                        \"start\": 8044.9,\n-                        \"end\": 8101.4,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-CJ7JBN4P.js\": {\n-                        \"start\": 8045.3,\n-                        \"end\": 8102,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-JRLWBJNF.js\": {\n-                        \"start\": 8045.6,\n-                        \"end\": 8101.5,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-OSOS22ZK.js\": {\n-                        \"start\": 8045.9,\n-                        \"end\": 8104.1,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-KQBLA4V6.js\": {\n-                        \"start\": 8046.1,\n-                        \"end\": 8101.5,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/chunk-W7PNUTIQ.js\": {\n-                        \"start\": 8046.3,\n-                        \"end\": 8101.8,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/Events-LZ45RGCO.js\": {\n-                        \"start\": 8047.1,\n-                        \"end\": 8101.6,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/api/projects/1/events/\": {\n-                        \"start\": 8145.6,\n-                        \"end\": 8668.9,\n-                        \"color\": \"hsl(205, 60%, 14%)\"\n-                    },\n-                    \"/static/assets/posthog-icon-FDVNZJ5Z.svg\": {\n-                        \"start\": 8855.4,\n-                        \"end\": 8857.3,\n-                        \"color\": \"hsl(155, 100%, 14%)\"\n-                    },\n-                    \"/static/chunk-EWTWTRB2.js\": {\n-                        \"start\": 10113.7,\n-                        \"end\": 10120,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/ActionsTable-HEA24TMU.js\": {\n-                        \"start\": 10114.3,\n-                        \"end\": 10120.2,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/static/assets/actions-tutorial-grouping-JZSPRS7B.svg\": {\n-                        \"start\": 10305.7,\n-                        \"end\": 10321.6,\n-                        \"color\": \"hsl(235, 60%, 34%)\"\n-                    },\n-                    \"/static/assets/actions-tutorial-standardized-G647GOB5.svg\": {\n-                        \"start\": 10306,\n-                        \"end\": 10331.8,\n-                        \"color\": \"hsl(235, 60%, 34%)\"\n-                    },\n-                    \"/static/assets/actions-tutorial-retroactive-S22RZKEF.svg\": {\n-                        \"start\": 10306.1,\n-                        \"end\": 10333.5,\n-                        \"color\": \"hsl(235, 60%, 34%)\"\n-                    },\n-                    \"/static/Action-V5A27KJB.js\": {\n-                        \"start\": 13222.6,\n-                        \"end\": 13239.8,\n-                        \"color\": \"hsl(205, 100%, 74%)\"\n-                    },\n-                    \"/api/projects/1/actions/15/\": {\n-                        \"start\": 13246.3,\n-                        \"end\": 13285.1,\n-                        \"color\": \"hsl(205, 60%, 14%)\"\n-                    }\n-                },\n-                \"maxTime\": 13285.1,\n-                \"gridMarkers\": [\n-                    0, 1328.51, 2657.02, 3985.5299999999997, 5314.04, 6642.55, 7971.0599999999995, 9299.57, 10628.08,\n-                    11956.59\n-                ]\n-            },\n-            \"currentEvent\": {\n-                \"id\": \"017e8b0a-7960-0002-7998-6902e7ca8d97\",\n-                \"distinct_id\": \"UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj\",\n-                \"properties\": {\n-                    \"$os\": \"Mac OS X\",\n-                    \"$browser\": \"Chrome\",\n-                    \"$device_type\": \"Desktop\",\n-                    \"$current_url\": \"http://127.0.0.1:8000/action/15?properties=%5B%5D\",\n-                    \"$host\": \"127.0.0.1:8000\",\n-                    \"$pathname\": \"/action/15\",\n-                    \"$browser_version\": 97,\n-                    \"$screen_height\": 982,\n-                    \"$screen_width\": 1512,\n-                    \"$viewport_height\": 865,\n-                    \"$viewport_width\": 953,\n-                    \"$lib\": \"web\",\n-                    \"$lib_version\": \"1.17.3\",\n-                    \"$insert_id\": \"mkrv09t18jtfhijv\",\n-                    \"$time\": 1643010223.99,\n-                    \"distinct_id\": \"UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj\",\n-                    \"$device_id\": \"17e6d9397cc50f-03939b929747b8-1d326253-16a7f0-17e6d9397cd1aa7\",\n-                    \"$initial_referrer\": \"http://127.0.0.1:8000/signup\",\n-                    \"$initial_referring_domain\": \"127.0.0.1:8000\",\n-                    \"$referrer\": \"http://127.0.0.1:8000/action/15?properties=%5B%5D\",\n-                    \"$referring_domain\": \"127.0.0.1:8000\",\n-                    \"$user_id\": \"UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj\",\n-                    \"is_demo_project\": false,\n-                    \"$groups\": {\n-                        \"project\": \"017e6d93-95c4-0000-3336-11f4c03eb344\",\n-                        \"organization\": \"017e6d93-8fa6-0000-deb6-1c78260418c9\",\n-                        \"instance\": \"http://localhost:8000\"\n-                    },\n-                    \"posthog_version\": \"1.31.1\",\n-                    \"realm\": \"hosted-clickhouse\",\n-                    \"is_clickhouse_enabled\": true,\n-                    \"ee_available\": true,\n-                    \"email_service_available\": false,\n-                    \"$active_feature_flags\": [\"6619-query-events-by-date\", \"hackathon-apm\", \"something\"],\n-                    \"$feature/6619-query-events-by-date\": true,\n-                    \"$feature/hackathon-apm\": true,\n-                    \"$feature/something\": true,\n-                    \"token\": \"phc_PzZhed4GBoxecFlTaC2hIY7JsSAghIPAIp2f3uwUsvw\",\n-                    \"$session_id\": \"17e8ae4b5a9323-0db8ef18d837a-1d326253-16a7f0-17e8ae4b5aa2db\",\n-                    \"$window_id\": \"17e8b0a3cad569-0e22532a0d29f9-1d326253-16a7f0-17e8b0a3caefa6\",\n-                    \"$performance_page_loaded\": 975.9,\n-                    \"$performance_raw\": \"{\\\"navigation\\\":[[\\\"name\\\",\\\"entryType\\\",\\\"duration\\\",\\\"initiatorType\\\",\\\"fetchStart\\\",\\\"domainLookupStart\\\",\\\"domainLookupEnd\\\",\\\"connectStart\\\",\\\"connectEnd\\\",\\\"requestStart\\\",\\\"responseStart\\\",\\\"responseEnd\\\",\\\"transferSize\\\",\\\"encodedBodySize\\\",\\\"decodedBodySize\\\",\\\"domInteractive\\\",\\\"domContentLoadedEventStart\\\",\\\"domContentLoadedEventEnd\\\",\\\"domComplete\\\",\\\"loadEventStart\\\",\\\"loadEventEnd\\\",\\\"type\\\"],[[\\\"http://127.0.0.1:8000/\\\",\\\"navigation\\\",975.9,\\\"navigation\\\",4.7,4.7,4.7,4.7,4.7,6,143.9,144.6,33609,33309,33309,328.2,328.2,328.2,975.5,975.5,975.9,\\\"navigate\\\"]]],\\\"paint\\\":[[\\\"name\\\",\\\"entryType\\\",\\\"startTime\\\"],[[\\\"first-paint\\\",\\\"paint\\\",289.7],[\\\"first-contentful-paint\\\",\\\"paint\\\",289.7]]],\\\"resource\\\":[[\\\"name\\\",\\\"startTime\\\",\\\"duration\\\",\\\"initiatorType\\\",\\\"fetchStart\\\",\\\"responseEnd\\\"],[[\\\"http://localhost:8234/static/index.css?t=1643010062816\\\",177.1,10.3,\\\"link\\\",177.1,187.4],[\\\"http://localhost:8234/static/index.js?t=1643010062816\\\",201.7,5.1,\\\"other\\\",201.7,206.8],[\\\"http://localhost:8234/static/chunk-XICZDHER.js\\\",208,4.3,\\\"other\\\",208,212.3],[\\\"http://localhost:8234/static/chunk-5MMMF5K7.js\\\",208.1,2.7,\\\"other\\\",208.1,210.8],[\\\"http://localhost:8234/static/chunk-ROHUIGSJ.js\\\",208.3,3.8,\\\"other\\\",208.3,212.1],[\\\"http://localhost:8234/static/chunk-ZO6AYWDD.js\\\",209.2,3.2,\\\"other\\\",209.2,212.4],[\\\"http://localhost:8234/static/chunk-3TJORNMS.js\\\",209.4,3,\\\"other\\\",209.4,212.4],[\\\"http://localhost:8234/static/chunk-MIOXAXF4.js\\\",209.5,2.9,\\\"other\\\",209.5,212.4],[\\\"http://localhost:8234/static/chunk-W3XSBZQT.js\\\",210.3,3.5,\\\"other\\\",210.3,213.8],[\\\"http://localhost:8234/static/chunk-HG47DNA6.js\\\",211.1,7.3,\\\"other\\\",211.1,218.4],[\\\"http://localhost:8234/static/chunk-KT2H2P52.js\\\",211.6,7,\\\"other\\\",211.6,218.6],[\\\"http://localhost:8234/static/chunk-WCD5LITO.js\\\",211.7,7.5,\\\"other\\\",211.7,219.2],[\\\"http://localhost:8234/static/chunk-OZGU6W75.js\\\",211.9,7.3,\\\"other\\\",211.9,219.2],[\\\"http://localhost:8234/static/chunk-GN5GHDD7.js\\\",212.6,8.9,\\\"other\\\",212.6,221.5],[\\\"http://localhost:8234/static/chunk-3HMUCGO3.js\\\",213.3,8.3,\\\"other\\\",213.3,221.6],[\\\"http://localhost:8234/static/chunk-LO4HT7SR.js\\\",213.5,6,\\\"other\\\",213.5,219.5],[\\\"http://localhost:8234/static/chunk-3GPSPDA2.js\\\",213.6,7.7,\\\"other\\\",213.6,221.3],[\\\"http://localhost:8234/static/chunk-3YSVPLYF.js\\\",213.7,7.6,\\\"other\\\",213.7,221.3],[\\\"http://localhost:8234/static/chunk-SS3VKUJU.js\\\",213.8,7.7,\\\"other\\\",213.8,221.5],[\\\"http://localhost:8234/static/chunk-2O667M4D.js\\\",214,7.8,\\\"other\\\",214,221.8],[\\\"http://localhost:8234/static/chunk-2VV7PQO5.js\\\",214.1,7.9,\\\"other\\\",214.1,222],[\\\"http://localhost:8234/static/chunk-SKUSLQI7.js\\\",214.3,7.8,\\\"other\\\",214.3,222.1],[\\\"http://localhost:8234/static/chunk-EOM6WIAG.js\\\",214.4,7.9,\\\"other\\\",214.4,222.3],[\\\"http://localhost:8234/static/chunk-GUJPPS5R.js\\\",214.4,7.9,\\\"other\\\",214.4,222.3],[\\\"http://localhost:8234/static/chunk-BCILFNT3.js\\\",216.6,5.7,\\\"other\\\",216.6,222.3],[\\\"http://localhost:8234/static/chunk-SPXZCQAI.js\\\",216.7,8,\\\"other\\\",216.7,224.7],[\\\"http://localhost:8234/static/chunk-XPGE43VJ.js\\\",217.4,5.8,\\\"other\\\",217.4,223.2],[\\\"http://localhost:8234/static/chunk-L4IYGZIG.js\\\",217.5,5.4,\\\"other\\\",217.5,222.9],[\\\"http://localhost:8234/static/chunk-IGTMCF24.js\\\",218.2,5.7,\\\"other\\\",218.2,223.9],[\\\"http://localhost:8234/static/chunk-AMOE3OJU.js\\\",220.6,3.6,\\\"other\\\",220.6,224.2],[\\\"http://localhost:8234/static/chunk-BO4VDBQ6.js\\\",223.4,4.6,\\\"other\\\",223.4,228],[\\\"http://localhost:8234/static/chunk-QE52CDVG.js\\\",223.7,4.4,\\\"other\\\",223.7,228.1],[\\\"http://localhost:8234/static/chunk-VHSG55N2.js\\\",223.9,4.2,\\\"other\\\",223.9,228.1],[\\\"http://localhost:8234/static/chunk-4ZUV5LND.js\\\",224.7,3.5,\\\"other\\\",224.7,228.2],[\\\"http://localhost:8234/static/chunk-ASGLZXIV.js\\\",224.8,3.4,\\\"other\\\",224.8,228.2],[\\\"http://localhost:8234/static/chunk-HGNVPWDY.js\\\",225.8,5.1,\\\"other\\\",225.8,230.9],[\\\"http://localhost:8234/static/chunk-LD3TGMGW.js\\\",225.8,8,\\\"other\\\",225.8,233.8],[\\\"http://localhost:8234/static/chunk-PRPBRI2E.js\\\",226.1,7.7,\\\"other\\\",226.1,233.8],[\\\"http://localhost:8234/static/chunk-CA6FFFUC.js\\\",226.2,8.1,\\\"other\\\",226.2,234.3],[\\\"http://localhost:8234/static/chunk-YBU6RJ5N.js\\\",226.4,7.9,\\\"other\\\",226.4,234.3],[\\\"http://localhost:8234/static/chunk-HB4RLT5O.js\\\",226.5,7.9,\\\"other\\\",226.5,234.4],[\\\"http://localhost:8234/static/chunk-UJJIEZBP.js\\\",226.6,9.4,\\\"other\\\",226.6,236],[\\\"http://localhost:8234/static/chunk-KXP7VI6L.js\\\",226.7,10.9,\\\"other\\\",226.7,237.6],[\\\"http://localhost:8234/static/chunk-OHMX2FMJ.js\\\",226.9,10.8,\\\"other\\\",226.9,237.7],[\\\"http://localhost:8234/static/chunk-ATKSJCQX.js\\\",227,10.9,\\\"other\\\",227,237.9],[\\\"http://localhost:8234/static/chunk-ZUFDLBNZ.js\\\",227.1,10.9,\\\"other\\\",227.1,238],[\\\"http://localhost:8234/static/chunk-HOR2D746.js\\\",228.2,13.7,\\\"other\\\",228.2,241.9],[\\\"http://localhost:8234/static/chunk-M6NPX6BS.js\\\",228.7,111.5,\\\"other\\\",228.7,340.2],[\\\"http://localhost:8234/static/chunk-VJGIAYQC.js\\\",229.1,9.5,\\\"other\\\",229.1,238.6],[\\\"http://localhost:8234/static/toolbar.js?_ts=1643010210987\\\",486.1,322.2,\\\"script\\\",486.1,808.3],[\\\"http://127.0.0.1:8000/e/?ip=1&_=1643010210995\\\",496.2,54,\\\"xmlhttprequest\\\",496.2,550.2],[\\\"http://127.0.0.1:8000/decide/?v=2&ip=1&_=1643010210998\\\",498.6,92,\\\"xmlhttprequest\\\",498.6,590.6],[\\\"http://127.0.0.1:8000/engage/?ip=1&_=1643010211018\\\",518.8,45.6,\\\"xmlhttprequest\\\",518.8,564.4],[\\\"http://localhost:8234/static/SavedInsights-TLZR4WTT.js\\\",528.9,5,\\\"other\\\",528.9,533.9],[\\\"http://127.0.0.1:8000/api/projects/1/actions/\\\",539.4,89.8,\\\"fetch\\\",539.4,629.2],[\\\"http://127.0.0.1:8000/api/projects/1/annotations/?scope=organization&deleted=false\\\",545.6,72.3,\\\"fetch\\\",545.6,617.9],[\\\"http://127.0.0.1:8000/api/projects/1/cohorts?limit=600\\\",546.5,71.4,\\\"fetch\\\",546.5,617.9],[\\\"http://127.0.0.1:8000/api/projects/1/event_definitions/?limit=5000\\\",547.6,107.5,\\\"fetch\\\",547.6,655.1],[\\\"http://127.0.0.1:8000/api/person/properties/\\\",548.1,113.5,\\\"fetch\\\",548.1,661.6],[\\\"http://127.0.0.1:8000/api/projects/@current/property_definitions/?limit=5000\\\",549.3,124.5,\\\"fetch\\\",549.3,673.8],[\\\"http://127.0.0.1:8000/api/instance_status/\\\",554.9,259.7,\\\"fetch\\\",554.9,814.6],[\\\"https://update.posthog.com/\\\",556.7,45.2,\\\"fetch\\\",556.7,601.9],[\\\"http://127.0.0.1:8000/api/organizations/@current/invites/\\\",558.5,107.4,\\\"fetch\\\",558.5,665.9],[\\\"http://127.0.0.1:8000/api/personal_api_keys/\\\",578.8,83.4,\\\"fetch\\\",578.8,662.2],[\\\"http://127.0.0.1:8000/api/license/\\\",586.5,90.1,\\\"fetch\\\",586.5,676.6],[\\\"https://www.gravatar.com/avatar/2e7d95b60efbe947f71009a1af1ba8d0?s=96&d=404\\\",625.1,1.9,\\\"img\\\",625.1,627],[\\\"http://127.0.0.1:8000/api/projects/1/dashboards/\\\",791.4,89.2,\\\"fetch\\\",791.4,880.6],[\\\"http://localhost:8234/static/chunk-LUMXGCOP.js\\\",836.2,3.8,\\\"other\\\",836.2,840],[\\\"http://localhost:8234/static/chunk-KJPTCBBC.js\\\",836.5,4.1,\\\"other\\\",836.5,840.6],[\\\"http://localhost:8234/static/chunk-X7HB5SUU.js\\\",836.6,10.6,\\\"other\\\",836.6,847.2],[\\\"http://localhost:8234/static/chunk-Z2MYP2M2.js\\\",836.7,14.4,\\\"other\\\",836.7,851.1],[\\\"http://localhost:8234/static/chunk-Z6ENRSEA.js\\\",836.8,20.6,\\\"other\\\",836.8,857.4],[\\\"http://localhost:8234/static/chunk-FJKTD6MY.js\\\",837.2,7,\\\"other\\\",837.2,844.2],[\\\"http://localhost:8234/static/chunk-XUGMYJGP.js\\\",837.6,10,\\\"other\\\",837.6,847.6],[\\\"http://localhost:8234/static/chunk-MVOT6GTL.js\\\",837.8,13.6,\\\"other\\\",837.8,851.4],[\\\"http://localhost:8234/static/chunk-IMI5TOQA.js\\\",838.1,10,\\\"other\\\",838.1,848.1],[\\\"http://localhost:8234/static/chunk-UHSVE7PG.js\\\",838.1,14.5,\\\"other\\\",838.1,852.6],[\\\"http://localhost:8234/static/chunk-HDKRWHJ6.js\\\",838.2,11.7,\\\"other\\\",838.2,849.9],[\\\"http://localhost:8234/static/chunk-BDCDUKQO.js\\\",838.3,11.8,\\\"other\\\",838.3,850.1],[\\\"http://localhost:8234/static/chunk-OIXFZ5LK.js\\\",838.5,13.1,\\\"other\\\",838.5,851.6],[\\\"http://localhost:8234/static/chunk-EB5W63F3.js\\\",838.5,13.3,\\\"other\\\",838.5,851.8],[\\\"http://localhost:8234/static/chunk-DFRCCFPU.js\\\",838.6,13.2,\\\"other\\\",838.6,851.8],[\\\"http://localhost:8234/static/chunk-A4QCHFI6.js\\\",838.7,13.1,\\\"other\\\",838.7,851.8],[\\\"http://localhost:8234/static/chunk-3BPMDJ3N.js\\\",838.9,12.9,\\\"other\\\",838.9,851.8],[\\\"http://localhost:8234/static/chunk-NHUSGGUD.js\\\",838.9,14.1,\\\"other\\\",838.9,853],[\\\"http://localhost:8234/static/chunk-SLQJA2PL.js\\\",838.9,15.2,\\\"other\\\",838.9,854.1],[\\\"http://localhost:8234/static/chunk-I5O3JHP6.js\\\",839.7,14.5,\\\"other\\\",839.7,854.2],[\\\"http://localhost:8234/static/chunk-F4AIONA2.js\\\",839.9,14.4,\\\"other\\\",839.9,854.3],[\\\"http://localhost:8234/static/chunk-63HTFI3S.js\\\",840,14.5,\\\"other\\\",840,854.5],[\\\"http://localhost:8234/static/chunk-ZCRZKRW7.js\\\",842.4,12.6,\\\"other\\\",842.4,855],[\\\"http://localhost:8234/static/chunk-C2C4IEM7.js\\\",842.7,12.7,\\\"other\\\",842.7,855.4],[\\\"http://localhost:8234/static/chunk-NGQGL7D3.js\\\",845.9,10,\\\"other\\\",845.9,855.9],[\\\"http://localhost:8234/static/chunk-PTR2RUUP.js\\\",846.2,9.7,\\\"other\\\",846.2,855.9],[\\\"http://localhost:8234/static/chunk-R3PDDW67.js\\\",846.8,9.1,\\\"other\\\",846.8,855.9],[\\\"http://localhost:8234/static/chunk-Q2Y3HUWS.js\\\",847.1,8.8,\\\"other\\\",847.1,855.9],[\\\"http://localhost:8234/static/chunk-Y7BHXLNZ.js\\\",847.2,9.2,\\\"other\\\",847.2,856.4],[\\\"http://localhost:8234/static/chunk-IVAJFO7S.js\\\",847.4,9.5,\\\"other\\\",847.4,856.9],[\\\"https://app.posthog.com/e/?ip=1&_=1643010211443&v=0.0.3\\\",942.9,133,\\\"fetch\\\",942.9,1075.9],[\\\"https://app.posthog.com/e/?ip=1&_=1643010211445&v=0.0.3\\\",944.1,140.3,\\\"fetch\\\",944.1,1084.4],[\\\"http://127.0.0.1:8000/api/projects/@current/feature_flags/my_flags?groups=%7B%22project%22%3A%22017e6d93-95c4-0000-3336-11f4c03eb344%22%2C%22organization%22%3A%22017e6d93-8fa6-0000-deb6-1c78260418c9%22%2C%22instance%22%3A%22http%3A%2F%2Flocalhost%3A8000%22%7D&temporary_token=0XkmhCQW51KcZfVzCPPlYmepazWsYXSTczmBHyJE2-g\\\",944.8,126.9,\\\"fetch\\\",944.8,1071.7],[\\\"http://localhost:8234/static/toolbar.css\\\",978.5,4.2,\\\"link\\\",978.5,982.7],[\\\"http://127.0.0.1:8000/api/projects/1/insights/?order=-updated_at&limit=20&offset=0&saved=true\\\",1021.7,183.3,\\\"fetch\\\",1021.7,1205],[\\\"http://127.0.0.1:8000/static/site.webmanifest?v=2021-04-29\\\",1046.1,10.4,\\\"other\\\",1046.1,1056.5],[\\\"http://127.0.0.1:8000/api/organizations/@current/members/?limit=200\\\",1122.8,68.5,\\\"fetch\\\",1122.8,1191.3],[\\\"http://127.0.0.1:8000/e/?compression=gzip-js&ip=1&_=1643010214487\\\",3989.9,14.7,\\\"xmlhttprequest\\\",3989.9,4004.6],[\\\"http://127.0.0.1:8000/e/?compression=gzip-js&ip=1&_=1643010217493\\\",6993.6,27.6,\\\"xmlhttprequest\\\",6993.6,7021.2],[\\\"http://localhost:8234/static/chunk-EYLKE6KE.js\\\",8043.3,54.4,\\\"other\\\",8043.3,8097.7],[\\\"http://localhost:8234/static/chunk-URHQA52P.js\\\",8043.7,55,\\\"other\\\",8043.7,8098.7],[\\\"http://localhost:8234/static/chunk-3B7RVXAB.js\\\",8043.9,56.2,\\\"other\\\",8043.9,8100.1],[\\\"http://localhost:8234/static/chunk-FS5CTTMA.js\\\",8044.4,54.3,\\\"other\\\",8044.4,8098.7],[\\\"http://localhost:8234/static/chunk-D43ZYSLF.js\\\",8044.7,54.2,\\\"other\\\",8044.7,8098.9],[\\\"http://localhost:8234/static/chunk-DUQI5YEH.js\\\",8044.9,56.5,\\\"other\\\",8044.9,8101.4],[\\\"http://localhost:8234/static/chunk-CJ7JBN4P.js\\\",8045.3,56.7,\\\"other\\\",8045.3,8102],[\\\"http://localhost:8234/static/chunk-JRLWBJNF.js\\\",8045.6,55.9,\\\"other\\\",8045.6,8101.5],[\\\"http://localhost:8234/static/chunk-OSOS22ZK.js\\\",8045.9,58.2,\\\"other\\\",8045.9,8104.1],[\\\"http://localhost:8234/static/chunk-KQBLA4V6.js\\\",8046.1,55.4,\\\"other\\\",8046.1,8101.5],[\\\"http://localhost:8234/static/chunk-W7PNUTIQ.js\\\",8046.3,55.5,\\\"other\\\",8046.3,8101.8],[\\\"http://localhost:8234/static/Events-LZ45RGCO.js\\\",8047.1,54.5,\\\"other\\\",8047.1,8101.6],[\\\"http://127.0.0.1:8000/api/projects/1/events/?properties=%5B%5D&orderBy=%5B%22-timestamp%22%5D&after=2021-01-24T07%3A43%3A38.625Z\\\",8124.2,513.5,\\\"fetch\\\",8124.2,8637.7],[\\\"http://127.0.0.1:8000/api/projects/1/events/?properties=%5B%5D&orderBy=%5B%22-timestamp%22%5D&after=2021-01-24T07%3A43%3A38.646Z\\\",8145.6,523.3,\\\"fetch\\\",8145.6,8668.9],[\\\"http://localhost:8234/static/assets/posthog-icon-FDVNZJ5Z.svg\\\",8855.4,1.9,\\\"css\\\",8855.4,8857.3],[\\\"http://127.0.0.1:8000/e/?compression=gzip-js&ip=1&_=1643010220499\\\",9999.8,40.2,\\\"xmlhttprequest\\\",9999.8,10040],[\\\"http://localhost:8234/static/chunk-EWTWTRB2.js\\\",10113.7,6.3,\\\"other\\\",10113.7,10120],[\\\"http://localhost:8234/static/ActionsTable-HEA24TMU.js\\\",10114.3,5.9,\\\"other\\\",10114.3,10120.2],[\\\"http://127.0.0.1:8000/static/assets/actions-tutorial-grouping-JZSPRS7B.svg\\\",10305.7,15.9,\\\"img\\\",10305.7,10321.6],[\\\"http://127.0.0.1:8000/static/assets/actions-tutorial-standardized-G647GOB5.svg\\\",10306,25.8,\\\"img\\\",10306,10331.8],[\\\"http://127.0.0.1:8000/static/assets/actions-tutorial-retroactive-S22RZKEF.svg\\\",10306.1,27.4,\\\"img\\\",10306.1,10333.5],[\\\"http://127.0.0.1:8000/e/?compression=gzip-js&ip=1&_=1643010223503\\\",13003.7,22,\\\"xmlhttprequest\\\",13003.7,13025.7],[\\\"http://localhost:8234/static/Action-V5A27KJB.js\\\",13222.6,17.2,\\\"other\\\",13222.6,13239.8],[\\\"http://127.0.0.1:8000/api/projects/1/actions/15/\\\",13246.3,38.8,\\\"fetch\\\",13246.3,13285.1]]]}\",\n-                    \"$geoip_city_name\": \"Sydney\",\n-                    \"$geoip_country_name\": \"Australia\",\n-                    \"$geoip_country_code\": \"AU\",\n-                    \"$geoip_continent_name\": \"Oceania\",\n-                    \"$geoip_continent_code\": \"OC\",\n-                    \"$geoip_postal_code\": \"2000\",\n-                    \"$geoip_latitude\": -33.8601,\n-                    \"$geoip_longitude\": 151.2101,\n-                    \"$geoip_time_zone\": \"Australia/Sydney\",\n-                    \"$geoip_subdivision_1_code\": \"NSW\",\n-                    \"$geoip_subdivision_1_name\": \"New South Wales\",\n-                    \"$plugins_succeeded\": [\"GeoIP (1)\"],\n-                    \"$plugins_failed\": [],\n-                    \"$plugins_deferred\": [],\n-                    \"$ip\": \"127.0.0.1\",\n-                    \"$set_once\": {\n-                        \"$initial_os\": \"Mac OS X\",\n-                        \"$initial_browser\": \"Chrome\",\n-                        \"$initial_device_type\": \"Desktop\",\n-                        \"$initial_current_url\": \"http://127.0.0.1:8000/action/15?properties=%5B%5D\",\n-                        \"$initial_browser_version\": 97,\n-                        \"$initial_referrer\": \"http://127.0.0.1:8000/action/15?properties=%5B%5D\",\n-                        \"$initial_referring_domain\": \"127.0.0.1:8000\"\n-                    },\n-                    \"$group_0\": \"017e6d93-95c4-0000-3336-11f4c03eb344\",\n-                    \"$group_1\": \"017e6d93-8fa6-0000-deb6-1c78260418c9\",\n-                    \"$group_2\": \"http://localhost:8000\"\n-                },\n-                \"event\": \"$pageview\",\n-                \"timestamp\": \"2022-01-24T07:43:44.012000+00:00\",\n-                \"person\": {\n-                    \"is_identified\": true,\n-                    \"distinct_ids\": [\"UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj\"],\n-                    \"properties\": {\n-                        \"email\": \"paul@posthog.com\"\n-                    }\n-                },\n-                \"elements\": [],\n-                \"elements_chain\": \"\"\n-            }\n-        }\n-    },\n-    \"lib\": {\n-        \"logic\": {\n-            \"featureFlagLogic\": {\n-                \"featureFlags\": {\n-                    \"6619-query-events-by-date\": true,\n-                    \"hackathon-apm\": true,\n-                    \"something\": true\n-                },\n-                \"receivedFeatureFlags\": true\n-            }\n-        },\n-        \"components\": {\n-            \"PersonalAPIKeys\": {\n-                \"personalAPIKeysLogic\": {\n-                    \"keys\": [],\n-                    \"keysLoading\": false\n-                }\n-            },\n-            \"CommandPalette\": {\n-                \"commandPaletteLogic\": {\n-                    \"isPaletteShown\": false,\n-                    \"keyboardResultIndex\": 0,\n-                    \"hoverResultIndex\": null,\n-                    \"input\": \"\",\n-                    \"activeFlow\": null,\n-                    \"rawCommandRegistrations\": {\n-                        \"go-to\": {\n-                            \"key\": \"go-to\",\n-                            \"scope\": \"global\",\n-                            \"prefixes\": [\"open\", \"visit\"],\n-                            \"resolver\": [\n-                                {\n-                                    \"icon\": {},\n-                                    \"display\": \"Go to Dashboards\"\n-                                },\n-                                {\n-                                    \"icon\": {},\n-                                    \"display\": \"Go to Insights\"\n-                                },\n-                                {\n-                                    \"icon\": {},\n-                                    \"display\": \"Go to Trends\"\n-                                },\n-                                {\n-                                    \"icon\": {},\n-                                    \"display\": \"Go to Funnels\"\n-                                },\n-                                {\n-                                    \"icon\": {},\n-                                    \"display\": \"Go to Retention\"\n-                                },\n-                                {\n-                                    \"icon\": {},\n-                                    \"display\": \"Go to Paths\"\n-                                },\n-                                {\n-                                    \"icon\": {},\n-                                    \"display\": \"Go to Events\"\n-                                },\n-                                {\n-                                    \"icon\": {},\n-                                    \"display\": \"Go to Actions\"\n-                                },\n-                                {\n-                                    \"icon\": {},\n-                                    \"display\": \"Go to Persons\",\n-                                    \"synonyms\": [\"people\"]\n-                                },\n-                                {\n-                                    \"icon\": {},\n-                                    \"display\": \"Go to Cohorts\"\n-                                },\n-                                {\n-                                    \"icon\": {},\n-                                    \"display\": \"Go to Feature Flags\",\n-                                    \"synonyms\": [\"feature flags\", \"a/b tests\"]\n-                                },\n-                                {\n-                                    \"icon\": {},\n-                                    \"display\": \"Go to Annotations\"\n-                                },\n-                                {\n-                                    \"icon\": {},\n-                                    \"display\": \"Go to Team members\",\n-                                    \"synonyms\": [\"organization\", \"members\", \"invites\", \"teammates\"]\n-                                },\n-                                {\n-                                    \"icon\": {},\n-                                    \"display\": \"Go to Project settings\"\n-                                },\n-                                {\n-                                    \"icon\": {},\n-                                    \"display\": \"Go to My settings\",\n-                                    \"synonyms\": [\"account\"]\n-                                },\n-                                {\n-                                    \"icon\": {},\n-                                    \"display\": \"Go to Plugins\",\n-                                    \"synonyms\": [\"integrations\"]\n-                                },\n-                                {\n-                                    \"icon\": {},\n-                                    \"display\": \"Go to System status page\",\n-                                    \"synonyms\": [\n-                                        \"redis\",\n-                                        \"celery\",\n-                                        \"django\",\n-                                        \"postgres\",\n-                                        \"backend\",\n-                                        \"service\",\n-                                        \"online\"\n-                                    ]\n-                                },\n-                                {\n-                                    \"icon\": {},\n-                                    \"display\": \"Create action\"\n-                                },\n-                                {\n-                                    \"icon\": {},\n-                                    \"display\": \"Log out\"\n-                                }\n-                            ]\n-                        },\n-                        \"open-urls\": {\n-                            \"key\": \"open-urls\",\n-                            \"scope\": \"global\",\n-                            \"prefixes\": [\"open\", \"visit\"]\n-                        },\n-                        \"debug-clickhouse-queries\": {\n-                            \"key\": \"debug-clickhouse-queries\",\n-                            \"scope\": \"global\",\n-                            \"resolver\": {\n-                                \"icon\": {},\n-                                \"display\": \"Debug queries (ClickHouse)\"\n-                            }\n-                        },\n-                        \"calculator\": {\n-                            \"key\": \"calculator\",\n-                            \"scope\": \"global\"\n-                        },\n-                        \"create-personal-api-key\": {\n-                            \"key\": \"create-personal-api-key\",\n-                            \"scope\": \"global\",\n-                            \"resolver\": {\n-                                \"icon\": {},\n-                                \"display\": \"Create Personal API Key\"\n-                            }\n-                        },\n-                        \"create-dashboard\": {\n-                            \"key\": \"create-dashboard\",\n-                            \"scope\": \"global\",\n-                            \"resolver\": {\n-                                \"icon\": {},\n-                                \"display\": \"Create Dashboard\"\n-                            }\n-                        },\n-                        \"share-feedback\": {\n-                            \"key\": \"share-feedback\",\n-                            \"scope\": \"global\",\n-                            \"resolver\": {\n-                                \"icon\": {},\n-                                \"display\": \"Share Feedback\",\n-                                \"synonyms\": [\"send opinion\", \"ask question\", \"message posthog\", \"github issue\"]\n-                            }\n-                        }\n-                    }\n-                }\n-            },\n-            \"HelpButton\": {\n-                \"HelpButton\": {\n-                    \"isHelpVisible\": false\n-                }\n-            }\n-        }\n-    },\n-    \"models\": {\n-        \"actionsModel\": {\n-            \"actions\": [\n-                {\n-                    \"id\": 15,\n-                    \"name\": \"\",\n-                    \"post_to_slack\": false,\n-                    \"slack_message_format\": \"\",\n-                    \"steps\": [\n-                        {\n-                            \"id\": \"15\",\n-                            \"event\": \"$pageview\",\n-                            \"tag_name\": null,\n-                            \"text\": null,\n-                            \"href\": null,\n-                            \"selector\": null,\n-                            \"url\": \"%event%\",\n-                            \"name\": null,\n-                            \"url_matching\": \"contains\",\n-                            \"properties\": []\n-                        }\n-                    ],\n-                    \"created_at\": \"2022-01-24T07:41:25.420217Z\",\n-                    \"deleted\": false,\n-                    \"is_calculating\": false,\n-                    \"last_calculated_at\": \"2022-01-24T07:41:25.420032Z\",\n-                    \"created_by\": {\n-                        \"id\": 1,\n-                        \"uuid\": \"017e6d93-9590-0000-9341-f3a62724c4ea\",\n-                        \"distinct_id\": \"UL6nLZXTNriPDGp99rlSDKjdReBte5Eu9mh81jJWCrj\",\n-                        \"first_name\": \"Paul\",\n-                        \"email\": \"paul@posthog.com\"\n-                    },\n-                    \"team_id\": 1\n-                }\n-            ],\n-            \"actionsLoading\": false\n-        },\n-        \"annotationsModel\": {\n-            \"globalAnnotations\": [],\n-            \"globalAnnotationsLoading\": false\n-        },\n-        \"cohortsModel\": {\n-            \"cohorts\": [],\n-            \"cohortsLoading\": false,\n-            \"pollTimeout\": null\n-        },\n-        \"dashboardsModel\": {\n-            \"rawDashboards\": {\n-                \"1\": {\n-                    \"id\": 1,\n-                    \"name\": \"My App Dashboard\",\n-                    \"description\": \"\",\n-                    \"pinned\": true,\n-                    \"items\": null,\n-                    \"created_at\": \"2022-01-18T14:24:55.764063Z\",\n-                    \"created_by\": null,\n-                    \"is_shared\": false,\n-                    \"share_token\": null,\n-                    \"deleted\": false,\n-                    \"creation_mode\": \"default\",\n-                    \"filters\": {},\n-                    \"tags\": []\n-                }\n-            },\n-            \"rawDashboardsLoading\": false,\n-            \"sharedDashboard\": null,\n-            \"sharedDashboardLoading\": false,\n-            \"dashboard\": null,\n-            \"dashboardLoading\": false,\n-            \"redirect\": true,\n-            \"lastDashboardId\": 1,\n-            \"diveSourceId\": null\n-        },\n-        \"eventDefinitionsModel\": {\n-            \"eventStorage\": {\n-                \"count\": 24,\n-                \"results\": [\n-                    {\n-                        \"id\": \"017e6d93-a740-0000-d5a1-108ee59f8232\",\n-                        \"name\": \"$autocapture\",\n-                        \"volume_30_day\": null,\n-                        \"query_usage_30_day\": null,\n-                        \"created_at\": \"2022-01-18T14:25:00.225490Z\",\n-                        \"last_seen_at\": \"2022-01-24T07:35:39.761000Z\"\n-                    },\n-                    {\n-                        \"id\": \"017e718b-e161-0000-c880-e72cf49ee2c7\",\n-                        \"name\": \"$capture_failed_request\",\n-                        \"volume_30_day\": null,\n-                        \"query_usage_30_day\": null,\n-                        \"created_at\": \"2022-01-19T08:54:59.684089Z\",\n-                        \"last_seen_at\": \"2022-01-21T15:11:18.403000Z\"\n-                    },\n-                    {\n-                        \"id\": \"017e6d93-bb88-0000-0486-ef76ec1f5e2c\",\n-                        \"name\": \"$capture_metrics\",\n-                        \"volume_30_day\": null,\n-                        \"query_usage_30_day\": null,\n-                        \"created_at\": \"2022-01-18T14:25:05.417599Z\",\n-                        \"last_seen_at\": \"2022-01-24T07:04:39.556000Z\"\n-                    },\n-                    {\n-                        \"id\": \"017e6d93-a710-0001-41e3-980bdc0206b2\",\n-                        \"name\": \"$feature_flag_called\",\n-                        \"volume_30_day\": null,\n-                        \"query_usage_30_day\": null,\n-                        \"created_at\": \"2022-01-18T14:25:00.221287Z\",\n-                        \"last_seen_at\": \"2022-01-24T07:02:36.617000Z\"\n-                    },\n-                    {\n-                        \"id\": \"017e6d93-a716-0000-dc15-b02ae8313046\",\n-                        \"name\": \"$groupidentify\",\n-                        \"volume_30_day\": null,\n-                        \"query_usage_30_day\": null,\n-                        \"created_at\": \"2022-01-18T14:25:00.192557Z\",\n-                        \"last_seen_at\": \"2022-01-24T07:02:36.566000Z\"\n-                    },\n-                    {\n-                        \"id\": \"017e6d93-9ec4-0000-5ef4-c354072b7e00\",\n-                        \"name\": \"$identify\",\n-                        \"volume_30_day\": null,\n-                        \"query_usage_30_day\": null,\n-                        \"created_at\": \"2022-01-18T14:24:58.055534Z\",\n-                        \"last_seen_at\": \"2022-01-24T07:04:42.699000Z\"\n-                    },\n-                    {\n-                        \"id\": \"017e6d93-bb9b-0000-a06e-3b1a16117380\",\n-                        \"name\": \"$pageleave\",\n-                        \"volume_30_day\": null,\n-                        \"query_usage_30_day\": null,\n-                        \"created_at\": \"2022-01-18T14:25:05.437890Z\",\n-                        \"last_seen_at\": \"2022-01-24T07:02:32.684000Z\"\n-                    },\n-                    {\n-                        \"id\": \"017e6d93-9ec4-0000-309e-c8b7eb4b7608\",\n-                        \"name\": \"$pageview\",\n-                        \"volume_30_day\": null,\n-                        \"query_usage_30_day\": null,\n-                        \"created_at\": \"2022-01-18T14:24:58.055447Z\",\n-                        \"last_seen_at\": \"2022-01-24T07:02:36.618000Z\"\n-                    },\n-                    {\n-                        \"id\": \"017e7cf1-cc66-0000-a003-535859847d10\",\n-                        \"name\": \"$rageclick\",\n-                        \"volume_30_day\": null,\n-                        \"query_usage_30_day\": null,\n-                        \"created_at\": \"2022-01-21T14:02:08.366896Z\",\n-                        \"last_seen_at\": \"2022-01-21T15:49:42.761000Z\"\n-                    },\n-                    {\n-                        \"id\": \"017e7293-3663-0000-4b09-4ca2e08475e1\",\n-                        \"name\": \"client_request_failure\",\n-                        \"volume_30_day\": null,\n-                        \"query_usage_30_day\": null,\n-                        \"created_at\": \"2022-01-19T13:42:37.414252Z\",\n-                        \"last_seen_at\": \"2022-01-24T07:13:48.893000Z\"\n-                    },\n-                    {\n-                        \"id\": \"017e72ae-b216-0000-cb23-5cc4d9402be5\",\n-                        \"name\": \"dashboard date range changed\",\n-                        \"volume_30_day\": null,\n-                        \"query_usage_30_day\": null,\n-                        \"created_at\": \"2022-01-19T14:12:38.557170Z\",\n-                        \"last_seen_at\": \"2022-01-21T09:37:55.917000Z\"\n-                    },\n-                    {\n-                        \"id\": \"017e7bff-f201-0000-69d6-ead43c67d549\",\n-                        \"name\": \"dashboard mode toggled\",\n-                        \"volume_30_day\": null,\n-                        \"query_usage_30_day\": null,\n-                        \"created_at\": \"2022-01-21T09:37:58.278479Z\",\n-                        \"last_seen_at\": \"2022-01-21T09:37:58.273000Z\"\n-                    },\n-                    {\n-                        \"id\": \"017e72ae-b222-0000-02e9-dc2b6fddcf19\",\n-                        \"name\": \"dashboard refreshed\",\n-                        \"volume_30_day\": null,\n-                        \"query_usage_30_day\": null,\n-                        \"created_at\": \"2022-01-19T14:12:38.567834Z\",\n-                        \"last_seen_at\": \"2022-01-21T09:37:55.881000Z\"\n-                    },\n-                    {\n-                        \"id\": \"017e7c2d-d297-0000-f02b-54abdc966335\",\n-                        \"name\": \"funnel result calculated\",\n-                        \"volume_30_day\": null,\n-                        \"query_usage_30_day\": null,\n-                        \"created_at\": \"2022-01-21T10:28:04.890813Z\",\n-                        \"last_seen_at\": \"2022-01-21T10:28:04.887000Z\"\n-                    },\n-                    {\n-                        \"id\": \"017e6d93-a710-0002-5ee8-4280a725291b\",\n-                        \"name\": \"ingestion landing seen\",\n-                        \"volume_30_day\": null,\n-                        \"query_usage_30_day\": null,\n-                        \"created_at\": \"2022-01-18T14:25:00.216444Z\",\n-                        \"last_seen_at\": \"2022-01-18T14:25:00.177000Z\"\n-                    },\n-                    {\n-                        \"id\": \"017e72d2-9ee7-0000-b0dc-12a1a696dfa5\",\n-                        \"name\": \"insight analyzed\",\n-                        \"volume_30_day\": null,\n-                        \"query_usage_30_day\": null,\n-                        \"created_at\": \"2022-01-19T14:51:52.936438Z\",\n-                        \"last_seen_at\": \"2022-01-21T12:52:10.361000Z\"\n-                    },\n-                    {\n-                        \"id\": \"017e72d2-64ad-0000-703f-2b2890d85c4e\",\n-                        \"name\": \"insight created\",\n-                        \"volume_30_day\": null,\n-                        \"query_usage_30_day\": null,\n-                        \"created_at\": \"2022-01-19T14:51:38.030766Z\",\n-                        \"last_seen_at\": \"2022-01-21T13:02:41.244000Z\"\n-                    },\n-                    {\n-                        \"id\": \"017e72d2-64ae-0000-da71-4f46cf539e32\",\n-                        \"name\": \"insight loaded\",\n-                        \"volume_30_day\": null,\n-                        \"query_usage_30_day\": null,\n-                        \"created_at\": \"2022-01-19T14:51:38.032785Z\",\n-                        \"last_seen_at\": \"2022-01-21T12:51:55.228000Z\"\n-                    },\n-                    {\n-                        \"id\": \"017e72d5-e6b5-0000-4ba2-451d8ab16983\",\n-                        \"name\": \"insight timeout message shown\",\n-                        \"volume_30_day\": null,\n-                        \"query_usage_30_day\": null,\n-                        \"created_at\": \"2022-01-19T14:55:27.927451Z\",\n-                        \"last_seen_at\": \"2022-01-19T14:55:27.925000Z\"\n-                    },\n-                    {\n-                        \"id\": \"017e72d2-6493-0000-ef22-0a6bc80150ed\",\n-                        \"name\": \"insight viewed\",\n-                        \"volume_30_day\": null,\n-                        \"query_usage_30_day\": null,\n-                        \"created_at\": \"2022-01-19T14:51:38.005074Z\",\n-                        \"last_seen_at\": \"2022-01-21T12:52:01.414000Z\"\n-                    },\n-                    {\n-                        \"id\": \"017e7c2d-f5b6-0000-a845-82639d9637a4\",\n-                        \"name\": \"pay gate shown\",\n-                        \"volume_30_day\": null,\n-                        \"query_usage_30_day\": null,\n-                        \"created_at\": \"2022-01-21T10:28:13.881509Z\",\n-                        \"last_seen_at\": \"2022-01-21T10:41:59.976000Z\"\n-                    },\n-                    {\n-                        \"id\": \"017e7376-3beb-0000-49d7-068bf1f0d398\",\n-                        \"name\": \"recording list fetched\",\n-                        \"volume_30_day\": null,\n-                        \"query_usage_30_day\": null,\n-                        \"created_at\": \"2022-01-19T17:50:35.500437Z\",\n-                        \"last_seen_at\": \"2022-01-21T10:53:32.414000Z\"\n+        \"performance\": {\n+            \"pageViewEvents\": [\n+                {\n+                    \"id\": \"017ecb28-9e06-0001-a095-03bce962e8d0\",\n+                    \"distinct_id\": \"F3RTp6GByAuqUkpsUUjzKTQlmJzIQTFoX44fKup95BC\",\n+                    \"properties\": {\n+                        \"$os\": \"Mac OS X\",\n+                        \"$browser\": \"Chrome\",\n+                        \"$device_type\": \"Desktop\",\n+                        \"$current_url\": \"http://127.0.0.1:8000/web-performance?properties=%5B%7B%22key%22%3A%22%24performance_page_loaded%22%2C%22value%22%3A%222700%22%2C%22operator%22%3A%22gt%22%2C%22type%22%3A%22event%22%7D%2C%7B%22key%22%3A%22%24browser%22%2C%22value%22%3A%22is_set%22%2C%22operator%22%3A%22is_set%22%2C%22type%22%3A%22event%22%7D%5D\",\n+                        \"$host\": \"127.0.0.1:8000\",\n+                        \"$pathname\": \"/web-performance\",\n+                        \"$browser_version\": 97,\n+                        \"$screen_height\": 982,\n+                        \"$screen_width\": 1512,\n+                        \"$viewport_height\": 833,\n+                        \"$viewport_width\": 949,\n+                        \"$lib\": \"web\",\n+                        \"$lib_version\": \"1.17.8\",\n+                        \"$insert_id\": \"qanhhl0hbdhecrvv\",\n+                        \"$time\": 1644085940.54,\n+                        \"distinct_id\": \"F3RTp6GByAuqUkpsUUjzKTQlmJzIQTFoX44fKup95BC\",\n+                        \"$device_id\": \"17eca8c073990-02b888033df436-133a6253-16a7f0-17eca8c073a11b6\",\n+                        \"$user_id\": \"F3RTp6GByAuqUkpsUUjzKTQlmJzIQTFoX44fKup95BC\",\n+                        \"$initial_referrer\": \"http://127.0.0.1:8000/login\",\n+                        \"$initial_referring_domain\": \"127.0.0.1:8000\",\n+                        \"$referrer\": \"http://127.0.0.1:8000/web-performance?properties=%5B%7B%22key%22%3A%22%24performance_page_loaded%22%2C%22value%22%3A%222700%22%2C%22operator%22%3A%22gt%22%2C%22type%22%3A%22event%22%7D%2C%7B%22key%22%3A%22%24browser%22%2C%22value%22%3A%22is_set%22%2C%22operator%22%3A%22is_set%22%2C%22type%22%3A%22event%22%7D%5D\",\n+                        \"$referring_domain\": \"127.0.0.1:8000\",\n+                        \"is_demo_project\": false,\n+                        \"$groups\": {\n+                            \"project\": \"017eca8c-03d9-0000-45ef-b1d4ecab7048\",\n+                            \"organization\": \"017eca8b-fdce-0000-6923-f64fc0d0edac\",\n+                            \"instance\": \"http://localhost:8000\"\n+                        },\n+                        \"posthog_version\": \"1.32.0\",\n+                        \"realm\": \"hosted-clickhouse\",\n+                        \"email_service_available\": false,\n+                        \"$session_recording_enabled\": false,\n+                        \"$active_feature_flags\": [\"hackathon-apm\", \"6619-query-events-by-date\"],\n+                        \"$feature/hackathon-apm\": true,\n+                        \"$feature/6619-query-events-by-date\": true,\n+                        \"token\": \"phc_k6AJ5lImHZHzO7uBX5PBWPL0EmSrHEATJfaXOWREOAJ\",\n+                        \"$session_id\": \"17ecb1b70dcd31-0d4473129efd62-133a6253-16a7f0-17ecb1b70ddb94\",\n+                        \"$window_id\": \"17ecb1b70de1df-04e23a807879ce-133a6253-16a7f0-17ecb1b70dfdf3\",\n+                        \"$performance_page_loaded\": 2802.5,\n+                        \"$performance_raw\": \"{\\\"navigation\\\":[[\\\"name\\\",\\\"entryType\\\",\\\"duration\\\",\\\"initiatorType\\\",\\\"fetchStart\\\",\\\"domainLookupStart\\\",\\\"domainLookupEnd\\\",\\\"connectStart\\\",\\\"connectEnd\\\",\\\"requestStart\\\",\\\"responseStart\\\",\\\"responseEnd\\\",\\\"transferSize\\\",\\\"encodedBodySize\\\",\\\"decodedBodySize\\\",\\\"unloadEventStart\\\",\\\"unloadEventEnd\\\",\\\"domInteractive\\\",\\\"domContentLoadedEventStart\\\",\\\"domContentLoadedEventEnd\\\",\\\"domComplete\\\",\\\"loadEventStart\\\",\\\"loadEventEnd\\\",\\\"type\\\"],[[\\\"http://127.0.0.1:8000/web-performance?properties=%5B%7B%22key%22%3A%22%24performance_page_loaded%22%2C%22value%22%3A%222700%22%2C%22operator%22%3A%22gt%22%2C%22type%22%3A%22event%22%7D%2C%7B%22key%22%3A%22%24browser%22%2C%22value%22%3A%22is_set%22%2C%22operator%22%3A%22is_set%22%2C%22type%22%3A%22event%22%7D%5D\\\",\\\"navigation\\\",2802.5,\\\"navigation\\\",3.2,3.2,3.2,3.2,3.2,24.9,500.4,504.2,34955,34655,34655,517.1,533.7,775,775,826.2,2798.3,2802.4,2802.5,\\\"reload\\\"]]],\\\"paint\\\":[],\\\"resource\\\":[[\\\"name\\\",\\\"startTime\\\",\\\"duration\\\",\\\"initiatorType\\\",\\\"fetchStart\\\",\\\"responseEnd\\\"],[[\\\"http://localhost:8234/static/index.css?t=1644085891439\\\",739.8,1715.1,\\\"link\\\",739.8,2454.9],[\\\"http://localhost:8234/static/index.js?t=1644085891439\\\",740,1701.3,\\\"other\\\",740,2441.3],[\\\"http://localhost:8234/static/chunk-YPFMJDM4.js\\\",740.7,1700.4,\\\"other\\\",740.7,2441.1],[\\\"http://localhost:8234/static/chunk-XF34ZH23.js\\\",740.8,1718.3,\\\"other\\\",740.8,2459.1],[\\\"http://localhost:8234/static/chunk-5MMMF5K7.js\\\",741,1709.7,\\\"other\\\",741,2450.7],[\\\"http://localhost:8234/static/chunk-INAGIC7G.js\\\",741.1,1745.8,\\\"other\\\",741.1,2486.9],[\\\"http://localhost:8234/static/chunk-I3Q2CDVZ.js\\\",741.1,1749.4,\\\"other\\\",741.1,2490.5],[\\\"http://localhost:8234/static/chunk-R2J2AFYA.js\\\",741.2,1748.7,\\\"other\\\",741.2,2489.9],[\\\"http://localhost:8234/static/chunk-JABUHWMZ.js\\\",741.4,1767.1,\\\"other\\\",741.4,2508.5],[\\\"http://localhost:8234/static/chunk-LRA7UZ2C.js\\\",741.4,1766.4,\\\"other\\\",741.4,2507.8],[\\\"http://localhost:8234/static/chunk-MILJQ7RK.js\\\",741.5,1767.1,\\\"other\\\",741.5,2508.6],[\\\"http://localhost:8234/static/chunk-A3WPL726.js\\\",741.7,1783.5,\\\"other\\\",741.7,2525.2],[\\\"http://localhost:8234/static/chunk-OZGU6W75.js\\\",741.7,1783.6,\\\"other\\\",741.7,2525.3],[\\\"http://localhost:8234/static/chunk-5WYOWOVT.js\\\",741.8,1785.1,\\\"other\\\",741.8,2526.9],[\\\"http://localhost:8234/static/chunk-BP26XGN6.js\\\",741.8,1810.4,\\\"other\\\",741.8,2552.2],[\\\"http://localhost:8234/static/chunk-6SFOWN5U.js\\\",753.9,1794,\\\"other\\\",753.9,2547.9],[\\\"http://localhost:8234/static/chunk-25TTUT3N.js\\\",754.2,1794.3,\\\"other\\\",754.2,2548.5],[\\\"http://localhost:8234/static/chunk-UDRKU2XS.js\\\",754.2,1810.9,\\\"other\\\",754.2,2565.1],[\\\"http://localhost:8234/static/chunk-KCJGXE5M.js\\\",754.4,1809.9,\\\"other\\\",754.4,2564.3],[\\\"http://localhost:8234/static/chunk-HED4XUT2.js\\\",754.6,1813.2,\\\"other\\\",754.6,2567.8],[\\\"http://localhost:8234/static/chunk-QGGM6NUR.js\\\",754.7,1828.2,\\\"other\\\",754.7,2582.9],[\\\"http://localhost:8234/static/chunk-4YYGW3TC.js\\\",754.7,1828.3,\\\"other\\\",754.7,2583],[\\\"http://localhost:8234/static/chunk-MQF2FLOV.js\\\",754.9,1834.4,\\\"other\\\",754.9,2589.3],[\\\"http://localhost:8234/static/chunk-EOM6WIAG.js\\\",755,1838.1,\\\"other\\\",755,2593.1],[\\\"http://localhost:8234/static/chunk-AXH4YZAR.js\\\",755.1,1838.4,\\\"other\\\",755.1,2593.5],[\\\"http://localhost:8234/static/chunk-FQHAJZGM.js\\\",755.1,1844.4,\\\"other\\\",755.1,2599.5],[\\\"http://localhost:8234/static/chunk-XPGE43VJ.js\\\",755.3,1849,\\\"other\\\",755.3,2604.3],[\\\"http://localhost:8234/static/chunk-RQJ43M5U.js\\\",755.3,1851.6,\\\"other\\\",755.3,2606.9],[\\\"http://localhost:8234/static/chunk-L4IYGZIG.js\\\",755.5,1853.2,\\\"other\\\",755.5,2608.7],[\\\"http://localhost:8234/static/chunk-IGTMCF24.js\\\",755.5,1861.6,\\\"other\\\",755.5,2617.1],[\\\"http://localhost:8234/static/chunk-AMOE3OJU.js\\\",755.6,1862.6,\\\"other\\\",755.6,2618.2],[\\\"http://localhost:8234/static/chunk-BO4VDBQ6.js\\\",755.8,1877.5,\\\"other\\\",755.8,2633.3],[\\\"http://localhost:8234/static/chunk-QE52CDVG.js\\\",755.8,1879.8,\\\"other\\\",755.8,2635.6],[\\\"http://localhost:8234/static/chunk-VHSG55N2.js\\\",755.9,1878.4,\\\"other\\\",755.9,2634.3],[\\\"http://localhost:8234/static/chunk-4ZUV5LND.js\\\",756,1901.5,\\\"other\\\",756,2657.5],[\\\"http://localhost:8234/static/chunk-ASGLZXIV.js\\\",756,1901.8,\\\"other\\\",756,2657.8],[\\\"http://localhost:8234/static/chunk-HGNVPWDY.js\\\",756.1,1901.3,\\\"other\\\",756.1,2657.4],[\\\"http://localhost:8234/static/chunk-PRPBRI2E.js\\\",756.3,1908.6,\\\"other\\\",756.3,2664.9],[\\\"http://localhost:8234/static/chunk-LD3TGMGW.js\\\",756.3,1908.8,\\\"other\\\",756.3,2665.1],[\\\"http://localhost:8234/static/chunk-CA6FFFUC.js\\\",756.4,1908.6,\\\"other\\\",756.4,2665],[\\\"http://localhost:8234/static/chunk-YBU6RJ5N.js\\\",756.4,1914.8,\\\"other\\\",756.4,2671.2],[\\\"http://localhost:8234/static/chunk-HB4RLT5O.js\\\",756.5,1915.5,\\\"other\\\",756.5,2672],[\\\"http://localhost:8234/static/chunk-UJJIEZBP.js\\\",756.6,1915.7,\\\"other\\\",756.6,2672.3],[\\\"http://localhost:8234/static/chunk-KXP7VI6L.js\\\",756.7,1922.4,\\\"other\\\",756.7,2679.1],[\\\"http://localhost:8234/static/chunk-OHMX2FMJ.js\\\",757.1,1921.9,\\\"other\\\",757.1,2679],[\\\"http://localhost:8234/static/chunk-EEOHMXMI.js\\\",757.3,1926.3,\\\"other\\\",757.3,2683.6],[\\\"http://localhost:8234/static/chunk-ATKSJCQX.js\\\",757.3,1937.4,\\\"other\\\",757.3,2694.7],[\\\"http://localhost:8234/static/chunk-CAEMAXLK.js\\\",757.4,1974,\\\"other\\\",757.4,2731.4],[\\\"http://localhost:8234/static/chunk-OBAYCOOK.js\\\",757.4,2015.8,\\\"other\\\",757.4,2773.2],[\\\"http://localhost:8234/static/chunk-VJGIAYQC.js\\\",757.5,1955.4,\\\"other\\\",757.5,2712.9],[\\\"http://127.0.0.1:8000/e/?ip=1&_=1644085939776\\\",2982,252.2,\\\"xmlhttprequest\\\",2982,3234.2],[\\\"http://127.0.0.1:8000/decide/?v=2&ip=1&_=1644085939777\\\",2983.2,366.5,\\\"xmlhttprequest\\\",2983.2,3349.7],[\\\"http://127.0.0.1:8000/engage/?ip=1&_=1644085939803\\\",3009.2,296.3,\\\"xmlhttprequest\\\",3009.2,3305.5],[\\\"http://localhost:8234/static/WebPerformance-TDTY5JT5.js\\\",3042.1,38.3,\\\"other\\\",3042.1,3080.4],[\\\"http://127.0.0.1:8000/static/icons/favicon-dev.ico?v=2021-04-29\\\",3050.1,205,\\\"other\\\",3050.1,3255.1],[\\\"http://127.0.0.1:8000/static/site.webmanifest?v=2021-04-29\\\",3148.9,23.7,\\\"other\\\",3148.9,3172.6],[\\\"http://localhost:8234/static/chunk-F5T7ECZG.js\\\",3155.1,18.2,\\\"other\\\",3155.1,3173.3],[\\\"http://localhost:8234/static/chunk-ZYLXYU4K.js\\\",3155.3,29.9,\\\"other\\\",3155.3,3185.2],[\\\"http://localhost:8234/static/chunk-Y4DLHNYM.js\\\",3155.4,31,\\\"other\\\",3155.4,3186.4],[\\\"http://localhost:8234/static/chunk-YQPLUSZK.js\\\",3155.4,39.8,\\\"other\\\",3155.4,3195.2],[\\\"http://localhost:8234/static/chunk-ZCRZKRW7.js\\\",3155.4,40.6,\\\"other\\\",3155.4,3196],[\\\"http://localhost:8234/static/chunk-AVSAWBKG.js\\\",3155.5,47.9,\\\"other\\\",3155.5,3203.4],[\\\"http://localhost:8234/static/chunk-NPPZ6HM3.js\\\",3155.5,48.6,\\\"other\\\",3155.5,3204.1],[\\\"http://localhost:8234/static/chunk-OSKNBHDN.js\\\",3155.5,62.6,\\\"other\\\",3155.5,3218.1],[\\\"http://localhost:8234/static/chunk-T7SYQIYY.js\\\",3155.6,62.7,\\\"other\\\",3155.6,3218.3],[\\\"http://localhost:8234/static/chunk-H2BXVWDT.js\\\",3155.6,77.5,\\\"other\\\",3155.6,3233.1],[\\\"http://localhost:8234/static/chunk-SGDHQOX6.js\\\",3155.6,77.6,\\\"other\\\",3155.6,3233.2],[\\\"http://localhost:8234/static/toolbar.js?_ts=1644085940146\\\",3351.5,97.8,\\\"script\\\",3351.5,3449.3],[\\\"http://127.0.0.1:8000/api/projects/1/actions/\\\",3357,201,\\\"fetch\\\",3357,3558],[\\\"http://127.0.0.1:8000/api/projects/1/annotations/?scope=organization&deleted=false\\\",3357.9,204.3,\\\"fetch\\\",3357.9,3562.2],[\\\"http://127.0.0.1:8000/api/projects/1/cohorts?limit=600\\\",3358.5,192.5,\\\"fetch\\\",3358.5,3551],[\\\"https://update.posthog.com/\\\",3371.8,85.7,\\\"fetch\\\",3371.8,3457.5],[\\\"https://www.gravatar.com/avatar/2e7d95b60efbe947f71009a1af1ba8d0?s=96&d=404\\\",3431.7,124.9,\\\"img\\\",3431.7,3556.6]]]}\",\n+                        \"$geoip_city_name\": \"Sydney\",\n+                        \"$geoip_country_name\": \"Australia\",\n+                        \"$geoip_country_code\": \"AU\",\n+                        \"$geoip_continent_name\": \"Oceania\",\n+                        \"$geoip_continent_code\": \"OC\",\n+                        \"$geoip_postal_code\": \"2000\",\n+                        \"$geoip_latitude\": -33.8601,\n+                        \"$geoip_longitude\": 151.2101,\n+                        \"$geoip_time_zone\": \"Australia/Sydney\",\n+                        \"$geoip_subdivision_1_code\": \"NSW\",\n+                        \"$geoip_subdivision_1_name\": \"New South Wales\",\n+                        \"$plugins_succeeded\": [\"GeoIP (1)\"],\n+                        \"$plugins_failed\": [],\n+                        \"$plugins_deferred\": [],\n+                        \"$ip\": \"127.0.0.1\",\n+                        \"$set_once\": {\n+                            \"$initial_os\": \"Mac OS X\",\n+                            \"$initial_browser\": \"Chrome\",\n+                            \"$initial_device_type\": \"Desktop\",\n+                            \"$initial_current_url\": \"http://127.0.0.1:8000/web-performance?properties=%5B%7B%22key%22%3A%22%24performance_page_loaded%22%2C%22value%22%3A%222700%22%2C%22operator%22%3A%22gt%22%2C%22type%22%3A%22event%22%7D%2C%7B%22key%22%3A%22%24browser%22%2C%22value%22%3A%22is_set%22%2C%22operator%22%3A%22is_set%22%2C%22type%22%3A%22event%22%7D%5D\",\n+                            \"$initial_browser_version\": 97,\n+                            \"$initial_referrer\": \"http://127.0.0.1:8000/web-performance?properties=%5B%7B%22key%22%3A%22%24performance_page_loaded%22%2C%22value%22%3A%222700%22%2C%22operator%22%3A%22gt%22%2C%22type%22%3A%22event%22%7D%2C%7B%22key%22%3A%22%24browser%22%2C%22value%22%3A%22is_set%22%2C%22operator%22%3A%22is_set%22%2C%22type%22%3A%22event%22%7D%5D\",\n+                            \"$initial_referring_domain\": \"127.0.0.1:8000\"\n+                        },\n+                        \"$group_0\": \"017eca8c-03d9-0000-45ef-b1d4ecab7048\",\n+                        \"$group_1\": \"017eca8b-fdce-0000-6923-f64fc0d0edac\",\n+                        \"$group_2\": \"http://localhost:8000\"\n                     },\n-                    {\n-                        \"id\": \"017e6ee2-4d67-0000-f266-2a54e220c516\",\n-                        \"name\": \"timezone component viewed\",\n-                        \"volume_30_day\": null,\n-                        \"query_usage_30_day\": null,\n-                        \"created_at\": \"2022-01-18T20:30:31.784619Z\",\n-                        \"last_seen_at\": \"2022-01-24T07:37:48.052000Z\"\n+                    \"event\": \"$pageview\",\n+                    \"timestamp\": \"2022-02-05T18:32:20.590000+00:00\",\n+                    \"person\": {\n+                        \"is_identified\": true,\n+                        \"distinct_ids\": [\"F3RTp6GByAuqUkpsUUjzKTQlmJzIQTFoX44fKup95BC\"],\n+                        \"properties\": {\n+                            \"email\": \"paul@posthog.com\"\n+                        }\n                     },\n-                    {\n-                        \"id\": \"017e72ae-bd9e-0000-f3a1-da3c0fbaadad\",\n-                        \"name\": \"viewed dashboard\",\n-                        \"volume_30_day\": null,\n-                        \"query_usage_30_day\": null,\n-                        \"created_at\": \"2022-01-19T14:12:41.503965Z\",\n-                        \"last_seen_at\": \"2022-01-21T09:38:03.508000Z\"\n-                    }\n-                ],\n-                \"next\": null\n-            },\n-            \"eventStorageLoading\": false\n-        },\n-        \"personPropertiesModel\": {\n-            \"personProperties\": [\n-                {\n-                    \"name\": \"$geoip_city_name\",\n-                    \"count\": 2\n-                },\n-                {\n-                    \"name\": \"$geoip_continent_code\",\n-                    \"count\": 2\n-                },\n-                {\n-                    \"name\": \"$geoip_continent_name\",\n-                    \"count\": 2\n-                },\n-                {\n-                    \"name\": \"$geoip_country_code\",\n-                    \"count\": 2\n-                },\n-                {\n-                    \"name\": \"$geoip_country_name\",\n-                    \"count\": 2\n-                },\n-                {\n-                    \"name\": \"$geoip_latitude\",\n-                    \"count\": 2\n-                },\n-                {\n-                    \"name\": \"$geoip_longitude\",\n-                    \"count\": 2\n-                },\n-                {\n-                    \"name\": \"$geoip_postal_code\",\n-                    \"count\": 2\n-                },\n-                {\n-                    \"name\": \"$geoip_subdivision_1_code\",\n-                    \"count\": 2\n-                },\n-                {\n-                    \"name\": \"$geoip_subdivision_1_name\",\n-                    \"count\": 2\n-                },\n-                {\n-                    \"name\": \"$geoip_time_zone\",\n-                    \"count\": 2\n-                },\n-                {\n-                    \"name\": \"$initial_browser\",\n-                    \"count\": 2\n-                },\n-                {\n-                    \"name\": \"$initial_browser_version\",\n-                    \"count\": 2\n-                },\n-                {\n-                    \"name\": \"$initial_current_url\",\n-                    \"count\": 2\n-                },\n-                {\n-                    \"name\": \"$initial_device_type\",\n-                    \"count\": 2\n-                },\n-                {\n-                    \"name\": \"$initial_geoip_city_name\",\n-                    \"count\": 2\n-                },\n-                {\n-                    \"name\": \"$initial_geoip_continent_code\",\n-                    \"count\": 2\n-                },\n-                {\n-                    \"name\": \"$initial_geoip_continent_name\",\n-                    \"count\": 2\n-                },\n-                {\n-                    \"name\": \"$initial_geoip_country_code\",\n-                    \"count\": 2\n-                },\n-                {\n-                    \"name\": \"$initial_geoip_country_name\",\n-                    \"count\": 2\n-                },\n-                {\n-                    \"name\": \"$initial_geoip_latitude\",\n-                    \"count\": 2\n-                },\n-                {\n-                    \"name\": \"$initial_geoip_longitude\",\n-                    \"count\": 2\n-                },\n-                {\n-                    \"name\": \"$initial_geoip_postal_code\",\n-                    \"count\": 2\n-                },\n-                {\n-                    \"name\": \"$initial_geoip_subdivision_1_code\",\n-                    \"count\": 2\n-                },\n-                {\n-                    \"name\": \"$initial_geoip_subdivision_1_name\",\n-                    \"count\": 2\n-                },\n-                {\n-                    \"name\": \"$initial_geoip_time_zone\",\n-                    \"count\": 2\n-                },\n-                {\n-                    \"name\": \"$initial_os\",\n-                    \"count\": 2\n-                },\n-                {\n-                    \"name\": \"$initial_referrer\",\n-                    \"count\": 2\n-                },\n-                {\n-                    \"name\": \"$initial_referring_domain\",\n-                    \"count\": 2\n-                },\n-                {\n-                    \"name\": \"$browser\",\n-                    \"count\": 1\n-                },\n-                {\n-                    \"name\": \"$browser_version\",\n-                    \"count\": 1\n-                },\n-                {\n-                    \"name\": \"$os\",\n-                    \"count\": 1\n+                    \"elements\": [],\n+                    \"elements_chain\": \"\"\n                 },\n                 {\n-                    \"name\": \"email\",\n-                    \"count\": 1\n-                }\n-            ],\n-            \"personPropertiesLoading\": false\n-        },\n-        \"propertyDefinitionsModel\": {\n-            \"propertyStorage\": {\n-                \"count\": 180,\n-                \"results\": [\n-                    {\n-                        \"id\": \"017e6d93-9f95-0000-3bf0-a1ae05f25802\",\n-                        \"name\": \"$active_feature_flags\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                    \"id\": \"017ecb28-9c95-0000-c81b-b8a0e6171d62\",\n+                    \"distinct_id\": \"17eca91a0ecd2f-0112e0afae304e-133a6253-16a7f0-17eca91a0eded1\",\n+                    \"properties\": {\n+                        \"$os\": \"Mac OS X\",\n+                        \"$browser\": \"Chrome\",\n+                        \"$device_type\": \"Desktop\",\n+                        \"$current_url\": \"http://localhost:8000/login?next=/events\",\n+                        \"$host\": \"localhost:8000\",\n+                        \"$pathname\": \"/login\",\n+                        \"$browser_version\": 97,\n+                        \"$screen_height\": 982,\n+                        \"$screen_width\": 1512,\n+                        \"$viewport_height\": 865,\n+                        \"$viewport_width\": 1512,\n+                        \"$lib\": \"web\",\n+                        \"$lib_version\": \"1.17.8\",\n+                        \"$insert_id\": \"kb39cvtr1iwzbp0c\",\n+                        \"$time\": 1644085940.486,\n+                        \"distinct_id\": \"17eca91a0ecd2f-0112e0afae304e-133a6253-16a7f0-17eca91a0eded1\",\n+                        \"$device_id\": \"17eca91a0ecd2f-0112e0afae304e-133a6253-16a7f0-17eca91a0eded1\",\n+                        \"$initial_referrer\": \"http://localhost:8000/login?next=/events\",\n+                        \"$initial_referring_domain\": \"localhost:8000\",\n+                        \"$referrer\": \"http://localhost:8000/login?next=/events\",\n+                        \"$referring_domain\": \"localhost:8000\",\n+                        \"$session_recording_enabled\": false,\n+                        \"$active_feature_flags\": [\"hackathon-apm\", \"6619-query-events-by-date\"],\n+                        \"$feature/hackathon-apm\": true,\n+                        \"$feature/6619-query-events-by-date\": true,\n+                        \"realm\": \"hosted-clickhouse\",\n+                        \"email_service_available\": false,\n+                        \"token\": \"phc_k6AJ5lImHZHzO7uBX5PBWPL0EmSrHEATJfaXOWREOAJ\",\n+                        \"$session_id\": \"17ecb1b6d551661-037995671a4a37-133a6253-16a7f0-17ecb1b6d561929\",\n+                        \"$window_id\": \"17ecb1b6d59179-07eda9364d2646-133a6253-16a7f0-17ecb1b6d5af1d\",\n+                        \"$performance_page_loaded\": 2697.9,\n+                        \"$performance_raw\": \"{\\\"navigation\\\":[[\\\"name\\\",\\\"entryType\\\",\\\"duration\\\",\\\"initiatorType\\\",\\\"fetchStart\\\",\\\"domainLookupStart\\\",\\\"domainLookupEnd\\\",\\\"connectStart\\\",\\\"connectEnd\\\",\\\"requestStart\\\",\\\"responseStart\\\",\\\"responseEnd\\\",\\\"transferSize\\\",\\\"encodedBodySize\\\",\\\"decodedBodySize\\\",\\\"unloadEventStart\\\",\\\"unloadEventEnd\\\",\\\"domInteractive\\\",\\\"domContentLoadedEventStart\\\",\\\"domContentLoadedEventEnd\\\",\\\"domComplete\\\",\\\"loadEventStart\\\",\\\"loadEventEnd\\\",\\\"type\\\"],[[\\\"http://localhost:8000/login?next=/events\\\",\\\"navigation\\\",2697.9,\\\"navigation\\\",3.2,3.2,3.2,3.2,3.2,7.2,99.4,99.6,21151,20851,20851,101.9,111.9,145.7,145.9,145.9,2697.9,2697.9,2697.9,\\\"reload\\\"]]],\\\"paint\\\":[],\\\"resource\\\":[[\\\"name\\\",\\\"startTime\\\",\\\"duration\\\",\\\"initiatorType\\\",\\\"fetchStart\\\",\\\"responseEnd\\\"],[[\\\"http://localhost:8234/static/index.css?t=1644085891439\\\",141.8,2314,\\\"link\\\",141.8,2455.8],[\\\"http://localhost:8234/static/index.js?t=1644085891439\\\",142,2298.7,\\\"other\\\",142,2440.7],[\\\"http://localhost:8234/static/chunk-YPFMJDM4.js\\\",142.4,2297.2,\\\"other\\\",142.4,2439.6],[\\\"http://localhost:8234/static/chunk-5MMMF5K7.js\\\",142.6,2307.2,\\\"other\\\",142.6,2449.8],[\\\"http://localhost:8234/static/chunk-XF34ZH23.js\\\",142.6,2310.9,\\\"other\\\",142.6,2453.5],[\\\"http://localhost:8234/static/chunk-INAGIC7G.js\\\",142.7,2320.7,\\\"other\\\",142.7,2463.4],[\\\"http://localhost:8234/static/chunk-I3Q2CDVZ.js\\\",142.7,2325.4,\\\"other\\\",142.7,2468.1],[\\\"http://localhost:8234/static/chunk-R2J2AFYA.js\\\",142.7,2335.6,\\\"other\\\",142.7,2478.3],[\\\"http://localhost:8234/static/chunk-LRA7UZ2C.js\\\",142.8,2340.2,\\\"other\\\",142.8,2483],[\\\"http://localhost:8234/static/chunk-JABUHWMZ.js\\\",142.8,2346.9,\\\"other\\\",142.8,2489.7],[\\\"http://localhost:8234/static/chunk-MILJQ7RK.js\\\",142.8,2359.2,\\\"other\\\",142.8,2502],[\\\"http://localhost:8234/static/chunk-A3WPL726.js\\\",143,2358.5,\\\"other\\\",143,2501.5],[\\\"http://localhost:8234/static/chunk-OZGU6W75.js\\\",143.1,2358.7,\\\"other\\\",143.1,2501.8],[\\\"http://localhost:8234/static/chunk-5WYOWOVT.js\\\",143.1,2382.7,\\\"other\\\",143.1,2525.8],[\\\"http://localhost:8234/static/chunk-BP26XGN6.js\\\",143.2,2382.3,\\\"other\\\",143.2,2525.5],[\\\"http://localhost:8234/static/chunk-6SFOWN5U.js\\\",143.4,2374.3,\\\"other\\\",143.4,2517.7],[\\\"http://localhost:8234/static/chunk-UDRKU2XS.js\\\",143.4,2387.1,\\\"other\\\",143.4,2530.5],[\\\"http://localhost:8234/static/chunk-25TTUT3N.js\\\",143.4,2387.7,\\\"other\\\",143.4,2531.1],[\\\"http://localhost:8234/static/chunk-KCJGXE5M.js\\\",143.5,2386.9,\\\"other\\\",143.5,2530.4],[\\\"http://localhost:8234/static/chunk-QGGM6NUR.js\\\",143.5,2391.3,\\\"other\\\",143.5,2534.8],[\\\"http://localhost:8234/static/chunk-HED4XUT2.js\\\",143.5,2393.5,\\\"other\\\",143.5,2537],[\\\"http://localhost:8234/static/chunk-4YYGW3TC.js\\\",143.6,2392.5,\\\"other\\\",143.6,2536.1],[\\\"http://localhost:8234/static/chunk-MQF2FLOV.js\\\",143.6,2398,\\\"other\\\",143.6,2541.6],[\\\"http://localhost:8234/static/chunk-EOM6WIAG.js\\\",143.6,2402.7,\\\"other\\\",143.6,2546.3],[\\\"http://localhost:8234/static/chunk-AXH4YZAR.js\\\",143.8,2402.6,\\\"other\\\",143.8,2546.4],[\\\"http://localhost:8234/static/chunk-RQJ43M5U.js\\\",143.8,2416.3,\\\"other\\\",143.8,2560.1],[\\\"http://localhost:8234/static/chunk-XPGE43VJ.js\\\",143.8,2415.5,\\\"other\\\",143.8,2559.3],[\\\"http://localhost:8234/static/chunk-FQHAJZGM.js\\\",143.8,2415.6,\\\"other\\\",143.8,2559.4],[\\\"http://localhost:8234/static/chunk-L4IYGZIG.js\\\",143.9,2424.7,\\\"other\\\",143.9,2568.6],[\\\"http://localhost:8234/static/chunk-IGTMCF24.js\\\",143.9,2424.7,\\\"other\\\",143.9,2568.6],[\\\"http://localhost:8234/static/chunk-AMOE3OJU.js\\\",143.9,2424.9,\\\"other\\\",143.9,2568.8],[\\\"http://localhost:8234/static/chunk-BO4VDBQ6.js\\\",143.9,2435.1,\\\"other\\\",143.9,2579],[\\\"http://localhost:8234/static/chunk-VHSG55N2.js\\\",144,2434.9,\\\"other\\\",144,2578.9],[\\\"http://localhost:8234/static/chunk-QE52CDVG.js\\\",144,2435,\\\"other\\\",144,2579],[\\\"http://localhost:8234/static/chunk-4ZUV5LND.js\\\",144,2441.5,\\\"other\\\",144,2585.5],[\\\"http://localhost:8234/static/chunk-ASGLZXIV.js\\\",144.2,2441.4,\\\"other\\\",144.2,2585.6],[\\\"http://localhost:8234/static/chunk-HGNVPWDY.js\\\",144.2,2441.3,\\\"other\\\",144.2,2585.5],[\\\"http://localhost:8234/static/chunk-LD3TGMGW.js\\\",144.2,2447.3,\\\"other\\\",144.2,2591.5],[\\\"http://localhost:8234/static/chunk-PRPBRI2E.js\\\",144.2,2447.5,\\\"other\\\",144.2,2591.7],[\\\"http://localhost:8234/static/chunk-CA6FFFUC.js\\\",144.3,2447.4,\\\"other\\\",144.3,2591.7],[\\\"http://localhost:8234/static/chunk-YBU6RJ5N.js\\\",144.3,2451.1,\\\"other\\\",144.3,2595.4],[\\\"http://localhost:8234/static/chunk-HB4RLT5O.js\\\",144.4,2451.2,\\\"other\\\",144.4,2595.6],[\\\"http://localhost:8234/static/chunk-UJJIEZBP.js\\\",144.4,2452.9,\\\"other\\\",144.4,2597.3],[\\\"http://localhost:8234/static/chunk-OHMX2FMJ.js\\\",144.4,2455.7,\\\"other\\\",144.4,2600.1],[\\\"http://localhost:8234/static/chunk-KXP7VI6L.js\\\",144.4,2456.4,\\\"other\\\",144.4,2600.8],[\\\"http://localhost:8234/static/chunk-EEOHMXMI.js\\\",144.5,2458.2,\\\"other\\\",144.5,2602.7],[\\\"http://localhost:8234/static/chunk-ATKSJCQX.js\\\",144.5,2461,\\\"other\\\",144.5,2605.5],[\\\"http://localhost:8234/static/chunk-CAEMAXLK.js\\\",144.5,2513.2,\\\"other\\\",144.5,2657.7],[\\\"http://localhost:8234/static/chunk-OBAYCOOK.js\\\",144.5,2528.4,\\\"other\\\",144.5,2672.9],[\\\"http://localhost:8234/static/chunk-VJGIAYQC.js\\\",144.6,2466.6,\\\"other\\\",144.6,2611.2],[\\\"http://localhost:8000/e/?ip=1&_=1644085939605\\\",2813.1,31.5,\\\"xmlhttprequest\\\",2813.1,2844.6],[\\\"http://localhost:8000/decide/?v=2&ip=1&_=1644085939606\\\",2813.4,104.6,\\\"xmlhttprequest\\\",2813.4,2918],[\\\"http://localhost:8234/static/chunk-GYN42MDT.js\\\",2830.8,14.1,\\\"other\\\",2830.8,2844.9],[\\\"http://localhost:8234/static/chunk-NJ2XRYRN.js\\\",2831,14,\\\"other\\\",2831,2845],[\\\"http://localhost:8234/static/chunk-YSA3HNSV.js\\\",2831.1,14.3,\\\"other\\\",2831.1,2845.4],[\\\"http://localhost:8234/static/chunk-LKL2K3VW.js\\\",2831.1,41,\\\"other\\\",2831.1,2872.1],[\\\"http://localhost:8234/static/Login-RWDRPZ66.js\\\",2831.3,44.6,\\\"other\\\",2831.3,2875.9],[\\\"http://localhost:8000/static/icons/favicon-dev.ico?v=2021-04-29\\\",2834.3,35.9,\\\"other\\\",2834.3,2870.2],[\\\"http://localhost:8000/static/site.webmanifest?v=2021-04-29\\\",2836,48.3,\\\"other\\\",2836,2884.3]]]}\",\n+                        \"$geoip_city_name\": \"Sydney\",\n+                        \"$geoip_country_name\": \"Australia\",\n+                        \"$geoip_country_code\": \"AU\",\n+                        \"$geoip_continent_name\": \"Oceania\",\n+                        \"$geoip_continent_code\": \"OC\",\n+                        \"$geoip_postal_code\": \"2000\",\n+                        \"$geoip_latitude\": -33.8601,\n+                        \"$geoip_longitude\": 151.2101,\n+                        \"$geoip_time_zone\": \"Australia/Sydney\",\n+                        \"$geoip_subdivision_1_code\": \"NSW\",\n+                        \"$geoip_subdivision_1_name\": \"New South Wales\",\n+                        \"$plugins_succeeded\": [\"GeoIP (1)\"],\n+                        \"$plugins_failed\": [],\n+                        \"$plugins_deferred\": [],\n+                        \"$ip\": \"127.0.0.1\",\n+                        \"$set_once\": {\n+                            \"$initial_os\": \"Mac OS X\",\n+                            \"$initial_browser\": \"Chrome\",\n+                            \"$initial_device_type\": \"Desktop\",\n+                            \"$initial_current_url\": \"http://localhost:8000/login?next=/events\",\n+                            \"$initial_browser_version\": 97,\n+                            \"$initial_referrer\": \"http://localhost:8000/login?next=/events\",\n+                            \"$initial_referring_domain\": \"localhost:8000\"\n+                        }\n                     },\n-                    {\n-                        \"id\": \"017e6d93-a344-0000-297a-fdf9c1b9eb00\",\n-                        \"name\": \"$anon_distinct_id\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"String\",\n-                        \"is_event_property\": null\n+                    \"event\": \"$pageview\",\n+                    \"timestamp\": \"2022-02-05T18:32:20.500000+00:00\",\n+                    \"person\": {\n+                        \"is_identified\": false,\n+                        \"distinct_ids\": [\"17eca91a0ecd2f-0112e0afae304e-133a6253-16a7f0-17eca91a0eded1\"],\n+                        \"properties\": {}\n                     },\n-                    {\n-                        \"id\": \"017e6d93-9f39-0000-b7d3-652cb898aced\",\n-                        \"name\": \"$browser\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"String\",\n-                        \"is_event_property\": null\n+                    \"elements\": [],\n+                    \"elements_chain\": \"\"\n+                },\n+                {\n+                    \"id\": \"017ecb28-8f18-0000-dd36-5cef49c495af\",\n+                    \"distinct_id\": \"F3RTp6GByAuqUkpsUUjzKTQlmJzIQTFoX44fKup95BC\",\n+                    \"properties\": {\n+                        \"$os\": \"Mac OS X\",\n+                        \"$browser\": \"Chrome\",\n+                        \"$device_type\": \"Desktop\",\n+                        \"$current_url\": \"http://127.0.0.1:8000/web-performance?properties=%5B%7B%22key%22%3A%22%24performance_page_loaded%22%2C%22value%22%3A%222700%22%2C%22operator%22%3A%22gt%22%2C%22type%22%3A%22event%22%7D%2C%7B%22key%22%3A%22%24browser%22%2C%22value%22%3A%22is_set%22%2C%22operator%22%3A%22is_set%22%2C%22type%22%3A%22event%22%7D%5D\",\n+                        \"$host\": \"127.0.0.1:8000\",\n+                        \"$pathname\": \"/web-performance\",\n+                        \"$browser_version\": 97,\n+                        \"$screen_height\": 982,\n+                        \"$screen_width\": 1512,\n+                        \"$viewport_height\": 833,\n+                        \"$viewport_width\": 949,\n+                        \"$lib\": \"web\",\n+                        \"$lib_version\": \"1.17.8\",\n+                        \"$insert_id\": \"uv8r1xq8r3lh3abv\",\n+                        \"$time\": 1644085939.77,\n+                        \"distinct_id\": \"F3RTp6GByAuqUkpsUUjzKTQlmJzIQTFoX44fKup95BC\",\n+                        \"$device_id\": \"17eca8c073990-02b888033df436-133a6253-16a7f0-17eca8c073a11b6\",\n+                        \"$user_id\": \"F3RTp6GByAuqUkpsUUjzKTQlmJzIQTFoX44fKup95BC\",\n+                        \"$initial_referrer\": \"http://127.0.0.1:8000/login\",\n+                        \"$initial_referring_domain\": \"127.0.0.1:8000\",\n+                        \"$referrer\": \"http://127.0.0.1:8000/web-performance?properties=%5B%7B%22key%22%3A%22%24performance_page_loaded%22%2C%22value%22%3A%222700%22%2C%22operator%22%3A%22gt%22%2C%22type%22%3A%22event%22%7D%2C%7B%22key%22%3A%22%24browser%22%2C%22value%22%3A%22is_set%22%2C%22operator%22%3A%22is_set%22%2C%22type%22%3A%22event%22%7D%5D\",\n+                        \"$referring_domain\": \"127.0.0.1:8000\",\n+                        \"is_demo_project\": false,\n+                        \"$groups\": {\n+                            \"project\": \"017eca8c-03d9-0000-45ef-b1d4ecab7048\",\n+                            \"organization\": \"017eca8b-fdce-0000-6923-f64fc0d0edac\",\n+                            \"instance\": \"http://localhost:8000\"\n+                        },\n+                        \"posthog_version\": \"1.32.0\",\n+                        \"realm\": \"hosted-clickhouse\",\n+                        \"email_service_available\": false,\n+                        \"$session_recording_enabled\": false,\n+                        \"$active_feature_flags\": [\"hackathon-apm\", \"6619-query-events-by-date\"],\n+                        \"$feature/hackathon-apm\": true,\n+                        \"$feature/6619-query-events-by-date\": true,\n+                        \"token\": \"phc_k6AJ5lImHZHzO7uBX5PBWPL0EmSrHEATJfaXOWREOAJ\",\n+                        \"$session_id\": \"17ecb1b70dcd31-0d4473129efd62-133a6253-16a7f0-17ecb1b70ddb94\",\n+                        \"$window_id\": \"17ecb1b70de1df-04e23a807879ce-133a6253-16a7f0-17ecb1b70dfdf3\",\n+                        \"$performance_page_loaded\": 2802.5,\n+                        \"$performance_raw\": \"{\\\"navigation\\\":[[\\\"name\\\",\\\"entryType\\\",\\\"duration\\\",\\\"initiatorType\\\",\\\"fetchStart\\\",\\\"domainLookupStart\\\",\\\"domainLookupEnd\\\",\\\"connectStart\\\",\\\"connectEnd\\\",\\\"requestStart\\\",\\\"responseStart\\\",\\\"responseEnd\\\",\\\"transferSize\\\",\\\"encodedBodySize\\\",\\\"decodedBodySize\\\",\\\"unloadEventStart\\\",\\\"unloadEventEnd\\\",\\\"domInteractive\\\",\\\"domContentLoadedEventStart\\\",\\\"domContentLoadedEventEnd\\\",\\\"domComplete\\\",\\\"loadEventStart\\\",\\\"loadEventEnd\\\",\\\"type\\\"],[[\\\"http://127.0.0.1:8000/web-performance?properties=%5B%7B%22key%22%3A%22%24performance_page_loaded%22%2C%22value%22%3A%222700%22%2C%22operator%22%3A%22gt%22%2C%22type%22%3A%22event%22%7D%2C%7B%22key%22%3A%22%24browser%22%2C%22value%22%3A%22is_set%22%2C%22operator%22%3A%22is_set%22%2C%22type%22%3A%22event%22%7D%5D\\\",\\\"navigation\\\",2802.5,\\\"navigation\\\",3.2,3.2,3.2,3.2,3.2,24.9,500.4,504.2,34955,34655,34655,517.1,533.7,775,775,826.2,2798.3,2802.4,2802.5,\\\"reload\\\"]]],\\\"paint\\\":[],\\\"resource\\\":[[\\\"name\\\",\\\"startTime\\\",\\\"duration\\\",\\\"initiatorType\\\",\\\"fetchStart\\\",\\\"responseEnd\\\"],[[\\\"http://localhost:8234/static/index.css?t=1644085891439\\\",739.8,1715.1,\\\"link\\\",739.8,2454.9],[\\\"http://localhost:8234/static/index.js?t=1644085891439\\\",740,1701.3,\\\"other\\\",740,2441.3],[\\\"http://localhost:8234/static/chunk-YPFMJDM4.js\\\",740.7,1700.4,\\\"other\\\",740.7,2441.1],[\\\"http://localhost:8234/static/chunk-XF34ZH23.js\\\",740.8,1718.3,\\\"other\\\",740.8,2459.1],[\\\"http://localhost:8234/static/chunk-5MMMF5K7.js\\\",741,1709.7,\\\"other\\\",741,2450.7],[\\\"http://localhost:8234/static/chunk-INAGIC7G.js\\\",741.1,1745.8,\\\"other\\\",741.1,2486.9],[\\\"http://localhost:8234/static/chunk-I3Q2CDVZ.js\\\",741.1,1749.4,\\\"other\\\",741.1,2490.5],[\\\"http://localhost:8234/static/chunk-R2J2AFYA.js\\\",741.2,1748.7,\\\"other\\\",741.2,2489.9],[\\\"http://localhost:8234/static/chunk-JABUHWMZ.js\\\",741.4,1767.1,\\\"other\\\",741.4,2508.5],[\\\"http://localhost:8234/static/chunk-LRA7UZ2C.js\\\",741.4,1766.4,\\\"other\\\",741.4,2507.8],[\\\"http://localhost:8234/static/chunk-MILJQ7RK.js\\\",741.5,1767.1,\\\"other\\\",741.5,2508.6],[\\\"http://localhost:8234/static/chunk-A3WPL726.js\\\",741.7,1783.5,\\\"other\\\",741.7,2525.2],[\\\"http://localhost:8234/static/chunk-OZGU6W75.js\\\",741.7,1783.6,\\\"other\\\",741.7,2525.3],[\\\"http://localhost:8234/static/chunk-5WYOWOVT.js\\\",741.8,1785.1,\\\"other\\\",741.8,2526.9],[\\\"http://localhost:8234/static/chunk-BP26XGN6.js\\\",741.8,1810.4,\\\"other\\\",741.8,2552.2],[\\\"http://localhost:8234/static/chunk-6SFOWN5U.js\\\",753.9,1794,\\\"other\\\",753.9,2547.9],[\\\"http://localhost:8234/static/chunk-25TTUT3N.js\\\",754.2,1794.3,\\\"other\\\",754.2,2548.5],[\\\"http://localhost:8234/static/chunk-UDRKU2XS.js\\\",754.2,1810.9,\\\"other\\\",754.2,2565.1],[\\\"http://localhost:8234/static/chunk-KCJGXE5M.js\\\",754.4,1809.9,\\\"other\\\",754.4,2564.3],[\\\"http://localhost:8234/static/chunk-HED4XUT2.js\\\",754.6,1813.2,\\\"other\\\",754.6,2567.8],[\\\"http://localhost:8234/static/chunk-QGGM6NUR.js\\\",754.7,1828.2,\\\"other\\\",754.7,2582.9],[\\\"http://localhost:8234/static/chunk-4YYGW3TC.js\\\",754.7,1828.3,\\\"other\\\",754.7,2583],[\\\"http://localhost:8234/static/chunk-MQF2FLOV.js\\\",754.9,1834.4,\\\"other\\\",754.9,2589.3],[\\\"http://localhost:8234/static/chunk-EOM6WIAG.js\\\",755,1838.1,\\\"other\\\",755,2593.1],[\\\"http://localhost:8234/static/chunk-AXH4YZAR.js\\\",755.1,1838.4,\\\"other\\\",755.1,2593.5],[\\\"http://localhost:8234/static/chunk-FQHAJZGM.js\\\",755.1,1844.4,\\\"other\\\",755.1,2599.5],[\\\"http://localhost:8234/static/chunk-XPGE43VJ.js\\\",755.3,1849,\\\"other\\\",755.3,2604.3],[\\\"http://localhost:8234/static/chunk-RQJ43M5U.js\\\",755.3,1851.6,\\\"other\\\",755.3,2606.9],[\\\"http://localhost:8234/static/chunk-L4IYGZIG.js\\\",755.5,1853.2,\\\"other\\\",755.5,2608.7],[\\\"http://localhost:8234/static/chunk-IGTMCF24.js\\\",755.5,1861.6,\\\"other\\\",755.5,2617.1],[\\\"http://localhost:8234/static/chunk-AMOE3OJU.js\\\",755.6,1862.6,\\\"other\\\",755.6,2618.2],[\\\"http://localhost:8234/static/chunk-BO4VDBQ6.js\\\",755.8,1877.5,\\\"other\\\",755.8,2633.3],[\\\"http://localhost:8234/static/chunk-QE52CDVG.js\\\",755.8,1879.8,\\\"other\\\",755.8,2635.6],[\\\"http://localhost:8234/static/chunk-VHSG55N2.js\\\",755.9,1878.4,\\\"other\\\",755.9,2634.3],[\\\"http://localhost:8234/static/chunk-4ZUV5LND.js\\\",756,1901.5,\\\"other\\\",756,2657.5],[\\\"http://localhost:8234/static/chunk-ASGLZXIV.js\\\",756,1901.8,\\\"other\\\",756,2657.8],[\\\"http://localhost:8234/static/chunk-HGNVPWDY.js\\\",756.1,1901.3,\\\"other\\\",756.1,2657.4],[\\\"http://localhost:8234/static/chunk-PRPBRI2E.js\\\",756.3,1908.6,\\\"other\\\",756.3,2664.9],[\\\"http://localhost:8234/static/chunk-LD3TGMGW.js\\\",756.3,1908.8,\\\"other\\\",756.3,2665.1],[\\\"http://localhost:8234/static/chunk-CA6FFFUC.js\\\",756.4,1908.6,\\\"other\\\",756.4,2665],[\\\"http://localhost:8234/static/chunk-YBU6RJ5N.js\\\",756.4,1914.8,\\\"other\\\",756.4,2671.2],[\\\"http://localhost:8234/static/chunk-HB4RLT5O.js\\\",756.5,1915.5,\\\"other\\\",756.5,2672],[\\\"http://localhost:8234/static/chunk-UJJIEZBP.js\\\",756.6,1915.7,\\\"other\\\",756.6,2672.3],[\\\"http://localhost:8234/static/chunk-KXP7VI6L.js\\\",756.7,1922.4,\\\"other\\\",756.7,2679.1],[\\\"http://localhost:8234/static/chunk-OHMX2FMJ.js\\\",757.1,1921.9,\\\"other\\\",757.1,2679],[\\\"http://localhost:8234/static/chunk-EEOHMXMI.js\\\",757.3,1926.3,\\\"other\\\",757.3,2683.6],[\\\"http://localhost:8234/static/chunk-ATKSJCQX.js\\\",757.3,1937.4,\\\"other\\\",757.3,2694.7],[\\\"http://localhost:8234/static/chunk-CAEMAXLK.js\\\",757.4,1974,\\\"other\\\",757.4,2731.4],[\\\"http://localhost:8234/static/chunk-OBAYCOOK.js\\\",757.4,2015.8,\\\"other\\\",757.4,2773.2],[\\\"http://localhost:8234/static/chunk-VJGIAYQC.js\\\",757.5,1955.4,\\\"other\\\",757.5,2712.9]]]}\",\n+                        \"$geoip_city_name\": \"Sydney\",\n+                        \"$geoip_country_name\": \"Australia\",\n+                        \"$geoip_country_code\": \"AU\",\n+                        \"$geoip_continent_name\": \"Oceania\",\n+                        \"$geoip_continent_code\": \"OC\",\n+                        \"$geoip_postal_code\": \"2000\",\n+                        \"$geoip_latitude\": -33.8601,\n+                        \"$geoip_longitude\": 151.2101,\n+                        \"$geoip_time_zone\": \"Australia/Sydney\",\n+                        \"$geoip_subdivision_1_code\": \"NSW\",\n+                        \"$geoip_subdivision_1_name\": \"New South Wales\",\n+                        \"$plugins_succeeded\": [\"GeoIP (1)\"],\n+                        \"$plugins_failed\": [],\n+                        \"$plugins_deferred\": [],\n+                        \"$ip\": \"127.0.0.1\",\n+                        \"$set_once\": {\n+                            \"$initial_os\": \"Mac OS X\",\n+                            \"$initial_browser\": \"Chrome\",\n+                            \"$initial_device_type\": \"Desktop\",\n+                            \"$initial_current_url\": \"http://127.0.0.1:8000/web-performance?properties=%5B%7B%22key%22%3A%22%24performance_page_loaded%22%2C%22value%22%3A%222700%22%2C%22operator%22%3A%22gt%22%2C%22type%22%3A%22event%22%7D%2C%7B%22key%22%3A%22%24browser%22%2C%22value%22%3A%22is_set%22%2C%22operator%22%3A%22is_set%22%2C%22type%22%3A%22event%22%7D%5D\",\n+                            \"$initial_browser_version\": 97,\n+                            \"$initial_referrer\": \"http://127.0.0.1:8000/web-performance?properties=%5B%7B%22key%22%3A%22%24performance_page_loaded%22%2C%22value%22%3A%222700%22%2C%22operator%22%3A%22gt%22%2C%22type%22%3A%22event%22%7D%2C%7B%22key%22%3A%22%24browser%22%2C%22value%22%3A%22is_set%22%2C%22operator%22%3A%22is_set%22%2C%22type%22%3A%22event%22%7D%5D\",\n+                            \"$initial_referring_domain\": \"127.0.0.1:8000\"\n+                        },\n+                        \"$group_0\": \"017eca8c-03d9-0000-45ef-b1d4ecab7048\",\n+                        \"$group_1\": \"017eca8b-fdce-0000-6923-f64fc0d0edac\",\n+                        \"$group_2\": \"http://localhost:8000\"\n                     },\n-                    {\n-                        \"id\": \"017e6d93-9f50-0000-05f8-ea84b7ed8783\",\n-                        \"name\": \"$browser_version\",\n-                        \"is_numerical\": true,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"Numeric\",\n-                        \"is_event_property\": null\n+                    \"event\": \"$pageview\",\n+                    \"timestamp\": \"2022-02-05T18:32:19.929000+00:00\",\n+                    \"person\": {\n+                        \"is_identified\": true,\n+                        \"distinct_ids\": [\"F3RTp6GByAuqUkpsUUjzKTQlmJzIQTFoX44fKup95BC\"],\n+                        \"properties\": {\n+                            \"email\": \"paul@posthog.com\"\n+                        }\n                     },\n-                    {\n-                        \"id\": \"017e6d93-a838-0000-2536-fd23d3870b39\",\n-                        \"name\": \"$ce_version\",\n-                        \"is_numerical\": true,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"Numeric\",\n-                        \"is_event_property\": null\n+                    \"elements\": [],\n+                    \"elements_chain\": \"\"\n+                },\n+                {\n+                    \"id\": \"017ecb28-8da4-0000-535d-82d10b3935f5\",\n+                    \"distinct_id\": \"17eca91a0ecd2f-0112e0afae304e-133a6253-16a7f0-17eca91a0eded1\",\n+                    \"properties\": {\n+                        \"$os\": \"Mac OS X\",\n+                        \"$browser\": \"Chrome\",\n+                        \"$device_type\": \"Desktop\",\n+                        \"$current_url\": \"http://localhost:8000/login?next=/events\",\n+                        \"$host\": \"localhost:8000\",\n+                        \"$pathname\": \"/login\",\n+                        \"$browser_version\": 97,\n+                        \"$screen_height\": 982,\n+                        \"$screen_width\": 1512,\n+                        \"$viewport_height\": 865,\n+                        \"$viewport_width\": 1512,\n+                        \"$lib\": \"web\",\n+                        \"$lib_version\": \"1.17.8\",\n+                        \"$insert_id\": \"sm4k38emum6m823b\",\n+                        \"$time\": 1644085939.601,\n+                        \"distinct_id\": \"17eca91a0ecd2f-0112e0afae304e-133a6253-16a7f0-17eca91a0eded1\",\n+                        \"$device_id\": \"17eca91a0ecd2f-0112e0afae304e-133a6253-16a7f0-17eca91a0eded1\",\n+                        \"$initial_referrer\": \"http://localhost:8000/login?next=/events\",\n+                        \"$initial_referring_domain\": \"localhost:8000\",\n+                        \"$referrer\": \"http://localhost:8000/login?next=/events\",\n+                        \"$referring_domain\": \"localhost:8000\",\n+                        \"$session_recording_enabled\": false,\n+                        \"$active_feature_flags\": [\"hackathon-apm\", \"6619-query-events-by-date\"],\n+                        \"$feature/hackathon-apm\": true,\n+                        \"$feature/6619-query-events-by-date\": true,\n+                        \"realm\": \"hosted-clickhouse\",\n+                        \"email_service_available\": false,\n+                        \"token\": \"phc_k6AJ5lImHZHzO7uBX5PBWPL0EmSrHEATJfaXOWREOAJ\",\n+                        \"$session_id\": \"17ecb1b6d551661-037995671a4a37-133a6253-16a7f0-17ecb1b6d561929\",\n+                        \"$window_id\": \"17ecb1b6d59179-07eda9364d2646-133a6253-16a7f0-17ecb1b6d5af1d\",\n+                        \"$performance_page_loaded\": 2697.9,\n+                        \"$performance_raw\": \"{\\\"navigation\\\":[[\\\"name\\\",\\\"entryType\\\",\\\"duration\\\",\\\"initiatorType\\\",\\\"fetchStart\\\",\\\"domainLookupStart\\\",\\\"domainLookupEnd\\\",\\\"connectStart\\\",\\\"connectEnd\\\",\\\"requestStart\\\",\\\"responseStart\\\",\\\"responseEnd\\\",\\\"transferSize\\\",\\\"encodedBodySize\\\",\\\"decodedBodySize\\\",\\\"unloadEventStart\\\",\\\"unloadEventEnd\\\",\\\"domInteractive\\\",\\\"domContentLoadedEventStart\\\",\\\"domContentLoadedEventEnd\\\",\\\"domComplete\\\",\\\"loadEventStart\\\",\\\"loadEventEnd\\\",\\\"type\\\"],[[\\\"http://localhost:8000/login?next=/events\\\",\\\"navigation\\\",2697.9,\\\"navigation\\\",3.2,3.2,3.2,3.2,3.2,7.2,99.4,99.6,21151,20851,20851,101.9,111.9,145.7,145.9,145.9,2697.9,2697.9,2697.9,\\\"reload\\\"]]],\\\"paint\\\":[],\\\"resource\\\":[[\\\"name\\\",\\\"startTime\\\",\\\"duration\\\",\\\"initiatorType\\\",\\\"fetchStart\\\",\\\"responseEnd\\\"],[[\\\"http://localhost:8234/static/index.css?t=1644085891439\\\",141.8,2314,\\\"link\\\",141.8,2455.8],[\\\"http://localhost:8234/static/index.js?t=1644085891439\\\",142,2298.7,\\\"other\\\",142,2440.7],[\\\"http://localhost:8234/static/chunk-YPFMJDM4.js\\\",142.4,2297.2,\\\"other\\\",142.4,2439.6],[\\\"http://localhost:8234/static/chunk-5MMMF5K7.js\\\",142.6,2307.2,\\\"other\\\",142.6,2449.8],[\\\"http://localhost:8234/static/chunk-XF34ZH23.js\\\",142.6,2310.9,\\\"other\\\",142.6,2453.5],[\\\"http://localhost:8234/static/chunk-INAGIC7G.js\\\",142.7,2320.7,\\\"other\\\",142.7,2463.4],[\\\"http://localhost:8234/static/chunk-I3Q2CDVZ.js\\\",142.7,2325.4,\\\"other\\\",142.7,2468.1],[\\\"http://localhost:8234/static/chunk-R2J2AFYA.js\\\",142.7,2335.6,\\\"other\\\",142.7,2478.3],[\\\"http://localhost:8234/static/chunk-LRA7UZ2C.js\\\",142.8,2340.2,\\\"other\\\",142.8,2483],[\\\"http://localhost:8234/static/chunk-JABUHWMZ.js\\\",142.8,2346.9,\\\"other\\\",142.8,2489.7],[\\\"http://localhost:8234/static/chunk-MILJQ7RK.js\\\",142.8,2359.2,\\\"other\\\",142.8,2502],[\\\"http://localhost:8234/static/chunk-A3WPL726.js\\\",143,2358.5,\\\"other\\\",143,2501.5],[\\\"http://localhost:8234/static/chunk-OZGU6W75.js\\\",143.1,2358.7,\\\"other\\\",143.1,2501.8],[\\\"http://localhost:8234/static/chunk-5WYOWOVT.js\\\",143.1,2382.7,\\\"other\\\",143.1,2525.8],[\\\"http://localhost:8234/static/chunk-BP26XGN6.js\\\",143.2,2382.3,\\\"other\\\",143.2,2525.5],[\\\"http://localhost:8234/static/chunk-6SFOWN5U.js\\\",143.4,2374.3,\\\"other\\\",143.4,2517.7],[\\\"http://localhost:8234/static/chunk-UDRKU2XS.js\\\",143.4,2387.1,\\\"other\\\",143.4,2530.5],[\\\"http://localhost:8234/static/chunk-25TTUT3N.js\\\",143.4,2387.7,\\\"other\\\",143.4,2531.1],[\\\"http://localhost:8234/static/chunk-KCJGXE5M.js\\\",143.5,2386.9,\\\"other\\\",143.5,2530.4],[\\\"http://localhost:8234/static/chunk-QGGM6NUR.js\\\",143.5,2391.3,\\\"other\\\",143.5,2534.8],[\\\"http://localhost:8234/static/chunk-HED4XUT2.js\\\",143.5,2393.5,\\\"other\\\",143.5,2537],[\\\"http://localhost:8234/static/chunk-4YYGW3TC.js\\\",143.6,2392.5,\\\"other\\\",143.6,2536.1],[\\\"http://localhost:8234/static/chunk-MQF2FLOV.js\\\",143.6,2398,\\\"other\\\",143.6,2541.6],[\\\"http://localhost:8234/static/chunk-EOM6WIAG.js\\\",143.6,2402.7,\\\"other\\\",143.6,2546.3],[\\\"http://localhost:8234/static/chunk-AXH4YZAR.js\\\",143.8,2402.6,\\\"other\\\",143.8,2546.4],[\\\"http://localhost:8234/static/chunk-RQJ43M5U.js\\\",143.8,2416.3,\\\"other\\\",143.8,2560.1],[\\\"http://localhost:8234/static/chunk-XPGE43VJ.js\\\",143.8,2415.5,\\\"other\\\",143.8,2559.3],[\\\"http://localhost:8234/static/chunk-FQHAJZGM.js\\\",143.8,2415.6,\\\"other\\\",143.8,2559.4],[\\\"http://localhost:8234/static/chunk-L4IYGZIG.js\\\",143.9,2424.7,\\\"other\\\",143.9,2568.6],[\\\"http://localhost:8234/static/chunk-IGTMCF24.js\\\",143.9,2424.7,\\\"other\\\",143.9,2568.6],[\\\"http://localhost:8234/static/chunk-AMOE3OJU.js\\\",143.9,2424.9,\\\"other\\\",143.9,2568.8],[\\\"http://localhost:8234/static/chunk-BO4VDBQ6.js\\\",143.9,2435.1,\\\"other\\\",143.9,2579],[\\\"http://localhost:8234/static/chunk-VHSG55N2.js\\\",144,2434.9,\\\"other\\\",144,2578.9],[\\\"http://localhost:8234/static/chunk-QE52CDVG.js\\\",144,2435,\\\"other\\\",144,2579],[\\\"http://localhost:8234/static/chunk-4ZUV5LND.js\\\",144,2441.5,\\\"other\\\",144,2585.5],[\\\"http://localhost:8234/static/chunk-ASGLZXIV.js\\\",144.2,2441.4,\\\"other\\\",144.2,2585.6],[\\\"http://localhost:8234/static/chunk-HGNVPWDY.js\\\",144.2,2441.3,\\\"other\\\",144.2,2585.5],[\\\"http://localhost:8234/static/chunk-LD3TGMGW.js\\\",144.2,2447.3,\\\"other\\\",144.2,2591.5],[\\\"http://localhost:8234/static/chunk-PRPBRI2E.js\\\",144.2,2447.5,\\\"other\\\",144.2,2591.7],[\\\"http://localhost:8234/static/chunk-CA6FFFUC.js\\\",144.3,2447.4,\\\"other\\\",144.3,2591.7],[\\\"http://localhost:8234/static/chunk-YBU6RJ5N.js\\\",144.3,2451.1,\\\"other\\\",144.3,2595.4],[\\\"http://localhost:8234/static/chunk-HB4RLT5O.js\\\",144.4,2451.2,\\\"other\\\",144.4,2595.6],[\\\"http://localhost:8234/static/chunk-UJJIEZBP.js\\\",144.4,2452.9,\\\"other\\\",144.4,2597.3],[\\\"http://localhost:8234/static/chunk-OHMX2FMJ.js\\\",144.4,2455.7,\\\"other\\\",144.4,2600.1],[\\\"http://localhost:8234/static/chunk-KXP7VI6L.js\\\",144.4,2456.4,\\\"other\\\",144.4,2600.8],[\\\"http://localhost:8234/static/chunk-EEOHMXMI.js\\\",144.5,2458.2,\\\"other\\\",144.5,2602.7],[\\\"http://localhost:8234/static/chunk-ATKSJCQX.js\\\",144.5,2461,\\\"other\\\",144.5,2605.5],[\\\"http://localhost:8234/static/chunk-CAEMAXLK.js\\\",144.5,2513.2,\\\"other\\\",144.5,2657.7],[\\\"http://localhost:8234/static/chunk-OBAYCOOK.js\\\",144.5,2528.4,\\\"other\\\",144.5,2672.9],[\\\"http://localhost:8234/static/chunk-VJGIAYQC.js\\\",144.6,2466.6,\\\"other\\\",144.6,2611.2]]]}\",\n+                        \"$geoip_city_name\": \"Sydney\",\n+                        \"$geoip_country_name\": \"Australia\",\n+                        \"$geoip_country_code\": \"AU\",\n+                        \"$geoip_continent_name\": \"Oceania\",\n+                        \"$geoip_continent_code\": \"OC\",\n+                        \"$geoip_postal_code\": \"2000\",\n+                        \"$geoip_latitude\": -33.8601,\n+                        \"$geoip_longitude\": 151.2101,\n+                        \"$geoip_time_zone\": \"Australia/Sydney\",\n+                        \"$geoip_subdivision_1_code\": \"NSW\",\n+                        \"$geoip_subdivision_1_name\": \"New South Wales\",\n+                        \"$plugins_succeeded\": [\"GeoIP (1)\"],\n+                        \"$plugins_failed\": [],\n+                        \"$plugins_deferred\": [],\n+                        \"$ip\": \"127.0.0.1\",\n+                        \"$set_once\": {\n+                            \"$initial_os\": \"Mac OS X\",\n+                            \"$initial_browser\": \"Chrome\",\n+                            \"$initial_device_type\": \"Desktop\",\n+                            \"$initial_current_url\": \"http://localhost:8000/login?next=/events\",\n+                            \"$initial_browser_version\": 97,\n+                            \"$initial_referrer\": \"http://localhost:8000/login?next=/events\",\n+                            \"$initial_referring_domain\": \"localhost:8000\"\n+                        }\n                     },\n-                    {\n-                        \"id\": \"017e6d93-9f40-0000-a2c1-3f4fb6452908\",\n-                        \"name\": \"$current_url\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"String\",\n-                        \"is_event_property\": null\n+                    \"event\": \"$pageview\",\n+                    \"timestamp\": \"2022-02-05T18:32:19.609000+00:00\",\n+                    \"person\": {\n+                        \"is_identified\": false,\n+                        \"distinct_ids\": [\"17eca91a0ecd2f-0112e0afae304e-133a6253-16a7f0-17eca91a0eded1\"],\n+                        \"properties\": {}\n                     },\n-                    {\n-                        \"id\": \"017e6d93-9f75-0000-263d-7733368fb5ef\",\n-                        \"name\": \"$device_id\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"String\",\n-                        \"is_event_property\": null\n+                    \"elements\": [],\n+                    \"elements_chain\": \"\"\n+                },\n+                {\n+                    \"id\": \"017ecb27-f71a-0003-1398-9d55d1f2ee19\",\n+                    \"distinct_id\": \"F3RTp6GByAuqUkpsUUjzKTQlmJzIQTFoX44fKup95BC\",\n+                    \"properties\": {\n+                        \"$os\": \"Mac OS X\",\n+                        \"$browser\": \"Chrome\",\n+                        \"$device_type\": \"Desktop\",\n+                        \"$current_url\": \"http://127.0.0.1:8000/web-performance?properties=%5B%7B%22key%22%3A%22%24performance_page_loaded%22%2C%22value%22%3A%222700%22%2C%22operator%22%3A%22gt%22%2C%22type%22%3A%22event%22%7D%2C%7B%22key%22%3A%22%24browser%22%2C%22value%22%3A%22is_set%22%2C%22operator%22%3A%22is_set%22%2C%22type%22%3A%22event%22%7D%5D\",\n+                        \"$host\": \"127.0.0.1:8000\",\n+                        \"$pathname\": \"/web-performance\",\n+                        \"$browser_version\": 97,\n+                        \"$screen_height\": 982,\n+                        \"$screen_width\": 1512,\n+                        \"$viewport_height\": 833,\n+                        \"$viewport_width\": 949,\n+                        \"$lib\": \"web\",\n+                        \"$lib_version\": \"1.17.8\",\n+                        \"$insert_id\": \"5fgjpmcqf2ujoe0z\",\n+                        \"$time\": 1644085900.948,\n+                        \"distinct_id\": \"F3RTp6GByAuqUkpsUUjzKTQlmJzIQTFoX44fKup95BC\",\n+                        \"$device_id\": \"17eca8c073990-02b888033df436-133a6253-16a7f0-17eca8c073a11b6\",\n+                        \"$user_id\": \"F3RTp6GByAuqUkpsUUjzKTQlmJzIQTFoX44fKup95BC\",\n+                        \"$initial_referrer\": \"http://127.0.0.1:8000/login\",\n+                        \"$initial_referring_domain\": \"127.0.0.1:8000\",\n+                        \"$referrer\": \"http://127.0.0.1:8000/web-performance?properties=%5B%7B%22key%22%3A%22%24performance_page_loaded%22%2C%22value%22%3A%222700%22%2C%22operator%22%3A%22gt%22%2C%22type%22%3A%22event%22%7D%5D\",\n+                        \"$referring_domain\": \"127.0.0.1:8000\",\n+                        \"is_demo_project\": false,\n+                        \"$groups\": {\n+                            \"project\": \"017eca8c-03d9-0000-45ef-b1d4ecab7048\",\n+                            \"organization\": \"017eca8b-fdce-0000-6923-f64fc0d0edac\",\n+                            \"instance\": \"http://localhost:8000\"\n+                        },\n+                        \"posthog_version\": \"1.32.0\",\n+                        \"realm\": \"hosted-clickhouse\",\n+                        \"email_service_available\": false,\n+                        \"$session_recording_enabled\": false,\n+                        \"$active_feature_flags\": [\"hackathon-apm\", \"6619-query-events-by-date\"],\n+                        \"$feature/hackathon-apm\": true,\n+                        \"$feature/6619-query-events-by-date\": true,\n+                        \"token\": \"phc_k6AJ5lImHZHzO7uBX5PBWPL0EmSrHEATJfaXOWREOAJ\",\n+                        \"$session_id\": \"17ecb1b70dcd31-0d4473129efd62-133a6253-16a7f0-17ecb1b70ddb94\",\n+                        \"$window_id\": \"17ecb1b70de1df-04e23a807879ce-133a6253-16a7f0-17ecb1b70dfdf3\",\n+                        \"$performance_page_loaded\": 2930.8,\n+                        \"$performance_raw\": \"{\\\"navigation\\\":[[\\\"name\\\",\\\"entryType\\\",\\\"duration\\\",\\\"initiatorType\\\",\\\"fetchStart\\\",\\\"domainLookupStart\\\",\\\"domainLookupEnd\\\",\\\"connectStart\\\",\\\"connectEnd\\\",\\\"requestStart\\\",\\\"responseStart\\\",\\\"responseEnd\\\",\\\"transferSize\\\",\\\"encodedBodySize\\\",\\\"decodedBodySize\\\",\\\"unloadEventStart\\\",\\\"unloadEventEnd\\\",\\\"domInteractive\\\",\\\"domContentLoadedEventStart\\\",\\\"domContentLoadedEventEnd\\\",\\\"domComplete\\\",\\\"loadEventStart\\\",\\\"loadEventEnd\\\",\\\"type\\\"],[[\\\"http://127.0.0.1:8000/web-performance?properties=%5B%7B%22key%22%3A%22%24performance_page_loaded%22%2C%22value%22%3A%222700%22%2C%22operator%22%3A%22gt%22%2C%22type%22%3A%22event%22%7D%5D\\\",\\\"navigation\\\",2930.8,\\\"navigation\\\",5.7,5.7,5.7,5.7,5.7,56.1,520.5,550.3,34955,34655,34655,559.3,573.6,846.4,846.4,853.8,2926.5,2930.7,2930.8,\\\"reload\\\"]]],\\\"paint\\\":[[\\\"name\\\",\\\"entryType\\\",\\\"startTime\\\"],[[\\\"first-paint\\\",\\\"paint\\\",974.9],[\\\"first-contentful-paint\\\",\\\"paint\\\",974.9]]],\\\"resource\\\":[[\\\"name\\\",\\\"startTime\\\",\\\"duration\\\",\\\"initiatorType\\\",\\\"fetchStart\\\",\\\"responseEnd\\\"],[[\\\"http://localhost:8234/static/index.css?t=1644085770266\\\",782.2,1764.4,\\\"link\\\",782.2,2546.6],[\\\"http://localhost:8234/static/index.js?t=1644085770266\\\",782.6,1737.4,\\\"other\\\",782.6,2520],[\\\"http://localhost:8234/static/chunk-YPFMJDM4.js\\\",783.1,1731,\\\"other\\\",783.1,2514.1],[\\\"http://localhost:8234/static/chunk-XF34ZH23.js\\\",783.2,1763.4,\\\"other\\\",783.2,2546.6],[\\\"http://localhost:8234/static/chunk-5MMMF5K7.js\\\",783.5,1729.4,\\\"other\\\",783.5,2512.9],[\\\"http://localhost:8234/static/chunk-INAGIC7G.js\\\",785.2,1754.1,\\\"other\\\",785.2,2539.3],[\\\"http://localhost:8234/static/chunk-I3Q2CDVZ.js\\\",785.5,1753.5,\\\"other\\\",785.5,2539],[\\\"http://localhost:8234/static/chunk-R2J2AFYA.js\\\",785.7,1750.6,\\\"other\\\",785.7,2536.3],[\\\"http://localhost:8234/static/chunk-LRA7UZ2C.js\\\",789.6,1747.3,\\\"other\\\",789.6,2536.9],[\\\"http://localhost:8234/static/chunk-JABUHWMZ.js\\\",789.8,1750.7,\\\"other\\\",789.8,2540.5],[\\\"http://localhost:8234/static/chunk-MILJQ7RK.js\\\",789.9,1764.7,\\\"other\\\",789.9,2554.6],[\\\"http://localhost:8234/static/chunk-A3WPL726.js\\\",790.1,1760.2,\\\"other\\\",790.1,2550.3],[\\\"http://localhost:8234/static/chunk-OZGU6W75.js\\\",790.2,1764,\\\"other\\\",790.2,2554.2],[\\\"http://localhost:8234/static/chunk-5WYOWOVT.js\\\",790.3,1764.7,\\\"other\\\",790.3,2555],[\\\"http://localhost:8234/static/chunk-BP26XGN6.js\\\",790.5,1773.5,\\\"other\\\",790.5,2564],[\\\"http://localhost:8234/static/chunk-6SFOWN5U.js\\\",790.7,1790.4,\\\"other\\\",790.7,2581.1],[\\\"http://localhost:8234/static/chunk-25TTUT3N.js\\\",790.8,1791.4,\\\"other\\\",790.8,2582.2],[\\\"http://localhost:8234/static/chunk-UDRKU2XS.js\\\",791,1790.7,\\\"other\\\",791,2581.7],[\\\"http://localhost:8234/static/chunk-KCJGXE5M.js\\\",791.4,1783.8,\\\"other\\\",791.4,2575.2],[\\\"http://localhost:8234/static/chunk-HED4XUT2.js\\\",791.6,1921.5,\\\"other\\\",791.6,2713.1],[\\\"http://localhost:8234/static/chunk-QGGM6NUR.js\\\",799.7,1922.1,\\\"other\\\",799.7,2721.8],[\\\"http://localhost:8234/static/chunk-4YYGW3TC.js\\\",802.4,1920.3,\\\"other\\\",802.4,2722.7],[\\\"http://localhost:8234/static/chunk-MQF2FLOV.js\\\",803.3,1892.4,\\\"other\\\",803.3,2695.7],[\\\"http://localhost:8234/static/chunk-EOM6WIAG.js\\\",803.5,1772.6,\\\"other\\\",803.5,2576.1],[\\\"http://localhost:8234/static/chunk-AXH4YZAR.js\\\",803.8,1919.1,\\\"other\\\",803.8,2722.9],[\\\"http://localhost:8234/static/chunk-FQHAJZGM.js\\\",804.1,1780.9,\\\"other\\\",804.1,2585],[\\\"http://localhost:8234/static/chunk-RQJ43M5U.js\\\",804.2,1816,\\\"other\\\",804.2,2620.2],[\\\"http://localhost:8234/static/chunk-XPGE43VJ.js\\\",804.4,1826.7,\\\"other\\\",804.4,2631.1],[\\\"http://localhost:8234/static/chunk-L4IYGZIG.js\\\",804.5,1920.7,\\\"other\\\",804.5,2725.2],[\\\"http://localhost:8234/static/chunk-IGTMCF24.js\\\",804.7,1920.6,\\\"other\\\",804.7,2725.3],[\\\"http://localhost:8234/static/chunk-AMOE3OJU.js\\\",804.9,1826,\\\"other\\\",804.9,2630.9],[\\\"http://localhost:8234/static/chunk-BO4VDBQ6.js\\\",805.1,1950,\\\"other\\\",805.1,2755.1],[\\\"http://localhost:8234/static/chunk-QE52CDVG.js\\\",805.3,1831,\\\"other\\\",805.3,2636.3],[\\\"http://localhost:8234/static/chunk-VHSG55N2.js\\\",805.4,1825.5,\\\"other\\\",805.4,2630.9],[\\\"http://localhost:8234/static/chunk-4ZUV5LND.js\\\",807.2,1829.2,\\\"other\\\",807.2,2636.4],[\\\"http://localhost:8234/static/chunk-ASGLZXIV.js\\\",809,1888.2,\\\"other\\\",809,2697.2],[\\\"http://localhost:8234/static/chunk-HGNVPWDY.js\\\",809.2,1873.1,\\\"other\\\",809.2,2682.3],[\\\"http://localhost:8234/static/chunk-LD3TGMGW.js\\\",809.3,1865.4,\\\"other\\\",809.3,2674.7],[\\\"http://localhost:8234/static/chunk-PRPBRI2E.js\\\",809.5,1873.4,\\\"other\\\",809.5,2682.9],[\\\"http://localhost:8234/static/chunk-CA6FFFUC.js\\\",809.7,1873,\\\"other\\\",809.7,2682.7],[\\\"http://localhost:8234/static/chunk-YBU6RJ5N.js\\\",809.8,1891.3,\\\"other\\\",809.8,2701.1],[\\\"http://localhost:8234/static/chunk-HB4RLT5O.js\\\",809.9,1894.9,\\\"other\\\",809.9,2704.8],[\\\"http://localhost:8234/static/chunk-UJJIEZBP.js\\\",810.1,1894.9,\\\"other\\\",810.1,2705],[\\\"http://localhost:8234/static/chunk-KXP7VI6L.js\\\",814.7,1889.5,\\\"other\\\",814.7,2704.2],[\\\"http://localhost:8234/static/chunk-OHMX2FMJ.js\\\",815.1,1890.5,\\\"other\\\",815.1,2705.6],[\\\"http://localhost:8234/static/chunk-EEOHMXMI.js\\\",815.4,1893.2,\\\"other\\\",815.4,2708.6],[\\\"http://localhost:8234/static/chunk-ATKSJCQX.js\\\",815.6,1915,\\\"other\\\",815.6,2730.6],[\\\"http://localhost:8234/static/chunk-CAEMAXLK.js\\\",815.7,2035.3,\\\"other\\\",815.7,2851],[\\\"http://localhost:8234/static/chunk-OBAYCOOK.js\\\",815.9,2073.6,\\\"other\\\",815.9,2889.5],[\\\"http://localhost:8234/static/chunk-VJGIAYQC.js\\\",816,1945.6,\\\"other\\\",816,2761.6],[\\\"http://127.0.0.1:8000/e/?ip=1&_=1644085891984\\\",3045.7,181,\\\"xmlhttprequest\\\",3045.7,3226.7],[\\\"http://127.0.0.1:8000/decide/?v=2&ip=1&_=1644085891985\\\",3047,412.4,\\\"xmlhttprequest\\\",3047,3459.4],[\\\"http://127.0.0.1:8000/engage/?ip=1&_=1644085892004\\\",3065.9,320.1,\\\"xmlhttprequest\\\",3065.9,3386],[\\\"http://localhost:8234/static/WebPerformance-L6IWRWOV.js\\\",3092.8,44.5,\\\"other\\\",3092.8,3137.3],[\\\"http://127.0.0.1:8000/static/icons/favicon-dev.ico?v=2021-04-29\\\",3096.8,239.9,\\\"other\\\",3096.8,3336.7],[\\\"http://127.0.0.1:8000/static/site.webmanifest?v=2021-04-29\\\",3146.8,252.2,\\\"other\\\",3146.8,3399],[\\\"http://localhost:8234/static/chunk-F5T7ECZG.js\\\",3228.5,29.9,\\\"other\\\",3228.5,3258.4],[\\\"http://localhost:8234/static/chunk-ZYLXYU4K.js\\\",3228.8,24.9,\\\"other\\\",3228.8,3253.7],[\\\"http://localhost:8234/static/chunk-Y4DLHNYM.js\\\",3228.9,27.4,\\\"other\\\",3228.9,3256.3],[\\\"http://localhost:8234/static/chunk-ZCRZKRW7.js\\\",3229.1,27.5,\\\"other\\\",3229.1,3256.6],[\\\"http://localhost:8234/static/chunk-YQPLUSZK.js\\\",3229.1,24.8,\\\"other\\\",3229.1,3253.9],[\\\"http://localhost:8234/static/chunk-AVSAWBKG.js\\\",3229.2,36.3,\\\"other\\\",3229.2,3265.5],[\\\"http://localhost:8234/static/chunk-NPPZ6HM3.js\\\",3229.7,46.6,\\\"other\\\",3229.7,3276.3],[\\\"http://localhost:8234/static/chunk-OSKNBHDN.js\\\",3229.8,49.3,\\\"other\\\",3229.8,3279.1],[\\\"http://localhost:8234/static/chunk-T7SYQIYY.js\\\",3230,45.2,\\\"other\\\",3230,3275.2],[\\\"http://localhost:8234/static/chunk-SGDHQOX6.js\\\",3230.1,45.6,\\\"other\\\",3230.1,3275.7],[\\\"http://localhost:8234/static/chunk-H2BXVWDT.js\\\",3230.2,60.2,\\\"other\\\",3230.2,3290.4],[\\\"http://127.0.0.1:8000/api/projects/1/events?properties=%5B%7B%22key%22%3A%22%24performance_page_loaded%22%2C%22operator%22%3A%22is_set%22%2C%22type%22%3A%22event%22%7D%2C%7B%22key%22%3A%22%24performance_raw%22%2C%22operator%22%3A%22is_set%22%2C%22type%22%3A%22event%22%7D%5D&limit=10&orderBy=%5B%22-timestamp%22%5D\\\",3300.5,689.7,\\\"fetch\\\",3300.5,3990.2],[\\\"http://127.0.0.1:8000/api/projects/1/events?0=%7B%22key%22%3A%22%24performance_page_loaded%22%2C%22value%22%3A%222700%22%2C%22operator%22%3A%22gt%22%2C%22type%22%3A%22event%22%7D&properties=%5B%7B%22key%22%3A%22%24performance_page_loaded%22%2C%22operator%22%3A%22is_set%22%2C%22type%22%3A%22event%22%7D%2C%7B%22key%22%3A%22%24performance_raw%22%2C%22operator%22%3A%22is_set%22%2C%22type%22%3A%22event%22%7D%5D&limit=10&orderBy=%5B%22-timestamp%22%5D\\\",3301.2,710.6,\\\"fetch\\\",3301.2,4011.8],[\\\"http://localhost:8234/static/toolbar.js?_ts=1644085892400\\\",3461.1,135.1,\\\"script\\\",3461.1,3596.2],[\\\"http://127.0.0.1:8000/api/projects/1/actions/\\\",3467.7,231.1,\\\"fetch\\\",3467.7,3698.8],[\\\"http://127.0.0.1:8000/api/projects/1/annotations/?scope=organization&deleted=false\\\",3468.7,230.6,\\\"fetch\\\",3468.7,3699.3],[\\\"http://127.0.0.1:8000/api/projects/1/cohorts?limit=600\\\",3469.5,213.4,\\\"fetch\\\",3469.5,3682.9],[\\\"http://127.0.0.1:8000/api/projects/1/event_definitions/?limit=5000\\\",3470.7,560.9,\\\"fetch\\\",3470.7,4031.6],[\\\"http://127.0.0.1:8000/api/person/properties/\\\",3471.4,425.3,\\\"fetch\\\",3471.4,3896.7],[\\\"http://127.0.0.1:8000/api/projects/@current/property_definitions/?limit=5000\\\",3472.5,476.7,\\\"fetch\\\",3472.5,3949.2],[\\\"http://127.0.0.1:8000/api/organizations/@current/members/?limit=200\\\",3477.8,484,\\\"fetch\\\",3477.8,3961.8],[\\\"http://127.0.0.1:8000/api/instance_status/\\\",3478.8,1060.3,\\\"fetch\\\",3478.8,4539.1],[\\\"https://update.posthog.com/\\\",3479.9,124.6,\\\"fetch\\\",3479.9,3604.5],[\\\"http://127.0.0.1:8000/api/organizations/@current/invites/\\\",3481.7,700.1,\\\"fetch\\\",3481.7,4181.8],[\\\"http://127.0.0.1:8000/api/personal_api_keys/\\\",3490.8,629.4,\\\"fetch\\\",3490.8,4120.2],[\\\"http://127.0.0.1:8000/api/license/\\\",3497.6,639.2,\\\"fetch\\\",3497.6,4136.8],[\\\"https://www.gravatar.com/avatar/2e7d95b60efbe947f71009a1af1ba8d0?s=96&d=404\\\",3560.6,133.8,\\\"img\\\",3560.6,3694.4],[\\\"http://127.0.0.1:8000/api/projects/1/dashboards/\\\",3570.7,646.8,\\\"fetch\\\",3570.7,4217.5],[\\\"http://127.0.0.1:8000/api/projects/@current/feature_flags/my_flags?groups=%7B%22project%22%3A%22017eca8c-03d9-0000-45ef-b1d4ecab7048%22%2C%22organization%22%3A%22017eca8b-fdce-0000-6923-f64fc0d0edac%22%2C%22instance%22%3A%22http%3A%2F%2Flocalhost%3A8000%22%7D&temporary_token\\\",3714.2,523.6,\\\"fetch\\\",3714.2,4237.8],[\\\"http://localhost:8234/static/toolbar.css\\\",3732.4,79.6,\\\"link\\\",3732.4,3812],[\\\"http://127.0.0.1:8000/e/?compression=gzip-js&ip=1&_=1644085894987\\\",6048.6,54.6,\\\"xmlhttprequest\\\",6048.6,6103.2],[\\\"http://127.0.0.1:8000/api/projects/1/property_definitions?search=&limit=100&offset=0\\\",7741.7,50.2,\\\"fetch\\\",7741.7,7791.9],[\\\"http://localhost:8234/static/assets/posthog-icon-FDVNZJ5Z.svg\\\",7821.9,4,\\\"css\\\",7821.9,7825.9],[\\\"http://127.0.0.1:8000/e/?compression=gzip-js&ip=1&_=1644085897991\\\",9052.6,30.7,\\\"xmlhttprequest\\\",9052.6,9083.3],[\\\"http://127.0.0.1:8000/api/event/values/?key=$browser\\\",9678.1,74.3,\\\"fetch\\\",9678.1,9752.4]]]}\",\n+                        \"$geoip_city_name\": \"Sydney\",\n+                        \"$geoip_country_name\": \"Australia\",\n+                        \"$geoip_country_code\": \"AU\",\n+                        \"$geoip_continent_name\": \"Oceania\",\n+                        \"$geoip_continent_code\": \"OC\",\n+                        \"$geoip_postal_code\": \"2000\",\n+                        \"$geoip_latitude\": -33.8601,\n+                        \"$geoip_longitude\": 151.2101,\n+                        \"$geoip_time_zone\": \"Australia/Sydney\",\n+                        \"$geoip_subdivision_1_code\": \"NSW\",\n+                        \"$geoip_subdivision_1_name\": \"New South Wales\",\n+                        \"$plugins_succeeded\": [\"GeoIP (1)\"],\n+                        \"$plugins_failed\": [],\n+                        \"$plugins_deferred\": [],\n+                        \"$ip\": \"127.0.0.1\",\n+                        \"$set_once\": {\n+                            \"$initial_os\": \"Mac OS X\",\n+                            \"$initial_browser\": \"Chrome\",\n+                            \"$initial_device_type\": \"Desktop\",\n+                            \"$initial_current_url\": \"http://127.0.0.1:8000/web-performance?properties=%5B%7B%22key%22%3A%22%24performance_page_loaded%22%2C%22value%22%3A%222700%22%2C%22operator%22%3A%22gt%22%2C%22type%22%3A%22event%22%7D%2C%7B%22key%22%3A%22%24browser%22%2C%22value%22%3A%22is_set%22%2C%22operator%22%3A%22is_set%22%2C%22type%22%3A%22event%22%7D%5D\",\n+                            \"$initial_browser_version\": 97,\n+                            \"$initial_referrer\": \"http://127.0.0.1:8000/web-performance?properties=%5B%7B%22key%22%3A%22%24performance_page_loaded%22%2C%22value%22%3A%222700%22%2C%22operator%22%3A%22gt%22%2C%22type%22%3A%22event%22%7D%5D\",\n+                            \"$initial_referring_domain\": \"127.0.0.1:8000\"\n+                        },\n+                        \"$group_0\": \"017eca8c-03d9-0000-45ef-b1d4ecab7048\",\n+                        \"$group_1\": \"017eca8b-fdce-0000-6923-f64fc0d0edac\",\n+                        \"$group_2\": \"http://localhost:8000\"\n                     },\n-                    {\n-                        \"id\": \"017e6d93-9f3c-0000-e368-804704ca69ac\",\n-                        \"name\": \"$device_type\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"String\",\n-                        \"is_event_property\": null\n+                    \"event\": \"$pageview\",\n+                    \"timestamp\": \"2022-02-05T18:31:40.998000+00:00\",\n+                    \"person\": {\n+                        \"is_identified\": true,\n+                        \"distinct_ids\": [\"F3RTp6GByAuqUkpsUUjzKTQlmJzIQTFoX44fKup95BC\"],\n+                        \"properties\": {\n+                            \"email\": \"paul@posthog.com\"\n+                        }\n+                    },\n+                    \"elements\": [],\n+                    \"elements_chain\": \"\"\n+                },\n+                {\n+                    \"id\": \"017ecb27-e1a1-0000-611a-8f026e6a6e5a\",\n+                    \"distinct_id\": \"17eca91a0ecd2f-0112e0afae304e-133a6253-16a7f0-17eca91a0eded1\",\n+                    \"properties\": {\n+                        \"$os\": \"Mac OS X\",\n+                        \"$browser\": \"Chrome\",\n+                        \"$device_type\": \"Desktop\",\n+                        \"$current_url\": \"http://localhost:8000/login?next=/events\",\n+                        \"$host\": \"localhost:8000\",\n+                        \"$pathname\": \"/login\",\n+                        \"$browser_version\": 97,\n+                        \"$screen_height\": 982,\n+                        \"$screen_width\": 1512,\n+                        \"$viewport_height\": 865,\n+                        \"$viewport_width\": 1512,\n+                        \"$lib\": \"web\",\n+                        \"$lib_version\": \"1.17.8\",\n+                        \"$insert_id\": \"23c5ek9fz2x2fnuf\",\n+                        \"$time\": 1644085892.467,\n+                        \"distinct_id\": \"17eca91a0ecd2f-0112e0afae304e-133a6253-16a7f0-17eca91a0eded1\",\n+                        \"$device_id\": \"17eca91a0ecd2f-0112e0afae304e-133a6253-16a7f0-17eca91a0eded1\",\n+                        \"$initial_referrer\": \"http://localhost:8000/login?next=/events\",\n+                        \"$initial_referring_domain\": \"localhost:8000\",\n+                        \"$referrer\": \"http://localhost:8000/login?next=/events\",\n+                        \"$referring_domain\": \"localhost:8000\",\n+                        \"$session_recording_enabled\": false,\n+                        \"$active_feature_flags\": [\"hackathon-apm\", \"6619-query-events-by-date\"],\n+                        \"$feature/hackathon-apm\": true,\n+                        \"$feature/6619-query-events-by-date\": true,\n+                        \"realm\": \"hosted-clickhouse\",\n+                        \"email_service_available\": false,\n+                        \"token\": \"phc_k6AJ5lImHZHzO7uBX5PBWPL0EmSrHEATJfaXOWREOAJ\",\n+                        \"$session_id\": \"17ecb1b6d551661-037995671a4a37-133a6253-16a7f0-17ecb1b6d561929\",\n+                        \"$window_id\": \"17ecb1b6d59179-07eda9364d2646-133a6253-16a7f0-17ecb1b6d5af1d\",\n+                        \"$performance_page_loaded\": 3053.7,\n+                        \"$performance_raw\": \"{\\\"navigation\\\":[[\\\"name\\\",\\\"entryType\\\",\\\"duration\\\",\\\"initiatorType\\\",\\\"fetchStart\\\",\\\"domainLookupStart\\\",\\\"domainLookupEnd\\\",\\\"connectStart\\\",\\\"connectEnd\\\",\\\"requestStart\\\",\\\"responseStart\\\",\\\"responseEnd\\\",\\\"transferSize\\\",\\\"encodedBodySize\\\",\\\"decodedBodySize\\\",\\\"unloadEventStart\\\",\\\"unloadEventEnd\\\",\\\"domInteractive\\\",\\\"domContentLoadedEventStart\\\",\\\"domContentLoadedEventEnd\\\",\\\"domComplete\\\",\\\"loadEventStart\\\",\\\"loadEventEnd\\\",\\\"type\\\"],[[\\\"http://localhost:8000/login?next=/events\\\",\\\"navigation\\\",3053.7,\\\"navigation\\\",1.4,1.4,1.4,1.4,1.4,8.7,130.6,131.6,21151,20851,20851,138.7,148,204.2,204.3,204.3,3053.7,3053.7,3053.7,\\\"reload\\\"]]],\\\"paint\\\":[],\\\"resource\\\":[[\\\"name\\\",\\\"startTime\\\",\\\"duration\\\",\\\"initiatorType\\\",\\\"fetchStart\\\",\\\"responseEnd\\\"],[[\\\"http://localhost:8234/static/index.css?t=1644085770266\\\",198.5,2354.2,\\\"link\\\",198.5,2552.7],[\\\"http://localhost:8234/static/index.js?t=1644085770266\\\",199.1,2321.4,\\\"other\\\",199.1,2520.5],[\\\"http://localhost:8234/static/chunk-YPFMJDM4.js\\\",201.2,2309.9,\\\"other\\\",201.2,2511.1],[\\\"http://localhost:8234/static/chunk-XF34ZH23.js\\\",201.3,2332.6,\\\"other\\\",201.3,2533.9],[\\\"http://localhost:8234/static/chunk-5MMMF5K7.js\\\",201.5,2342.5,\\\"other\\\",201.5,2544],[\\\"http://localhost:8234/static/chunk-INAGIC7G.js\\\",201.5,2373.4,\\\"other\\\",201.5,2574.9],[\\\"http://localhost:8234/static/chunk-I3Q2CDVZ.js\\\",201.5,2380.5,\\\"other\\\",201.5,2582],[\\\"http://localhost:8234/static/chunk-R2J2AFYA.js\\\",201.5,2380.8,\\\"other\\\",201.5,2582.3],[\\\"http://localhost:8234/static/chunk-LRA7UZ2C.js\\\",201.8,2424.2,\\\"other\\\",201.8,2626],[\\\"http://localhost:8234/static/chunk-JABUHWMZ.js\\\",201.8,2428.9,\\\"other\\\",201.8,2630.7],[\\\"http://localhost:8234/static/chunk-MILJQ7RK.js\\\",201.8,2429.3,\\\"other\\\",201.8,2631.1],[\\\"http://localhost:8234/static/chunk-A3WPL726.js\\\",202,2494,\\\"other\\\",202,2696],[\\\"http://localhost:8234/static/chunk-OZGU6W75.js\\\",202,2494.1,\\\"other\\\",202,2696.1],[\\\"http://localhost:8234/static/chunk-5WYOWOVT.js\\\",202,2497.7,\\\"other\\\",202,2699.7],[\\\"http://localhost:8234/static/chunk-BP26XGN6.js\\\",202,2521.5,\\\"other\\\",202,2723.5],[\\\"http://localhost:8234/static/chunk-6SFOWN5U.js\\\",202.1,2518.6,\\\"other\\\",202.1,2720.7],[\\\"http://localhost:8234/static/chunk-25TTUT3N.js\\\",202.1,2523.8,\\\"other\\\",202.1,2725.9],[\\\"http://localhost:8234/static/chunk-UDRKU2XS.js\\\",202.1,2576.5,\\\"other\\\",202.1,2778.6],[\\\"http://localhost:8234/static/chunk-KCJGXE5M.js\\\",202.2,2558.9,\\\"other\\\",202.2,2761.1],[\\\"http://localhost:8234/static/chunk-HED4XUT2.js\\\",202.2,2593.5,\\\"other\\\",202.2,2795.7],[\\\"http://localhost:8234/static/chunk-QGGM6NUR.js\\\",202.2,2594.6,\\\"other\\\",202.2,2796.8],[\\\"http://localhost:8234/static/chunk-4YYGW3TC.js\\\",202.3,2615.7,\\\"other\\\",202.3,2818],[\\\"http://localhost:8234/static/chunk-MQF2FLOV.js\\\",202.3,2616.4,\\\"other\\\",202.3,2818.7],[\\\"http://localhost:8234/static/chunk-EOM6WIAG.js\\\",202.3,2620.4,\\\"other\\\",202.3,2822.7],[\\\"http://localhost:8234/static/chunk-AXH4YZAR.js\\\",202.4,2631.7,\\\"other\\\",202.4,2834.1],[\\\"http://localhost:8234/static/chunk-FQHAJZGM.js\\\",202.6,2633.6,\\\"other\\\",202.6,2836.2],[\\\"http://localhost:8234/static/chunk-RQJ43M5U.js\\\",202.6,2646.2,\\\"other\\\",202.6,2848.8],[\\\"http://localhost:8234/static/chunk-L4IYGZIG.js\\\",202.6,2649.2,\\\"other\\\",202.6,2851.8],[\\\"http://localhost:8234/static/chunk-XPGE43VJ.js\\\",202.6,2648.9,\\\"other\\\",202.6,2851.5],[\\\"http://localhost:8234/static/chunk-IGTMCF24.js\\\",202.7,2658.1,\\\"other\\\",202.7,2860.8],[\\\"http://localhost:8234/static/chunk-BO4VDBQ6.js\\\",202.7,2659.1,\\\"other\\\",202.7,2861.8],[\\\"http://localhost:8234/static/chunk-AMOE3OJU.js\\\",202.7,2659,\\\"other\\\",202.7,2861.7],[\\\"http://localhost:8234/static/chunk-QE52CDVG.js\\\",202.7,2672,\\\"other\\\",202.7,2874.7],[\\\"http://localhost:8234/static/chunk-VHSG55N2.js\\\",202.8,2669.8,\\\"other\\\",202.8,2872.6],[\\\"http://localhost:8234/static/chunk-4ZUV5LND.js\\\",202.8,2672.4,\\\"other\\\",202.8,2875.2],[\\\"http://localhost:8234/static/chunk-ASGLZXIV.js\\\",202.8,2675.3,\\\"other\\\",202.8,2878.1],[\\\"http://localhost:8234/static/chunk-HGNVPWDY.js\\\",202.8,2675.7,\\\"other\\\",202.8,2878.5],[\\\"http://localhost:8234/static/chunk-LD3TGMGW.js\\\",203,2676.8,\\\"other\\\",203,2879.8],[\\\"http://localhost:8234/static/chunk-CA6FFFUC.js\\\",203,2679.4,\\\"other\\\",203,2882.4],[\\\"http://localhost:8234/static/chunk-PRPBRI2E.js\\\",203,2680.2,\\\"other\\\",203,2883.2],[\\\"http://localhost:8234/static/chunk-YBU6RJ5N.js\\\",203.1,2680.3,\\\"other\\\",203.1,2883.4],[\\\"http://localhost:8234/static/chunk-HB4RLT5O.js\\\",203.1,2693.4,\\\"other\\\",203.1,2896.5],[\\\"http://localhost:8234/static/chunk-UJJIEZBP.js\\\",203.1,2693.4,\\\"other\\\",203.1,2896.5],[\\\"http://localhost:8234/static/chunk-KXP7VI6L.js\\\",203.1,2693.7,\\\"other\\\",203.1,2896.8],[\\\"http://localhost:8234/static/chunk-OHMX2FMJ.js\\\",203.2,2698.1,\\\"other\\\",203.2,2901.3],[\\\"http://localhost:8234/static/chunk-EEOHMXMI.js\\\",203.2,2701.1,\\\"other\\\",203.2,2904.3],[\\\"http://localhost:8234/static/chunk-ATKSJCQX.js\\\",203.2,2702.1,\\\"other\\\",203.2,2905.3],[\\\"http://localhost:8234/static/chunk-CAEMAXLK.js\\\",203.2,2789.3,\\\"other\\\",203.2,2992.5],[\\\"http://localhost:8234/static/chunk-VJGIAYQC.js\\\",203.3,2716.8,\\\"other\\\",203.3,2920.1],[\\\"http://localhost:8234/static/chunk-OBAYCOOK.js\\\",203.3,2825.3,\\\"other\\\",203.3,3028.6],[\\\"http://localhost:8000/e/?ip=1&_=1644085892155\\\",3216.6,140.9,\\\"xmlhttprequest\\\",3216.6,3357.5],[\\\"http://localhost:8000/decide/?v=2&ip=1&_=1644085892155\\\",3216.8,180.6,\\\"xmlhttprequest\\\",3216.8,3397.4],[\\\"http://localhost:8234/static/chunk-GYN42MDT.js\\\",3235.5,17.7,\\\"other\\\",3235.5,3253.2],[\\\"http://localhost:8234/static/chunk-NJ2XRYRN.js\\\",3235.7,29.2,\\\"other\\\",3235.7,3264.9],[\\\"http://localhost:8234/static/chunk-YSA3HNSV.js\\\",3235.9,24.2,\\\"other\\\",3235.9,3260.1],[\\\"http://localhost:8234/static/chunk-LKL2K3VW.js\\\",3235.9,29.2,\\\"other\\\",3235.9,3265.1],[\\\"http://localhost:8234/static/Login-RWDRPZ66.js\\\",3235.9,41,\\\"other\\\",3235.9,3276.9],[\\\"http://localhost:8000/static/icons/favicon-dev.ico?v=2021-04-29\\\",3238.4,142,\\\"other\\\",3238.4,3380.4],[\\\"http://localhost:8000/static/site.webmanifest?v=2021-04-29\\\",3239.9,110.7,\\\"other\\\",3239.9,3350.6]]]}\",\n+                        \"$geoip_city_name\": \"Sydney\",\n+                        \"$geoip_country_name\": \"Australia\",\n+                        \"$geoip_country_code\": \"AU\",\n+                        \"$geoip_continent_name\": \"Oceania\",\n+                        \"$geoip_continent_code\": \"OC\",\n+                        \"$geoip_postal_code\": \"2000\",\n+                        \"$geoip_latitude\": -33.8601,\n+                        \"$geoip_longitude\": 151.2101,\n+                        \"$geoip_time_zone\": \"Australia/Sydney\",\n+                        \"$geoip_subdivision_1_code\": \"NSW\",\n+                        \"$geoip_subdivision_1_name\": \"New South Wales\",\n+                        \"$plugins_succeeded\": [\"GeoIP (1)\"],\n+                        \"$plugins_failed\": [],\n+                        \"$plugins_deferred\": [],\n+                        \"$ip\": \"127.0.0.1\",\n+                        \"$set_once\": {\n+                            \"$initial_os\": \"Mac OS X\",\n+                            \"$initial_browser\": \"Chrome\",\n+                            \"$initial_device_type\": \"Desktop\",\n+                            \"$initial_current_url\": \"http://localhost:8000/login?next=/events\",\n+                            \"$initial_browser_version\": 97,\n+                            \"$initial_referrer\": \"http://localhost:8000/login?next=/events\",\n+                            \"$initial_referring_domain\": \"localhost:8000\"\n+                        }\n                     },\n-                    {\n-                        \"id\": \"017e6d93-a835-0000-fa3a-d974b266bccc\",\n-                        \"name\": \"$event_type\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"String\",\n-                        \"is_event_property\": null\n+                    \"event\": \"$pageview\",\n+                    \"timestamp\": \"2022-02-05T18:31:32.480000+00:00\",\n+                    \"person\": {\n+                        \"is_identified\": false,\n+                        \"distinct_ids\": [\"17eca91a0ecd2f-0112e0afae304e-133a6253-16a7f0-17eca91a0eded1\"],\n+                        \"properties\": {}\n                     },\n-                    {\n-                        \"id\": \"017e6df2-8835-0000-35a9-920302882586\",\n-                        \"name\": \"$feature/6619-query-events-by-date\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                    \"elements\": [],\n+                    \"elements_chain\": \"\"\n+                },\n+                {\n+                    \"id\": \"017ecb27-df6c-0000-ac57-26813f954ee6\",\n+                    \"distinct_id\": \"F3RTp6GByAuqUkpsUUjzKTQlmJzIQTFoX44fKup95BC\",\n+                    \"properties\": {\n+                        \"$os\": \"Mac OS X\",\n+                        \"$browser\": \"Chrome\",\n+                        \"$device_type\": \"Desktop\",\n+                        \"$current_url\": \"http://127.0.0.1:8000/web-performance?properties=%5B%7B%22key%22%3A%22%24performance_page_loaded%22%2C%22value%22%3A%222700%22%2C%22operator%22%3A%22gt%22%2C%22type%22%3A%22event%22%7D%5D\",\n+                        \"$host\": \"127.0.0.1:8000\",\n+                        \"$pathname\": \"/web-performance\",\n+                        \"$browser_version\": 97,\n+                        \"$screen_height\": 982,\n+                        \"$screen_width\": 1512,\n+                        \"$viewport_height\": 833,\n+                        \"$viewport_width\": 949,\n+                        \"$lib\": \"web\",\n+                        \"$lib_version\": \"1.17.8\",\n+                        \"$insert_id\": \"vmnzfpn9zoinanq4\",\n+                        \"$time\": 1644085892.293,\n+                        \"distinct_id\": \"F3RTp6GByAuqUkpsUUjzKTQlmJzIQTFoX44fKup95BC\",\n+                        \"$device_id\": \"17eca8c073990-02b888033df436-133a6253-16a7f0-17eca8c073a11b6\",\n+                        \"$user_id\": \"F3RTp6GByAuqUkpsUUjzKTQlmJzIQTFoX44fKup95BC\",\n+                        \"$initial_referrer\": \"http://127.0.0.1:8000/login\",\n+                        \"$initial_referring_domain\": \"127.0.0.1:8000\",\n+                        \"$referrer\": \"http://127.0.0.1:8000/web-performance?properties=%5B%7B%22key%22%3A%22%24performance_page_loaded%22%2C%22value%22%3A%222700%22%2C%22operator%22%3A%22gt%22%2C%22type%22%3A%22event%22%7D%5D\",\n+                        \"$referring_domain\": \"127.0.0.1:8000\",\n+                        \"is_demo_project\": false,\n+                        \"$groups\": {\n+                            \"project\": \"017eca8c-03d9-0000-45ef-b1d4ecab7048\",\n+                            \"organization\": \"017eca8b-fdce-0000-6923-f64fc0d0edac\",\n+                            \"instance\": \"http://localhost:8000\"\n+                        },\n+                        \"posthog_version\": \"1.32.0\",\n+                        \"realm\": \"hosted-clickhouse\",\n+                        \"email_service_available\": false,\n+                        \"$session_recording_enabled\": false,\n+                        \"$active_feature_flags\": [\"hackathon-apm\", \"6619-query-events-by-date\"],\n+                        \"$feature/hackathon-apm\": true,\n+                        \"$feature/6619-query-events-by-date\": true,\n+                        \"token\": \"phc_k6AJ5lImHZHzO7uBX5PBWPL0EmSrHEATJfaXOWREOAJ\",\n+                        \"$session_id\": \"17ecb1b70dcd31-0d4473129efd62-133a6253-16a7f0-17ecb1b70ddb94\",\n+                        \"$window_id\": \"17ecb1b70de1df-04e23a807879ce-133a6253-16a7f0-17ecb1b70dfdf3\",\n+                        \"$performance_page_loaded\": 2930.8,\n+                        \"$performance_raw\": \"{\\\"navigation\\\":[[\\\"name\\\",\\\"entryType\\\",\\\"duration\\\",\\\"initiatorType\\\",\\\"fetchStart\\\",\\\"domainLookupStart\\\",\\\"domainLookupEnd\\\",\\\"connectStart\\\",\\\"connectEnd\\\",\\\"requestStart\\\",\\\"responseStart\\\",\\\"responseEnd\\\",\\\"transferSize\\\",\\\"encodedBodySize\\\",\\\"decodedBodySize\\\",\\\"unloadEventStart\\\",\\\"unloadEventEnd\\\",\\\"domInteractive\\\",\\\"domContentLoadedEventStart\\\",\\\"domContentLoadedEventEnd\\\",\\\"domComplete\\\",\\\"loadEventStart\\\",\\\"loadEventEnd\\\",\\\"type\\\"],[[\\\"http://127.0.0.1:8000/web-performance?properties=%5B%7B%22key%22%3A%22%24performance_page_loaded%22%2C%22value%22%3A%222700%22%2C%22operator%22%3A%22gt%22%2C%22type%22%3A%22event%22%7D%5D\\\",\\\"navigation\\\",2930.8,\\\"navigation\\\",5.7,5.7,5.7,5.7,5.7,56.1,520.5,550.3,34955,34655,34655,559.3,573.6,846.4,846.4,853.8,2926.5,2930.7,2930.8,\\\"reload\\\"]]],\\\"paint\\\":[[\\\"name\\\",\\\"entryType\\\",\\\"startTime\\\"],[[\\\"first-paint\\\",\\\"paint\\\",974.9],[\\\"first-contentful-paint\\\",\\\"paint\\\",974.9]]],\\\"resource\\\":[[\\\"name\\\",\\\"startTime\\\",\\\"duration\\\",\\\"initiatorType\\\",\\\"fetchStart\\\",\\\"responseEnd\\\"],[[\\\"http://localhost:8234/static/index.css?t=1644085770266\\\",782.2,1764.4,\\\"link\\\",782.2,2546.6],[\\\"http://localhost:8234/static/index.js?t=1644085770266\\\",782.6,1737.4,\\\"other\\\",782.6,2520],[\\\"http://localhost:8234/static/chunk-YPFMJDM4.js\\\",783.1,1731,\\\"other\\\",783.1,2514.1],[\\\"http://localhost:8234/static/chunk-XF34ZH23.js\\\",783.2,1763.4,\\\"other\\\",783.2,2546.6],[\\\"http://localhost:8234/static/chunk-5MMMF5K7.js\\\",783.5,1729.4,\\\"other\\\",783.5,2512.9],[\\\"http://localhost:8234/static/chunk-INAGIC7G.js\\\",785.2,1754.1,\\\"other\\\",785.2,2539.3],[\\\"http://localhost:8234/static/chunk-I3Q2CDVZ.js\\\",785.5,1753.5,\\\"other\\\",785.5,2539],[\\\"http://localhost:8234/static/chunk-R2J2AFYA.js\\\",785.7,1750.6,\\\"other\\\",785.7,2536.3],[\\\"http://localhost:8234/static/chunk-LRA7UZ2C.js\\\",789.6,1747.3,\\\"other\\\",789.6,2536.9],[\\\"http://localhost:8234/static/chunk-JABUHWMZ.js\\\",789.8,1750.7,\\\"other\\\",789.8,2540.5],[\\\"http://localhost:8234/static/chunk-MILJQ7RK.js\\\",789.9,1764.7,\\\"other\\\",789.9,2554.6],[\\\"http://localhost:8234/static/chunk-A3WPL726.js\\\",790.1,1760.2,\\\"other\\\",790.1,2550.3],[\\\"http://localhost:8234/static/chunk-OZGU6W75.js\\\",790.2,1764,\\\"other\\\",790.2,2554.2],[\\\"http://localhost:8234/static/chunk-5WYOWOVT.js\\\",790.3,1764.7,\\\"other\\\",790.3,2555],[\\\"http://localhost:8234/static/chunk-BP26XGN6.js\\\",790.5,1773.5,\\\"other\\\",790.5,2564],[\\\"http://localhost:8234/static/chunk-6SFOWN5U.js\\\",790.7,1790.4,\\\"other\\\",790.7,2581.1],[\\\"http://localhost:8234/static/chunk-25TTUT3N.js\\\",790.8,1791.4,\\\"other\\\",790.8,2582.2],[\\\"http://localhost:8234/static/chunk-UDRKU2XS.js\\\",791,1790.7,\\\"other\\\",791,2581.7],[\\\"http://localhost:8234/static/chunk-KCJGXE5M.js\\\",791.4,1783.8,\\\"other\\\",791.4,2575.2],[\\\"http://localhost:8234/static/chunk-HED4XUT2.js\\\",791.6,1921.5,\\\"other\\\",791.6,2713.1],[\\\"http://localhost:8234/static/chunk-QGGM6NUR.js\\\",799.7,1922.1,\\\"other\\\",799.7,2721.8],[\\\"http://localhost:8234/static/chunk-4YYGW3TC.js\\\",802.4,1920.3,\\\"other\\\",802.4,2722.7],[\\\"http://localhost:8234/static/chunk-MQF2FLOV.js\\\",803.3,1892.4,\\\"other\\\",803.3,2695.7],[\\\"http://localhost:8234/static/chunk-EOM6WIAG.js\\\",803.5,1772.6,\\\"other\\\",803.5,2576.1],[\\\"http://localhost:8234/static/chunk-AXH4YZAR.js\\\",803.8,1919.1,\\\"other\\\",803.8,2722.9],[\\\"http://localhost:8234/static/chunk-FQHAJZGM.js\\\",804.1,1780.9,\\\"other\\\",804.1,2585],[\\\"http://localhost:8234/static/chunk-RQJ43M5U.js\\\",804.2,1816,\\\"other\\\",804.2,2620.2],[\\\"http://localhost:8234/static/chunk-XPGE43VJ.js\\\",804.4,1826.7,\\\"other\\\",804.4,2631.1],[\\\"http://localhost:8234/static/chunk-L4IYGZIG.js\\\",804.5,1920.7,\\\"other\\\",804.5,2725.2],[\\\"http://localhost:8234/static/chunk-IGTMCF24.js\\\",804.7,1920.6,\\\"other\\\",804.7,2725.3],[\\\"http://localhost:8234/static/chunk-AMOE3OJU.js\\\",804.9,1826,\\\"other\\\",804.9,2630.9],[\\\"http://localhost:8234/static/chunk-BO4VDBQ6.js\\\",805.1,1950,\\\"other\\\",805.1,2755.1],[\\\"http://localhost:8234/static/chunk-QE52CDVG.js\\\",805.3,1831,\\\"other\\\",805.3,2636.3],[\\\"http://localhost:8234/static/chunk-VHSG55N2.js\\\",805.4,1825.5,\\\"other\\\",805.4,2630.9],[\\\"http://localhost:8234/static/chunk-4ZUV5LND.js\\\",807.2,1829.2,\\\"other\\\",807.2,2636.4],[\\\"http://localhost:8234/static/chunk-ASGLZXIV.js\\\",809,1888.2,\\\"other\\\",809,2697.2],[\\\"http://localhost:8234/static/chunk-HGNVPWDY.js\\\",809.2,1873.1,\\\"other\\\",809.2,2682.3],[\\\"http://localhost:8234/static/chunk-LD3TGMGW.js\\\",809.3,1865.4,\\\"other\\\",809.3,2674.7],[\\\"http://localhost:8234/static/chunk-PRPBRI2E.js\\\",809.5,1873.4,\\\"other\\\",809.5,2682.9],[\\\"http://localhost:8234/static/chunk-CA6FFFUC.js\\\",809.7,1873,\\\"other\\\",809.7,2682.7],[\\\"http://localhost:8234/static/chunk-YBU6RJ5N.js\\\",809.8,1891.3,\\\"other\\\",809.8,2701.1],[\\\"http://localhost:8234/static/chunk-HB4RLT5O.js\\\",809.9,1894.9,\\\"other\\\",809.9,2704.8],[\\\"http://localhost:8234/static/chunk-UJJIEZBP.js\\\",810.1,1894.9,\\\"other\\\",810.1,2705],[\\\"http://localhost:8234/static/chunk-KXP7VI6L.js\\\",814.7,1889.5,\\\"other\\\",814.7,2704.2],[\\\"http://localhost:8234/static/chunk-OHMX2FMJ.js\\\",815.1,1890.5,\\\"other\\\",815.1,2705.6],[\\\"http://localhost:8234/static/chunk-EEOHMXMI.js\\\",815.4,1893.2,\\\"other\\\",815.4,2708.6],[\\\"http://localhost:8234/static/chunk-ATKSJCQX.js\\\",815.6,1915,\\\"other\\\",815.6,2730.6],[\\\"http://localhost:8234/static/chunk-CAEMAXLK.js\\\",815.7,2035.3,\\\"other\\\",815.7,2851],[\\\"http://localhost:8234/static/chunk-OBAYCOOK.js\\\",815.9,2073.6,\\\"other\\\",815.9,2889.5],[\\\"http://localhost:8234/static/chunk-VJGIAYQC.js\\\",816,1945.6,\\\"other\\\",816,2761.6],[\\\"http://127.0.0.1:8000/e/?ip=1&_=1644085891984\\\",3045.7,181,\\\"xmlhttprequest\\\",3045.7,3226.7],[\\\"http://localhost:8234/static/WebPerformance-L6IWRWOV.js\\\",3092.8,44.5,\\\"other\\\",3092.8,3137.3],[\\\"http://127.0.0.1:8000/static/icons/favicon-dev.ico?v=2021-04-29\\\",3096.8,239.9,\\\"other\\\",3096.8,3336.7],[\\\"http://localhost:8234/static/chunk-F5T7ECZG.js\\\",3228.5,29.9,\\\"other\\\",3228.5,3258.4],[\\\"http://localhost:8234/static/chunk-ZYLXYU4K.js\\\",3228.8,24.9,\\\"other\\\",3228.8,3253.7],[\\\"http://localhost:8234/static/chunk-Y4DLHNYM.js\\\",3228.9,27.4,\\\"other\\\",3228.9,3256.3],[\\\"http://localhost:8234/static/chunk-ZCRZKRW7.js\\\",3229.1,27.5,\\\"other\\\",3229.1,3256.6],[\\\"http://localhost:8234/static/chunk-YQPLUSZK.js\\\",3229.1,24.8,\\\"other\\\",3229.1,3253.9],[\\\"http://localhost:8234/static/chunk-AVSAWBKG.js\\\",3229.2,36.3,\\\"other\\\",3229.2,3265.5],[\\\"http://localhost:8234/static/chunk-NPPZ6HM3.js\\\",3229.7,46.6,\\\"other\\\",3229.7,3276.3],[\\\"http://localhost:8234/static/chunk-OSKNBHDN.js\\\",3229.8,49.3,\\\"other\\\",3229.8,3279.1],[\\\"http://localhost:8234/static/chunk-T7SYQIYY.js\\\",3230,45.2,\\\"other\\\",3230,3275.2],[\\\"http://localhost:8234/static/chunk-SGDHQOX6.js\\\",3230.1,45.6,\\\"other\\\",3230.1,3275.7],[\\\"http://localhost:8234/static/chunk-H2BXVWDT.js\\\",3230.2,60.2,\\\"other\\\",3230.2,3290.4]]]}\",\n+                        \"$geoip_city_name\": \"Sydney\",\n+                        \"$geoip_country_name\": \"Australia\",\n+                        \"$geoip_country_code\": \"AU\",\n+                        \"$geoip_continent_name\": \"Oceania\",\n+                        \"$geoip_continent_code\": \"OC\",\n+                        \"$geoip_postal_code\": \"2000\",\n+                        \"$geoip_latitude\": -33.8601,\n+                        \"$geoip_longitude\": 151.2101,\n+                        \"$geoip_time_zone\": \"Australia/Sydney\",\n+                        \"$geoip_subdivision_1_code\": \"NSW\",\n+                        \"$geoip_subdivision_1_name\": \"New South Wales\",\n+                        \"$plugins_succeeded\": [\"GeoIP (1)\"],\n+                        \"$plugins_failed\": [],\n+                        \"$plugins_deferred\": [],\n+                        \"$ip\": \"127.0.0.1\",\n+                        \"$set_once\": {\n+                            \"$initial_os\": \"Mac OS X\",\n+                            \"$initial_browser\": \"Chrome\",\n+                            \"$initial_device_type\": \"Desktop\",\n+                            \"$initial_current_url\": \"http://127.0.0.1:8000/web-performance?properties=%5B%7B%22key%22%3A%22%24performance_page_loaded%22%2C%22value%22%3A%222700%22%2C%22operator%22%3A%22gt%22%2C%22type%22%3A%22event%22%7D%5D\",\n+                            \"$initial_browser_version\": 97,\n+                            \"$initial_referrer\": \"http://127.0.0.1:8000/web-performance?properties=%5B%7B%22key%22%3A%22%24performance_page_loaded%22%2C%22value%22%3A%222700%22%2C%22operator%22%3A%22gt%22%2C%22type%22%3A%22event%22%7D%5D\",\n+                            \"$initial_referring_domain\": \"127.0.0.1:8000\"\n+                        },\n+                        \"$group_0\": \"017eca8c-03d9-0000-45ef-b1d4ecab7048\",\n+                        \"$group_1\": \"017eca8b-fdce-0000-6923-f64fc0d0edac\",\n+                        \"$group_2\": \"http://localhost:8000\"\n                     },\n-                    {\n-                        \"id\": \"017e6ed3-5abb-0000-bf38-1d32faca7efa\",\n-                        \"name\": \"$feature/hackathon-apm\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                    \"event\": \"$pageview\",\n+                    \"timestamp\": \"2022-02-05T18:31:32.324000+00:00\",\n+                    \"person\": {\n+                        \"is_identified\": true,\n+                        \"distinct_ids\": [\"F3RTp6GByAuqUkpsUUjzKTQlmJzIQTFoX44fKup95BC\"],\n+                        \"properties\": {\n+                            \"email\": \"paul@posthog.com\"\n+                        }\n                     },\n-                    {\n-                        \"id\": \"017e72e4-b9f5-0001-2239-b7488840e7fc\",\n-                        \"name\": \"$feature/insight-legends\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                    \"elements\": [],\n+                    \"elements_chain\": \"\"\n+                },\n+                {\n+                    \"id\": \"017ecb27-d476-0000-78a3-95b3d512c4e5\",\n+                    \"distinct_id\": \"17eca91a0ecd2f-0112e0afae304e-133a6253-16a7f0-17eca91a0eded1\",\n+                    \"properties\": {\n+                        \"$os\": \"Mac OS X\",\n+                        \"$browser\": \"Chrome\",\n+                        \"$device_type\": \"Desktop\",\n+                        \"$current_url\": \"http://localhost:8000/login?next=/events\",\n+                        \"$host\": \"localhost:8000\",\n+                        \"$pathname\": \"/login\",\n+                        \"$browser_version\": 97,\n+                        \"$screen_height\": 982,\n+                        \"$screen_width\": 1512,\n+                        \"$viewport_height\": 865,\n+                        \"$viewport_width\": 1512,\n+                        \"$lib\": \"web\",\n+                        \"$lib_version\": \"1.17.8\",\n+                        \"$insert_id\": \"eakwn1l20fyn4chm\",\n+                        \"$time\": 1644085892.15,\n+                        \"distinct_id\": \"17eca91a0ecd2f-0112e0afae304e-133a6253-16a7f0-17eca91a0eded1\",\n+                        \"$device_id\": \"17eca91a0ecd2f-0112e0afae304e-133a6253-16a7f0-17eca91a0eded1\",\n+                        \"$initial_referrer\": \"http://localhost:8000/login?next=/events\",\n+                        \"$initial_referring_domain\": \"localhost:8000\",\n+                        \"$referrer\": \"http://localhost:8000/login?next=/events\",\n+                        \"$referring_domain\": \"localhost:8000\",\n+                        \"$session_recording_enabled\": false,\n+                        \"$active_feature_flags\": [\"hackathon-apm\", \"6619-query-events-by-date\"],\n+                        \"$feature/hackathon-apm\": true,\n+                        \"$feature/6619-query-events-by-date\": true,\n+                        \"realm\": \"hosted-clickhouse\",\n+                        \"email_service_available\": false,\n+                        \"token\": \"phc_k6AJ5lImHZHzO7uBX5PBWPL0EmSrHEATJfaXOWREOAJ\",\n+                        \"$session_id\": \"17ecb1b6d551661-037995671a4a37-133a6253-16a7f0-17ecb1b6d561929\",\n+                        \"$window_id\": \"17ecb1b6d59179-07eda9364d2646-133a6253-16a7f0-17ecb1b6d5af1d\",\n+                        \"$performance_page_loaded\": 3053.7,\n+                        \"$performance_raw\": \"{\\\"navigation\\\":[[\\\"name\\\",\\\"entryType\\\",\\\"duration\\\",\\\"initiatorType\\\",\\\"fetchStart\\\",\\\"domainLookupStart\\\",\\\"domainLookupEnd\\\",\\\"connectStart\\\",\\\"connectEnd\\\",\\\"requestStart\\\",\\\"responseStart\\\",\\\"responseEnd\\\",\\\"transferSize\\\",\\\"encodedBodySize\\\",\\\"decodedBodySize\\\",\\\"unloadEventStart\\\",\\\"unloadEventEnd\\\",\\\"domInteractive\\\",\\\"domContentLoadedEventStart\\\",\\\"domContentLoadedEventEnd\\\",\\\"domComplete\\\",\\\"loadEventStart\\\",\\\"loadEventEnd\\\",\\\"type\\\"],[[\\\"http://localhost:8000/login?next=/events\\\",\\\"navigation\\\",3053.7,\\\"navigation\\\",1.4,1.4,1.4,1.4,1.4,8.7,130.6,131.6,21151,20851,20851,138.7,148,204.2,204.3,204.3,3053.7,3053.7,3053.7,\\\"reload\\\"]]],\\\"paint\\\":[],\\\"resource\\\":[[\\\"name\\\",\\\"startTime\\\",\\\"duration\\\",\\\"initiatorType\\\",\\\"fetchStart\\\",\\\"responseEnd\\\"],[[\\\"http://localhost:8234/static/index.css?t=1644085770266\\\",198.5,2354.2,\\\"link\\\",198.5,2552.7],[\\\"http://localhost:8234/static/index.js?t=1644085770266\\\",199.1,2321.4,\\\"other\\\",199.1,2520.5],[\\\"http://localhost:8234/static/chunk-YPFMJDM4.js\\\",201.2,2309.9,\\\"other\\\",201.2,2511.1],[\\\"http://localhost:8234/static/chunk-XF34ZH23.js\\\",201.3,2332.6,\\\"other\\\",201.3,2533.9],[\\\"http://localhost:8234/static/chunk-5MMMF5K7.js\\\",201.5,2342.5,\\\"other\\\",201.5,2544],[\\\"http://localhost:8234/static/chunk-INAGIC7G.js\\\",201.5,2373.4,\\\"other\\\",201.5,2574.9],[\\\"http://localhost:8234/static/chunk-I3Q2CDVZ.js\\\",201.5,2380.5,\\\"other\\\",201.5,2582],[\\\"http://localhost:8234/static/chunk-R2J2AFYA.js\\\",201.5,2380.8,\\\"other\\\",201.5,2582.3],[\\\"http://localhost:8234/static/chunk-LRA7UZ2C.js\\\",201.8,2424.2,\\\"other\\\",201.8,2626],[\\\"http://localhost:8234/static/chunk-JABUHWMZ.js\\\",201.8,2428.9,\\\"other\\\",201.8,2630.7],[\\\"http://localhost:8234/static/chunk-MILJQ7RK.js\\\",201.8,2429.3,\\\"other\\\",201.8,2631.1],[\\\"http://localhost:8234/static/chunk-A3WPL726.js\\\",202,2494,\\\"other\\\",202,2696],[\\\"http://localhost:8234/static/chunk-OZGU6W75.js\\\",202,2494.1,\\\"other\\\",202,2696.1],[\\\"http://localhost:8234/static/chunk-5WYOWOVT.js\\\",202,2497.7,\\\"other\\\",202,2699.7],[\\\"http://localhost:8234/static/chunk-BP26XGN6.js\\\",202,2521.5,\\\"other\\\",202,2723.5],[\\\"http://localhost:8234/static/chunk-6SFOWN5U.js\\\",202.1,2518.6,\\\"other\\\",202.1,2720.7],[\\\"http://localhost:8234/static/chunk-25TTUT3N.js\\\",202.1,2523.8,\\\"other\\\",202.1,2725.9],[\\\"http://localhost:8234/static/chunk-UDRKU2XS.js\\\",202.1,2576.5,\\\"other\\\",202.1,2778.6],[\\\"http://localhost:8234/static/chunk-KCJGXE5M.js\\\",202.2,2558.9,\\\"other\\\",202.2,2761.1],[\\\"http://localhost:8234/static/chunk-HED4XUT2.js\\\",202.2,2593.5,\\\"other\\\",202.2,2795.7],[\\\"http://localhost:8234/static/chunk-QGGM6NUR.js\\\",202.2,2594.6,\\\"other\\\",202.2,2796.8],[\\\"http://localhost:8234/static/chunk-4YYGW3TC.js\\\",202.3,2615.7,\\\"other\\\",202.3,2818],[\\\"http://localhost:8234/static/chunk-MQF2FLOV.js\\\",202.3,2616.4,\\\"other\\\",202.3,2818.7],[\\\"http://localhost:8234/static/chunk-EOM6WIAG.js\\\",202.3,2620.4,\\\"other\\\",202.3,2822.7],[\\\"http://localhost:8234/static/chunk-AXH4YZAR.js\\\",202.4,2631.7,\\\"other\\\",202.4,2834.1],[\\\"http://localhost:8234/static/chunk-FQHAJZGM.js\\\",202.6,2633.6,\\\"other\\\",202.6,2836.2],[\\\"http://localhost:8234/static/chunk-RQJ43M5U.js\\\",202.6,2646.2,\\\"other\\\",202.6,2848.8],[\\\"http://localhost:8234/static/chunk-L4IYGZIG.js\\\",202.6,2649.2,\\\"other\\\",202.6,2851.8],[\\\"http://localhost:8234/static/chunk-XPGE43VJ.js\\\",202.6,2648.9,\\\"other\\\",202.6,2851.5],[\\\"http://localhost:8234/static/chunk-IGTMCF24.js\\\",202.7,2658.1,\\\"other\\\",202.7,2860.8],[\\\"http://localhost:8234/static/chunk-BO4VDBQ6.js\\\",202.7,2659.1,\\\"other\\\",202.7,2861.8],[\\\"http://localhost:8234/static/chunk-AMOE3OJU.js\\\",202.7,2659,\\\"other\\\",202.7,2861.7],[\\\"http://localhost:8234/static/chunk-QE52CDVG.js\\\",202.7,2672,\\\"other\\\",202.7,2874.7],[\\\"http://localhost:8234/static/chunk-VHSG55N2.js\\\",202.8,2669.8,\\\"other\\\",202.8,2872.6],[\\\"http://localhost:8234/static/chunk-4ZUV5LND.js\\\",202.8,2672.4,\\\"other\\\",202.8,2875.2],[\\\"http://localhost:8234/static/chunk-ASGLZXIV.js\\\",202.8,2675.3,\\\"other\\\",202.8,2878.1],[\\\"http://localhost:8234/static/chunk-HGNVPWDY.js\\\",202.8,2675.7,\\\"other\\\",202.8,2878.5],[\\\"http://localhost:8234/static/chunk-LD3TGMGW.js\\\",203,2676.8,\\\"other\\\",203,2879.8],[\\\"http://localhost:8234/static/chunk-CA6FFFUC.js\\\",203,2679.4,\\\"other\\\",203,2882.4],[\\\"http://localhost:8234/static/chunk-PRPBRI2E.js\\\",203,2680.2,\\\"other\\\",203,2883.2],[\\\"http://localhost:8234/static/chunk-YBU6RJ5N.js\\\",203.1,2680.3,\\\"other\\\",203.1,2883.4],[\\\"http://localhost:8234/static/chunk-HB4RLT5O.js\\\",203.1,2693.4,\\\"other\\\",203.1,2896.5],[\\\"http://localhost:8234/static/chunk-UJJIEZBP.js\\\",203.1,2693.4,\\\"other\\\",203.1,2896.5],[\\\"http://localhost:8234/static/chunk-KXP7VI6L.js\\\",203.1,2693.7,\\\"other\\\",203.1,2896.8],[\\\"http://localhost:8234/static/chunk-OHMX2FMJ.js\\\",203.2,2698.1,\\\"other\\\",203.2,2901.3],[\\\"http://localhost:8234/static/chunk-EEOHMXMI.js\\\",203.2,2701.1,\\\"other\\\",203.2,2904.3],[\\\"http://localhost:8234/static/chunk-ATKSJCQX.js\\\",203.2,2702.1,\\\"other\\\",203.2,2905.3],[\\\"http://localhost:8234/static/chunk-CAEMAXLK.js\\\",203.2,2789.3,\\\"other\\\",203.2,2992.5],[\\\"http://localhost:8234/static/chunk-VJGIAYQC.js\\\",203.3,2716.8,\\\"other\\\",203.3,2920.1],[\\\"http://localhost:8234/static/chunk-OBAYCOOK.js\\\",203.3,2825.3,\\\"other\\\",203.3,3028.6]]]}\",\n+                        \"$geoip_city_name\": \"Sydney\",\n+                        \"$geoip_country_name\": \"Australia\",\n+                        \"$geoip_country_code\": \"AU\",\n+                        \"$geoip_continent_name\": \"Oceania\",\n+                        \"$geoip_continent_code\": \"OC\",\n+                        \"$geoip_postal_code\": \"2000\",\n+                        \"$geoip_latitude\": -33.8601,\n+                        \"$geoip_longitude\": 151.2101,\n+                        \"$geoip_time_zone\": \"Australia/Sydney\",\n+                        \"$geoip_subdivision_1_code\": \"NSW\",\n+                        \"$geoip_subdivision_1_name\": \"New South Wales\",\n+                        \"$plugins_succeeded\": [\"GeoIP (1)\"],\n+                        \"$plugins_failed\": [],\n+                        \"$plugins_deferred\": [],\n+                        \"$ip\": \"127.0.0.1\",\n+                        \"$set_once\": {\n+                            \"$initial_os\": \"Mac OS X\",\n+                            \"$initial_browser\": \"Chrome\",\n+                            \"$initial_device_type\": \"Desktop\",\n+                            \"$initial_current_url\": \"http://localhost:8000/login?next=/events\",\n+                            \"$initial_browser_version\": 97,\n+                            \"$initial_referrer\": \"http://localhost:8000/login?next=/events\",\n+                            \"$initial_referring_domain\": \"localhost:8000\"\n+                        }\n                     },\n-                    {\n-                        \"id\": \"017e770d-cd20-0000-852a-89fc52e67c29\",\n-                        \"name\": \"$feature/something\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                    \"event\": \"$pageview\",\n+                    \"timestamp\": \"2022-02-05T18:31:32.187000+00:00\",\n+                    \"person\": {\n+                        \"is_identified\": false,\n+                        \"distinct_ids\": [\"17eca91a0ecd2f-0112e0afae304e-133a6253-16a7f0-17eca91a0eded1\"],\n+                        \"properties\": {}\n                     },\n-                    {\n-                        \"id\": \"017e6d93-a7a8-0000-93b9-95cc904a1bfa\",\n-                        \"name\": \"$feature_flag\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"String\",\n-                        \"is_event_property\": null\n+                    \"elements\": [],\n+                    \"elements_chain\": \"\"\n+                },\n+                {\n+                    \"id\": \"017ecb27-d43d-0000-873e-cc3b20e8d619\",\n+                    \"distinct_id\": \"F3RTp6GByAuqUkpsUUjzKTQlmJzIQTFoX44fKup95BC\",\n+                    \"properties\": {\n+                        \"$os\": \"Mac OS X\",\n+                        \"$browser\": \"Chrome\",\n+                        \"$device_type\": \"Desktop\",\n+                        \"$current_url\": \"http://127.0.0.1:8000/web-performance?properties=%5B%7B%22key%22%3A%22%24performance_page_loaded%22%2C%22value%22%3A%222700%22%2C%22operator%22%3A%22gt%22%2C%22type%22%3A%22event%22%7D%5D\",\n+                        \"$host\": \"127.0.0.1:8000\",\n+                        \"$pathname\": \"/web-performance\",\n+                        \"$browser_version\": 97,\n+                        \"$screen_height\": 982,\n+                        \"$screen_width\": 1512,\n+                        \"$viewport_height\": 833,\n+                        \"$viewport_width\": 949,\n+                        \"$lib\": \"web\",\n+                        \"$lib_version\": \"1.17.8\",\n+                        \"$insert_id\": \"bo7d47ufqixycjo3\",\n+                        \"$time\": 1644085891.979,\n+                        \"distinct_id\": \"F3RTp6GByAuqUkpsUUjzKTQlmJzIQTFoX44fKup95BC\",\n+                        \"$device_id\": \"17eca8c073990-02b888033df436-133a6253-16a7f0-17eca8c073a11b6\",\n+                        \"$user_id\": \"F3RTp6GByAuqUkpsUUjzKTQlmJzIQTFoX44fKup95BC\",\n+                        \"$initial_referrer\": \"http://127.0.0.1:8000/login\",\n+                        \"$initial_referring_domain\": \"127.0.0.1:8000\",\n+                        \"$referrer\": \"http://127.0.0.1:8000/web-performance?properties=%5B%7B%22key%22%3A%22%24performance_page_loaded%22%2C%22value%22%3A%222700%22%2C%22operator%22%3A%22gt%22%2C%22type%22%3A%22event%22%7D%5D\",\n+                        \"$referring_domain\": \"127.0.0.1:8000\",\n+                        \"is_demo_project\": false,\n+                        \"$groups\": {\n+                            \"project\": \"017eca8c-03d9-0000-45ef-b1d4ecab7048\",\n+                            \"organization\": \"017eca8b-fdce-0000-6923-f64fc0d0edac\",\n+                            \"instance\": \"http://localhost:8000\"\n+                        },\n+                        \"posthog_version\": \"1.32.0\",\n+                        \"realm\": \"hosted-clickhouse\",\n+                        \"email_service_available\": false,\n+                        \"$session_recording_enabled\": false,\n+                        \"$active_feature_flags\": [\"hackathon-apm\", \"6619-query-events-by-date\"],\n+                        \"$feature/hackathon-apm\": true,\n+                        \"$feature/6619-query-events-by-date\": true,\n+                        \"token\": \"phc_k6AJ5lImHZHzO7uBX5PBWPL0EmSrHEATJfaXOWREOAJ\",\n+                        \"$session_id\": \"17ecb1b70dcd31-0d4473129efd62-133a6253-16a7f0-17ecb1b70ddb94\",\n+                        \"$window_id\": \"17ecb1b70de1df-04e23a807879ce-133a6253-16a7f0-17ecb1b70dfdf3\",\n+                        \"$performance_page_loaded\": 2930.8,\n+                        \"$performance_raw\": \"{\\\"navigation\\\":[[\\\"name\\\",\\\"entryType\\\",\\\"duration\\\",\\\"initiatorType\\\",\\\"fetchStart\\\",\\\"domainLookupStart\\\",\\\"domainLookupEnd\\\",\\\"connectStart\\\",\\\"connectEnd\\\",\\\"requestStart\\\",\\\"responseStart\\\",\\\"responseEnd\\\",\\\"transferSize\\\",\\\"encodedBodySize\\\",\\\"decodedBodySize\\\",\\\"unloadEventStart\\\",\\\"unloadEventEnd\\\",\\\"domInteractive\\\",\\\"domContentLoadedEventStart\\\",\\\"domContentLoadedEventEnd\\\",\\\"domComplete\\\",\\\"loadEventStart\\\",\\\"loadEventEnd\\\",\\\"type\\\"],[[\\\"http://127.0.0.1:8000/web-performance?properties=%5B%7B%22key%22%3A%22%24performance_page_loaded%22%2C%22value%22%3A%222700%22%2C%22operator%22%3A%22gt%22%2C%22type%22%3A%22event%22%7D%5D\\\",\\\"navigation\\\",2930.8,\\\"navigation\\\",5.7,5.7,5.7,5.7,5.7,56.1,520.5,550.3,34955,34655,34655,559.3,573.6,846.4,846.4,853.8,2926.5,2930.7,2930.8,\\\"reload\\\"]]],\\\"paint\\\":[[\\\"name\\\",\\\"entryType\\\",\\\"startTime\\\"],[[\\\"first-paint\\\",\\\"paint\\\",974.9],[\\\"first-contentful-paint\\\",\\\"paint\\\",974.9]]],\\\"resource\\\":[[\\\"name\\\",\\\"startTime\\\",\\\"duration\\\",\\\"initiatorType\\\",\\\"fetchStart\\\",\\\"responseEnd\\\"],[[\\\"http://localhost:8234/static/index.css?t=1644085770266\\\",782.2,1764.4,\\\"link\\\",782.2,2546.6],[\\\"http://localhost:8234/static/index.js?t=1644085770266\\\",782.6,1737.4,\\\"other\\\",782.6,2520],[\\\"http://localhost:8234/static/chunk-YPFMJDM4.js\\\",783.1,1731,\\\"other\\\",783.1,2514.1],[\\\"http://localhost:8234/static/chunk-XF34ZH23.js\\\",783.2,1763.4,\\\"other\\\",783.2,2546.6],[\\\"http://localhost:8234/static/chunk-5MMMF5K7.js\\\",783.5,1729.4,\\\"other\\\",783.5,2512.9],[\\\"http://localhost:8234/static/chunk-INAGIC7G.js\\\",785.2,1754.1,\\\"other\\\",785.2,2539.3],[\\\"http://localhost:8234/static/chunk-I3Q2CDVZ.js\\\",785.5,1753.5,\\\"other\\\",785.5,2539],[\\\"http://localhost:8234/static/chunk-R2J2AFYA.js\\\",785.7,1750.6,\\\"other\\\",785.7,2536.3],[\\\"http://localhost:8234/static/chunk-LRA7UZ2C.js\\\",789.6,1747.3,\\\"other\\\",789.6,2536.9],[\\\"http://localhost:8234/static/chunk-JABUHWMZ.js\\\",789.8,1750.7,\\\"other\\\",789.8,2540.5],[\\\"http://localhost:8234/static/chunk-MILJQ7RK.js\\\",789.9,1764.7,\\\"other\\\",789.9,2554.6],[\\\"http://localhost:8234/static/chunk-A3WPL726.js\\\",790.1,1760.2,\\\"other\\\",790.1,2550.3],[\\\"http://localhost:8234/static/chunk-OZGU6W75.js\\\",790.2,1764,\\\"other\\\",790.2,2554.2],[\\\"http://localhost:8234/static/chunk-5WYOWOVT.js\\\",790.3,1764.7,\\\"other\\\",790.3,2555],[\\\"http://localhost:8234/static/chunk-BP26XGN6.js\\\",790.5,1773.5,\\\"other\\\",790.5,2564],[\\\"http://localhost:8234/static/chunk-6SFOWN5U.js\\\",790.7,1790.4,\\\"other\\\",790.7,2581.1],[\\\"http://localhost:8234/static/chunk-25TTUT3N.js\\\",790.8,1791.4,\\\"other\\\",790.8,2582.2],[\\\"http://localhost:8234/static/chunk-UDRKU2XS.js\\\",791,1790.7,\\\"other\\\",791,2581.7],[\\\"http://localhost:8234/static/chunk-KCJGXE5M.js\\\",791.4,1783.8,\\\"other\\\",791.4,2575.2],[\\\"http://localhost:8234/static/chunk-HED4XUT2.js\\\",791.6,1921.5,\\\"other\\\",791.6,2713.1],[\\\"http://localhost:8234/static/chunk-QGGM6NUR.js\\\",799.7,1922.1,\\\"other\\\",799.7,2721.8],[\\\"http://localhost:8234/static/chunk-4YYGW3TC.js\\\",802.4,1920.3,\\\"other\\\",802.4,2722.7],[\\\"http://localhost:8234/static/chunk-MQF2FLOV.js\\\",803.3,1892.4,\\\"other\\\",803.3,2695.7],[\\\"http://localhost:8234/static/chunk-EOM6WIAG.js\\\",803.5,1772.6,\\\"other\\\",803.5,2576.1],[\\\"http://localhost:8234/static/chunk-AXH4YZAR.js\\\",803.8,1919.1,\\\"other\\\",803.8,2722.9],[\\\"http://localhost:8234/static/chunk-FQHAJZGM.js\\\",804.1,1780.9,\\\"other\\\",804.1,2585],[\\\"http://localhost:8234/static/chunk-RQJ43M5U.js\\\",804.2,1816,\\\"other\\\",804.2,2620.2],[\\\"http://localhost:8234/static/chunk-XPGE43VJ.js\\\",804.4,1826.7,\\\"other\\\",804.4,2631.1],[\\\"http://localhost:8234/static/chunk-L4IYGZIG.js\\\",804.5,1920.7,\\\"other\\\",804.5,2725.2],[\\\"http://localhost:8234/static/chunk-IGTMCF24.js\\\",804.7,1920.6,\\\"other\\\",804.7,2725.3],[\\\"http://localhost:8234/static/chunk-AMOE3OJU.js\\\",804.9,1826,\\\"other\\\",804.9,2630.9],[\\\"http://localhost:8234/static/chunk-BO4VDBQ6.js\\\",805.1,1950,\\\"other\\\",805.1,2755.1],[\\\"http://localhost:8234/static/chunk-QE52CDVG.js\\\",805.3,1831,\\\"other\\\",805.3,2636.3],[\\\"http://localhost:8234/static/chunk-VHSG55N2.js\\\",805.4,1825.5,\\\"other\\\",805.4,2630.9],[\\\"http://localhost:8234/static/chunk-4ZUV5LND.js\\\",807.2,1829.2,\\\"other\\\",807.2,2636.4],[\\\"http://localhost:8234/static/chunk-ASGLZXIV.js\\\",809,1888.2,\\\"other\\\",809,2697.2],[\\\"http://localhost:8234/static/chunk-HGNVPWDY.js\\\",809.2,1873.1,\\\"other\\\",809.2,2682.3],[\\\"http://localhost:8234/static/chunk-LD3TGMGW.js\\\",809.3,1865.4,\\\"other\\\",809.3,2674.7],[\\\"http://localhost:8234/static/chunk-PRPBRI2E.js\\\",809.5,1873.4,\\\"other\\\",809.5,2682.9],[\\\"http://localhost:8234/static/chunk-CA6FFFUC.js\\\",809.7,1873,\\\"other\\\",809.7,2682.7],[\\\"http://localhost:8234/static/chunk-YBU6RJ5N.js\\\",809.8,1891.3,\\\"other\\\",809.8,2701.1],[\\\"http://localhost:8234/static/chunk-HB4RLT5O.js\\\",809.9,1894.9,\\\"other\\\",809.9,2704.8],[\\\"http://localhost:8234/static/chunk-UJJIEZBP.js\\\",810.1,1894.9,\\\"other\\\",810.1,2705],[\\\"http://localhost:8234/static/chunk-KXP7VI6L.js\\\",814.7,1889.5,\\\"other\\\",814.7,2704.2],[\\\"http://localhost:8234/static/chunk-OHMX2FMJ.js\\\",815.1,1890.5,\\\"other\\\",815.1,2705.6],[\\\"http://localhost:8234/static/chunk-EEOHMXMI.js\\\",815.4,1893.2,\\\"other\\\",815.4,2708.6],[\\\"http://localhost:8234/static/chunk-ATKSJCQX.js\\\",815.6,1915,\\\"other\\\",815.6,2730.6],[\\\"http://localhost:8234/static/chunk-CAEMAXLK.js\\\",815.7,2035.3,\\\"other\\\",815.7,2851],[\\\"http://localhost:8234/static/chunk-OBAYCOOK.js\\\",815.9,2073.6,\\\"other\\\",815.9,2889.5],[\\\"http://localhost:8234/static/chunk-VJGIAYQC.js\\\",816,1945.6,\\\"other\\\",816,2761.6]]]}\",\n+                        \"$geoip_city_name\": \"Sydney\",\n+                        \"$geoip_country_name\": \"Australia\",\n+                        \"$geoip_country_code\": \"AU\",\n+                        \"$geoip_continent_name\": \"Oceania\",\n+                        \"$geoip_continent_code\": \"OC\",\n+                        \"$geoip_postal_code\": \"2000\",\n+                        \"$geoip_latitude\": -33.8601,\n+                        \"$geoip_longitude\": 151.2101,\n+                        \"$geoip_time_zone\": \"Australia/Sydney\",\n+                        \"$geoip_subdivision_1_code\": \"NSW\",\n+                        \"$geoip_subdivision_1_name\": \"New South Wales\",\n+                        \"$plugins_succeeded\": [\"GeoIP (1)\"],\n+                        \"$plugins_failed\": [],\n+                        \"$plugins_deferred\": [],\n+                        \"$ip\": \"127.0.0.1\",\n+                        \"$set_once\": {\n+                            \"$initial_os\": \"Mac OS X\",\n+                            \"$initial_browser\": \"Chrome\",\n+                            \"$initial_device_type\": \"Desktop\",\n+                            \"$initial_current_url\": \"http://127.0.0.1:8000/web-performance?properties=%5B%7B%22key%22%3A%22%24performance_page_loaded%22%2C%22value%22%3A%222700%22%2C%22operator%22%3A%22gt%22%2C%22type%22%3A%22event%22%7D%5D\",\n+                            \"$initial_browser_version\": 97,\n+                            \"$initial_referrer\": \"http://127.0.0.1:8000/web-performance?properties=%5B%7B%22key%22%3A%22%24performance_page_loaded%22%2C%22value%22%3A%222700%22%2C%22operator%22%3A%22gt%22%2C%22type%22%3A%22event%22%7D%5D\",\n+                            \"$initial_referring_domain\": \"127.0.0.1:8000\"\n+                        },\n+                        \"$group_0\": \"017eca8c-03d9-0000-45ef-b1d4ecab7048\",\n+                        \"$group_1\": \"017eca8b-fdce-0000-6923-f64fc0d0edac\",\n+                        \"$group_2\": \"http://localhost:8000\"\n                     },\n-                    {\n-                        \"id\": \"017e6df3-1f2d-0000-1d6d-28485dbb6ace\",\n-                        \"name\": \"$feature_flag_response\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                    \"event\": \"$pageview\",\n+                    \"timestamp\": \"2022-02-05T18:31:32.079000+00:00\",\n+                    \"person\": {\n+                        \"is_identified\": true,\n+                        \"distinct_ids\": [\"F3RTp6GByAuqUkpsUUjzKTQlmJzIQTFoX44fKup95BC\"],\n+                        \"properties\": {\n+                            \"email\": \"paul@posthog.com\"\n+                        }\n                     },\n-                    {\n-                        \"id\": \"017e6ed3-0653-0000-ef19-18db4a194e72\",\n-                        \"name\": \"$geoip_city_name\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"String\",\n-                        \"is_event_property\": null\n+                    \"elements\": [],\n+                    \"elements_chain\": \"\"\n+                },\n+                {\n+                    \"id\": \"017ecb26-702a-0000-e45c-c52df8777bba\",\n+                    \"distinct_id\": \"F3RTp6GByAuqUkpsUUjzKTQlmJzIQTFoX44fKup95BC\",\n+                    \"properties\": {\n+                        \"$os\": \"Mac OS X\",\n+                        \"$browser\": \"Chrome\",\n+                        \"$device_type\": \"Desktop\",\n+                        \"$current_url\": \"http://127.0.0.1:8000/web-performance?properties=%5B%7B%22key%22%3A%22%24performance_page_loaded%22%2C%22value%22%3A%222700%22%2C%22operator%22%3A%22gt%22%2C%22type%22%3A%22event%22%7D%5D\",\n+                        \"$host\": \"127.0.0.1:8000\",\n+                        \"$pathname\": \"/web-performance\",\n+                        \"$browser_version\": 97,\n+                        \"$screen_height\": 982,\n+                        \"$screen_width\": 1512,\n+                        \"$viewport_height\": 833,\n+                        \"$viewport_width\": 949,\n+                        \"$lib\": \"web\",\n+                        \"$lib_version\": \"1.17.8\",\n+                        \"$insert_id\": \"vuscpll957ljspmk\",\n+                        \"$time\": 1644085798.822,\n+                        \"distinct_id\": \"F3RTp6GByAuqUkpsUUjzKTQlmJzIQTFoX44fKup95BC\",\n+                        \"$device_id\": \"17eca8c073990-02b888033df436-133a6253-16a7f0-17eca8c073a11b6\",\n+                        \"$user_id\": \"F3RTp6GByAuqUkpsUUjzKTQlmJzIQTFoX44fKup95BC\",\n+                        \"$initial_referrer\": \"http://127.0.0.1:8000/login\",\n+                        \"$initial_referring_domain\": \"127.0.0.1:8000\",\n+                        \"$referrer\": \"http://127.0.0.1:8000/web-performance\",\n+                        \"$referring_domain\": \"127.0.0.1:8000\",\n+                        \"is_demo_project\": false,\n+                        \"$groups\": {\n+                            \"project\": \"017eca8c-03d9-0000-45ef-b1d4ecab7048\",\n+                            \"organization\": \"017eca8b-fdce-0000-6923-f64fc0d0edac\",\n+                            \"instance\": \"http://localhost:8000\"\n+                        },\n+                        \"posthog_version\": \"1.32.0\",\n+                        \"realm\": \"hosted-clickhouse\",\n+                        \"email_service_available\": false,\n+                        \"$session_recording_enabled\": false,\n+                        \"$active_feature_flags\": [\"hackathon-apm\", \"6619-query-events-by-date\"],\n+                        \"$feature/hackathon-apm\": true,\n+                        \"$feature/6619-query-events-by-date\": true,\n+                        \"token\": \"phc_k6AJ5lImHZHzO7uBX5PBWPL0EmSrHEATJfaXOWREOAJ\",\n+                        \"$session_id\": \"17ecb1b70dcd31-0d4473129efd62-133a6253-16a7f0-17ecb1b70ddb94\",\n+                        \"$window_id\": \"17ecb1b70de1df-04e23a807879ce-133a6253-16a7f0-17ecb1b70dfdf3\",\n+                        \"$performance_page_loaded\": 2359.1,\n+                        \"$performance_raw\": \"{\\\"navigation\\\":[[\\\"name\\\",\\\"entryType\\\",\\\"duration\\\",\\\"initiatorType\\\",\\\"fetchStart\\\",\\\"domainLookupStart\\\",\\\"domainLookupEnd\\\",\\\"connectStart\\\",\\\"connectEnd\\\",\\\"requestStart\\\",\\\"responseStart\\\",\\\"responseEnd\\\",\\\"transferSize\\\",\\\"encodedBodySize\\\",\\\"decodedBodySize\\\",\\\"unloadEventStart\\\",\\\"unloadEventEnd\\\",\\\"domInteractive\\\",\\\"domContentLoadedEventStart\\\",\\\"domContentLoadedEventEnd\\\",\\\"domComplete\\\",\\\"loadEventStart\\\",\\\"loadEventEnd\\\",\\\"type\\\"],[[\\\"http://127.0.0.1:8000/web-performance\\\",\\\"navigation\\\",2359.1,\\\"navigation\\\",13.1,13.1,13.1,13.1,13.1,39,543.7,574.6,34955,34655,34655,580.6,591.8,758.1,758.1,760.4,2354.3,2359,2359.1,\\\"reload\\\"]]],\\\"paint\\\":[[\\\"name\\\",\\\"entryType\\\",\\\"startTime\\\"],[[\\\"first-paint\\\",\\\"paint\\\",814.4],[\\\"first-contentful-paint\\\",\\\"paint\\\",814.4]]],\\\"resource\\\":[[\\\"name\\\",\\\"startTime\\\",\\\"duration\\\",\\\"initiatorType\\\",\\\"fetchStart\\\",\\\"responseEnd\\\"],[[\\\"http://localhost:8234/static/index.css?t=1644085742750\\\",707.1,1487.2,\\\"link\\\",707.1,2194.3],[\\\"http://localhost:8234/static/index.js?t=1644085742750\\\",707.4,1460,\\\"other\\\",707.4,2167.4],[\\\"http://localhost:8234/static/chunk-YPFMJDM4.js\\\",708.7,1458.8,\\\"other\\\",708.7,2167.5],[\\\"http://localhost:8234/static/chunk-XF34ZH23.js\\\",709,1459.8,\\\"other\\\",709,2168.8],[\\\"http://localhost:8234/static/chunk-5MMMF5K7.js\\\",709.1,1457.7,\\\"other\\\",709.1,2166.8],[\\\"http://localhost:8234/static/chunk-INAGIC7G.js\\\",709.4,1459.2,\\\"other\\\",709.4,2168.6],[\\\"http://localhost:8234/static/chunk-I3Q2CDVZ.js\\\",709.5,1458.4,\\\"other\\\",709.5,2167.9],[\\\"http://localhost:8234/static/chunk-R2J2AFYA.js\\\",709.7,1471.3,\\\"other\\\",709.7,2181],[\\\"http://localhost:8234/static/chunk-LRA7UZ2C.js\\\",714.2,1461.9,\\\"other\\\",714.2,2176.1],[\\\"http://localhost:8234/static/chunk-JABUHWMZ.js\\\",714.5,1467.7,\\\"other\\\",714.5,2182.2],[\\\"http://localhost:8234/static/chunk-MILJQ7RK.js\\\",714.6,1467.9,\\\"other\\\",714.6,2182.5],[\\\"http://localhost:8234/static/chunk-A3WPL726.js\\\",714.7,1467,\\\"other\\\",714.7,2181.7],[\\\"http://localhost:8234/static/chunk-OZGU6W75.js\\\",714.9,1477.6,\\\"other\\\",714.9,2192.5],[\\\"http://localhost:8234/static/chunk-5WYOWOVT.js\\\",717.7,1477.1,\\\"other\\\",717.7,2194.8],[\\\"http://localhost:8234/static/chunk-BP26XGN6.js\\\",717.9,1480.4,\\\"other\\\",717.9,2198.3],[\\\"http://localhost:8234/static/chunk-6SFOWN5U.js\\\",718.1,1463.9,\\\"other\\\",718.1,2182],[\\\"http://localhost:8234/static/chunk-25TTUT3N.js\\\",718.2,1467.7,\\\"other\\\",718.2,2185.9],[\\\"http://localhost:8234/static/chunk-UDRKU2XS.js\\\",718.5,1476.3,\\\"other\\\",718.5,2194.8],[\\\"http://localhost:8234/static/chunk-KCJGXE5M.js\\\",718.6,1474.5,\\\"other\\\",718.6,2193.1],[\\\"http://localhost:8234/static/chunk-HED4XUT2.js\\\",718.9,1490.3,\\\"other\\\",718.9,2209.2],[\\\"http://localhost:8234/static/chunk-QGGM6NUR.js\\\",719.1,1479,\\\"other\\\",719.1,2198.1],[\\\"http://localhost:8234/static/chunk-4YYGW3TC.js\\\",720.1,1481.5,\\\"other\\\",720.1,2201.6],[\\\"http://localhost:8234/static/chunk-MQF2FLOV.js\\\",720.2,1481.7,\\\"other\\\",720.2,2201.9],[\\\"http://localhost:8234/static/chunk-EOM6WIAG.js\\\",720.5,1488.1,\\\"other\\\",720.5,2208.6],[\\\"http://localhost:8234/static/chunk-AXH4YZAR.js\\\",720.6,1488.4,\\\"other\\\",720.6,2209],[\\\"http://localhost:8234/static/chunk-FQHAJZGM.js\\\",720.7,1489.9,\\\"other\\\",720.7,2210.6],[\\\"http://localhost:8234/static/chunk-RQJ43M5U.js\\\",721,1491.6,\\\"other\\\",721,2212.6],[\\\"http://localhost:8234/static/chunk-XPGE43VJ.js\\\",721.2,1496.7,\\\"other\\\",721.2,2217.9],[\\\"http://localhost:8234/static/chunk-L4IYGZIG.js\\\",721.6,1487.9,\\\"other\\\",721.6,2209.5],[\\\"http://localhost:8234/static/chunk-IGTMCF24.js\\\",721.7,1495.8,\\\"other\\\",721.7,2217.5],[\\\"http://localhost:8234/static/chunk-AMOE3OJU.js\\\",722,1498.2,\\\"other\\\",722,2220.2],[\\\"http://localhost:8234/static/chunk-BO4VDBQ6.js\\\",722.1,1498.8,\\\"other\\\",722.1,2220.9],[\\\"http://localhost:8234/static/chunk-QE52CDVG.js\\\",747,1473.9,\\\"other\\\",747,2220.9],[\\\"http://localhost:8234/static/chunk-VHSG55N2.js\\\",747.2,1478.5,\\\"other\\\",747.2,2225.7],[\\\"http://localhost:8234/static/chunk-4ZUV5LND.js\\\",747.3,1479.9,\\\"other\\\",747.3,2227.2],[\\\"http://localhost:8234/static/chunk-ASGLZXIV.js\\\",747.6,1480,\\\"other\\\",747.6,2227.6],[\\\"http://localhost:8234/static/chunk-HGNVPWDY.js\\\",747.7,1478.9,\\\"other\\\",747.7,2226.6],[\\\"http://localhost:8234/static/chunk-LD3TGMGW.js\\\",747.9,1479,\\\"other\\\",747.9,2226.9],[\\\"http://localhost:8234/static/chunk-PRPBRI2E.js\\\",747.9,1479.1,\\\"other\\\",747.9,2227],[\\\"http://localhost:8234/static/chunk-CA6FFFUC.js\\\",748.1,1482.4,\\\"other\\\",748.1,2230.5],[\\\"http://localhost:8234/static/chunk-YBU6RJ5N.js\\\",748.2,1482.5,\\\"other\\\",748.2,2230.7],[\\\"http://localhost:8234/static/chunk-HB4RLT5O.js\\\",749.1,1480,\\\"other\\\",749.1,2229.1],[\\\"http://localhost:8234/static/chunk-UJJIEZBP.js\\\",749.8,1481.4,\\\"other\\\",749.8,2231.2],[\\\"http://localhost:8234/static/chunk-KXP7VI6L.js\\\",749.9,1482.4,\\\"other\\\",749.9,2232.3],[\\\"http://localhost:8234/static/chunk-OHMX2FMJ.js\\\",750.3,1490.5,\\\"other\\\",750.3,2240.8],[\\\"http://localhost:8234/static/chunk-EEOHMXMI.js\\\",750.6,1486,\\\"other\\\",750.6,2236.6],[\\\"http://localhost:8234/static/chunk-ATKSJCQX.js\\\",750.7,1481.7,\\\"other\\\",750.7,2232.4],[\\\"http://localhost:8234/static/chunk-CAEMAXLK.js\\\",751.1,1525.7,\\\"other\\\",751.1,2276.8],[\\\"http://localhost:8234/static/chunk-OBAYCOOK.js\\\",751.3,1577.6,\\\"other\\\",751.3,2328.9],[\\\"http://localhost:8234/static/chunk-VJGIAYQC.js\\\",751.7,1491.2,\\\"other\\\",751.7,2242.9],[\\\"http://127.0.0.1:8000/e/?ip=1&_=1644085770588\\\",2469.3,115.2,\\\"xmlhttprequest\\\",2469.3,2584.5],[\\\"http://127.0.0.1:8000/decide/?v=2&ip=1&_=1644085770589\\\",2469.8,138.2,\\\"xmlhttprequest\\\",2469.8,2608],[\\\"http://127.0.0.1:8000/engage/?ip=1&_=1644085770601\\\",2481.3,68.9,\\\"xmlhttprequest\\\",2481.3,2550.2],[\\\"http://localhost:8234/static/WebPerformance-BDKHWX2F.js\\\",2491.5,11,\\\"other\\\",2491.5,2502.5],[\\\"http://127.0.0.1:8000/static/icons/favicon-dev.ico?v=2021-04-29\\\",2495.5,138,\\\"other\\\",2495.5,2633.5],[\\\"http://127.0.0.1:8000/static/site.webmanifest?v=2021-04-29\\\",2626.5,18.6,\\\"other\\\",2626.5,2645.1],[\\\"http://localhost:8234/static/toolbar.js?_ts=1644085770755\\\",2636.2,121.4,\\\"script\\\",2636.2,2757.6],[\\\"http://127.0.0.1:8000/api/projects/1/actions/\\\",2646.2,199.9,\\\"fetch\\\",2646.2,2846.1],[\\\"http://127.0.0.1:8000/api/projects/1/annotations/?scope=organization&deleted=false\\\",2647.7,186.5,\\\"fetch\\\",2647.7,2834.2],[\\\"http://127.0.0.1:8000/api/projects/1/cohorts?limit=600\\\",2648.8,183.8,\\\"fetch\\\",2648.8,2832.6],[\\\"http://127.0.0.1:8000/api/projects/1/event_definitions/?limit=5000\\\",2651,269.1,\\\"fetch\\\",2651,2920.1],[\\\"http://127.0.0.1:8000/api/person/properties/\\\",2651.8,395.8,\\\"fetch\\\",2651.8,3047.6],[\\\"http://127.0.0.1:8000/api/projects/@current/property_definitions/?limit=5000\\\",2652.3,294.5,\\\"fetch\\\",2652.3,2946.8],[\\\"http://127.0.0.1:8000/api/organizations/@current/members/?limit=200\\\",2660.1,355.1,\\\"fetch\\\",2660.1,3015.2],[\\\"http://127.0.0.1:8000/api/instance_status/\\\",2662.2,1060.1,\\\"fetch\\\",2662.2,3722.3],[\\\"https://update.posthog.com/\\\",2663.6,52.2,\\\"fetch\\\",2663.6,2715.8],[\\\"http://127.0.0.1:8000/api/organizations/@current/invites/\\\",2665,418.7,\\\"fetch\\\",2665,3083.7],[\\\"http://127.0.0.1:8000/api/personal_api_keys/\\\",2676.2,337.4,\\\"fetch\\\",2676.2,3013.6],[\\\"http://127.0.0.1:8000/api/license/\\\",2686.9,379.9,\\\"fetch\\\",2686.9,3066.8],[\\\"https://www.gravatar.com/avatar/2e7d95b60efbe947f71009a1af1ba8d0?s=96&d=404\\\",2721.5,52,\\\"img\\\",2721.5,2773.5],[\\\"http://127.0.0.1:8000/api/projects/1/dashboards/\\\",2731.8,431.1,\\\"fetch\\\",2731.8,3162.9],[\\\"http://localhost:8234/static/chunk-F5T7ECZG.js\\\",2736.7,32.6,\\\"other\\\",2736.7,2769.3],[\\\"http://localhost:8234/static/chunk-ZYLXYU4K.js\\\",2736.9,25.3,\\\"other\\\",2736.9,2762.2],[\\\"http://localhost:8234/static/chunk-Y4DLHNYM.js\\\",2737.5,27.7,\\\"other\\\",2737.5,2765.2],[\\\"http://localhost:8234/static/chunk-ZCRZKRW7.js\\\",2737.8,30,\\\"other\\\",2737.8,2767.8],[\\\"http://localhost:8234/static/chunk-YQPLUSZK.js\\\",2738.5,27.6,\\\"other\\\",2738.5,2766.1],[\\\"http://localhost:8234/static/chunk-AVSAWBKG.js\\\",2738.8,30,\\\"other\\\",2738.8,2768.8],[\\\"http://localhost:8234/static/chunk-NPPZ6HM3.js\\\",2738.9,37.6,\\\"other\\\",2738.9,2776.5],[\\\"http://localhost:8234/static/chunk-OSKNBHDN.js\\\",2739,39.7,\\\"other\\\",2739,2778.7],[\\\"http://localhost:8234/static/chunk-T7SYQIYY.js\\\",2739.1,36.6,\\\"other\\\",2739.1,2775.7],[\\\"http://localhost:8234/static/chunk-SGDHQOX6.js\\\",2739.3,36.4,\\\"other\\\",2739.3,2775.7],[\\\"http://localhost:8234/static/chunk-H2BXVWDT.js\\\",2739.3,36.2,\\\"other\\\",2739.3,2775.5],[\\\"http://127.0.0.1:8000/api/projects/1/events?properties=%5B%7B%22key%22%3A%22%24performance_page_loaded%22%2C%22value%22%3A%220%22%2C%22operator%22%3A%22gt%22%2C%22type%22%3A%22event%22%7D%2C%7B%22key%22%3A%22%24performance_raw%22%2C%22value%22%3A%22is_set%22%2C%22operator%22%3A%22is_set%22%2C%22type%22%3A%22event%22%7D%5D&limit=10&orderBy=%5B%22-timestamp%22%5D\\\",2786.1,701.6,\\\"fetch\\\",2786.1,3487.7],[\\\"http://127.0.0.1:8000/api/projects/1/events?properties=%5B%7B%22key%22%3A%22%24performance_page_loaded%22%2C%22value%22%3A%220%22%2C%22operator%22%3A%22gt%22%2C%22type%22%3A%22event%22%7D%2C%7B%22key%22%3A%22%24performance_raw%22%2C%22value%22%3A%22is_set%22%2C%22operator%22%3A%22is_set%22%2C%22type%22%3A%22event%22%7D%5D&limit=10&orderBy=%5B%22-timestamp%22%5D\\\",2787.8,748.8,\\\"fetch\\\",2787.8,3536.6],[\\\"http://127.0.0.1:8000/api/projects/@current/feature_flags/my_flags?groups=%7B%22project%22%3A%22017eca8c-03d9-0000-45ef-b1d4ecab7048%22%2C%22organization%22%3A%22017eca8b-fdce-0000-6923-f64fc0d0edac%22%2C%22instance%22%3A%22http%3A%2F%2Flocalhost%3A8000%22%7D&temporary_token\\\",2886.9,328.8,\\\"fetch\\\",2886.9,3215.7],[\\\"http://localhost:8234/static/toolbar.css\\\",2941.4,21.8,\\\"link\\\",2941.4,2963.2],[\\\"http://127.0.0.1:8000/e/?compression=gzip-js&ip=1&_=1644085773594\\\",5474.6,50.6,\\\"xmlhttprequest\\\",5474.6,5525.2],[\\\"http://127.0.0.1:8000/api/projects/1/property_definitions?search=&limit=100&offset=0\\\",6702.2,48.8,\\\"fetch\\\",6702.2,6751],[\\\"http://localhost:8234/static/assets/posthog-icon-FDVNZJ5Z.svg\\\",6778.2,4.5,\\\"css\\\",6778.2,6782.7],[\\\"http://127.0.0.1:8000/e/?compression=gzip-js&ip=1&_=1644085776602\\\",8482.5,25.1,\\\"xmlhttprequest\\\",8482.5,8507.6],[\\\"http://127.0.0.1:8000/api/projects/1/property_definitions?search=per&limit=100&offset=0\\\",16169.2,34.4,\\\"fetch\\\",16169.2,16203.6],[\\\"http://127.0.0.1:8000/api/projects/1/property_definitions?search=perfor&limit=100&offset=0\\\",16555.1,32.5,\\\"fetch\\\",16555.1,16587.6],[\\\"http://127.0.0.1:8000/api/event/values/?key=$performance_page_loaded\\\",23932.6,68,\\\"fetch\\\",23932.6,24000.6],[\\\"http://127.0.0.1:8000/e/?compression=gzip-js&ip=1&_=1644085794981\\\",26862,19.8,\\\"xmlhttprequest\\\",26862,26881.8],[\\\"http://127.0.0.1:8000/api/event/values/?key=$performance_page_loaded&value=2\\\",29403.4,55.7,\\\"fetch\\\",29403.4,29459.1],[\\\"http://127.0.0.1:8000/api/event/values/?key=$performance_page_loaded&value=27\\\",29849.5,72.6,\\\"fetch\\\",29849.5,29922.1],[\\\"http://127.0.0.1:8000/e/?compression=gzip-js&ip=1&_=1644085797985\\\",29865.5,38.7,\\\"xmlhttprequest\\\",29865.5,29904.2],[\\\"http://127.0.0.1:8000/api/event/values/?key=$performance_page_loaded&value=270\\\",30151.2,55.5,\\\"fetch\\\",30151.2,30206.7],[\\\"http://127.0.0.1:8000/api/event/values/?key=$performance_page_loaded&value=2700\\\",30474.4,53.5,\\\"fetch\\\",30474.4,30527.9]]]}\",\n+                        \"$geoip_city_name\": \"Sydney\",\n+                        \"$geoip_country_name\": \"Australia\",\n+                        \"$geoip_country_code\": \"AU\",\n+                        \"$geoip_continent_name\": \"Oceania\",\n+                        \"$geoip_continent_code\": \"OC\",\n+                        \"$geoip_postal_code\": \"2000\",\n+                        \"$geoip_latitude\": -33.8601,\n+                        \"$geoip_longitude\": 151.2101,\n+                        \"$geoip_time_zone\": \"Australia/Sydney\",\n+                        \"$geoip_subdivision_1_code\": \"NSW\",\n+                        \"$geoip_subdivision_1_name\": \"New South Wales\",\n+                        \"$plugins_succeeded\": [\"GeoIP (1)\"],\n+                        \"$plugins_failed\": [],\n+                        \"$plugins_deferred\": [],\n+                        \"$ip\": \"127.0.0.1\",\n+                        \"$set_once\": {\n+                            \"$initial_os\": \"Mac OS X\",\n+                            \"$initial_browser\": \"Chrome\",\n+                            \"$initial_device_type\": \"Desktop\",\n+                            \"$initial_current_url\": \"http://127.0.0.1:8000/web-performance?properties=%5B%7B%22key%22%3A%22%24performance_page_loaded%22%2C%22value%22%3A%222700%22%2C%22operator%22%3A%22gt%22%2C%22type%22%3A%22event%22%7D%5D\",\n+                            \"$initial_browser_version\": 97,\n+                            \"$initial_referrer\": \"http://127.0.0.1:8000/web-performance\",\n+                            \"$initial_referring_domain\": \"127.0.0.1:8000\"\n+                        },\n+                        \"$group_0\": \"017eca8c-03d9-0000-45ef-b1d4ecab7048\",\n+                        \"$group_1\": \"017eca8b-fdce-0000-6923-f64fc0d0edac\",\n+                        \"$group_2\": \"http://localhost:8000\"\n                     },\n-                    {\n-                        \"id\": \"017e6ed3-0663-0000-0a83-cdbd7b02b138\",\n-                        \"name\": \"$geoip_continent_code\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"String\",\n-                        \"is_event_property\": null\n+                    \"event\": \"$pageview\",\n+                    \"timestamp\": \"2022-02-05T18:29:58.836000+00:00\",\n+                    \"person\": {\n+                        \"is_identified\": true,\n+                        \"distinct_ids\": [\"F3RTp6GByAuqUkpsUUjzKTQlmJzIQTFoX44fKup95BC\"],\n+                        \"properties\": {\n+                            \"email\": \"paul@posthog.com\"\n+                        }\n                     },\n-                    {\n-                        \"id\": \"017e6ed3-0660-0000-f782-b369df9aac98\",\n-                        \"name\": \"$geoip_continent_name\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"String\",\n-                        \"is_event_property\": null\n+                    \"elements\": [],\n+                    \"elements_chain\": \"\"\n+                }\n+            ],\n+            \"pageViewEventsLoading\": false,\n+            \"properties\": [\n+                {\n+                    \"key\": \"$performance_page_loaded\",\n+                    \"value\": \"2700\",\n+                    \"operator\": \"gt\",\n+                    \"type\": \"event\"\n+                }\n+            ],\n+            \"eventToDisplay\": {\n+                \"id\": \"017ecb28-9e06-0001-a095-03bce962e8d0\",\n+                \"pointsInTime\": {\n+                    \"domComplete\": {\n+                        \"time\": 2798.3,\n+                        \"color\": \"hsl(135, 40%, 74%)\"\n                     },\n-                    {\n-                        \"id\": \"017e6ed3-065c-0000-88a0-a2c984844be4\",\n-                        \"name\": \"$geoip_country_code\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"String\",\n-                        \"is_event_property\": null\n+                    \"domInteractive\": {\n+                        \"time\": 775,\n+                        \"color\": \"hsl(135, 100%, 14%)\"\n                     },\n-                    {\n-                        \"id\": \"017e6ed3-0658-0000-888d-acff1a3b04db\",\n-                        \"name\": \"$geoip_country_name\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"String\",\n-                        \"is_event_property\": null\n+                    \"pageLoaded\": {\n+                        \"time\": 2802.5,\n+                        \"color\": \"hsl(155, 60%, 54%)\"\n+                    }\n+                },\n+                \"resourceTimings\": [\n+                    {\n+                        \"item\": \"http://127.0.0.1:8000/web-performance?properties=%5B%7B%22key%22%3A%22%24performance_page_loaded%22%2C%22value%22%3A%222700%22%2C%22operator%22%3A%22gt%22%2C%22type%22%3A%22event%22%7D%2C%7B%22key%22%3A%22%24browser%22%2C%22value%22%3A%22is_set%22%2C%22operator%22%3A%22is_set%22%2C%22type%22%3A%22event%22%7D%5D\",\n+                        \"performanceParts\": {\n+                            \"app cache\": {\n+                                \"start\": 3.2,\n+                                \"end\": 3.2,\n+                                \"color\": \"hsl(235, 60%, 34%)\"\n+                            },\n+                            \"dns lookup\": {\n+                                \"start\": 3.2,\n+                                \"end\": 3.2,\n+                                \"color\": \"hsl(235, 60%, 34%)\"\n+                            },\n+                            \"connection time\": {\n+                                \"start\": 3.2,\n+                                \"end\": 3.2,\n+                                \"color\": \"hsl(235, 60%, 34%)\"\n+                            },\n+                            \"waiting for first byte (TTFB)\": {\n+                                \"start\": 24.9,\n+                                \"end\": 500.4,\n+                                \"color\": \"hsl(235, 60%, 34%)\"\n+                            },\n+                            \"receiving response\": {\n+                                \"start\": 500.4,\n+                                \"end\": 504.2,\n+                                \"color\": \"hsl(235, 60%, 34%)\"\n+                            },\n+                            \"document processing\": {\n+                                \"start\": 504.2,\n+                                \"end\": 2802.5,\n+                                \"color\": \"hsl(235, 60%, 34%)\"\n+                            }\n+                        },\n+                        \"entry\": {\n+                            \"name\": \"http://127.0.0.1:8000/web-performance?properties=%5B%7B%22key%22%3A%22%24performance_page_loaded%22%2C%22value%22%3A%222700%22%2C%22operator%22%3A%22gt%22%2C%22type%22%3A%22event%22%7D%2C%7B%22key%22%3A%22%24browser%22%2C%22value%22%3A%22is_set%22%2C%22operator%22%3A%22is_set%22%2C%22type%22%3A%22event%22%7D%5D\",\n+                            \"entryType\": \"navigation\",\n+                            \"duration\": 2802.5,\n+                            \"initiatorType\": \"navigation\",\n+                            \"fetchStart\": 3.2,\n+                            \"domainLookupStart\": 3.2,\n+                            \"domainLookupEnd\": 3.2,\n+                            \"connectStart\": 3.2,\n+                            \"connectEnd\": 3.2,\n+                            \"requestStart\": 24.9,\n+                            \"responseStart\": 500.4,\n+                            \"responseEnd\": 504.2,\n+                            \"transferSize\": 34955,\n+                            \"encodedBodySize\": 34655,\n+                            \"decodedBodySize\": 34655,\n+                            \"unloadEventStart\": 517.1,\n+                            \"unloadEventEnd\": 533.7,\n+                            \"domInteractive\": 775,\n+                            \"domContentLoadedEventStart\": 775,\n+                            \"domContentLoadedEventEnd\": 826.2,\n+                            \"domComplete\": 2798.3,\n+                            \"loadEventStart\": 2802.4,\n+                            \"loadEventEnd\": 2802.5,\n+                            \"type\": \"reload\"\n+                        }\n                     },\n                     {\n-                        \"id\": \"017e6ed3-0667-0000-1b8b-6a812530cd7b\",\n-                        \"name\": \"$geoip_latitude\",\n-                        \"is_numerical\": true,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"Numeric\",\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/index.css?t=1644085891439\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/index.css?t=1644085891439\",\n+                            \"startTime\": 739.8,\n+                            \"duration\": 1715.1,\n+                            \"initiatorType\": \"link\",\n+                            \"fetchStart\": 739.8,\n+                            \"responseEnd\": 2454.9\n+                        },\n+                        \"color\": \"hsl(85, 60%, 14%)\"\n                     },\n                     {\n-                        \"id\": \"017e6ed3-066b-0000-a943-cd0b3a028548\",\n-                        \"name\": \"$geoip_longitude\",\n-                        \"is_numerical\": true,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"Numeric\",\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/index.js?t=1644085891439\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/index.js?t=1644085891439\",\n+                            \"startTime\": 740,\n+                            \"duration\": 1701.3,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 740,\n+                            \"responseEnd\": 2441.3\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e6ed3-0665-0001-2003-f018529be24a\",\n-                        \"name\": \"$geoip_postal_code\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"String\",\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-YPFMJDM4.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-YPFMJDM4.js\",\n+                            \"startTime\": 740.7,\n+                            \"duration\": 1700.4,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 740.7,\n+                            \"responseEnd\": 2441.1\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e6ed3-0673-0000-3813-1b6d9cd273f7\",\n-                        \"name\": \"$geoip_subdivision_1_code\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"String\",\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-XF34ZH23.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-XF34ZH23.js\",\n+                            \"startTime\": 740.8,\n+                            \"duration\": 1718.3,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 740.8,\n+                            \"responseEnd\": 2459.1\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e6ed3-0677-0000-b42d-e2889bb1f978\",\n-                        \"name\": \"$geoip_subdivision_1_name\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"String\",\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-5MMMF5K7.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-5MMMF5K7.js\",\n+                            \"startTime\": 741,\n+                            \"duration\": 1709.7,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 741,\n+                            \"responseEnd\": 2450.7\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e6ed3-066f-0000-60f5-1c6d553df7c2\",\n-                        \"name\": \"$geoip_time_zone\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"String\",\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-INAGIC7G.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-INAGIC7G.js\",\n+                            \"startTime\": 741.1,\n+                            \"duration\": 1745.8,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 741.1,\n+                            \"responseEnd\": 2486.9\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e6d93-9f48-0000-bfda-52ce3cf12d58\",\n-                        \"name\": \"$host\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"String\",\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-I3Q2CDVZ.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-I3Q2CDVZ.js\",\n+                            \"startTime\": 741.1,\n+                            \"duration\": 1749.4,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 741.1,\n+                            \"responseEnd\": 2490.5\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e6d93-9f78-0000-8507-af9b5ee0bcc4\",\n-                        \"name\": \"$initial_referrer\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"String\",\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-R2J2AFYA.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-R2J2AFYA.js\",\n+                            \"startTime\": 741.2,\n+                            \"duration\": 1748.7,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 741.2,\n+                            \"responseEnd\": 2489.9\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e6d93-9f7c-0000-e32c-bf1c7eeb7843\",\n-                        \"name\": \"$initial_referring_domain\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"String\",\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-JABUHWMZ.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-JABUHWMZ.js\",\n+                            \"startTime\": 741.4,\n+                            \"duration\": 1767.1,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 741.4,\n+                            \"responseEnd\": 2508.5\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e6d93-9f6c-0000-c2f8-7b7e7eef8ec0\",\n-                        \"name\": \"$insert_id\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"String\",\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-LRA7UZ2C.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-LRA7UZ2C.js\",\n+                            \"startTime\": 741.4,\n+                            \"duration\": 1766.4,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 741.4,\n+                            \"responseEnd\": 2507.8\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e6d93-9edb-0000-acad-a46414fb1059\",\n-                        \"name\": \"$ip\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"String\",\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-MILJQ7RK.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-MILJQ7RK.js\",\n+                            \"startTime\": 741.5,\n+                            \"duration\": 1767.1,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 741.5,\n+                            \"responseEnd\": 2508.6\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e6d93-9f64-0000-abcb-d9076c5ea175\",\n-                        \"name\": \"$lib\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"String\",\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-A3WPL726.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-A3WPL726.js\",\n+                            \"startTime\": 741.7,\n+                            \"duration\": 1783.5,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 741.7,\n+                            \"responseEnd\": 2525.2\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e6d93-9f68-0000-67da-ff92ba4ba87a\",\n-                        \"name\": \"$lib_version\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"String\",\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-OZGU6W75.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-OZGU6W75.js\",\n+                            \"startTime\": 741.7,\n+                            \"duration\": 1783.6,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 741.7,\n+                            \"responseEnd\": 2525.3\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e6d93-9f34-0000-6f6c-c324f0bdf06c\",\n-                        \"name\": \"$os\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"String\",\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-5WYOWOVT.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-5WYOWOVT.js\",\n+                            \"startTime\": 741.8,\n+                            \"duration\": 1785.1,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 741.8,\n+                            \"responseEnd\": 2526.9\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e6d93-9f4c-0000-4926-0cf4dccaaf54\",\n-                        \"name\": \"$pathname\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"String\",\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-BP26XGN6.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-BP26XGN6.js\",\n+                            \"startTime\": 741.8,\n+                            \"duration\": 1810.4,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 741.8,\n+                            \"responseEnd\": 2552.2\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e6d93-9f8f-0000-7bac-012e9c59732d\",\n-                        \"name\": \"$performance_page_loaded\",\n-                        \"is_numerical\": true,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"Numeric\",\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-6SFOWN5U.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-6SFOWN5U.js\",\n+                            \"startTime\": 753.9,\n+                            \"duration\": 1794,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 753.9,\n+                            \"responseEnd\": 2547.9\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e6d93-9f92-0000-9a45-d422a7835104\",\n-                        \"name\": \"$performance_raw\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"String\",\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-25TTUT3N.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-25TTUT3N.js\",\n+                            \"startTime\": 754.2,\n+                            \"duration\": 1794.3,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 754.2,\n+                            \"responseEnd\": 2548.5\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e6ed3-0682-0000-8824-60721fdb0e7a\",\n-                        \"name\": \"$plugins_deferred\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-UDRKU2XS.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-UDRKU2XS.js\",\n+                            \"startTime\": 754.2,\n+                            \"duration\": 1810.9,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 754.2,\n+                            \"responseEnd\": 2565.1\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e6ed3-067f-0000-9e1c-85094a9e662b\",\n-                        \"name\": \"$plugins_failed\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-KCJGXE5M.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-KCJGXE5M.js\",\n+                            \"startTime\": 754.4,\n+                            \"duration\": 1809.9,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 754.4,\n+                            \"responseEnd\": 2564.3\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e6ed3-067c-0001-e595-90391078a060\",\n-                        \"name\": \"$plugins_succeeded\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-HED4XUT2.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-HED4XUT2.js\",\n+                            \"startTime\": 754.6,\n+                            \"duration\": 1813.2,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 754.6,\n+                            \"responseEnd\": 2567.8\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e6d93-9f7f-0000-cb66-f5ff6c62ebc9\",\n-                        \"name\": \"$referrer\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"String\",\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-QGGM6NUR.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-QGGM6NUR.js\",\n+                            \"startTime\": 754.7,\n+                            \"duration\": 1828.2,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 754.7,\n+                            \"responseEnd\": 2582.9\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e6d93-9f83-0000-2d5e-65f40219fcf8\",\n-                        \"name\": \"$referring_domain\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"String\",\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-4YYGW3TC.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-4YYGW3TC.js\",\n+                            \"startTime\": 754.7,\n+                            \"duration\": 1828.3,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 754.7,\n+                            \"responseEnd\": 2583\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e6d93-9f54-0000-da4a-eee58d3345c3\",\n-                        \"name\": \"$screen_height\",\n-                        \"is_numerical\": true,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"Numeric\",\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-MQF2FLOV.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-MQF2FLOV.js\",\n+                            \"startTime\": 754.9,\n+                            \"duration\": 1834.4,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 754.9,\n+                            \"responseEnd\": 2589.3\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e6d93-9f57-0000-f3d7-d9e95891c4b2\",\n-                        \"name\": \"$screen_width\",\n-                        \"is_numerical\": true,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"Numeric\",\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-EOM6WIAG.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-EOM6WIAG.js\",\n+                            \"startTime\": 755,\n+                            \"duration\": 1838.1,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 755,\n+                            \"responseEnd\": 2593.1\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e6d93-9f89-0000-386d-293116cb94f1\",\n-                        \"name\": \"$session_id\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"String\",\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-AXH4YZAR.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-AXH4YZAR.js\",\n+                            \"startTime\": 755.1,\n+                            \"duration\": 1838.4,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 755.1,\n+                            \"responseEnd\": 2593.5\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e6d93-9f6f-0000-e79e-1b77080086bb\",\n-                        \"name\": \"$time\",\n-                        \"is_numerical\": true,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"DateTime\",\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-FQHAJZGM.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-FQHAJZGM.js\",\n+                            \"startTime\": 755.1,\n+                            \"duration\": 1844.4,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 755.1,\n+                            \"responseEnd\": 2599.5\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e6d93-a33f-0000-5f70-ca8de8dd81cc\",\n-                        \"name\": \"$user_id\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"String\",\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-XPGE43VJ.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-XPGE43VJ.js\",\n+                            \"startTime\": 755.3,\n+                            \"duration\": 1849,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 755.3,\n+                            \"responseEnd\": 2604.3\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e6d93-9f5b-0000-2f48-fbba6db34479\",\n-                        \"name\": \"$viewport_height\",\n-                        \"is_numerical\": true,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"Numeric\",\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-RQJ43M5U.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-RQJ43M5U.js\",\n+                            \"startTime\": 755.3,\n+                            \"duration\": 1851.6,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 755.3,\n+                            \"responseEnd\": 2606.9\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e6d93-9f5e-0000-efb2-cedeaef86c06\",\n-                        \"name\": \"$viewport_width\",\n-                        \"is_numerical\": true,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"Numeric\",\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-L4IYGZIG.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-L4IYGZIG.js\",\n+                            \"startTime\": 755.5,\n+                            \"duration\": 1853.2,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 755.5,\n+                            \"responseEnd\": 2608.7\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e6d93-9f8c-0000-4f2d-e6b62225ca53\",\n-                        \"name\": \"$window_id\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"String\",\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-IGTMCF24.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-IGTMCF24.js\",\n+                            \"startTime\": 755.5,\n+                            \"duration\": 1861.6,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 755.5,\n+                            \"responseEnd\": 2617.1\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e7c2d-d340-0000-839c-c0988fac29b0\",\n-                        \"name\": \"action_count\",\n-                        \"is_numerical\": true,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"Numeric\",\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-AMOE3OJU.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-AMOE3OJU.js\",\n+                            \"startTime\": 755.6,\n+                            \"duration\": 1862.6,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 755.6,\n+                            \"responseEnd\": 2618.2\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e72d2-65e8-0000-c263-446726f9ea8d\",\n-                        \"name\": \"actions_count\",\n-                        \"is_numerical\": true,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"Numeric\",\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-BO4VDBQ6.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-BO4VDBQ6.js\",\n+                            \"startTime\": 755.8,\n+                            \"duration\": 1877.5,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 755.8,\n+                            \"responseEnd\": 2633.3\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e72d2-65f7-0000-1eee-41f8d98a9354\",\n-                        \"name\": \"aggregating_by_groups\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-QE52CDVG.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-QE52CDVG.js\",\n+                            \"startTime\": 755.8,\n+                            \"duration\": 1879.8,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 755.8,\n+                            \"responseEnd\": 2635.6\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e7376-2458-0000-48a0-b45945158ccd\",\n-                        \"name\": \"breakdown\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"String\",\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-VHSG55N2.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-VHSG55N2.js\",\n+                            \"startTime\": 755.9,\n+                            \"duration\": 1878.4,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 755.9,\n+                            \"responseEnd\": 2634.3\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e72d2-65f9-0000-a4a9-7c4c7fcdf221\",\n-                        \"name\": \"breakdown_by_groups\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-4ZUV5LND.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-4ZUV5LND.js\",\n+                            \"startTime\": 756,\n+                            \"duration\": 1901.5,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 756,\n+                            \"responseEnd\": 2657.5\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e7376-2455-0000-3ca3-c548cd478df9\",\n-                        \"name\": \"breakdown_type\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"String\",\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-ASGLZXIV.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-ASGLZXIV.js\",\n+                            \"startTime\": 756,\n+                            \"duration\": 1901.8,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 756,\n+                            \"responseEnd\": 2657.8\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e72d2-7c9c-0000-62a0-3b63b07e6410\",\n-                        \"name\": \"changed_breakdown\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-HGNVPWDY.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-HGNVPWDY.js\",\n+                            \"startTime\": 756.1,\n+                            \"duration\": 1901.3,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 756.1,\n+                            \"responseEnd\": 2657.4\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e72d2-7ca1-0000-395f-10cd203e8e11\",\n-                        \"name\": \"changed_breakdown_group_type_index\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-PRPBRI2E.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-PRPBRI2E.js\",\n+                            \"startTime\": 756.3,\n+                            \"duration\": 1908.6,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 756.3,\n+                            \"responseEnd\": 2664.9\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e72d2-7c9f-0000-e348-58da1cadf6ae\",\n-                        \"name\": \"changed_breakdown_type\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-LD3TGMGW.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-LD3TGMGW.js\",\n+                            \"startTime\": 756.3,\n+                            \"duration\": 1908.8,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 756.3,\n+                            \"responseEnd\": 2665.1\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e72d2-7c99-0000-f8c9-c92f18b979ef\",\n-                        \"name\": \"changed_breakdowns\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-CA6FFFUC.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-CA6FFFUC.js\",\n+                            \"startTime\": 756.4,\n+                            \"duration\": 1908.6,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 756.4,\n+                            \"responseEnd\": 2665\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e72d9-acaf-0000-d9c3-e35936b79c0c\",\n-                        \"name\": \"changed_date_from\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-YBU6RJ5N.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-YBU6RJ5N.js\",\n+                            \"startTime\": 756.4,\n+                            \"duration\": 1914.8,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 756.4,\n+                            \"responseEnd\": 2671.2\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e72d9-acb1-0000-903c-f83f8900cf29\",\n-                        \"name\": \"changed_date_to\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-HB4RLT5O.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-HB4RLT5O.js\",\n+                            \"startTime\": 756.5,\n+                            \"duration\": 1915.5,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 756.5,\n+                            \"responseEnd\": 2672\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e7c2d-de3b-0000-55f3-459380432d16\",\n-                        \"name\": \"changed_display\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"String\",\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-UJJIEZBP.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-UJJIEZBP.js\",\n+                            \"startTime\": 756.6,\n+                            \"duration\": 1915.7,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 756.6,\n+                            \"responseEnd\": 2672.3\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e7c2d-f63d-0000-313e-fcd4412f65f9\",\n-                        \"name\": \"changed_edge_limit\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-KXP7VI6L.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-KXP7VI6L.js\",\n+                            \"startTime\": 756.7,\n+                            \"duration\": 1922.4,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 756.7,\n+                            \"responseEnd\": 2679.1\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e7c2d-f60b-0000-1874-97c3451e10ba\",\n-                        \"name\": \"changed_end_point\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-OHMX2FMJ.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-OHMX2FMJ.js\",\n+                            \"startTime\": 757.1,\n+                            \"duration\": 1921.9,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 757.1,\n+                            \"responseEnd\": 2679\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e72d2-7c94-0000-502d-18a6c495f240\",\n-                        \"name\": \"changed_filter_test_accounts\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-EEOHMXMI.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-EEOHMXMI.js\",\n+                            \"startTime\": 757.3,\n+                            \"duration\": 1926.3,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 757.3,\n+                            \"responseEnd\": 2683.6\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e7c2d-de47-0000-a254-8e5754693f4b\",\n-                        \"name\": \"changed_funnel_correlation_person_converted\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-ATKSJCQX.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-ATKSJCQX.js\",\n+                            \"startTime\": 757.3,\n+                            \"duration\": 1937.4,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 757.3,\n+                            \"responseEnd\": 2694.7\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e7c2d-de44-0000-4744-c274900e3e2f\",\n-                        \"name\": \"changed_funnel_correlation_person_entity\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-CAEMAXLK.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-CAEMAXLK.js\",\n+                            \"startTime\": 757.4,\n+                            \"duration\": 1974,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 757.4,\n+                            \"responseEnd\": 2731.4\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e7c2d-de4a-0000-5ee7-ece31511d827\",\n-                        \"name\": \"changed_funnel_custom_steps\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-OBAYCOOK.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-OBAYCOOK.js\",\n+                            \"startTime\": 757.4,\n+                            \"duration\": 2015.8,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 757.4,\n+                            \"responseEnd\": 2773.2\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e7c2d-f62b-0000-cbde-520862b1a984\",\n-                        \"name\": \"changed_funnel_filter\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-VJGIAYQC.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-VJGIAYQC.js\",\n+                            \"startTime\": 757.5,\n+                            \"duration\": 1955.4,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 757.5,\n+                            \"responseEnd\": 2712.9\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e7c2d-de4c-0000-4a71-e9176122f347\",\n-                        \"name\": \"changed_funnel_from_step\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                        \"item\": \"http://127.0.0.1:8000/e/?ip=1&_=1644085939776\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://127.0.0.1:8000/e/?ip=1&_=1644085939776\",\n+                            \"startTime\": 2982,\n+                            \"duration\": 252.2,\n+                            \"initiatorType\": \"xmlhttprequest\",\n+                            \"fetchStart\": 2982,\n+                            \"responseEnd\": 3234.2\n+                        },\n+                        \"color\": \"hsl(205, 60%, 34%)\"\n                     },\n                     {\n-                        \"id\": \"017e7c2d-f635-0000-3ecd-a4b4482c896e\",\n-                        \"name\": \"changed_funnel_paths\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                        \"item\": \"http://127.0.0.1:8000/decide/?v=2&ip=1&_=1644085939777\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://127.0.0.1:8000/decide/?v=2&ip=1&_=1644085939777\",\n+                            \"startTime\": 2983.2,\n+                            \"duration\": 366.5,\n+                            \"initiatorType\": \"xmlhttprequest\",\n+                            \"fetchStart\": 2983.2,\n+                            \"responseEnd\": 3349.7\n+                        },\n+                        \"color\": \"hsl(205, 60%, 34%)\"\n                     },\n                     {\n-                        \"id\": \"017e7c2d-de3e-0000-024b-5cb387b2458c\",\n-                        \"name\": \"changed_funnel_to_step\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                        \"item\": \"http://127.0.0.1:8000/engage/?ip=1&_=1644085939803\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://127.0.0.1:8000/engage/?ip=1&_=1644085939803\",\n+                            \"startTime\": 3009.2,\n+                            \"duration\": 296.3,\n+                            \"initiatorType\": \"xmlhttprequest\",\n+                            \"fetchStart\": 3009.2,\n+                            \"responseEnd\": 3305.5\n+                        },\n+                        \"color\": \"hsl(205, 60%, 34%)\"\n                     },\n                     {\n-                        \"id\": \"017e7c2d-de41-0000-a010-1a4d85b2b395\",\n-                        \"name\": \"changed_funnel_viz_type\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/WebPerformance-TDTY5JT5.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/WebPerformance-TDTY5JT5.js\",\n+                            \"startTime\": 3042.1,\n+                            \"duration\": 38.3,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 3042.1,\n+                            \"responseEnd\": 3080.4\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e7c2d-f616-0000-cb4c-a36d11a76a2f\",\n-                        \"name\": \"changed_include_event_types\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                        \"item\": \"http://127.0.0.1:8000/static/icons/favicon-dev.ico?v=2021-04-29\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://127.0.0.1:8000/static/icons/favicon-dev.ico?v=2021-04-29\",\n+                            \"startTime\": 3050.1,\n+                            \"duration\": 205,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 3050.1,\n+                            \"responseEnd\": 3255.1\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e7c2d-de38-0000-9e12-9fa880819b46\",\n-                        \"name\": \"changed_insight\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"String\",\n-                        \"is_event_property\": null\n+                        \"item\": \"http://127.0.0.1:8000/static/site.webmanifest?v=2021-04-29\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://127.0.0.1:8000/static/site.webmanifest?v=2021-04-29\",\n+                            \"startTime\": 3148.9,\n+                            \"duration\": 23.7,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 3148.9,\n+                            \"responseEnd\": 3172.6\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e7c2d-f644-0000-4ef7-3b2f87e55a23\",\n-                        \"name\": \"changed_max_edge_weight\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-F5T7ECZG.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-F5T7ECZG.js\",\n+                            \"startTime\": 3155.1,\n+                            \"duration\": 18.2,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 3155.1,\n+                            \"responseEnd\": 3173.3\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e7c2d-f640-0000-6e0a-9d00af8d051f\",\n-                        \"name\": \"changed_min_edge_weight\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-ZYLXYU4K.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-ZYLXYU4K.js\",\n+                            \"startTime\": 3155.3,\n+                            \"duration\": 29.9,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 3155.3,\n+                            \"responseEnd\": 3185.2\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e7c2d-f627-0000-83f4-571349e08474\",\n-                        \"name\": \"changed_path_dropoff_key\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-Y4DLHNYM.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-Y4DLHNYM.js\",\n+                            \"startTime\": 3155.4,\n+                            \"duration\": 31,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 3155.4,\n+                            \"responseEnd\": 3186.4\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e7c2d-f625-0000-d4d5-587efa2f8def\",\n-                        \"name\": \"changed_path_end_key\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-YQPLUSZK.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-YQPLUSZK.js\",\n+                            \"startTime\": 3155.4,\n+                            \"duration\": 39.8,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 3155.4,\n+                            \"responseEnd\": 3195.2\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e7c2d-f639-0000-8e99-94de59fb52fd\",\n-                        \"name\": \"changed_path_replacements\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-ZCRZKRW7.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-ZCRZKRW7.js\",\n+                            \"startTime\": 3155.4,\n+                            \"duration\": 40.6,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 3155.4,\n+                            \"responseEnd\": 3196\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e7c2d-f620-0000-faa4-b258be0b14af\",\n-                        \"name\": \"changed_path_start_key\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-AVSAWBKG.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-AVSAWBKG.js\",\n+                            \"startTime\": 3155.5,\n+                            \"duration\": 47.9,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 3155.5,\n+                            \"responseEnd\": 3203.4\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e7c2d-f612-0000-b7e5-8b75bb5f16f2\",\n-                        \"name\": \"changed_path_type\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-NPPZ6HM3.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-NPPZ6HM3.js\",\n+                            \"startTime\": 3155.5,\n+                            \"duration\": 48.6,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 3155.5,\n+                            \"responseEnd\": 3204.1\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e7c2d-ea4e-0000-d674-7fe4e52e7a98\",\n-                        \"name\": \"changed_period\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-OSKNBHDN.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-OSKNBHDN.js\",\n+                            \"startTime\": 3155.5,\n+                            \"duration\": 62.6,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 3155.5,\n+                            \"responseEnd\": 3218.1\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e72d2-7c97-0000-0d39-ba949a836b57\",\n-                        \"name\": \"changed_properties\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-T7SYQIYY.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-T7SYQIYY.js\",\n+                            \"startTime\": 3155.6,\n+                            \"duration\": 62.7,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 3155.6,\n+                            \"responseEnd\": 3218.3\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e7c2d-ea54-0000-4776-5a9e18e3d532\",\n-                        \"name\": \"changed_retention_reference\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-H2BXVWDT.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-H2BXVWDT.js\",\n+                            \"startTime\": 3155.6,\n+                            \"duration\": 77.5,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 3155.6,\n+                            \"responseEnd\": 3233.1\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e7c2d-ea50-0000-3257-8cae8c029576\",\n-                        \"name\": \"changed_retention_type\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/chunk-SGDHQOX6.js\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/chunk-SGDHQOX6.js\",\n+                            \"startTime\": 3155.6,\n+                            \"duration\": 77.6,\n+                            \"initiatorType\": \"other\",\n+                            \"fetchStart\": 3155.6,\n+                            \"responseEnd\": 3233.2\n+                        },\n+                        \"color\": \"hsl(205, 100%, 74%)\"\n                     },\n                     {\n-                        \"id\": \"017e7c2d-ea4b-0000-8beb-943ffb7802bf\",\n-                        \"name\": \"changed_returning_entity\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                        \"item\": \"http://localhost:8234/static/toolbar.js?_ts=1644085940146\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://localhost:8234/static/toolbar.js?_ts=1644085940146\",\n+                            \"startTime\": 3351.5,\n+                            \"duration\": 97.8,\n+                            \"initiatorType\": \"script\",\n+                            \"fetchStart\": 3351.5,\n+                            \"responseEnd\": 3449.3\n+                        },\n+                        \"color\": \"hsl(85, 60%, 34%)\"\n                     },\n                     {\n-                        \"id\": \"017e72d2-7ca3-0000-cc98-40ce2388ad99\",\n-                        \"name\": \"changed_shown_as\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                        \"item\": \"http://127.0.0.1:8000/api/projects/1/actions/\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://127.0.0.1:8000/api/projects/1/actions/\",\n+                            \"startTime\": 3357,\n+                            \"duration\": 201,\n+                            \"initiatorType\": \"fetch\",\n+                            \"fetchStart\": 3357,\n+                            \"responseEnd\": 3558\n+                        },\n+                        \"color\": \"hsl(205, 60%, 14%)\"\n                     },\n                     {\n-                        \"id\": \"017e7c2d-f608-0000-e9a3-4cca3ffea649\",\n-                        \"name\": \"changed_start_point\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                        \"item\": \"http://127.0.0.1:8000/api/projects/1/annotations/?scope=organization&deleted=false\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://127.0.0.1:8000/api/projects/1/annotations/?scope=organization&deleted=false\",\n+                            \"startTime\": 3357.9,\n+                            \"duration\": 204.3,\n+                            \"initiatorType\": \"fetch\",\n+                            \"fetchStart\": 3357.9,\n+                            \"responseEnd\": 3562.2\n+                        },\n+                        \"color\": \"hsl(205, 60%, 14%)\"\n                     },\n                     {\n-                        \"id\": \"017e7c2d-f60f-0000-795a-f93f7caa5a4c\",\n-                        \"name\": \"changed_step_limit\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                        \"item\": \"http://127.0.0.1:8000/api/projects/1/cohorts?limit=600\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"http://127.0.0.1:8000/api/projects/1/cohorts?limit=600\",\n+                            \"startTime\": 3358.5,\n+                            \"duration\": 192.5,\n+                            \"initiatorType\": \"fetch\",\n+                            \"fetchStart\": 3358.5,\n+                            \"responseEnd\": 3551\n+                        },\n+                        \"color\": \"hsl(205, 60%, 14%)\"\n                     },\n                     {\n-                        \"id\": \"017e7c2d-ea49-0000-b04b-303d9bf4f437\",\n-                        \"name\": \"changed_target_entity\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                        \"item\": \"https://update.posthog.com/\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"https://update.posthog.com/\",\n+                            \"startTime\": 3371.8,\n+                            \"duration\": 85.7,\n+                            \"initiatorType\": \"fetch\",\n+                            \"fetchStart\": 3371.8,\n+                            \"responseEnd\": 3457.5\n+                        },\n+                        \"color\": \"hsl(205, 60%, 14%)\"\n                     },\n                     {\n-                        \"id\": \"017e6ee2-4dfd-0000-f6da-aa9a5db1c827\",\n-                        \"name\": \"component\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"String\",\n-                        \"is_event_property\": null\n+                        \"item\": \"https://www.gravatar.com/avatar/2e7d95b60efbe947f71009a1af1ba8d0?s=96&d=404\",\n+                        \"performanceParts\": {},\n+                        \"entry\": {\n+                            \"name\": \"https://www.gravatar.com/avatar/2e7d95b60efbe947f71009a1af1ba8d0?s=96&d=404\",\n+                            \"startTime\": 3431.7,\n+                            \"duration\": 124.9,\n+                            \"initiatorType\": \"img\",\n+                            \"fetchStart\": 3431.7,\n+                            \"responseEnd\": 3556.6\n+                        },\n+                        \"color\": \"hsl(235, 60%, 34%)\"\n+                    }\n+                ],\n+                \"maxTime\": 3562.2,\n+                \"gridMarkers\": [\n+                    0, 356.21999999999997, 712.4399999999999, 1068.6599999999999, 1424.8799999999999, 1781.1,\n+                    2137.3199999999997, 2493.54, 2849.7599999999998, 3205.9799999999996\n+                ]\n+            },\n+            \"currentEvent\": {\n+                \"id\": \"017ecb28-9e06-0001-a095-03bce962e8d0\",\n+                \"distinct_id\": \"F3RTp6GByAuqUkpsUUjzKTQlmJzIQTFoX44fKup95BC\",\n+                \"properties\": {\n+                    \"$os\": \"Mac OS X\",\n+                    \"$browser\": \"Chrome\",\n+                    \"$device_type\": \"Desktop\",\n+                    \"$current_url\": \"http://127.0.0.1:8000/web-performance?properties=%5B%7B%22key%22%3A%22%24performance_page_loaded%22%2C%22value%22%3A%222700%22%2C%22operator%22%3A%22gt%22%2C%22type%22%3A%22event%22%7D%2C%7B%22key%22%3A%22%24browser%22%2C%22value%22%3A%22is_set%22%2C%22operator%22%3A%22is_set%22%2C%22type%22%3A%22event%22%7D%5D\",\n+                    \"$host\": \"127.0.0.1:8000\",\n+                    \"$pathname\": \"/web-performance\",\n+                    \"$browser_version\": 97,\n+                    \"$screen_height\": 982,\n+                    \"$screen_width\": 1512,\n+                    \"$viewport_height\": 833,\n+                    \"$viewport_width\": 949,\n+                    \"$lib\": \"web\",\n+                    \"$lib_version\": \"1.17.8\",\n+                    \"$insert_id\": \"qanhhl0hbdhecrvv\",\n+                    \"$time\": 1644085940.54,\n+                    \"distinct_id\": \"F3RTp6GByAuqUkpsUUjzKTQlmJzIQTFoX44fKup95BC\",\n+                    \"$device_id\": \"17eca8c073990-02b888033df436-133a6253-16a7f0-17eca8c073a11b6\",\n+                    \"$user_id\": \"F3RTp6GByAuqUkpsUUjzKTQlmJzIQTFoX44fKup95BC\",\n+                    \"$initial_referrer\": \"http://127.0.0.1:8000/login\",\n+                    \"$initial_referring_domain\": \"127.0.0.1:8000\",\n+                    \"$referrer\": \"http://127.0.0.1:8000/web-performance?properties=%5B%7B%22key%22%3A%22%24performance_page_loaded%22%2C%22value%22%3A%222700%22%2C%22operator%22%3A%22gt%22%2C%22type%22%3A%22event%22%7D%2C%7B%22key%22%3A%22%24browser%22%2C%22value%22%3A%22is_set%22%2C%22operator%22%3A%22is_set%22%2C%22type%22%3A%22event%22%7D%5D\",\n+                    \"$referring_domain\": \"127.0.0.1:8000\",\n+                    \"is_demo_project\": false,\n+                    \"$groups\": {\n+                        \"project\": \"017eca8c-03d9-0000-45ef-b1d4ecab7048\",\n+                        \"organization\": \"017eca8b-fdce-0000-6923-f64fc0d0edac\",\n+                        \"instance\": \"http://localhost:8000\"\n                     },\n-                    {\n-                        \"id\": \"017e72ae-be20-0000-a352-3efe0c6a4f7a\",\n-                        \"name\": \"created_at\",\n-                        \"is_numerical\": false,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"DateTime\",\n-                        \"is_event_property\": null\n+                    \"posthog_version\": \"1.32.0\",\n+                    \"realm\": \"hosted-clickhouse\",\n+                    \"email_service_available\": false,\n+                    \"$session_recording_enabled\": false,\n+                    \"$active_feature_flags\": [\"hackathon-apm\", \"6619-query-events-by-date\"],\n+                    \"$feature/hackathon-apm\": true,\n+                    \"$feature/6619-query-events-by-date\": true,\n+                    \"token\": \"phc_k6AJ5lImHZHzO7uBX5PBWPL0EmSrHEATJfaXOWREOAJ\",\n+                    \"$session_id\": \"17ecb1b70dcd31-0d4473129efd62-133a6253-16a7f0-17ecb1b70ddb94\",\n+                    \"$window_id\": \"17ecb1b70de1df-04e23a807879ce-133a6253-16a7f0-17ecb1b70dfdf3\",\n+                    \"$performance_page_loaded\": 2802.5,\n+                    \"$performance_raw\": \"{\\\"navigation\\\":[[\\\"name\\\",\\\"entryType\\\",\\\"duration\\\",\\\"initiatorType\\\",\\\"fetchStart\\\",\\\"domainLookupStart\\\",\\\"domainLookupEnd\\\",\\\"connectStart\\\",\\\"connectEnd\\\",\\\"requestStart\\\",\\\"responseStart\\\",\\\"responseEnd\\\",\\\"transferSize\\\",\\\"encodedBodySize\\\",\\\"decodedBodySize\\\",\\\"unloadEventStart\\\",\\\"unloadEventEnd\\\",\\\"domInteractive\\\",\\\"domContentLoadedEventStart\\\",\\\"domContentLoadedEventEnd\\\",\\\"domComplete\\\",\\\"loadEventStart\\\",\\\"loadEventEnd\\\",\\\"type\\\"],[[\\\"http://127.0.0.1:8000/web-performance?properties=%5B%7B%22key%22%3A%22%24performance_page_loaded%22%2C%22value%22%3A%222700%22%2C%22operator%22%3A%22gt%22%2C%22type%22%3A%22event%22%7D%2C%7B%22key%22%3A%22%24browser%22%2C%22value%22%3A%22is_set%22%2C%22operator%22%3A%22is_set%22%2C%22type%22%3A%22event%22%7D%5D\\\",\\\"navigation\\\",2802.5,\\\"navigation\\\",3.2,3.2,3.2,3.2,3.2,24.9,500.4,504.2,34955,34655,34655,517.1,533.7,775,775,826.2,2798.3,2802.4,2802.5,\\\"reload\\\"]]],\\\"paint\\\":[],\\\"resource\\\":[[\\\"name\\\",\\\"startTime\\\",\\\"duration\\\",\\\"initiatorType\\\",\\\"fetchStart\\\",\\\"responseEnd\\\"],[[\\\"http://localhost:8234/static/index.css?t=1644085891439\\\",739.8,1715.1,\\\"link\\\",739.8,2454.9],[\\\"http://localhost:8234/static/index.js?t=1644085891439\\\",740,1701.3,\\\"other\\\",740,2441.3],[\\\"http://localhost:8234/static/chunk-YPFMJDM4.js\\\",740.7,1700.4,\\\"other\\\",740.7,2441.1],[\\\"http://localhost:8234/static/chunk-XF34ZH23.js\\\",740.8,1718.3,\\\"other\\\",740.8,2459.1],[\\\"http://localhost:8234/static/chunk-5MMMF5K7.js\\\",741,1709.7,\\\"other\\\",741,2450.7],[\\\"http://localhost:8234/static/chunk-INAGIC7G.js\\\",741.1,1745.8,\\\"other\\\",741.1,2486.9],[\\\"http://localhost:8234/static/chunk-I3Q2CDVZ.js\\\",741.1,1749.4,\\\"other\\\",741.1,2490.5],[\\\"http://localhost:8234/static/chunk-R2J2AFYA.js\\\",741.2,1748.7,\\\"other\\\",741.2,2489.9],[\\\"http://localhost:8234/static/chunk-JABUHWMZ.js\\\",741.4,1767.1,\\\"other\\\",741.4,2508.5],[\\\"http://localhost:8234/static/chunk-LRA7UZ2C.js\\\",741.4,1766.4,\\\"other\\\",741.4,2507.8],[\\\"http://localhost:8234/static/chunk-MILJQ7RK.js\\\",741.5,1767.1,\\\"other\\\",741.5,2508.6],[\\\"http://localhost:8234/static/chunk-A3WPL726.js\\\",741.7,1783.5,\\\"other\\\",741.7,2525.2],[\\\"http://localhost:8234/static/chunk-OZGU6W75.js\\\",741.7,1783.6,\\\"other\\\",741.7,2525.3],[\\\"http://localhost:8234/static/chunk-5WYOWOVT.js\\\",741.8,1785.1,\\\"other\\\",741.8,2526.9],[\\\"http://localhost:8234/static/chunk-BP26XGN6.js\\\",741.8,1810.4,\\\"other\\\",741.8,2552.2],[\\\"http://localhost:8234/static/chunk-6SFOWN5U.js\\\",753.9,1794,\\\"other\\\",753.9,2547.9],[\\\"http://localhost:8234/static/chunk-25TTUT3N.js\\\",754.2,1794.3,\\\"other\\\",754.2,2548.5],[\\\"http://localhost:8234/static/chunk-UDRKU2XS.js\\\",754.2,1810.9,\\\"other\\\",754.2,2565.1],[\\\"http://localhost:8234/static/chunk-KCJGXE5M.js\\\",754.4,1809.9,\\\"other\\\",754.4,2564.3],[\\\"http://localhost:8234/static/chunk-HED4XUT2.js\\\",754.6,1813.2,\\\"other\\\",754.6,2567.8],[\\\"http://localhost:8234/static/chunk-QGGM6NUR.js\\\",754.7,1828.2,\\\"other\\\",754.7,2582.9],[\\\"http://localhost:8234/static/chunk-4YYGW3TC.js\\\",754.7,1828.3,\\\"other\\\",754.7,2583],[\\\"http://localhost:8234/static/chunk-MQF2FLOV.js\\\",754.9,1834.4,\\\"other\\\",754.9,2589.3],[\\\"http://localhost:8234/static/chunk-EOM6WIAG.js\\\",755,1838.1,\\\"other\\\",755,2593.1],[\\\"http://localhost:8234/static/chunk-AXH4YZAR.js\\\",755.1,1838.4,\\\"other\\\",755.1,2593.5],[\\\"http://localhost:8234/static/chunk-FQHAJZGM.js\\\",755.1,1844.4,\\\"other\\\",755.1,2599.5],[\\\"http://localhost:8234/static/chunk-XPGE43VJ.js\\\",755.3,1849,\\\"other\\\",755.3,2604.3],[\\\"http://localhost:8234/static/chunk-RQJ43M5U.js\\\",755.3,1851.6,\\\"other\\\",755.3,2606.9],[\\\"http://localhost:8234/static/chunk-L4IYGZIG.js\\\",755.5,1853.2,\\\"other\\\",755.5,2608.7],[\\\"http://localhost:8234/static/chunk-IGTMCF24.js\\\",755.5,1861.6,\\\"other\\\",755.5,2617.1],[\\\"http://localhost:8234/static/chunk-AMOE3OJU.js\\\",755.6,1862.6,\\\"other\\\",755.6,2618.2],[\\\"http://localhost:8234/static/chunk-BO4VDBQ6.js\\\",755.8,1877.5,\\\"other\\\",755.8,2633.3],[\\\"http://localhost:8234/static/chunk-QE52CDVG.js\\\",755.8,1879.8,\\\"other\\\",755.8,2635.6],[\\\"http://localhost:8234/static/chunk-VHSG55N2.js\\\",755.9,1878.4,\\\"other\\\",755.9,2634.3],[\\\"http://localhost:8234/static/chunk-4ZUV5LND.js\\\",756,1901.5,\\\"other\\\",756,2657.5],[\\\"http://localhost:8234/static/chunk-ASGLZXIV.js\\\",756,1901.8,\\\"other\\\",756,2657.8],[\\\"http://localhost:8234/static/chunk-HGNVPWDY.js\\\",756.1,1901.3,\\\"other\\\",756.1,2657.4],[\\\"http://localhost:8234/static/chunk-PRPBRI2E.js\\\",756.3,1908.6,\\\"other\\\",756.3,2664.9],[\\\"http://localhost:8234/static/chunk-LD3TGMGW.js\\\",756.3,1908.8,\\\"other\\\",756.3,2665.1],[\\\"http://localhost:8234/static/chunk-CA6FFFUC.js\\\",756.4,1908.6,\\\"other\\\",756.4,2665],[\\\"http://localhost:8234/static/chunk-YBU6RJ5N.js\\\",756.4,1914.8,\\\"other\\\",756.4,2671.2],[\\\"http://localhost:8234/static/chunk-HB4RLT5O.js\\\",756.5,1915.5,\\\"other\\\",756.5,2672],[\\\"http://localhost:8234/static/chunk-UJJIEZBP.js\\\",756.6,1915.7,\\\"other\\\",756.6,2672.3],[\\\"http://localhost:8234/static/chunk-KXP7VI6L.js\\\",756.7,1922.4,\\\"other\\\",756.7,2679.1],[\\\"http://localhost:8234/static/chunk-OHMX2FMJ.js\\\",757.1,1921.9,\\\"other\\\",757.1,2679],[\\\"http://localhost:8234/static/chunk-EEOHMXMI.js\\\",757.3,1926.3,\\\"other\\\",757.3,2683.6],[\\\"http://localhost:8234/static/chunk-ATKSJCQX.js\\\",757.3,1937.4,\\\"other\\\",757.3,2694.7],[\\\"http://localhost:8234/static/chunk-CAEMAXLK.js\\\",757.4,1974,\\\"other\\\",757.4,2731.4],[\\\"http://localhost:8234/static/chunk-OBAYCOOK.js\\\",757.4,2015.8,\\\"other\\\",757.4,2773.2],[\\\"http://localhost:8234/static/chunk-VJGIAYQC.js\\\",757.5,1955.4,\\\"other\\\",757.5,2712.9],[\\\"http://127.0.0.1:8000/e/?ip=1&_=1644085939776\\\",2982,252.2,\\\"xmlhttprequest\\\",2982,3234.2],[\\\"http://127.0.0.1:8000/decide/?v=2&ip=1&_=1644085939777\\\",2983.2,366.5,\\\"xmlhttprequest\\\",2983.2,3349.7],[\\\"http://127.0.0.1:8000/engage/?ip=1&_=1644085939803\\\",3009.2,296.3,\\\"xmlhttprequest\\\",3009.2,3305.5],[\\\"http://localhost:8234/static/WebPerformance-TDTY5JT5.js\\\",3042.1,38.3,\\\"other\\\",3042.1,3080.4],[\\\"http://127.0.0.1:8000/static/icons/favicon-dev.ico?v=2021-04-29\\\",3050.1,205,\\\"other\\\",3050.1,3255.1],[\\\"http://127.0.0.1:8000/static/site.webmanifest?v=2021-04-29\\\",3148.9,23.7,\\\"other\\\",3148.9,3172.6],[\\\"http://localhost:8234/static/chunk-F5T7ECZG.js\\\",3155.1,18.2,\\\"other\\\",3155.1,3173.3],[\\\"http://localhost:8234/static/chunk-ZYLXYU4K.js\\\",3155.3,29.9,\\\"other\\\",3155.3,3185.2],[\\\"http://localhost:8234/static/chunk-Y4DLHNYM.js\\\",3155.4,31,\\\"other\\\",3155.4,3186.4],[\\\"http://localhost:8234/static/chunk-YQPLUSZK.js\\\",3155.4,39.8,\\\"other\\\",3155.4,3195.2],[\\\"http://localhost:8234/static/chunk-ZCRZKRW7.js\\\",3155.4,40.6,\\\"other\\\",3155.4,3196],[\\\"http://localhost:8234/static/chunk-AVSAWBKG.js\\\",3155.5,47.9,\\\"other\\\",3155.5,3203.4],[\\\"http://localhost:8234/static/chunk-NPPZ6HM3.js\\\",3155.5,48.6,\\\"other\\\",3155.5,3204.1],[\\\"http://localhost:8234/static/chunk-OSKNBHDN.js\\\",3155.5,62.6,\\\"other\\\",3155.5,3218.1],[\\\"http://localhost:8234/static/chunk-T7SYQIYY.js\\\",3155.6,62.7,\\\"other\\\",3155.6,3218.3],[\\\"http://localhost:8234/static/chunk-H2BXVWDT.js\\\",3155.6,77.5,\\\"other\\\",3155.6,3233.1],[\\\"http://localhost:8234/static/chunk-SGDHQOX6.js\\\",3155.6,77.6,\\\"other\\\",3155.6,3233.2],[\\\"http://localhost:8234/static/toolbar.js?_ts=1644085940146\\\",3351.5,97.8,\\\"script\\\",3351.5,3449.3],[\\\"http://127.0.0.1:8000/api/projects/1/actions/\\\",3357,201,\\\"fetch\\\",3357,3558],[\\\"http://127.0.0.1:8000/api/projects/1/annotations/?scope=organization&deleted=false\\\",3357.9,204.3,\\\"fetch\\\",3357.9,3562.2],[\\\"http://127.0.0.1:8000/api/projects/1/cohorts?limit=600\\\",3358.5,192.5,\\\"fetch\\\",3358.5,3551],[\\\"https://update.posthog.com/\\\",3371.8,85.7,\\\"fetch\\\",3371.8,3457.5],[\\\"https://www.gravatar.com/avatar/2e7d95b60efbe947f71009a1af1ba8d0?s=96&d=404\\\",3431.7,124.9,\\\"img\\\",3431.7,3556.6]]]}\",\n+                    \"$geoip_city_name\": \"Sydney\",\n+                    \"$geoip_country_name\": \"Australia\",\n+                    \"$geoip_country_code\": \"AU\",\n+                    \"$geoip_continent_name\": \"Oceania\",\n+                    \"$geoip_continent_code\": \"OC\",\n+                    \"$geoip_postal_code\": \"2000\",\n+                    \"$geoip_latitude\": -33.8601,\n+                    \"$geoip_longitude\": 151.2101,\n+                    \"$geoip_time_zone\": \"Australia/Sydney\",\n+                    \"$geoip_subdivision_1_code\": \"NSW\",\n+                    \"$geoip_subdivision_1_name\": \"New South Wales\",\n+                    \"$plugins_succeeded\": [\"GeoIP (1)\"],\n+                    \"$plugins_failed\": [],\n+                    \"$plugins_deferred\": [],\n+                    \"$ip\": \"127.0.0.1\",\n+                    \"$set_once\": {\n+                        \"$initial_os\": \"Mac OS X\",\n+                        \"$initial_browser\": \"Chrome\",\n+                        \"$initial_device_type\": \"Desktop\",\n+                        \"$initial_current_url\": \"http://127.0.0.1:8000/web-performance?properties=%5B%7B%22key%22%3A%22%24performance_page_loaded%22%2C%22value%22%3A%222700%22%2C%22operator%22%3A%22gt%22%2C%22type%22%3A%22event%22%7D%2C%7B%22key%22%3A%22%24browser%22%2C%22value%22%3A%22is_set%22%2C%22operator%22%3A%22is_set%22%2C%22type%22%3A%22event%22%7D%5D\",\n+                        \"$initial_browser_version\": 97,\n+                        \"$initial_referrer\": \"http://127.0.0.1:8000/web-performance?properties=%5B%7B%22key%22%3A%22%24performance_page_loaded%22%2C%22value%22%3A%222700%22%2C%22operator%22%3A%22gt%22%2C%22type%22%3A%22event%22%7D%2C%7B%22key%22%3A%22%24browser%22%2C%22value%22%3A%22is_set%22%2C%22operator%22%3A%22is_set%22%2C%22type%22%3A%22event%22%7D%5D\",\n+                        \"$initial_referring_domain\": \"127.0.0.1:8000\"\n+                    },\n+                    \"$group_0\": \"017eca8c-03d9-0000-45ef-b1d4ecab7048\",\n+                    \"$group_1\": \"017eca8b-fdce-0000-6923-f64fc0d0edac\",\n+                    \"$group_2\": \"http://localhost:8000\"\n+                },\n+                \"event\": \"$pageview\",\n+                \"timestamp\": \"2022-02-05T18:32:20.590000+00:00\",\n+                \"person\": {\n+                    \"is_identified\": true,\n+                    \"distinct_ids\": [\"F3RTp6GByAuqUkpsUUjzKTQlmJzIQTFoX44fKup95BC\"],\n+                    \"properties\": {\n+                        \"email\": \"paul@posthog.com\"\n+                    }\n+                },\n+                \"elements\": [],\n+                \"elements_chain\": \"\"\n+            }\n+        },\n+        \"organization\": {\n+            \"Settings\": {\n+                \"membersLogic\": {\n+                    \"members\": [\n+                        {\n+                            \"id\": \"017eca8c-040b-0000-c811-069f6ffcb6cc\",\n+                            \"user\": {\n+                                \"id\": 1,\n+                                \"uuid\": \"017eca8c-03a3-0000-dbed-448b5e2e347d\",\n+                                \"distinct_id\": \"F3RTp6GByAuqUkpsUUjzKTQlmJzIQTFoX44fKup95BC\",\n+                                \"first_name\": \"p\",\n+                                \"email\": \"paul@posthog.com\"\n+                            },\n+                            \"level\": 15,\n+                            \"joined_at\": \"2022-02-05T15:41:20.780069Z\",\n+                            \"updated_at\": \"2022-02-05T15:41:20.780088Z\"\n+                        }\n+                    ],\n+                    \"membersLoading\": false\n+                },\n+                \"inviteLogic\": {\n+                    \"invitedTeamMembersInternal\": [],\n+                    \"invitedTeamMembersInternalLoading\": false,\n+                    \"invites\": [],\n+                    \"invitesLoading\": false,\n+                    \"isInviteModalShown\": false,\n+                    \"invitesToSend\": [\n+                        {\n+                            \"target_email\": \"\",\n+                            \"first_name\": \"\",\n+                            \"isValid\": true\n+                        }\n+                    ]\n+                }\n+            }\n+        },\n+        \"instance\": {\n+            \"SystemStatus\": {\n+                \"systemStatusLogic\": {\n+                    \"systemStatus\": {\n+                        \"overview\": [\n+                            {\n+                                \"key\": \"posthog_version\",\n+                                \"metric\": \"PostHog version\",\n+                                \"value\": \"1.32.0\"\n+                            },\n+                            {\n+                                \"key\": \"posthog_git_sha\",\n+                                \"metric\": \"PostHog Git SHA\",\n+                                \"value\": \"Undefined\"\n+                            },\n+                            {\n+                                \"key\": \"analytics_database\",\n+                                \"metric\": \"Analytics database in use\",\n+                                \"value\": \"ClickHouse\"\n+                            },\n+                            {\n+                                \"key\": \"plugin_sever_alive\",\n+                                \"metric\": \"Plugin server alive\",\n+                                \"value\": true\n+                            },\n+                            {\n+                                \"key\": \"plugin_sever_version\",\n+                                \"metric\": \"Plugin server version\",\n+                                \"value\": \"1.10.5\"\n+                            },\n+                            {\n+                                \"key\": \"plugin_sever_job_queues\",\n+                                \"metric\": \"Job queues enabled in plugin server\",\n+                                \"value\": \"Graphile\"\n+                            },\n+                            {\n+                                \"key\": \"db_alive\",\n+                                \"metric\": \"Postgres database alive\",\n+                                \"value\": true\n+                            },\n+                            {\n+                                \"key\": \"pg_version\",\n+                                \"metric\": \"Postgres version\",\n+                                \"value\": \"12.0.9\"\n+                            },\n+                            {\n+                                \"key\": \"clickhouse_alive\",\n+                                \"metric\": \"Clickhouse database alive\",\n+                                \"value\": true\n+                            },\n+                            {\n+                                \"key\": \"clickhouse_event_count\",\n+                                \"metric\": \"Events in ClickHouse\",\n+                                \"value\": 1044\n+                            },\n+                            {\n+                                \"key\": \"clickhouse_event_count_last_month\",\n+                                \"metric\": \"Events recorded last month\",\n+                                \"value\": 0\n+                            },\n+                            {\n+                                \"key\": \"clickhouse_event_count_month_to_date\",\n+                                \"metric\": \"Events recorded month to date\",\n+                                \"value\": 1044\n+                            },\n+                            {\n+                                \"key\": \"clickhouse_disk_0_free_space\",\n+                                \"metric\": \"Clickhouse disk free space\",\n+                                \"value\": \"129.95 GiB\"\n+                            },\n+                            {\n+                                \"key\": \"clickhouse_disk_0_total_space\",\n+                                \"metric\": \"Clickhouse disk total space\",\n+                                \"value\": \"149.36 GiB\"\n+                            },\n+                            {\n+                                \"key\": \"clickhouse_table_sizes\",\n+                                \"metric\": \"Clickhouse table sizes\",\n+                                \"value\": \"\",\n+                                \"subrows\": {\n+                                    \"columns\": [\"Table\", \"Size\", \"Rows\"],\n+                                    \"rows\": [\n+                                        [\"asynchronous_metric_log\", \"4.24 MiB\", 3516168],\n+                                        [\"text_log\", \"7.69 MiB\", 459716],\n+                                        [\"metric_log\", \"736.40 KiB\", 7653],\n+                                        [\"query_thread_log\", \"586.07 KiB\", 6085],\n+                                        [\"query_log\", \"451.52 KiB\", 3534],\n+                                        [\"events\", \"478.99 KiB\", 1044],\n+                                        [\"infi_clickhouse_orm_migrations\", \"1.09 KiB\", 22],\n+                                        [\"groups\", \"1.92 KiB\", 6],\n+                                        [\"plugin_log_entries\", \"1.32 KiB\", 6],\n+                                        [\"person_distinct_id2\", \"915.00 B\", 4],\n+                                        [\"person_distinct_id\", \"811.00 B\", 4],\n+                                        [\"person\", \"1.33 KiB\", 3],\n+                                        [\"events_dead_letter_queue\", \"14.81 KiB\", 3]\n+                                    ]\n+                                }\n+                            },\n+                            {\n+                                \"key\": \"clickhouse_system_metrics\",\n+                                \"metric\": \"Clickhouse system metrics\",\n+                                \"value\": \"\",\n+                                \"subrows\": {\n+                                    \"columns\": [\"Metric\", \"Value\", \"Description\"],\n+                                    \"rows\": [\n+                                        [\n+                                            \"ActiveAsyncDrainedConnections\",\n+                                            0,\n+                                            \"Number of active connections drained asynchronously.\"\n+                                        ],\n+                                        [\n+                                            \"ActiveSyncDrainedConnections\",\n+                                            0,\n+                                            \"Number of active connections drained synchronously.\"\n+                                        ],\n+                                        [\"AsyncDrainedConnections\", 0, \"Number of connections drained asynchronously.\"],\n+                                        [\"AsynchronousMetricsCalculationTimeSpent\", 0.000657583],\n+                                        [\n+                                            \"BackgroundBufferFlushSchedulePoolTask\",\n+                                            0,\n+                                            \"Number of active tasks in BackgroundBufferFlushSchedulePool. This pool is used for periodic Buffer flushes\"\n+                                        ],\n+                                        [\n+                                            \"BackgroundDistributedSchedulePoolTask\",\n+                                            0,\n+                                            \"Number of active tasks in BackgroundDistributedSchedulePool. This pool is used for distributed sends that is done in background.\"\n+                                        ],\n+                                        [\n+                                            \"BackgroundFetchesPoolTask\",\n+                                            0,\n+                                            \"Number of active tasks in BackgroundFetchesPool\"\n+                                        ],\n+                                        [\n+                                            \"BackgroundMessageBrokerSchedulePoolTask\",\n+                                            6,\n+                                            \"Number of active tasks in BackgroundProcessingPool for message streaming\"\n+                                        ],\n+                                        [\n+                                            \"BackgroundMovePoolTask\",\n+                                            0,\n+                                            \"Number of active tasks in BackgroundProcessingPool for moves\"\n+                                        ],\n+                                        [\n+                                            \"BackgroundPoolTask\",\n+                                            0,\n+                                            \"Number of active tasks in BackgroundProcessingPool (merges, mutations, or replication queue bookkeeping)\"\n+                                        ],\n+                                        [\n+                                            \"BackgroundSchedulePoolTask\",\n+                                            0,\n+                                            \"Number of active tasks in BackgroundSchedulePool. This pool is used for periodic ReplicatedMergeTree tasks, like cleaning old data parts, altering data parts, replica re-initialization, etc.\"\n+                                        ],\n+                                        [\"BlockActiveTime_nbd0\", 0],\n+                                        [\"BlockActiveTime_nbd1\", 0],\n+                                        [\"BlockActiveTime_nbd10\", 0],\n+                                        [\"BlockActiveTime_nbd11\", 0],\n+                                        [\"BlockActiveTime_nbd12\", 0],\n+                                        [\"BlockActiveTime_nbd13\", 0],\n+                                        [\"BlockActiveTime_nbd14\", 0],\n+                                        [\"BlockActiveTime_nbd15\", 0],\n+                                        [\"BlockActiveTime_nbd2\", 0],\n+                                        [\"BlockActiveTime_nbd3\", 0],\n+                                        [\"BlockActiveTime_nbd4\", 0],\n+                                        [\"BlockActiveTime_nbd5\", 0],\n+                                        [\"BlockActiveTime_nbd6\", 0],\n+                                        [\"BlockActiveTime_nbd7\", 0],\n+                                        [\"BlockActiveTime_nbd8\", 0],\n+                                        [\"BlockActiveTime_nbd9\", 0],\n+                                        [\"BlockActiveTime_vda\", 0],\n+                                        [\"BlockDiscardBytes_nbd0\", 0],\n+                                        [\"BlockDiscardBytes_nbd1\", 0],\n+                                        [\"BlockDiscardBytes_nbd10\", 0],\n+                                        [\"BlockDiscardBytes_nbd11\", 0],\n+                                        [\"BlockDiscardBytes_nbd12\", 0],\n+                                        [\"BlockDiscardBytes_nbd13\", 0],\n+                                        [\"BlockDiscardBytes_nbd14\", 0],\n+                                        [\"BlockDiscardBytes_nbd15\", 0],\n+                                        [\"BlockDiscardBytes_nbd2\", 0],\n+                                        [\"BlockDiscardBytes_nbd3\", 0],\n+                                        [\"BlockDiscardBytes_nbd4\", 0],\n+                                        [\"BlockDiscardBytes_nbd5\", 0],\n+                                        [\"BlockDiscardBytes_nbd6\", 0],\n+                                        [\"BlockDiscardBytes_nbd7\", 0],\n+                                        [\"BlockDiscardBytes_nbd8\", 0],\n+                                        [\"BlockDiscardBytes_nbd9\", 0],\n+                                        [\"BlockDiscardBytes_vda\", 0],\n+                                        [\"BlockDiscardMerges_nbd0\", 0],\n+                                        [\"BlockDiscardMerges_nbd1\", 0],\n+                                        [\"BlockDiscardMerges_nbd10\", 0],\n+                                        [\"BlockDiscardMerges_nbd11\", 0],\n+                                        [\"BlockDiscardMerges_nbd12\", 0],\n+                                        [\"BlockDiscardMerges_nbd13\", 0],\n+                                        [\"BlockDiscardMerges_nbd14\", 0],\n+                                        [\"BlockDiscardMerges_nbd15\", 0],\n+                                        [\"BlockDiscardMerges_nbd2\", 0],\n+                                        [\"BlockDiscardMerges_nbd3\", 0],\n+                                        [\"BlockDiscardMerges_nbd4\", 0],\n+                                        [\"BlockDiscardMerges_nbd5\", 0],\n+                                        [\"BlockDiscardMerges_nbd6\", 0],\n+                                        [\"BlockDiscardMerges_nbd7\", 0],\n+                                        [\"BlockDiscardMerges_nbd8\", 0],\n+                                        [\"BlockDiscardMerges_nbd9\", 0],\n+                                        [\"BlockDiscardMerges_vda\", 0],\n+                                        [\"BlockDiscardOps_nbd0\", 0],\n+                                        [\"BlockDiscardOps_nbd1\", 0],\n+                                        [\"BlockDiscardOps_nbd10\", 0],\n+                                        [\"BlockDiscardOps_nbd11\", 0],\n+                                        [\"BlockDiscardOps_nbd12\", 0],\n+                                        [\"BlockDiscardOps_nbd13\", 0],\n+                                        [\"BlockDiscardOps_nbd14\", 0],\n+                                        [\"BlockDiscardOps_nbd15\", 0],\n+                                        [\"BlockDiscardOps_nbd2\", 0],\n+                                        [\"BlockDiscardOps_nbd3\", 0],\n+                                        [\"BlockDiscardOps_nbd4\", 0],\n+                                        [\"BlockDiscardOps_nbd5\", 0],\n+                                        [\"BlockDiscardOps_nbd6\", 0],\n+                                        [\"BlockDiscardOps_nbd7\", 0],\n+                                        [\"BlockDiscardOps_nbd8\", 0],\n+                                        [\"BlockDiscardOps_nbd9\", 0],\n+                                        [\"BlockDiscardOps_vda\", 0],\n+                                        [\"BlockDiscardTime_nbd0\", 0],\n+                                        [\"BlockDiscardTime_nbd1\", 0],\n+                                        [\"BlockDiscardTime_nbd10\", 0],\n+                                        [\"BlockDiscardTime_nbd11\", 0],\n+                                        [\"BlockDiscardTime_nbd12\", 0],\n+                                        [\"BlockDiscardTime_nbd13\", 0],\n+                                        [\"BlockDiscardTime_nbd14\", 0],\n+                                        [\"BlockDiscardTime_nbd15\", 0],\n+                                        [\"BlockDiscardTime_nbd2\", 0],\n+                                        [\"BlockDiscardTime_nbd3\", 0],\n+                                        [\"BlockDiscardTime_nbd4\", 0],\n+                                        [\"BlockDiscardTime_nbd5\", 0],\n+                                        [\"BlockDiscardTime_nbd6\", 0],\n+                                        [\"BlockDiscardTime_nbd7\", 0],\n+                                        [\"BlockDiscardTime_nbd8\", 0],\n+                                        [\"BlockDiscardTime_nbd9\", 0],\n+                                        [\"BlockDiscardTime_vda\", 0],\n+                                        [\"BlockInFlightOps_nbd0\", 0],\n+                                        [\"BlockInFlightOps_nbd1\", 0],\n+                                        [\"BlockInFlightOps_nbd10\", 0],\n+                                        [\"BlockInFlightOps_nbd11\", 0],\n+                                        [\"BlockInFlightOps_nbd12\", 0],\n+                                        [\"BlockInFlightOps_nbd13\", 0],\n+                                        [\"BlockInFlightOps_nbd14\", 0],\n+                                        [\"BlockInFlightOps_nbd15\", 0],\n+                                        [\"BlockInFlightOps_nbd2\", 0],\n+                                        [\"BlockInFlightOps_nbd3\", 0],\n+                                        [\"BlockInFlightOps_nbd4\", 0],\n+                                        [\"BlockInFlightOps_nbd5\", 0],\n+                                        [\"BlockInFlightOps_nbd6\", 0],\n+                                        [\"BlockInFlightOps_nbd7\", 0],\n+                                        [\"BlockInFlightOps_nbd8\", 0],\n+                                        [\"BlockInFlightOps_nbd9\", 0],\n+                                        [\"BlockInFlightOps_vda\", 0],\n+                                        [\"BlockQueueTime_nbd0\", 0],\n+                                        [\"BlockQueueTime_nbd1\", 0],\n+                                        [\"BlockQueueTime_nbd10\", 0],\n+                                        [\"BlockQueueTime_nbd11\", 0],\n+                                        [\"BlockQueueTime_nbd12\", 0],\n+                                        [\"BlockQueueTime_nbd13\", 0],\n+                                        [\"BlockQueueTime_nbd14\", 0],\n+                                        [\"BlockQueueTime_nbd15\", 0],\n+                                        [\"BlockQueueTime_nbd2\", 0],\n+                                        [\"BlockQueueTime_nbd3\", 0],\n+                                        [\"BlockQueueTime_nbd4\", 0],\n+                                        [\"BlockQueueTime_nbd5\", 0],\n+                                        [\"BlockQueueTime_nbd6\", 0],\n+                                        [\"BlockQueueTime_nbd7\", 0],\n+                                        [\"BlockQueueTime_nbd8\", 0],\n+                                        [\"BlockQueueTime_nbd9\", 0],\n+                                        [\"BlockQueueTime_vda\", 0],\n+                                        [\"BlockReadBytes_nbd0\", 0],\n+                                        [\"BlockReadBytes_nbd1\", 0],\n+                                        [\"BlockReadBytes_nbd10\", 0],\n+                                        [\"BlockReadBytes_nbd11\", 0],\n+                                        [\"BlockReadBytes_nbd12\", 0],\n+                                        [\"BlockReadBytes_nbd13\", 0],\n+                                        [\"BlockReadBytes_nbd14\", 0],\n+                                        [\"BlockReadBytes_nbd15\", 0],\n+                                        [\"BlockReadBytes_nbd2\", 0],\n+                                        [\"BlockReadBytes_nbd3\", 0],\n+                                        [\"BlockReadBytes_nbd4\", 0],\n+                                        [\"BlockReadBytes_nbd5\", 0],\n+                                        [\"BlockReadBytes_nbd6\", 0],\n+                                        [\"BlockReadBytes_nbd7\", 0],\n+                                        [\"BlockReadBytes_nbd8\", 0],\n+                                        [\"BlockReadBytes_nbd9\", 0],\n+                                        [\"BlockReadBytes_vda\", 0],\n+                                        [\"BlockReadMerges_nbd0\", 0],\n+                                        [\"BlockReadMerges_nbd1\", 0],\n+                                        [\"BlockReadMerges_nbd10\", 0],\n+                                        [\"BlockReadMerges_nbd11\", 0],\n+                                        [\"BlockReadMerges_nbd12\", 0],\n+                                        [\"BlockReadMerges_nbd13\", 0],\n+                                        [\"BlockReadMerges_nbd14\", 0],\n+                                        [\"BlockReadMerges_nbd15\", 0],\n+                                        [\"BlockReadMerges_nbd2\", 0],\n+                                        [\"BlockReadMerges_nbd3\", 0],\n+                                        [\"BlockReadMerges_nbd4\", 0],\n+                                        [\"BlockReadMerges_nbd5\", 0],\n+                                        [\"BlockReadMerges_nbd6\", 0],\n+                                        [\"BlockReadMerges_nbd7\", 0],\n+                                        [\"BlockReadMerges_nbd8\", 0],\n+                                        [\"BlockReadMerges_nbd9\", 0],\n+                                        [\"BlockReadMerges_vda\", 0],\n+                                        [\"BlockReadOps_nbd0\", 0],\n+                                        [\"BlockReadOps_nbd1\", 0],\n+                                        [\"BlockReadOps_nbd10\", 0],\n+                                        [\"BlockReadOps_nbd11\", 0],\n+                                        [\"BlockReadOps_nbd12\", 0],\n+                                        [\"BlockReadOps_nbd13\", 0],\n+                                        [\"BlockReadOps_nbd14\", 0],\n+                                        [\"BlockReadOps_nbd15\", 0],\n+                                        [\"BlockReadOps_nbd2\", 0],\n+                                        [\"BlockReadOps_nbd3\", 0],\n+                                        [\"BlockReadOps_nbd4\", 0],\n+                                        [\"BlockReadOps_nbd5\", 0],\n+                                        [\"BlockReadOps_nbd6\", 0],\n+                                        [\"BlockReadOps_nbd7\", 0],\n+                                        [\"BlockReadOps_nbd8\", 0],\n+                                        [\"BlockReadOps_nbd9\", 0],\n+                                        [\"BlockReadOps_vda\", 0],\n+                                        [\"BlockReadTime_nbd0\", 0],\n+                                        [\"BlockReadTime_nbd1\", 0],\n+                                        [\"BlockReadTime_nbd10\", 0],\n+                                        [\"BlockReadTime_nbd11\", 0],\n+                                        [\"BlockReadTime_nbd12\", 0],\n+                                        [\"BlockReadTime_nbd13\", 0],\n+                                        [\"BlockReadTime_nbd14\", 0],\n+                                        [\"BlockReadTime_nbd15\", 0],\n+                                        [\"BlockReadTime_nbd2\", 0],\n+                                        [\"BlockReadTime_nbd3\", 0],\n+                                        [\"BlockReadTime_nbd4\", 0],\n+                                        [\"BlockReadTime_nbd5\", 0],\n+                                        [\"BlockReadTime_nbd6\", 0],\n+                                        [\"BlockReadTime_nbd7\", 0],\n+                                        [\"BlockReadTime_nbd8\", 0],\n+                                        [\"BlockReadTime_nbd9\", 0],\n+                                        [\"BlockReadTime_vda\", 0],\n+                                        [\"BlockWriteBytes_nbd0\", 0],\n+                                        [\"BlockWriteBytes_nbd1\", 0],\n+                                        [\"BlockWriteBytes_nbd10\", 0],\n+                                        [\"BlockWriteBytes_nbd11\", 0],\n+                                        [\"BlockWriteBytes_nbd12\", 0],\n+                                        [\"BlockWriteBytes_nbd13\", 0],\n+                                        [\"BlockWriteBytes_nbd14\", 0],\n+                                        [\"BlockWriteBytes_nbd15\", 0],\n+                                        [\"BlockWriteBytes_nbd2\", 0],\n+                                        [\"BlockWriteBytes_nbd3\", 0],\n+                                        [\"BlockWriteBytes_nbd4\", 0],\n+                                        [\"BlockWriteBytes_nbd5\", 0],\n+                                        [\"BlockWriteBytes_nbd6\", 0],\n+                                        [\"BlockWriteBytes_nbd7\", 0],\n+                                        [\"BlockWriteBytes_nbd8\", 0],\n+                                        [\"BlockWriteBytes_nbd9\", 0],\n+                                        [\"BlockWriteBytes_vda\", 0],\n+                                        [\"BlockWriteMerges_nbd0\", 0],\n+                                        [\"BlockWriteMerges_nbd1\", 0],\n+                                        [\"BlockWriteMerges_nbd10\", 0],\n+                                        [\"BlockWriteMerges_nbd11\", 0],\n+                                        [\"BlockWriteMerges_nbd12\", 0],\n+                                        [\"BlockWriteMerges_nbd13\", 0],\n+                                        [\"BlockWriteMerges_nbd14\", 0],\n+                                        [\"BlockWriteMerges_nbd15\", 0],\n+                                        [\"BlockWriteMerges_nbd2\", 0],\n+                                        [\"BlockWriteMerges_nbd3\", 0],\n+                                        [\"BlockWriteMerges_nbd4\", 0],\n+                                        [\"BlockWriteMerges_nbd5\", 0],\n+                                        [\"BlockWriteMerges_nbd6\", 0],\n+                                        [\"BlockWriteMerges_nbd7\", 0],\n+                                        [\"BlockWriteMerges_nbd8\", 0],\n+                                        [\"BlockWriteMerges_nbd9\", 0],\n+                                        [\"BlockWriteMerges_vda\", 0],\n+                                        [\"BlockWriteOps_nbd0\", 0],\n+                                        [\"BlockWriteOps_nbd1\", 0],\n+                                        [\"BlockWriteOps_nbd10\", 0],\n+                                        [\"BlockWriteOps_nbd11\", 0],\n+                                        [\"BlockWriteOps_nbd12\", 0],\n+                                        [\"BlockWriteOps_nbd13\", 0],\n+                                        [\"BlockWriteOps_nbd14\", 0],\n+                                        [\"BlockWriteOps_nbd15\", 0],\n+                                        [\"BlockWriteOps_nbd2\", 0],\n+                                        [\"BlockWriteOps_nbd3\", 0],\n+                                        [\"BlockWriteOps_nbd4\", 0],\n+                                        [\"BlockWriteOps_nbd5\", 0],\n+                                        [\"BlockWriteOps_nbd6\", 0],\n+                                        [\"BlockWriteOps_nbd7\", 0],\n+                                        [\"BlockWriteOps_nbd8\", 0],\n+                                        [\"BlockWriteOps_nbd9\", 0],\n+                                        [\"BlockWriteOps_vda\", 0],\n+                                        [\"BlockWriteTime_nbd0\", 0],\n+                                        [\"BlockWriteTime_nbd1\", 0],\n+                                        [\"BlockWriteTime_nbd10\", 0],\n+                                        [\"BlockWriteTime_nbd11\", 0],\n+                                        [\"BlockWriteTime_nbd12\", 0],\n+                                        [\"BlockWriteTime_nbd13\", 0],\n+                                        [\"BlockWriteTime_nbd14\", 0],\n+                                        [\"BlockWriteTime_nbd15\", 0],\n+                                        [\"BlockWriteTime_nbd2\", 0],\n+                                        [\"BlockWriteTime_nbd3\", 0],\n+                                        [\"BlockWriteTime_nbd4\", 0],\n+                                        [\"BlockWriteTime_nbd5\", 0],\n+                                        [\"BlockWriteTime_nbd6\", 0],\n+                                        [\"BlockWriteTime_nbd7\", 0],\n+                                        [\"BlockWriteTime_nbd8\", 0],\n+                                        [\"BlockWriteTime_nbd9\", 0],\n+                                        [\"BlockWriteTime_vda\", 0],\n+                                        [\n+                                            \"BrokenDistributedFilesToInsert\",\n+                                            0,\n+                                            \"Number of files for asynchronous insertion into Distributed tables that has been marked as broken. This metric will starts from 0 on start. Number of files for every shard is summed.\"\n+                                        ],\n+                                        [\n+                                            \"CacheDictionaryUpdateQueueBatches\",\n+                                            0,\n+                                            \"Number of 'batches' (a set of keys) in update queue in CacheDictionaries.\"\n+                                        ],\n+                                        [\n+                                            \"CacheDictionaryUpdateQueueKeys\",\n+                                            0,\n+                                            \"Exact number of keys in update queue in CacheDictionaries.\"\n+                                        ],\n+                                        [\n+                                            \"ContextLockWait\",\n+                                            0,\n+                                            \"Number of threads waiting for lock in Context. This is global lock.\"\n+                                        ],\n+                                        [\n+                                            \"DelayedInserts\",\n+                                            0,\n+                                            \"Number of INSERT queries that are throttled due to high number of active data parts for partition in a MergeTree table.\"\n+                                        ],\n+                                        [\n+                                            \"DictCacheRequests\",\n+                                            0,\n+                                            \"Number of requests in fly to data sources of dictionaries of cache type.\"\n+                                        ],\n+                                        [\"DiskAvailable_default\", 139530870784],\n+                                        [\n+                                            \"DiskSpaceReservedForMerge\",\n+                                            0,\n+                                            \"Disk space reserved for currently running background merges. It is slightly more than the total size of currently merging parts.\"\n+                                        ],\n+                                        [\"DiskTotal_default\", 160377946112],\n+                                        [\"DiskUnreserved_default\", 139530870784],\n+                                        [\"DiskUsed_default\", 20847075328],\n+                                        [\n+                                            \"DistributedFilesToInsert\",\n+                                            0,\n+                                            \"Number of pending files to process for asynchronous insertion into Distributed tables. Number of files for every shard is summed.\"\n+                                        ],\n+                                        [\n+                                            \"DistributedSend\",\n+                                            0,\n+                                            \"Number of connections to remote servers sending data that was INSERTed into Distributed tables. Both synchronous and asynchronous mode.\"\n+                                        ],\n+                                        [\"EphemeralNode\", 0, \"Number of ephemeral nodes hold in ZooKeeper.\"],\n+                                        [\"FilesystemLogsPathAvailableBytes\", 139530870784],\n+                                        [\"FilesystemLogsPathAvailableINodes\", 9449848],\n+                                        [\"FilesystemLogsPathTotalBytes\", 160377946112],\n+                                        [\"FilesystemLogsPathTotalINodes\", 9961472],\n+                                        [\"FilesystemLogsPathUsedBytes\", 20847075328],\n+                                        [\"FilesystemLogsPathUsedINodes\", 511624],\n+                                        [\"FilesystemMainPathAvailableBytes\", 139530870784],\n+                                        [\"FilesystemMainPathAvailableINodes\", 9449848],\n+                                        [\"FilesystemMainPathTotalBytes\", 160377946112],\n+                                        [\"FilesystemMainPathTotalINodes\", 9961472],\n+                                        [\"FilesystemMainPathUsedBytes\", 20847075328],\n+                                        [\"FilesystemMainPathUsedINodes\", 511624],\n+                                        [\"GlobalThread\", 178, \"Number of threads in global thread pool.\"],\n+                                        [\n+                                            \"GlobalThreadActive\",\n+                                            165,\n+                                            \"Number of threads in global thread pool running a task.\"\n+                                        ],\n+                                        [\"HTTPConnection\", 0, \"Number of connections to HTTP server\"],\n+                                        [\"HTTPThreads\", 1],\n+                                        [\n+                                            \"InterserverConnection\",\n+                                            0,\n+                                            \"Number of connections from other replicas to fetch parts\"\n+                                        ],\n+                                        [\"InterserverThreads\", 0],\n+                                        [\"Jitter\", 0.003289],\n+                                        [\"LoadAverage1\", 1.27],\n+                                        [\"LoadAverage15\", 1.06],\n+                                        [\"LoadAverage5\", 1.32],\n+                                        [\n+                                            \"LocalThread\",\n+                                            0,\n+                                            \"Number of threads in local thread pools. The threads in local thread pools are taken from the global thread pool.\"\n+                                        ],\n+                                        [\n+                                            \"LocalThreadActive\",\n+                                            0,\n+                                            \"Number of threads in local thread pools running a task.\"\n+                                        ],\n+                                        [\"MMapCacheCells\", 0],\n+                                        [\"MMappedFileBytes\", 1958451168, \"Sum size of mmapped file regions.\"],\n+                                        [\"MMappedFiles\", 7, \"Total number of mmapped files.\"],\n+                                        [\"MarkCacheBytes\", 94176],\n+                                        [\"MarkCacheFiles\", 160],\n+                                        [\"MaxDDLEntryID\", 70, \"Max processed DDL entry of DDLWorker.\"],\n+                                        [\"MaxPartCountForPartition\", 6],\n+                                        [\n+                                            \"MaxPushedDDLEntryID\",\n+                                            70,\n+                                            \"Max DDL entry of DDLWorker that pushed to zookeeper.\"\n+                                        ],\n+                                        [\"MemoryCode\", 265568256],\n+                                        [\"MemoryDataAndStack\", 15856893952],\n+                                        [\"MemoryResident\", 253468672],\n+                                        [\"MemoryShared\", 25817088],\n+                                        [\n+                                            \"MemoryTracking\",\n+                                            249825777,\n+                                            \"Total amount of memory (bytes) allocated by the server.\"\n+                                        ],\n+                                        [\"MemoryVirtual\", 18088886272],\n+                                        [\"Merge\", 0, \"Number of executing background merges\"],\n+                                        [\"MySQLConnection\", 0, \"Number of client connections using MySQL protocol\"],\n+                                        [\"MySQLThreads\", 0],\n+                                        [\n+                                            \"NetworkReceive\",\n+                                            0,\n+                                            \"Number of threads receiving data from network. Only ClickHouse-related network interaction is included, not by 3rd party libraries.\"\n+                                        ],\n+                                        [\"NetworkReceiveBytes_eth0\", 11043],\n+                                        [\"NetworkReceiveBytes_ip6tnl0\", 0],\n+                                        [\"NetworkReceiveBytes_tunl0\", 0],\n+                                        [\"NetworkReceiveDrop_eth0\", 0],\n+                                        [\"NetworkReceiveDrop_ip6tnl0\", 0],\n+                                        [\"NetworkReceiveDrop_tunl0\", 0],\n+                                        [\"NetworkReceiveErrors_eth0\", 0],\n+                                        [\"NetworkReceiveErrors_ip6tnl0\", 0],\n+                                        [\"NetworkReceiveErrors_tunl0\", 0],\n+                                        [\"NetworkReceivePackets_eth0\", 33],\n+                                        [\"NetworkReceivePackets_ip6tnl0\", 0],\n+                                        [\"NetworkReceivePackets_tunl0\", 0],\n+                                        [\n+                                            \"NetworkSend\",\n+                                            0,\n+                                            \"Number of threads sending data to network. Only ClickHouse-related network interaction is included, not by 3rd party libraries.\"\n+                                        ],\n+                                        [\"NetworkSendBytes_eth0\", 3751],\n+                                        [\"NetworkSendBytes_ip6tnl0\", 0],\n+                                        [\"NetworkSendBytes_tunl0\", 0],\n+                                        [\"NetworkSendDrop_eth0\", 0],\n+                                        [\"NetworkSendDrop_ip6tnl0\", 0],\n+                                        [\"NetworkSendDrop_tunl0\", 0],\n+                                        [\"NetworkSendErrors_eth0\", 0],\n+                                        [\"NetworkSendErrors_ip6tnl0\", 0],\n+                                        [\"NetworkSendErrors_tunl0\", 0],\n+                                        [\"NetworkSendPackets_eth0\", 19],\n+                                        [\"NetworkSendPackets_ip6tnl0\", 0],\n+                                        [\"NetworkSendPackets_tunl0\", 0],\n+                                        [\"NumberOfDatabases\", 3],\n+                                        [\"NumberOfTables\", 100],\n+                                        [\"OSContextSwitches\", 3379],\n+                                        [\"OSGuestNiceTime\", 0],\n+                                        [\"OSGuestNiceTimeCPU0\", 0],\n+                                        [\"OSGuestNiceTimeCPU1\", 0],\n+                                        [\"OSGuestNiceTimeCPU2\", 0],\n+                                        [\"OSGuestNiceTimeCPU3\", 0],\n+                                        [\"OSGuestNiceTimeCPU4\", 0],\n+                                        [\"OSGuestNiceTimeCPU5\", 0],\n+                                        [\"OSGuestNiceTimeCPU6\", 0],\n+                                        [\"OSGuestNiceTimeCPU7\", 0],\n+                                        [\"OSGuestNiceTimeNormalized\", 0],\n+                                        [\"OSGuestTime\", 0],\n+                                        [\"OSGuestTimeCPU0\", 0],\n+                                        [\"OSGuestTimeCPU1\", 0],\n+                                        [\"OSGuestTimeCPU2\", 0],\n+                                        [\"OSGuestTimeCPU3\", 0],\n+                                        [\"OSGuestTimeCPU4\", 0],\n+                                        [\"OSGuestTimeCPU5\", 0],\n+                                        [\"OSGuestTimeCPU6\", 0],\n+                                        [\"OSGuestTimeCPU7\", 0],\n+                                        [\"OSGuestTimeNormalized\", 0],\n+                                        [\"OSIOWaitTime\", 0],\n+                                        [\"OSIOWaitTimeCPU0\", 0],\n+                                        [\"OSIOWaitTimeCPU1\", 0],\n+                                        [\"OSIOWaitTimeCPU2\", 0],\n+                                        [\"OSIOWaitTimeCPU3\", 0],\n+                                        [\"OSIOWaitTimeCPU4\", 0],\n+                                        [\"OSIOWaitTimeCPU5\", 0],\n+                                        [\"OSIOWaitTimeCPU6\", 0],\n+                                        [\"OSIOWaitTimeCPU7\", 0],\n+                                        [\"OSIOWaitTimeNormalized\", 0],\n+                                        [\"OSIdleTime\", 6.847478642744015],\n+                                        [\"OSIdleTimeCPU0\", 0.8272790791088112],\n+                                        [\"OSIdleTimeCPU1\", 0.8771151682117515],\n+                                        [\"OSIdleTimeCPU2\", 0.8372462969293992],\n+                                        [\"OSIdleTimeCPU3\", 0.8571807325705754],\n+                                        [\"OSIdleTimeCPU4\", 0.8671479503911634],\n+                                        [\"OSIdleTimeCPU5\", 0.9169840394941039],\n+                                        [\"OSIdleTimeCPU6\", 0.8073446434676349],\n+                                        [\"OSIdleTimeCPU7\", 0.8472135147499873],\n+                                        [\"OSIdleTimeNormalized\", 0.8559348303430019],\n+                                        [\"OSInterrupts\", 2671],\n+                                        [\"OSIrqTime\", 0],\n+                                        [\"OSIrqTimeCPU0\", 0],\n+                                        [\"OSIrqTimeCPU1\", 0],\n+                                        [\"OSIrqTimeCPU2\", 0],\n+                                        [\"OSIrqTimeCPU3\", 0],\n+                                        [\"OSIrqTimeCPU4\", 0],\n+                                        [\"OSIrqTimeCPU5\", 0],\n+                                        [\"OSIrqTimeCPU6\", 0],\n+                                        [\"OSIrqTimeCPU7\", 0],\n+                                        [\"OSIrqTimeNormalized\", 0],\n+                                        [\"OSMemoryAvailable\", 2070405120],\n+                                        [\"OSMemoryBuffers\", 385118208],\n+                                        [\"OSMemoryCached\", 1430237184],\n+                                        [\"OSMemoryFreePlusCached\", 1819856896],\n+                                        [\"OSMemoryFreeWithoutCached\", 389619712],\n+                                        [\"OSMemorySwapCached\", 2932736],\n+                                        [\"OSMemoryTotal\", 5172412416],\n+                                        [\"OSNiceTime\", 0],\n+                                        [\"OSNiceTimeCPU0\", 0],\n+                                        [\"OSNiceTimeCPU1\", 0],\n+                                        [\"OSNiceTimeCPU2\", 0],\n+                                        [\"OSNiceTimeCPU3\", 0],\n+                                        [\"OSNiceTimeCPU4\", 0],\n+                                        [\"OSNiceTimeCPU5\", 0],\n+                                        [\"OSNiceTimeCPU6\", 0],\n+                                        [\"OSNiceTimeCPU7\", 0],\n+                                        [\"OSNiceTimeNormalized\", 0],\n+                                        [\"OSOpenFiles\", 6336],\n+                                        [\"OSProcessesBlocked\", 0],\n+                                        [\"OSProcessesCreated\", 2],\n+                                        [\"OSProcessesRunning\", 1],\n+                                        [\"OSSoftIrqTime\", 0.03986887128235234],\n+                                        [\"OSSoftIrqTimeCPU0\", 0.01993443564117617],\n+                                        [\"OSSoftIrqTimeCPU1\", 0],\n+                                        [\"OSSoftIrqTimeCPU2\", 0],\n+                                        [\"OSSoftIrqTimeCPU3\", 0.009967217820588086],\n+                                        [\"OSSoftIrqTimeCPU4\", 0],\n+                                        [\"OSSoftIrqTimeCPU5\", 0],\n+                                        [\"OSSoftIrqTimeCPU6\", 0],\n+                                        [\"OSSoftIrqTimeCPU7\", 0],\n+                                        [\"OSSoftIrqTimeNormalized\", 0.004983608910294043],\n+                                        [\"OSStealTime\", 0],\n+                                        [\"OSStealTimeCPU0\", 0],\n+                                        [\"OSStealTimeCPU1\", 0],\n+                                        [\"OSStealTimeCPU2\", 0],\n+                                        [\"OSStealTimeCPU3\", 0],\n+                                        [\"OSStealTimeCPU4\", 0],\n+                                        [\"OSStealTimeCPU5\", 0],\n+                                        [\"OSStealTimeCPU6\", 0],\n+                                        [\"OSStealTimeCPU7\", 0],\n+                                        [\"OSStealTimeNormalized\", 0],\n+                                        [\"OSSystemTime\", 0.14950826730882127],\n+                                        [\"OSSystemTimeCPU0\", 0.02990165346176426],\n+                                        [\"OSSystemTimeCPU1\", 0.02990165346176426],\n+                                        [\"OSSystemTimeCPU2\", 0.009967217820588086],\n+                                        [\"OSSystemTimeCPU3\", 0.009967217820588086],\n+                                        [\"OSSystemTimeCPU4\", 0.01993443564117617],\n+                                        [\"OSSystemTimeCPU5\", 0.009967217820588086],\n+                                        [\"OSSystemTimeCPU6\", 0.01993443564117617],\n+                                        [\"OSSystemTimeCPU7\", 0.01993443564117617],\n+                                        [\"OSSystemTimeNormalized\", 0.01868853341360266],\n+                                        [\"OSThreadsRunnable\", 1],\n+                                        [\"OSThreadsTotal\", 1087],\n+                                        [\"OSUptime\", 7866.41],\n+                                        [\"OSUserTime\", 0.17940992077058554],\n+                                        [\"OSUserTimeCPU0\", 0.01993443564117617],\n+                                        [\"OSUserTimeCPU1\", 0.01993443564117617],\n+                                        [\"OSUserTimeCPU2\", 0.02990165346176426],\n+                                        [\"OSUserTimeCPU3\", 0.01993443564117617],\n+                                        [\"OSUserTimeCPU4\", 0.02990165346176426],\n+                                        [\"OSUserTimeCPU5\", 0.01993443564117617],\n+                                        [\"OSUserTimeCPU6\", 0.01993443564117617],\n+                                        [\"OSUserTimeCPU7\", 0.01993443564117617],\n+                                        [\"OSUserTimeNormalized\", 0.022426240096323193],\n+                                        [\"OpenFileForRead\", 31, \"Number of files open for reading\"],\n+                                        [\"OpenFileForWrite\", 0, \"Number of files open for writing\"],\n+                                        [\"PartMutation\", 0, \"Number of mutations (ALTER DELETE/UPDATE)\"],\n+                                        [\n+                                            \"PartsCommitted\",\n+                                            35,\n+                                            \"Active data part, used by current and upcoming SELECTs.\"\n+                                        ],\n+                                        [\"PartsCompact\", 264, \"Compact parts.\"],\n+                                        [\n+                                            \"PartsDeleteOnDestroy\",\n+                                            0,\n+                                            \"Part was moved to another disk and should be deleted in own destructor.\"\n+                                        ],\n+                                        [\n+                                            \"PartsDeleting\",\n+                                            0,\n+                                            \"Not active data part with identity refcounter, it is deleting right now by a cleaner.\"\n+                                        ],\n+                                        [\"PartsInMemory\", 0, \"In-memory parts.\"],\n+                                        [\n+                                            \"PartsOutdated\",\n+                                            245,\n+                                            \"Not active data part, but could be used by only current SELECTs, could be deleted after SELECTs finishes.\"\n+                                        ],\n+                                        [\n+                                            \"PartsPreCommitted\",\n+                                            0,\n+                                            \"The part is in data_parts, but not used for SELECTs.\"\n+                                        ],\n+                                        [\n+                                            \"PartsTemporary\",\n+                                            0,\n+                                            \"The part is generating now, it is not in data_parts list.\"\n+                                        ],\n+                                        [\"PartsWide\", 16, \"Wide parts.\"],\n+                                        [\n+                                            \"PostgreSQLConnection\",\n+                                            0,\n+                                            \"Number of client connections using PostgreSQL protocol\"\n+                                        ],\n+                                        [\"Query\", 1, \"Number of executing queries\"],\n+                                        [\n+                                            \"QueryPreempted\",\n+                                            0,\n+                                            \"Number of queries that are stopped and waiting due to 'priority' setting.\"\n+                                        ],\n+                                        [\"QueryThread\", 0, \"Number of query processing threads\"],\n+                                        [\n+                                            \"RWLockActiveReaders\",\n+                                            19,\n+                                            \"Number of threads holding read lock in a table RWLock.\"\n+                                        ],\n+                                        [\n+                                            \"RWLockActiveWriters\",\n+                                            0,\n+                                            \"Number of threads holding write lock in a table RWLock.\"\n+                                        ],\n+                                        [\n+                                            \"RWLockWaitingReaders\",\n+                                            0,\n+                                            \"Number of threads waiting for read on a table RWLock.\"\n+                                        ],\n+                                        [\n+                                            \"RWLockWaitingWriters\",\n+                                            0,\n+                                            \"Number of threads waiting for write on a table RWLock.\"\n+                                        ],\n+                                        [\"Read\", 1, \"Number of read (read, pread, io_getevents, etc.) syscalls in fly\"],\n+                                        [\n+                                            \"ReadonlyReplica\",\n+                                            0,\n+                                            \"Number of Replicated tables that are currently in readonly state due to re-initialization after ZooKeeper session loss or due to startup without ZooKeeper configured.\"\n+                                        ],\n+                                        [\"ReplicasMaxAbsoluteDelay\", 0],\n+                                        [\"ReplicasMaxInsertsInQueue\", 0],\n+                                        [\"ReplicasMaxMergesInQueue\", 0],\n+                                        [\"ReplicasMaxQueueSize\", 0],\n+                                        [\"ReplicasMaxRelativeDelay\", 0],\n+                                        [\"ReplicasSumInsertsInQueue\", 0],\n+                                        [\"ReplicasSumMergesInQueue\", 0],\n+                                        [\"ReplicasSumQueueSize\", 0],\n+                                        [\"ReplicatedChecks\", 0, \"Number of data parts checking for consistency\"],\n+                                        [\"ReplicatedFetch\", 0, \"Number of data parts being fetched from replica\"],\n+                                        [\"ReplicatedSend\", 0, \"Number of data parts being sent to replicas\"],\n+                                        [\n+                                            \"Revision\",\n+                                            54454,\n+                                            \"Revision of the server. It is a number incremented for every release or release candidate except patch releases.\"\n+                                        ],\n+                                        [\n+                                            \"SendExternalTables\",\n+                                            0,\n+                                            \"Number of connections that are sending data for external tables to remote servers. External tables are used to implement GLOBAL IN and GLOBAL JOIN operators with distributed subqueries.\"\n+                                        ],\n+                                        [\n+                                            \"SendScalars\",\n+                                            0,\n+                                            \"Number of connections that are sending data for scalars to remote servers.\"\n+                                        ],\n+                                        [\"StorageBufferBytes\", 0, \"Number of bytes in buffers of Buffer tables\"],\n+                                        [\"StorageBufferRows\", 0, \"Number of rows in buffers of Buffer tables\"],\n+                                        [\"SyncDrainedConnections\", 0, \"Number of connections drained synchronously.\"],\n+                                        [\n+                                            \"TCPConnection\",\n+                                            8,\n+                                            \"Number of connections to TCP server (clients with native interface), also included server-server distributed query connections\"\n+                                        ],\n+                                        [\"TCPThreads\", 8],\n+                                        [\n+                                            \"TablesToDropQueueSize\",\n+                                            0,\n+                                            \"Number of dropped tables, that are waiting for background data removal.\"\n+                                        ],\n+                                        [\"TotalBytesOfMergeTreeTables\", 14835900],\n+                                        [\"TotalPartsOfMergeTreeTables\", 34],\n+                                        [\"TotalRowsOfMergeTreeTables\", 3993845],\n+                                        [\"UncompressedCacheBytes\", 0],\n+                                        [\"UncompressedCacheCells\", 0],\n+                                        [\"Uptime\", 7648],\n+                                        [\n+                                            \"VersionInteger\",\n+                                            21009002,\n+                                            \"Version of the server in a single integer number in base-1000. For example, version 11.22.33 is translated to 11022033.\"\n+                                        ],\n+                                        [\n+                                            \"Write\",\n+                                            0,\n+                                            \"Number of write (write, pwrite, io_getevents, etc.) syscalls in fly\"\n+                                        ],\n+                                        [\"ZooKeeperRequest\", 0, \"Number of requests to ZooKeeper in fly.\"],\n+                                        [\n+                                            \"ZooKeeperSession\",\n+                                            1,\n+                                            \"Number of sessions (connections) to ZooKeeper. Should be no more than one, because using more than one connection to ZooKeeper may lead to bugs due to lack of linearizability (stale reads) that ZooKeeper consistency model allows.\"\n+                                        ],\n+                                        [\"ZooKeeperWatch\", 1, \"Number of watches (event subscriptions) in ZooKeeper.\"],\n+                                        [\"jemalloc.active\", 296026112],\n+                                        [\"jemalloc.allocated\", 154244016],\n+                                        [\"jemalloc.arenas.all.dirty_purged\", 1586006],\n+                                        [\"jemalloc.arenas.all.muzzy_purged\", 1524009],\n+                                        [\"jemalloc.arenas.all.pactive\", 4517],\n+                                        [\"jemalloc.arenas.all.pdirty\", 305],\n+                                        [\"jemalloc.arenas.all.pmuzzy\", 8],\n+                                        [\"jemalloc.background_thread.num_runs\", 0],\n+                                        [\"jemalloc.background_thread.num_threads\", 0],\n+                                        [\"jemalloc.background_thread.run_intervals\", 0],\n+                                        [\"jemalloc.epoch\", 7656],\n+                                        [\"jemalloc.mapped\", 4611506176],\n+                                        [\"jemalloc.metadata\", 30174992],\n+                                        [\"jemalloc.metadata_thp\", 0],\n+                                        [\"jemalloc.resident\", 334102528],\n+                                        [\"jemalloc.retained\", 9347137536]\n+                                    ]\n+                                }\n+                            },\n+                            {\n+                                \"key\": \"last_event_ingested_timestamp\",\n+                                \"metric\": \"Last event ingested\",\n+                                \"value\": \"2022-02-05T18:31:46\"\n+                            },\n+                            {\n+                                \"key\": \"dead_letter_queue_size\",\n+                                \"metric\": \"Dead letter queue size\",\n+                                \"value\": 3\n+                            },\n+                            {\n+                                \"key\": \"dead_letter_queue_events_last_day\",\n+                                \"metric\": \"Events sent to dead letter queue in the last 24h\",\n+                                \"value\": 3\n+                            },\n+                            {\n+                                \"key\": \"dead_letter_queue_ratio_ok\",\n+                                \"metric\": \"Dead letter queue ratio healthy\",\n+                                \"value\": true\n+                            },\n+                            {\n+                                \"key\": \"redis_alive\",\n+                                \"metric\": \"Redis alive\",\n+                                \"value\": true\n+                            },\n+                            {\n+                                \"metric\": \"Redis version\",\n+                                \"value\": \"6.2.6\"\n+                            },\n+                            {\n+                                \"metric\": \"Redis current queue depth\",\n+                                \"value\": \"0\"\n+                            },\n+                            {\n+                                \"metric\": \"Redis connected client count\",\n+                                \"value\": \"40\"\n+                            },\n+                            {\n+                                \"metric\": \"Redis memory used\",\n+                                \"value\": \"1.80MB\"\n+                            },\n+                            {\n+                                \"metric\": \"Redis memory peak\",\n+                                \"value\": \"2.13MB\"\n+                            },\n+                            {\n+                                \"metric\": \"Redis total memory available\",\n+                                \"value\": \"4.82GB\"\n+                            }\n+                        ],\n+                        \"internal_metrics\": {}\n                     },\n+                    \"systemStatusLoading\": false,\n+                    \"queries\": null,\n+                    \"queriesLoading\": false,\n+                    \"analyzeQueryResult\": null,\n+                    \"analyzeQueryResultLoading\": false,\n+                    \"tab\": \"overview\",\n+                    \"error\": null,\n+                    \"openSections\": [\"0\"],\n+                    \"analyzeModalOpen\": false,\n+                    \"analyzeQuery\": \"\"\n+                }\n+            },\n+            \"Licenses\": {\n+                \"licenseLogic\": {\n+                    \"licenses\": [],\n+                    \"licensesLoading\": false,\n+                    \"error\": null\n+                }\n+            }\n+        },\n+        \"billing\": {\n+            \"billingLogic\": {\n+                \"billing\": null,\n+                \"billingLoading\": false,\n+                \"plans\": [],\n+                \"plansLoading\": false,\n+                \"billingSubscription\": null,\n+                \"billingSubscriptionLoading\": false\n+            }\n+        }\n+    },\n+    \"lib\": {\n+        \"logic\": {\n+            \"featureFlagLogic\": {\n+                \"featureFlags\": {\n+                    \"hackathon-apm\": true,\n+                    \"6619-query-events-by-date\": true\n+                },\n+                \"receivedFeatureFlags\": true\n+            }\n+        },\n+        \"components\": {\n+            \"PersonalAPIKeys\": {\n+                \"personalAPIKeysLogic\": {\n+                    \"keys\": [],\n+                    \"keysLoading\": false\n+                }\n+            },\n+            \"CommandPalette\": {\n+                \"commandPaletteLogic\": {\n+                    \"isPaletteShown\": false,\n+                    \"keyboardResultIndex\": 0,\n+                    \"hoverResultIndex\": null,\n+                    \"input\": \"\",\n+                    \"activeFlow\": null,\n+                    \"rawCommandRegistrations\": {\n+                        \"go-to\": {\n+                            \"key\": \"go-to\",\n+                            \"scope\": \"global\",\n+                            \"prefixes\": [\"open\", \"visit\"],\n+                            \"resolver\": [\n+                                {\n+                                    \"icon\": {},\n+                                    \"display\": \"Go to Dashboards\"\n+                                },\n+                                {\n+                                    \"icon\": {},\n+                                    \"display\": \"Go to Insights\"\n+                                },\n+                                {\n+                                    \"icon\": {},\n+                                    \"display\": \"Go to Trends\"\n+                                },\n+                                {\n+                                    \"icon\": {},\n+                                    \"display\": \"Go to Funnels\"\n+                                },\n+                                {\n+                                    \"icon\": {},\n+                                    \"display\": \"Go to Retention\"\n+                                },\n+                                {\n+                                    \"icon\": {},\n+                                    \"display\": \"Go to Paths\"\n+                                },\n+                                {\n+                                    \"icon\": {},\n+                                    \"display\": \"Go to Events\"\n+                                },\n+                                {\n+                                    \"icon\": {},\n+                                    \"display\": \"Go to Actions\"\n+                                },\n+                                {\n+                                    \"icon\": {},\n+                                    \"display\": \"Go to Persons\",\n+                                    \"synonyms\": [\"people\"]\n+                                },\n+                                {\n+                                    \"icon\": {},\n+                                    \"display\": \"Go to Cohorts\"\n+                                },\n+                                {\n+                                    \"icon\": {},\n+                                    \"display\": \"Go to Feature Flags\",\n+                                    \"synonyms\": [\"feature flags\", \"a/b tests\"]\n+                                },\n+                                {\n+                                    \"icon\": {},\n+                                    \"display\": \"Go to Annotations\"\n+                                },\n+                                {\n+                                    \"icon\": {},\n+                                    \"display\": \"Go to Team members\",\n+                                    \"synonyms\": [\"organization\", \"members\", \"invites\", \"teammates\"]\n+                                },\n+                                {\n+                                    \"icon\": {},\n+                                    \"display\": \"Go to Project settings\"\n+                                },\n+                                {\n+                                    \"icon\": {},\n+                                    \"display\": \"Go to My settings\",\n+                                    \"synonyms\": [\"account\"]\n+                                },\n+                                {\n+                                    \"icon\": {},\n+                                    \"display\": \"Go to Plugins\",\n+                                    \"synonyms\": [\"integrations\"]\n+                                },\n+                                {\n+                                    \"icon\": {},\n+                                    \"display\": \"Go to System status page\",\n+                                    \"synonyms\": [\n+                                        \"redis\",\n+                                        \"celery\",\n+                                        \"django\",\n+                                        \"postgres\",\n+                                        \"backend\",\n+                                        \"service\",\n+                                        \"online\"\n+                                    ]\n+                                },\n+                                {\n+                                    \"icon\": {},\n+                                    \"display\": \"Create action\"\n+                                },\n+                                {\n+                                    \"icon\": {},\n+                                    \"display\": \"Log out\"\n+                                }\n+                            ]\n+                        },\n+                        \"open-urls\": {\n+                            \"key\": \"open-urls\",\n+                            \"scope\": \"global\",\n+                            \"prefixes\": [\"open\", \"visit\"]\n+                        },\n+                        \"debug-clickhouse-queries\": {\n+                            \"key\": \"debug-clickhouse-queries\",\n+                            \"scope\": \"global\",\n+                            \"resolver\": {\n+                                \"icon\": {},\n+                                \"display\": \"Debug queries (ClickHouse)\"\n+                            }\n+                        },\n+                        \"calculator\": {\n+                            \"key\": \"calculator\",\n+                            \"scope\": \"global\"\n+                        },\n+                        \"create-personal-api-key\": {\n+                            \"key\": \"create-personal-api-key\",\n+                            \"scope\": \"global\",\n+                            \"resolver\": {\n+                                \"icon\": {},\n+                                \"display\": \"Create Personal API Key\"\n+                            }\n+                        },\n+                        \"create-dashboard\": {\n+                            \"key\": \"create-dashboard\",\n+                            \"scope\": \"global\",\n+                            \"resolver\": {\n+                                \"icon\": {},\n+                                \"display\": \"Create Dashboard\"\n+                            }\n+                        },\n+                        \"share-feedback\": {\n+                            \"key\": \"share-feedback\",\n+                            \"scope\": \"global\",\n+                            \"resolver\": {\n+                                \"icon\": {},\n+                                \"display\": \"Share Feedback\",\n+                                \"synonyms\": [\"send opinion\", \"ask question\", \"message posthog\", \"github issue\"]\n+                            }\n+                        }\n+                    }\n+                }\n+            },\n+            \"HelpButton\": {\n+                \"HelpButton\": {\n+                    \"isHelpVisible\": false\n+                }\n+            },\n+            \"PropertyFilters\": {\n+                \"propertyFilterLogic\": {\n+                    \"web-performance-table\": {\n+                        \"filters\": [\n+                            {\n+                                \"key\": \"$performance_page_loaded\",\n+                                \"value\": \"2700\",\n+                                \"operator\": \"gt\",\n+                                \"type\": \"event\"\n+                            }\n+                        ]\n+                    }\n+                }\n+            }\n+        }\n+    },\n+    \"models\": {\n+        \"actionsModel\": {\n+            \"actions\": [],\n+            \"actionsLoading\": false\n+        },\n+        \"annotationsModel\": {\n+            \"globalAnnotations\": [],\n+            \"globalAnnotationsLoading\": false\n+        },\n+        \"cohortsModel\": {\n+            \"cohorts\": [],\n+            \"cohortsLoading\": false,\n+            \"pollTimeout\": null\n+        },\n+        \"dashboardsModel\": {\n+            \"rawDashboards\": {\n+                \"1\": {\n+                    \"id\": 1,\n+                    \"name\": \"My App Dashboard\",\n+                    \"description\": \"\",\n+                    \"pinned\": true,\n+                    \"items\": null,\n+                    \"created_at\": \"2022-02-05T15:41:20.748924Z\",\n+                    \"created_by\": null,\n+                    \"is_shared\": false,\n+                    \"share_token\": null,\n+                    \"deleted\": false,\n+                    \"creation_mode\": \"default\",\n+                    \"filters\": {},\n+                    \"tags\": [],\n+                    \"restriction_level\": 21,\n+                    \"effective_privilege_level\": 37\n+                }\n+            },\n+            \"rawDashboardsLoading\": false,\n+            \"sharedDashboard\": null,\n+            \"sharedDashboardLoading\": false,\n+            \"dashboard\": null,\n+            \"dashboardLoading\": false,\n+            \"redirect\": true,\n+            \"lastDashboardId\": 1,\n+            \"diveSourceId\": null\n+        },\n+        \"eventDefinitionsModel\": {\n+            \"eventStorage\": {\n+                \"count\": 9,\n+                \"results\": [\n                     {\n-                        \"id\": \"017e72ae-be2b-0000-16fc-f653cd5882bc\",\n-                        \"name\": \"created_by_system\",\n-                        \"is_numerical\": false,\n+                        \"id\": \"017eca8c-1c03-0000-8941-84dce10292fe\",\n+                        \"name\": \"$autocapture\",\n+                        \"volume_30_day\": null,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                        \"created_at\": \"2022-02-05T15:41:26.918086Z\",\n+                        \"last_seen_at\": \"2022-02-05T16:39:43.709000Z\"\n                     },\n                     {\n-                        \"id\": \"017e72ae-be26-0000-67e6-55d38b756413\",\n-                        \"name\": \"creation_mode\",\n-                        \"is_numerical\": false,\n+                        \"id\": \"017eca8c-2c9b-0000-4d16-d481bc1b3585\",\n+                        \"name\": \"$capture_metrics\",\n+                        \"volume_30_day\": null,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": \"String\",\n-                        \"is_event_property\": null\n+                        \"created_at\": \"2022-02-05T15:41:31.166847Z\",\n+                        \"last_seen_at\": \"2022-02-05T16:27:35.388000Z\"\n                     },\n                     {\n-                        \"id\": \"017e718b-e21f-0000-d913-046a04eaf3dc\",\n-                        \"name\": \"data_size\",\n-                        \"is_numerical\": true,\n+                        \"id\": \"017eca8c-1be9-0001-faae-6e8fafe623ab\",\n+                        \"name\": \"$feature_flag_called\",\n+                        \"volume_30_day\": null,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": \"Numeric\",\n-                        \"is_event_property\": null\n+                        \"created_at\": \"2022-02-05T15:41:26.904862Z\",\n+                        \"last_seen_at\": \"2022-02-05T16:27:30.197000Z\"\n                     },\n                     {\n-                        \"id\": \"017e72d9-aca6-0000-bdbd-b4de29869395\",\n-                        \"name\": \"date_from\",\n-                        \"is_numerical\": false,\n+                        \"id\": \"017eca8c-1bec-0000-bdfc-ed19cdae945c\",\n+                        \"name\": \"$groupidentify\",\n+                        \"volume_30_day\": null,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": \"String\",\n-                        \"is_event_property\": null\n+                        \"created_at\": \"2022-02-05T15:41:26.894421Z\",\n+                        \"last_seen_at\": \"2022-02-05T16:27:30.209000Z\"\n                     },\n                     {\n-                        \"id\": \"017e72d9-acac-0000-71d7-1a8833fb8b4c\",\n-                        \"name\": \"date_to\",\n-                        \"is_numerical\": false,\n+                        \"id\": \"017eca8c-0bb1-0000-6f06-a39721938889\",\n+                        \"name\": \"$identify\",\n+                        \"volume_30_day\": null,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n+                        \"created_at\": \"2022-02-05T15:41:22.739398Z\",\n+                        \"last_seen_at\": \"2022-02-05T16:28:05.019000Z\"\n                     },\n                     {\n-                        \"id\": \"017e72d2-6615-0000-91d7-ff8890721b58\",\n-                        \"name\": \"description_length\",\n-                        \"is_numerical\": true,\n+                        \"id\": \"017eca8c-2cac-0000-3578-38f8ea59744f\",\n+                        \"name\": \"$pageleave\",\n+                        \"volume_30_day\": null,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": \"Numeric\",\n-                        \"is_event_property\": null\n+                        \"created_at\": \"2022-02-05T15:41:31.181137Z\",\n+                        \"last_seen_at\": \"2022-02-05T16:28:02.557000Z\"\n                     },\n                     {\n-                        \"id\": \"017e6ee2-4e04-0000-c393-6ec98fbea0f7\",\n-                        \"name\": \"device_timezone\",\n-                        \"is_numerical\": false,\n+                        \"id\": \"017eca8c-0bb5-0000-84bc-c9519d5fad42\",\n+                        \"name\": \"$pageview\",\n+                        \"volume_30_day\": null,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": \"String\",\n-                        \"is_event_property\": null\n+                        \"created_at\": \"2022-02-05T15:41:22.742776Z\",\n+                        \"last_seen_at\": \"2022-02-05T16:28:08.425000Z\"\n                     },\n                     {\n-                        \"id\": \"017e72d2-65da-0000-aeaa-0c15e581923c\",\n-                        \"name\": \"display\",\n-                        \"is_numerical\": false,\n+                        \"id\": \"017eca8c-1bfd-0000-e863-65b6a4f9cbce\",\n+                        \"name\": \"ingestion landing seen\",\n+                        \"volume_30_day\": null,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": \"String\",\n-                        \"is_event_property\": null\n+                        \"created_at\": \"2022-02-05T15:41:26.910742Z\",\n+                        \"last_seen_at\": \"2022-02-05T15:41:26.923000Z\"\n                     },\n                     {\n-                        \"id\": \"017e718b-e22a-0000-c2cd-c1b8d5189bbf\",\n-                        \"name\": \"duration\",\n-                        \"is_numerical\": true,\n+                        \"id\": \"017ecaac-34e1-0000-cd2a-888073a4fc17\",\n+                        \"name\": \"timezone component viewed\",\n+                        \"volume_30_day\": null,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": \"Numeric\",\n-                        \"is_event_property\": null\n-                    },\n+                        \"created_at\": \"2022-02-05T16:16:30.434586Z\",\n+                        \"last_seen_at\": \"2022-02-05T18:18:01.164000Z\"\n+                    }\n+                ],\n+                \"next\": null\n+            },\n+            \"eventStorageLoading\": false\n+        },\n+        \"personPropertiesModel\": {\n+            \"personProperties\": [\n+                {\n+                    \"name\": \"$initial_browser\",\n+                    \"count\": 3\n+                },\n+                {\n+                    \"name\": \"$initial_browser_version\",\n+                    \"count\": 3\n+                },\n+                {\n+                    \"name\": \"$initial_current_url\",\n+                    \"count\": 3\n+                },\n+                {\n+                    \"name\": \"$initial_device_type\",\n+                    \"count\": 3\n+                },\n+                {\n+                    \"name\": \"$initial_os\",\n+                    \"count\": 3\n+                },\n+                {\n+                    \"name\": \"$initial_referrer\",\n+                    \"count\": 3\n+                },\n+                {\n+                    \"name\": \"$initial_referring_domain\",\n+                    \"count\": 3\n+                },\n+                {\n+                    \"name\": \"$browser\",\n+                    \"count\": 1\n+                },\n+                {\n+                    \"name\": \"$browser_version\",\n+                    \"count\": 1\n+                },\n+                {\n+                    \"name\": \"$geoip_city_name\",\n+                    \"count\": 1\n+                },\n+                {\n+                    \"name\": \"$geoip_continent_code\",\n+                    \"count\": 1\n+                },\n+                {\n+                    \"name\": \"$geoip_continent_name\",\n+                    \"count\": 1\n+                },\n+                {\n+                    \"name\": \"$geoip_country_code\",\n+                    \"count\": 1\n+                },\n+                {\n+                    \"name\": \"$geoip_country_name\",\n+                    \"count\": 1\n+                },\n+                {\n+                    \"name\": \"$geoip_latitude\",\n+                    \"count\": 1\n+                },\n+                {\n+                    \"name\": \"$geoip_longitude\",\n+                    \"count\": 1\n+                },\n+                {\n+                    \"name\": \"$geoip_postal_code\",\n+                    \"count\": 1\n+                },\n+                {\n+                    \"name\": \"$geoip_subdivision_1_code\",\n+                    \"count\": 1\n+                },\n+                {\n+                    \"name\": \"$geoip_subdivision_1_name\",\n+                    \"count\": 1\n+                },\n+                {\n+                    \"name\": \"$geoip_time_zone\",\n+                    \"count\": 1\n+                },\n+                {\n+                    \"name\": \"$initial_geoip_city_name\",\n+                    \"count\": 1\n+                },\n+                {\n+                    \"name\": \"$initial_geoip_continent_code\",\n+                    \"count\": 1\n+                },\n+                {\n+                    \"name\": \"$initial_geoip_continent_name\",\n+                    \"count\": 1\n+                },\n+                {\n+                    \"name\": \"$initial_geoip_country_code\",\n+                    \"count\": 1\n+                },\n+                {\n+                    \"name\": \"$initial_geoip_country_name\",\n+                    \"count\": 1\n+                },\n+                {\n+                    \"name\": \"$initial_geoip_latitude\",\n+                    \"count\": 1\n+                },\n+                {\n+                    \"name\": \"$initial_geoip_longitude\",\n+                    \"count\": 1\n+                },\n+                {\n+                    \"name\": \"$initial_geoip_postal_code\",\n+                    \"count\": 1\n+                },\n+                {\n+                    \"name\": \"$initial_geoip_subdivision_1_code\",\n+                    \"count\": 1\n+                },\n+                {\n+                    \"name\": \"$initial_geoip_subdivision_1_name\",\n+                    \"count\": 1\n+                },\n+                {\n+                    \"name\": \"$initial_geoip_time_zone\",\n+                    \"count\": 1\n+                },\n+                {\n+                    \"name\": \"$os\",\n+                    \"count\": 1\n+                },\n+                {\n+                    \"name\": \"email\",\n+                    \"count\": 1\n+                }\n+            ],\n+            \"personPropertiesLoading\": false\n+        },\n+        \"propertyDefinitionsModel\": {\n+            \"propertyStorage\": {\n+                \"count\": 74,\n+                \"results\": [\n                     {\n-                        \"id\": \"017e6d93-a7a0-0000-2ed7-ffdb41a3f86c\",\n-                        \"name\": \"ee_available\",\n+                        \"id\": \"017eca8c-0c87-0000-a2f0-e8ea1f489bb4\",\n+                        \"name\": \"$active_feature_flags\",\n                         \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n                         \"property_type\": null,\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e6d93-a7a8-0002-5be4-92af0973eb65\",\n-                        \"name\": \"email_service_available\",\n+                        \"id\": \"017eca8c-1bad-0000-8b13-93c6010e7170\",\n+                        \"name\": \"$anon_distinct_id\",\n                         \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n+                        \"property_type\": \"String\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e718b-e226-0000-10f8-23e7911bda69\",\n-                        \"name\": \"endpoint\",\n+                        \"id\": \"017eca8c-0c1a-0000-3605-87e18a62480f\",\n+                        \"name\": \"$browser\",\n                         \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n                         \"property_type\": \"String\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e7c2d-d33c-0000-48da-9d62e581a638\",\n-                        \"name\": \"event_count\",\n+                        \"id\": \"017eca8c-0c29-0000-a429-707acd9938ec\",\n+                        \"name\": \"$browser_version\",\n                         \"is_numerical\": true,\n                         \"query_usage_30_day\": null,\n                         \"property_type\": \"Numeric\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e72d2-65e5-0000-7556-dfbec53c4c1a\",\n-                        \"name\": \"events_count\",\n+                        \"id\": \"017eca8c-1cf3-0000-3adb-a44ca6feef5f\",\n+                        \"name\": \"$ce_version\",\n                         \"is_numerical\": true,\n                         \"query_usage_30_day\": null,\n                         \"property_type\": \"Numeric\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e72d2-65df-0000-6ad1-d8770d4a0a8a\",\n-                        \"name\": \"filter_test_accounts\",\n+                        \"id\": \"017eca8c-0c20-0000-b49b-ed12bea14981\",\n+                        \"name\": \"$current_url\",\n                         \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n-                    },\n-                    {\n-                        \"id\": \"017e72d2-65e3-0000-4cdb-5d20ca333a88\",\n-                        \"name\": \"filters_count\",\n-                        \"is_numerical\": true,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"Numeric\",\n+                        \"property_type\": \"String\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e72d2-6605-0000-c644-158bf14d8af4\",\n-                        \"name\": \"from_dashboard\",\n+                        \"id\": \"017eca8c-0c61-0000-af7c-e0c10a565788\",\n+                        \"name\": \"$device_id\",\n                         \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n-                        \"is_event_property\": null\n-                    },\n-                    {\n-                        \"id\": \"017e7c2d-de32-0000-cec0-1bd5709262bf\",\n-                        \"name\": \"funnel_from_step\",\n-                        \"is_numerical\": true,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"Numeric\",\n+                        \"property_type\": \"String\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e7c2d-de35-0000-6c80-d52a5064085b\",\n-                        \"name\": \"funnel_to_step\",\n-                        \"is_numerical\": true,\n+                        \"id\": \"017eca8c-0c1d-0000-9cab-12e7a0dc3546\",\n+                        \"name\": \"$device_type\",\n+                        \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": \"Numeric\",\n+                        \"property_type\": \"String\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e7c2d-d345-0000-c5e0-c42e43dda158\",\n-                        \"name\": \"funnel_viz_type\",\n+                        \"id\": \"017eca8c-1cef-0000-ad41-b6513107a018\",\n+                        \"name\": \"$event_type\",\n                         \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n                         \"property_type\": \"String\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e72ae-be2f-0000-8097-9f41a5b46440\",\n-                        \"name\": \"funnels_count\",\n-                        \"is_numerical\": true,\n+                        \"id\": \"017eca8e-1400-0000-2d83-29f0bef00afa\",\n+                        \"name\": \"$feature/6619-query-events-by-date\",\n+                        \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": \"Numeric\",\n+                        \"property_type\": null,\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e6d93-a7e3-0000-c761-f0b05a0c8dc2\",\n-                        \"name\": \"grid_view\",\n+                        \"id\": \"017eca8e-13fa-0000-0400-b3c8d5dfa1dd\",\n+                        \"name\": \"$feature/hackathon-apm\",\n                         \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n                         \"property_type\": null,\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e7c2d-f601-0000-e7df-f8c9f0d594d9\",\n-                        \"name\": \"has_end_point\",\n+                        \"id\": \"017eca8c-1c57-0000-4a13-470cf4f3600b\",\n+                        \"name\": \"$feature_flag\",\n                         \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n+                        \"property_type\": \"String\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e7c2d-f604-0000-1711-898873001fa8\",\n-                        \"name\": \"has_funnel_filter\",\n+                        \"id\": \"017eca8e-605a-0000-3899-32280e4bdc8d\",\n+                        \"name\": \"$feature_flag_response\",\n                         \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n                         \"property_type\": null,\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e72ae-be2c-0000-5ed8-cd25cf9f9768\",\n-                        \"name\": \"has_share_token\",\n+                        \"id\": \"017eca94-1fa9-0000-eec6-595773a2d7da\",\n+                        \"name\": \"$geoip_city_name\",\n                         \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n+                        \"property_type\": \"String\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e7c2d-f5fc-0000-44ce-9a80b472d641\",\n-                        \"name\": \"has_start_point\",\n+                        \"id\": \"017eca94-1fd7-0000-4521-58ddb7ff3e52\",\n+                        \"name\": \"$geoip_continent_code\",\n                         \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n+                        \"property_type\": \"String\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e7c2d-f661-0000-d333-3e6612b8eef4\",\n-                        \"name\": \"identifier\",\n+                        \"id\": \"017eca94-1fcc-0000-0539-600b6e0b3cc2\",\n+                        \"name\": \"$geoip_continent_name\",\n                         \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n                         \"property_type\": \"String\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e72d2-65b0-0000-e9a9-d0d1cc7dd152\",\n-                        \"name\": \"insight\",\n+                        \"id\": \"017eca94-1fc3-0001-b293-1bfa5a9412e1\",\n+                        \"name\": \"$geoip_country_code\",\n                         \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n                         \"property_type\": \"String\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e72d2-65dc-0000-de9f-5a93342a2318\",\n-                        \"name\": \"interval\",\n+                        \"id\": \"017eca94-1fba-0001-b83d-f28e3d31ba38\",\n+                        \"name\": \"$geoip_country_name\",\n                         \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n                         \"property_type\": \"String\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e6d93-a798-0000-46b9-48d9f24fed48\",\n-                        \"name\": \"is_clickhouse_enabled\",\n-                        \"is_numerical\": false,\n+                        \"id\": \"017eca94-1fe6-0000-f44d-f10eb7b3334a\",\n+                        \"name\": \"$geoip_latitude\",\n+                        \"is_numerical\": true,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n+                        \"property_type\": \"Numeric\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e6d93-a773-0000-5304-0cbffad6d0ee\",\n-                        \"name\": \"is_demo_project\",\n-                        \"is_numerical\": false,\n+                        \"id\": \"017eca94-1fed-0000-35e8-e555d9a0f766\",\n+                        \"name\": \"$geoip_longitude\",\n+                        \"is_numerical\": true,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n+                        \"property_type\": \"Numeric\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e72d2-6602-0000-2e90-442121e06887\",\n-                        \"name\": \"is_first_component_load\",\n+                        \"id\": \"017eca94-1fdd-0000-d016-a7f73a519703\",\n+                        \"name\": \"$geoip_postal_code\",\n                         \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n+                        \"property_type\": \"String\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e72d2-6612-0000-7f76-560d574600aa\",\n-                        \"name\": \"is_saved\",\n+                        \"id\": \"017eca94-2002-0001-3cfe-2f010668d071\",\n+                        \"name\": \"$geoip_subdivision_1_code\",\n                         \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n+                        \"property_type\": \"String\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e72ae-be22-0000-a9ab-9935914a9be0\",\n-                        \"name\": \"is_shared\",\n+                        \"id\": \"017eca94-200d-0001-4c59-13f85e51aa85\",\n+                        \"name\": \"$geoip_subdivision_1_name\",\n                         \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n+                        \"property_type\": \"String\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e72ae-be29-0000-8a85-0f8ffdc92278\",\n-                        \"name\": \"item_count\",\n-                        \"is_numerical\": true,\n+                        \"id\": \"017eca94-1ffb-0000-bce1-f69af571a05d\",\n+                        \"name\": \"$geoip_time_zone\",\n+                        \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": \"Numeric\",\n+                        \"property_type\": \"String\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e7bff-e906-0000-efcb-124041854f1b\",\n-                        \"name\": \"last_refreshed\",\n+                        \"id\": \"017eca8c-0c23-0000-01fe-dbdc3a55a37f\",\n+                        \"name\": \"$host\",\n                         \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": \"DateTime\",\n+                        \"property_type\": \"String\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e7376-3c92-0000-413c-e37536f59269\",\n-                        \"name\": \"load_time\",\n-                        \"is_numerical\": true,\n+                        \"id\": \"017eca8c-0c64-0000-2f06-404721b91639\",\n+                        \"name\": \"$initial_referrer\",\n+                        \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": \"Numeric\",\n+                        \"property_type\": \"String\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e72d8-ede0-0000-8fb0-116f021b3158\",\n-                        \"name\": \"message\",\n+                        \"id\": \"017eca8c-0c69-0000-503b-7c414f5f3b34\",\n+                        \"name\": \"$initial_referring_domain\",\n                         \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n+                        \"property_type\": \"String\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e7293-3710-0000-963a-98d9e1b02999\",\n-                        \"name\": \"method\",\n+                        \"id\": \"017eca8c-0c47-0000-0287-eae64c2cc493\",\n+                        \"name\": \"$insert_id\",\n                         \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n                         \"property_type\": \"String\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e72d2-660d-0000-1bdf-35953eb9e12d\",\n-                        \"name\": \"mode\",\n+                        \"id\": \"017eca8c-0bc7-0000-c2d7-afc5ce07114c\",\n+                        \"name\": \"$ip\",\n                         \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n                         \"property_type\": \"String\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e7293-3705-0000-cbe1-4d922c7ebdaf\",\n-                        \"name\": \"pathname\",\n+                        \"id\": \"017eca8c-0c3b-0000-96b5-c1bcdde5e793\",\n+                        \"name\": \"$lib\",\n                         \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n                         \"property_type\": \"String\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e7c2d-ea3d-0000-40f8-8dad6be4881b\",\n-                        \"name\": \"period\",\n+                        \"id\": \"017eca8c-0c3f-0000-6670-cbf504698600\",\n+                        \"name\": \"$lib_version\",\n                         \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n                         \"property_type\": \"String\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e6d93-bcbf-0000-9622-a585504303c6\",\n-                        \"name\": \"phjs-_send_request\",\n-                        \"is_numerical\": true,\n+                        \"id\": \"017eca8c-0c17-0000-4340-f89b2f023e30\",\n+                        \"name\": \"$os\",\n+                        \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": \"Numeric\",\n+                        \"property_type\": \"String\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e6d93-bcc5-0000-6c30-ec2bb3e9d7d4\",\n-                        \"name\": \"phjs-_send_request_inflight\",\n-                        \"is_numerical\": true,\n+                        \"id\": \"017eca8c-0c26-0000-d95d-07a32021a618\",\n+                        \"name\": \"$pathname\",\n+                        \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": \"Numeric\",\n+                        \"property_type\": \"String\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e6d93-bcda-0000-ef6c-903a6a0b9639\",\n-                        \"name\": \"phjs-batch-enqueue\",\n+                        \"id\": \"017eca8c-1c3f-0000-c488-91f08a98ea5f\",\n+                        \"name\": \"$performance_page_loaded\",\n                         \"is_numerical\": true,\n                         \"query_usage_30_day\": null,\n                         \"property_type\": \"Numeric\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e6d93-bcfb-0000-2fb3-e8ecbdd4f494\",\n-                        \"name\": \"phjs-batch-handle\",\n-                        \"is_numerical\": true,\n+                        \"id\": \"017eca8c-0c82-0000-2328-807862a35d34\",\n+                        \"name\": \"$performance_raw\",\n+                        \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": \"Numeric\",\n+                        \"property_type\": \"String\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e6d93-bcff-0000-8435-a688b9dfe18c\",\n-                        \"name\": \"phjs-batch-handle-e/\",\n-                        \"is_numerical\": true,\n+                        \"id\": \"017eca94-202b-0000-3938-679716e4c20a\",\n+                        \"name\": \"$plugins_deferred\",\n+                        \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": \"Numeric\",\n+                        \"property_type\": null,\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e6d93-bceb-0000-641a-f9c5c295d003\",\n-                        \"name\": \"phjs-batch-requests\",\n-                        \"is_numerical\": true,\n+                        \"id\": \"017eca94-2023-0000-f320-86b1881a1db7\",\n+                        \"name\": \"$plugins_failed\",\n+                        \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": \"Numeric\",\n+                        \"property_type\": null,\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e6d93-bcf7-0000-7eeb-ae2a6bc36ccd\",\n-                        \"name\": \"phjs-batch-requests-e/\",\n-                        \"is_numerical\": true,\n+                        \"id\": \"017eca94-2018-0001-cf68-f9b781f4cd36\",\n+                        \"name\": \"$plugins_succeeded\",\n+                        \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": \"Numeric\",\n+                        \"property_type\": null,\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e6d93-bd10-0000-a4f9-8c5f4406c7d3\",\n-                        \"name\": \"phjs-batch-unload\",\n-                        \"is_numerical\": true,\n+                        \"id\": \"017eca8c-0c6c-0000-66b2-8c7dde305998\",\n+                        \"name\": \"$referrer\",\n+                        \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": \"Numeric\",\n+                        \"property_type\": \"String\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e6d93-bd16-0000-4f90-d4612bf95ec5\",\n-                        \"name\": \"phjs-batch-unload-e/\",\n-                        \"is_numerical\": true,\n+                        \"id\": \"017eca8c-0c72-0000-61ae-72305428d6d6\",\n+                        \"name\": \"$referring_domain\",\n+                        \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": \"Numeric\",\n+                        \"property_type\": \"String\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e6d93-bd03-0000-1412-306ab83250d5\",\n-                        \"name\": \"phjs-batch-unload-requests\",\n+                        \"id\": \"017eca8c-0c2c-0000-bcdf-60df4941adc3\",\n+                        \"name\": \"$screen_height\",\n                         \"is_numerical\": true,\n                         \"query_usage_30_day\": null,\n                         \"property_type\": \"Numeric\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e6d93-bd09-0000-6716-9c6749a3445b\",\n-                        \"name\": \"phjs-batch-unload-requests-e/\",\n+                        \"id\": \"017eca8c-0c30-0000-6857-eafab261406f\",\n+                        \"name\": \"$screen_width\",\n                         \"is_numerical\": true,\n                         \"query_usage_30_day\": null,\n                         \"property_type\": \"Numeric\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e6d93-bcb0-0000-5c2e-b26053ebb12f\",\n-                        \"name\": \"phjs-capture\",\n-                        \"is_numerical\": true,\n+                        \"id\": \"017eca8c-0c7a-0000-b104-91f2b801933a\",\n+                        \"name\": \"$session_id\",\n+                        \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": \"Numeric\",\n+                        \"property_type\": \"String\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e6d93-bccf-0000-170f-92f8e854594a\",\n-                        \"name\": \"phjs-group\",\n-                        \"is_numerical\": true,\n+                        \"id\": \"017eca99-e0f8-0000-b5bc-63064310cd82\",\n+                        \"name\": \"$session_recording_enabled\",\n+                        \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": \"Numeric\",\n+                        \"property_type\": null,\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e6d93-bcc9-0000-3fe7-9de34c99f51f\",\n-                        \"name\": \"phjs-identify\",\n+                        \"id\": \"017eca8c-0c5a-0000-832f-2ff6f1bfcc1f\",\n+                        \"name\": \"$time\",\n                         \"is_numerical\": true,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": \"Numeric\",\n+                        \"property_type\": \"DateTime\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e6d93-bce0-0000-05e4-e007fa5cd05a\",\n-                        \"name\": \"phjs-xhr-response\",\n-                        \"is_numerical\": true,\n+                        \"id\": \"017eca8c-1baa-0000-e0cf-56f82456909f\",\n+                        \"name\": \"$user_id\",\n+                        \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": \"Numeric\",\n+                        \"property_type\": \"String\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e71f3-e957-0000-20b3-976ee4297991\",\n-                        \"name\": \"phjs-xhr-response-0\",\n+                        \"id\": \"017eca8c-0c33-0000-4dd6-5407ec12ed5c\",\n+                        \"name\": \"$viewport_height\",\n                         \"is_numerical\": true,\n                         \"query_usage_30_day\": null,\n                         \"property_type\": \"Numeric\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e6d93-bce5-0000-e682-94d9815d0ea8\",\n-                        \"name\": \"phjs-xhr-response-200\",\n+                        \"id\": \"017eca8c-0c38-0000-23dc-c98ed22fe729\",\n+                        \"name\": \"$viewport_width\",\n                         \"is_numerical\": true,\n                         \"query_usage_30_day\": null,\n                         \"property_type\": \"Numeric\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e72ae-be24-0000-aa9d-7b6f50701760\",\n-                        \"name\": \"pinned\",\n+                        \"id\": \"017eca8c-0c7e-0000-5df0-fa52d2d45e8e\",\n+                        \"name\": \"$window_id\",\n                         \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n+                        \"property_type\": \"String\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e6d93-a785-0000-5dd3-d63472f1f97c\",\n-                        \"name\": \"posthog_version\",\n+                        \"id\": \"017ecaac-3559-0000-1003-eb553aff48f3\",\n+                        \"name\": \"component\",\n                         \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n                         \"property_type\": \"String\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e6ee2-4e01-0000-3e83-4cfeaa7e843b\",\n-                        \"name\": \"project_timezone\",\n+                        \"id\": \"017ecaac-355e-0000-780e-76ddf404e584\",\n+                        \"name\": \"device_timezone\",\n                         \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n                         \"property_type\": \"String\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e72d2-65f5-0000-d0be-98e5b4a6fd3f\",\n-                        \"name\": \"properties_all\",\n+                        \"id\": \"017eca8c-1c37-0000-64e2-58f796d1fb7b\",\n+                        \"name\": \"email_service_available\",\n                         \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n                         \"property_type\": null,\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e72d2-65eb-0000-fe9c-5e5de0bb2bbd\",\n-                        \"name\": \"properties_global\",\n+                        \"id\": \"017eca8c-1c8e-0000-dd8f-d4baefea79bd\",\n+                        \"name\": \"grid_view\",\n                         \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n                         \"property_type\": null,\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e72d2-65ef-0000-7af5-fc9c12d8679d\",\n-                        \"name\": \"properties_global_custom_count\",\n-                        \"is_numerical\": true,\n-                        \"query_usage_30_day\": null,\n-                        \"property_type\": \"Numeric\",\n-                        \"is_event_property\": null\n-                    },\n-                    {\n-                        \"id\": \"017e72d2-65f1-0000-8bc5-9c805e2e5cfe\",\n-                        \"name\": \"properties_local\",\n+                        \"id\": \"017eca8c-1c11-0000-7fda-31fdc629bce5\",\n+                        \"name\": \"is_demo_project\",\n                         \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n                         \"property_type\": null,\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e72d2-65f3-0000-2f06-6f1a78c43a3c\",\n-                        \"name\": \"properties_local_custom_count\",\n+                        \"id\": \"017eca8c-2dcd-0000-9c18-d2ea476c226d\",\n+                        \"name\": \"phjs-_send_request\",\n                         \"is_numerical\": true,\n                         \"query_usage_30_day\": null,\n                         \"property_type\": \"Numeric\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e6d93-a78c-0000-edfe-3077649f39ef\",\n-                        \"name\": \"realm\",\n-                        \"is_numerical\": false,\n+                        \"id\": \"017eca8c-2dd0-0000-1426-29fcc2f49956\",\n+                        \"name\": \"phjs-_send_request_inflight\",\n+                        \"is_numerical\": true,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": \"String\",\n+                        \"property_type\": \"Numeric\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e72d2-65fe-0000-5d18-b7a3ff1db9e8\",\n-                        \"name\": \"report_delay\",\n+                        \"id\": \"017eca8c-2dd8-0000-15df-0c7971ca59a6\",\n+                        \"name\": \"phjs-batch-enqueue\",\n                         \"is_numerical\": true,\n                         \"query_usage_30_day\": null,\n                         \"property_type\": \"Numeric\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e7c2d-ea40-0000-a523-21cb52be0594\",\n-                        \"name\": \"retention_type\",\n-                        \"is_numerical\": false,\n+                        \"id\": \"017eca8c-2de5-0000-62a8-0656d788ffdf\",\n+                        \"name\": \"phjs-batch-handle\",\n+                        \"is_numerical\": true,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": \"String\",\n+                        \"property_type\": \"Numeric\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e7c2d-ea42-0000-c01c-d42972254407\",\n-                        \"name\": \"same_retention_and_cohortizing_event\",\n-                        \"is_numerical\": false,\n+                        \"id\": \"017eca8c-2de7-0000-eca0-f84792007eb2\",\n+                        \"name\": \"phjs-batch-handle-e/\",\n+                        \"is_numerical\": true,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n+                        \"property_type\": \"Numeric\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e72ae-be28-0000-d318-07e04e31e7b6\",\n-                        \"name\": \"sample_items_count\",\n+                        \"id\": \"017eca8c-2de0-0000-077f-4bf81e1affa6\",\n+                        \"name\": \"phjs-batch-requests\",\n                         \"is_numerical\": true,\n                         \"query_usage_30_day\": null,\n                         \"property_type\": \"Numeric\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e72d2-65bd-0000-a3f8-8b54075e506c\",\n-                        \"name\": \"scene\",\n-                        \"is_numerical\": false,\n+                        \"id\": \"017eca8c-2de2-0000-51c5-deedfa330ff6\",\n+                        \"name\": \"phjs-batch-requests-e/\",\n+                        \"is_numerical\": true,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": \"String\",\n+                        \"property_type\": \"Numeric\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e7bff-f26b-0000-9118-0d16e7f20f5d\",\n-                        \"name\": \"source\",\n-                        \"is_numerical\": false,\n+                        \"id\": \"017eca8c-2df0-0000-f19f-1f897bd62664\",\n+                        \"name\": \"phjs-batch-unload\",\n+                        \"is_numerical\": true,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": \"String\",\n+                        \"property_type\": \"Numeric\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e718b-e233-0000-7f70-825cd5926330\",\n-                        \"name\": \"status\",\n+                        \"id\": \"017eca8c-2df3-0000-4b12-e8be7ba4e982\",\n+                        \"name\": \"phjs-batch-unload-e/\",\n                         \"is_numerical\": true,\n                         \"query_usage_30_day\": null,\n                         \"property_type\": \"Numeric\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e718b-e238-0000-fc5e-c622af6c7303\",\n-                        \"name\": \"statusText\",\n-                        \"is_numerical\": false,\n+                        \"id\": \"017eca8c-2dea-0000-caad-6e6550317aaa\",\n+                        \"name\": \"phjs-batch-unload-requests\",\n+                        \"is_numerical\": true,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": \"String\",\n+                        \"property_type\": \"Numeric\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e72d2-65c5-0000-0a0e-5afa87c5f8b6\",\n-                        \"name\": \"success\",\n-                        \"is_numerical\": false,\n+                        \"id\": \"017eca8c-2dee-0000-9413-0c1f4f699994\",\n+                        \"name\": \"phjs-batch-unload-requests-e/\",\n+                        \"is_numerical\": true,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n+                        \"property_type\": \"Numeric\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e72d2-6617-0000-2b70-a4fc12e7a957\",\n-                        \"name\": \"tags_count\",\n+                        \"id\": \"017eca8c-2dca-0000-344b-db3a0e8f0a38\",\n+                        \"name\": \"phjs-capture\",\n                         \"is_numerical\": true,\n                         \"query_usage_30_day\": null,\n                         \"property_type\": \"Numeric\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e6d93-9f86-0000-6a30-9f155b9ddb61\",\n-                        \"name\": \"token\",\n-                        \"is_numerical\": false,\n+                        \"id\": \"017eca8c-2dd5-0000-ff3f-ee2e555d08a6\",\n+                        \"name\": \"phjs-group\",\n+                        \"is_numerical\": true,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": \"String\",\n+                        \"property_type\": \"Numeric\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e7c2d-d342-0000-17b6-4a16cfcc06a7\",\n-                        \"name\": \"total_count_actions_events\",\n+                        \"id\": \"017eca8c-2dd3-0000-92c6-a650ed7c9130\",\n+                        \"name\": \"phjs-identify\",\n                         \"is_numerical\": true,\n                         \"query_usage_30_day\": null,\n                         \"property_type\": \"Numeric\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e72d2-660a-0000-40e1-40eafc56e83a\",\n-                        \"name\": \"total_event_action_filters_count\",\n+                        \"id\": \"017eca8c-2ddb-0000-e8b1-d4d64123242a\",\n+                        \"name\": \"phjs-xhr-response\",\n                         \"is_numerical\": true,\n                         \"query_usage_30_day\": null,\n                         \"property_type\": \"Numeric\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e72d2-6607-0000-79a8-995767463795\",\n-                        \"name\": \"total_event_actions_count\",\n+                        \"id\": \"017eca8c-2ddd-0000-3fb0-cfc31eeaf506\",\n+                        \"name\": \"phjs-xhr-response-200\",\n                         \"is_numerical\": true,\n                         \"query_usage_30_day\": null,\n                         \"property_type\": \"Numeric\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e72ae-be2e-0000-2851-cd00775900d5\",\n-                        \"name\": \"trends_count\",\n-                        \"is_numerical\": true,\n+                        \"id\": \"017eca8c-1c21-0000-7508-459e05d47e66\",\n+                        \"name\": \"posthog_version\",\n+                        \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": \"Numeric\",\n+                        \"property_type\": \"String\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e718b-e22e-0000-8222-08bd760a9ee4\",\n-                        \"name\": \"type\",\n+                        \"id\": \"017ecaac-355c-0000-b82d-211a5dc3156b\",\n+                        \"name\": \"project_timezone\",\n                         \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n                         \"property_type\": \"String\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e72d2-65fb-0000-c009-52c5f8d2ec8d\",\n-                        \"name\": \"using_groups\",\n+                        \"id\": \"017eca8c-1c2f-0000-e0a5-48be36a1ccc9\",\n+                        \"name\": \"realm\",\n                         \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n+                        \"property_type\": \"String\",\n                         \"is_event_property\": null\n                     },\n                     {\n-                        \"id\": \"017e72d2-660f-0000-0813-855ea3e16efa\",\n-                        \"name\": \"viewer_is_creator\",\n+                        \"id\": \"017eca8c-0c76-0000-2255-ff88a4f50aa8\",\n+                        \"name\": \"token\",\n                         \"is_numerical\": false,\n                         \"query_usage_30_day\": null,\n-                        \"property_type\": null,\n+                        \"property_type\": \"String\",\n                         \"is_event_property\": null\n                     }\n                 ],\n@@ -6581,8 +4635,8 @@\n         \"navigation\": {\n             \"navigationLogic\": {\n                 \"fullscreen\": false,\n-                \"mobileLayout\": false,\n-                \"latestVersion\": \"1.31.1\",\n+                \"mobileLayout\": true,\n+                \"latestVersion\": \"1.32.0\",\n                 \"latestVersionLoading\": false,\n                 \"isSideBarShownBase\": true,\n                 \"isSideBarShownMobile\": false,\ndiff --git a/frontend/src/scenes/performance/webPerformanceLogic.ts b/frontend/src/scenes/performance/webPerformanceLogic.ts\nindex 4312547aa..6e5409cdd 100644\n--- a/frontend/src/scenes/performance/webPerformanceLogic.ts\n+++ b/frontend/src/scenes/performance/webPerformanceLogic.ts\n@@ -1,21 +1,25 @@\n import { kea } from 'kea'\n-import { EventType, FilterType, PropertyOperator } from '~/types'\n+import { AnyPropertyFilter, EventType, FilterType, PropertyFilter, PropertyOperator } from '~/types'\n import api from 'lib/api'\n \n import { getChartColors } from 'lib/colors'\n \n import { webPerformanceLogicType } from './webPerformanceLogicType'\n+import { isValidPropertyFilter } from 'lib/components/PropertyFilters/utils'\n+import { router } from 'kea-router'\n+\n const eventApiProps: Partial<FilterType> = {\n     properties: [\n-        { key: '$performance_page_loaded', value: '0', operator: PropertyOperator.GreaterThan, type: 'event' },\n+        { key: '$performance_page_loaded', value: 'is_set', operator: PropertyOperator.IsSet, type: 'event' },\n         { key: '$performance_raw', value: 'is_set', operator: PropertyOperator.IsSet, type: 'event' },\n     ],\n }\n \n-interface EventPerformanceMeasure {\n+export interface EventPerformanceMeasure {\n     start: number\n     end: number\n     color: string\n+    reducedHeight?: boolean\n }\n \n interface PointInTimeMarker {\n@@ -26,12 +30,12 @@ interface PointInTimeMarker {\n export interface EventPerformanceData {\n     id: string | number\n     pointsInTime: Record<string, PointInTimeMarker>\n-    durations: Record<string, EventPerformanceMeasure>\n+    resourceTimings: ResourceTiming[]\n     maxTime: number\n     gridMarkers: number[]\n }\n \n-function expandOptimisedEntries(entries: [string[], any[]]): Record<string, any> {\n+function expandOptimisedEntries(entries: [string[], any[]]): Record<string, any>[] {\n     try {\n         const keys = entries[0]\n         return entries[1].map((entry) => {\n@@ -42,7 +46,7 @@ function expandOptimisedEntries(entries: [string[], any[]]): Record<string, any>\n         })\n     } catch (e) {\n         console.error({ e, entries }, 'could not decompress performance entries')\n-        return {}\n+        return []\n     }\n }\n \n@@ -84,6 +88,146 @@ function colorForEntry(entryType: string): string {\n     }\n }\n \n+export interface MinimalPerformanceResourceTiming extends Omit<PerformanceEntry, 'entryType' | 'toJSON'> {\n+    name: string\n+    fetchStart: number\n+    responseEnd: number\n+}\n+\n+export interface ResourceTiming {\n+    item: string | URL\n+    entry: MinimalPerformanceResourceTiming | PerformanceResourceTiming | PerformanceNavigationTiming\n+    performanceParts: Record<string, EventPerformanceMeasure>\n+    color?: string\n+}\n+\n+const maybeIncrementMaxTime = (maxTime: number, candidate: number): number =>\n+    candidate > maxTime ? candidate : maxTime\n+\n+/**\n+ * There are defined sections to performance measurement. We may have data for some or all of them\n+ *\n+ * 1) Redirect\n+ *  - from startTime which would also be redirectStart\n+ *  - until redirectEnd\n+ *\n+ *  2) App Cache\n+ *   - from fetchStart\n+ *   - until domainLookupStart\n+ *\n+ *  3) DNS\n+ *   - from domainLookupStart\n+ *   - until domainLookupEnd\n+ *\n+ *  4) TCP\n+ *   - from connectStart\n+ *   - until connectEnd\n+ *\n+ *   this contains any time to negotiate SSL/TLS\n+ *   - from secureConnectionStart\n+ *   - until connectEnd\n+ *\n+ *  5) Request\n+ *   - from requestStart\n+ *   - until responseStart\n+ *\n+ *  6) Response\n+ *   - from responseStart\n+ *   - until responseEnd\n+ *\n+ *  7) Document Processing\n+ *   - from responseEnd\n+ *   - until loadEventEnd\n+ *\n+ * see https://nicj.net/resourcetiming-in-practice/\n+ *\n+ * @param perfEntry\n+ * @param maxTime\n+ */\n+function calculatePerformanceParts(\n+    perfEntry: PerformanceResourceTiming | PerformanceNavigationTiming,\n+    maxTime: number\n+): {\n+    performanceParts: Record<string, EventPerformanceMeasure>\n+    maxTime: number\n+} {\n+    const performanceParts: Record<string, EventPerformanceMeasure> = {}\n+\n+    if (perfEntry.redirectStart && perfEntry.redirectEnd) {\n+        performanceParts['redirect'] = {\n+            start: perfEntry.redirectStart,\n+            end: perfEntry.redirectEnd,\n+            color: colorForEntry(perfEntry.initiatorType),\n+        }\n+        maxTime = maybeIncrementMaxTime(maxTime, perfEntry.redirectEnd)\n+    }\n+\n+    if (perfEntry.fetchStart && perfEntry.domainLookupStart) {\n+        performanceParts['app cache'] = {\n+            start: perfEntry.fetchStart,\n+            end: perfEntry.domainLookupStart,\n+            color: colorForEntry(perfEntry.initiatorType),\n+        }\n+        maxTime = maybeIncrementMaxTime(maxTime, perfEntry.redirectEnd)\n+    }\n+\n+    if (perfEntry.domainLookupEnd && perfEntry.domainLookupStart) {\n+        performanceParts['dns lookup'] = {\n+            start: perfEntry.domainLookupStart,\n+            end: perfEntry.domainLookupEnd,\n+            color: colorForEntry(perfEntry.initiatorType),\n+        }\n+        maxTime = maybeIncrementMaxTime(maxTime, perfEntry.domainLookupEnd)\n+    }\n+\n+    if (perfEntry.connectEnd && perfEntry.connectStart) {\n+        performanceParts['connection time'] = {\n+            start: perfEntry.connectStart,\n+            end: perfEntry.connectEnd,\n+            color: colorForEntry(perfEntry.initiatorType),\n+        }\n+\n+        if (perfEntry.secureConnectionStart) {\n+            performanceParts['tls time'] = {\n+                start: perfEntry.secureConnectionStart,\n+                end: perfEntry.connectEnd,\n+                color: colorForEntry(perfEntry.initiatorType),\n+                reducedHeight: true,\n+            }\n+        }\n+        maxTime = maybeIncrementMaxTime(maxTime, perfEntry.connectEnd)\n+    }\n+\n+    if (perfEntry.responseStart && perfEntry.requestStart) {\n+        performanceParts['waiting for first byte (TTFB)'] = {\n+            start: perfEntry.requestStart,\n+            end: perfEntry.responseStart,\n+            color: colorForEntry(perfEntry.initiatorType),\n+        }\n+        maxTime = maybeIncrementMaxTime(maxTime, perfEntry.responseStart)\n+    }\n+\n+    if (perfEntry.responseStart && perfEntry.responseEnd) {\n+        performanceParts['receiving response'] = {\n+            start: perfEntry.responseStart,\n+            end: perfEntry.responseEnd,\n+            color: colorForEntry(perfEntry.initiatorType),\n+        }\n+        maxTime = maybeIncrementMaxTime(maxTime, perfEntry.responseEnd)\n+    }\n+\n+    if (perfEntry.responseEnd && (perfEntry as PerformanceNavigationTiming).loadEventEnd) {\n+        performanceParts['document processing'] = {\n+            start: perfEntry.responseEnd,\n+            end: (perfEntry as PerformanceNavigationTiming).loadEventEnd,\n+            color: colorForEntry(perfEntry.initiatorType),\n+        }\n+        maxTime = maybeIncrementMaxTime(maxTime, (perfEntry as PerformanceNavigationTiming).loadEventEnd)\n+    }\n+\n+    return { performanceParts, maxTime }\n+}\n+\n function forWaterfallDisplay(pageViewEvent: EventType): EventPerformanceData {\n     const perfData = decompress(JSON.parse(pageViewEvent.properties.$performance_raw))\n     const navTiming: PerformanceNavigationTiming = perfData.navigation[0]\n@@ -111,84 +255,107 @@ function forWaterfallDisplay(pageViewEvent: EventType): EventPerformanceData {\n         maxTime = fcp.startTime > maxTime ? fcp.startTime : maxTime\n     }\n \n-    const durations: Record<string, EventPerformanceMeasure> = {}\n-    if (navTiming.domainLookupEnd && navTiming.domainLookupStart) {\n-        durations['dns lookup'] = {\n-            start: navTiming.domainLookupStart,\n-            end: navTiming.domainLookupEnd,\n-            color: colorForEntry(navTiming.initiatorType),\n-        }\n-        maxTime = navTiming.domainLookupEnd > maxTime ? navTiming.domainLookupEnd : maxTime\n-    }\n-\n-    if (navTiming.connectEnd && navTiming.connectStart) {\n-        durations['connection time'] = {\n-            start: navTiming.connectStart,\n-            end: navTiming.connectEnd,\n-            color: colorForEntry(navTiming.initiatorType),\n-        }\n-        maxTime = navTiming.connectEnd > maxTime ? navTiming.connectEnd : maxTime\n-    }\n+    const resourceTimings: ResourceTiming[] = []\n \n-    if (navTiming.connectEnd && navTiming.secureConnectionStart) {\n-        durations['tls time'] = {\n-            start: navTiming.secureConnectionStart,\n-            end: navTiming.connectEnd,\n-            color: colorForEntry(navTiming.initiatorType),\n-        }\n-        maxTime = navTiming.connectEnd > maxTime ? navTiming.connectEnd : maxTime\n-    }\n-\n-    if (navTiming.responseStart && navTiming.requestStart) {\n-        durations['waiting for first byte (TTFB)'] = {\n-            start: navTiming.requestStart,\n-            end: navTiming.responseStart,\n-            color: colorForEntry(navTiming.initiatorType),\n-        }\n-        maxTime = navTiming.responseStart > maxTime ? navTiming.responseStart : maxTime\n-    }\n+    const __ret = calculatePerformanceParts(navTiming, maxTime)\n+    resourceTimings.push({ item: new URL(navTiming.name), performanceParts: __ret.performanceParts, entry: navTiming })\n+    maxTime = __ret.maxTime\n \n     perfData.resource.forEach((resource: PerformanceResourceTiming) => {\n         const resourceURL = new URL(resource.name)\n-        durations[resourceURL.pathname] = {\n-            start: resource.startTime,\n-            end: resource.responseEnd,\n+        const performanceCalculations = calculatePerformanceParts(resource, maxTime)\n+        const next = {\n+            item: resourceURL,\n+            performanceParts: performanceCalculations.performanceParts,\n+            entry: resource,\n             color: colorForEntry(resource.initiatorType),\n         }\n+\n+        resourceTimings.push(next)\n         maxTime = resource.responseEnd > maxTime ? resource.responseEnd : maxTime\n     })\n \n     return {\n         id: pageViewEvent.id,\n         pointsInTime,\n-        durations: durations,\n+        resourceTimings,\n         maxTime,\n         gridMarkers: Array.from(Array(10).keys()).map((n) => n * (maxTime / 10)),\n     }\n }\n \n-export const webPerformanceLogic = kea<webPerformanceLogicType<EventPerformanceData>>({\n+interface WebPerformanceLogicProps {\n+    sceneUrl: string\n+}\n+\n+export const webPerformanceLogic = kea<webPerformanceLogicType<EventPerformanceData, WebPerformanceLogicProps>>({\n     path: ['scenes', 'performance'],\n+    props: {} as WebPerformanceLogicProps,\n     actions: {\n         setEventToDisplay: (eventToDisplay: EventType) => ({\n             eventToDisplay,\n         }),\n+        setProperties: (\n+            properties: AnyPropertyFilter[] | AnyPropertyFilter\n+        ): {\n+            properties: AnyPropertyFilter[]\n+        } => {\n+            // there seem to be multiple representations of \"empty\" properties\n+            // the page does not work with some of those representations\n+            // this action normalises them\n+            if (Array.isArray(properties)) {\n+                if (properties.length === 0) {\n+                    return { properties: [{}] }\n+                } else {\n+                    return { properties }\n+                }\n+            } else {\n+                return { properties: [properties] }\n+            }\n+        },\n     },\n     reducers: {\n+        properties: [\n+            [] as PropertyFilter[],\n+            {\n+                setProperties: (_, { properties }) => properties.filter(isValidPropertyFilter),\n+            },\n+        ],\n         eventToDisplay: [\n             null as EventPerformanceData | null,\n             { setEventToDisplay: (_, { eventToDisplay }) => forWaterfallDisplay(eventToDisplay) },\n         ],\n         currentEvent: [null as EventType | null, { setEventToDisplay: (_, { eventToDisplay }) => eventToDisplay }],\n     },\n-    loaders: () => ({\n+    loaders: ({ values }) => ({\n         pageViewEvents: {\n             loadEvents: async () => {\n-                const loadResult = await api.events.list(eventApiProps, 10)\n+                const loadResult = await api.events.list({ ...eventApiProps, ...values.properties }, 10)\n                 return loadResult?.results || []\n             },\n         },\n     }),\n+    actionToUrl: ({ values }) => ({\n+        setProperties: () => {\n+            return [\n+                router.values.location.pathname,\n+                {\n+                    ...router.values.searchParams,\n+                    properties: values.properties.length === 0 ? undefined : values.properties,\n+                },\n+                router.values.hashParams,\n+                { replace: true },\n+            ]\n+        },\n+    }),\n+    urlToAction: ({ actions, values, props }) => ({\n+        [props.sceneUrl]: (_: Record<string, any>, searchParams: Record<string, any>): void => {\n+            actions.setProperties(searchParams.properties || values.properties || {})\n+        },\n+    }),\n+    listeners: ({ actions }) => ({\n+        setProperties: () => actions.loadEvents(),\n+    }),\n     events: ({ actions }) => ({\n         afterMount: [actions.loadEvents],\n     }),\n"
  },
  "74c9e2ae16ba542035b4658ad50373eb45a807b9": {
    "hash": "74c9e2ae16ba542035b4658ad50373eb45a807b9",
    "message": "fix(person-modal): fix initial person modal request property filters (#11192)",
    "diff": "commit 74c9e2ae16ba542035b4658ad50373eb45a807b9\nAuthor: Alex Gyujin Kim <alexgkim205@gmail.com>\nDate:   Tue Aug 9 11:34:59 2022 -0400\n\n    fix(person-modal): fix initial person modal request property filters (#11192)\n\ndiff --git a/frontend/src/scenes/trends/personsModalLogic.ts b/frontend/src/scenes/trends/personsModalLogic.ts\nindex 38d30cf25..bea4ab99a 100644\n--- a/frontend/src/scenes/trends/personsModalLogic.ts\n+++ b/frontend/src/scenes/trends/personsModalLogic.ts\n@@ -1,17 +1,17 @@\n import { kea } from 'kea'\n import { router } from 'kea-router'\n import api, { PaginatedResponse } from 'lib/api'\n-import { convertPropertyGroupToProperties, fromParamsGivenUrl, isGroupType, toParams } from 'lib/utils'\n+import { convertPropertiesToPropertyGroup, fromParamsGivenUrl, isGroupType, toParams } from 'lib/utils'\n import {\n     ActionFilter,\n     FilterType,\n     InsightType,\n     FunnelVizType,\n-    PropertyFilter,\n     FunnelCorrelationResultsType,\n     ActorType,\n     GraphDataset,\n     ChartDisplayType,\n+    FilterLogicalOperator,\n } from '~/types'\n import type { personsModalLogicType } from './personsModalLogicType'\n import { eventUsageLogic } from 'lib/utils/eventUsageLogic'\n@@ -75,17 +75,15 @@ export function parsePeopleParams(peopleParams: PeopleParamType, filters: Partia\n         params.date_to = date_to as string\n     }\n \n-    // If breakdown type is cohort, we use breakdown_value\n-    // If breakdown type is event, we just set another filter\n-    const flattenedPropertyGroup = convertPropertyGroupToProperties(params.properties)\n-    if (breakdown_value && filters.breakdown_type != 'cohort' && filters.breakdown_type != 'person') {\n-        params.properties = [\n-            ...(flattenedPropertyGroup || []),\n-            { key: params.breakdown, value: breakdown_value, type: 'event' } as PropertyFilter,\n-        ]\n-    }\n-    if (action?.properties) {\n-        params.properties = { ...(flattenedPropertyGroup || {}), ...action.properties }\n+    // Ensure properties are property groups\n+    params.properties = convertPropertiesToPropertyGroup(params.properties)\n+\n+    // Merge action property group\n+    if (action?.properties?.values && (action.properties.values?.length ?? 0) > 0) {\n+        params.properties = {\n+            type: FilterLogicalOperator.And,\n+            values: [params.properties, convertPropertiesToPropertyGroup(action.properties)],\n+        }\n     }\n \n     return toParams({ ...params, ...restParams })\n"
  },
  "cd90919437b18f020328442f927a045f58a52456": {
    "hash": "cd90919437b18f020328442f927a045f58a52456",
    "message": "fix: person modal crash (#8877)\n    \n    * fix: person modal crash\n    \n    * disable csv for now\n    \n    * dont remove fix, need it for lifecycle and stickyness\n    \n    Co-authored-by: Neil Kakkar <neilkakkar@gmail.com>",
    "diff": "commit cd90919437b18f020328442f927a045f58a52456\nAuthor: Rick Marron <rcmarron@gmail.com>\nDate:   Sun Mar 6 04:19:22 2022 -0800\n\n    fix: person modal crash (#8877)\n    \n    * fix: person modal crash\n    \n    * disable csv for now\n    \n    * dont remove fix, need it for lifecycle and stickyness\n    \n    Co-authored-by: Neil Kakkar <neilkakkar@gmail.com>\n\ndiff --git a/frontend/src/scenes/trends/PersonsModal.tsx b/frontend/src/scenes/trends/PersonsModal.tsx\nindex 772048f83..c7d6b4bef 100644\n--- a/frontend/src/scenes/trends/PersonsModal.tsx\n+++ b/frontend/src/scenes/trends/PersonsModal.tsx\n@@ -91,7 +91,9 @@ export function PersonsModal({\n     )\n \n     const flaggedInsights = featureFlags[FEATURE_FLAGS.NEW_INSIGHT_COHORTS]\n-    const isDownloadCsvAvailable: boolean = view === InsightType.TRENDS && showModalActions && !!people?.action\n+    // TODO: Re-enable CSV downloads when frontend can support new entity properties\n+    // const isDownloadCsvAvailable: boolean = view === InsightType.TRENDS && showModalActions && !!people?.action\n+    const isDownloadCsvAvailable: boolean = false\n     const isSaveAsCohortAvailable =\n         (view === InsightType.TRENDS ||\n             view === InsightType.STICKINESS ||\ndiff --git a/frontend/src/scenes/trends/personsModalLogic.tsx b/frontend/src/scenes/trends/personsModalLogic.tsx\nindex 217f55e2a..72955e593 100644\n--- a/frontend/src/scenes/trends/personsModalLogic.tsx\n+++ b/frontend/src/scenes/trends/personsModalLogic.tsx\n@@ -85,7 +85,7 @@ export function parsePeopleParams(peopleParams: PeopleParamType, filters: Partia\n         ]\n     }\n     if (action?.properties) {\n-        params.properties = [...(params.properties || []), ...action.properties]\n+        params.properties = { ...(params.properties || {}), ...action.properties }\n     }\n \n     return toParams({ ...params, ...restParams })\n"
  },
  "aabe4a5377b31210ec9aeaf94ed9d53d1e46aa17": {
    "hash": "aabe4a5377b31210ec9aeaf94ed9d53d1e46aa17",
    "message": "fix(persons): Use encoded url for sceneUrl (#10933)",
    "diff": "commit aabe4a5377b31210ec9aeaf94ed9d53d1e46aa17\nAuthor: Neil Kakkar <neilkakkar@gmail.com>\nDate:   Thu Aug 11 09:59:06 2022 +0100\n\n    fix(persons): Use encoded url for sceneUrl (#10933)\n\ndiff --git a/frontend/src/scenes/persons/Person.tsx b/frontend/src/scenes/persons/Person.tsx\nindex 56c28059d..110a452b6 100644\n--- a/frontend/src/scenes/persons/Person.tsx\n+++ b/frontend/src/scenes/persons/Person.tsx\n@@ -167,7 +167,7 @@ export function Person(): JSX.Element | null {\n                         pageKey={person.distinct_ids.join('__')} // force refresh if distinct_ids change\n                         fixedFilters={{ person_id: person.id }}\n                         showPersonColumn={false}\n-                        sceneUrl={urls.person(urlId || person.distinct_ids[0] || String(person.id), false)}\n+                        sceneUrl={urls.person(urlId || person.distinct_ids[0] || String(person.id))}\n                     />\n                 </TabPane>\n                 {showSessionRecordings && (\n"
  },
  "1636121a0de88fcf1d1d0eb9c9a09af5c2d47973": {
    "hash": "1636121a0de88fcf1d1d0eb9c9a09af5c2d47973",
    "message": "Don't encode distinctIDs for person links (#7378)\n    \n    * dont encode distinctIDs for person links\n    \n    * update wip\n    \n    * clean up\n    \n    * rm other debug\n    \n    * add test\n    \n    * fix command pallete too\n    \n    * address comment\n    \n    * id->urlId",
    "diff": "commit 1636121a0de88fcf1d1d0eb9c9a09af5c2d47973\nAuthor: Neil Kakkar <neilkakkar@gmail.com>\nDate:   Fri Nov 26 16:32:17 2021 +0000\n\n    Don't encode distinctIDs for person links (#7378)\n    \n    * dont encode distinctIDs for person links\n    \n    * update wip\n    \n    * clean up\n    \n    * rm other debug\n    \n    * add test\n    \n    * fix command pallete too\n    \n    * address comment\n    \n    * id->urlId\n\ndiff --git a/frontend/src/lib/components/CommandPalette/commandPaletteLogic.ts b/frontend/src/lib/components/CommandPalette/commandPaletteLogic.ts\nindex b573848bd..f219b17b3 100644\n--- a/frontend/src/lib/components/CommandPalette/commandPaletteLogic.ts\n+++ b/frontend/src/lib/components/CommandPalette/commandPaletteLogic.ts\n@@ -245,7 +245,7 @@ export const commandPaletteLogic = kea<\n         setInput: async ({ input }, breakpoint) => {\n             await breakpoint(300)\n             if (input.length > 8) {\n-                const response = await api.get('api/person/?key_identifier=' + input)\n+                const response = await api.get('api/person/?key_identifier=' + encodeURIComponent(input))\n                 const person = response.results[0]\n                 if (person) {\n                     actions.registerCommand({\ndiff --git a/frontend/src/scenes/events/EventsTable.tsx b/frontend/src/scenes/events/EventsTable.tsx\nindex 725861984..2e4f68d15 100644\n--- a/frontend/src/scenes/events/EventsTable.tsx\n+++ b/frontend/src/scenes/events/EventsTable.tsx\n@@ -93,7 +93,7 @@ export function EventsTable({\n                 return { props: { colSpan: 0 } }\n             }\n             return showLinkToPerson && event.person?.distinct_ids?.length ? (\n-                <Link to={`/person/${encodeURIComponent(event.person.distinct_ids[0])}`}>\n+                <Link to={urls.person(event.person.distinct_ids[0])}>\n                     <PersonHeader withIcon person={event.person} />\n                 </Link>\n             ) : (\ndiff --git a/frontend/src/scenes/events/eventsTableLogic.ts b/frontend/src/scenes/events/eventsTableLogic.ts\nindex 2b012bf1a..ba9987ab5 100644\n--- a/frontend/src/scenes/events/eventsTableLogic.ts\n+++ b/frontend/src/scenes/events/eventsTableLogic.ts\n@@ -298,7 +298,6 @@ export const eventsTableLogic = kea<eventsTableLogicType<ApiError, EventsTableLo\n                     ...(values.eventFilter ? { event: values.eventFilter } : {}),\n                     orderBy: [values.orderBy],\n                 })\n-\n                 let apiResponse = null\n \n                 try {\ndiff --git a/frontend/src/scenes/funnels/FunnelPeople.tsx b/frontend/src/scenes/funnels/FunnelPeople.tsx\nindex 2cbc4e9d1..7401fd9ab 100644\n--- a/frontend/src/scenes/funnels/FunnelPeople.tsx\n+++ b/frontend/src/scenes/funnels/FunnelPeople.tsx\n@@ -9,6 +9,7 @@ import { EntityTypes } from '~/types'\n import './FunnelPeople.scss'\n import { Card } from 'antd'\n import { insightLogic } from 'scenes/insights/insightLogic'\n+import { urls } from 'scenes/urls'\n \n export function People(): JSX.Element | null {\n     const { insightProps } = useValues(insightLogic)\n@@ -57,9 +58,7 @@ export function People(): JSX.Element | null {\n                         {peopleSorted.map((person) => (\n                             <tr key={person.id} data-attr=\"funnel-person\">\n                                 <td className=\"text-overflow\">\n-                                    <Link to={`/person/${encodeURIComponent(person.distinct_ids[0])}`}>\n-                                        {person.name}\n-                                    </Link>\n+                                    <Link to={urls.person(person.distinct_ids[0])}>{person.name}</Link>\n                                 </td>\n                                 {stepsWithCount.map((step, index) => (\n                                     <td\ndiff --git a/frontend/src/scenes/persons/Person.tsx b/frontend/src/scenes/persons/Person.tsx\nindex c683258bc..71a9599de 100644\n--- a/frontend/src/scenes/persons/Person.tsx\n+++ b/frontend/src/scenes/persons/Person.tsx\n@@ -27,11 +27,11 @@ const { TabPane } = Tabs\n export const scene: SceneExport = {\n     component: Person,\n     logic: personsLogic,\n-    paramsToProps: () => ({ syncWithUrl: true }),\n+    paramsToProps: ({ params }) => ({ syncWithUrl: true, urlId: params._ }), // wildcard is stored in _\n }\n \n-export function Person({ id: urlId }: { id?: string } = {}): JSX.Element {\n-    const personsLogicProps: PersonLogicProps = { syncWithUrl: true }\n+export function Person({ _: urlId }: { _?: string } = {}): JSX.Element {\n+    const personsLogicProps: PersonLogicProps = { syncWithUrl: true, urlId }\n     const [activeCardTab, setActiveCardTab] = useState('properties')\n     const {\n         person,\n@@ -122,7 +122,10 @@ export function Person({ id: urlId }: { id?: string } = {}): JSX.Element {\n                                         pageKey={person.distinct_ids.join('__')} // force refresh if distinct_ids change\n                                         fixedFilters={{ person_id: person.id }}\n                                         hidePersonColumn\n-                                        sceneUrl={urls.person(urlId || person.distinct_ids[0] || String(person.id))}\n+                                        sceneUrl={urls.person(\n+                                            urlId || person.distinct_ids[0] || String(person.id),\n+                                            false\n+                                        )}\n                                     />\n                                 )}\n                             </div>\ndiff --git a/frontend/src/scenes/persons/PersonHeader.test.ts b/frontend/src/scenes/persons/PersonHeader.test.ts\nindex 27917a6e0..7d7704736 100644\n--- a/frontend/src/scenes/persons/PersonHeader.test.ts\n+++ b/frontend/src/scenes/persons/PersonHeader.test.ts\n@@ -17,6 +17,11 @@ describe('the person header', () => {\n                 expectedLink: undefined,\n                 name: 'with no ids',\n             },\n+            {\n+                distinctIds: ['a+dicey/@!'],\n+                expectedLink: urls.person('a+dicey/@!'),\n+                name: 'with no ids',\n+            },\n         ]\n \n         personLinksTestCases.forEach((testCase) => {\ndiff --git a/frontend/src/scenes/persons/personsLogic.ts b/frontend/src/scenes/persons/personsLogic.ts\nindex e97b35846..d686911ea 100644\n--- a/frontend/src/scenes/persons/personsLogic.ts\n+++ b/frontend/src/scenes/persons/personsLogic.ts\n@@ -26,6 +26,7 @@ interface Filters {\n export interface PersonLogicProps {\n     cohort?: number | 'new' | 'personsModalNew'\n     syncWithUrl?: boolean\n+    urlId?: string\n }\n \n export const personsLogic = kea<personsLogicType<Filters, PersonLogicProps, PersonPaginatedResponse>>({\ndiff --git a/frontend/src/scenes/retention/RetentionTable.tsx b/frontend/src/scenes/retention/RetentionTable.tsx\nindex ee2b13cba..baf875b87 100644\n--- a/frontend/src/scenes/retention/RetentionTable.tsx\n+++ b/frontend/src/scenes/retention/RetentionTable.tsx\n@@ -16,6 +16,7 @@ import { insightLogic } from 'scenes/insights/insightLogic'\n import { dayjs } from 'lib/dayjs'\n import { Spinner } from 'lib/components/Spinner/Spinner'\n import './RetentionTable.scss'\n+import { urls } from 'scenes/urls'\n \n export function RetentionTable({ dashboardItemId = null }: { dashboardItemId?: number | null }): JSX.Element | null {\n     const { insightProps } = useValues(insightLogic)\n@@ -156,9 +157,9 @@ export function RetentionTable({ dashboardItemId = null }: { dashboardItemId?: n\n                                                     <tr key={personAppearances.person.id}>\n                                                         <td className=\"text-overflow\" style={{ minWidth: 200 }}>\n                                                             <Link\n-                                                                to={`/person/${encodeURIComponent(\n+                                                                to={urls.person(\n                                                                     personAppearances.person.distinct_ids[0]\n-                                                                )}`}\n+                                                                )}\n                                                                 data-attr=\"retention-person-link\"\n                                                             >\n                                                                 {personAppearances.person.name}\ndiff --git a/frontend/src/scenes/scenes.ts b/frontend/src/scenes/scenes.ts\nindex 2f8967fb9..d021f2da6 100644\n--- a/frontend/src/scenes/scenes.ts\n+++ b/frontend/src/scenes/scenes.ts\n@@ -199,7 +199,7 @@ export const routes: Record<string, Scene> = {\n     [urls.events()]: Scene.Events,\n     [urls.sessions()]: Scene.Sessions,\n     [urls.sessionRecordings()]: Scene.SessionRecordings,\n-    [urls.person('*')]: Scene.Person,\n+    [urls.person('*', false)]: Scene.Person,\n     [urls.persons()]: Scene.Persons,\n     [urls.groups(':groupTypeIndex')]: Scene.Groups,\n     [urls.cohort(':id')]: Scene.Cohorts,\ndiff --git a/frontend/src/scenes/sessions/SessionsView.tsx b/frontend/src/scenes/sessions/SessionsView.tsx\nindex 997aedafa..452b2ecc0 100644\n--- a/frontend/src/scenes/sessions/SessionsView.tsx\n+++ b/frontend/src/scenes/sessions/SessionsView.tsx\n@@ -80,7 +80,7 @@ export function SessionsView({ personIds, isPersonPage = false }: SessionsTableP\n             key: 'person',\n             render: function RenderSession(session: SessionType) {\n                 return (\n-                    <Link to={`/person/${encodeURIComponent(session.distinct_id)}`} className=\"ph-no-capture\">\n+                    <Link to={urls.person(session.distinct_id)} className=\"ph-no-capture\">\n                         {session?.email || session.distinct_id}\n                     </Link>\n                 )\ndiff --git a/frontend/src/scenes/urls.ts b/frontend/src/scenes/urls.ts\nindex ef82e2c93..edd2e8989 100644\n--- a/frontend/src/scenes/urls.ts\n+++ b/frontend/src/scenes/urls.ts\n@@ -22,7 +22,7 @@ export const urls = {\n     savedInsights: () => '/insights',\n     sessions: () => '/sessions',\n     sessionRecordings: () => '/recordings',\n-    person: (id: string) => `/person/${id}`,\n+    person: (id: string, encode: boolean = true) => (encode ? `/person/${encodeURIComponent(id)}` : `/person/${id}`),\n     persons: () => '/persons',\n     groups: (groupTypeIndex: string) => `/groups/${groupTypeIndex}`,\n     cohort: (id: string | number) => `/cohorts/${id}`,\n"
  },
  "135504963480ec5ef15d60d4bb94379a44b1d605": {
    "hash": "135504963480ec5ef15d60d4bb94379a44b1d605",
    "message": "fix(dashboards): Align dashboard filtering buttons properly (#10978)",
    "diff": "commit 135504963480ec5ef15d60d4bb94379a44b1d605\nAuthor: Michael Matloka <dev@twixes.com>\nDate:   Tue Jul 26 20:52:26 2022 +0200\n\n    fix(dashboards): Align dashboard filtering buttons properly (#10978)\n\ndiff --git a/frontend/src/lib/components/TimezoneAware/index.scss b/frontend/src/lib/components/TimezoneAware/index.scss\nindex aaf640893..14ab1fb42 100644\n--- a/frontend/src/lib/components/TimezoneAware/index.scss\n+++ b/frontend/src/lib/components/TimezoneAware/index.scss\n@@ -37,5 +37,6 @@\n \n .tz-indicator {\n     color: var(--text-muted);\n+    font-weight: 700;\n     cursor: pointer;\n }\ndiff --git a/frontend/src/lib/components/TimezoneAware/index.tsx b/frontend/src/lib/components/TimezoneAware/index.tsx\nindex 0582f05f6..d9c864792 100644\n--- a/frontend/src/lib/components/TimezoneAware/index.tsx\n+++ b/frontend/src/lib/components/TimezoneAware/index.tsx\n@@ -162,7 +162,8 @@ function TZIndicatorRaw({\n     return (\n         <Popover content={PopoverContent} onVisibleChange={handleVisibleChange} placement={placement}>\n             <span className=\"tz-indicator\" style={style}>\n-                <GlobalOutlined /> UTC\n+                <GlobalOutlined style={{ marginRight: '0.375rem' }} />\n+                UTC\n             </span>\n         </Popover>\n     )\ndiff --git a/frontend/src/scenes/dashboard/Dashboard.tsx b/frontend/src/scenes/dashboard/Dashboard.tsx\nindex a40cc391d..2bf0ccbd2 100644\n--- a/frontend/src/scenes/dashboard/Dashboard.tsx\n+++ b/frontend/src/scenes/dashboard/Dashboard.tsx\n@@ -110,9 +110,9 @@ function DashboardScene(): JSX.Element {\n                         DashboardPlacement.Export,\n                         DashboardPlacement.InternalMetrics,\n                     ].includes(placement) && (\n-                        <div className=\"flex pb border-bottom space-x\">\n-                            <div className=\"flex-grow flex\" style={{ height: 30 }}>\n-                                <TZIndicator style={{ marginRight: 8, fontWeight: 'bold', lineHeight: '30px' }} />\n+                        <div className=\"flex pb border-bottom space-x-05\">\n+                            <div className=\"flex-center\" style={{ height: '2rem' }}>\n+                                <TZIndicator style={{ marginRight: '0.5rem' }} />\n                                 <DateFilter\n                                     defaultValue=\"Custom\"\n                                     showCustom\n"
  },
  "1a15c219529b3d4174eae24df085a4786c24b04d": {
    "hash": "1a15c219529b3d4174eae24df085a4786c24b04d",
    "message": "feat(Dashboards): Filtering on entire dashboard (#9767)\n    \n    * feat(Dashboards): Filtering on entire dashboard\n    \n    * fix layout\n    \n    * typing\n    \n    * add feature flags\n    \n    * fix bug with saving\n    \n    * fix mypyp",
    "diff": "commit 1a15c219529b3d4174eae24df085a4786c24b04d\nAuthor: Tim Glaser <tim@glsr.nl>\nDate:   Wed May 18 12:16:02 2022 +0100\n\n    feat(Dashboards): Filtering on entire dashboard (#9767)\n    \n    * feat(Dashboards): Filtering on entire dashboard\n    \n    * fix layout\n    \n    * typing\n    \n    * add feature flags\n    \n    * fix bug with saving\n    \n    * fix mypyp\n\ndiff --git a/frontend/src/lib/constants.tsx b/frontend/src/lib/constants.tsx\nindex 4c7ebad1c..c6dbf42a7 100644\n--- a/frontend/src/lib/constants.tsx\n+++ b/frontend/src/lib/constants.tsx\n@@ -120,6 +120,7 @@ export const FEATURE_FLAGS = {\n     MULTI_DASHBOARD_INSIGHTS: 'multi-dashboard-insights', // owner: @pauldambra\n     INSIGHT_ACTIVITY_LOG: '8545-insight-activity-log', // owner: @pauldambra\n     COHORT_FILTERS: 'cohort-filters', // owner: @edscode\n+    PROPERTY_FILTER_ON_DASHBOARD: 'property-filter-on-dashboard', // owner: @edscode\n }\n \n /** Which self-hosted plan's features are available with Cloud's \"Standard\" plan (aka card attached). */\ndiff --git a/frontend/src/lib/utils/eventUsageLogic.ts b/frontend/src/lib/utils/eventUsageLogic.ts\nindex c8a9ebfef..50fc9bfe3 100644\n--- a/frontend/src/lib/utils/eventUsageLogic.ts\n+++ b/frontend/src/lib/utils/eventUsageLogic.ts\n@@ -273,6 +273,7 @@ export const eventUsageLogic = kea<\n             dateFrom,\n             dateTo,\n         }),\n+        reportDashboardPropertiesChanged: true,\n         reportDashboardPinToggled: (pinned: boolean, source: DashboardEventSource) => ({\n             pinned,\n             source,\n@@ -706,6 +707,9 @@ export const eventUsageLogic = kea<\n                 date_to: dateTo?.toString(),\n             })\n         },\n+        reportDashboardPropertiesChanged: async () => {\n+            posthog.capture(`dashboard properties changed`)\n+        },\n         reportDashboardPinToggled: async (payload) => {\n             posthog.capture(`dashboard pin toggled`, payload)\n         },\ndiff --git a/frontend/src/scenes/dashboard/Dashboard.scss b/frontend/src/scenes/dashboard/Dashboard.scss\nindex 37de2ca14..51a02e3ec 100644\n--- a/frontend/src/scenes/dashboard/Dashboard.scss\n+++ b/frontend/src/scenes/dashboard/Dashboard.scss\n@@ -3,35 +3,20 @@\n .dashboard {\n     margin-top: 1rem;\n \n-    .dashboard-items-actions {\n-        margin-bottom: $default_spacing;\n-        display: flex;\n-\n-        .left-item {\n-            flex-grow: 1;\n-\n-            .dashboard-items-action-icon {\n-                margin-right: 6px;\n-            }\n-\n-            .dashboard-items-action-refresh-text {\n-                visibility: visible;\n+    .dashboard-items-action-icon {\n+        margin-right: 6px;\n+    }\n \n-                &.hidden {\n-                    visibility: hidden;\n-                }\n+    .dashboard-items-action-refresh-text {\n+        visibility: visible;\n \n-                &.completed {\n-                    position: absolute;\n-                    left: 30px;\n-                }\n-            }\n+        &.hidden {\n+            visibility: hidden;\n         }\n \n-        .right-item {\n-            .ant-btn {\n-                padding-left: 4px !important;\n-            }\n+        &.completed {\n+            position: absolute;\n+            left: 30px;\n         }\n     }\n \ndiff --git a/frontend/src/scenes/dashboard/Dashboard.tsx b/frontend/src/scenes/dashboard/Dashboard.tsx\nindex e764e394b..d040cf3d3 100644\n--- a/frontend/src/scenes/dashboard/Dashboard.tsx\n+++ b/frontend/src/scenes/dashboard/Dashboard.tsx\n@@ -15,6 +15,9 @@ import { DashboardReloadAction, LastRefreshText } from 'scenes/dashboard/Dashboa\n import { SceneExport } from 'scenes/sceneTypes'\n import { InsightErrorState } from 'scenes/insights/EmptyStates'\n import { DashboardHeader } from './DashboardHeader'\n+import { PropertyFilters } from 'lib/components/PropertyFilters/PropertyFilters'\n+import { featureFlagLogic } from 'lib/logic/featureFlagLogic'\n+import { FEATURE_FLAGS } from 'lib/constants'\n \n interface Props {\n     id?: string\n@@ -51,7 +54,8 @@ function DashboardScene(): JSX.Element {\n         dashboardMode,\n         receivedErrorsFromAPI,\n     } = useValues(dashboardLogic)\n-    const { setDashboardMode, setDates, reportDashboardViewed } = useActions(dashboardLogic)\n+    const { setDashboardMode, setDates, reportDashboardViewed, setProperties } = useActions(dashboardLogic)\n+    const { featureFlags } = useValues(featureFlagLogic)\n \n     useEffect(() => {\n         reportDashboardViewed()\n@@ -102,24 +106,10 @@ function DashboardScene(): JSX.Element {\n                 <EmptyDashboardComponent loading={itemsLoading} />\n             ) : (\n                 <div>\n-                    <div className=\"dashboard-items-actions\">\n-                        <div\n-                            className=\"left-item\"\n-                            style={placement === DashboardPlacement.Public ? { textAlign: 'right' } : undefined}\n-                        >\n-                            {placement === DashboardPlacement.Public ? <LastRefreshText /> : <DashboardReloadAction />}\n-                        </div>\n-\n-                        {placement !== DashboardPlacement.Public && (\n-                            <div\n-                                className=\"right-item\"\n-                                style={{\n-                                    display: 'flex',\n-                                    alignItems: 'center',\n-                                    justifyContent: 'flex-end',\n-                                }}\n-                            >\n-                                <TZIndicator style={{ marginRight: 8, fontWeight: 'bold' }} />\n+                    {placement !== DashboardPlacement.Public && (\n+                        <div className=\"flex pb border-bottom space-x\">\n+                            <div className=\"flex-grow flex\" style={{ height: 30 }}>\n+                                <TZIndicator style={{ marginRight: 8, fontWeight: 'bold', lineHeight: '30px' }} />\n                                 <DateFilter\n                                     defaultValue=\"Custom\"\n                                     showCustom\n@@ -135,7 +125,24 @@ function DashboardScene(): JSX.Element {\n                                     )}\n                                 />\n                             </div>\n-                        )}\n+                            {(featureFlags[FEATURE_FLAGS.PROPERTY_FILTER_ON_DASHBOARD] ||\n+                                dashboard?.filters.properties) && (\n+                                <PropertyFilters\n+                                    onChange={setProperties}\n+                                    pageKey={'dashboard_' + dashboard?.id}\n+                                    propertyFilters={dashboard?.filters.properties}\n+                                    useLemonButton\n+                                />\n+                            )}\n+                        </div>\n+                    )}\n+                    <div className=\"flex pt pb space-x dashoard-items-actions\">\n+                        <div\n+                            className=\"left-item\"\n+                            style={placement === DashboardPlacement.Public ? { textAlign: 'right' } : undefined}\n+                        >\n+                            {placement === DashboardPlacement.Public ? <LastRefreshText /> : <DashboardReloadAction />}\n+                        </div>\n                     </div>\n                     <DashboardItems />\n                 </div>\ndiff --git a/frontend/src/scenes/dashboard/dashboardLogic.ts b/frontend/src/scenes/dashboard/dashboardLogic.ts\nindex fb366d4bb..fc6ed5743 100644\n--- a/frontend/src/scenes/dashboard/dashboardLogic.ts\n+++ b/frontend/src/scenes/dashboard/dashboardLogic.ts\n@@ -8,6 +8,7 @@ import { insightsModel } from '~/models/insightsModel'\n import { DashboardPrivilegeLevel, FEATURE_FLAGS, OrganizationMembershipLevel } from 'lib/constants'\n import { DashboardEventSource, eventUsageLogic } from 'lib/utils/eventUsageLogic'\n import {\n+    AnyPropertyFilter,\n     Breadcrumb,\n     ChartDisplayType,\n     DashboardLayoutSize,\n@@ -92,6 +93,7 @@ export const dashboardLogic = kea<dashboardLogicType<DashboardLogicProps>>({\n             dateTo,\n             reloadDashboard,\n         }),\n+        setProperties: (properties: AnyPropertyFilter[]) => ({ properties }),\n         setAutoRefresh: (enabled: boolean, interval: number) => ({ enabled, interval }),\n         setRefreshStatus: (shortId: InsightShortId, loading = false) => ({ shortId, loading }),\n         setRefreshStatuses: (shortIds: InsightShortId[], loading = false) => ({ shortIds, loading }),\n@@ -155,6 +157,10 @@ export const dashboardLogic = kea<dashboardLogicType<DashboardLogicProps>>({\n                     date_from: dateFrom || null,\n                     date_to: dateTo || null,\n                 }),\n+                setProperties: (state, { properties }) => ({\n+                    ...state,\n+                    properties: properties || null,\n+                }),\n             },\n         ],\n         allItems: [\n@@ -679,6 +685,10 @@ export const dashboardLogic = kea<dashboardLogicType<DashboardLogicProps>>({\n             }\n             eventUsageLogic.actions.reportDashboardDateRangeChanged(dateFrom, dateTo)\n         },\n+        setProperties: () => {\n+            actions.updateAndRefreshDashboard()\n+            eventUsageLogic.actions.reportDashboardPropertiesChanged()\n+        },\n         setDashboardMode: async ({ mode, source }) => {\n             // Edit mode special handling\n             if (mode === DashboardMode.Fullscreen) {\ndiff --git a/posthog/api/dashboard.py b/posthog/api/dashboard.py\nindex 5f2bb47c3..9484373a9 100644\n--- a/posthog/api/dashboard.py\n+++ b/posthog/api/dashboard.py\n@@ -159,13 +159,15 @@ class DashboardSerializer(TaggedItemSerializerMixin, serializers.ModelSerializer\n \n         instance = super().update(instance, validated_data)\n \n-        tile_layouts = self.initial_data.pop(\"tile_layouts\", [])\n+        initial_data = dict(self.initial_data)\n+\n+        tile_layouts = initial_data.pop(\"tile_layouts\", [])\n         for tile_layout in tile_layouts:\n             DashboardTile.objects.filter(dashboard__id=instance.id, insight__id=(tile_layout[\"id\"])).update(\n                 layouts=tile_layout[\"layouts\"]\n             )\n \n-        colors = self.initial_data.pop(\"colors\", [])\n+        colors = initial_data.pop(\"colors\", [])\n         for color in colors:\n             DashboardTile.objects.filter(dashboard__id=instance.id, insight__id=(color[\"id\"])).update(\n                 color=color[\"color\"]\ndiff --git a/posthog/api/test/test_dashboard.py b/posthog/api/test/test_dashboard.py\nindex 878202a56..19b0badea 100644\n--- a/posthog/api/test/test_dashboard.py\n+++ b/posthog/api/test/test_dashboard.py\n@@ -350,6 +350,24 @@ class TestDashboard(APIBaseTest, QueryMatchingTest):\n         items_response = self.client.get(f\"/api/projects/{self.team.id}/insights/\").json()\n         self.assertEqual(len(items_response[\"results\"]), 0)\n \n+    def test_dashboard_filtering_on_properties(self):\n+        dashboard_id, _ = self._create_dashboard({\"filters\": {\"date_from\": \"-24h\"}})\n+        response = self.client.patch(\n+            f\"/api/projects/{self.team.id}/dashboards/{dashboard_id}/\",\n+            data={\"filters\": {\"date_from\": \"-24h\", \"properties\": [{\"key\": \"prop\", \"value\": \"val\"}]}},\n+        ).json()\n+\n+        self.assertEqual(response[\"filters\"][\"properties\"], [{\"key\": \"prop\", \"value\": \"val\"}])\n+\n+        insight_id, _ = self._create_insight(\n+            {\"filters\": {\"hello\": \"test\", \"date_from\": \"-7d\"}, \"dashboards\": [dashboard_id], \"name\": \"some_item\"}\n+        )\n+\n+        response = self.client.get(f\"/api/projects/{self.team.id}/dashboards/{dashboard_id}/\").json()\n+        self.assertEqual(len(response[\"items\"]), 1)\n+        self.assertEqual(response[\"items\"][0][\"name\"], \"some_item\")\n+        self.assertEqual(response[\"items\"][0][\"filters\"][\"properties\"], [{\"key\": \"prop\", \"value\": \"val\"}])\n+\n     def test_dashboard_filter_is_applied_even_if_insight_is_created_before_dashboard(self):\n         insight_id, _ = self._create_insight({\"filters\": {\"hello\": \"test\", \"date_from\": \"-7d\"}, \"name\": \"some_item\"})\n \n@@ -631,6 +649,16 @@ class TestDashboard(APIBaseTest, QueryMatchingTest):\n         response = self.client.get(f\"/api/projects/{team2.id}/dashboards/{dashboard.id}\")\n         self.assertEqual(response.status_code, status.HTTP_403_FORBIDDEN, response.content)\n \n+    def test_patch_api_as_form_data(self):\n+        dashboard = Dashboard.objects.create(team=self.team, name=\"dashboard\", created_by=self.user)\n+        response = self.client.patch(\n+            f\"/api/projects/{self.team.id}/dashboards/{dashboard.pk}/\",\n+            data=\"name=replaced\",\n+            content_type=\"application/x-www-form-urlencoded\",\n+        )\n+        self.assertEqual(response.status_code, 200, response.content)\n+        self.assertEqual(response.json()[\"name\"], \"replaced\")\n+\n     def _create_dashboard(self, data: Dict[str, Any], team_id: Optional[int] = None) -> Tuple[int, Dict[str, Any]]:\n         if team_id is None:\n             team_id = self.team.id\ndiff --git a/posthog/api/test/test_insight.py b/posthog/api/test/test_insight.py\nindex bc2024e1c..1a66447a2 100644\n--- a/posthog/api/test/test_insight.py\n+++ b/posthog/api/test/test_insight.py\n@@ -601,13 +601,25 @@ class TestInsight(ClickhouseTestMixin, LicensedTestMixin, APIBaseTest, QueryMatc\n         dashboard_id, _ = self._create_dashboard({\"filters\": {\"date_from\": \"-14d\",}})\n \n         with freeze_time(\"2012-01-14T03:21:34.000Z\"):\n-            _create_event(team=self.team, event=\"$pageview\", distinct_id=\"1\")\n-            _create_event(team=self.team, event=\"$pageview\", distinct_id=\"2\")\n+            _create_event(team=self.team, event=\"$pageview\", distinct_id=\"1\", properties={\"prop\": \"val\"})\n+            _create_event(team=self.team, event=\"$pageview\", distinct_id=\"2\", properties={\"prop\": \"another_val\"})\n+            _create_event(\n+                team=self.team,\n+                event=\"$pageview\",\n+                distinct_id=\"2\",\n+                properties={\"prop\": \"val\", \"another\": \"never_return_this\"},\n+            )\n \n         with freeze_time(\"2012-01-15T04:01:34.000Z\"):\n             response = self.client.post(\n                 f\"/api/projects/{self.team.id}/insights\",\n-                data={\"filters\": {\"events\": [{\"id\": \"$pageview\"}]}, \"dashboards\": [dashboard_id]},\n+                data={\n+                    \"filters\": {\n+                        \"events\": [{\"id\": \"$pageview\"}],\n+                        \"properties\": [{\"key\": \"another\", \"value\": \"never_return_this\", \"operator\": \"is_not\"}],\n+                    },\n+                    \"dashboards\": [dashboard_id],\n+                },\n             ).json()\n             self.assertEqual(response[\"last_refresh\"], None)\n \n@@ -644,6 +656,21 @@ class TestInsight(ClickhouseTestMixin, LicensedTestMixin, APIBaseTest, QueryMatc\n             self.assertEqual(response[\"last_refresh\"], None)\n             self.assertEqual(response[\"last_modified_at\"], \"2012-01-15T04:01:34Z\")  # did not change\n \n+        #  Test property filter\n+\n+        dashboard = Dashboard.objects.get(pk=dashboard_id)\n+        dashboard.filters = {\"properties\": [{\"key\": \"prop\", \"value\": \"val\"}], \"date_from\": \"-14d\"}\n+        dashboard.save()\n+        with freeze_time(\"2012-01-16T05:01:34.000Z\"):\n+            response = self.client.get(\n+                f\"/api/projects/{self.team.id}/insights/{response['id']}/?refresh=true&from_dashboard={dashboard_id}\"\n+            ).json()\n+            self.assertEqual(spy_update_insight_cache.call_count, 4)\n+            self.assertEqual(\n+                response[\"result\"][0][\"data\"],\n+                [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0],\n+            )\n+\n     # BASIC TESTING OF ENDPOINTS. /queries as in depth testing for each insight\n \n     def test_insight_trends_basic(self):\ndiff --git a/posthog/models/insight.py b/posthog/models/insight.py\nindex beeddb4b2..128d4643c 100644\n--- a/posthog/models/insight.py\n+++ b/posthog/models/insight.py\n@@ -8,6 +8,7 @@ from django.db.models.signals import pre_save\n from django.dispatch import receiver\n from django.utils import timezone\n from django_deprecate_fields import deprecate_field\n+from rest_framework.exceptions import ValidationError\n \n from posthog.models.dashboard import Dashboard\n from posthog.models.filters.utils import get_filter\n@@ -88,7 +89,30 @@ class Insight(models.Model):\n \n     def dashboard_filters(self, dashboard: Optional[Dashboard] = None):\n         if dashboard:\n-            return {**self.filters, **dashboard.filters}\n+            dashboard_filters = {**dashboard.filters}\n+            dashboard_properties = dashboard_filters.pop(\"properties\") if dashboard_filters.get(\"properties\") else None\n+\n+            filters = {**self.filters, **dashboard_filters}\n+            if dashboard_properties:\n+                if isinstance(self.filters.get(\"properties\"), list):\n+                    filters[\"properties\"] = {\n+                        \"type\": \"AND\",\n+                        \"values\": [\n+                            {\"type\": \"AND\", \"values\": self.filters[\"properties\"],},\n+                            {\"type\": \"AND\", \"values\": dashboard_properties},\n+                        ],\n+                    }\n+                elif self.filters.get(\"properties\", {}).get(\"type\"):\n+                    filters[\"properties\"] = {\n+                        \"type\": \"AND\",\n+                        \"values\": [self.filters[\"properties\"], {\"type\": \"AND\", \"values\": dashboard_properties}],\n+                    }\n+                elif not self.filters.get(\"properties\"):\n+                    filters[\"properties\"] = dashboard_properties\n+                else:\n+                    raise ValidationError(\"Unrecognized property format: \", self.filters[\"properties\"])\n+\n+            return filters\n         else:\n             return self.filters\n \n"
  },
  "08e4489a2685ddcf65785adfe4af38286f3e27c1": {
    "hash": "08e4489a2685ddcf65785adfe4af38286f3e27c1",
    "message": "fix(persons): Use person UUIDs in merging instead of serial IDs (#11038)\n    \n    * fix(persons): Use person UUIDs in merging instead of serial IDs\n    \n    * fix tests\n    \n    Co-authored-by: Tim Glaser <tim@glsr.nl>",
    "diff": "commit 08e4489a2685ddcf65785adfe4af38286f3e27c1\nAuthor: Michael Matloka <dev@twixes.com>\nDate:   Thu Jul 28 22:59:30 2022 +0200\n\n    fix(persons): Use person UUIDs in merging instead of serial IDs (#11038)\n    \n    * fix(persons): Use person UUIDs in merging instead of serial IDs\n    \n    * fix tests\n    \n    Co-authored-by: Tim Glaser <tim@glsr.nl>\n\ndiff --git a/frontend/src/scenes/persons/MergeSplitPerson.tsx b/frontend/src/scenes/persons/MergeSplitPerson.tsx\nindex a48e5ab74..0a20242e3 100644\n--- a/frontend/src/scenes/persons/MergeSplitPerson.tsx\n+++ b/frontend/src/scenes/persons/MergeSplitPerson.tsx\n@@ -75,17 +75,17 @@ function MergePerson(): JSX.Element {\n \n             <LemonSelectMultiple\n                 placeholder=\"Please select persons to merge\"\n-                onChange={(value) => setSelectedPersonsToMerge(value.map((x) => parseInt(x, 10)))}\n+                onChange={(value) => setSelectedPersonsToMerge(value)}\n                 filterOption={false}\n                 onSearch={(value) => setListFilters({ search: value })}\n                 mode=\"multiple\"\n                 data-attr=\"subscribed-emails\"\n                 value={selectedPersonsToMerge.map((x) => x.toString())}\n                 options={(persons.results || [])\n-                    .filter((p: PersonType) => p.id && p.uuid !== person.uuid)\n+                    .filter((p: PersonType) => p.uuid && p.uuid !== person.uuid)\n                     .map((p) => ({\n-                        key: `${p.id}`,\n-                        label: `${p.name || p.id}`,\n+                        key: p.uuid as string,\n+                        label: (p.name || p.uuid) as string,\n                     }))}\n                 disabled={executedLoading}\n             />\ndiff --git a/frontend/src/scenes/persons/mergeSplitPersonLogic.ts b/frontend/src/scenes/persons/mergeSplitPersonLogic.ts\nindex f3ebfa69e..c8da575cd 100644\n--- a/frontend/src/scenes/persons/mergeSplitPersonLogic.ts\n+++ b/frontend/src/scenes/persons/mergeSplitPersonLogic.ts\n@@ -16,7 +16,7 @@ export interface SplitPersonLogicProps {\n     person: PersonType\n }\n \n-export type PersonIds = NonNullable<PersonType['id']>[]\n+export type PersonUuids = NonNullable<PersonType['uuid']>[]\n \n export const mergeSplitPersonLogic = kea<mergeSplitPersonLogicType>({\n     props: {} as SplitPersonLogicProps,\n@@ -31,7 +31,7 @@ export const mergeSplitPersonLogic = kea<mergeSplitPersonLogicType>({\n     }),\n     actions: {\n         setActivity: (activity: ActivityType) => ({ activity }),\n-        setSelectedPersonsToMerge: (persons: PersonIds) => ({ persons }),\n+        setSelectedPersonsToMerge: (persons: PersonUuids) => ({ persons }),\n         setSelectedPersonToAssignSplit: (id: string) => ({ id }),\n         cancel: true,\n     },\n@@ -44,7 +44,7 @@ export const mergeSplitPersonLogic = kea<mergeSplitPersonLogicType>({\n         ],\n         person: [props.person, {}],\n         selectedPersonsToMerge: [\n-            [] as PersonIds,\n+            [] as PersonUuids,\n             {\n                 setSelectedPersonsToMerge: (_, { persons }) => persons,\n             },\n@@ -73,7 +73,7 @@ export const mergeSplitPersonLogic = kea<mergeSplitPersonLogicType>({\n                 execute: async () => {\n                     if (values.activity === ActivityType.MERGE) {\n                         const newPerson = await api.create('api/person/' + values.person.id + '/merge/', {\n-                            ids: values.selectedPersonsToMerge,\n+                            uuids: values.selectedPersonsToMerge,\n                         })\n                         if (newPerson.id) {\n                             lemonToast.success('Persons have been merged')\ndiff --git a/posthog/api/person.py b/posthog/api/person.py\nindex f641010f8..93f719f85 100644\n--- a/posthog/api/person.py\n+++ b/posthog/api/person.py\n@@ -372,7 +372,7 @@ class PersonViewSet(PKorUUIDViewSet, StructuredViewSetMixin, viewsets.ModelViewS\n \n     @action(methods=[\"POST\"], detail=True)\n     def merge(self, request: request.Request, pk=None, **kwargs) -> response.Response:\n-        people = Person.objects.filter(team_id=self.team_id, pk__in=request.data.get(\"ids\"))\n+        people = Person.objects.filter(team_id=self.team_id, uuid__in=request.data.get(\"uuids\"))\n         person = self.get_object()\n         person.merge_people([p for p in people])\n \ndiff --git a/posthog/api/test/test_person.py b/posthog/api/test/test_person.py\nindex b3c2a5d63..47498ba01 100644\n--- a/posthog/api/test/test_person.py\n+++ b/posthog/api/test/test_person.py\n@@ -252,7 +252,7 @@ class TestPerson(ClickhouseTestMixin, APIBaseTest):\n         )\n         person2 = _create_person(team=self.team, distinct_ids=[\"2\"], properties={\"random_prop\": \"asdf\"})\n \n-        response = self.client.post(\"/api/person/%s/merge/\" % person1.pk, {\"ids\": [person2.pk, person3.pk]},)\n+        response = self.client.post(\"/api/person/%s/merge/\" % person1.uuid, {\"uuids\": [person2.uuid, person3.uuid]},)\n         mock_capture_internal.assert_has_calls(\n             [\n                 mock.call(\n"
  },
  "be7e634ae84c4c9a19384c6d55927298c2d8f9cd": {
    "hash": "be7e634ae84c4c9a19384c6d55927298c2d8f9cd",
    "message": "feat: Extended MultiSelect to always have a searchable label (#10787)",
    "diff": "commit be7e634ae84c4c9a19384c6d55927298c2d8f9cd\nAuthor: Ben White <ben@benjackwhite.co.uk>\nDate:   Thu Jul 14 15:44:02 2022 +0200\n\n    feat: Extended MultiSelect to always have a searchable label (#10787)\n\ndiff --git a/frontend/src/lib/components/LemonSelectMultiple/LemonSelectMultiple.stories.tsx b/frontend/src/lib/components/LemonSelectMultiple/LemonSelectMultiple.stories.tsx\nindex 51b0ed313..4502210db 100644\n--- a/frontend/src/lib/components/LemonSelectMultiple/LemonSelectMultiple.stories.tsx\n+++ b/frontend/src/lib/components/LemonSelectMultiple/LemonSelectMultiple.stories.tsx\n@@ -10,10 +10,10 @@ export default {\n     argTypes: {\n         options: {\n             defaultValue: ['ben', 'marius', 'paul', 'tiina', 'li'].reduce(\n-                (acc, x) => ({\n+                (acc, x, i) => ({\n                     ...acc,\n-                    [`${x}@posthog.com`]: {\n-                        label: (\n+                    [`user-${i}`]: {\n+                        labelComponent: (\n                             <span className=\"flex gap-05 items-center\">\n                                 <ProfilePicture name={x} email={`${x}@posthog.com`} size=\"sm\" />\n                                 <span>\n@@ -21,6 +21,7 @@ export default {\n                                 </span>\n                             </span>\n                         ),\n+                        label: `${x} ${x}@posthog.com>`,\n                     },\n                 }),\n                 {}\ndiff --git a/frontend/src/lib/components/LemonSelectMultiple/LemonSelectMultiple.tsx b/frontend/src/lib/components/LemonSelectMultiple/LemonSelectMultiple.tsx\nindex 6c85e7f8d..3f8846bc2 100644\n--- a/frontend/src/lib/components/LemonSelectMultiple/LemonSelectMultiple.tsx\n+++ b/frontend/src/lib/components/LemonSelectMultiple/LemonSelectMultiple.tsx\n@@ -5,9 +5,10 @@ import { LemonSnack } from '../LemonSnack/LemonSnack'\n import './LemonSelectMultiple.scss'\n \n export interface LemonSelectMultipleOption {\n-    label: string | React.ReactNode\n+    label: string\n     disabled?: boolean\n     'data-attr'?: string\n+    labelComponent?: React.ReactNode\n }\n \n export interface LemonSelectMultipleOptionItem extends LemonSelectMultipleOption {\n@@ -51,7 +52,8 @@ export function LemonSelectMultiple({\n     const antOptions = optionsAsList.map((option) => ({\n         key: option.key,\n         value: option.key,\n-        label: option.label,\n+        label: option.labelComponent || option.label,\n+        labelString: option.label,\n     }))\n \n     return (\n@@ -66,6 +68,7 @@ export function LemonSelectMultiple({\n                 tokenSeparators={[',']}\n                 value={value ? value : []}\n                 dropdownRender={(menu) => <div className=\"LemonSelectMultipleDropdown\">{menu}</div>}\n+                optionFilterProp=\"labelString\"\n                 options={antOptions}\n                 placeholder={placeholder}\n                 notFoundContent={\ndiff --git a/frontend/src/lib/components/Subscriptions/utils.tsx b/frontend/src/lib/components/Subscriptions/utils.tsx\nindex cb705c8ef..2c87b29f9 100644\n--- a/frontend/src/lib/components/Subscriptions/utils.tsx\n+++ b/frontend/src/lib/components/Subscriptions/utils.tsx\n@@ -96,18 +96,19 @@ export const getSlackChannelOptions = (\n     return slackChannels\n         ? slackChannels.map((x) => ({\n               key: `${x.id}|#${x.name}`,\n-              label: (\n+              labelComponent: (\n                   <span className=\"flex items-center\">\n                       {x.is_private ? `🔒${x.name}` : `#${x.name}`}\n                       {x.is_ext_shared ? <IconSlackExternal className=\"ml-05\" /> : null}\n                   </span>\n               ),\n+              label: `${x.id} #${x.name}`,\n           }))\n         : value\n         ? [\n               {\n                   key: value,\n-                  label: value?.split('|')?.pop(),\n+                  label: value?.split('|')?.pop() || value,\n               },\n           ]\n         : []\ndiff --git a/frontend/src/lib/components/Subscriptions/views/EditSubscription.tsx b/frontend/src/lib/components/Subscriptions/views/EditSubscription.tsx\nindex 1bd4f0585..50b9a3c4d 100644\n--- a/frontend/src/lib/components/Subscriptions/views/EditSubscription.tsx\n+++ b/frontend/src/lib/components/Subscriptions/views/EditSubscription.tsx\n@@ -199,7 +199,6 @@ export function EditSubscription({\n                                             <LemonSelectMultiple\n                                                 onChange={(val) => onChange(val.join(','))}\n                                                 value={value?.split(',').filter(Boolean)}\n-                                                filterOption={false}\n                                                 disabled={emailDisabled}\n                                                 mode=\"multiple-custom\"\n                                                 data-attr=\"subscribed-emails\"\n@@ -270,7 +269,6 @@ export function EditSubscription({\n                                                     <LemonSelectMultiple\n                                                         onChange={(val) => onChange(val)}\n                                                         value={value}\n-                                                        filterOption={true}\n                                                         disabled={slackDisabled}\n                                                         mode=\"single\"\n                                                         data-attr=\"select-slack-channel\"\ndiff --git a/frontend/src/lib/components/UserSelectItem.tsx b/frontend/src/lib/components/UserSelectItem.tsx\nindex f6b5f2223..b7260b7bc 100644\n--- a/frontend/src/lib/components/UserSelectItem.tsx\n+++ b/frontend/src/lib/components/UserSelectItem.tsx\n@@ -24,6 +24,7 @@ export function usersLemonSelectOptions(\n ): LemonSelectMultipleOptionItem[] {\n     return users.map((user) => ({\n         key: user[key],\n-        label: <UserSelectItem user={user} />,\n+        label: `${user.first_name} ${user.email}`,\n+        labelComponent: <UserSelectItem user={user} />,\n     }))\n }\ndiff --git a/frontend/src/scenes/persons/MergeSplitPerson.tsx b/frontend/src/scenes/persons/MergeSplitPerson.tsx\nindex 0673985ea..a48e5ab74 100644\n--- a/frontend/src/scenes/persons/MergeSplitPerson.tsx\n+++ b/frontend/src/scenes/persons/MergeSplitPerson.tsx\n@@ -85,7 +85,7 @@ function MergePerson(): JSX.Element {\n                     .filter((p: PersonType) => p.id && p.uuid !== person.uuid)\n                     .map((p) => ({\n                         key: `${p.id}`,\n-                        label: p.name,\n+                        label: `${p.name || p.id}`,\n                     }))}\n                 disabled={executedLoading}\n             />\n"
  },
  "2ede346e607b7e4c6a0e48d68e2af751899c7adb": {
    "hash": "2ede346e607b7e4c6a0e48d68e2af751899c7adb",
    "message": "fix(css): Fix `--depr-*` CSS vars with Sass interpolation (#10072)",
    "diff": "commit 2ede346e607b7e4c6a0e48d68e2af751899c7adb\nAuthor: Michael Matloka <dev@twixes.com>\nDate:   Tue May 31 19:08:42 2022 +0200\n\n    fix(css): Fix `--depr-*` CSS vars with Sass interpolation (#10072)\n\ndiff --git a/frontend/src/styles/global.scss b/frontend/src/styles/global.scss\nindex f20af54cc..814f77598 100644\n--- a/frontend/src/styles/global.scss\n+++ b/frontend/src/styles/global.scss\n@@ -183,25 +183,25 @@ $_lifecycle_dormant: #f86234;\n     --toastify-toast-max-height: 16rem;\n \n     // Deprecated color transforms from SCSS var heydays\n-    --depr-lighten-danger-40: lighten($_danger, 40%);\n-    --depr-darken-text-light-20: darken($_text_light, 20%);\n-    --depr-rgba-text-default-0-4: rgba($_text_default, 0.4);\n-    --depr-rgba-primary-alt-0-3: rgba($_primary_alt, 0.3);\n-    --depr-rgba-danger-0-6: rgba($_danger, 0.6);\n-    --depr-rgba-border-0-1: rgba($_border, 0.1);\n-    --depr-rgba-border-0-2: rgba($_border, 0.2);\n-    --depr-darken-primary-30: darken($_primary, 30%);\n-    --depr-lighten-primary-20: lighten($_primary, 20%);\n-    --depr-lighten-primary-10: lighten($_primary, 10%);\n-    --depr-lighten-primary-5: lighten($_primary, 5%);\n-    --depr-lighten-primary-15: lighten($_primary, 15%);\n-    --depr-rgba-primary_alt-0-09: rgba($_primary_alt, 0.09);\n-    --depr-rgba-warning-0-09: rgba($_warning, 0.09);\n-    --depr-rgba-danger-0-09: rgba($_danger, 0.09);\n-    --depr-rgba-danger-0-1: rgba($_danger, 0.1);\n-    --depr-rgba-primary-0-25: rgba($_primary, 0.25);\n-    --depr-rgba-primary_alt-0-25: rgba($_primary_alt, 0.25);\n-    --depr-darken-bg_menu-10: darken($_bg_menu, 10%);\n+    --depr-lighten-danger-40: #{lighten($_danger, 40%)};\n+    --depr-darken-text-light-20: #{darken($_text_light, 20%)};\n+    --depr-rgba-text-default-0-4: #{rgba($_text_default, 0.4)};\n+    --depr-rgba-primary-alt-0-3: #{rgba($_primary_alt, 0.3)};\n+    --depr-rgba-danger-0-6: #{rgba($_danger, 0.6)};\n+    --depr-rgba-border-0-1: #{rgba($_border, 0.1)};\n+    --depr-rgba-border-0-2: #{rgba($_border, 0.2)};\n+    --depr-darken-primary-30: #{darken($_primary, 30%)};\n+    --depr-lighten-primary-20: #{lighten($_primary, 20%)};\n+    --depr-lighten-primary-10: #{lighten($_primary, 10%)};\n+    --depr-lighten-primary-5: #{lighten($_primary, 5%)};\n+    --depr-lighten-primary-15: #{lighten($_primary, 15%)};\n+    --depr-rgba-primary_alt-0-09: #{rgba($_primary_alt, 0.09)};\n+    --depr-rgba-warning-0-09: #{rgba($_warning, 0.09)};\n+    --depr-rgba-danger-0-09: #{rgba($_danger, 0.09)};\n+    --depr-rgba-danger-0-1: #{rgba($_danger, 0.1)};\n+    --depr-rgba-primary-0-25: #{rgba($_primary, 0.25)};\n+    --depr-rgba-primary_alt-0-25: #{rgba($_primary_alt, 0.25)};\n+    --depr-darken-bg_menu-10: #{darken($_bg_menu, 10%)};\n }\n \n // Text styles\n"
  },
  "d5f1d864eb9bbf0618153c212d57ee35070d54d4": {
    "hash": "d5f1d864eb9bbf0618153c212d57ee35070d54d4",
    "message": "fix: date filter regression (#10843)\n    \n    * fix: date filter regression\n    \n    * fix prop",
    "diff": "commit d5f1d864eb9bbf0618153c212d57ee35070d54d4\nAuthor: Emanuele Capparelli <kappa90@users.noreply.github.com>\nDate:   Mon Jul 18 16:40:03 2022 +0200\n\n    fix: date filter regression (#10843)\n    \n    * fix: date filter regression\n    \n    * fix prop\n\ndiff --git a/frontend/src/lib/components/DateFilter/DateFilter.tsx b/frontend/src/lib/components/DateFilter/DateFilter.tsx\nindex c85f8357e..6428ced08 100644\n--- a/frontend/src/lib/components/DateFilter/DateFilter.tsx\n+++ b/frontend/src/lib/components/DateFilter/DateFilter.tsx\n@@ -13,7 +13,6 @@ import { CalendarOutlined } from '@ant-design/icons'\n export interface DateFilterProps {\n     defaultValue: string\n     showCustom?: boolean\n-    bordered?: boolean\n     showRollingRangePicker?: boolean\n     makeLabel?: (key: React.ReactNode) => React.ReactNode\n     className?: string\n@@ -43,7 +42,6 @@ export function DateFilter({\n     dateTo,\n     dateOptions = dateMapping,\n     isDateFormatted = true,\n-    bordered,\n }: RawDateFilterProps): JSX.Element {\n     const key = useRef(uuid()).current\n     const logicProps = { key, dateFrom, dateTo, onChange, defaultValue, dateOptions, isDateFormatted }\n@@ -141,7 +139,7 @@ export function DateFilter({\n             disabled={disabled}\n             className={className}\n             style={style}\n-            bordered={bordered}\n+            bordered={true}\n             size={'small'}\n             type={'stealth'}\n             popup={{\ndiff --git a/frontend/src/scenes/insights/InsightDisplayConfig.tsx b/frontend/src/scenes/insights/InsightDisplayConfig.tsx\nindex a08386c30..b0838d92b 100644\n--- a/frontend/src/scenes/insights/InsightDisplayConfig.tsx\n+++ b/frontend/src/scenes/insights/InsightDisplayConfig.tsx\n@@ -92,7 +92,6 @@ export function InsightDisplayConfig({ filters, activeView, disableTable }: Insi\n                         <InsightDateFilter\n                             defaultValue={'Last 7 days'}\n                             disabled={showFunnelBarOptions && isFunnelEmpty(filters)}\n-                            bordered\n                             makeLabel={(key) => (\n                                 <>\n                                     <CalendarOutlined /> {key}\ndiff --git a/frontend/src/scenes/saved-insights/SavedInsights.tsx b/frontend/src/scenes/saved-insights/SavedInsights.tsx\nindex 8ec593626..9841739dd 100644\n--- a/frontend/src/scenes/saved-insights/SavedInsights.tsx\n+++ b/frontend/src/scenes/saved-insights/SavedInsights.tsx\n@@ -401,7 +401,6 @@ export function SavedInsights(): JSX.Element {\n                                 <DateFilter\n                                     defaultValue=\"All time\"\n                                     disabled={false}\n-                                    bordered={true}\n                                     dateFrom={dateFrom}\n                                     dateTo={dateTo}\n                                     onChange={(fromDate, toDate) =>\ndiff --git a/frontend/src/scenes/session-recordings/SessionRecordingsTable.tsx b/frontend/src/scenes/session-recordings/SessionRecordingsTable.tsx\nindex c30151af0..e088cfa0f 100644\n--- a/frontend/src/scenes/session-recordings/SessionRecordingsTable.tsx\n+++ b/frontend/src/scenes/session-recordings/SessionRecordingsTable.tsx\n@@ -179,7 +179,6 @@ export function SessionRecordingsTable({ personUUID, isPersonPage = false }: Ses\n                                 </>\n                             )}\n                             defaultValue=\"Last 7 days\"\n-                            bordered={true}\n                             dateFrom={fromDate ?? undefined}\n                             dateTo={toDate ?? undefined}\n                             onChange={(changedDateFrom, changedDateTo) => {\ndiff --git a/frontend/src/toolbar/styles.scss b/frontend/src/toolbar/styles.scss\nindex f54127c17..4f2dd7736 100644\n--- a/frontend/src/toolbar/styles.scss\n+++ b/frontend/src/toolbar/styles.scss\n@@ -72,5 +72,5 @@\n }\n \n .Popup {\n-    z-index: 2147483020;\n+    z-index: 2147483020 !important;\n }\n"
  },
  "1dfaf539e583b973480110d8f4ae52850f8c2eec": {
    "hash": "1dfaf539e583b973480110d8f4ae52850f8c2eec",
    "message": "chore: remove date filter experiment (#10688)\n    \n    * chore: remove date filter experiment\n    \n    * fix test",
    "diff": "commit 1dfaf539e583b973480110d8f4ae52850f8c2eec\nAuthor: Emanuele Capparelli <kappa90@users.noreply.github.com>\nDate:   Fri Jul 8 11:26:02 2022 +0100\n\n    chore: remove date filter experiment (#10688)\n    \n    * chore: remove date filter experiment\n    \n    * fix test\n\ndiff --git a/cypress/support/e2e.js b/cypress/support/e2e.js\nindex 5d7beb4f7..46a05a66e 100644\n--- a/cypress/support/e2e.js\n+++ b/cypress/support/e2e.js\n@@ -19,7 +19,6 @@ beforeEach(() => {\n         req.reply(\n             decideResponse({\n                 'toolbar-launch-side-action': true,\n-                'date-filter-experiment': 'test',\n             })\n         )\n     )\ndiff --git a/frontend/src/lib/components/DateFilter/DateFilter.tsx b/frontend/src/lib/components/DateFilter/DateFilter.tsx\nindex 54c0e66e0..c85f8357e 100644\n--- a/frontend/src/lib/components/DateFilter/DateFilter.tsx\n+++ b/frontend/src/lib/components/DateFilter/DateFilter.tsx\n@@ -1,10 +1,6 @@\n-import React, { useRef, useMemo, useState } from 'react'\n-import { Select } from 'antd'\n-import { SelectProps } from 'antd/lib/select'\n-import { dateMapping, dateMappingExperiment, isDate, dateFilterToText, uuid } from 'lib/utils'\n+import React, { useRef } from 'react'\n+import { dateMapping, dateFilterToText, uuid } from 'lib/utils'\n import { DateFilterRange } from 'lib/components/DateFilter/DateFilterRange'\n-import { DateFilterRangeExperiment } from 'lib/components/DateFilter/DateFilterRangeExperiment'\n-import { featureFlagLogic } from 'lib/logic/featureFlagLogic'\n import { dateMappingOption } from '~/types'\n import { dayjs } from 'lib/dayjs'\n import { Tooltip } from 'lib/components/Tooltip'\n@@ -13,13 +9,12 @@ import { RollingDateRangeFilter } from './RollingDateRangeFilter'\n import { useActions, useValues } from 'kea'\n import { LemonButtonWithPopup, LemonDivider, LemonButton } from '@posthog/lemon-ui'\n import { CalendarOutlined } from '@ant-design/icons'\n-import { FEATURE_FLAGS } from 'lib/constants'\n \n export interface DateFilterProps {\n     defaultValue: string\n     showCustom?: boolean\n-    bordered?: boolean // remove if experiment is successful\n-    showRollingRangePicker?: boolean // experimental\n+    bordered?: boolean\n+    showRollingRangePicker?: boolean\n     makeLabel?: (key: React.ReactNode) => React.ReactNode\n     className?: string\n     style?: React.CSSProperties\n@@ -28,158 +23,13 @@ export interface DateFilterProps {\n     getPopupContainer?: () => HTMLElement\n     dateOptions?: dateMappingOption[]\n     isDateFormatted?: boolean\n-    selectProps?: SelectProps<any> // remove if experiment is successful\n }\n interface RawDateFilterProps extends DateFilterProps {\n     dateFrom?: string | null | dayjs.Dayjs\n     dateTo?: string | null | dayjs.Dayjs\n }\n \n-function _DateFilter({\n-    bordered,\n-    defaultValue,\n-    showCustom,\n-    style,\n-    disabled,\n-    makeLabel,\n-    onChange,\n-    getPopupContainer,\n-    dateFrom,\n-    dateTo,\n-    dateOptions = dateMapping,\n-    isDateFormatted = false,\n-    selectProps = {},\n-}: RawDateFilterProps): JSX.Element {\n-    const [rangeDateFrom, setRangeDateFrom] = useState(\n-        dateFrom && isDate.test(dateFrom as string) ? dayjs(dateFrom) : undefined\n-    )\n-    const [rangeDateTo, setRangeDateTo] = useState(dateTo && isDate.test(dateTo as string) ? dayjs(dateTo) : undefined)\n-    const [dateRangeOpen, setDateRangeOpen] = useState(false)\n-    const [open, setOpen] = useState(false)\n-\n-    function onClickOutside(): void {\n-        setOpen(false)\n-        setDateRangeOpen(false)\n-    }\n-\n-    function setDate(fromDate: string, toDate: string): void {\n-        onChange?.(fromDate, toDate)\n-    }\n-\n-    function _onChange(v: string): void {\n-        if (v === 'Date range') {\n-            if (open) {\n-                setOpen(false)\n-                setDateRangeOpen(true)\n-            }\n-        } else {\n-            const option = dateOptions.find((option) => !option.inactive && option.key === v)\n-            if (option) {\n-                setDate(option.values[0], option.values[1])\n-            }\n-        }\n-    }\n-\n-    function onBlur(): void {\n-        if (dateRangeOpen) {\n-            return\n-        }\n-        onClickOutside()\n-    }\n-\n-    function onClick(): void {\n-        if (dateRangeOpen) {\n-            return\n-        }\n-        setOpen(!open)\n-    }\n-\n-    function dropdownOnClick(e: React.MouseEvent): void {\n-        e.preventDefault()\n-        setOpen(true)\n-        setDateRangeOpen(false)\n-        document.getElementById('daterange_selector')?.focus()\n-    }\n-\n-    function onApplyClick(): void {\n-        onClickOutside()\n-        setDate(dayjs(rangeDateFrom).format('YYYY-MM-DD'), dayjs(rangeDateTo).format('YYYY-MM-DD'))\n-    }\n-\n-    const currKey = useMemo(\n-        () => dateFilterToText(dateFrom, dateTo, defaultValue, dateOptions, false),\n-        [dateFrom, dateTo, defaultValue]\n-    )\n-\n-    return (\n-        <Select\n-            data-attr=\"date-filter\"\n-            bordered={bordered}\n-            id=\"daterange_selector\"\n-            value={\n-                isDateFormatted && !dateOptions.find((option) => option.key === currKey)\n-                    ? dateFilterToText(dateFrom, dateTo, defaultValue, dateOptions, true)\n-                    : currKey\n-            }\n-            onChange={_onChange}\n-            style={style}\n-            open={open || dateRangeOpen}\n-            onBlur={onBlur}\n-            onClick={onClick}\n-            listHeight={440}\n-            dropdownMatchSelectWidth={false}\n-            disabled={disabled}\n-            optionLabelProp={makeLabel ? 'label' : undefined}\n-            getPopupContainer={getPopupContainer}\n-            dropdownRender={(menu: React.ReactElement) => {\n-                if (dateRangeOpen) {\n-                    return (\n-                        <DateFilterRange\n-                            getPopupContainer={getPopupContainer}\n-                            onClick={dropdownOnClick}\n-                            onDateFromChange={(date) => setRangeDateFrom(date)}\n-                            onDateToChange={(date) => setRangeDateTo(date)}\n-                            onApplyClick={onApplyClick}\n-                            onClickOutside={onClickOutside}\n-                            rangeDateFrom={rangeDateFrom}\n-                            rangeDateTo={rangeDateTo}\n-                            disableBeforeYear={2015}\n-                        />\n-                    )\n-                } else {\n-                    return menu\n-                }\n-            }}\n-            {...selectProps}\n-        >\n-            {[\n-                ...dateOptions.map(({ key, values, inactive }) => {\n-                    if (key === 'Custom' && !showCustom) {\n-                        return null\n-                    }\n-\n-                    if (inactive && currKey !== key) {\n-                        return null\n-                    }\n-\n-                    const dateValue = dateFilterToText(values[0], values[1], defaultValue, dateOptions, isDateFormatted)\n-\n-                    return (\n-                        <Select.Option key={key} value={key} label={makeLabel ? makeLabel(dateValue) : undefined}>\n-                            {key}\n-                        </Select.Option>\n-                    )\n-                }),\n-\n-                <Select.Option key={'Date range'} value={'Date range'}>\n-                    {'Date range'}\n-                </Select.Option>,\n-            ]}\n-        </Select>\n-    )\n-}\n-\n-function DateFilterExperiment({\n+export function DateFilter({\n     defaultValue,\n     showCustom,\n     showRollingRangePicker = true,\n@@ -191,8 +41,9 @@ function DateFilterExperiment({\n     getPopupContainer,\n     dateFrom,\n     dateTo,\n-    dateOptions = dateMappingExperiment,\n+    dateOptions = dateMapping,\n     isDateFormatted = true,\n+    bordered,\n }: RawDateFilterProps): JSX.Element {\n     const key = useRef(uuid()).current\n     const logicProps = { key, dateFrom, dateTo, onChange, defaultValue, dateOptions, isDateFormatted }\n@@ -219,7 +70,7 @@ function DateFilterExperiment({\n     }\n \n     const popupOverlay = isDateRangeOpen ? (\n-        <DateFilterRangeExperiment\n+        <DateFilterRange\n             getPopupContainer={getPopupContainer}\n             onClick={dropdownOnClick}\n             onDateFromChange={(date) => setRangeDateFrom(date)}\n@@ -290,7 +141,7 @@ function DateFilterExperiment({\n             disabled={disabled}\n             className={className}\n             style={style}\n-            bordered\n+            bordered={bordered}\n             size={'small'}\n             type={'stealth'}\n             popup={{\n@@ -309,9 +160,3 @@ function DateFilterExperiment({\n         </LemonButtonWithPopup>\n     )\n }\n-\n-export function DateFilter(props: RawDateFilterProps): JSX.Element {\n-    const { featureFlags } = useValues(featureFlagLogic)\n-    const experimentEnabled = featureFlags[FEATURE_FLAGS.DATE_FILTER_EXPERIMENT] === 'test'\n-    return experimentEnabled ? <DateFilterExperiment {...props} /> : <_DateFilter {...props} />\n-}\ndiff --git a/frontend/src/lib/components/DateFilter/DateFilterRangeExperiment.scss b/frontend/src/lib/components/DateFilter/DateFilterRange.scss\nsimilarity index 100%\nrename from frontend/src/lib/components/DateFilter/DateFilterRangeExperiment.scss\nrename to frontend/src/lib/components/DateFilter/DateFilterRange.scss\ndiff --git a/frontend/src/lib/components/DateFilter/DateFilterRange.tsx b/frontend/src/lib/components/DateFilter/DateFilterRange.tsx\nindex d0fcb3dc7..a503cae7c 100644\n--- a/frontend/src/lib/components/DateFilter/DateFilterRange.tsx\n+++ b/frontend/src/lib/components/DateFilter/DateFilterRange.tsx\n@@ -1,7 +1,12 @@\n-import React, { useEffect, useRef, useState } from 'react'\n+import React, { useState, useRef } from 'react'\n import { Button } from 'antd'\n+import './DateFilterRange.scss'\n import { dayjs } from 'lib/dayjs'\n import { DatePicker } from '../DatePicker'\n+import clsx from 'clsx'\n+import { useOutsideClickHandler } from 'lib/hooks/useOutsideClickHandler'\n+import { RightOutlined, LeftOutlined, DoubleRightOutlined, DoubleLeftOutlined } from '@ant-design/icons'\n+import { Tooltip } from '../Tooltip'\n \n export function DateFilterRange(props: {\n     onClickOutside: () => void\n@@ -9,46 +14,24 @@ export function DateFilterRange(props: {\n     onDateFromChange: (date?: dayjs.Dayjs) => void\n     onDateToChange: (date?: dayjs.Dayjs) => void\n     onApplyClick: () => void\n-    rangeDateFrom?: string | dayjs.Dayjs\n-    rangeDateTo?: string | dayjs.Dayjs\n+    rangeDateFrom?: string | dayjs.Dayjs | null\n+    rangeDateTo?: string | dayjs.Dayjs | null\n     getPopupContainer?: (props: any) => HTMLElement\n     disableBeforeYear?: number\n }): JSX.Element {\n     const dropdownRef = useRef<HTMLDivElement | null>(null)\n-    const [calendarOpen, setCalendarOpen] = useState(false)\n+    const [calendarOpen, setCalendarOpen] = useState(true)\n \n-    const onClickOutside = (event: MouseEvent): void => {\n-        const target = (event.composedPath?.()?.[0] || event.target) as HTMLElement\n-\n-        if (!target) {\n-            return\n-        }\n-\n-        const clickInPickerContainer = dropdownRef.current?.contains(target)\n-        const clickInDateDropdown = event\n-            .composedPath?.()\n-            ?.find((e) => (e as HTMLElement)?.matches?.('.datefilter-datepicker'))\n-\n-        if (clickInPickerContainer && calendarOpen && target.tagName !== 'INPUT') {\n-            setCalendarOpen(false)\n-            return\n-        }\n-\n-        if (!clickInPickerContainer && !clickInDateDropdown) {\n+    useOutsideClickHandler(\n+        '.datefilter-datepicker',\n+        () => {\n             if (calendarOpen) {\n                 setCalendarOpen(false)\n-            } else {\n-                props.onClickOutside()\n             }\n-        }\n-    }\n-\n-    useEffect(() => {\n-        window.addEventListener('mousedown', onClickOutside)\n-        return () => {\n-            window.removeEventListener('mousedown', onClickOutside)\n-        }\n-    }, [calendarOpen])\n+        },\n+        [calendarOpen],\n+        ['INPUT']\n+    )\n \n     return (\n         <div ref={dropdownRef}>\n@@ -96,7 +79,43 @@ export function DateFilterRange(props: {\n                         }\n                     }}\n                     popupStyle={{ zIndex: 999999 }}\n-                    disabledDate={(date) => !!props.disableBeforeYear && date.year() < props.disableBeforeYear}\n+                    disabledDate={(date) =>\n+                        (!!props.disableBeforeYear && date.year() < props.disableBeforeYear) || date.isAfter(dayjs())\n+                    }\n+                    dateRender={(current, today) => {\n+                        return (\n+                            <div\n+                                className={clsx('ant-picker-cell-inner', {\n+                                    ['DateFilterRange__calendartoday']:\n+                                        current.date() === today.date() &&\n+                                        current.month() === today.month() &&\n+                                        current.year() === today.year(),\n+                                })}\n+                            >\n+                                {current.date()}\n+                            </div>\n+                        )\n+                    }}\n+                    nextIcon={\n+                        <Tooltip title=\"Next month\">\n+                            <RightOutlined />\n+                        </Tooltip>\n+                    }\n+                    superNextIcon={\n+                        <Tooltip title=\"Next year\">\n+                            <DoubleRightOutlined />\n+                        </Tooltip>\n+                    }\n+                    prevIcon={\n+                        <Tooltip title=\"Previous month\">\n+                            <LeftOutlined />\n+                        </Tooltip>\n+                    }\n+                    superPrevIcon={\n+                        <Tooltip title=\"Previous year\">\n+                            <DoubleLeftOutlined />\n+                        </Tooltip>\n+                    }\n                 />\n                 <br />\n                 <Button\ndiff --git a/frontend/src/lib/components/DateFilter/DateFilterRangeExperiment.tsx b/frontend/src/lib/components/DateFilter/DateFilterRangeExperiment.tsx\ndeleted file mode 100644\nindex c2b794297..000000000\n--- a/frontend/src/lib/components/DateFilter/DateFilterRangeExperiment.tsx\n+++ /dev/null\n@@ -1,132 +0,0 @@\n-import React, { useState, useRef } from 'react'\n-import { Button } from 'antd'\n-import './DateFilterRangeExperiment.scss'\n-import { dayjs } from 'lib/dayjs'\n-import { DatePicker } from '../DatePicker'\n-import clsx from 'clsx'\n-import { useOutsideClickHandler } from 'lib/hooks/useOutsideClickHandler'\n-import { RightOutlined, LeftOutlined, DoubleRightOutlined, DoubleLeftOutlined } from '@ant-design/icons'\n-import { Tooltip } from '../Tooltip'\n-\n-export function DateFilterRangeExperiment(props: {\n-    onClickOutside: () => void\n-    onClick: (e: React.MouseEvent) => void\n-    onDateFromChange: (date?: dayjs.Dayjs) => void\n-    onDateToChange: (date?: dayjs.Dayjs) => void\n-    onApplyClick: () => void\n-    rangeDateFrom?: string | dayjs.Dayjs | null\n-    rangeDateTo?: string | dayjs.Dayjs | null\n-    getPopupContainer?: (props: any) => HTMLElement\n-    disableBeforeYear?: number\n-}): JSX.Element {\n-    const dropdownRef = useRef<HTMLDivElement | null>(null)\n-    const [calendarOpen, setCalendarOpen] = useState(true)\n-\n-    useOutsideClickHandler(\n-        '.datefilter-datepicker',\n-        () => {\n-            if (calendarOpen) {\n-                setCalendarOpen(false)\n-            }\n-        },\n-        [calendarOpen],\n-        ['INPUT']\n-    )\n-\n-    return (\n-        <div ref={dropdownRef}>\n-            <a\n-                style={{\n-                    margin: '0 1rem',\n-                    color: 'rgba(0, 0, 0, 0.2)',\n-                    fontWeight: 700,\n-                }}\n-                href=\"#\"\n-                onClick={props.onClick}\n-            >\n-                &lt;\n-            </a>\n-            <hr style={{ margin: '0.5rem 0' }} />\n-            <div style={{ padding: '0 1rem' }}>\n-                <label className=\"secondary\">From date</label>\n-                <br />\n-                <DatePicker.RangePicker\n-                    dropdownClassName=\"datefilter-datepicker\"\n-                    getPopupContainer={props.getPopupContainer}\n-                    defaultValue={[\n-                        props.rangeDateFrom\n-                            ? dayjs.isDayjs(props.rangeDateFrom)\n-                                ? props.rangeDateFrom\n-                                : dayjs(props.rangeDateFrom)\n-                            : null,\n-                        props.rangeDateTo\n-                            ? dayjs.isDayjs(props.rangeDateTo)\n-                                ? props.rangeDateTo\n-                                : dayjs(props.rangeDateTo)\n-                            : null,\n-                    ]}\n-                    open={calendarOpen}\n-                    onOpenChange={(open) => {\n-                        if (open) {\n-                            setCalendarOpen(open)\n-                        }\n-                    }}\n-                    onChange={(dates) => {\n-                        if (dates && dates.length === 2) {\n-                            props.onDateFromChange(dates[0] || undefined)\n-                            props.onDateToChange(dates[1] || undefined)\n-                            setCalendarOpen(false)\n-                        }\n-                    }}\n-                    popupStyle={{ zIndex: 999999 }}\n-                    disabledDate={(date) =>\n-                        (!!props.disableBeforeYear && date.year() < props.disableBeforeYear) || date.isAfter(dayjs())\n-                    }\n-                    dateRender={(current, today) => {\n-                        return (\n-                            <div\n-                                className={clsx('ant-picker-cell-inner', {\n-                                    ['DateFilterRange__calendartoday']:\n-                                        current.date() === today.date() &&\n-                                        current.month() === today.month() &&\n-                                        current.year() === today.year(),\n-                                })}\n-                            >\n-                                {current.date()}\n-                            </div>\n-                        )\n-                    }}\n-                    nextIcon={\n-                        <Tooltip title=\"Next month\">\n-                            <RightOutlined />\n-                        </Tooltip>\n-                    }\n-                    superNextIcon={\n-                        <Tooltip title=\"Next year\">\n-                            <DoubleRightOutlined />\n-                        </Tooltip>\n-                    }\n-                    prevIcon={\n-                        <Tooltip title=\"Previous month\">\n-                            <LeftOutlined />\n-                        </Tooltip>\n-                    }\n-                    superPrevIcon={\n-                        <Tooltip title=\"Previous year\">\n-                            <DoubleLeftOutlined />\n-                        </Tooltip>\n-                    }\n-                />\n-                <br />\n-                <Button\n-                    type=\"default\"\n-                    disabled={!props.rangeDateTo || !props.rangeDateFrom}\n-                    style={{ marginTop: '1rem', marginBottom: '1rem' }}\n-                    onClick={props.onApplyClick}\n-                >\n-                    Apply filter\n-                </Button>\n-            </div>\n-        </div>\n-    )\n-}\ndiff --git a/frontend/src/lib/components/DateFilter/dateFilterLogic.test.ts b/frontend/src/lib/components/DateFilter/dateFilterLogic.test.ts\nindex 6118ee0fd..5ef5b52e0 100644\n--- a/frontend/src/lib/components/DateFilter/dateFilterLogic.test.ts\n+++ b/frontend/src/lib/components/DateFilter/dateFilterLogic.test.ts\n@@ -1,6 +1,6 @@\n import { expectLogic } from 'kea-test-utils'\n import { dayjs } from 'lib/dayjs'\n-import { dateMappingExperiment } from 'lib/utils'\n+import { dateMapping } from 'lib/utils'\n import { dateFilterLogic, DateFilterLogicPropsType } from './dateFilterLogic'\n \n describe('dateFilterLogic', () => {\n@@ -15,7 +15,7 @@ describe('dateFilterLogic', () => {\n             onChange,\n             dateFrom: null,\n             dateTo: null,\n-            dateOptions: dateMappingExperiment,\n+            dateOptions: dateMapping,\n             isDateFormatted: false,\n         }\n \ndiff --git a/frontend/src/lib/components/IntervalFilter/intervalFilterLogic.ts b/frontend/src/lib/components/IntervalFilter/intervalFilterLogic.ts\nindex 4a0acfd75..ae14194ee 100644\n--- a/frontend/src/lib/components/IntervalFilter/intervalFilterLogic.ts\n+++ b/frontend/src/lib/components/IntervalFilter/intervalFilterLogic.ts\n@@ -1,5 +1,5 @@\n import { kea } from 'kea'\n-import { objectsEqual, dateMappingExperiment as dateMapping } from 'lib/utils'\n+import { objectsEqual, dateMapping } from 'lib/utils'\n import type { intervalFilterLogicType } from './intervalFilterLogicType'\n import { IntervalKeyType } from 'lib/components/IntervalFilter/intervals'\n import { insightLogic } from 'scenes/insights/insightLogic'\n@@ -7,7 +7,6 @@ import { InsightLogicProps, IntervalType } from '~/types'\n import { keyForInsightLogicProps } from 'scenes/insights/sharedUtils'\n import { dayjs } from 'lib/dayjs'\n import { featureFlagLogic } from 'lib/logic/featureFlagLogic'\n-import { FEATURE_FLAGS } from 'lib/constants'\n \n export const intervalFilterLogic = kea<intervalFilterLogicType>({\n     props: {} as InsightLogicProps,\n@@ -27,43 +26,40 @@ export const intervalFilterLogic = kea<intervalFilterLogicType>({\n             }\n         },\n         setFilters: ({ filters }, _, __, previousState) => {\n-            if (values.featureFlags[FEATURE_FLAGS.DATE_FILTER_EXPERIMENT] === 'test') {\n-                const { date_from, date_to } = filters\n-                const previousFilters = selectors.filters(previousState)\n-                if (\n-                    !date_from ||\n-                    (objectsEqual(date_from, previousFilters.date_from) &&\n-                        objectsEqual(date_to, previousFilters.date_to))\n-                ) {\n-                    return\n-                }\n+            const { date_from, date_to } = filters\n+            const previousFilters = selectors.filters(previousState)\n+            if (\n+                !date_from ||\n+                (objectsEqual(date_from, previousFilters.date_from) && objectsEqual(date_to, previousFilters.date_to))\n+            ) {\n+                return\n+            }\n \n-                // automatically set an interval for fixed date ranges\n-                if (date_from && date_to && dayjs(filters.date_from).isValid() && dayjs(filters.date_to).isValid()) {\n-                    if (dayjs(date_to).diff(dayjs(date_from), 'day') <= 3) {\n-                        actions.setInterval('hour')\n-                    } else if (dayjs(date_to).diff(dayjs(date_from), 'month') <= 3) {\n-                        actions.setInterval('day')\n-                    } else {\n-                        actions.setInterval('month')\n-                    }\n-                    return\n+            // automatically set an interval for fixed date ranges\n+            if (date_from && date_to && dayjs(filters.date_from).isValid() && dayjs(filters.date_to).isValid()) {\n+                if (dayjs(date_to).diff(dayjs(date_from), 'day') <= 3) {\n+                    actions.setInterval('hour')\n+                } else if (dayjs(date_to).diff(dayjs(date_from), 'month') <= 3) {\n+                    actions.setInterval('day')\n+                } else {\n+                    actions.setInterval('month')\n                 }\n-                // get a defaultInterval for dateOptions that have a default value\n-                let interval: IntervalType = 'day'\n-                for (const { key, values, defaultInterval } of dateMapping) {\n-                    if (\n-                        values[0] === date_from &&\n-                        values[1] === (date_to || undefined) &&\n-                        key !== 'Custom' &&\n-                        defaultInterval\n-                    ) {\n-                        interval = defaultInterval\n-                        break\n-                    }\n+                return\n+            }\n+            // get a defaultInterval for dateOptions that have a default value\n+            let interval: IntervalType = 'day'\n+            for (const { key, values, defaultInterval } of dateMapping) {\n+                if (\n+                    values[0] === date_from &&\n+                    values[1] === (date_to || undefined) &&\n+                    key !== 'Custom' &&\n+                    defaultInterval\n+                ) {\n+                    interval = defaultInterval\n+                    break\n                 }\n-                actions.setInterval(interval)\n             }\n+            actions.setInterval(interval)\n         },\n     }),\n     selectors: {\ndiff --git a/frontend/src/lib/constants.tsx b/frontend/src/lib/constants.tsx\nindex 57ab4cb74..14d827284 100644\n--- a/frontend/src/lib/constants.tsx\n+++ b/frontend/src/lib/constants.tsx\n@@ -122,7 +122,6 @@ export const FEATURE_FLAGS = {\n     FEATURE_FLAG_EXPERIENCE_CONTINUITY: 'feature-flag-experience-continuity', // owner: @neilkakkar\n     EMBED_INSIGHTS: 'embed-insights', // owner: @mariusandra\n     ASYNC_EXPORT_CSV_FOR_LIVE_EVENTS: 'ASYNC_EXPORT_CSV_FOR_LIVE_EVENTS', // owner: @pauldambra\n-    DATE_FILTER_EXPERIMENT: 'date-filter-experiment', // owner: @kappa90\n     HISTOGRAM_INSIGHTS: 'histogram-insights', // owner: @rcmarron\n }\n \ndiff --git a/frontend/src/lib/utils.test.ts b/frontend/src/lib/utils.test.ts\nindex ce81a6825..1c8d17085 100644\n--- a/frontend/src/lib/utils.test.ts\n+++ b/frontend/src/lib/utils.test.ts\n@@ -21,7 +21,7 @@ import {\n     eventToDescription,\n     ceilMsToClosestSecond,\n     floorMsToClosestSecond,\n-    dateMappingExperiment as dateMapping,\n+    dateMapping,\n     getFormattedLastWeekDate,\n     genericOperatorMap,\n     dateTimeOperatorMap,\n@@ -255,7 +255,7 @@ describe('dateFilterToText()', () => {\n             expect(dateFilterToText(null, null, 'default')).toEqual('default')\n             expect(dateFilterToText('-24h', null, 'default')).toEqual('Last 24 hours')\n             expect(dateFilterToText('-48h', undefined, 'default')).toEqual('Last 48 hours')\n-            expect(dateFilterToText('-1d', '-1d', 'default')).toEqual('Yesterday')\n+            expect(dateFilterToText('-1d', null, 'default')).toEqual('Yesterday')\n             expect(dateFilterToText('-1mStart', '-1mEnd', 'default')).toEqual('Previous month')\n         })\n \ndiff --git a/frontend/src/lib/utils.tsx b/frontend/src/lib/utils.tsx\nindex 3d043de2b..4a68273d7 100644\n--- a/frontend/src/lib/utils.tsx\n+++ b/frontend/src/lib/utils.tsx\n@@ -711,90 +711,6 @@ export function determineDifferenceType(\n const DATE_FORMAT = 'MMMM D, YYYY'\n const DATE_FORMAT_WITHOUT_YEAR = 'MMMM D'\n \n-export const dateMapping: dateMappingOption[] = [\n-    { key: 'Custom', values: [] },\n-    {\n-        key: 'Today',\n-        values: ['dStart'],\n-        getFormattedDate: (date: dayjs.Dayjs, format?: string): string => date.startOf('d').format(format),\n-    },\n-    {\n-        key: 'Yesterday',\n-        values: ['-1d', '-1d'],\n-        getFormattedDate: (date: dayjs.Dayjs, format?: string): string => date.subtract(1, 'd').format(format),\n-    },\n-    {\n-        key: 'Last 24 hours',\n-        values: ['-24h'],\n-        getFormattedDate: (date: dayjs.Dayjs, format?: string): string =>\n-            `${date.subtract(24, 'h').format(format)} - ${date.endOf('d').format(format)}`,\n-    },\n-    {\n-        key: 'Last 48 hours',\n-        values: ['-48h'],\n-        getFormattedDate: (date: dayjs.Dayjs, format?: string): string =>\n-            `${date.subtract(48, 'h').format(format)} - ${date.endOf('d').format(format)}`,\n-        inactive: true,\n-    },\n-    {\n-        key: 'Last 3 days',\n-        values: ['-3d'],\n-        getFormattedDate: (date: dayjs.Dayjs, format?: string): string =>\n-            `${date.subtract(3, 'd').format(format)} - ${date.endOf('d').format(format)}`,\n-    },\n-    {\n-        key: 'Last 7 days',\n-        values: ['-7d'],\n-        getFormattedDate: (date: dayjs.Dayjs, format?: string): string =>\n-            `${date.subtract(7, 'd').format(format)} - ${date.endOf('d').format(format)}`,\n-    },\n-    {\n-        key: 'Last 14 days',\n-        values: ['-14d'],\n-        getFormattedDate: (date: dayjs.Dayjs, format?: string): string =>\n-            `${date.subtract(14, 'd').format(format)} - ${date.endOf('d').format(format)}`,\n-    },\n-    {\n-        key: 'Last 30 days',\n-        values: ['-30d'],\n-        getFormattedDate: (date: dayjs.Dayjs, format?: string): string =>\n-            `${date.subtract(30, 'd').format(format)} - ${date.endOf('d').format(format)}`,\n-    },\n-    {\n-        key: 'Last 90 days',\n-        values: ['-90d'],\n-        getFormattedDate: (date: dayjs.Dayjs, format?: string): string =>\n-            `${date.subtract(90, 'd').format(format)} - ${date.endOf('d').format(format)}`,\n-    },\n-    {\n-        key: 'Last 180 days',\n-        values: ['-180d'],\n-        getFormattedDate: (date: dayjs.Dayjs, format?: string): string =>\n-            `${date.subtract(180, 'd').format(format)} - ${date.endOf('d').format(format)}`,\n-    },\n-    {\n-        key: 'This month',\n-        values: ['mStart'],\n-        getFormattedDate: (date: dayjs.Dayjs, format?: string): string =>\n-            `${date.subtract(1, 'm').format(format)} - ${date.endOf('d').format(format)}`,\n-        inactive: true,\n-    },\n-    {\n-        key: 'Previous month',\n-        values: ['-1mStart', '-1mEnd'],\n-        getFormattedDate: (date: dayjs.Dayjs, format?: string): string =>\n-            `${date.subtract(1, 'm').startOf('M').format(format)} - ${date.subtract(1, 'm').endOf('M').format(format)}`,\n-        inactive: true,\n-    },\n-    {\n-        key: 'Year to date',\n-        values: ['yStart'],\n-        getFormattedDate: (date: dayjs.Dayjs, format?: string): string =>\n-            `${date.startOf('y').format(format)} - ${date.endOf('d').format(format)}`,\n-    },\n-    { key: 'All time', values: ['all'] },\n-]\n-\n export const formatDateRange = (dateFrom: dayjs.Dayjs, dateTo: dayjs.Dayjs, format?: string): string => {\n     let formatFrom = format ?? DATE_FORMAT\n     const formatTo = format ?? DATE_FORMAT\n@@ -804,7 +720,7 @@ export const formatDateRange = (dateFrom: dayjs.Dayjs, dateTo: dayjs.Dayjs, form\n     return `${dateFrom.format(formatFrom)} - ${dateTo.format(formatTo)}`\n }\n \n-export const dateMappingExperiment: dateMappingOption[] = [\n+export const dateMapping: dateMappingOption[] = [\n     { key: 'Custom', values: [] },\n     {\n         key: 'Today',\n"
  },
  "9d699dde06012a427ecd618636205d05a6c5e3ae": {
    "hash": "9d699dde06012a427ecd618636205d05a6c5e3ae",
    "message": "chore: remove the multi dashboard insight flag (#10836)",
    "diff": "commit 9d699dde06012a427ecd618636205d05a6c5e3ae\nAuthor: Paul D'Ambra <paul@posthog.com>\nDate:   Mon Jul 18 09:31:36 2022 +0100\n\n    chore: remove the multi dashboard insight flag (#10836)\n\ndiff --git a/frontend/src/lib/components/InsightCard/InsightCard.tsx b/frontend/src/lib/components/InsightCard/InsightCard.tsx\nindex 6cfa3c909..53694e4d0 100644\n--- a/frontend/src/lib/components/InsightCard/InsightCard.tsx\n+++ b/frontend/src/lib/components/InsightCard/InsightCard.tsx\n@@ -36,7 +36,7 @@ import { IconSubtitles, IconSubtitlesOff } from '../icons'\n import { CSSTransition, Transition } from 'react-transition-group'\n import { InsightDetails } from './InsightDetails'\n import { INSIGHT_TYPES_METADATA } from 'scenes/saved-insights/SavedInsights'\n-import { DashboardPrivilegeLevel, FEATURE_FLAGS } from 'lib/constants'\n+import { DashboardPrivilegeLevel } from 'lib/constants'\n import { funnelLogic } from 'scenes/funnels/funnelLogic'\n import { ActionsHorizontalBar, ActionsLineGraph, ActionsPie } from 'scenes/trends/viz'\n import { DashboardInsightsTable } from 'scenes/insights/views/InsightsTable/InsightsTable'\n@@ -50,7 +50,6 @@ import { cohortsModel } from '~/models/cohortsModel'\n import { mathsLogic } from 'scenes/trends/mathsLogic'\n import { WorldMap } from 'scenes/insights/views/WorldMap'\n import { AlertMessage } from '../AlertMessage'\n-import { featureFlagLogic } from 'lib/logic/featureFlagLogic'\n import { UserActivityIndicator } from '../UserActivityIndicator/UserActivityIndicator'\n \n // TODO: Add support for Retention to InsightDetails\n@@ -146,7 +145,6 @@ export interface InsightCardProps extends React.HTMLAttributes<HTMLDivElement> {\n     refresh?: () => void\n     rename?: () => void\n     duplicate?: () => void\n-    moveToDashboardOld?: (dashboardId: DashboardType['id']) => void\n     moveToDashboard?: (dashboard: DashboardType) => void\n }\n \n@@ -160,7 +158,6 @@ interface InsightMetaProps\n         | 'refresh'\n         | 'rename'\n         | 'duplicate'\n-        | 'moveToDashboardOld'\n         | 'moveToDashboard'\n         | 'showEditingControls'\n         | 'showDetailsControls'\n@@ -182,7 +179,6 @@ function InsightMeta({\n     refresh,\n     rename,\n     duplicate,\n-    moveToDashboardOld,\n     moveToDashboard,\n     setPrimaryHeight,\n     areDetailsShown,\n@@ -201,8 +197,6 @@ function InsightMeta({\n         (d: DashboardType) => !dashboards?.includes(d.id)\n     )\n \n-    const { featureFlags } = useValues(featureFlagLogic)\n-\n     const { ref: primaryRef, height: primaryHeight, width: primaryWidth } = useResizeObserver()\n     const { ref: detailsRef, height: detailsHeight } = useResizeObserver()\n \n@@ -331,41 +325,31 @@ function InsightMeta({\n                                                             Set color\n                                                         </LemonButtonWithPopup>\n                                                     )}\n-                                                    {editable &&\n-                                                        moveToDashboardOld &&\n-                                                        moveToDashboard &&\n-                                                        otherDashboards.length > 0 && (\n-                                                            <LemonButtonWithPopup\n-                                                                type=\"stealth\"\n-                                                                popup={{\n-                                                                    overlay: otherDashboards.map((otherDashboard) => (\n-                                                                        <LemonButton\n-                                                                            key={otherDashboard.id}\n-                                                                            type=\"stealth\"\n-                                                                            onClick={() => {\n-                                                                                !!featureFlags[\n-                                                                                    FEATURE_FLAGS\n-                                                                                        .MULTI_DASHBOARD_INSIGHTS\n-                                                                                ]\n-                                                                                    ? moveToDashboard(otherDashboard)\n-                                                                                    : moveToDashboardOld(\n-                                                                                          otherDashboard.id\n-                                                                                      )\n-                                                                            }}\n-                                                                            fullWidth\n-                                                                        >\n-                                                                            {otherDashboard.name || <i>Untitled</i>}\n-                                                                        </LemonButton>\n-                                                                    )),\n-                                                                    placement: 'right-start',\n-                                                                    fallbackPlacements: ['left-start'],\n-                                                                    actionable: true,\n-                                                                }}\n-                                                                fullWidth\n-                                                            >\n-                                                                Move to\n-                                                            </LemonButtonWithPopup>\n-                                                        )}\n+                                                    {editable && moveToDashboard && otherDashboards.length > 0 && (\n+                                                        <LemonButtonWithPopup\n+                                                            type=\"stealth\"\n+                                                            popup={{\n+                                                                overlay: otherDashboards.map((otherDashboard) => (\n+                                                                    <LemonButton\n+                                                                        key={otherDashboard.id}\n+                                                                        type=\"stealth\"\n+                                                                        onClick={() => {\n+                                                                            moveToDashboard(otherDashboard)\n+                                                                        }}\n+                                                                        fullWidth\n+                                                                    >\n+                                                                        {otherDashboard.name || <i>Untitled</i>}\n+                                                                    </LemonButton>\n+                                                                )),\n+                                                                placement: 'right-start',\n+                                                                fallbackPlacements: ['left-start'],\n+                                                                actionable: true,\n+                                                            }}\n+                                                            fullWidth\n+                                                        >\n+                                                            Move to\n+                                                        </LemonButtonWithPopup>\n+                                                    )}\n                                                     <LemonDivider />\n                                                     {editable && (\n                                                         <LemonButton\n@@ -521,7 +505,6 @@ function InsightCardInternal(\n         refresh,\n         rename,\n         duplicate,\n-        moveToDashboardOld,\n         moveToDashboard,\n         className,\n         children,\n@@ -581,7 +564,6 @@ function InsightCardInternal(\n                     refresh={refresh}\n                     rename={rename}\n                     duplicate={duplicate}\n-                    moveToDashboardOld={moveToDashboardOld}\n                     moveToDashboard={moveToDashboard}\n                     setPrimaryHeight={setMetaPrimaryHeight}\n                     areDetailsShown={areDetailsShown}\ndiff --git a/frontend/src/lib/components/SaveToDashboard/SaveToDashboard.tsx b/frontend/src/lib/components/SaveToDashboard/SaveToDashboard.tsx\nindex 3a3ee9cf6..d2999fda7 100644\n--- a/frontend/src/lib/components/SaveToDashboard/SaveToDashboard.tsx\n+++ b/frontend/src/lib/components/SaveToDashboard/SaveToDashboard.tsx\n@@ -1,13 +1,10 @@\n import React, { useState } from 'react'\n-import { AddToDashboardModal, SaveToDashboardModal } from './SaveToDashboardModal'\n+import { AddToDashboardModal } from './SaveToDashboardModal'\n import { InsightModel } from '~/types'\n import { dashboardsModel } from '~/models/dashboardsModel'\n import { useValues } from 'kea'\n-import { urls } from '../../../scenes/urls'\n import { LemonButton } from '../LemonButton'\n import { IconGauge, IconWithCount } from 'lib/components/icons'\n-import { featureFlagLogic } from 'lib/logic/featureFlagLogic'\n-import { FEATURE_FLAGS } from 'lib/constants'\n \n interface SaveToDashboardProps {\n     insight: Partial<InsightModel>\n@@ -19,60 +16,25 @@ export function SaveToDashboard({ insight, canEditInsight }: SaveToDashboardProp\n     const { rawDashboards } = useValues(dashboardsModel)\n     const dashboards = insight.dashboards?.map((dashboard) => rawDashboards[dashboard]).filter((d) => !!d) || []\n \n-    const { featureFlags } = useValues(featureFlagLogic)\n-    const multiDashboardInsights = featureFlags[FEATURE_FLAGS.MULTI_DASHBOARD_INSIGHTS]\n-\n     return (\n         <span className=\"save-to-dashboard\" data-attr=\"save-to-dashboard-button\">\n-            {multiDashboardInsights ? (\n-                <>\n-                    <AddToDashboardModal\n-                        visible={openModal}\n-                        closeModal={() => setOpenModal(false)}\n-                        insight={insight}\n-                        canEditInsight={canEditInsight}\n-                    />\n-                    <LemonButton\n-                        onClick={() => setOpenModal(true)}\n-                        type=\"secondary\"\n-                        icon={\n-                            <IconWithCount count={dashboards.length} showZero={false}>\n-                                <IconGauge />\n-                            </IconWithCount>\n-                        }\n-                    >\n-                        Add to dashboard\n-                    </LemonButton>\n-                </>\n-            ) : (\n-                <>\n-                    <SaveToDashboardModal\n-                        visible={openModal}\n-                        closeModal={() => setOpenModal(false)}\n-                        insight={insight}\n-                        canEditInsight={canEditInsight}\n-                    />\n-                    {dashboards.length > 0 ? (\n-                        <LemonButton\n-                            disabled={!canEditInsight}\n-                            to={urls.dashboard(dashboards[0].id, insight.short_id)}\n-                            type=\"secondary\"\n-                            icon={<IconGauge />}\n-                        >\n-                            {dashboards.length > 1 ? 'On multiple dashboards' : `On dashboard: ${dashboards[0]?.name}`}\n-                        </LemonButton>\n-                    ) : (\n-                        <LemonButton\n-                            disabled={!canEditInsight}\n-                            onClick={() => setOpenModal(true)}\n-                            type=\"secondary\"\n-                            icon={<IconGauge />}\n-                        >\n-                            Add to dashboard\n-                        </LemonButton>\n-                    )}\n-                </>\n-            )}\n+            <AddToDashboardModal\n+                visible={openModal}\n+                closeModal={() => setOpenModal(false)}\n+                insight={insight}\n+                canEditInsight={canEditInsight}\n+            />\n+            <LemonButton\n+                onClick={() => setOpenModal(true)}\n+                type=\"secondary\"\n+                icon={\n+                    <IconWithCount count={dashboards.length} showZero={false}>\n+                        <IconGauge />\n+                    </IconWithCount>\n+                }\n+            >\n+                Add to dashboard\n+            </LemonButton>\n         </span>\n     )\n }\ndiff --git a/frontend/src/lib/constants.tsx b/frontend/src/lib/constants.tsx\nindex 164cad875..2534821cc 100644\n--- a/frontend/src/lib/constants.tsx\n+++ b/frontend/src/lib/constants.tsx\n@@ -107,7 +107,6 @@ export const FEATURE_FLAGS = {\n     BILLING_LIMIT: 'billing-limit', // owner: @timgl\n     KAFKA_INSPECTOR: 'kafka-inspector', // owner: @yakkomajuri\n     INSIGHT_EDITOR_PANELS: '8929-insight-editor-panels', // owner: @mariusandra\n-    MULTI_DASHBOARD_INSIGHTS: 'multi-dashboard-insights', // owner: @pauldambra\n     INSIGHT_ACTIVITY_LOG: '8545-insight-activity-log', // owner: @pauldambra\n     FRONTEND_APPS: '9618-frontend-apps', // owner: @mariusandra\n     EXPORT_DASHBOARD_INSIGHTS: 'export-dashboard-insights', // owner: @benjackwhite\ndiff --git a/frontend/src/models/insightsModel.tsx b/frontend/src/models/insightsModel.tsx\nindex 9afc48aac..11233e723 100644\n--- a/frontend/src/models/insightsModel.tsx\n+++ b/frontend/src/models/insightsModel.tsx\n@@ -17,10 +17,9 @@ export const insightsModel = kea<insightsModelType>({\n     actions: () => ({\n         renameInsight: (item: InsightModel) => ({ item }),\n         renameInsightSuccess: (item: InsightModel) => ({ item }),\n-        duplicateInsight: (item: InsightModel, dashboardId?: number, move: boolean = false) => ({\n+        duplicateInsight: (item: InsightModel, dashboardId?: number) => ({\n             item,\n             dashboardId,\n-            move,\n         }),\n         moveToDashboard: (item: InsightModel, fromDashboard: number, toDashboard: number, toDashboardName: string) => ({\n             item,\n@@ -90,7 +89,7 @@ export const insightsModel = kea<insightsModelType>({\n                 }\n             )\n         },\n-        duplicateInsight: async ({ item, dashboardId, move }) => {\n+        duplicateInsight: async ({ item, dashboardId }) => {\n             if (!item) {\n                 return\n             }\n@@ -106,45 +105,7 @@ export const insightsModel = kea<insightsModelType>({\n \n             const dashboard = dashboardId ? dashboardsModel.values.rawDashboards[dashboardId] : null\n \n-            if (move && dashboard) {\n-                const deletedItem = await api.update(\n-                    `api/projects/${teamLogic.values.currentTeamId}/insights/${item.id}`,\n-                    {\n-                        deleted: true,\n-                    }\n-                )\n-                dashboardsModel.actions.updateDashboardItem(deletedItem)\n-\n-                lemonToast.success(\n-                    <>\n-                        Insight moved to{' '}\n-                        <b>\n-                            <Link to={urls.dashboard(dashboard.id)}>{dashboard.name || 'Untitled'}</Link>\n-                        </b>\n-                    </>,\n-                    {\n-                        button: {\n-                            label: 'Undo',\n-                            action: async () => {\n-                                const [restoredItem, removedItem] = await Promise.all([\n-                                    api.update(`api/projects/${teamLogic.values.currentTeamId}/insights/${item.id}`, {\n-                                        deleted: false,\n-                                    }),\n-                                    api.update(\n-                                        `api/projects/${teamLogic.values.currentTeamId}/insights/${addedItem.id}`,\n-                                        {\n-                                            deleted: true,\n-                                        }\n-                                    ),\n-                                ])\n-                                lemonToast.success('Panel move reverted')\n-                                dashboardsModel.actions.updateDashboardItem(restoredItem)\n-                                dashboardsModel.actions.updateDashboardItem(removedItem)\n-                            },\n-                        },\n-                    }\n-                )\n-            } else if (!move && dashboardId && dashboard) {\n+            if (dashboardId && dashboard) {\n                 lemonToast.success('Insight copied', {\n                     button: {\n                         label: `View ${dashboard.name}`,\ndiff --git a/frontend/src/scenes/dashboard/DashboardItems.tsx b/frontend/src/scenes/dashboard/DashboardItems.tsx\nindex 1e586ce9f..8d1d85790 100644\n--- a/frontend/src/scenes/dashboard/DashboardItems.tsx\n+++ b/frontend/src/scenes/dashboard/DashboardItems.tsx\n@@ -92,9 +92,6 @@ export function DashboardItems(): JSX.Element {\n                         refresh={() => refreshAllDashboardItems([item])}\n                         rename={() => renameInsight(item)}\n                         duplicate={() => duplicateInsight(item)}\n-                        moveToDashboardOld={(dashboardId: DashboardType['id']) =>\n-                            duplicateInsight(item, dashboardId, true)\n-                        }\n                         moveToDashboard={({ id, name }: Pick<DashboardType, 'id' | 'name'>) => {\n                             if (!dashboard) {\n                                 throw new Error('must be on a dashboard to move an insight')\ndiff --git a/frontend/src/scenes/insights/Insight.tsx b/frontend/src/scenes/insights/Insight.tsx\nindex 623447144..227dc4b14 100644\n--- a/frontend/src/scenes/insights/Insight.tsx\n+++ b/frontend/src/scenes/insights/Insight.tsx\n@@ -138,9 +138,8 @@ export function Insight({ insightId }: { insightId: InsightShortId | 'new' }): J\n                             !canEditInsight\n                                 ? {\n                                       icon: <IconLock />,\n-                                      tooltip: featureFlags[FEATURE_FLAGS.MULTI_DASHBOARD_INSIGHTS]\n-                                          ? \"You don't have edit permissions on any of the dashboards this insight belongs to. Ask a dashboard collaborator with edit access to add you.\"\n-                                          : \"You don't have edit permissions in the dashboard this insight belongs to. Ask a dashboard collaborator with edit access to add you.\",\n+                                      tooltip:\n+                                          \"You don't have edit permissions on any of the dashboards this insight belongs to. Ask a dashboard collaborator with edit access to add you.\",\n                                   }\n                                 : undefined\n                         }\ndiff --git a/posthog/settings/feature_flags.py b/posthog/settings/feature_flags.py\nindex 80a8fd1f8..277c3a4db 100644\n--- a/posthog/settings/feature_flags.py\n+++ b/posthog/settings/feature_flags.py\n@@ -7,5 +7,4 @@ from posthog.settings.utils import get_list\n PERSISTED_FEATURE_FLAGS = get_list(os.getenv(\"PERSISTED_FEATURE_FLAGS\", \"\")) + [\n     \"invite-teammates-prompt\",\n     \"insight-legends\",\n-    \"multi-dashboard-insights\",\n ]\n"
  },
  "d482bb7dec68c4b704700d60df739916e7be5476": {
    "hash": "d482bb7dec68c4b704700d60df739916e7be5476",
    "message": "chore: enable multi dashboard insight flag for self host (#9968)\n    \n    * chore: enable multi dashboard insight flag for self host\n    \n    * oh cypress\n    \n    * like this cypress?\n    \n    * just click the first regardless of text",
    "diff": "commit d482bb7dec68c4b704700d60df739916e7be5476\nAuthor: Paul D'Ambra <paul@posthog.com>\nDate:   Wed May 25 11:31:58 2022 +0100\n\n    chore: enable multi dashboard insight flag for self host (#9968)\n    \n    * chore: enable multi dashboard insight flag for self host\n    \n    * oh cypress\n    \n    * like this cypress?\n    \n    * just click the first regardless of text\n\ndiff --git a/cypress/integration/dashboard.js b/cypress/integration/dashboard.js\nindex 300c4fdf2..6d10d042b 100644\n--- a/cypress/integration/dashboard.js\n+++ b/cypress/integration/dashboard.js\n@@ -1,3 +1,14 @@\n+function createDashboardFromTemplate(dashboardName) {\n+    cy.get('[data-attr=\"new-dashboard\"]').click()\n+    cy.get('[data-attr=dashboard-name-input]').clear().type(dashboardName)\n+    cy.get('[data-attr=copy-from-template]').click()\n+    cy.get('[data-attr=dashboard-select-default-app]').click()\n+\n+    cy.get('button').contains('Create').click()\n+\n+    cy.contains(dashboardName).should('exist')\n+}\n+\n describe('Dashboard', () => {\n     beforeEach(() => {\n         cy.clickNavMenu('dashboards')\n@@ -20,8 +31,9 @@ describe('Dashboard', () => {\n         cy.focused().clear().type('Test Insight Zeus')\n         cy.get('button').contains('Save').click() // Save the new name\n         cy.get('[data-attr=\"save-to-dashboard-button\"]').click() // Open the Save to dashboard modal\n-        cy.get('button').contains('Add insight to dashboard').click() // Add the insight to a dashboard\n-        cy.get('[data-attr=\"save-to-dashboard-button\"]').click() // Go to the dashboard\n+        cy.get('.modal-row button').contains('Add to dashboard').first().click({ force: true }) // Add the insight to a dashboard\n+        cy.get('.modal-row button').first().contains('Added')\n+        cy.get('.modal-row a').first().click({ force: true }) // Go to the dashboard\n         cy.get('[data-attr=\"insight-name\"]').should('contain', 'Test Insight Zeus') // Check if the insight is there\n     })\n \n@@ -44,18 +56,19 @@ describe('Dashboard', () => {\n     })\n \n     it('Share dashboard', () => {\n-        cy.get('[data-attr=dashboard-name]').contains('App Analytics').click()\n+        createDashboardFromTemplate('to be shared')\n+\n         cy.get('.InsightCard').should('exist')\n \n         cy.get('[data-attr=dashboard-share-button]').click()\n-        cy.get('[data-attr=share-dashboard-switch]').click()\n-        cy.contains('Share dashboard publicly').should('exist')\n+        cy.get('[data-attr=share-dashboard-switch]').click({ force: true })\n+        cy.contains('Copy shared dashboard link').should('be.visible')\n         cy.get('[data-attr=share-dashboard-link-button]').click()\n         cy.window().then((win) => {\n             win.navigator.clipboard.readText().then((linkFromClipboard) => {\n                 cy.wait(200)\n                 cy.visit(linkFromClipboard)\n-                cy.get('[data-attr=dashboard-item-title]').should('contain', 'App Analytics')\n+                cy.get('[data-attr=dashboard-item-title]').should('contain', 'to be shared')\n             })\n         })\n     })\n@@ -76,14 +89,8 @@ describe('Dashboard', () => {\n     it('Create dashboard from a template', () => {\n         const TEST_DASHBOARD_NAME = 'XDefault'\n \n-        cy.get('[data-attr=\"new-dashboard\"]').click()\n-        cy.get('[data-attr=dashboard-name-input]').clear().type(TEST_DASHBOARD_NAME)\n-        cy.get('[data-attr=copy-from-template]').click()\n-        cy.get('[data-attr=dashboard-select-default-app]').click()\n-\n-        cy.get('button').contains('Create').click()\n+        createDashboardFromTemplate(TEST_DASHBOARD_NAME)\n \n-        cy.contains(TEST_DASHBOARD_NAME).should('exist')\n         cy.get('.InsightCard').its('length').should('be.gte', 2)\n         // Breadcrumbs work\n         cy.get('[data-attr=breadcrumb-0]').should('contain', 'Hogflix')\ndiff --git a/cypress/integration/trends.js b/cypress/integration/trends.js\nindex 2591ff694..3cd528d27 100644\n--- a/cypress/integration/trends.js\n+++ b/cypress/integration/trends.js\n@@ -52,8 +52,15 @@ describe('Trends', () => {\n         cy.get('[data-attr=show-prop-filter-0]').click()\n         cy.get('[data-attr=property-select-toggle-0]').click()\n         cy.get('[data-attr=\"expand-list-event_properties\"]').click()\n-        cy.get('.taxonomic-list-row').first().click({ force: true })\n-        cy.get('[data-attr=prop-val]').click()\n+        cy.get('.taxonomic-list-row').contains('Browser').first().click({ force: true })\n+        cy.get('[data-attr=prop-val]').click({ force: true })\n+        // cypress is odd and even though when a human clicks this the right dropdown opens\n+        // in the test that doesn't happen\n+        cy.get('body').then(($body) => {\n+            if ($body.find('[data-attr=prop-val-0]').length === 0) {\n+                cy.get('.taxonomic-value-select').click()\n+            }\n+        })\n         cy.get('[data-attr=prop-val-0]').click({ force: true })\n         cy.get('[data-attr=trend-line-graph]', { timeout: 8000 }).should('exist')\n     })\n@@ -67,8 +74,15 @@ describe('Trends', () => {\n         cy.get('[data-attr=property-select-toggle-0]').click()\n         cy.get('[data-attr=taxonomic-filter-searchfield]').click()\n         cy.get('[data-attr=\"expand-list-event_properties\"]').click()\n-        cy.get('.taxonomic-list-row').first().click({ force: true })\n-        cy.get('[data-attr=prop-val]').click()\n+        cy.get('.taxonomic-list-row').contains('Browser').first().click({ force: true })\n+        cy.get('[data-attr=prop-val]').click({ force: true })\n+        // cypress is odd and even though when a human clicks this the right dropdown opens\n+        // in the test that doesn't happen\n+        cy.get('body').then(($body) => {\n+            if ($body.find('[data-attr=prop-val-0]').length === 0) {\n+                cy.get('.taxonomic-value-select').click()\n+            }\n+        })\n         cy.get('[data-attr=prop-val-0]').click({ force: true })\n \n         cy.get('[data-attr=trend-line-graph]', { timeout: 8000 }).should('exist')\n@@ -124,21 +138,27 @@ describe('Trends', () => {\n         cy.get('[data-attr=trend-line-graph]').should('exist')\n     })\n \n-    it('Save to dashboard', () => {\n+    it.only('Save to dashboard', () => {\n         // apply random filter\n         cy.get('[data-attr=trends-filters-add-filter-group]').click()\n         cy.get('[data-attr=property-select-toggle-0]').click()\n         cy.get('[data-attr=taxonomic-filter-searchfield]').click()\n         cy.get('[data-attr=\"expand-list-event_properties\"]').click()\n         cy.get('.taxonomic-list-row').first().click({ force: true })\n-        cy.get('[data-attr=prop-val]').click()\n+        cy.get('[data-attr=prop-val]').click({ force: true })\n+        // cypress is odd and even though when a human clicks this the right dropdown opens\n+        // in the test that doesn't happen\n+        cy.get('body').then(($body) => {\n+            if ($body.find('[data-attr=prop-val-0]').length === 0) {\n+                cy.get('.taxonomic-value-select').click()\n+            }\n+        })\n         cy.get('[data-attr=prop-val-0]').click({ force: true })\n \n         cy.get('[data-attr=insight-save-button]').click()\n         cy.get('[data-attr=save-to-dashboard-button]').click()\n-        cy.get('[data-attr=add-to-dashboard-select]').click()\n-        cy.get('[data-attr=add-to-dashboard-option-0').click()\n-        cy.contains('Add insight to dashboard').click()\n+        cy.get('.modal-row button').contains('Add to dashboard').first().click({ force: true }) // Add the insight to a dashboard\n+        cy.get('.modal-row button').first().contains('Added')\n \n         cy.wait(200)\n         cy.get('[data-attr=success-toast]').contains('Insight added to dashboard').should('exist')\ndiff --git a/posthog/settings/feature_flags.py b/posthog/settings/feature_flags.py\nindex 5e6417d5a..9db47864d 100644\n--- a/posthog/settings/feature_flags.py\n+++ b/posthog/settings/feature_flags.py\n@@ -9,4 +9,5 @@ PERSISTED_FEATURE_FLAGS = get_list(os.getenv(\"PERSISTED_FEATURE_FLAGS\", \"\")) + [\n     \"insight-legends\",\n     \"experiments-secondary-metrics\",\n     \"lemon-funnel-viz\",\n+    \"multi-dashboard-insights\",\n ]\n"
  },
  "2d7f929aa6cdd7fec1165fd6d0ab2202e33efe19": {
    "hash": "2d7f929aa6cdd7fec1165fd6d0ab2202e33efe19",
    "message": "fix: test toolbar domain checks (#10777)\n    \n    * fix: URLs with wild cards are URLs too",
    "diff": "commit 2d7f929aa6cdd7fec1165fd6d0ab2202e33efe19\nAuthor: Paul D'Ambra <paul@posthog.com>\nDate:   Wed Jul 13 20:12:34 2022 +0100\n\n    fix: test toolbar domain checks (#10777)\n    \n    * fix: URLs with wild cards are URLs too\n\ndiff --git a/frontend/src/lib/utils.test.ts b/frontend/src/lib/utils.test.ts\nindex 1c8d17085..47f814d9a 100644\n--- a/frontend/src/lib/utils.test.ts\n+++ b/frontend/src/lib/utils.test.ts\n@@ -155,6 +155,8 @@ describe('isURL()', () => {\n         expect(isURL('https://sevenapp.events/')).toEqual(true)\n         expect(isURL('https://seven-stagingenv.web.app/')).toEqual(true)\n         expect(isURL('https://salesforce.co.uk/')).toEqual(true)\n+        expect(isURL('https://valid.*.example.com')).toEqual(true)\n+        expect(isURL('https://*.valid.com')).toEqual(true)\n     })\n \n     it('recognizes non-URLs properly', () => {\ndiff --git a/frontend/src/lib/utils.tsx b/frontend/src/lib/utils.tsx\nindex 4a68273d7..4679fee59 100644\n--- a/frontend/src/lib/utils.tsx\n+++ b/frontend/src/lib/utils.tsx\n@@ -604,7 +604,7 @@ export function isURL(input: any): boolean {\n         return false\n     }\n     // Regex by regextester.com/115236\n-    const regexp = /^(?:http(s)?:\\/\\/)([\\w.-])+(?:[\\w\\.-]+)+([\\w\\-\\._~:/?#[\\]@%!\\$&'\\(\\)\\*\\+,;=.])+$/\n+    const regexp = /^(?:http(s)?:\\/\\/)([\\w*.-])+(?:[\\w*\\.-]+)+([\\w\\-\\._~:/?#[\\]@%!\\$&'\\(\\)\\*\\+,;=.])+$/\n     return !!input.trim().match(regexp)\n }\n \ndiff --git a/frontend/src/scenes/toolbar-launch/authorizedUrlsLogic.test.ts b/frontend/src/scenes/toolbar-launch/authorizedUrlsLogic.test.ts\nindex df796c24d..cda14a1f9 100644\n--- a/frontend/src/scenes/toolbar-launch/authorizedUrlsLogic.test.ts\n+++ b/frontend/src/scenes/toolbar-launch/authorizedUrlsLogic.test.ts\n@@ -1,4 +1,4 @@\n-import { appEditorUrl, authorizedUrlsLogic } from 'scenes/toolbar-launch/authorizedUrlsLogic'\n+import { appEditorUrl, authorizedUrlsLogic, validateProposedURL } from 'scenes/toolbar-launch/authorizedUrlsLogic'\n import { initKeaTests } from '~/test/init'\n import { router } from 'kea-router'\n import { expectLogic } from 'kea-test-utils'\n@@ -52,4 +52,44 @@ describe('the authorized urls logic', () => {\n             })\n         })\n     })\n+\n+    describe('validating proposed URLs', () => {\n+        const testCases = [\n+            { proposedUrl: 'https://valid.*.example.com', validityMessage: undefined },\n+            {\n+                proposedUrl: 'https://notsovalid.*.*',\n+                validityMessage:\n+                    'You can only wildcard subdomains. If you wildcard the domain or TLD, people might be able to gain access to your PostHog data.',\n+            },\n+            {\n+                proposedUrl: 'https://*.*.*',\n+                validityMessage:\n+                    'You can only wildcard subdomains. If you wildcard the domain or TLD, people might be able to gain access to your PostHog data.',\n+            },\n+            { proposedUrl: 'https://valid*.example.com', validityMessage: undefined },\n+            { proposedUrl: 'https://*.valid.com', validityMessage: undefined },\n+            {\n+                proposedUrl: 'https://not.*.valid.*',\n+                validityMessage:\n+                    'You can only wildcard subdomains. If you wildcard the domain or TLD, people might be able to gain access to your PostHog data.',\n+            },\n+        ]\n+\n+        testCases.forEach((testCase) => {\n+            it(`a proposal of \"${testCase.proposedUrl}\" has validity message \"${testCase.validityMessage}\"`, () => {\n+                expect(validateProposedURL(testCase.proposedUrl, [])).toEqual(testCase.validityMessage)\n+            })\n+        })\n+\n+        it('fails if the proposed URL is already authorized', () => {\n+            expect(validateProposedURL('https://valid.*.example.com', ['https://valid.*.example.com'])).toBe(\n+                'This URL is already registered.'\n+            )\n+            expect(\n+                validateProposedURL('https://valid.and-not-already-authorized.example.com', [\n+                    'https://valid.*.example.com',\n+                ])\n+            ).toBe(undefined)\n+        })\n+    })\n })\ndiff --git a/frontend/src/scenes/toolbar-launch/authorizedUrlsLogic.ts b/frontend/src/scenes/toolbar-launch/authorizedUrlsLogic.ts\nindex 9652e32f6..1b2f60079 100644\n--- a/frontend/src/scenes/toolbar-launch/authorizedUrlsLogic.ts\n+++ b/frontend/src/scenes/toolbar-launch/authorizedUrlsLogic.ts\n@@ -27,14 +27,15 @@ export interface ProposeNewUrlFormType {\n     url: string\n }\n \n-const validateProposedURL = (proposedUrl: string, currentUrls: string[]): string | undefined => {\n+export const validateProposedURL = (proposedUrl: string, currentUrls: string[]): string | undefined => {\n     if (proposedUrl === '') {\n         return 'Please type a valid URL or domain.'\n     }\n-    // See https://regex101.com/r/UMBc9g/1 for tests\n+\n     if (proposedUrl.indexOf('*') > -1 && !proposedUrl.match(/^(.*)\\*[^*]*\\.[^*]+\\.[^*]+$/)) {\n         return 'You can only wildcard subdomains. If you wildcard the domain or TLD, people might be able to gain access to your PostHog data.'\n     }\n+\n     if (!isURL(proposedUrl)) {\n         return 'Please type a valid URL or domain.'\n     }\n"
  },
  "41dba0444385b28ce9f0537b111f86af8da61422": {
    "hash": "41dba0444385b28ce9f0537b111f86af8da61422",
    "message": "feat: toolbar side bar launching v2 (#10377)\n    \n    * unique attribute on toolbar side action button\n    \n    * remove sneaky it.only\n    \n    * clicking add new URL moves to toolbar page and focusses the new url input\n    \n    * refactor tests",
    "diff": "commit 41dba0444385b28ce9f0537b111f86af8da61422\nAuthor: Paul D'Ambra <paul@posthog.com>\nDate:   Tue Jun 21 09:10:29 2022 +0200\n\n    feat: toolbar side bar launching v2 (#10377)\n    \n    * unique attribute on toolbar side action button\n    \n    * remove sneaky it.only\n    \n    * clicking add new URL moves to toolbar page and focusses the new url input\n    \n    * refactor tests\n\ndiff --git a/cypress/e2e/toolbar.js b/cypress/e2e/toolbar.js\nindex dbfeafbe0..ceed0694c 100644\n--- a/cypress/e2e/toolbar.js\n+++ b/cypress/e2e/toolbar.js\n@@ -4,7 +4,7 @@ describe('Toolbar', () => {\n         cy.get('#__POSTHOG_TOOLBAR__').should('exist')\n     })\n \n-    it.only('toolbar item in sidebar has launch options', () => {\n+    it('toolbar item in sidebar has launch options', () => {\n         cy.get('[data-attr=\"menu-item-toolbar-launch\"]').click()\n         cy.get('[data-attr=\"sidebar-launch-toolbar\"]').contains('Add toolbar URL').click()\n         cy.location('pathname').should('include', '/toolbar')\ndiff --git a/frontend/src/layout/navigation/SideBar/SideBar.tsx b/frontend/src/layout/navigation/SideBar/SideBar.tsx\nindex 4e8a4fe74..ba9067f91 100644\n--- a/frontend/src/layout/navigation/SideBar/SideBar.tsx\n+++ b/frontend/src/layout/navigation/SideBar/SideBar.tsx\n@@ -97,8 +97,9 @@ function Pages(): JSX.Element {\n                           ))}\n                           <LemonButton\n                               type=\"stealth\"\n+                              data-attr=\"sidebar-launch-toolbar-add-new-url\"\n                               fullWidth\n-                              to={urls.toolbarLaunch()}\n+                              to={`${urls.toolbarLaunch()}?addNew=true`}\n                               onClick={() => setIsToolbarLaunchShown(false)}\n                           >\n                               Add toolbar URL\ndiff --git a/frontend/src/scenes/toolbar-launch/authorizedUlrsLogic.test.ts b/frontend/src/scenes/toolbar-launch/authorizedUlrsLogic.test.ts\nindex a0962329a..f71834ded 100644\n--- a/frontend/src/scenes/toolbar-launch/authorizedUlrsLogic.test.ts\n+++ b/frontend/src/scenes/toolbar-launch/authorizedUlrsLogic.test.ts\n@@ -1,9 +1,42 @@\n-import { appEditorUrl } from 'scenes/toolbar-launch/authorizedUrlsLogic'\n+import { appEditorUrl, authorizedUrlsLogic } from 'scenes/toolbar-launch/authorizedUrlsLogic'\n+import { initKeaTests } from '~/test/init'\n+import { router } from 'kea-router'\n+import { expectLogic } from 'kea-test-utils'\n+import { useMocks } from '~/mocks/jest'\n+import { urls } from 'scenes/urls'\n \n describe('the authorized urls logic', () => {\n+    let logic: ReturnType<typeof authorizedUrlsLogic.build>\n+\n+    beforeEach(() => {\n+        useMocks({\n+            get: {\n+                '/api/projects/:team/insights/trend/': (req) => {\n+                    if (JSON.parse(req.url.searchParams.get('events') || '[]')?.[0]?.throw) {\n+                        return [500, { status: 0, detail: 'error from the API' }]\n+                    }\n+                    return [200, { result: ['result from api'] }]\n+                },\n+            },\n+        })\n+        initKeaTests()\n+        logic = authorizedUrlsLogic()\n+        logic.mount()\n+    })\n+\n     it('encodes an app url correctly', () => {\n         expect(appEditorUrl('http://127.0.0.1:8000')).toEqual(\n             '/api/user/redirect_to_site/?userIntent=add-action&appUrl=http%3A%2F%2F127.0.0.1%3A8000'\n         )\n     })\n+\n+    it('can be launched with adding a new URL focussed', async () => {\n+        router.actions.push(`${urls.toolbarLaunch()}?addNew=true`)\n+        await expectLogic(logic).toDispatchActions(['newUrl'])\n+    })\n+\n+    it('can be launchd without focussing adding new URL', async () => {\n+        router.actions.push(urls.toolbarLaunch())\n+        await expectLogic(logic).toNotHaveDispatchedActions(['newUrl'])\n+    })\n })\ndiff --git a/frontend/src/scenes/toolbar-launch/authorizedUrlsLogic.ts b/frontend/src/scenes/toolbar-launch/authorizedUrlsLogic.ts\nindex 91fa8af45..7686c0637 100644\n--- a/frontend/src/scenes/toolbar-launch/authorizedUrlsLogic.ts\n+++ b/frontend/src/scenes/toolbar-launch/authorizedUrlsLogic.ts\n@@ -7,6 +7,7 @@ import { dayjs } from 'lib/dayjs'\n import Fuse from 'fuse.js'\n import type { authorizedUrlsLogicType } from './authorizedUrlsLogicType'\n import { encodeParams } from 'kea-router'\n+import { urls } from 'scenes/urls'\n \n /** defaultIntent: whether to launch with empty intent (i.e. toolbar mode is default) */\n export function appEditorUrl(appUrl?: string, actionId?: number, defaultIntent?: boolean): string {\n@@ -193,4 +194,11 @@ export const authorizedUrlsLogic = kea<authorizedUrlsLogicType>({\n         ],\n         launchUrl: [() => [], () => (url: string) => appEditorUrl(url, props.actionId, !props.actionId)],\n     }),\n+    urlToAction: ({ actions }) => ({\n+        [urls.toolbarLaunch()]: (_, searchParams) => {\n+            if (searchParams.addNew) {\n+                actions.newUrl()\n+            }\n+        },\n+    }),\n })\n"
  },
  "78b89ad93e7e9e64ea28983069ea8c23ace5faa2": {
    "hash": "78b89ad93e7e9e64ea28983069ea8c23ace5faa2",
    "message": "fix: Remove webhooks header (#11165)",
    "diff": "commit 78b89ad93e7e9e64ea28983069ea8c23ace5faa2\nAuthor: Ben White <ben@benjackwhite.co.uk>\nDate:   Fri Aug 5 12:56:30 2022 +0200\n\n    fix: Remove webhooks header (#11165)\n\ndiff --git a/frontend/src/scenes/actions/ActionEdit.tsx b/frontend/src/scenes/actions/ActionEdit.tsx\nindex b2812d3da..50cf2d241 100644\n--- a/frontend/src/scenes/actions/ActionEdit.tsx\n+++ b/frontend/src/scenes/actions/ActionEdit.tsx\n@@ -233,7 +233,6 @@ export function ActionEdit({ action: loadedAction, id, onSave, temporaryToken }:\n                 </div>\n                 <div>\n                     <div style={{ marginTop: '2rem' }}>\n-                        <h2 className=\"subtitle\">Match groups</h2>\n                         <Field name=\"post_to_slack\">\n                             {({ value, onChange }) => (\n                                 <LemonCheckbox\n"
  },
  "d6f3079bc0369642dd7fc2aafc82dacdb3fdc626": {
    "hash": "d6f3079bc0369642dd7fc2aafc82dacdb3fdc626",
    "message": "Release actions-ux-201012 (#2615)\n    \n    * remove legacy code & feature flag references\n    \n    * ActionStepV2 refactor\n    \n    * ActionEditV2 refactor\n    \n    * fix backend tests\n    \n    * fix more tests\n    \n    * more fixes\n    \n    * last fix\n    \n    * address feedback",
    "diff": "commit d6f3079bc0369642dd7fc2aafc82dacdb3fdc626\nAuthor: Paolo D'Amico <paolodamico@users.noreply.github.com>\nDate:   Thu Dec 3 03:59:11 2020 -0600\n\n    Release actions-ux-201012 (#2615)\n    \n    * remove legacy code & feature flag references\n    \n    * ActionStepV2 refactor\n    \n    * ActionEditV2 refactor\n    \n    * fix backend tests\n    \n    * fix more tests\n    \n    * more fixes\n    \n    * last fix\n    \n    * address feedback\n\ndiff --git a/cypress/integration/funnels.js b/cypress/integration/funnels.js\nindex b0d28b976..e474a22f8 100644\n--- a/cypress/integration/funnels.js\n+++ b/cypress/integration/funnels.js\n@@ -10,7 +10,7 @@ describe('Funnels', () => {\n         cy.get('[data-attr=trend-element-subject-0]').click()\n \n         // Double click: https://www.cypress.io/blog/2019/01/22/when-can-the-test-click/\n-        cy.contains('Pageviews').click().click()\n+        cy.contains('HogFlix homepage view').click().click()\n \n         cy.get('[data-attr=save-funnel-button]').click()\n \n@@ -20,7 +20,7 @@ describe('Funnels', () => {\n     it('Apply date filter to funnel', () => {\n         cy.get('[data-attr=add-action-event-button]').click()\n         cy.get('[data-attr=trend-element-subject-0]').click()\n-        cy.contains('Pageviews').click().click()\n+        cy.contains('HogFlix homepage view').click().click()\n         cy.get('[data-attr=save-funnel-button]').click()\n \n         cy.get('[data-attr=date-filter]').click()\n@@ -35,11 +35,11 @@ describe('Funnels', () => {\n     it('Add 2 actions to funnel', () => {\n         cy.get('[data-attr=add-action-event-button]').click()\n         cy.get('[data-attr=trend-element-subject-0]').click()\n-        cy.contains('Pageviews').click().click()\n+        cy.contains('HogFlix homepage view').click().click()\n \n         cy.get('[data-attr=add-action-event-button]').click()\n         cy.get('[data-attr=trend-element-subject-1]').click()\n-        cy.contains('HogFlix homepage view').click().click()\n+        cy.contains('HogFlix paid').click().click()\n \n         cy.get('[data-attr=save-funnel-button]').click()\n \ndiff --git a/cypress/integration/trendsElements.js b/cypress/integration/trendsElements.js\nindex 1a9b30294..5c69e2d02 100644\n--- a/cypress/integration/trendsElements.js\n+++ b/cypress/integration/trendsElements.js\n@@ -11,9 +11,9 @@ describe('Trends actions & events', () => {\n \n     it('Add a pageview action filter', () => {\n         // when\n-        cy.contains('Add action/event').click()\n+        cy.contains('Add graph series').click()\n         cy.get('[data-attr=trend-element-subject-1]').click()\n-        cy.contains('Pageviews').click()\n+        cy.contains('HogFlix homepage view').click()\n \n         // then\n         cy.get('[data-attr=trend-line-graph]').should('exist')\n@@ -118,7 +118,7 @@ describe('Trends actions & events', () => {\n \n     it('Save to dashboard', () => {\n         cy.get('[data-attr=save-to-dashboard-button]').click()\n-        cy.get('.ant-input').type('Pageviews')\n+        cy.get('.ant-input').type('Home page views')\n         cy.get('form > .ant-select > .ant-select-selector').click()\n         cy.get(':nth-child(1) > .ant-select-item-option-content').click()\n         cy.contains('Add panel to dashboard').click()\ndiff --git a/frontend/src/models/actionsModel.js b/frontend/src/models/actionsModel.js\nindex 0bd3c89fc..c6f271146 100644\n--- a/frontend/src/models/actionsModel.js\n+++ b/frontend/src/models/actionsModel.js\n@@ -1,15 +1,7 @@\n import { kea } from 'kea'\n import api from 'lib/api'\n-import { featureFlagLogic } from 'lib/logic/featureFlagLogic'\n-\n-const actionContains = (action, event) => {\n-    return action.steps.filter((step) => step.event == event).length > 0\n-}\n \n export const actionsModel = kea({\n-    connect: {\n-        values: [featureFlagLogic, ['featureFlags']],\n-    },\n     loaders: ({ props }) => ({\n         actions: {\n             __default: [],\n@@ -21,38 +13,16 @@ export const actionsModel = kea({\n     }),\n     selectors: ({ selectors }) => ({\n         actionsGrouped: [\n-            () => [selectors.actions, selectors.featureFlags],\n-            (actions, featureFlags) => {\n-                if (featureFlags['actions-ux-201012']) {\n-                    // In this experiment we no longer group actions by type\n-                    return [\n-                        {\n-                            label: 'Select an action',\n-                            options: actions.map((action) => {\n-                                return { label: action.name, value: action.id }\n-                            }),\n-                        },\n-                    ]\n-                }\n-\n-                let data = [\n-                    { label: 'Autocapture', options: [] },\n-                    { label: 'Event', options: [] },\n-                    { label: 'Pageview', options: [] },\n+            () => [selectors.actions],\n+            (actions) => {\n+                return [\n+                    {\n+                        label: 'Select an action',\n+                        options: actions.map((action) => {\n+                            return { label: action.name, value: action.id }\n+                        }),\n+                    },\n                 ]\n-                actions.forEach((action) => {\n-                    let format = { label: action.name, value: action.id }\n-                    if (actionContains(action, '$autocapture')) {\n-                        data[0].options.push(format)\n-                    }\n-                    if (actionContains(action, '$pageview')) {\n-                        data[2].options.push(format)\n-                    }\n-                    if (!actionContains(action, '$autocapture') && !actionContains(action, '$pageview')) {\n-                        data[1].options.push(format)\n-                    }\n-                })\n-                return data\n             },\n         ],\n     }),\ndiff --git a/frontend/src/scenes/actions/Action.js b/frontend/src/scenes/actions/Action.js\nindex d17521e19..4314562ad 100644\n--- a/frontend/src/scenes/actions/Action.js\n+++ b/frontend/src/scenes/actions/Action.js\n@@ -1,6 +1,5 @@\n import React from 'react'\n import { ActionEdit } from './ActionEdit'\n-import { ActionEdit as ActionEditV2 } from './ActionEditV2'\n import { useActions, useValues } from 'kea'\n import { router } from 'kea-router'\n import { userLogic } from 'scenes/userLogic'\n@@ -9,7 +8,6 @@ import api from 'lib/api'\n import { kea } from 'kea'\n import { Spin } from 'antd'\n import { hot } from 'react-hot-loader/root'\n-import { featureFlagLogic } from 'lib/logic/featureFlagLogic'\n import { PageHeader } from 'lib/components/PageHeader'\n import { EventsTable } from 'scenes/events'\n \n@@ -68,9 +66,7 @@ let actionLogic = kea({\n })\n \n function EditComponent(props) {\n-    const { featureFlags } = useValues(featureFlagLogic)\n-    const Component = featureFlags['actions-ux-201012'] ? ActionEditV2 : ActionEdit\n-    return <Component {...props} />\n+    return <ActionEdit {...props} />\n }\n \n export const Action = hot(_Action)\ndiff --git a/frontend/src/scenes/actions/ActionEdit.js b/frontend/src/scenes/actions/ActionEdit.js\nindex f20f4a4c3..759aecafa 100644\n--- a/frontend/src/scenes/actions/ActionEdit.js\n+++ b/frontend/src/scenes/actions/ActionEdit.js\n@@ -1,14 +1,14 @@\n-import React, { useState, Fragment } from 'react'\n+import React, { useState } from 'react'\n import { uuid, Loading } from 'lib/utils'\n import { Link } from 'lib/components/Link'\n import { useValues, useActions } from 'kea'\n import { actionEditLogic } from './actionEditLogic'\n+import './Actions.scss'\n import { ActionStep } from './ActionStep'\n-import { Alert, Button, Card, Input } from 'antd'\n-import { SaveOutlined } from '@ant-design/icons'\n+import { Alert, Button, Col, Input, Row } from 'antd'\n+import { InfoCircleOutlined, PlusOutlined, SaveOutlined } from '@ant-design/icons'\n \n-// TODO: isEditor === false always\n-export function ActionEdit({ actionId, apiURL, onSave, user, isEditor, simmer, temporaryToken }) {\n+export function ActionEdit({ actionId, apiURL, onSave, user, simmer, temporaryToken }) {\n     let logic = actionEditLogic({\n         id: actionId,\n         apiURL,\n@@ -25,22 +25,28 @@ export function ActionEdit({ actionId, apiURL, onSave, user, isEditor, simmer, t\n         return <Loading />\n     }\n \n+    const newAction = () => {\n+        setAction({ ...action, steps: [...action.steps, { isNew: uuid() }] })\n+    }\n+\n     const addGroup = (\n-        <Button\n-            onClick={() => {\n-                setAction({ ...action, steps: [...action.steps, { isNew: uuid() }] })\n-            }}\n-        >\n+        <Button onClick={newAction} size=\"small\">\n             Add another match group\n         </Button>\n     )\n \n     return (\n-        <Card style={{ marginTop: isEditor ? 8 : '' }}>\n-            <div className=\"mt\">\n+        <div className=\"action-edit-container\">\n+            <form\n+                onSubmit={(e) => {\n+                    e.preventDefault()\n+                    saveAction()\n+                }}\n+            >\n+                <label>Action name:</label>\n                 <Input\n                     required\n-                    placeholder=\"For example: user signed up\"\n+                    placeholder=\"e.g. user account created, purchase completed, movie watched\"\n                     value={action.name}\n                     onChange={(e) => {\n                         setAction({ ...action, name: e.target.value })\n@@ -48,62 +54,65 @@ export function ActionEdit({ actionId, apiURL, onSave, user, isEditor, simmer, t\n                     }}\n                     data-attr=\"edit-action-input\"\n                 />\n-            </div>\n-\n-            {action.count > -1 && (\n-                <div>\n-                    <small className=\"text-muted\">Matches {action.count} events</small>\n-                </div>\n-            )}\n-\n-            {!isEditor && <br />}\n+                {action.count > -1 && (\n+                    <div>\n+                        <small className=\"text-muted\">Matches {action.count} events</small>\n+                    </div>\n+                )}\n \n-            {action.steps.map((step, index) => (\n-                <Fragment key={index}>\n-                    {index > 0 ? (\n-                        <div\n-                            style={{\n-                                textAlign: 'center',\n-                                fontSize: 13,\n-                                letterSpacing: 1,\n-                                opacity: 0.7,\n-                                margin: 8,\n-                            }}\n-                        >\n-                            OR\n-                        </div>\n-                    ) : null}\n-                    <ActionStep\n-                        key={step.id || step.isNew}\n-                        step={step}\n-                        isEditor={isEditor}\n-                        actionId={action.id}\n-                        simmer={simmer}\n-                        isOnlyStep={action.steps.length === 1}\n-                        onDelete={() => {\n-                            setAction({ ...action, steps: action.steps.filter((s) => s.id != step.id) })\n-                            setEdited(true)\n-                        }}\n-                        onChange={(newStep) => {\n-                            setAction({\n-                                ...action,\n-                                steps: action.steps.map((s) =>\n-                                    (step.id && s.id == step.id) || (step.isNew && s.isNew === step.isNew)\n-                                        ? {\n-                                              id: step.id,\n-                                              isNew: step.isNew,\n-                                              ...newStep,\n-                                          }\n-                                        : s\n-                                ),\n-                            })\n-                            setEdited(true)\n-                        }}\n-                    />\n-                </Fragment>\n-            ))}\n+                <div className=\"match-group-section\" style={{ overflow: 'visible' }}>\n+                    <h2 className=\"subtitle\">Match groups</h2>\n+                    <div>\n+                        Your action will be triggered whenever <b>any of your match groups</b> are received.{' '}\n+                        <a href=\"https://posthog.com/docs/features/actions\" target=\"_blank\">\n+                            <InfoCircleOutlined />\n+                        </a>\n+                    </div>\n+                    <div style={{ textAlign: 'right', marginBottom: 12 }}>{addGroup}</div>\n \n-            {!isEditor ? (\n+                    <Row gutter={[24, 24]}>\n+                        {action.steps.map((step, index) => (\n+                            <ActionStep\n+                                key={step.id || step.isNew}\n+                                identifier={step.id || step.isNew}\n+                                index={index}\n+                                step={step}\n+                                isEditor={false}\n+                                actionId={action.id}\n+                                simmer={simmer}\n+                                isOnlyStep={action.steps.length === 1}\n+                                onDelete={() => {\n+                                    const identifier = step.id ? 'id' : 'isNew'\n+                                    setAction({\n+                                        ...action,\n+                                        steps: action.steps.filter((s) => s[identifier] !== step[identifier]),\n+                                    })\n+                                    setEdited(true)\n+                                }}\n+                                onChange={(newStep) => {\n+                                    setAction({\n+                                        ...action,\n+                                        steps: action.steps.map((s) =>\n+                                            (step.id && s.id == step.id) || (step.isNew && s.isNew === step.isNew)\n+                                                ? {\n+                                                      id: step.id,\n+                                                      isNew: step.isNew,\n+                                                      ...newStep,\n+                                                  }\n+                                                : s\n+                                        ),\n+                                    })\n+                                    setEdited(true)\n+                                }}\n+                            />\n+                        ))}\n+                        <Col span={24} md={12}>\n+                            <div className=\"match-group-add-skeleton\" onClick={newAction}>\n+                                <PlusOutlined style={{ fontSize: 28, color: '#666666' }} />\n+                            </div>\n+                        </Col>\n+                    </Row>\n+                </div>\n                 <div>\n                     <div style={{ margin: '1rem 0' }}>\n                         {user?.is_multi_tenancy && (\n@@ -161,30 +170,25 @@ export function ActionEdit({ actionId, apiURL, onSave, user, isEditor, simmer, t\n                         )}\n                     </div>\n                 </div>\n-            ) : (\n-                <br />\n-            )}\n-\n-            {errorActionId && (\n-                <p className=\"text-danger\">\n-                    Action with this name already exists.{' '}\n-                    <a href={apiURL + 'action/' + errorActionId}>Click here to edit.</a>\n-                </p>\n-            )}\n-\n-            <div>\n-                {addGroup}\n-                <Button\n-                    disabled={!edited}\n-                    data-attr=\"save-action-button\"\n-                    className=\"float-right\"\n-                    type=\"primary\"\n-                    icon={<SaveOutlined />}\n-                    onClick={saveAction}\n-                >\n-                    Save action\n-                </Button>\n-            </div>\n-        </Card>\n+                {errorActionId && (\n+                    <p className=\"text-danger\">\n+                        Action with this name already exists.{' '}\n+                        <a href={apiURL + 'action/' + errorActionId}>Click here to edit.</a>\n+                    </p>\n+                )}\n+                <div>\n+                    <Button\n+                        disabled={!edited}\n+                        data-attr=\"save-action-button\"\n+                        className=\"float-right\"\n+                        type=\"primary\"\n+                        icon={<SaveOutlined />}\n+                        onClick={saveAction}\n+                    >\n+                        Save action\n+                    </Button>\n+                </div>\n+            </form>\n+        </div>\n     )\n }\ndiff --git a/frontend/src/scenes/actions/ActionEditV2.js b/frontend/src/scenes/actions/ActionEditV2.js\ndeleted file mode 100644\nindex 2ba27b105..000000000\n--- a/frontend/src/scenes/actions/ActionEditV2.js\n+++ /dev/null\n@@ -1,196 +0,0 @@\n-// Experiment actions-ux-201012\n-\n-import React, { useState } from 'react'\n-import { uuid, Loading } from 'lib/utils'\n-import { Link } from 'lib/components/Link'\n-import { useValues, useActions } from 'kea'\n-import { actionEditLogic } from './actionEditLogic'\n-import './Actions.scss'\n-import { ActionStep } from './ActionStepV2'\n-import { Alert, Button, Col, Input, Row } from 'antd'\n-import { InfoCircleOutlined, PlusOutlined, SaveOutlined } from '@ant-design/icons'\n-\n-export function ActionEdit({ actionId, apiURL, onSave, user, simmer, temporaryToken }) {\n-    let logic = actionEditLogic({\n-        id: actionId,\n-        apiURL,\n-        onSave: (action, createNew) => onSave(action, !actionId, createNew),\n-        temporaryToken,\n-    })\n-    const { action, actionLoading, errorActionId } = useValues(logic)\n-    const { setAction, saveAction } = useActions(logic)\n-\n-    const [edited, setEdited] = useState(false)\n-    const slackEnabled = user?.team?.slack_incoming_webhook\n-\n-    if (actionLoading || !action) {\n-        return <Loading />\n-    }\n-\n-    const newAction = () => {\n-        setAction({ ...action, steps: [...action.steps, { isNew: uuid() }] })\n-    }\n-\n-    const addGroup = (\n-        <Button onClick={newAction} size=\"small\">\n-            Add another match group\n-        </Button>\n-    )\n-\n-    return (\n-        <div className=\"action-edit-container\">\n-            <form\n-                onSubmit={(e) => {\n-                    e.preventDefault()\n-                    saveAction()\n-                }}\n-            >\n-                <label>Action name:</label>\n-                <Input\n-                    required\n-                    placeholder=\"e.g. user account created, purchase completed, movie watched\"\n-                    value={action.name}\n-                    onChange={(e) => {\n-                        setAction({ ...action, name: e.target.value })\n-                        setEdited(e.target.value ? true : false)\n-                    }}\n-                    data-attr=\"edit-action-input\"\n-                />\n-                {action.count > -1 && (\n-                    <div>\n-                        <small className=\"text-muted\">Matches {action.count} events</small>\n-                    </div>\n-                )}\n-\n-                <div className=\"match-group-section\" style={{ overflow: 'visible' }}>\n-                    <h2 className=\"subtitle\">Match groups</h2>\n-                    <div>\n-                        Your action will be triggered whenever <b>any of your match groups</b> are received.{' '}\n-                        <a href=\"https://posthog.com/docs/features/actions\" target=\"_blank\">\n-                            <InfoCircleOutlined />\n-                        </a>\n-                    </div>\n-                    <div style={{ textAlign: 'right', marginBottom: 12 }}>{addGroup}</div>\n-\n-                    <Row gutter={[24, 24]}>\n-                        {action.steps.map((step, index) => (\n-                            <ActionStep\n-                                key={step.id || step.isNew}\n-                                identifier={step.id || step.isNew}\n-                                index={index}\n-                                step={step}\n-                                isEditor={false}\n-                                actionId={action.id}\n-                                simmer={simmer}\n-                                isOnlyStep={action.steps.length === 1}\n-                                onDelete={() => {\n-                                    const identifier = step.id ? 'id' : 'isNew'\n-                                    setAction({\n-                                        ...action,\n-                                        steps: action.steps.filter((s) => s[identifier] !== step[identifier]),\n-                                    })\n-                                    setEdited(true)\n-                                }}\n-                                onChange={(newStep) => {\n-                                    setAction({\n-                                        ...action,\n-                                        steps: action.steps.map((s) =>\n-                                            (step.id && s.id == step.id) || (step.isNew && s.isNew === step.isNew)\n-                                                ? {\n-                                                      id: step.id,\n-                                                      isNew: step.isNew,\n-                                                      ...newStep,\n-                                                  }\n-                                                : s\n-                                        ),\n-                                    })\n-                                    setEdited(true)\n-                                }}\n-                            />\n-                        ))}\n-                        <Col span={24} md={12}>\n-                            <div className=\"match-group-add-skeleton\" onClick={newAction}>\n-                                <PlusOutlined style={{ fontSize: 28, color: '#666666' }} />\n-                            </div>\n-                        </Col>\n-                    </Row>\n-                </div>\n-                <div>\n-                    <div style={{ margin: '1rem 0' }}>\n-                        {user?.is_multi_tenancy && (\n-                            <Alert\n-                                style={{ marginBottom: '1rem' }}\n-                                message=\"Webhooks are currently unavailable on PostHog Cloud. The feature will be back online soon.\"\n-                                type=\"warning\"\n-                            />\n-                        )}\n-                        <p>\n-                            <input\n-                                id=\"webhook-checkbox\"\n-                                type=\"checkbox\"\n-                                onChange={(e) => {\n-                                    setAction({ ...action, post_to_slack: e.target.checked })\n-                                    setEdited(true)\n-                                }}\n-                                checked={!!action.post_to_slack}\n-                                disabled={!slackEnabled || user.is_multi_tenancy}\n-                            />\n-                            <label\n-                                className={slackEnabled ? '' : 'disabled'}\n-                                style={{ marginLeft: '0.5rem', marginBottom: '0.5rem' }}\n-                                htmlFor=\"webhook-checkbox\"\n-                            >\n-                                Post to webhook when this action is triggered.\n-                            </label>{' '}\n-                            <Link to=\"/project/settings#webhook\">\n-                                {slackEnabled ? 'Configure' : 'Enable'} this integration in Setup.\n-                            </Link>\n-                        </p>\n-                        {action.post_to_slack && (\n-                            <>\n-                                <Input\n-                                    addonBefore=\"Message format (optional)\"\n-                                    placeholder=\"Default: [action.name] triggered by [user.name]\"\n-                                    value={action.slack_message_format}\n-                                    onChange={(e) => {\n-                                        setAction({ ...action, slack_message_format: e.target.value })\n-                                        setEdited(true)\n-                                    }}\n-                                    disabled={!slackEnabled || !action.post_to_slack || user.is_multi_tenancy}\n-                                    data-attr=\"edit-slack-message-format\"\n-                                />\n-                                <small>\n-                                    <a\n-                                        href=\"https://posthog.com/docs/integrations/message-formatting/\"\n-                                        target=\"_blank\"\n-                                        rel=\"noopener noreferrer\"\n-                                    >\n-                                        See documentation on how to format webhook messages.\n-                                    </a>\n-                                </small>\n-                            </>\n-                        )}\n-                    </div>\n-                </div>\n-                {errorActionId && (\n-                    <p className=\"text-danger\">\n-                        Action with this name already exists.{' '}\n-                        <a href={apiURL + 'action/' + errorActionId}>Click here to edit.</a>\n-                    </p>\n-                )}\n-                <div>\n-                    <Button\n-                        disabled={!edited}\n-                        data-attr=\"save-action-button\"\n-                        className=\"float-right\"\n-                        type=\"primary\"\n-                        icon={<SaveOutlined />}\n-                        onClick={saveAction}\n-                    >\n-                        Save action\n-                    </Button>\n-                </div>\n-            </form>\n-        </div>\n-    )\n-}\ndiff --git a/frontend/src/scenes/actions/ActionStep.js b/frontend/src/scenes/actions/ActionStep.js\nindex a590ad1db..6460726ee 100644\n--- a/frontend/src/scenes/actions/ActionStep.js\n+++ b/frontend/src/scenes/actions/ActionStep.js\n@@ -4,8 +4,8 @@ import { AppEditorLink } from 'lib/components/AppEditorLink/AppEditorLink'\n import { PropertyFilters } from 'lib/components/PropertyFilters/PropertyFilters'\n import PropTypes from 'prop-types'\n import { URL_MATCHING_HINTS } from 'scenes/actions/hints'\n+import { Card, Checkbox, Col, Input, Radio } from 'antd'\n import { ExportOutlined } from '@ant-design/icons'\n-import { Button, Card, Checkbox, Input, Radio } from 'antd'\n \n let getSafeText = (el) => {\n     if (!el.childNodes || !el.childNodes.length) {\n@@ -137,22 +137,11 @@ export class ActionStep extends Component {\n                 this.sendStep(this.props.step)\n             }\n         }\n-        let selectorError, matches\n-        try {\n-            matches = document.querySelectorAll(props.selector).length\n-        } catch {\n-            selectorError = true\n-        }\n+\n         return (\n             <div className={'mb ' + (this.state.selection.indexOf(props.item) > -1 && 'selected')}>\n-                {props.selector && this.props.isEditor && (\n-                    <small className={'form-text float-right ' + (selectorError ? 'text-danger' : 'text-muted')}>\n-                        {selectorError ? 'Invalid selector' : `Matches ${matches} elements`}\n-                    </small>\n-                )}\n                 <label>\n                     <Checkbox\n-                        name=\"selection\"\n                         checked={this.state.selection.indexOf(props.item) > -1}\n                         value={props.item}\n                         onChange={(e) => {\n@@ -180,7 +169,7 @@ export class ActionStep extends Component {\n         )\n     }\n     TypeSwitcher = () => {\n-        let { step, isEditor } = this.props\n+        let { step } = this.props\n         const handleChange = (e) => {\n             const type = e.target.value\n             if (type === '$autocapture') {\n@@ -190,23 +179,21 @@ export class ActionStep extends Component {\n                     },\n                     () => this.sendStep({ ...step, event: '$autocapture' })\n                 )\n+            } else if (type === 'event') {\n+                this.setState({ selection: [] }, () => this.sendStep({ ...step, event: '' }))\n             } else if (type === '$pageview') {\n                 this.setState({ selection: ['url'] }, () =>\n                     this.sendStep({\n                         ...step,\n                         event: '$pageview',\n-                        url: isEditor\n-                            ? window.location.protocol + '//' + window.location.host + window.location.pathname\n-                            : step.url,\n+                        url: step.url,\n                     })\n                 )\n-            } else {\n-                this.setState({ selection: [] }, () => this.sendStep({ ...step, event: '' }))\n             }\n         }\n \n         return (\n-            <div>\n+            <div className={`type-switcher${step.event === undefined ? ' unselected' : ''}`}>\n                 <Radio.Group\n                     buttonStyle=\"solid\"\n                     onChange={handleChange}\n@@ -216,43 +203,49 @@ export class ActionStep extends Component {\n                             : 'event'\n                     }\n                 >\n-                    <Radio.Button value=\"$autocapture\">Frontend element</Radio.Button>\n+                    <Radio.Button value=\"$autocapture\">Autocapture</Radio.Button>\n                     <Radio.Button value=\"event\">Custom event</Radio.Button>\n                     <Radio.Button value=\"$pageview\">Page view</Radio.Button>\n                 </Radio.Group>\n             </div>\n         )\n     }\n-    AutocaptureFields({ step, isEditor, actionId }) {\n+    AutocaptureFields({ step, actionId }) {\n+        const AndC = () => {\n+            return (\n+                <div className=\"text-center\">\n+                    <span className=\"match-condition-badge mc-and\">AND</span>\n+                </div>\n+            )\n+        }\n         return (\n             <div>\n-                {!isEditor && (\n-                    <span>\n-                        <AppEditorLink actionId={actionId} style={{ margin: '1rem 0' }}>\n-                            Select element on site <ExportOutlined />\n-                        </AppEditorLink>\n-                        <a\n-                            href=\"https://posthog.com/docs/features/actions\"\n-                            target=\"_blank\"\n-                            rel=\"noopener noreferrer\"\n-                            style={{ marginLeft: 8 }}\n-                        >\n-                            See documentation.\n-                        </a>{' '}\n-                    </span>\n-                )}\n+                <span>\n+                    <AppEditorLink actionId={actionId} style={{ margin: '1rem 0' }}>\n+                        Select element on site <ExportOutlined />\n+                    </AppEditorLink>\n+                    <a\n+                        href=\"https://posthog.com/docs/features/actions\"\n+                        target=\"_blank\"\n+                        rel=\"noopener noreferrer\"\n+                        style={{ marginLeft: 8 }}\n+                    >\n+                        See documentation.\n+                    </a>{' '}\n+                </span>\n                 <this.Option\n                     item=\"href\"\n-                    label=\"Link href\"\n+                    label=\"Link href equals\"\n                     selector={this.state.element && 'a[href=\"' + this.state.element.getAttribute('href') + '\"]'}\n                 />\n-                <this.Option item=\"text\" label=\"Text\" />\n-                <this.Option item=\"selector\" label=\"Selector\" selector={step.selector} />\n-                <this.Option\n-                    item=\"url\"\n-                    extra_options={<this.URLMatching step={step} isEditor={isEditor} />}\n-                    label=\"URL\"\n-                />\n+                <AndC />\n+                <this.Option item=\"text\" label=\"Text equals\" />\n+                <AndC />\n+                <this.Option item=\"selector\" label=\"HTML selector matches\" selector={step.selector} />\n+                <div style={{ marginBottom: 18 }}>\n+                    <AndC />\n+                </div>\n+                <this.Option item=\"url\" extra_options={<this.URLMatching step={step} />} label=\"URL\" />\n                 {step?.url_matching && step.url_matching in URL_MATCHING_HINTS && (\n                     <small style={{ display: 'block', marginTop: -12 }}>{URL_MATCHING_HINTS[step.url_matching]}</small>\n                 )}\n@@ -263,7 +256,6 @@ export class ActionStep extends Component {\n         const handleURLMatchChange = (e) => {\n             this.sendStep({ ...step, url_matching: e.target.value })\n         }\n-\n         return (\n             <Radio.Group\n                 buttonStyle=\"solid\"\n@@ -279,105 +271,91 @@ export class ActionStep extends Component {\n         )\n     }\n     render() {\n-        let { step, isEditor, actionId, isOnlyStep } = this.props\n+        let { step, actionId, isOnlyStep, index, identifier, onDelete } = this.props\n \n         return (\n-            <Card\n-                style={{\n-                    marginBottom: 0,\n-                    background: isEditor ? 'rgba(0,0,0,0.05)' : '',\n-                }}\n-            >\n-                <div>\n-                    {!isOnlyStep && (!isEditor || step.event === '$autocapture' || !step.event) && (\n-                        <button\n+            <Col span={24} md={12}>\n+                <Card className=\"action-step\" style={{ overflow: 'visible' }}>\n+                    {index > 0 && <div className=\"match-condition-badge mc-main mc-or\">OR</div>}\n+                    <div>\n+                        {!isOnlyStep && (\n+                            <div className=\"remove-wrapper\">\n+                                <button type=\"button\" aria-label=\"delete\" onClick={onDelete}>\n+                                    <span aria-hidden=\"true\">&times;</span>\n+                                </button>\n+                            </div>\n+                        )}\n+                        <div className=\"mb\">\n+                            <b>Match Group #{this.props.index + 1}</b>\n+                        </div>\n+                        {<this.TypeSwitcher />}\n+                        <div\n                             style={{\n-                                border: 0,\n-                                float: 'right',\n-                                color: 'hsl(0, 0%, 80%)',\n+                                marginTop: step.event === '$pageview' ? 20 : 8,\n+                                paddingBottom: 0,\n                             }}\n-                            type=\"button\"\n-                            aria-label=\"Close\"\n-                            onClick={this.props.onDelete}\n                         >\n-                            <span aria-hidden=\"true\">&times;</span>\n-                        </button>\n-                    )}\n-                    {!isEditor && <this.TypeSwitcher />}\n-                    <div\n-                        style={{\n-                            marginTop: step.event === '$pageview' && !isEditor ? 20 : 8,\n-                            paddingBottom: isEditor ? 1 : 0,\n-                        }}\n-                    >\n-                        {isEditor && [\n-                            <Button\n-                                key=\"inspect-button\"\n-                                size=\"small\"\n-                                style={{ margin: '10px 0px 10px 12px' }}\n-                                onClick={() => this.start()}\n-                            >\n-                                Inspect element\n-                            </Button>,\n-                            this.state.inspecting && (\n-                                <p key=\"inspect-prompt\" style={{ marginLeft: 10, marginRight: 10 }}>\n-                                    Hover over and click on an element you want to create an action for\n-                                </p>\n-                            ),\n-                        ]}\n+                            {step.event === '$autocapture' && (\n+                                <this.AutocaptureFields step={step} actionId={actionId} />\n+                            )}\n+                            {step.event != null && step.event !== '$autocapture' && step.event !== '$pageview' && (\n+                                <div style={{ marginTop: '2rem' }}>\n+                                    <label>Event name: {step.event}</label>\n+                                    <EventName\n+                                        value={step.event}\n+                                        isActionStep={true}\n+                                        onChange={(value) =>\n+                                            this.sendStep({\n+                                                ...step,\n+                                                event: value,\n+                                            })\n+                                        }\n+                                    />\n+                                </div>\n+                            )}\n+                            {step.event === '$pageview' && (\n+                                <div>\n+                                    <this.Option\n+                                        item=\"url\"\n+                                        extra_options={<this.URLMatching step={step} />}\n+                                        label=\"URL\"\n+                                    />\n+                                    {step.url_matching && step.url_matching in URL_MATCHING_HINTS && (\n+                                        <small style={{ display: 'block', marginTop: -12 }}>\n+                                            {URL_MATCHING_HINTS[step.url_matching]}\n+                                        </small>\n+                                    )}\n+                                </div>\n+                            )}\n \n-                        {step.event === '$autocapture' && (\n-                            <this.AutocaptureFields step={step} isEditor={isEditor} actionId={actionId} />\n-                        )}\n-                        {step.event != null && step.event !== '$autocapture' && step.event !== '$pageview' && (\n-                            <div style={{ marginTop: '2rem' }}>\n-                                <label>Event name: {step.event}</label>\n-                                <EventName\n-                                    value={step.event}\n-                                    isActionStep={true}\n-                                    onChange={(value) =>\n-                                        this.sendStep({\n-                                            ...step,\n-                                            event: value,\n-                                        })\n-                                    }\n-                                />\n-                            </div>\n-                        )}\n-                        {step.event === '$pageview' && (\n-                            <div>\n-                                <this.Option\n-                                    item=\"url\"\n-                                    extra_options={<this.URLMatching step={step} isEditor={isEditor} />}\n-                                    label=\"URL\"\n-                                />\n-                                {step.url_matching && step.url_matching in URL_MATCHING_HINTS && (\n-                                    <small style={{ display: 'block', marginTop: -12 }}>\n-                                        {URL_MATCHING_HINTS[step.url_matching]}\n-                                    </small>\n-                                )}\n-                            </div>\n-                        )}\n-                        {!isEditor && (\n-                            <PropertyFilters\n-                                propertyFilters={step.properties}\n-                                pageKey={'action-edit'}\n-                                onChange={(properties) => {\n-                                    this.sendStep({\n-                                        ...this.props.step, // Not sure why, but the normal 'step' variable does not work here\n-                                        properties,\n-                                    })\n-                                }}\n-                            />\n-                        )}\n+                            {step.event && (\n+                                <div className=\"property-filters\">\n+                                    <h3 className=\"l3\">Filters</h3>\n+                                    {(!step.properties || step.properties.length === 0) && (\n+                                        <div className=\"text-muted\">This match group has no additional filters.</div>\n+                                    )}\n+                                    <PropertyFilters\n+                                        propertyFilters={step.properties}\n+                                        pageKey={identifier}\n+                                        onChange={(properties) => {\n+                                            this.sendStep({\n+                                                ...this.props.step, // Not sure why, but the normal 'step' variable does not work here\n+                                                properties,\n+                                            })\n+                                        }}\n+                                        showConditionBadges\n+                                    />\n+                                </div>\n+                            )}\n+                        </div>\n                     </div>\n-                </div>\n-            </Card>\n+                </Card>\n+            </Col>\n         )\n     }\n }\n ActionStep.propTypes = {\n-    isEditor: PropTypes.bool,\n     step: PropTypes.object,\n     simmer: PropTypes.func,\n+    index: PropTypes.number.isRequired,\n }\ndiff --git a/frontend/src/scenes/actions/ActionStepV2.js b/frontend/src/scenes/actions/ActionStepV2.js\ndeleted file mode 100644\nindex 3eb2d9fe9..000000000\n--- a/frontend/src/scenes/actions/ActionStepV2.js\n+++ /dev/null\n@@ -1,358 +0,0 @@\n-import React, { Component } from 'react'\n-import { EventName } from './EventName'\n-import { AppEditorLink } from 'lib/components/AppEditorLink/AppEditorLink'\n-import { PropertyFilters } from 'lib/components/PropertyFilters/PropertyFilters'\n-import PropTypes from 'prop-types'\n-import { URL_MATCHING_HINTS } from 'scenes/actions/hints'\n-import { Card, Checkbox, Col, Input, Radio } from 'antd'\n-import { ExportOutlined } from '@ant-design/icons'\n-\n-let getSafeText = (el) => {\n-    if (!el.childNodes || !el.childNodes.length) {\n-        return\n-    }\n-    let elText = ''\n-    el.childNodes.forEach((child) => {\n-        if (child.nodeType !== 3 || !child.textContent) {\n-            return\n-        }\n-        elText += child.textContent\n-            .trim()\n-            .replace(/[\\r\\n]/g, ' ')\n-            .replace(/[ ]+/g, ' ') // normalize whitespace\n-            .substring(0, 255)\n-    })\n-    return elText\n-}\n-\n-export class ActionStep extends Component {\n-    constructor(props) {\n-        super(props)\n-        this.state = {\n-            step: props.step,\n-            selection: Object.keys(props.step).filter((key) => key !== 'id' && key !== 'isNew' && props.step[key]),\n-            inspecting: false,\n-        }\n-        this.AutocaptureFields = this.AutocaptureFields.bind(this)\n-\n-        this.box = document.createElement('div')\n-        document.body.appendChild(this.box)\n-    }\n-    drawBox(element) {\n-        let rect = element.getBoundingClientRect()\n-        this.box.style.display = 'block'\n-        this.box.style.position = 'absolute'\n-        this.box.style.top = `${rect.top + window.pageYOffset}px`\n-        this.box.style.left = `${rect.left + window.pageXOffset}px`\n-        this.box.style.width = `${rect.right - rect.left}px`\n-        this.box.style.height = `${rect.bottom - rect.top}px`\n-        this.box.style.background = '#007bff'\n-        this.box.style.opacity = '0.5'\n-        this.box.style.zIndex = '9999999999'\n-    }\n-    onMouseOver = (event) => {\n-        let el = event.currentTarget\n-        this.drawBox(el)\n-        let query = this.props.simmer(el)\n-        // Turn tags into lower cases\n-        query = query.replace(/(^[A-Z]+| [A-Z]+)/g, (d) => d.toLowerCase())\n-        let tagName = el.tagName.toLowerCase()\n-\n-        let selection = ['selector']\n-        if (tagName === 'a') {\n-            selection = ['href', 'selector']\n-        } else if (tagName === 'button') {\n-            selection = ['text', 'selector']\n-        } else if (el.getAttribute('name')) {\n-            selection = ['name', 'selector']\n-        }\n-        let step = {\n-            ...this.props.step,\n-            event: '$autocapture',\n-            tag_name: tagName,\n-            href: el.getAttribute('href') || '',\n-            name: el.getAttribute('name') || '',\n-            text: getSafeText(el) || '',\n-            selector: query || '',\n-            url: window.location.protocol + '//' + window.location.host + window.location.pathname,\n-        }\n-        this.setState(\n-            {\n-                element: el,\n-                selection,\n-            },\n-            () => this.sendStep(step)\n-        )\n-    }\n-    onKeyDown = (event) => {\n-        // stop selecting if esc key was pressed\n-        if (event.keyCode === 27) {\n-            this.stop()\n-        }\n-    }\n-    start() {\n-        this.setState({ inspecting: true })\n-        document.querySelectorAll('a, button, input, select, textarea, label').forEach((element) => {\n-            element.addEventListener('mouseover', this.onMouseOver, {\n-                capture: true,\n-            })\n-        })\n-        document.addEventListener('keydown', this.onKeyDown)\n-        document.body.style.transition = '0.7s box-shadow'\n-        // document.body.style.boxShadow = 'inset 0 0px 13px -2px #dc3545';\n-        document.body.style.boxShadow = 'inset 0 0px 30px -5px #007bff'\n-        this.box.addEventListener('click', this.stop)\n-    }\n-    stop = () => {\n-        this.setState({ inspecting: false })\n-        this.box.style.display = 'none'\n-        document.body.style.boxShadow = 'none'\n-        document.querySelectorAll('a, button, input, select, textarea, label').forEach((element) => {\n-            element.removeEventListener('mouseover', this.onMouseOver, {\n-                capture: true,\n-            })\n-        })\n-        document.removeEventListener('keydown', this.onKeyDown)\n-    }\n-    sendStep = (step) => {\n-        step.selection = this.state.selection\n-        this.props.onChange(step)\n-    }\n-    Option = (props) => {\n-        let onChange = (e) => {\n-            this.props.step[props.item] = e.target.value\n-\n-            if (e.target.value && this.state.selection.indexOf(props.item) === -1) {\n-                this.setState({ selection: this.state.selection.concat([props.item]) }, () =>\n-                    this.sendStep(this.props.step)\n-                )\n-            } else if (!e.target.value && this.state.selection.indexOf(props.item) > -1) {\n-                this.setState(\n-                    {\n-                        selection: this.state.selection.filter((i) => i !== props.item),\n-                    },\n-                    () => this.sendStep(this.props.step)\n-                )\n-            } else {\n-                this.sendStep(this.props.step)\n-            }\n-        }\n-\n-        return (\n-            <div className={'mb ' + (this.state.selection.indexOf(props.item) > -1 && 'selected')}>\n-                <label>\n-                    <Checkbox\n-                        checked={this.state.selection.indexOf(props.item) > -1}\n-                        value={props.item}\n-                        onChange={(e) => {\n-                            let { selection } = this.state\n-                            if (e.target.checked) {\n-                                selection.push(props.item)\n-                            } else {\n-                                selection = selection.filter((i) => i !== props.item)\n-                            }\n-                            this.setState({ selection }, () => this.sendStep(this.props.step))\n-                        }}\n-                    />{' '}\n-                    {props.label} {props.extra_options}\n-                </label>\n-                {props.item === 'selector' ? (\n-                    <Input.TextArea onChange={onChange} value={this.props.step[props.item] || ''} />\n-                ) : (\n-                    <Input\n-                        data-attr=\"edit-action-url-input\"\n-                        onChange={onChange}\n-                        value={this.props.step[props.item] || ''}\n-                    />\n-                )}\n-            </div>\n-        )\n-    }\n-    TypeSwitcher = () => {\n-        let { step } = this.props\n-        const handleChange = (e) => {\n-            const type = e.target.value\n-            if (type === '$autocapture') {\n-                this.setState(\n-                    {\n-                        selection: Object.keys(step).filter((key) => key !== 'id' && key !== 'isNew' && step[key]),\n-                    },\n-                    () => this.sendStep({ ...step, event: '$autocapture' })\n-                )\n-            } else if (type === 'event') {\n-                this.setState({ selection: [] }, () => this.sendStep({ ...step, event: '' }))\n-            } else if (type === '$pageview') {\n-                this.setState({ selection: ['url'] }, () =>\n-                    this.sendStep({\n-                        ...step,\n-                        event: '$pageview',\n-                        url: step.url,\n-                    })\n-                )\n-            }\n-        }\n-\n-        return (\n-            <div>\n-                <Radio.Group\n-                    buttonStyle=\"solid\"\n-                    onChange={handleChange}\n-                    value={\n-                        step.event === '$autocapture' || step.event === '$pageview' || step.event === undefined\n-                            ? step.event\n-                            : 'event'\n-                    }\n-                >\n-                    <Radio.Button value=\"$autocapture\">Autocapture</Radio.Button>\n-                    <Radio.Button value=\"event\">Custom event</Radio.Button>\n-                    <Radio.Button value=\"$pageview\">Page view</Radio.Button>\n-                </Radio.Group>\n-            </div>\n-        )\n-    }\n-    AutocaptureFields({ step, actionId }) {\n-        const AndC = () => {\n-            return (\n-                <div className=\"text-center\">\n-                    <span className=\"match-condition-badge mc-and\">AND</span>\n-                </div>\n-            )\n-        }\n-        return (\n-            <div>\n-                <span>\n-                    <AppEditorLink actionId={actionId} style={{ margin: '1rem 0' }}>\n-                        Select element on site <ExportOutlined />\n-                    </AppEditorLink>\n-                    <a\n-                        href=\"https://posthog.com/docs/features/actions\"\n-                        target=\"_blank\"\n-                        rel=\"noopener noreferrer\"\n-                        style={{ marginLeft: 8 }}\n-                    >\n-                        See documentation.\n-                    </a>{' '}\n-                </span>\n-                <this.Option\n-                    item=\"href\"\n-                    label=\"Link href equals\"\n-                    selector={this.state.element && 'a[href=\"' + this.state.element.getAttribute('href') + '\"]'}\n-                />\n-                <AndC />\n-                <this.Option item=\"text\" label=\"Text equals\" />\n-                <AndC />\n-                <this.Option item=\"selector\" label=\"HTML selector matches\" selector={step.selector} />\n-                <div style={{ marginBottom: 18 }}>\n-                    <AndC />\n-                </div>\n-                <this.Option item=\"url\" extra_options={<this.URLMatching step={step} />} label=\"URL\" />\n-                {step?.url_matching && step.url_matching in URL_MATCHING_HINTS && (\n-                    <small style={{ display: 'block', marginTop: -12 }}>{URL_MATCHING_HINTS[step.url_matching]}</small>\n-                )}\n-            </div>\n-        )\n-    }\n-    URLMatching = ({ step }) => {\n-        const handleURLMatchChange = (e) => {\n-            this.sendStep({ ...step, url_matching: e.target.value })\n-        }\n-        return (\n-            <Radio.Group\n-                buttonStyle=\"solid\"\n-                onChange={handleURLMatchChange}\n-                value={step.url_matching || 'contains'}\n-                size=\"small\"\n-                style={{ paddingBottom: 16 }}\n-            >\n-                <Radio.Button value=\"contains\">contains</Radio.Button>\n-                <Radio.Button value=\"regex\">matches regex</Radio.Button>\n-                <Radio.Button value=\"exact\">matches exactly</Radio.Button>\n-            </Radio.Group>\n-        )\n-    }\n-    render() {\n-        let { step, actionId, isOnlyStep, index, identifier, onDelete } = this.props\n-\n-        return (\n-            <Col span={24} md={12}>\n-                <Card className=\"action-step\" style={{ overflow: 'visible' }}>\n-                    {index > 0 && <div className=\"match-condition-badge mc-main mc-or\">OR</div>}\n-                    <div>\n-                        {!isOnlyStep && (\n-                            <div className=\"remove-wrapper\">\n-                                <button type=\"button\" aria-label=\"delete\" onClick={onDelete}>\n-                                    <span aria-hidden=\"true\">&times;</span>\n-                                </button>\n-                            </div>\n-                        )}\n-                        {<this.TypeSwitcher />}\n-                        <div\n-                            style={{\n-                                marginTop: step.event === '$pageview' ? 20 : 8,\n-                                paddingBottom: 0,\n-                            }}\n-                        >\n-                            {step.event === '$autocapture' && (\n-                                <this.AutocaptureFields step={step} actionId={actionId} />\n-                            )}\n-                            {step.event != null && step.event !== '$autocapture' && step.event !== '$pageview' && (\n-                                <div style={{ marginTop: '2rem' }}>\n-                                    <label>Event name: {step.event}</label>\n-                                    <EventName\n-                                        value={step.event}\n-                                        isActionStep={true}\n-                                        onChange={(value) =>\n-                                            this.sendStep({\n-                                                ...step,\n-                                                event: value,\n-                                            })\n-                                        }\n-                                    />\n-                                </div>\n-                            )}\n-                            {step.event === '$pageview' && (\n-                                <div>\n-                                    <this.Option\n-                                        item=\"url\"\n-                                        extra_options={<this.URLMatching step={step} />}\n-                                        label=\"URL\"\n-                                    />\n-                                    {step.url_matching && step.url_matching in URL_MATCHING_HINTS && (\n-                                        <small style={{ display: 'block', marginTop: -12 }}>\n-                                            {URL_MATCHING_HINTS[step.url_matching]}\n-                                        </small>\n-                                    )}\n-                                </div>\n-                            )}\n-\n-                            {step.event && (\n-                                <div className=\"property-filters\">\n-                                    <h3 className=\"l3\">Filters</h3>\n-                                    {(!step.properties || step.properties.length === 0) && (\n-                                        <div className=\"text-muted\">This match group has no additional filters.</div>\n-                                    )}\n-                                    <PropertyFilters\n-                                        propertyFilters={step.properties}\n-                                        pageKey={identifier}\n-                                        onChange={(properties) => {\n-                                            this.sendStep({\n-                                                ...this.props.step, // Not sure why, but the normal 'step' variable does not work here\n-                                                properties,\n-                                            })\n-                                        }}\n-                                        showConditionBadges\n-                                    />\n-                                </div>\n-                            )}\n-                        </div>\n-                    </div>\n-                </Card>\n-            </Col>\n-        )\n-    }\n-}\n-ActionStep.propTypes = {\n-    step: PropTypes.object,\n-    simmer: PropTypes.func,\n-    index: PropTypes.number.isRequired,\n-}\ndiff --git a/frontend/src/scenes/actions/Actions.scss b/frontend/src/scenes/actions/Actions.scss\nindex c42832c1a..3ea2dbcda 100644\n--- a/frontend/src/scenes/actions/Actions.scss\n+++ b/frontend/src/scenes/actions/Actions.scss\n@@ -58,7 +58,7 @@\n     }\n }\n \n-// ActionStepV2.js\n+// ActionStep\n .action-step {\n     margin-bottom: 0;\n     height: 100%;\n@@ -80,12 +80,12 @@\n     }\n \n     .type-switcher {\n-        width: 100%;\n-        margin-top: 16px;\n-\n-        button {\n-            flex: 1;\n-            font-size: 0.85rem;\n+        &.unselected {\n+            position: absolute;\n+            top: 50%;\n+            transform: translateY(-50%);\n+            width: 100%;\n+            text-align: center;\n         }\n     }\n \ndiff --git a/frontend/src/scenes/actions/ActionsTable.js b/frontend/src/scenes/actions/ActionsTable.js\nindex b2f3d3e6a..80851581f 100644\n--- a/frontend/src/scenes/actions/ActionsTable.js\n+++ b/frontend/src/scenes/actions/ActionsTable.js\n@@ -7,7 +7,6 @@ import { DeleteWithUndo } from 'lib/utils'\n import { useActions, useValues } from 'kea'\n import { actionsModel } from '~/models/actionsModel'\n import { NewActionButton } from './NewActionButton'\n-import { featureFlagLogic } from 'lib/logic/featureFlagLogic'\n import moment from 'moment'\n import imgGrouping from 'public/actions-tutorial-grouping.svg'\n import imgStandardized from 'public/actions-tutorial-standardized.svg'\n@@ -16,11 +15,10 @@ import imgRetroactive from 'public/actions-tutorial-retroactive.svg'\n export function ActionsTable() {\n     const { actions, actionsLoading } = useValues(actionsModel({ params: 'include_count=1' }))\n     const { loadActions } = useActions(actionsModel)\n-    const { featureFlags } = useValues(featureFlagLogic)\n \n     let columns = [\n         {\n-            title: !featureFlags['actions-ux-201012'] ? 'Action ID' : 'Name',\n+            title: 'Name',\n             dataIndex: 'name',\n             key: 'name',\n             render: function RenderName(_, action, index) {\n@@ -94,7 +92,7 @@ export function ActionsTable() {\n             },\n         },\n         {\n-            title: !featureFlags['actions-ux-201012'] ? 'Actions' : '',\n+            title: '',\n             render: function RenderActions(action) {\n                 return (\n                     <span>\ndiff --git a/frontend/src/scenes/actions/actionEditLogic.js b/frontend/src/scenes/actions/actionEditLogic.js\nindex d35eee4d3..680cb1ece 100644\n--- a/frontend/src/scenes/actions/actionEditLogic.js\n+++ b/frontend/src/scenes/actions/actionEditLogic.js\n@@ -45,24 +45,31 @@ export const actionEditLogic = kea({\n     listeners: ({ values, props, actions }) => ({\n         saveAction: async () => {\n             let action = { ...values.action }\n-            action.steps = action.steps.map((step) => {\n-                let localStep = { ...step }\n-                if (localStep.event == '$pageview') {\n-                    localStep.selection = ['url', 'url_matching', 'properties']\n-                }\n-                if (localStep.event != '$pageview' && localStep.event != '$autocapture') {\n-                    localStep.selection = ['properties']\n-                }\n-                if (!localStep.selection) {\n-                    return localStep\n-                }\n-                let data = {}\n-                Object.keys(localStep).map((key) => {\n-                    data[key] =\n-                        key == 'id' || key == 'event' || localStep.selection.indexOf(key) > -1 ? localStep[key] : null\n+            action.steps = action.steps\n+                .map((step) => {\n+                    const localStep = { ...step }\n+                    if (localStep.event == '$pageview') {\n+                        localStep.selection = ['url', 'url_matching', 'properties']\n+                    }\n+                    if (localStep.event != '$pageview' && localStep.event != '$autocapture') {\n+                        localStep.selection = ['properties']\n+                    }\n+                    if (!localStep.selection) {\n+                        return localStep\n+                    }\n+                    const data = {}\n+                    Object.keys(localStep).map((key) => {\n+                        data[key] =\n+                            key == 'id' || key == 'event' || localStep.selection.indexOf(key) > -1\n+                                ? localStep[key]\n+                                : null\n+                    })\n+                    return data\n+                })\n+                .filter((step) => {\n+                    // Will discard any match groups that were added but for which a type of event selection has not been made\n+                    return step.selection || step.event\n                 })\n-                return data\n-            })\n             try {\n                 let token = props.temporaryToken ? '?temporary_token=' + props.temporaryToken : ''\n                 if (action.id) {\ndiff --git a/frontend/src/scenes/insights/ActionFilter/ActionFilter.js b/frontend/src/scenes/insights/ActionFilter/ActionFilter.js\nindex 988c91bc1..edd34d920 100644\n--- a/frontend/src/scenes/insights/ActionFilter/ActionFilter.js\n+++ b/frontend/src/scenes/insights/ActionFilter/ActionFilter.js\n@@ -3,7 +3,6 @@ import { useActions, useValues } from 'kea'\n import { entityFilterLogic } from './entityFilterLogic'\n import { ActionFilterRow } from './ActionFilterRow'\n import { Button } from 'antd'\n-import { featureFlagLogic } from 'lib/logic/featureFlagLogic'\n import { PlusCircleOutlined } from '@ant-design/icons'\n \n export function ActionFilter({ setFilters, filters, typeKey, hideMathSelector, copy = '', disabled = false }) {\n@@ -11,7 +10,6 @@ export function ActionFilter({ setFilters, filters, typeKey, hideMathSelector, c\n \n     const { localFilters } = useValues(logic)\n     const { addFilter, setLocalFilters } = useActions(logic)\n-    const { featureFlags } = useValues(featureFlagLogic)\n \n     // No way around this. Somehow the ordering of the logic calling each other causes stale \"localFilters\"\n     // to be shown on the /funnels page, even if we try to use a selector with props to hydrate it\n@@ -37,10 +35,10 @@ export function ActionFilter({ setFilters, filters, typeKey, hideMathSelector, c\n                     onClick={() => addFilter()}\n                     style={{ marginTop: '0.5rem' }}\n                     data-attr=\"add-action-event-button\"\n-                    icon={featureFlags['actions-ux-201012'] && <PlusCircleOutlined />}\n+                    icon={<PlusCircleOutlined />}\n                     disabled={disabled}\n                 >\n-                    {!featureFlags['actions-ux-201012'] ? 'Add action/event' : copy || 'Action or raw event'}\n+                    {copy || 'Action or event'}\n                 </Button>\n             </div>\n         </div>\ndiff --git a/posthog/models/team.py b/posthog/models/team.py\nindex 97a97a13a..e259d95da 100644\n--- a/posthog/models/team.py\n+++ b/posthog/models/team.py\n@@ -1,4 +1,4 @@\n-from typing import Any, Dict, List, Optional\n+from typing import Dict, Optional\n \n import posthoganalytics\n from django.contrib.postgres.fields import ArrayField, JSONField\n@@ -8,8 +8,6 @@ from django.utils import timezone\n from posthog.constants import TREND_FILTER_TYPE_EVENTS, TRENDS_LINEAR\n from posthog.helpers.dashboard_templates import create_dashboard_from_template\n \n-from .action import Action\n-from .action_step import ActionStep\n from .dashboard import Dashboard\n from .dashboard_item import DashboardItem\n from .personal_api_key import PersonalAPIKey\n@@ -22,11 +20,6 @@ class TeamManager(models.Manager):\n     def create_with_data(self, user=None, **kwargs) -> \"Team\":\n         team = Team.objects.create(**kwargs)\n \n-        if not user or not posthoganalytics.feature_enabled(\"actions-ux-201012\", user.distinct_id):\n-            # Don't create default `Pageviews` action on actions-ux-201012 feature flag\n-            action = Action.objects.create(team=team, name=\"Pageviews\")\n-            ActionStep.objects.create(action=action, event=\"$pageview\")\n-\n         # Create default dashboard\n         if user and posthoganalytics.feature_enabled(\"1694-dashboards\", user.distinct_id):\n             # Create app template dashboard if feature flag is active\ndiff --git a/posthog/test/test_demo.py b/posthog/test/test_demo.py\nindex 19a4b3675..e4c56399c 100644\n--- a/posthog/test/test_demo.py\n+++ b/posthog/test/test_demo.py\n@@ -10,11 +10,9 @@ class TestDemo(BaseTest):\n         demo_team = Team.objects.get(name__icontains=\"demo\")\n         self.assertEqual(Event.objects.count(), 192)\n         self.assertEqual(Person.objects.count(), 100)\n-        self.assertEqual(\n-            Action.objects.count(), 4,\n-        )  # TODO: Releasing 1694-dashboards should change this to 3 (Pageviews action is removed)\n+        self.assertEqual(Action.objects.count(), 3)\n \n         action_event_counts = [action.events.count() for action in Action.objects.all()]\n-        self.assertCountEqual(action_event_counts, [2, 9, 100, 145])\n+        self.assertCountEqual(action_event_counts, [2, 9, 100])\n \n         self.assertIn(\"$pageview\", demo_team.event_names)\n"
  },
  "80b321289831f5f764d773c8bf571b015eb038f8": {
    "hash": "80b321289831f5f764d773c8bf571b015eb038f8",
    "message": "feat: Lemon Skeletons (#11629)",
    "diff": "commit 80b321289831f5f764d773c8bf571b015eb038f8\nAuthor: Ben White <ben@benjackwhite.co.uk>\nDate:   Thu Sep 8 15:54:00 2022 +0200\n\n    feat: Lemon Skeletons (#11629)\n\ndiff --git a/.eslintrc.js b/.eslintrc.js\nindex 6e3c68477..6f53190b4 100644\n--- a/.eslintrc.js\n+++ b/.eslintrc.js\n@@ -106,6 +106,10 @@ module.exports = {\n                         element: 'Input',\n                         message: 'use <LemonInput> instead',\n                     },\n+                    {\n+                        element: 'Skeleton',\n+                        message: 'use <LemonSkeleton> instead',\n+                    },\n                     {\n                         element: 'a',\n                         message: 'use <Link> instead',\ndiff --git a/cypress/e2e/dashboard.js b/cypress/e2e/dashboard.js\nindex ccb9f62c4..f961a6de1 100644\n--- a/cypress/e2e/dashboard.js\n+++ b/cypress/e2e/dashboard.js\n@@ -79,7 +79,7 @@ describe('Dashboard', () => {\n         cy.get('button').contains('Create').click()\n \n         cy.contains('New Dashboard').should('exist')\n-        cy.get('.empty-state').should('exist')\n+        cy.get('.EmptyDashboard').should('exist')\n \n         // Check that dashboard is not pinned by default\n         cy.get('.page-buttons [data-attr=\"dashboard-three-dots-options-menu\"]').click()\ndiff --git a/cypress/e2e/insights.js b/cypress/e2e/insights.js\nindex e7a7dd9bd..9d30f9231 100644\n--- a/cypress/e2e/insights.js\n+++ b/cypress/e2e/insights.js\n@@ -118,7 +118,7 @@ describe('Insights', () => {\n     it('Shows not found error with invalid short URL', () => {\n         cy.visit('/i/i_dont_exist')\n         cy.location('pathname').should('eq', '/insights/i_dont_exist')\n-        cy.get('.ant-skeleton-title').should('exist')\n+        cy.get('.LemonSkeleton').should('exist')\n     })\n \n     it('Stickiness graph', () => {\ndiff --git a/frontend/src/lib/components/ActivityLog/ActivityLog.tsx b/frontend/src/lib/components/ActivityLog/ActivityLog.tsx\nindex 1fe5fd297..3580eeef6 100644\n--- a/frontend/src/lib/components/ActivityLog/ActivityLog.tsx\n+++ b/frontend/src/lib/components/ActivityLog/ActivityLog.tsx\n@@ -4,9 +4,9 @@ import { TZLabel } from 'lib/components/TimezoneAware'\n import { useValues } from 'kea'\n import './ActivityLog.scss'\n import { activityLogLogic } from 'lib/components/ActivityLog/activityLogLogic'\n-import { Skeleton } from 'antd'\n import { ActivityScope, Describer } from 'lib/components/ActivityLog/humanizeActivity'\n import { PaginationControl, usePagination } from 'lib/components/PaginationControl'\n+import { LemonSkeleton } from '../LemonSkeleton'\n \n export interface ActivityLogProps {\n     scope: ActivityScope\n@@ -43,10 +43,11 @@ const Empty = ({ scope, idExists }: { scope: string; idExists: boolean }): JSX.E\n \n const SkeletonLog = (): JSX.Element => {\n     return (\n-        <div className=\"activity-log-row\">\n-            <Skeleton.Avatar active={true} size={40} />\n-            <div className=\"details\">\n-                <Skeleton paragraph={{ rows: 1 }} />\n+        <div className=\"activity-log-row items-start\">\n+            <LemonSkeleton.Circle />\n+            <div className=\"details space-y-4 mt-2\">\n+                <LemonSkeleton className=\"w-1/2\" />\n+                <LemonSkeleton />\n             </div>\n         </div>\n     )\ndiff --git a/frontend/src/lib/components/CompactList/CompactList.scss b/frontend/src/lib/components/CompactList/CompactList.scss\nindex d5b2e6e55..357d421b6 100644\n--- a/frontend/src/lib/components/CompactList/CompactList.scss\n+++ b/frontend/src/lib/components/CompactList/CompactList.scss\n@@ -29,10 +29,5 @@\n         overflow-y: auto;\n         overflow-x: auto;\n         padding: 0 0.5rem 0.5rem;\n-\n-        .skeleton-container {\n-            width: 100%;\n-            padding: 0 0.5rem;\n-        }\n     }\n }\ndiff --git a/frontend/src/lib/components/CompactList/CompactList.tsx b/frontend/src/lib/components/CompactList/CompactList.tsx\nindex 5d03b540c..f300521e5 100644\n--- a/frontend/src/lib/components/CompactList/CompactList.tsx\n+++ b/frontend/src/lib/components/CompactList/CompactList.tsx\n@@ -2,8 +2,8 @@ import React from 'react'\n import './CompactList.scss'\n import { LemonDivider } from '../LemonDivider'\n import { LemonButton } from '../LemonButton'\n-import { Skeleton } from 'antd'\n import { EmptyMessage, EmptyMessageProps } from '../EmptyMessage/EmptyMessage'\n+import { LemonSkeleton } from '../LemonSkeleton'\n \n interface CompactListProps {\n     title: string\n@@ -33,9 +33,9 @@ export function CompactList({\n             </div>\n             <div className=\"scrollable-list\">\n                 {loading ? (\n-                    <div className=\"skeleton-container\">\n+                    <div className=\"p-2 space-y-6\">\n                         {Array.from({ length: 6 }, (_, index) => (\n-                            <Skeleton key={index} active paragraph={false} />\n+                            <LemonSkeleton key={index} />\n                         ))}\n                     </div>\n                 ) : items.length === 0 && emptyMessage ? (\ndiff --git a/frontend/src/lib/components/LemonSelectMultiple/LemonSelectMultiple.scss b/frontend/src/lib/components/LemonSelectMultiple/LemonSelectMultiple.scss\nindex 874be7ae5..36fe83148 100644\n--- a/frontend/src/lib/components/LemonSelectMultiple/LemonSelectMultiple.scss\n+++ b/frontend/src/lib/components/LemonSelectMultiple/LemonSelectMultiple.scss\n@@ -111,9 +111,5 @@\n         gap: 0.5rem;\n         height: 40px;\n         padding: 0px 0.25rem;\n-\n-        .ant-skeleton-title {\n-            margin: 0px;\n-        }\n     }\n }\ndiff --git a/frontend/src/lib/components/LemonSelectMultiple/LemonSelectMultiple.tsx b/frontend/src/lib/components/LemonSelectMultiple/LemonSelectMultiple.tsx\nindex 3f8846bc2..154d4844b 100644\n--- a/frontend/src/lib/components/LemonSelectMultiple/LemonSelectMultiple.tsx\n+++ b/frontend/src/lib/components/LemonSelectMultiple/LemonSelectMultiple.tsx\n@@ -1,7 +1,8 @@\n-import { Select, Skeleton } from 'antd'\n+import { Select } from 'antd'\n import { range } from 'lib/utils'\n import React from 'react'\n import { LemonSnack } from '../LemonSnack/LemonSnack'\n+import { LemonSkeleton } from '../LemonSkeleton'\n import './LemonSelectMultiple.scss'\n \n export interface LemonSelectMultipleOption {\n@@ -76,8 +77,8 @@ export function LemonSelectMultiple({\n                         <div>\n                             {range(5).map((x) => (\n                                 <div key={x} className=\"LemonSelectMultipleDropdown__skeleton\">\n-                                    <Skeleton.Avatar shape=\"circle\" size=\"small\" active />\n-                                    <Skeleton paragraph={false} active />\n+                                    <LemonSkeleton.Circle className=\"w-6 h-6\" />\n+                                    <LemonSkeleton />\n                                 </div>\n                             ))}\n                         </div>\ndiff --git a/frontend/src/lib/components/LemonSkeleton/LemonSkeleton.scss b/frontend/src/lib/components/LemonSkeleton/LemonSkeleton.scss\nnew file mode 100644\nindex 000000000..6d8ce2e01\n--- /dev/null\n+++ b/frontend/src/lib/components/LemonSkeleton/LemonSkeleton.scss\n@@ -0,0 +1,31 @@\n+.LemonSkeleton {\n+    // Background is such that at 25% (one full width) the darker fade starts and finishes slightly less than 75% (3 full widths)\n+    // With the background size at 400% this gives the impression of movement,\n+\n+    background: linear-gradient(\n+        90deg,\n+        rgba(190, 190, 190, 0.2) 25%,\n+        rgba(129, 129, 129, 0.24) 45%,\n+        rgba(190, 190, 190, 0.2) 65%\n+    );\n+    background-size: 400% 100%;\n+    animation: lemon-skeleton-loading 2s ease infinite;\n+\n+    @media (prefers-reduced-motion) {\n+        animation: none;\n+    }\n+\n+    &.LemonSkeleton--static {\n+        animation: none;\n+    }\n+}\n+\n+@keyframes lemon-skeleton-loading {\n+    0% {\n+        background-position: 100% 50%;\n+    }\n+\n+    100% {\n+        background-position: 0% 50%;\n+    }\n+}\ndiff --git a/frontend/src/lib/components/LemonSkeleton/LemonSkeleton.stories.tsx b/frontend/src/lib/components/LemonSkeleton/LemonSkeleton.stories.tsx\nnew file mode 100644\nindex 000000000..14f5f2131\n--- /dev/null\n+++ b/frontend/src/lib/components/LemonSkeleton/LemonSkeleton.stories.tsx\n@@ -0,0 +1,86 @@\n+import React from 'react'\n+import { ComponentMeta } from '@storybook/react'\n+\n+import { LemonSkeleton } from './LemonSkeleton'\n+import { LemonLabel } from '../LemonLabel/LemonLabel'\n+import { LemonModal } from '../LemonModal'\n+\n+export default {\n+    title: 'Lemon UI/Lemon Skeleton',\n+    component: LemonSkeleton,\n+    parameters: {\n+        docs: {\n+            description: {\n+                component: `\n+[Related Figma area](https://www.figma.com/file/Y9G24U4r04nEjIDGIEGuKI/PostHog-Design-System-One?node-id=2028%3A841)\n+\n+Skeleton screens are used to indicate that a screen is loading, are perceived as being shorter in duration when compared against a blank screen (our control) and a spinner — but not by much`,\n+            },\n+        },\n+    },\n+} as ComponentMeta<typeof LemonSkeleton>\n+\n+export function Default(): JSX.Element {\n+    return <LemonSkeleton />\n+}\n+\n+export function Presets(): JSX.Element {\n+    return (\n+        <div className=\"space-y-2\">\n+            <p>Skeletons have a bunch of presets to help with simulating other LemonUI Components</p>\n+\n+            <div className=\"flex items-center gap-2\">\n+                <LemonSkeleton.Circle />\n+                <LemonSkeleton />\n+                <LemonSkeleton.Button />\n+            </div>\n+\n+            <p>Here is an example of \"skeletoning\" a LemonModal</p>\n+\n+            <LemonModal\n+                isOpen\n+                onClose={() => {}}\n+                inline\n+                title=\"Loading...\"\n+                footer={\n+                    <>\n+                        <LemonSkeleton.Button />\n+                        <LemonSkeleton.Button />\n+                    </>\n+                }\n+            >\n+                <div className=\"space-y-2\">\n+                    <LemonSkeleton className=\"w-1/2\" />\n+                    <LemonSkeleton.Row repeat={3} />\n+                </div>\n+            </LemonModal>\n+        </div>\n+    )\n+}\n+\n+export function Customisation(): JSX.Element {\n+    return (\n+        <div className=\"space-y-2 mb-2\">\n+            <p>Skeletons are most easily styled with utility classNames</p>\n+\n+            <LemonLabel>Default</LemonLabel>\n+            <LemonSkeleton />\n+            <LemonLabel>Custom classNames</LemonLabel>\n+            <LemonSkeleton className=\"h-10 rounded-lg w-1/3\" />\n+        </div>\n+    )\n+}\n+\n+export function DarkBackground(): JSX.Element {\n+    return (\n+        <div className=\"space-y-2 bg-default p-2 rounded\">\n+            <p>Skeletons have a bunch of presets to help with simulating other LemonUI Components</p>\n+\n+            <div className=\"flex items-center gap-2\">\n+                <LemonSkeleton.Circle />\n+                <LemonSkeleton />\n+                <LemonSkeleton.Button />\n+            </div>\n+        </div>\n+    )\n+}\ndiff --git a/frontend/src/lib/components/LemonSkeleton/LemonSkeleton.tsx b/frontend/src/lib/components/LemonSkeleton/LemonSkeleton.tsx\nnew file mode 100644\nindex 000000000..a8de0e9bf\n--- /dev/null\n+++ b/frontend/src/lib/components/LemonSkeleton/LemonSkeleton.tsx\n@@ -0,0 +1,58 @@\n+import clsx from 'clsx'\n+import { range } from 'lib/utils'\n+import React from 'react'\n+import { LemonButtonProps } from '../LemonButton'\n+import './LemonSkeleton.scss'\n+\n+export interface LemonSkeletonProps {\n+    className?: string\n+    repeat?: number\n+    active?: boolean\n+}\n+\n+export function LemonSkeleton({ className, repeat, active = true }: LemonSkeletonProps): JSX.Element {\n+    const content = (\n+        <div className={clsx('LemonSkeleton rounded h-4', !active && 'LemonSkeleton--static', className || 'w-full')} />\n+    )\n+\n+    if (repeat) {\n+        return (\n+            <>\n+                {range(repeat).map((i) => (\n+                    <React.Fragment key={i}>{content}</React.Fragment>\n+                ))}\n+            </>\n+        )\n+    }\n+    return content\n+}\n+\n+LemonSkeleton.Text = function LemonSkeletonText({ className, ...props }: LemonSkeletonProps) {\n+    return <LemonSkeleton className={clsx('rounded h-6 w-full', className)} {...props} />\n+}\n+\n+LemonSkeleton.Row = function LemonSkeletonRow({ className, ...props }: LemonSkeletonProps) {\n+    return <LemonSkeleton className={clsx('rounded h-10 w-full', className)} {...props} />\n+}\n+\n+LemonSkeleton.Circle = function LemonSkeletonCircle({ className, ...props }: LemonSkeletonProps) {\n+    return <LemonSkeleton className={clsx('rounded-full shrink-0', className || 'h-10 w-10')} {...props} />\n+}\n+\n+LemonSkeleton.Button = function LemonSkeletonButton({\n+    className,\n+    size,\n+    ...props\n+}: LemonSkeletonProps & { size?: LemonButtonProps['size'] }) {\n+    return (\n+        <LemonSkeleton\n+            className={clsx(\n+                'rounded px-3',\n+                size === 'small' && 'h-10',\n+                (!size || size === 'medium') && 'h-10',\n+                className || 'w-20'\n+            )}\n+            {...props}\n+        />\n+    )\n+}\ndiff --git a/frontend/src/lib/components/LemonSkeleton/index.tsx b/frontend/src/lib/components/LemonSkeleton/index.tsx\nnew file mode 100644\nindex 000000000..c29e265fe\n--- /dev/null\n+++ b/frontend/src/lib/components/LemonSkeleton/index.tsx\n@@ -0,0 +1,2 @@\n+export { LemonSkeleton } from './LemonSkeleton'\n+export type { LemonSkeletonProps } from './LemonSkeleton'\ndiff --git a/frontend/src/lib/components/LemonTable/LemonTable.scss b/frontend/src/lib/components/LemonTable/LemonTable.scss\nindex 510f08ebb..fda2a12bd 100644\n--- a/frontend/src/lib/components/LemonTable/LemonTable.scss\n+++ b/frontend/src/lib/components/LemonTable/LemonTable.scss\n@@ -144,9 +144,6 @@\n             }\n         }\n     }\n-    .ant-skeleton-title {\n-        margin: 0;\n-    }\n }\n \n .LemonTable__empty-state {\ndiff --git a/frontend/src/lib/components/LemonTable/LemonTable.tsx b/frontend/src/lib/components/LemonTable/LemonTable.tsx\nindex 763b3273b..6c7840a1b 100644\n--- a/frontend/src/lib/components/LemonTable/LemonTable.tsx\n+++ b/frontend/src/lib/components/LemonTable/LemonTable.tsx\n@@ -8,8 +8,8 @@ import './LemonTable.scss'\n import { Sorting, SortingIndicator, getNextSorting } from './sorting'\n import { ExpandableConfig, LemonTableColumn, LemonTableColumnGroup, LemonTableColumns } from './types'\n import { PaginationAuto, PaginationControl, PaginationManual, usePagination } from '../PaginationControl'\n-import { Skeleton } from 'antd'\n import { useScrollable } from 'lib/hooks/useScrollable'\n+import { LemonSkeleton } from '../LemonSkeleton'\n \n /**\n  * Determine the column's key, using `dataIndex` as fallback.\n@@ -356,7 +356,7 @@ export function LemonTable<T extends Record<string, any>>({\n                                                             column.className\n                                                         )}\n                                                     >\n-                                                        <Skeleton title paragraph={false} active />\n+                                                        <LemonSkeleton />\n                                                     </td>\n                                                 ))\n                                             )}\ndiff --git a/frontend/src/lib/components/Sharing/SharingModal.tsx b/frontend/src/lib/components/Sharing/SharingModal.tsx\nindex a00ef0b4a..b54f2c219 100644\n--- a/frontend/src/lib/components/Sharing/SharingModal.tsx\n+++ b/frontend/src/lib/components/Sharing/SharingModal.tsx\n@@ -2,7 +2,6 @@ import React, { useEffect, useState } from 'react'\n import { InsightModel, InsightShortId, InsightType } from '~/types'\n import { useActions, useValues } from 'kea'\n import { sharingLogic } from './sharingLogic'\n-import { Skeleton } from 'antd'\n import { LemonButton, LemonDivider, LemonSwitch } from '@posthog/lemon-ui'\n import { copyToClipboard } from 'lib/utils'\n import { IconGlobeLock, IconInfo, IconLink, IconLock, IconUnfoldLess, IconUnfoldMore } from '../icons'\n@@ -15,6 +14,7 @@ import { Form } from 'kea-forms'\n import { Spinner } from '../Spinner/Spinner'\n import { TitleWithIcon } from 'lib/components/TitleWithIcon'\n import { LemonModal } from '../LemonModal'\n+import { LemonSkeleton } from '../LemonSkeleton'\n \n export interface SharingModalProps {\n     dashboardId?: number\n@@ -74,7 +74,9 @@ export function SharingModal({\n                 {dashboardId ? <DashboardCollaboration dashboardId={dashboardId} /> : undefined}\n \n                 {!sharingConfiguration && sharingConfigurationLoading ? (\n-                    <Skeleton />\n+                    <div className=\"space-y-4\">\n+                        <LemonSkeleton.Row repeat={3} />\n+                    </div>\n                 ) : !sharingConfiguration ? (\n                     <p>Something went wrong...</p>\n                 ) : (\ndiff --git a/frontend/src/lib/components/Subscriptions/views/EditSubscription.tsx b/frontend/src/lib/components/Subscriptions/views/EditSubscription.tsx\nindex 3ccbcd3de..aa9ce1bf6 100644\n--- a/frontend/src/lib/components/Subscriptions/views/EditSubscription.tsx\n+++ b/frontend/src/lib/components/Subscriptions/views/EditSubscription.tsx\n@@ -30,10 +30,10 @@ import {\n import { usersLemonSelectOptions } from 'lib/components/UserSelectItem'\n import { integrationsLogic } from 'scenes/project/Settings/integrationsLogic'\n import { urls } from 'scenes/urls'\n-import { Skeleton } from 'antd'\n import { LemonModal } from 'lib/components/LemonModal'\n import { Form } from 'kea-forms'\n import { LemonLabel } from 'lib/components/LemonLabel/LemonLabel'\n+import { LemonSkeleton } from 'lib/components/LemonSkeleton'\n \n interface EditSubscriptionProps extends SubscriptionBaseProps {\n     id: number | 'new'\n@@ -117,11 +117,14 @@ export function EditSubscription({\n             <LemonModal.Content className=\"space-y-2\">\n                 {!subscription ? (\n                     subscriptionLoading ? (\n-                        <>\n-                            <Skeleton />\n-                            <Skeleton />\n-                            <Skeleton />\n-                        </>\n+                        <div className=\"space-y-4\">\n+                            <LemonSkeleton className=\"w-1/2\" />\n+                            <LemonSkeleton.Row />\n+                            <LemonSkeleton className=\"w-1/2\" />\n+                            <LemonSkeleton.Row />\n+                            <LemonSkeleton className=\"w-1/2\" />\n+                            <LemonSkeleton.Row />\n+                        </div>\n                     ) : (\n                         <div className=\"p-4 text-center\">\n                             <h2>Not found</h2>\ndiff --git a/frontend/src/lib/components/Subscriptions/views/ManageSubscriptions.tsx b/frontend/src/lib/components/Subscriptions/views/ManageSubscriptions.tsx\nindex 99b06d60e..386c07717 100644\n--- a/frontend/src/lib/components/Subscriptions/views/ManageSubscriptions.tsx\n+++ b/frontend/src/lib/components/Subscriptions/views/ManageSubscriptions.tsx\n@@ -6,9 +6,9 @@ import { capitalizeFirstLetter, pluralize } from 'lib/utils'\n import { IconEllipsis, IconSlack } from 'lib/components/icons'\n import { ProfileBubbles } from 'lib/components/ProfilePicture'\n import { subscriptionsLogic } from '../subscriptionsLogic'\n-import { Skeleton } from 'antd'\n import { SubscriptionBaseProps } from '../utils'\n import { LemonModal } from 'lib/components/LemonModal'\n+import { LemonSkeleton } from 'lib/components/LemonSkeleton'\n \n interface SubscriptionListItemProps {\n     subscription: SubscriptionType\n@@ -88,12 +88,10 @@ export function ManageSubscriptions({\n             </LemonModal.Header>\n             <LemonModal.Content>\n                 {subscriptionsLoading && !subscriptions.length ? (\n-                    <>\n-                        <Skeleton paragraph={false} />\n-                        <Skeleton.Button active block size=\"large\" />\n-                        <Skeleton.Button active block size=\"large\" />\n-                        <Skeleton.Button active block size=\"large\" />\n-                    </>\n+                    <div className=\"space-y-2\">\n+                        <LemonSkeleton className=\"w-1/2\" />\n+                        <LemonSkeleton.Row repeat={2} />\n+                    </div>\n                 ) : subscriptions.length ? (\n                     <div className=\"space-y-2\">\n                         <div>\ndiff --git a/frontend/src/lib/components/TaxonomicFilter/InfiniteList.scss b/frontend/src/lib/components/TaxonomicFilter/InfiniteList.scss\nindex 9b5745699..4b3730b22 100644\n--- a/frontend/src/lib/components/TaxonomicFilter/InfiniteList.scss\n+++ b/frontend/src/lib/components/TaxonomicFilter/InfiniteList.scss\n@@ -1,5 +1,6 @@\n .taxonomic-infinite-list {\n     min-height: 200px;\n+    flex-grow: 1;\n \n     &.empty-infinite-list {\n         width: 100%;\ndiff --git a/frontend/src/lib/components/TaxonomicFilter/InfiniteList.tsx b/frontend/src/lib/components/TaxonomicFilter/InfiniteList.tsx\nindex bf3435e2b..ab8447c83 100644\n--- a/frontend/src/lib/components/TaxonomicFilter/InfiniteList.tsx\n+++ b/frontend/src/lib/components/TaxonomicFilter/InfiniteList.tsx\n@@ -1,7 +1,7 @@\n import './InfiniteList.scss'\n import '../Popup/Popup.scss'\n import React from 'react'\n-import { Empty, Skeleton, Tag } from 'antd'\n+import { Empty, Tag } from 'antd'\n import { AutoSizer } from 'react-virtualized/dist/es/AutoSizer'\n import { List, ListRowProps, ListRowRenderer } from 'react-virtualized/dist/es/List'\n import { PropertyKeyInfo } from 'lib/components/PropertyKeyInfo'\n@@ -23,6 +23,7 @@ import { definitionPopupLogic } from 'lib/components/DefinitionPopup/definitionP\n import { ControlledDefinitionPopupContents } from 'lib/components/DefinitionPopup/DefinitionPopupContents'\n import { pluralize } from 'lib/utils'\n import { flip, offset, shift, size, useFloating } from '@floating-ui/react-dom-interactions'\n+import { LemonSkeleton } from '../LemonSkeleton'\n \n enum ListTooltip {\n     None = 0,\n@@ -264,16 +265,13 @@ export function InfiniteList(): JSX.Element {\n                 className={`${commonDivProps.className} skeleton-row`}\n                 data-attr={`prop-skeleton-${listGroupType}-${rowIndex}`}\n             >\n-                <Skeleton active title={false} paragraph={{ rows: 1 }} />\n+                <LemonSkeleton />\n             </div>\n         )\n     }\n \n     return (\n-        <div\n-            className={clsx('taxonomic-infinite-list', showEmptyState && 'empty-infinite-list')}\n-            style={{ flexGrow: 1 }}\n-        >\n+        <div className={clsx('taxonomic-infinite-list', showEmptyState && 'empty-infinite-list')}>\n             {showEmptyState ? (\n                 <div className=\"no-infinite-results\">\n                     <Empty\ndiff --git a/frontend/src/scenes/apps/FrontendAppScene.tsx b/frontend/src/scenes/apps/FrontendAppScene.tsx\nindex 0021ddc2b..5617ec0bc 100644\n--- a/frontend/src/scenes/apps/FrontendAppScene.tsx\n+++ b/frontend/src/scenes/apps/FrontendAppScene.tsx\n@@ -1,9 +1,9 @@\n import React from 'react'\n import { SceneExport } from 'scenes/sceneTypes'\n import { useValues } from 'kea'\n-import { Skeleton } from 'antd'\n import { frontendAppSceneLogic } from 'scenes/apps/frontendAppSceneLogic'\n import { PageHeader } from 'lib/components/PageHeader'\n+import { SpinnerOverlay } from 'lib/components/Spinner/Spinner'\n \n export function FrontendAppScene(): JSX.Element {\n     const { Component, appConfig, breadcrumbs } = useValues(frontendAppSceneLogic)\n@@ -17,7 +17,7 @@ export function FrontendAppScene(): JSX.Element {\n                     'App Loading...'\n                 }\n             />\n-            {Component ? <Component {...appConfig} /> : <Skeleton />}\n+            {Component ? <Component {...appConfig} /> : <SpinnerOverlay />}\n         </>\n     )\n }\ndiff --git a/frontend/src/scenes/dashboard/Dashboard.scss b/frontend/src/scenes/dashboard/Dashboard.scss\nindex f9e90dcf9..fe4f644d4 100644\n--- a/frontend/src/scenes/dashboard/Dashboard.scss\n+++ b/frontend/src/scenes/dashboard/Dashboard.scss\n@@ -17,71 +17,6 @@\n             left: 30px;\n         }\n     }\n-\n-    .empty-state {\n-        position: relative;\n-\n-        .skeleton-actions {\n-            text-align: right;\n-            .ant-skeleton-avatar {\n-                margin-right: 8px;\n-            }\n-        }\n-\n-        .pie-chart {\n-            height: 200px;\n-            width: 200px;\n-            max-width: 100%;\n-            margin-top: 1rem;\n-\n-            @media (max-width: 992px) {\n-                height: 140px;\n-                width: 140px;\n-            }\n-        }\n-\n-        .bar-chart {\n-            display: flex;\n-            margin-top: 1rem;\n-            align-items: flex-end;\n-            .bar-el {\n-                width: 12.5%;\n-                margin-left: 4px;\n-                height: 100px;\n-            }\n-        }\n-\n-        .ant-col {\n-            flex-grow: 1;\n-            .ant-card {\n-                height: 100%;\n-            }\n-        }\n-\n-        .fade-out-graphs {\n-            margin-top: 1rem;\n-            height: 150px;\n-            overflow: hidden;\n-            position: relative;\n-\n-            &::after {\n-                @extend %mixin-gradient-overlay;\n-                width: calc(100% - 16px); // .ant-row gutter\n-                left: 8px;\n-                height: 150px;\n-            }\n-        }\n-\n-        .cta {\n-            width: 360px;\n-            max-width: calc(100% - 32px);\n-            position: absolute;\n-            top: 16px;\n-            left: 50%;\n-            transform: translateX(-50%);\n-            z-index: var(--z-content-overlay);\n-        }\n-    }\n }\n \n .dashboard-header {\ndiff --git a/frontend/src/scenes/dashboard/EmptyDashboardComponent.scss b/frontend/src/scenes/dashboard/EmptyDashboardComponent.scss\nnew file mode 100644\nindex 000000000..4f8ca50d1\n--- /dev/null\n+++ b/frontend/src/scenes/dashboard/EmptyDashboardComponent.scss\n@@ -0,0 +1,27 @@\n+@import '../../styles/mixins';\n+\n+.EmptyDashboard {\n+    position: relative;\n+    .EmptyDashboard__fade {\n+        margin-top: 1rem;\n+        height: 150px;\n+        overflow: hidden;\n+        position: relative;\n+\n+        &::after {\n+            @extend %mixin-gradient-overlay;\n+            width: 100%;\n+            height: 150px;\n+        }\n+    }\n+\n+    .EmptyDashboard__cta {\n+        width: 360px;\n+        max-width: calc(100% - 32px);\n+        position: absolute;\n+        top: 16px;\n+        left: 50%;\n+        transform: translateX(-50%);\n+        z-index: var(--z-content-overlay);\n+    }\n+}\ndiff --git a/frontend/src/scenes/dashboard/EmptyDashboardComponent.tsx b/frontend/src/scenes/dashboard/EmptyDashboardComponent.tsx\nindex 51d2f9155..3644ed9ea 100644\n--- a/frontend/src/scenes/dashboard/EmptyDashboardComponent.tsx\n+++ b/frontend/src/scenes/dashboard/EmptyDashboardComponent.tsx\n@@ -1,55 +1,65 @@\n-import { Col, Row, Skeleton, Card, SkeletonProps } from 'antd'\n import React from 'react'\n import { dashboardLogic } from './dashboardLogic'\n import { useValues } from 'kea'\n-import clsx from 'clsx'\n-import { Link } from 'lib/components/Link'\n import { urls } from 'scenes/urls'\n import { LemonButton } from 'lib/components/LemonButton'\n+import { LemonSkeleton } from 'lib/components/LemonSkeleton'\n+import { IconPlus } from 'lib/components/icons'\n+import './EmptyDashboardComponent.scss'\n \n-function SkeletonCardOne({ active }: Pick<SkeletonProps, 'active'>): JSX.Element {\n+function SkeletonCard({ children, active }: { children: React.ReactNode; active: boolean }): JSX.Element {\n     return (\n-        <Card className=\"hide-lte-lg\">\n-            <Row>\n-                <Col span={12}>\n-                    <Skeleton paragraph={{ rows: 1 }} active={active} />\n-                    <div className=\"mt-4\">\n-                        <div className=\"mt-4\">\n-                            <Skeleton.Button active={active} />\n-                            <Skeleton.Button active={active} style={{ marginLeft: 4, width: 140 }} />\n-                        </div>\n-                        <div className=\"mt-4\">\n-                            <Skeleton.Button active={active} />\n-                            <Skeleton.Button active={active} style={{ marginLeft: 4, width: 140 }} />\n-                        </div>\n-                        <div className=\"mt-4\">\n-                            <Skeleton.Button active={active} />\n-                            <Skeleton.Button active={active} style={{ marginLeft: 4, width: 140 }} />\n+        <div className=\"border rounded p-10 h-full space-y-4 flex-1 flex flex-col justify-between\">\n+            <div className=\"space-y-4\">\n+                <LemonSkeleton className=\"w-1/3 h-4\" active={active} />\n+                <LemonSkeleton className=\"w-1/2 h-4\" active={active} />\n+            </div>\n+            {children}\n+        </div>\n+    )\n+}\n+\n+function SkeletonCardOne({ active }: { active: boolean }): JSX.Element {\n+    return (\n+        <SkeletonCard active={active}>\n+            <div className=\"flex justify-center flex-1 items-end gap-10\">\n+                {[100, 66, 33].map((height) => (\n+                    <div\n+                        key={height}\n+                        className=\"border border-border-light rounded-2xl overflow-hidden flex flex-col justify-end\"\n+                        // eslint-disable-next-line react/forbid-dom-props\n+                        style={{ width: '15%', height: '80%' }}\n+                    >\n+                        {/* eslint-disable-next-line react/forbid-dom-props */}\n+                        <div style={{ height: `${height}%` }}>\n+                            <LemonSkeleton active={active} className=\"h-full w-full\" />\n                         </div>\n                     </div>\n-                </Col>\n-                <Col span={12}>\n-                    <div className=\"skeleton-actions\">\n-                        <Skeleton.Avatar active={active} shape=\"circle\" size=\"small\" />\n-                        <Skeleton.Avatar active={active} shape=\"circle\" size=\"small\" />\n-                    </div>\n-                    <Skeleton.Avatar active={active} shape=\"circle\" size=\"large\" className=\"pie-chart\" />\n-                </Col>\n-            </Row>\n-        </Card>\n+                ))}\n+            </div>\n+        </SkeletonCard>\n     )\n }\n \n-function SkeletonBarsRaw(): JSX.Element {\n+function SkeletonBarsRaw({ active }: { active: boolean }): JSX.Element {\n     return (\n-        <div className=\"bar-chart ant-skeleton-content\">\n+        <div className=\"flex items-end gap-1 flex-1\">\n             {Array(8)\n                 .fill(0)\n                 .map((_, index) => {\n-                    const max = 200\n-                    const min = 40\n-                    const height = Math.floor(Math.random() * (max - min + 1)) + min\n-                    return <div className=\"bar-el ant-skeleton-title\" key={index} style={{ height: height }} />\n+                    const height = Math.random() * 60 + 10\n+                    return (\n+                        <div\n+                            key={index}\n+                            // eslint-disable-next-line react/forbid-dom-props\n+                            style={{\n+                                height: `${height}%`,\n+                                width: '12.5%',\n+                            }}\n+                        >\n+                            <LemonSkeleton active={active} className=\"h-full w-full\" />\n+                        </div>\n+                    )\n                 })}\n         </div>\n     )\n@@ -57,22 +67,11 @@ function SkeletonBarsRaw(): JSX.Element {\n /** This component looks different on each render due to Math.random() calls within, so it's memoized to avoid that. */\n const SkeletonBars = React.memo(SkeletonBarsRaw)\n \n-function SkeletonCardTwo({ active }: Pick<SkeletonProps, 'active'>): JSX.Element {\n+function SkeletonCardTwo({ active }: { active: boolean }): JSX.Element {\n     return (\n-        <Card className={clsx('ant-skeleton', active && 'ant-skeleton-active')}>\n-            <Row>\n-                <Col span={12}>\n-                    <Skeleton active={active} paragraph={{ rows: 1 }} />\n-                </Col>\n-                <Col span={12}>\n-                    <div className=\"skeleton-actions\">\n-                        <Skeleton.Avatar active={active} shape=\"circle\" size=\"small\" />\n-                        <Skeleton.Avatar active={active} shape=\"circle\" size=\"small\" />\n-                    </div>\n-                </Col>\n-            </Row>\n-            <SkeletonBars />\n-        </Card>\n+        <SkeletonCard active={active}>\n+            <SkeletonBars active={active} />\n+        </SkeletonCard>\n     )\n }\n \n@@ -80,36 +79,39 @@ export function EmptyDashboardComponent({ loading }: { loading: boolean }): JSX.\n     const { dashboard } = useValues(dashboardLogic)\n \n     return (\n-        <div className=\"empty-state\">\n+        <div className=\"EmptyDashboard\">\n             {!loading && (\n-                <div className=\"cta\">\n-                    <Card className=\"card-elevated\">\n+                <div className=\"EmptyDashboard__cta\">\n+                    <div className=\"border rounded p-6 shadow bg-white\">\n                         <h3 className=\"l3\">Dashboard empty</h3>\n                         <p>This dashboard sure would look better with some graphs!</p>\n                         <div className=\"mt-4 text-center\">\n-                            <Link to={urls.insightNew(undefined, dashboard?.id)}>\n-                                <LemonButton data-attr=\"dashboard-add-graph-header\">Add insight</LemonButton>\n-                            </Link>\n+                            <LemonButton\n+                                data-attr=\"dashboard-add-graph-header\"\n+                                to={urls.insightNew(undefined, dashboard?.id)}\n+                                type=\"primary\"\n+                                icon={<IconPlus />}\n+                                center\n+                                fullWidth\n+                            >\n+                                Add insight\n+                            </LemonButton>\n                         </div>\n-                    </Card>\n+                    </div>\n                 </div>\n             )}\n-            <Row gutter={16}>\n-                <Col span={24} lg={12}>\n+            {/*  eslint-disable-next-line react/forbid-dom-props */}\n+            <div className=\"flex items-center gap-2\" style={{ height: '30rem' }}>\n+                <SkeletonCardOne active={loading} />\n+                <SkeletonCardTwo active={loading} />\n+            </div>\n+            <div className=\"EmptyDashboard__fade\">\n+                {/*  eslint-disable-next-line react/forbid-dom-props */}\n+                <div className=\"flex items-center gap-2\" style={{ height: '30rem' }}>\n                     <SkeletonCardOne active={loading} />\n-                </Col>\n-                <Col span={24} lg={12}>\n                     <SkeletonCardTwo active={loading} />\n-                </Col>\n-            </Row>\n-            <Row gutter={16} className=\"fade-out-graphs\">\n-                <Col span={24} lg={12}>\n-                    <SkeletonCardOne active={loading} />\n-                </Col>\n-                <Col span={24} lg={12}>\n-                    <SkeletonCardTwo active={loading} />\n-                </Col>\n-            </Row>\n+                </div>\n+            </div>\n         </div>\n     )\n }\ndiff --git a/frontend/src/scenes/insights/InsightSkeleton.tsx b/frontend/src/scenes/insights/InsightSkeleton.tsx\nindex b69a95216..23c97c2f8 100644\n--- a/frontend/src/scenes/insights/InsightSkeleton.tsx\n+++ b/frontend/src/scenes/insights/InsightSkeleton.tsx\n@@ -1,24 +1,24 @@\n import React from 'react'\n-import { Card, Col, Row, Skeleton } from 'antd'\n+import { LemonSkeleton } from 'lib/components/LemonSkeleton'\n \n export function InsightSkeleton(): JSX.Element {\n     return (\n         <>\n-            <Skeleton active title paragraph={{ rows: 3 }} className=\"page-title-row page-caption mb-1\" />\n-            <Skeleton active title={false} paragraph={{ rows: 1 }} />\n-            <Card>\n-                <Row gutter={16}>\n-                    <Col md={18}>\n-                        <Skeleton active />\n-                    </Col>\n-                    <Col md={6} style={{ textAlign: 'center' }}>\n-                        <Skeleton active paragraph={{ rows: 0 }} />\n-                        <Skeleton active paragraph={{ rows: 0 }} />\n-                        <Skeleton active paragraph={{ rows: 0 }} />\n-                    </Col>\n-                </Row>\n-            </Card>\n-            <Card style={{ minHeight: 600, marginTop: 16 }} />\n+            <div className=\"my-6 space-y-4\">\n+                <LemonSkeleton className=\"w-1/4\" />\n+                <LemonSkeleton className=\"w-1/2\" repeat={3} />\n+                <LemonSkeleton />\n+                <div className=\"border rounded p-6 flex items-center gap-4\">\n+                    <div className=\"flex-1 space-y-2\">\n+                        <LemonSkeleton.Row repeat={3} />\n+                    </div>\n+\n+                    <div className=\"flex-1 space-y-2\">\n+                        <LemonSkeleton.Row repeat={3} />\n+                    </div>\n+                </div>\n+                <div className=\"border rounded p-6\" style={{ minHeight: 600 }} />\n+            </div>\n         </>\n     )\n }\ndiff --git a/frontend/src/scenes/project-homepage/PrimaryDashboardModal.tsx b/frontend/src/scenes/project-homepage/PrimaryDashboardModal.tsx\nindex cfd9129ab..8a11a1936 100644\n--- a/frontend/src/scenes/project-homepage/PrimaryDashboardModal.tsx\n+++ b/frontend/src/scenes/project-homepage/PrimaryDashboardModal.tsx\n@@ -3,11 +3,11 @@ import { useActions, useValues } from 'kea'\n import { dashboardsModel } from '~/models/dashboardsModel'\n import { LemonButton } from 'lib/components/LemonButton'\n import { DashboardType } from '~/types'\n-import { Skeleton } from 'antd'\n import { primaryDashboardModalLogic } from './primaryDashboardModalLogic'\n import { IconCottage } from 'lib/components/icons'\n import { LemonRow } from 'lib/components/LemonRow'\n import { LemonModal } from 'lib/components/LemonModal'\n+import { LemonSkeleton } from 'lib/components/LemonSkeleton'\n \n export function PrimaryDashboardModal(): JSX.Element {\n     const { isOpen, primaryDashboardId } = useValues(primaryDashboardModalLogic)\n@@ -32,8 +32,8 @@ export function PrimaryDashboardModal(): JSX.Element {\n             }\n         >\n             {dashboardsLoading ? (\n-                <div className=\"p-4\">\n-                    <Skeleton active />\n+                <div className=\"space-y-2\">\n+                    <LemonSkeleton.Row repeat={4} />\n                 </div>\n             ) : (\n                 <div className=\"space-y-2\">\ndiff --git a/frontend/src/scenes/project-homepage/ProjectHomepage.scss b/frontend/src/scenes/project-homepage/ProjectHomepage.scss\nindex e6aa75a9e..54b8d1e77 100644\n--- a/frontend/src/scenes/project-homepage/ProjectHomepage.scss\n+++ b/frontend/src/scenes/project-homepage/ProjectHomepage.scss\n@@ -1,5 +1,6 @@\n .project-homepage {\n     .homepage-dashboard-header {\n+        display: flex;\n         justify-content: space-between;\n         align-items: center;\n \n@@ -10,6 +11,8 @@\n \n             .dashboard-name {\n                 margin: 0;\n+                font-weight: 600;\n+                font-size: 1.2rem;\n             }\n \n             .ant-skeleton {\ndiff --git a/frontend/src/scenes/project-homepage/ProjectHomepage.tsx b/frontend/src/scenes/project-homepage/ProjectHomepage.tsx\nindex 04e235257..048e3ca66 100644\n--- a/frontend/src/scenes/project-homepage/ProjectHomepage.tsx\n+++ b/frontend/src/scenes/project-homepage/ProjectHomepage.tsx\n@@ -6,7 +6,6 @@ import { useActions, useValues } from 'kea'\n import { teamLogic } from 'scenes/teamLogic'\n import { SceneExport } from 'scenes/sceneTypes'\n import { DashboardPlacement } from '~/types'\n-import { Row, Skeleton, Typography } from 'antd'\n import { inviteLogic } from 'scenes/organization/Settings/inviteLogic'\n import { LemonDivider } from 'lib/components/LemonDivider'\n import { PrimaryDashboardModal } from './PrimaryDashboardModal'\n@@ -19,6 +18,7 @@ import { RecentInsights } from './RecentInsights'\n import { NewlySeenPersons } from './NewlySeenPersons'\n import useSize from '@react-hook/size'\n import { NewInsightButton } from 'scenes/saved-insights/SavedInsights'\n+import { LemonSkeleton } from 'lib/components/LemonSkeleton'\n \n export function ProjectHomepage(): JSX.Element {\n     const { dashboardLogic } = useValues(projectHomepageLogic)\n@@ -30,7 +30,7 @@ export function ProjectHomepage(): JSX.Element {\n     const [topListContainerWidth] = useSize(topListContainerRef)\n \n     const headerButtons = (\n-        <div style={{ display: 'flex' }}>\n+        <div className=\"flex\">\n             <LemonButton\n                 data-attr=\"project-home-invite-team-members\"\n                 onClick={() => {\n@@ -70,15 +70,13 @@ export function ProjectHomepage(): JSX.Element {\n             </div>\n             {currentTeam?.primary_dashboard ? (\n                 <div>\n-                    <Row className=\"homepage-dashboard-header\">\n+                    <div className=\"homepage-dashboard-header\">\n                         <div className=\"dashboard-title-container\">\n-                            {!dashboard && <Skeleton active paragraph={false} />}\n+                            {!dashboard && <LemonSkeleton className=\"w-20\" />}\n                             {dashboard?.name && (\n                                 <>\n-                                    <IconCottage className=\"mr-2 text-warning\" style={{ fontSize: '1.5rem' }} />\n-                                    <Typography.Title className=\"dashboard-name\" level={4}>\n-                                        {dashboard?.name}\n-                                    </Typography.Title>\n+                                    <IconCottage className=\"mr-2 text-warning text-2xl\" />\n+                                    <div className=\"dashboard-name\">{dashboard?.name}</div>\n                                 </>\n                             )}\n                         </div>\n@@ -89,7 +87,7 @@ export function ProjectHomepage(): JSX.Element {\n                         >\n                             Change dashboard\n                         </LemonButton>\n-                    </Row>\n+                    </div>\n                     <LemonDivider className=\"my-6\" />\n                     <Dashboard\n                         id={currentTeam.primary_dashboard.toString()}\ndiff --git a/frontend/src/scenes/project/Settings/PersonDisplayNameProperties.tsx b/frontend/src/scenes/project/Settings/PersonDisplayNameProperties.tsx\nindex cc31ba0e4..f28856a62 100644\n--- a/frontend/src/scenes/project/Settings/PersonDisplayNameProperties.tsx\n+++ b/frontend/src/scenes/project/Settings/PersonDisplayNameProperties.tsx\n@@ -1,7 +1,7 @@\n import { LemonButton } from '@posthog/lemon-ui'\n-import { Skeleton } from 'antd'\n import { useActions, useValues } from 'kea'\n import { PersonPropertySelect } from 'lib/components/PersonPropertySelect/PersonPropertySelect'\n+import { LemonSkeleton } from 'lib/components/LemonSkeleton'\n import { PERSON_DEFAULT_DISPLAY_NAME_PROPERTIES } from 'lib/constants'\n import React, { useEffect, useState } from 'react'\n import { teamLogic } from 'scenes/teamLogic'\n@@ -17,7 +17,7 @@ export function PersonDisplayNameProperties(): JSX.Element {\n     )\n \n     if (!currentTeam) {\n-        return <Skeleton paragraph={{ rows: 0 }} active />\n+        return <LemonSkeleton className=\"w-1/2\" />\n     }\n \n     return (\ndiff --git a/frontend/src/scenes/project/Settings/TimezoneConfig.tsx b/frontend/src/scenes/project/Settings/TimezoneConfig.tsx\nindex fcc57ac81..a432dc053 100644\n--- a/frontend/src/scenes/project/Settings/TimezoneConfig.tsx\n+++ b/frontend/src/scenes/project/Settings/TimezoneConfig.tsx\n@@ -1,4 +1,3 @@\n-import { Skeleton } from 'antd'\n import { useActions, useValues } from 'kea'\n import React from 'react'\n import { preflightLogic } from 'scenes/PreflightCheck/preflightLogic'\n@@ -6,6 +5,7 @@ import { teamLogic } from 'scenes/teamLogic'\n \n import { LemonSelectMultiple } from 'lib/components/LemonSelectMultiple/LemonSelectMultiple'\n import { LemonDialog } from 'lib/components/LemonDialog'\n+import { LemonSkeleton } from 'lib/components/LemonSkeleton'\n \n export function TimezoneConfig(): JSX.Element {\n     const { preflight } = useValues(preflightLogic)\n@@ -13,7 +13,7 @@ export function TimezoneConfig(): JSX.Element {\n     const { updateCurrentTeam } = useActions(teamLogic)\n \n     if (!preflight?.available_timezones || !currentTeam) {\n-        return <Skeleton paragraph={{ rows: 0 }} active />\n+        return <LemonSkeleton className=\"w-1/2\" />\n     }\n     function onChange(val: string): void {\n         LemonDialog.open({\ndiff --git a/frontend/src/scenes/project/Settings/index.tsx b/frontend/src/scenes/project/Settings/index.tsx\nindex a360acbb6..ff72b10ff 100644\n--- a/frontend/src/scenes/project/Settings/index.tsx\n+++ b/frontend/src/scenes/project/Settings/index.tsx\n@@ -1,6 +1,5 @@\n import React, { useState } from 'react'\n import { BindLogic, useActions, useValues } from 'kea'\n-import { Skeleton } from 'antd'\n import { IPCapture } from './IPCapture'\n import { JSSnippet } from 'lib/components/JSSnippet'\n import { SessionRecording } from './SessionRecording'\n@@ -36,6 +35,7 @@ import { PersonDisplayNameProperties } from './PersonDisplayNameProperties'\n import { Tooltip } from 'lib/components/Tooltip'\n import { SlackIntegration } from './SlackIntegration'\n import { LemonButton, LemonDivider, LemonInput } from '@posthog/lemon-ui'\n+import { LemonSkeleton } from 'lib/components/LemonSkeleton'\n \n export const scene: SceneExport = {\n     component: ProjectSettings,\n@@ -79,7 +79,12 @@ export function ProjectSettings(): JSX.Element {\n \n     useAnchor(location.hash)\n \n-    const loadingComponent = <Skeleton active />\n+    const loadingComponent = (\n+        <div className=\"space-y-4\">\n+            <LemonSkeleton className=\"w-1/2\" />\n+            <LemonSkeleton repeat={3} />\n+        </div>\n+    )\n \n     return (\n         <div>\ndiff --git a/frontend/src/scenes/saved-insights/SavedInsights.scss b/frontend/src/scenes/saved-insights/SavedInsights.scss\nindex 2f9992c88..ac22adb6f 100644\n--- a/frontend/src/scenes/saved-insights/SavedInsights.scss\n+++ b/frontend/src/scenes/saved-insights/SavedInsights.scss\n@@ -8,7 +8,7 @@\n     > .LemonTable td {\n         padding-bottom: 0.75rem !important;\n         padding-top: 0.75rem !important;\n-        &.icon-column .ant-skeleton-title {\n+        &.icon-column .LemonSkeleton {\n             height: 2rem;\n             width: 2rem;\n         }\ndiff --git a/frontend/src/styles/utilities.scss b/frontend/src/styles/utilities.scss\nindex a7a3b6d33..8aa5d42ca 100644\n--- a/frontend/src/styles/utilities.scss\n+++ b/frontend/src/styles/utilities.scss\n@@ -617,6 +617,9 @@\n .rounded-3xl {\n     border-radius: 1.5rem; /* 24px */\n }\n+.rounded-full {\n+    border-radius: 9999px;\n+}\n \n .overflow-auto {\n     overflow: auto;\n@@ -733,3 +736,7 @@\n         list-style-type: #{$list_style_type};\n     }\n }\n+\n+.shadow {\n+    box-shadow: var(--shadow-elevation);\n+}\n"
  },
  "fc8e864793458e68343882f638218d03c0905e33": {
    "hash": "fc8e864793458e68343882f638218d03c0905e33",
    "message": "feat: Improve Slack dropdown (#10489)\n    \n    * feat: Improve Slack dropdown\n    * Fixed loading state of Editor\n    * Swapped to skeleton placeholder\n    * Removed placeholder\n    * Improved even further to show more actionable message only if the App is not in the right channel",
    "diff": "commit fc8e864793458e68343882f638218d03c0905e33\nAuthor: Ben White <ben@benjackwhite.co.uk>\nDate:   Mon Jun 27 11:36:10 2022 +0200\n\n    feat: Improve Slack dropdown (#10489)\n    \n    * feat: Improve Slack dropdown\n    * Fixed loading state of Editor\n    * Swapped to skeleton placeholder\n    * Removed placeholder\n    * Improved even further to show more actionable message only if the App is not in the right channel\n\ndiff --git a/frontend/src/lib/components/LemonSelectMultiple/LemonSelectMultiple.scss b/frontend/src/lib/components/LemonSelectMultiple/LemonSelectMultiple.scss\nindex eb4a03ca1..48e43bbf0 100644\n--- a/frontend/src/lib/components/LemonSelectMultiple/LemonSelectMultiple.scss\n+++ b/frontend/src/lib/components/LemonSelectMultiple/LemonSelectMultiple.scss\n@@ -70,28 +70,50 @@\n     margin: -4px 0px; // Counteract antd wrapper\n \n     .ant-select-item {\n-        height: 40px;\n-        cursor: pointer;\n-        border-radius: var(--radius);\n-        padding: 0.25rem 0.5rem;\n+        padding: 0px;\n+        background: none;\n+        padding-bottom: 0.2rem;\n+        .ant-select-item-option-content {\n+            height: 40px;\n+            cursor: pointer;\n+            border-radius: var(--radius);\n+            padding: 0.25rem 0.5rem;\n+        }\n+\n         &.ant-select-item-option-active {\n-            background: var(--primary-bg-hover);\n+            .ant-select-item-option-content {\n+                background: var(--primary-bg-hover);\n+            }\n         }\n \n         &.ant-select-item-option-selected {\n-            background: var(--primary-bg-active);\n+            .ant-select-item-option-content {\n+                background: var(--primary-bg-active);\n+            }\n         }\n         .ant-select-item-option-state {\n             display: none;\n         }\n     }\n \n-    .rc-virtual-list-holder-inner {\n-        gap: 0.25rem;\n+    .ant-select-item-empty {\n+        padding: 0px;\n     }\n \n     .ant-select-item-option-content {\n         display: flex;\n         align-items: center;\n     }\n+\n+    .LemonSelectMultipleDropdown__skeleton {\n+        display: flex;\n+        align-items: center;\n+        gap: 0.5rem;\n+        height: 40px;\n+        padding: 0px 0.25rem;\n+\n+        .ant-skeleton-title {\n+            margin: 0px;\n+        }\n+    }\n }\ndiff --git a/frontend/src/lib/components/LemonSelectMultiple/LemonSelectMultiple.stories.tsx b/frontend/src/lib/components/LemonSelectMultiple/LemonSelectMultiple.stories.tsx\nindex 9f7f9067c..51b0ed313 100644\n--- a/frontend/src/lib/components/LemonSelectMultiple/LemonSelectMultiple.stories.tsx\n+++ b/frontend/src/lib/components/LemonSelectMultiple/LemonSelectMultiple.stories.tsx\n@@ -56,3 +56,17 @@ Disabled.args = {\n     placeholder: 'Disabled...',\n     disabled: true,\n }\n+\n+export const Loading = Template.bind({})\n+Loading.args = {\n+    placeholder: 'Loading...',\n+    options: [],\n+    loading: true,\n+}\n+\n+export const NoOptions = Template.bind({})\n+NoOptions.args = {\n+    mode: 'multiple-custom',\n+    placeholder: 'No options...',\n+    options: [],\n+}\ndiff --git a/frontend/src/lib/components/LemonSelectMultiple/LemonSelectMultiple.tsx b/frontend/src/lib/components/LemonSelectMultiple/LemonSelectMultiple.tsx\nindex 2370e0794..6c85e7f8d 100644\n--- a/frontend/src/lib/components/LemonSelectMultiple/LemonSelectMultiple.tsx\n+++ b/frontend/src/lib/components/LemonSelectMultiple/LemonSelectMultiple.tsx\n@@ -1,4 +1,5 @@\n-import { Select } from 'antd'\n+import { Select, Skeleton } from 'antd'\n+import { range } from 'lib/utils'\n import React from 'react'\n import { LemonSnack } from '../LemonSnack/LemonSnack'\n import './LemonSelectMultiple.scss'\n@@ -67,7 +68,18 @@ export function LemonSelectMultiple({\n                 dropdownRender={(menu) => <div className=\"LemonSelectMultipleDropdown\">{menu}</div>}\n                 options={antOptions}\n                 placeholder={placeholder}\n-                notFoundContent={<></>}\n+                notFoundContent={\n+                    loading ? (\n+                        <div>\n+                            {range(5).map((x) => (\n+                                <div key={x} className=\"LemonSelectMultipleDropdown__skeleton\">\n+                                    <Skeleton.Avatar shape=\"circle\" size=\"small\" active />\n+                                    <Skeleton paragraph={false} active />\n+                                </div>\n+                            ))}\n+                        </div>\n+                    ) : null\n+                }\n                 filterOption={filterOption}\n                 tagRender={({ label, onClose }) => <LemonSnack onClose={onClose}>{label}</LemonSnack>}\n             />\ndiff --git a/frontend/src/lib/components/Subscriptions/subscriptionLogic.ts b/frontend/src/lib/components/Subscriptions/subscriptionLogic.ts\nindex b01352a99..92dacc0ac 100644\n--- a/frontend/src/lib/components/Subscriptions/subscriptionLogic.ts\n+++ b/frontend/src/lib/components/Subscriptions/subscriptionLogic.ts\n@@ -14,6 +14,7 @@ import { subscriptionsLogic } from './subscriptionsLogic'\n import type { subscriptionLogicType } from './subscriptionLogicType'\n import { getInsightId } from 'scenes/insights/utils'\n import { SubscriptionBaseProps, urlForSubscription } from './utils'\n+import { integrationsLogic } from 'scenes/project/Settings/integrationsLogic'\n \n const NEW_SUBSCRIPTION: Partial<SubscriptionType> = {\n     frequency: 'weekly',\n@@ -33,11 +34,12 @@ export const subscriptionLogic = kea<subscriptionLogicType>([\n     key(({ id, insightShortId, dashboardId }) => `${insightShortId || dashboardId}-${id ?? 'new'}`),\n     connect(({ insightShortId, dashboardId }: SubscriptionsLogicProps) => ({\n         actions: [subscriptionsLogic({ insightShortId, dashboardId }), ['loadSubscriptions']],\n+        values: [integrationsLogic, ['isMemberOfSlackChannel']],\n     })),\n \n     loaders(({ props }) => ({\n         subscription: {\n-            __default: {} as SubscriptionType,\n+            __default: undefined as unknown as SubscriptionType,\n             loadSubscription: async () => {\n                 if (props.id && props.id !== 'new') {\n                     return await api.subscriptions.get(props.id)\n@@ -47,9 +49,9 @@ export const subscriptionLogic = kea<subscriptionLogicType>([\n         },\n     })),\n \n-    forms(({ props, actions }) => ({\n+    forms(({ props, actions, values }) => ({\n         subscription: {\n-            defaults: { ...NEW_SUBSCRIPTION } as SubscriptionType,\n+            defaults: {} as unknown as SubscriptionType,\n             errors: ({ frequency, interval, target_value, target_type, title, start_date }) => ({\n                 frequency: !frequency ? 'You need to set a schedule frequency' : undefined,\n                 title: !title ? 'You need to give your subscription a name' : undefined,\n@@ -75,6 +77,12 @@ export const subscriptionLogic = kea<subscriptionLogicType>([\n                         ? 'Must be a valid URL'\n                         : undefined\n                     : undefined,\n+                memberOfSlackChannel:\n+                    target_type == 'slack'\n+                        ? !values.isMemberOfSlackChannel(target_value)\n+                            ? 'Please add the PostHog App to the selected Slack channel'\n+                            : undefined\n+                        : undefined,\n             }),\n             submit: async (subscription, breakpoint) => {\n                 const insightId = props.insightShortId ? await getInsightId(props.insightShortId) : undefined\n@@ -85,26 +93,24 @@ export const subscriptionLogic = kea<subscriptionLogicType>([\n                     dashboard: props.dashboardId,\n                 }\n \n-                let subscriptionId = props.id\n-\n                 breakpoint()\n \n-                if (subscriptionId === 'new') {\n-                    const newSub = await api.subscriptions.create(payload)\n-                    subscriptionId = newSub.id\n-                } else {\n-                    await api.subscriptions.update(subscriptionId, payload)\n-                }\n+                const updatedSub =\n+                    props.id === 'new'\n+                        ? await api.subscriptions.create(payload)\n+                        : await api.subscriptions.update(props.id, payload)\n \n                 actions.resetSubscription()\n \n-                if (subscriptionId !== props.id) {\n-                    router.actions.replace(urlForSubscription(subscriptionId, props))\n+                if (updatedSub.id !== props.id) {\n+                    router.actions.replace(urlForSubscription(updatedSub.id, props))\n                 }\n \n                 actions.loadSubscriptions()\n-                actions.loadSubscription()\n+                actions.loadSubscriptionSuccess(updatedSub)\n                 lemonToast.success(`Subscription saved.`)\n+\n+                return updatedSub\n             },\n         },\n     })),\ndiff --git a/frontend/src/lib/components/Subscriptions/utils.tsx b/frontend/src/lib/components/Subscriptions/utils.tsx\nindex 4a79a1591..f0c2a351d 100644\n--- a/frontend/src/lib/components/Subscriptions/utils.tsx\n+++ b/frontend/src/lib/components/Subscriptions/utils.tsx\n@@ -2,8 +2,9 @@ import React from 'react'\n import { LemonSelectOptions } from '@posthog/lemon-ui'\n import { range } from 'lib/utils'\n import { urls } from 'scenes/urls'\n-import { InsightShortId } from '~/types'\n-import { IconMail, IconSlack } from '../icons'\n+import { InsightShortId, SlackChannelType } from '~/types'\n+import { IconMail, IconSlack, IconSlackExternal } from '../icons'\n+import { LemonSelectMultipleOptionItem } from '../LemonSelectMultiple/LemonSelectMultiple'\n \n export interface SubscriptionBaseProps {\n     dashboardId?: number\n@@ -81,3 +82,27 @@ export const timeOptions: LemonSelectOptions = range(0, 24).reduce(\n     }),\n     {}\n )\n+\n+export const getSlackChannelOptions = (\n+    value: string,\n+    slackChannels?: SlackChannelType[] | null\n+): LemonSelectMultipleOptionItem[] => {\n+    return slackChannels\n+        ? slackChannels.map((x) => ({\n+              key: `${x.id}|#${x.name}`,\n+              label: (\n+                  <span className=\"flex items-center\">\n+                      {x.is_private ? `🔒${x.name}` : `#${x.name}`}\n+                      {x.is_ext_shared ? <IconSlackExternal className=\"ml-05\" /> : null}\n+                  </span>\n+              ),\n+          }))\n+        : value\n+        ? [\n+              {\n+                  key: value,\n+                  label: value?.split('|')?.pop(),\n+              },\n+          ]\n+        : []\n+}\ndiff --git a/frontend/src/lib/components/Subscriptions/views/EditSubscription.tsx b/frontend/src/lib/components/Subscriptions/views/EditSubscription.tsx\nindex 955716213..8ab44a86f 100644\n--- a/frontend/src/lib/components/Subscriptions/views/EditSubscription.tsx\n+++ b/frontend/src/lib/components/Subscriptions/views/EditSubscription.tsx\n@@ -15,6 +15,7 @@ import { subscriptionsLogic } from '../subscriptionsLogic'\n import {\n     bysetposOptions,\n     frequencyOptions,\n+    getSlackChannelOptions,\n     intervalOptions,\n     monthlyWeekdayOptions,\n     SubscriptionBaseProps,\n@@ -32,6 +33,7 @@ import { integrationsLogic } from 'scenes/project/Settings/integrationsLogic'\n import { featureFlagLogic } from 'lib/logic/featureFlagLogic'\n import { FEATURE_FLAGS } from 'lib/constants'\n import { urls } from 'scenes/urls'\n+import { Skeleton } from 'antd'\n \n interface EditSubscriptionProps extends SubscriptionBaseProps {\n     id: number | 'new'\n@@ -58,7 +60,8 @@ export function EditSubscription({\n     })\n \n     const { members, membersLoading } = useValues(membersLogic)\n-    const { subscription, isSubscriptionSubmitting, subscriptionChanged } = useValues(logic)\n+    const { subscription, subscriptionLoading, isSubscriptionSubmitting, subscriptionChanged, isMemberOfSlackChannel } =\n+        useValues(logic)\n     const { preflight, siteUrlMisconfigured } = useValues(preflightLogic)\n     const { deleteSubscription } = useActions(subscriptionslogic)\n     const { slackChannels, slackChannelsLoading, slackIntegration } = useValues(integrationsLogic)\n@@ -81,28 +84,22 @@ export function EditSubscription({\n     }\n \n     useEffect(() => {\n-        if (subscription.target_type === 'slack') {\n+        if (subscription?.target_type === 'slack' && slackIntegration) {\n             loadSlackChannels()\n         }\n-    }, [subscription.target_type])\n+    }, [subscription?.target_type, slackIntegration])\n \n     // If slackChannels aren't loaded, make sure we display only the channel name and not the actual underlying value\n     const slackChannelOptions: LemonSelectMultipleOptionItem[] = useMemo(\n-        () =>\n-            slackChannels\n-                ? slackChannels.map((x) => ({\n-                      key: `${x.id}|#${x.name}`,\n-                      label: x.is_private ? `🔒${x.name}` : `#${x.name}`,\n-                  }))\n-                : [\n-                      {\n-                          key: subscription.target_value,\n-                          label: subscription.target_value?.split('|')?.pop(),\n-                      },\n-                  ],\n-        [slackChannels, subscription.target_value]\n+        () => getSlackChannelOptions(subscription?.target_value, slackChannels),\n+        [slackChannels, subscription?.target_value]\n     )\n \n+    const showSlackMembershipWarning =\n+        subscription.target_value &&\n+        subscription.target_type === 'slack' &&\n+        !isMemberOfSlackChannel(subscription.target_value)\n+\n     return (\n         <>\n             <VerticalForm logic={subscriptionLogic} props={logicProps} formKey=\"subscription\" enableFormOnSubmit>\n@@ -115,245 +112,285 @@ export function EditSubscription({\n \n                     <h4 className=\"mt-05\">{id === 'new' ? 'New' : 'Edit '} Subscription</h4>\n                 </header>\n-                <section>\n-                    {subscription?.created_by ? (\n-                        <UserActivityIndicator\n-                            at={subscription.created_at}\n-                            by={subscription.created_by}\n-                            prefix={'Created'}\n-                            className={'mb'}\n-                        />\n-                    ) : null}\n \n-                    {siteUrlMisconfigured && (\n-                        <AlertMessage type=\"warning\">\n-                            <>\n-                                Your <code>SITE_URL</code> environment variable seems misconfigured. Your{' '}\n-                                <code>SITE_URL</code> is set to{' '}\n-                                <b>\n-                                    <code>{preflight?.site_url}</code>\n-                                </b>{' '}\n-                                but you're currently browsing this page from{' '}\n-                                <b>\n-                                    <code>{window.location.origin}</code>\n-                                </b>\n-                                . <br />\n-                                If this value is not configured correctly PostHog may be unable to correctly send\n-                                Subscriptions.{' '}\n-                                <a\n-                                    target=\"_blank\"\n-                                    rel=\"noopener\"\n-                                    href=\"https://posthog.com/docs/configuring-posthog/environment-variables?utm_medium=in-product&utm_campaign=subcriptions-system-status-site-url-misconfig\"\n-                                >\n-                                    Learn more <IconOpenInNew />\n-                                </a>\n-                            </>\n-                        </AlertMessage>\n-                    )}\n+                {!subscription && subscriptionLoading ? (\n+                    <>\n+                        <Skeleton />\n+                        <Skeleton />\n+                        <Skeleton />\n+                    </>\n+                ) : (\n+                    <section>\n+                        {subscription?.created_by ? (\n+                            <UserActivityIndicator\n+                                at={subscription.created_at}\n+                                by={subscription.created_by}\n+                                prefix={'Created'}\n+                                className={'mb'}\n+                            />\n+                        ) : null}\n \n-                    <Field name={'title'} label={'Name'}>\n-                        <LemonInput placeholder=\"e.g. Weekly team report\" disabled={emailDisabled} />\n-                    </Field>\n+                        {siteUrlMisconfigured && (\n+                            <AlertMessage type=\"warning\">\n+                                <>\n+                                    Your <code>SITE_URL</code> environment variable seems misconfigured. Your{' '}\n+                                    <code>SITE_URL</code> is set to{' '}\n+                                    <b>\n+                                        <code>{preflight?.site_url}</code>\n+                                    </b>{' '}\n+                                    but you're currently browsing this page from{' '}\n+                                    <b>\n+                                        <code>{window.location.origin}</code>\n+                                    </b>\n+                                    . <br />\n+                                    If this value is not configured correctly PostHog may be unable to correctly send\n+                                    Subscriptions.{' '}\n+                                    <a\n+                                        target=\"_blank\"\n+                                        rel=\"noopener\"\n+                                        href=\"https://posthog.com/docs/configuring-posthog/environment-variables?utm_medium=in-product&utm_campaign=subcriptions-system-status-site-url-misconfig\"\n+                                    >\n+                                        Learn more <IconOpenInNew />\n+                                    </a>\n+                                </>\n+                            </AlertMessage>\n+                        )}\n \n-                    {featureFlags[FEATURE_FLAGS.SUBSCRIPTIONS_SLACK] && (\n-                        <Field name={'target_type'} label={'Destination'}>\n-                            <LemonSelect options={targetTypeOptions} {...commonSelectProps} />\n+                        <Field name={'title'} label={'Name'}>\n+                            <LemonInput placeholder=\"e.g. Weekly team report\" disabled={emailDisabled} />\n                         </Field>\n-                    )}\n-\n-                    {subscription.target_type === 'email' ? (\n-                        <>\n-                            {emailDisabled && (\n-                                <AlertMessage type=\"error\">\n-                                    <>\n-                                        Email subscriptions are not currently possible as this PostHog instance isn't{' '}\n-                                        <a\n-                                            href=\"https://posthog.com/docs/self-host/configure/email\"\n-                                            target=\"_blank\"\n-                                            rel=\"noopener\"\n-                                        >\n-                                            configured&nbsp;to&nbsp;send&nbsp;emails&nbsp;\n-                                            <IconOpenInNew />\n-                                        </a>\n-                                        .\n-                                    </>\n-                                </AlertMessage>\n-                            )}\n-\n-                            <Field name={'target_value'} label={'Who do you want to subscribe'}>\n-                                {({ value, onChange }) => (\n-                                    <>\n-                                        <LemonSelectMultiple\n-                                            onChange={(val) => onChange(val.join(','))}\n-                                            value={value?.split(',').filter(Boolean)}\n-                                            filterOption={false}\n-                                            disabled={emailDisabled}\n-                                            mode=\"multiple-custom\"\n-                                            data-attr=\"subscribed-emails\"\n-                                            options={usersLemonSelectOptions(members.map((x) => x.user))}\n-                                            loading={membersLoading}\n-                                            placeholder=\"Enter an email address\"\n-                                        />\n-                                    </>\n-                                )}\n-                            </Field>\n-                            <div className=\"text-small text-muted mt-05\">\n-                                Enter the email addresses of the users you want to share with\n-                            </div>\n \n-                            <Field name={'invite_message'} label={'Message (optional)'}>\n-                                <LemonTextArea placeholder=\"Your message to new subscribers (optional)\" />\n+                        {featureFlags[FEATURE_FLAGS.SUBSCRIPTIONS_SLACK] && (\n+                            <Field name={'target_type'} label={'Destination'}>\n+                                <LemonSelect options={targetTypeOptions} {...commonSelectProps} />\n                             </Field>\n-                        </>\n-                    ) : null}\n+                        )}\n \n-                    {subscription.target_type === 'slack' ? (\n-                        <>\n-                            {slackDisabled && (\n-                                <>\n+                        {subscription.target_type === 'email' ? (\n+                            <>\n+                                {emailDisabled && (\n                                     <AlertMessage type=\"error\">\n                                         <>\n-                                            Slack is not yet configured for this project. You can configure it at{' '}\n-                                            <Link to={`${urls.projectSettings()}#slack`}>\n-                                                {' '}\n-                                                Slack Integration settings\n-                                            </Link>\n+                                            Email subscriptions are not currently possible as this PostHog instance\n+                                            isn't{' '}\n+                                            <a\n+                                                href=\"https://posthog.com/docs/self-host/configure/email\"\n+                                                target=\"_blank\"\n+                                                rel=\"noopener\"\n+                                            >\n+                                                configured&nbsp;to&nbsp;send&nbsp;emails&nbsp;\n+                                                <IconOpenInNew />\n+                                            </a>\n                                             .\n                                         </>\n                                     </AlertMessage>\n-                                </>\n-                            )}\n-                            <Field name={'target_value'} label={'Which Slack channel to send reports to'}>\n-                                {({ value, onChange }) => (\n-                                    <>\n-                                        <LemonSelectMultiple\n-                                            onChange={(val) => onChange(val)}\n-                                            value={value}\n-                                            filterOption={true}\n-                                            disabled={slackDisabled}\n-                                            mode=\"single\"\n-                                            data-attr=\"select-slack-channel\"\n-                                            options={slackChannelOptions}\n-                                            loading={slackChannelsLoading}\n-                                            placeholder={'Pick a Slack channel'}\n-                                        />\n-                                    </>\n                                 )}\n-                            </Field>\n-                            <AlertMessage type=\"info\">\n-                                <>\n-                                    Don't forget to add the <strong>PostHog app</strong> to the channel otherwise\n-                                    Subscriptions will fail to be delivered.{' '}\n-                                    <a\n-                                        href=\"https://posthog.com/docs/integrations/slack\"\n-                                        target=\"_blank\"\n-                                        rel=\"noopener\"\n-                                    >\n-                                        See the Docs for more information\n-                                    </a>\n-                                </>\n-                            </AlertMessage>\n-                        </>\n-                    ) : null}\n \n-                    {subscription.target_type === 'webhook' ? (\n-                        <>\n-                            <Field name={'target_value'} label={'Webhook URL'}>\n-                                <LemonInput placeholder=\"https://example.com/webhooks/1234\" />\n-                            </Field>\n-                            <div className=\"text-small text-muted mt-05\">\n-                                Webhooks will be called with a HTTP POST request. The webhook endpoint should respond\n-                                with a healthy HTTP code (2xx).\n-                            </div>\n-                        </>\n-                    ) : null}\n+                                <Field name={'target_value'} label={'Who do you want to subscribe'}>\n+                                    {({ value, onChange }) => (\n+                                        <>\n+                                            <LemonSelectMultiple\n+                                                onChange={(val) => onChange(val.join(','))}\n+                                                value={value?.split(',').filter(Boolean)}\n+                                                filterOption={false}\n+                                                disabled={emailDisabled}\n+                                                mode=\"multiple-custom\"\n+                                                data-attr=\"subscribed-emails\"\n+                                                options={usersLemonSelectOptions(members.map((x) => x.user))}\n+                                                loading={membersLoading}\n+                                                placeholder=\"Enter an email address\"\n+                                            />\n+                                            <div className=\"text-small text-muted mt-05\">\n+                                                Enter the email addresses of the users you want to share with\n+                                            </div>\n+                                        </>\n+                                    )}\n+                                </Field>\n \n-                    <div>\n-                        <div className=\"ant-form-item-label\">\n-                            <label title=\"Recurrance\">Recurrance</label>\n-                        </div>\n-                        <div className=\"flex gap-05 items-center border-all pa-05 flex-wrap\">\n-                            <span>Send every</span>\n-                            <Field name={'interval'} style={{ marginBottom: 0 }}>\n-                                <LemonSelect {...commonSelectProps} options={intervalOptions} />\n-                            </Field>\n-                            <Field name={'frequency'} style={{ marginBottom: 0 }}>\n-                                <LemonSelect {...commonSelectProps} options={frequencyOptions} />\n-                            </Field>\n+                                <Field name={'invite_message'} label={'Message (optional)'}>\n+                                    <LemonTextArea placeholder=\"Your message to new subscribers (optional)\" />\n+                                </Field>\n+                            </>\n+                        ) : null}\n \n-                            {subscription.frequency === 'weekly' && (\n-                                <>\n-                                    <span>on</span>\n-                                    <Field name={'byweekday'} style={{ marginBottom: 0 }}>\n-                                        {({ value, onChange }) => (\n-                                            <LemonSelect\n-                                                {...commonSelectProps}\n-                                                options={weekdayOptions}\n-                                                value={value ? value[0] : null}\n-                                                onChange={(val) => onChange([val])}\n+                        {subscription.target_type === 'slack' ? (\n+                            <>\n+                                {slackDisabled && (\n+                                    <>\n+                                        <AlertMessage type=\"error\">\n+                                            <>\n+                                                Slack is not yet configured for this project. You can configure it at{' '}\n+                                                <Link to={`${urls.projectSettings()}#slack`}>\n+                                                    {' '}\n+                                                    Slack Integration settings\n+                                                </Link>\n+                                                .\n+                                            </>\n+                                        </AlertMessage>\n+                                    </>\n+                                )}\n+                                <Field name={'target_value'} label={'Which Slack channel to send reports to'}>\n+                                    {({ value, onChange }) => (\n+                                        <>\n+                                            <LemonSelectMultiple\n+                                                onChange={(val) => onChange(val)}\n+                                                value={value}\n+                                                filterOption={true}\n+                                                disabled={slackDisabled}\n+                                                mode=\"single\"\n+                                                data-attr=\"select-slack-channel\"\n+                                                options={slackChannelOptions}\n+                                                loading={slackChannelsLoading}\n                                             />\n-                                        )}\n-                                    </Field>\n-                                </>\n-                            )}\n+                                            <div className=\"text-small text-muted mt-05\">\n+                                                Private channels are only shown if you have{' '}\n+                                                <a\n+                                                    href=\"https://posthog.com/docs/integrations/slack\"\n+                                                    target=\"_blank\"\n+                                                    rel=\"noopener\"\n+                                                >\n+                                                    invited the PostHog bot\n+                                                </a>{' '}\n+                                                to them\n+                                            </div>\n+                                        </>\n+                                    )}\n+                                </Field>\n \n-                            {subscription.frequency === 'monthly' && (\n-                                <>\n-                                    <span>on the</span>\n-                                    <Field name={'bysetpos'} style={{ marginBottom: 0 }}>\n-                                        {({ value, onChange }) => (\n-                                            <LemonSelect\n-                                                {...commonSelectProps}\n-                                                options={bysetposOptions}\n-                                                value={value ? String(value) : null}\n-                                                onChange={(val) => {\n-                                                    onChange(typeof val === 'string' ? parseInt(val, 10) : null)\n-                                                }}\n-                                            />\n-                                        )}\n-                                    </Field>\n-                                    <Field name={'byweekday'} style={{ marginBottom: 0 }}>\n-                                        {({ value, onChange }) => (\n-                                            <LemonSelect\n-                                                {...commonSelectProps}\n-                                                dropdownMatchSelectWidth={false}\n-                                                options={monthlyWeekdayOptions}\n-                                                // \"day\" is a special case where it is a list of all available days\n-                                                value={value ? (value.length === 1 ? value[0] : 'day') : null}\n-                                                onChange={(val) =>\n-                                                    onChange(val === 'day' ? Object.keys(weekdayOptions) : [val])\n-                                                }\n-                                            />\n-                                        )}\n+                                {showSlackMembershipWarning ? (\n+                                    <Field name={'memberOfSlackChannel'}>\n+                                        <AlertMessage type=\"info\">\n+                                            <div className=\"flex gap-05 items-center\">\n+                                                <span>\n+                                                    The PostHog App is not in this channel. Please add it to the channel\n+                                                    otherwise Subscriptions will fail to be delivered.{' '}\n+                                                    <a\n+                                                        href=\"https://posthog.com/docs/integrations/slack\"\n+                                                        target=\"_blank\"\n+                                                        rel=\"noopener\"\n+                                                    >\n+                                                        See the Docs for more information\n+                                                    </a>\n+                                                </span>\n+                                                <LemonButton\n+                                                    type=\"secondary\"\n+                                                    onClick={() => loadSlackChannels()}\n+                                                    loading={slackChannelsLoading}\n+                                                >\n+                                                    Check again\n+                                                </LemonButton>\n+                                            </div>\n+                                        </AlertMessage>\n                                     </Field>\n-                                </>\n-                            )}\n-                            <span>by</span>\n-                            <Field name={'start_date'}>\n-                                {({ value, onChange }) => (\n-                                    <LemonSelect\n-                                        {...commonSelectProps}\n-                                        options={timeOptions}\n-                                        value={dayjs(value).hour().toString()}\n-                                        onChange={(val) => {\n-                                            onChange(\n-                                                dayjs()\n-                                                    .hour(typeof val === 'string' ? parseInt(val, 10) : 0)\n-                                                    .minute(0)\n-                                                    .second(0)\n-                                                    .toISOString()\n-                                            )\n-                                        }}\n-                                    />\n+                                ) : null}\n+                            </>\n+                        ) : null}\n+\n+                        {subscription.target_type === 'webhook' ? (\n+                            <>\n+                                <Field name={'target_value'} label={'Webhook URL'}>\n+                                    <LemonInput placeholder=\"https://example.com/webhooks/1234\" />\n+                                </Field>\n+                                <div className=\"text-small text-muted mt-05\">\n+                                    Webhooks will be called with a HTTP POST request. The webhook endpoint should\n+                                    respond with a healthy HTTP code (2xx).\n+                                </div>\n+                            </>\n+                        ) : null}\n+\n+                        <div>\n+                            <div className=\"ant-form-item-label\">\n+                                <label title=\"Recurrance\">Recurrance</label>\n+                            </div>\n+                            <div className=\"flex gap-05 items-center border-all pa-05 flex-wrap\">\n+                                <span>Send every</span>\n+                                <Field name={'interval'} style={{ marginBottom: 0 }}>\n+                                    <LemonSelect {...commonSelectProps} options={intervalOptions} />\n+                                </Field>\n+                                <Field name={'frequency'} style={{ marginBottom: 0 }}>\n+                                    <LemonSelect {...commonSelectProps} options={frequencyOptions} />\n+                                </Field>\n+\n+                                {subscription.frequency === 'weekly' && (\n+                                    <>\n+                                        <span>on</span>\n+                                        <Field name={'byweekday'} style={{ marginBottom: 0 }}>\n+                                            {({ value, onChange }) => (\n+                                                <LemonSelect\n+                                                    {...commonSelectProps}\n+                                                    options={weekdayOptions}\n+                                                    value={value ? value[0] : null}\n+                                                    onChange={(val) => onChange([val])}\n+                                                />\n+                                            )}\n+                                        </Field>\n+                                    </>\n                                 )}\n-                            </Field>\n+\n+                                {subscription.frequency === 'monthly' && (\n+                                    <>\n+                                        <span>on the</span>\n+                                        <Field name={'bysetpos'} style={{ marginBottom: 0 }}>\n+                                            {({ value, onChange }) => (\n+                                                <LemonSelect\n+                                                    {...commonSelectProps}\n+                                                    options={bysetposOptions}\n+                                                    value={value ? String(value) : null}\n+                                                    onChange={(val) => {\n+                                                        onChange(typeof val === 'string' ? parseInt(val, 10) : null)\n+                                                    }}\n+                                                />\n+                                            )}\n+                                        </Field>\n+                                        <Field name={'byweekday'} style={{ marginBottom: 0 }}>\n+                                            {({ value, onChange }) => (\n+                                                <LemonSelect\n+                                                    {...commonSelectProps}\n+                                                    dropdownMatchSelectWidth={false}\n+                                                    options={monthlyWeekdayOptions}\n+                                                    // \"day\" is a special case where it is a list of all available days\n+                                                    value={value ? (value.length === 1 ? value[0] : 'day') : null}\n+                                                    onChange={(val) =>\n+                                                        onChange(val === 'day' ? Object.keys(weekdayOptions) : [val])\n+                                                    }\n+                                                />\n+                                            )}\n+                                        </Field>\n+                                    </>\n+                                )}\n+                                <span>by</span>\n+                                <Field name={'start_date'}>\n+                                    {({ value, onChange }) => (\n+                                        <LemonSelect\n+                                            {...commonSelectProps}\n+                                            options={timeOptions}\n+                                            value={dayjs(value).hour().toString()}\n+                                            onChange={(val) => {\n+                                                onChange(\n+                                                    dayjs()\n+                                                        .hour(typeof val === 'string' ? parseInt(val, 10) : 0)\n+                                                        .minute(0)\n+                                                        .second(0)\n+                                                        .toISOString()\n+                                                )\n+                                            }}\n+                                        />\n+                                    )}\n+                                </Field>\n+                            </div>\n                         </div>\n-                    </div>\n-                </section>\n+                    </section>\n+                )}\n+\n                 <footer className=\"space-between-items pt\">\n                     <div>\n                         {id !== 'new' && (\n-                            <LemonButton type=\"secondary\" status=\"danger\" onClick={_onDelete}>\n+                            <LemonButton\n+                                type=\"secondary\"\n+                                status=\"danger\"\n+                                onClick={_onDelete}\n+                                disabled={subscriptionLoading}\n+                            >\n                                 Delete subscription\n                             </LemonButton>\n                         )}\n@@ -366,7 +403,7 @@ export function EditSubscription({\n                             type=\"primary\"\n                             htmlType=\"submit\"\n                             loading={isSubscriptionSubmitting}\n-                            disabled={!subscriptionChanged}\n+                            disabled={!subscriptionChanged || subscriptionLoading}\n                         >\n                             {id === 'new' ? 'Create subscription' : 'Save'}\n                         </LemonButton>\ndiff --git a/frontend/src/lib/components/icons.tsx b/frontend/src/lib/components/icons.tsx\nindex 873aab118..5a67fbb20 100644\n--- a/frontend/src/lib/components/icons.tsx\n+++ b/frontend/src/lib/components/icons.tsx\n@@ -1528,3 +1528,14 @@ export function IconSlack(props: React.SVGProps<SVGSVGElement>): JSX.Element {\n         </svg>\n     )\n }\n+\n+export function IconSlackExternal(props: React.SVGProps<SVGSVGElement>): JSX.Element {\n+    return (\n+        <svg width=\"16\" height=\"16\" viewBox=\"0 0 20 20\" {...props}>\n+            <g fill=\"currentColor\" stroke=\"currentColor\" strokeLinejoin=\"round\" strokeWidth=\"1.5\">\n+                <path d=\"M13 4.75 18.25 10 13 15.25 7.75 10 13 4.75Z\" />\n+                <path d=\"M8.01 5.76 7 4.75 1.75 10 7 15.25l1.01-1.01-2.872-3.037a1.75 1.75 0 0 1 0-2.406L8.01 5.76Z\" />\n+            </g>\n+        </svg>\n+    )\n+}\ndiff --git a/frontend/src/scenes/project/Settings/integrationsLogic.ts b/frontend/src/scenes/project/Settings/integrationsLogic.ts\nindex 82818dab7..5da8c0c0d 100644\n--- a/frontend/src/scenes/project/Settings/integrationsLogic.ts\n+++ b/frontend/src/scenes/project/Settings/integrationsLogic.ts\n@@ -137,6 +137,21 @@ export const integrationsLogic = kea<integrationsLogicType>([\n                 return integrations?.find((x) => x.kind == 'slack')\n             },\n         ],\n+\n+        isMemberOfSlackChannel: [\n+            (s) => [s.slackChannels],\n+            (slackChannels) => {\n+                return (channel: string) => {\n+                    if (!slackChannels) {\n+                        return null\n+                    }\n+\n+                    const [channelId] = channel.split('|')\n+\n+                    return slackChannels.find((x) => x.id === channelId)?.is_member\n+                }\n+            },\n+        ],\n         addToSlackButtonUrl: [\n             (s) => [s.instanceSettings],\n             (instanceSettings) => {\ndiff --git a/frontend/src/styles/global.scss b/frontend/src/styles/global.scss\nindex 1ff787487..b49a6ba9c 100644\n--- a/frontend/src/styles/global.scss\n+++ b/frontend/src/styles/global.scss\n@@ -516,6 +516,26 @@ code.code {\n     padding-left: 1rem;\n }\n \n+.px {\n+    padding-left: 1rem;\n+    padding-right: 1rem;\n+}\n+\n+.px-05 {\n+    padding-left: 0.5rem;\n+    padding-right: 0.5rem;\n+}\n+\n+.py {\n+    padding-top: 1rem;\n+    padding-bottom: 1rem;\n+}\n+\n+.py-05 {\n+    padding-top: 0.5rem;\n+    padding-bottom: 0.5rem;\n+}\n+\n .space-y-05 {\n     & > * + * {\n         @extend .mt-05;\ndiff --git a/frontend/src/test/mocks.ts b/frontend/src/test/mocks.ts\nindex d1b7b89bd..4bcb6f10e 100644\n--- a/frontend/src/test/mocks.ts\n+++ b/frontend/src/test/mocks.ts\n@@ -214,22 +214,37 @@ export const mockSlackChannel: SlackChannelType = {\n     id: 'C1234',\n     name: '#general',\n     is_private: false,\n+    is_ext_shared: false,\n+    is_member: false,\n }\n \n export const mockSlackChannels: SlackChannelType[] = [\n     {\n-        id: 'C1234',\n+        id: 'C1',\n         name: 'general',\n         is_private: false,\n+        is_ext_shared: false,\n+        is_member: false,\n     },\n     {\n-        id: 'C1234',\n+        id: 'C2',\n         name: 'dev',\n         is_private: false,\n+        is_ext_shared: false,\n+        is_member: true,\n     },\n     {\n-        id: 'C1234',\n+        id: 'C3',\n         name: 'pineapple-conspiracies',\n         is_private: true,\n+        is_ext_shared: false,\n+        is_member: true,\n+    },\n+    {\n+        id: 'C4',\n+        name: 'external-community',\n+        is_private: false,\n+        is_ext_shared: true,\n+        is_member: false,\n     },\n ]\ndiff --git a/frontend/src/types.ts b/frontend/src/types.ts\nindex 708ea38b6..64e69cace 100644\n--- a/frontend/src/types.ts\n+++ b/frontend/src/types.ts\n@@ -1952,4 +1952,6 @@ export interface SlackChannelType {\n     id: string\n     name: string\n     is_private: boolean\n+    is_ext_shared: boolean\n+    is_member: boolean\n }\ndiff --git a/posthog/api/integration.py b/posthog/api/integration.py\nindex 5eb324865..6c79492e8 100644\n--- a/posthog/api/integration.py\n+++ b/posthog/api/integration.py\n@@ -68,7 +68,13 @@ class IntegrationViewSet(\n \n         slack = SlackIntegration(instance)\n         channels = [\n-            {\"id\": channel[\"id\"], \"name\": channel[\"name\"], \"is_private\": channel[\"is_private\"]}\n+            {\n+                \"id\": channel[\"id\"],\n+                \"name\": channel[\"name\"],\n+                \"is_private\": channel[\"is_private\"],\n+                \"is_member\": channel[\"is_member\"],\n+                \"is_ext_shared\": channel[\"is_ext_shared\"],\n+            }\n             for channel in slack.list_channels()\n         ]\n \ndiff --git a/posthog/models/integration.py b/posthog/models/integration.py\nindex b65cc22d1..eba580ed9 100644\n--- a/posthog/models/integration.py\n+++ b/posthog/models/integration.py\n@@ -57,7 +57,7 @@ class SlackIntegration(object):\n             if not cursor:\n                 break\n \n-        return channels\n+        return sorted(channels, key=lambda x: x[\"name\"])\n \n     @classmethod\n     def integration_from_slack_response(cls, team_id: str, created_by: User, params: Dict[str, str]) -> Integration:\n"
  },
  "addf3fdadbec949735a01d0171af88c1f201c2e4": {
    "hash": "addf3fdadbec949735a01d0171af88c1f201c2e4",
    "message": "fix: add to dashboard permissions (#10791)\n    \n    * fix: add to dashboard permissions\n    \n    * add a test that someone with permissions can still add to a dashboard\n    \n    * add snapshot back",
    "diff": "commit addf3fdadbec949735a01d0171af88c1f201c2e4\nAuthor: Paul D'Ambra <paul@posthog.com>\nDate:   Thu Jul 14 14:40:17 2022 +0100\n\n    fix: add to dashboard permissions (#10791)\n    \n    * fix: add to dashboard permissions\n    \n    * add a test that someone with permissions can still add to a dashboard\n    \n    * add snapshot back\n\ndiff --git a/posthog/api/insight.py b/posthog/api/insight.py\nindex aa8493b71..5c896366f 100644\n--- a/posthog/api/insight.py\n+++ b/posthog/api/insight.py\n@@ -12,6 +12,7 @@ from django_filters.rest_framework import DjangoFilterBackend\n from drf_spectacular.utils import OpenApiResponse\n from rest_framework import exceptions, request, serializers, status, viewsets\n from rest_framework.decorators import action\n+from rest_framework.exceptions import PermissionDenied\n from rest_framework.permissions import IsAuthenticated\n from rest_framework.response import Response\n from rest_framework.settings import api_settings\n@@ -274,6 +275,18 @@ class InsightSerializer(InsightBasicSerializer):\n                 ids_to_add = [id for id in new_dashboard_ids if id not in old_dashboard_ids]\n                 ids_to_remove = [id for id in old_dashboard_ids if id not in new_dashboard_ids]\n \n+                # does this user have permission on dashboards to add... if they are restricted\n+                # it will mean this dashboard becomes restricted because of the patch\n+                dashboard: Dashboard\n+                for dashboard in Dashboard.objects.filter(id__in=ids_to_add):\n+                    if (\n+                        dashboard.get_effective_privilege_level(self.context[\"request\"].user)\n+                        == Dashboard.PrivilegeLevel.CAN_VIEW\n+                    ):\n+                        raise PermissionDenied(\n+                            f\"You don't have permission to add insights to dashboard: {dashboard.id}\"\n+                        )\n+\n                 for dashboard in Dashboard.objects.filter(id__in=ids_to_add):\n                     if dashboard.team != instance.team:\n                         raise serializers.ValidationError(\"Dashboard not found\")\ndiff --git a/posthog/api/test/test_insight.py b/posthog/api/test/test_insight.py\nindex 731a158b7..7346032d6 100644\n--- a/posthog/api/test/test_insight.py\n+++ b/posthog/api/test/test_insight.py\n@@ -1481,6 +1481,72 @@ class TestInsight(ClickhouseTestMixin, LicensedTestMixin, APIBaseTest, QueryMatc\n         )\n         self.assertEqual(response.status_code, status.HTTP_403_FORBIDDEN)\n \n+    def test_non_admin_user_cannot_add_an_insight_to_a_restricted_dashboard(self):\n+        # create insight and dashboard separately with default user\n+        dashboard_restricted: Dashboard = Dashboard.objects.create(\n+            team=self.team, restriction_level=Dashboard.RestrictionLevel.ONLY_COLLABORATORS_CAN_EDIT\n+        )\n+\n+        insight_id, response_data = self._create_insight(data={\"name\": \"starts un-restricted dashboard\"})\n+\n+        # user with no permissions on the dashboard cannot add insight to it\n+        user_without_permissions = User.objects.create_and_join(\n+            organization=self.organization, email=\"no_access_user@posthog.com\", password=None,\n+        )\n+        self.client.force_login(user_without_permissions)\n+\n+        response = self.client.patch(\n+            f\"/api/projects/{self.team.id}/insights/{insight_id}\", {\"dashboards\": [dashboard_restricted.id]},\n+        )\n+        assert response.status_code == status.HTTP_403_FORBIDDEN\n+\n+    def test_non_admin_user_with_privilege_can_add_an_insight_to_a_restricted_dashboard(self):\n+        # create insight and dashboard separately with default user\n+        dashboard_restricted: Dashboard = Dashboard.objects.create(\n+            team=self.team, restriction_level=Dashboard.RestrictionLevel.ONLY_COLLABORATORS_CAN_EDIT\n+        )\n+\n+        insight_id, response_data = self._create_insight(data={\"name\": \"starts un-restricted dashboard\"})\n+\n+        user_with_permissions = User.objects.create_and_join(\n+            organization=self.organization, email=\"with_access_user@posthog.com\", password=None,\n+        )\n+\n+        DashboardPrivilege.objects.create(\n+            dashboard=dashboard_restricted,\n+            user=user_with_permissions,\n+            level=Dashboard.RestrictionLevel.ONLY_COLLABORATORS_CAN_EDIT,\n+        )\n+\n+        self.client.force_login(user_with_permissions)\n+\n+        response = self.client.patch(\n+            f\"/api/projects/{self.team.id}/insights/{insight_id}\", {\"dashboards\": [dashboard_restricted.id]},\n+        )\n+        assert response.status_code == status.HTTP_200_OK\n+\n+    def test_admin_user_can_add_an_insight_to_a_restricted_dashboard(self):\n+        # create insight and dashboard separately with default user\n+        dashboard_restricted: Dashboard = Dashboard.objects.create(\n+            team=self.team, restriction_level=Dashboard.RestrictionLevel.ONLY_COLLABORATORS_CAN_EDIT\n+        )\n+\n+        insight_id, response_data = self._create_insight(data={\"name\": \"starts un-restricted dashboard\"})\n+\n+        # an admin user has implicit permissions on the dashboard and can add the insight to it\n+        admin = User.objects.create_and_join(\n+            organization=self.organization,\n+            email=\"team2@posthog.com\",\n+            password=None,\n+            level=OrganizationMembership.Level.ADMIN,\n+        )\n+        self.client.force_login(admin)\n+\n+        response = self.client.patch(\n+            f\"/api/projects/{self.team.id}/insights/{insight_id}\", {\"dashboards\": [dashboard_restricted.id]},\n+        )\n+        assert response.status_code == status.HTTP_200_OK\n+\n     def test_saving_an_insight_with_new_filters_updates_the_dashboard_tile(self):\n         dashboard_id, _ = self._create_dashboard({})\n         insight_id, _ = self._create_insight(\n"
  }
}